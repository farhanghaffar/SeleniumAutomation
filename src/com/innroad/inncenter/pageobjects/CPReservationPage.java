
package com.innroad.inncenter.pageobjects;

import static org.junit.Assert.assertThat;
import static org.testng.Assert.assertEquals;
import static org.testng.Assert.assertNotEquals;
import static org.testng.Assert.assertTrue;

import java.io.BufferedInputStream;
import java.io.File;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.text.DateFormat;
import java.text.DecimalFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Random;
import java.util.StringTokenizer;
import java.util.TimeZone;

import org.apache.commons.lang3.StringUtils;
import org.apache.log4j.Logger;
import org.apache.pdfbox.cos.COSDocument;
import org.apache.pdfbox.pdfparser.PDFParser;
import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.util.PDFTextStripper;
import org.apache.pdfbox.util.PDFTextStripperByArea;
import org.hamcrest.CoreMatchers;
import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.Keys;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.interactions.Actions;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.Select;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.testng.Assert;
import org.testng.SkipException;

import com.innroad.inncenter.pages.NewTapeChart;
import com.innroad.inncenter.properties.OR;
import com.innroad.inncenter.properties.OR_Reservation;
import com.innroad.inncenter.utils.ESTTimeZone;
import com.innroad.inncenter.utils.Utility;
import com.innroad.inncenter.waits.Wait;
import com.innroad.inncenter.webelements.Elements_CPReservation;
import com.innroad.inncenter.webelements.Elements_FolioLineItemsVoid;
import com.innroad.inncenter.webelements.Elements_Reservation;
import com.innroad.inncenter.webelements.Elements_Reservation_SearchPage;
import com.innroad.inncenter.webelements.Elements_TapeChart;

public class CPReservationPage {
	private static final String TotalNoFee = null;
	ArrayList<String> test_steps = new ArrayList<>();
	public static Logger reslogger = Logger.getLogger("CPReservationPage");

	public ArrayList<String> click_NewReservation(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
        Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation);
        Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation), driver);
		res.CP_NewReservation.click();
		test_steps.add("Clicking on New Reservation");
		reslogger.info("Clicking on New Reservation");
		try {
			Wait.waitForElementToBeGone(driver, res.CP_NewReservation, 50);
			// Wait.explicit_wait_visibilityof_webelement(res.CP_NewReservation,
			// driver);
		} catch (Exception e) {
			Wait.explicit_wait_visibilityof_webelement(res.CP_NewReservation, driver);
			res.CP_NewReservation.click();
			reslogger.info("Again Click on New Reservation button");
			Wait.waitForElementToBeGone(driver, res.CP_NewReservation, 50);
		}
		return test_steps;
	}

	public void select_CheckInDate(WebDriver driver, ArrayList<String> test_steps, String CheckInDate)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		String loading = "(//div[@class='ir-loader-in'])[2]";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CheckinCal);
		res.CP_NewReservation_CheckinCal.click();
		String monthYear = Utility.get_MonthYear(CheckInDate);
		String day = Utility.getDay(CheckInDate);
		reslogger.info(monthYear);
		String header = null, headerText = null, next = null, date;
		for (int i = 1; i <= 12; i++) {
			header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
			headerText = driver.findElement(By.xpath(header)).getText();
			if (headerText.equalsIgnoreCase(monthYear)) {
				date = "//td[contains(@class,'day') and text()='" + day + "']";
				Wait.WaitForElement(driver, date);
				int size = driver.findElements(By.xpath(date)).size();
				for (int k = 1; k <= size; k++) {
					date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + k + "]";
					String classText = driver.findElement(By.xpath(date)).getAttribute("class");
					if (!classText.contains("old")) {
						driver.findElement(By.xpath(date)).click();
						test_steps.add("Selecting checkin date : " + CheckInDate);
						reslogger.info("Selecting checkin date : " + CheckInDate);
						break;
					}
				}
				break;
			} else {
				next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
				Wait.WaitForElement(driver, next);
				driver.findElement(By.xpath(next)).click();
				Wait.wait2Second();
			}
		}
	}

	public void select_CheckoutDate(WebDriver driver, ArrayList test_steps, String CheckoutDate)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CheckoutCal);
		res.CP_NewReservation_CheckoutCal.click();
		String monthYear = Utility.get_MonthYear(CheckoutDate);
		String day = Utility.getDay(CheckoutDate);
		reslogger.info(monthYear);
		String header = null, headerText = null, next = null, date;
		for (int i = 1; i <= 12; i++) {
			header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
			headerText = driver.findElement(By.xpath(header)).getText();
			if (headerText.equalsIgnoreCase(monthYear)) {
				date = "//td[contains(@class,'day') and text()='" + day + "']";
				Wait.WaitForElement(driver, date);
				int size = driver.findElements(By.xpath(date)).size();
				for (int k = 1; k <= size; k++) {
					date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + k + "]";
					String classText = driver.findElement(By.xpath(date)).getAttribute("class");
					if (!classText.contains("old")) {
						driver.findElement(By.xpath(date)).click();
						test_steps.add("Selecting checkout date : " + CheckoutDate);
						reslogger.info("Selecting checkout date : " + CheckoutDate);
						break;
					}
				}

				break;
			} else {
				next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
				Wait.WaitForElement(driver, next);
				driver.findElement(By.xpath(next)).click();
				Wait.wait2Second();
			}
		}
	}

	public ArrayList<String> enter_Adults(WebDriver driver, ArrayList<String> test_steps, String Adults) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Adults), driver);
		res.CP_NewReservation_Adults.clear();
		res.CP_NewReservation_Adults.sendKeys(Adults);
		test_steps.add("Enter No of adults : " + Adults);
		reslogger.info("Enter No of adults : " + Adults);
		return test_steps;
	}

	public ArrayList<String> enter_Children(WebDriver driver, ArrayList<String> test_steps, String Children) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Children), driver);
		res.CP_NewReservation_Children.clear();
		res.CP_NewReservation_Children.sendKeys(Children);
		test_steps.add("Enter No of Children : " + Children);
		reslogger.info("Enter No of Children : " + Children);
		return test_steps;

	}

	public ArrayList<String> select_Rateplan(WebDriver driver, ArrayList<String> test_steps, String Rateplan,
			String PromoCode) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Rateplan);
		res.CP_NewReservation_Rateplan.click();
		String rate = "//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[contains(text(),'"
				+ Rateplan + "')]/..";
		reslogger.info(rate);
		Wait.WaitForElement(driver, rate);
		driver.findElement(By.xpath(rate)).click();
		test_steps.add("Selecting the rateplan : " + Rateplan);
		reslogger.info("Selecting the rateplan : " + Rateplan);
		if (Rateplan.contains("Promo")) {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PromoCode);
			res.CP_NewReservation_PromoCode.clear();
			res.CP_NewReservation_PromoCode.sendKeys(PromoCode);
			test_steps.add("Enter promocode : " + PromoCode);
			reslogger.info("Enter promocode : " + PromoCode);
		}
		return test_steps;
	}

	public ArrayList<String> clickOnFindRooms(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_FindRooms);
		res.CP_NewReservation_FindRooms.click();
		test_steps.add("Clicking on FindRooms");
		reslogger.info("Clicking on FindRooms");
		/*
		 * int count = 0; while (true) { if (driver.findElement(By.
		 * xpath("//section[@class='ir-roomClassDetails manual-override']")).
		 * isDisplayed()) { break; } else if (count == 20) { break; } else {
		 * count++; Wait.wait1Second(); } }
		 * reslogger.info("Waited to loading symbol");
		 */return test_steps;
	}

	// updated by farhan
	public ArrayList<String> selectRoom(WebDriver driver, ArrayList<String> test_steps, String RoomClass,
			String IsAssign, String Account) throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//div[2]//span";
		Utility.app_logs.info("IsAssign: " + IsAssign);

		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]//..//..//..//following-sibling::div//div//select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"

					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);

			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else if (IsAssign.equalsIgnoreCase("Yes")) {

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div/button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				Wait.waitForElementToBeClickable(By.xpath(expand), driver);
				WebElement elementExpand = driver.findElement(By.xpath(expand));
				Utility.ScrollToElement_NoWait(elementExpand, driver);
				elementExpand.click();

				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
				reslogger.info(roomnum);
				List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
				Utility.app_logs.info(getRoomNumber.size());
				String getMinimumNumber = getRoomNumber.get(1).getText();
				Utility.app_logs.info("getMinimumNumber: " + getMinimumNumber);

				String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
				Utility.app_logs.info("getMaxmumNumber: " + getMaxmumNumber);
				getMaxmumNumber = getMaxmumNumber.trim();
				int maxNumber = Integer.parseInt(getMaxmumNumber);
				int minNumber = Integer.parseInt(getMinimumNumber);

				Utility.app_logs.info("maxNumber : " + maxNumber);
				Utility.app_logs.info("maxNumber : " + maxNumber);

				Random random = new Random();
				int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
				IsAssign = String.valueOf(randomNumber);
				boolean isBreak = false;
				for (int j = 0; j < 5; j++) {
					Utility.app_logs.info("randomNumber: " + randomNumber);
					for (int i = 1; i < getRoomNumber.size(); i++) {
						// Utility.app_logs.info("in loop " + i);
						String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
						getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
						if (getRoomNumberFromOptions.equals(IsAssign)) {
							isBreak = true;
							break;
						}

					}
					if (isBreak == false) {
						random = new Random();
						randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
						IsAssign = String.valueOf(randomNumber);
					}
					if (isBreak) {
						break;
					}

				}
				System.out.print(" Random Number is :" + randomNumber);

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				test_steps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");

			} else {

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				Wait.waitForElementToBeClickable(By.xpath(expand), driver);
				WebElement elementExpand = driver.findElement(By.xpath(expand));
				Utility.ScrollToElement_NoWait(elementExpand, driver);
				elementExpand.click();

				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
				Utility.app_logs.info(roomnum);
				List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
				Utility.app_logs.info(getRoomNumber.size());
				String getMinimumNumber = getRoomNumber.get(1).getText();
				Utility.app_logs.info("getMinimumNumber: " + getMinimumNumber);

				String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
				Utility.app_logs.info("getMaxmumNumber: " + getMaxmumNumber);
				getMaxmumNumber = getMaxmumNumber.trim();
				int maxNumber = Integer.parseInt(getMaxmumNumber);
				int minNumber = Integer.parseInt(getMinimumNumber);

				Utility.app_logs.info("maxNumber : " + maxNumber);
				Utility.app_logs.info("maxNumber : " + maxNumber);

				Random random = new Random();
				int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
				IsAssign = String.valueOf(randomNumber);
				boolean isBreak = false;
				for (int j = 0; j < 5; j++) {
					Utility.app_logs.info("randomNumber: " + randomNumber);
					for (int i = 1; i < getRoomNumber.size(); i++) {
						Utility.app_logs.info("in loop " + i);
						String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
						getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
						if (getRoomNumberFromOptions.equals(IsAssign)) {
							isBreak = true;
							break;
						}

					}
					if (isBreak == false) {
						random = new Random();
						randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
						IsAssign = String.valueOf(randomNumber);
					}
					if (isBreak) {
						break;
					}

				}
				System.out.print(" Random Number is :" + randomNumber);

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				test_steps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]//..//..//..//following-sibling::div//span[contains(text(),'SELECT')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 10) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}

			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);

			// Utility.app_logs.info("Waited to loading symbol");

			// Utility.app_logs.info("Rule Count : " + ruleCount);

			/*
			 * if (ruleCount > 1) { Wait.wait5Second(); String rules =
			 * "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']"
			 * ;
			 * 
			 * if (driver.findElements(By.xpath(rules)).size() > 0) {
			 * Wait.wait2Second(); driver.findElement(By.xpath(rules)).click();
			 * test_steps.add(
			 * "Selecting this room will violate the following rules : Are you sure you want to proceed? : yes"
			 * ); reslogger.info(
			 * "Selecting this room will violate the following rules : Are you sure you want to proceed? : yes"
			 * );
			 * 
			 * loading = "(//div[@class='ir-loader-in'])[2]"; counter = 0; while
			 * (true) { if
			 * (!driver.findElement(By.xpath(loading)).isDisplayed()) { break; }
			 * else if (counter == 4) { break; } else { counter++;
			 * Wait.wait2Second(); } } } }
			 */ if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
				String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
				Wait.WaitForElement(driver, policy);
				driver.findElement(By.xpath(policy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");

				loading = "(//div[@class='ir-loader-in'])[2]";
				counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
		return test_steps;
	}

	public ArrayList<String> selectRoom1(WebDriver driver, ArrayList<String> test_steps, String RoomClass,
			String IsAssign, String Account) throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";

		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else if (IsAssign.equalsIgnoreCase("Yes")) {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				reslogger.info(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				Random random = new Random();
				int randomNumber = random.nextInt(count1 - 1) + 1;
				reslogger.info("count : " + count1);
				reslogger.info("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			} else {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				driver.findElement(By.xpath(expand)).click();

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				test_steps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}
			if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
				String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
				Wait.WaitForElement(driver, policy);
				driver.findElement(By.xpath(policy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");

				loading = "(//div[@class='ir-loader-in'])[2]";
				counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
		return test_steps;
	}

	public String RoomNO;

	public void select_SpecificRoom(WebDriver driver, ArrayList test_steps, String RoomClass, String IsAssign,
			String Account) throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";

		Wait.WaitForElement(driver, room);

		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				reslogger.info(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				/*
				 * <<<<<<< HEAD Random random = new Random(); int randomNumber =
				 * random.nextInt(count1 - 1) + 1; Utility.app_logs.info("count : "
				 * + count1); Utility.app_logs.info("randomNumber : " +
				 * randomNumber); ======= Random random = new Random(); int
				 * randomNumber = random.nextInt(count1 - 1) + 1;
				 * reslogger.info("count : " + count1);
				 * reslogger.info("randomNumber : " + randomNumber); >>>>>>>
				 * b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
				 */

				int randomNumber = count1;
				reslogger.info("count : " + count1);
				reslogger.info("randomNumber : " + randomNumber);

				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				RoomNO = driver.findElement(By.xpath(expand)).getText();
				reslogger.info("Room No Is : " + RoomNO);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}
			if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
				String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
				Wait.WaitForElement(driver, policy);
				driver.findElement(By.xpath(policy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");

				loading = "(//div[@class='ir-loader-in'])[2]";
				counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
	}

	public Double deposit(WebDriver driver, ArrayList test_steps, String IsDepositOverride,
			String DepositOverrideAmount) throws InterruptedException {
		// Wait.wait5Second();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_DepositAmount);
		String deposit = res.CP_NewReservation_DepositAmount.getText();
		test_steps.add("Deposit amount is : " + deposit);
		reslogger.info("Deposit amount is : " + deposit);
		deposit = deposit.trim();
		char ch = deposit.charAt(0);
		deposit = deposit.replace("$", "");
		deposit = deposit.trim();
		Double d = Double.parseDouble(deposit);

		if (IsDepositOverride.equalsIgnoreCase("Yes") && d > 0) {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_OverrideDeposit);
			res.CP_NewReservation_OverrideDeposit.click();
			test_steps.add("Clicking on override deposit amount");
			reslogger.info("Clicking on override deposit amount");
			Wait.wait2Second();
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_OverrideDepositAmoount);
			res.CP_NewReservation_OverrideDepositAmoount.sendKeys(DepositOverrideAmount);
			test_steps.add("Override deposit amount is : " + ch + " " + DepositOverrideAmount);
			reslogger.info("Override deposit amount is : " + ch + " " + DepositOverrideAmount);
			d = Double.parseDouble(DepositOverrideAmount.trim());
		}
		return d;
	}

	public void InputdepositDue(WebDriver driver, ArrayList<String> test_steps, String DepositOverrideAmount)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_OverrideDeposit);
		Utility.ScrollToElement(res.CP_NewReservation_OverrideDeposit, driver);
		res.CP_NewReservation_OverrideDeposit.click();
		test_steps.add("Clicking on override deposit amount");
		reslogger.info("Clicking on override deposit amount");
		Wait.wait2Second();
		Utility.ScrollToElement(res.CP_NewReservation_OverrideDepositAmoount, driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_OverrideDepositAmoount);
		res.CP_NewReservation_OverrideDepositAmoount.sendKeys(DepositOverrideAmount);
		test_steps.add("Override deposit amount is : " + DepositOverrideAmount);
		reslogger.info("Override deposit amount is : " + DepositOverrideAmount);

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <clickNext> ' Description: <click on next button> ' Input
	 * parameters: < String array list> ' Return value: <array list> ' Created
	 * By: ' Modified By | Description of Modification:
	 * ------------------------------------------ Developer name:<Farhan>:
	 * 1.Step modified 2.Step modified
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickNext(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {

		Elements_CPReservation elementReservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Next);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Next), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_Next), driver);
		Utility.ScrollToElement(elementReservation.CP_NewReservation_Next, driver);
		Wait.wait5Second();
		try {
			elementReservation.CP_NewReservation_Next.click();
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, elementReservation.CP_NewReservation_Next);
		}

		testSteps.add("Clicking on next button");
		reslogger.info("Clicking on next button");
		int count = 0;
		while (true) {
			if (driver.findElement(By.xpath("//span[contains(text(),'Contact Info')]")).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
		return testSteps;
	}

	public ArrayList<String> enter_GuestName(WebDriver driver, ArrayList<String> test_steps, String Salutation,
			String GuestFirstName,

			String GuestLastName) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		verifySpinerLoading(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_GuestSalutation), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_GuestSalutation), driver);
		Utility.ScrollToElement(res.CP_NewReservation_GuestSalutation, driver);
		res.CP_NewReservation_GuestSalutation.click();
		String sal = "//span[contains(text(),'" + Salutation + "')]/../..";
		Utility.app_logs.info("sal: " + sal);
		Wait.WaitForElement(driver, sal);
		driver.findElement(By.xpath(sal)).click();

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
		res.CP_NewReservation_GuestFirstName.sendKeys(GuestFirstName);
		test_steps.add("Guest First Name : <b>" + GuestFirstName + "</b>");
		reslogger.info("Guest First Name : <b>" + GuestFirstName + "</b>");

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);
		res.CP_NewReservation_GuestLastName.sendKeys(GuestLastName);
		test_steps.add("Guest Last Name : <b>" + GuestLastName + "</b>");
		reslogger.info("Guest Last Name : <b>" + GuestLastName + "</b>");
		return test_steps;
	}

	public void enterGuestNameWhileCopy(WebDriver driver, ArrayList<String> test_steps, String GuestName) {
		String guest = "(//label[text()='Guest ']/preceding-sibling::input)[2]";
		Wait.WaitForElement(driver, guest);
		driver.findElement(By.xpath(guest)).sendKeys(GuestName);
		test_steps.add("Guest First Name : <b>" + GuestName + "</b>");
		reslogger.info("Guest First Name : <b>" + GuestName + "</b>");
	}

	public void enter_ContactName(WebDriver driver, ArrayList<String> test_steps, String Salutation,
			String ContactFirstName, String ContactLastName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		if (!Salutation.isEmpty()) {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
			res.CP_NewReservation_GuestSalutation.click();
			String sal = "//span[contains(text(),'" + Salutation + "')]/../..";

			Wait.WaitForElement(driver, sal);
			driver.findElement(By.xpath(sal)).click();
		}
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ContactFirstName);
		res.CP_NewReservation_ContactFirstName.sendKeys(ContactFirstName);
		test_steps.add("Contact First Name : " + ContactFirstName);
		reslogger.info("Contact First Name : " + ContactFirstName);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ContactLastName);
		res.CP_NewReservation_ContactLastName.sendKeys(ContactLastName);
		test_steps.add("Contact Last Name : " + ContactLastName);
		reslogger.info("Contact Last Name : " + ContactLastName);
	}

	public void enter_Phone(WebDriver driver, ArrayList<String> test_steps, String PhoneNumber,
			String AltenativePhone) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Phone);
		res.CP_NewReservation_Phone.clear();
		res.CP_NewReservation_Phone.sendKeys(PhoneNumber);
		test_steps.add("Enter Phone Number : " + PhoneNumber);
		reslogger.info("Enter Phone Number : " + PhoneNumber);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AltenativePhone);
		res.CP_NewReservation_AltenativePhone.clear();
		res.CP_NewReservation_AltenativePhone.sendKeys(AltenativePhone);
		test_steps.add("Enter AltenativePhone Number : " + AltenativePhone);
		reslogger.info("Enter AltenativePhone Number : " + AltenativePhone);
	}

	public void enter_Email(WebDriver driver, ArrayList<String> test_steps, String Email) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Email);
		res.CP_NewReservation_Email.clear();
		res.CP_NewReservation_Email.sendKeys(Email);
		test_steps.add("Enter Email : " + Email);
		reslogger.info("Enter Email : " + Email);
	}

	public void enter_Account(WebDriver driver, ArrayList<String> test_steps, String Account, String AccountType)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Account);
		String accountdisplay = "//label[contains(text(),'Account')]/..//i[starts-with(@class,'rightIcon demo-icon icon-pencil')]";
		WebElement ele = driver.findElement(By.xpath(accountdisplay));
		if (!ele.isDisplayed()) {
			if (Account.equalsIgnoreCase("") || Account.isEmpty()) {
				reslogger.info("No Account");
			} else {
				res.CP_NewReservation_Account.sendKeys(Account);
				test_steps.add("Enter Account : " + Account);
				reslogger.info("Enter Account : " + Account);
				Wait.wait2Second();
				String account = "//b[contains(text(),'" + Account.trim() + "')]/../../..";
				Wait.WaitForElement(driver, account);
				driver.findElement(By.xpath(account)).click();
				String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]/following-sibling::div//button[contains(text(),'Yes')]";
				Wait.WaitForElement(driver, dataYes);
				driver.findElement(By.xpath(dataYes)).click();
				test_steps.add(
						"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
				reslogger.info(
						"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
				Wait.wait2Second();
				String policyYes = "//div[contains(text(),'Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?')]/following-sibling::div//button[contains(text(),'Yes')]";
				Wait.WaitForElement(driver, policyYes);
				driver.findElement(By.xpath(policyYes)).click();
				test_steps.add(
						"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes");
				reslogger.info(
						"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes");

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
				res.CP_NewReservation_PaymentMethod.click();
				String type = null;

				if (AccountType.contentEquals("Corp") || AccountType.contains("corp") || AccountType.contains("Corp")) {
					type = "Account (Corp/Member)";
				}

				if (AccountType.contentEquals("Corp") || AccountType.contains("corp") || AccountType.contains("Corp")) {
					type = "Account (Unit Owner)";
				}

				String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'"
						+ type + "')]";
				Wait.WaitForElement(driver, paymentMethod);
				driver.findElement(By.xpath(paymentMethod)).click();
				String acc = "//label[text()='Account Name ']/preceding-sibling::input";
				Wait.WaitForElement(driver, acc);
				String accName = driver.findElement(By.xpath(acc)).getText();
				if (accName.contains(Account)) {
					test_steps.add("Account successfully associated : " + Account);
					reslogger.info("Account successfully associated : " + Account);
				}
			}
		} else {
			test_steps.add("Account Aleady exists");
			reslogger.info("Account Aleady exists");

			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
			res.CP_NewReservation_PaymentMethod.click();
			String type = null;

			if (AccountType.contentEquals("Corp") || AccountType.contains("corp") || AccountType.contains("Corp")) {
				type = "Account (Corp/Member)";
			}

			if (AccountType.contentEquals("Unit Owner") || AccountType.contains("Unit")
					|| AccountType.contains("unit owner")) {
				type = "Account (Unit Owner)";
			}
			String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'"
					+ type + "')]";
			Wait.WaitForElement(driver, paymentMethod);
			driver.findElement(By.xpath(paymentMethod)).click();
			String acc = "(//label[text()='Account Name '])[1]/preceding-sibling::input";
			Wait.wait2Second();
			Wait.WaitForElement(driver, acc);
			String accName = driver.findElement(By.xpath(acc)).getText();
			if (accName.contains(Account)) {
				test_steps.add("Account successfully associated : " + Account);
				reslogger.info("Account successfully associated : " + Account);
			}
		}
	}

	public void enter_Address(WebDriver driver, ArrayList<String> test_steps, String Address1, String Address2,
			String Address3) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Address1);
		res.CP_NewReservation_Address1.clear();
		res.CP_NewReservation_Address1.sendKeys(Address1);
		test_steps.add("Enter Address1 : " + Address1);
		reslogger.info("Enter Address1 : " + Address1);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Address2);
		res.CP_NewReservation_Address2.clear();
		res.CP_NewReservation_Address2.sendKeys(Address2);
		test_steps.add("Enter Address2 : " + Address2);
		reslogger.info("Enter Address1 : " + Address2);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Address3);
		res.CP_NewReservation_Address3.clear();
		res.CP_NewReservation_Address3.sendKeys(Address3);
		test_steps.add("Enter Address3 : " + Address3);
		reslogger.info("Enter Address3 : " + Address3);
	}

	public void enter_City(WebDriver driver, ArrayList<String> test_steps, String City) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_City);
		res.CP_NewReservation_City.clear();
		res.CP_NewReservation_City.sendKeys(City);
		test_steps.add("Enter City : " + City);
		reslogger.info("Enter City : " + City);
	}

	public void select_Country(WebDriver driver, ArrayList<String> test_steps, String Country) {
		String button = "//select[@name='country']/following-sibling::div/button";
		Wait.WaitForElement(driver, button);
		driver.findElement(By.xpath(button)).click();

		String cntry = "//select[@name='country']/following-sibling::div//ul/li//span[contains(text(),'"
				+ Country.trim() + "')]";
		Wait.WaitForElement(driver, cntry);
		driver.findElement(By.xpath(cntry)).click();
		test_steps.add("Selected Country : " + Country);
		reslogger.info("Selected Country : " + Country);
	}

	public void select_State(WebDriver driver, ArrayList<String> test_steps, String State) {
		String button = "//select[@name='state']/following-sibling::div";
		Wait.WaitForElement(driver, button);

		if (driver.findElements(By.xpath("(//select[@name='state'])[1]/option")).size() > 1) {
			button = "//select[@name='state']/following-sibling::div/button";
			driver.findElement(By.xpath(button)).click();
			String cntry = "//select[@name='state']/following-sibling::div//ul/li//span[contains(text(),'"
					+ State.trim() + "')]";
			Wait.WaitForElement(driver, cntry);
			driver.findElement(By.xpath(cntry)).click();
			test_steps.add("Selected City : " + State);
			reslogger.info("Selected City : " + State);
		} else {
			test_steps.add("State field disabled");
			reslogger.info("State field disabled");
		}
	}

	public void enter_PostalCode(WebDriver driver, ArrayList<String> test_steps, String PostalCode) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PostalCode);
		res.CP_NewReservation_PostalCode.clear();
		res.CP_NewReservation_PostalCode.sendKeys(PostalCode);
		test_steps.add("Enter PostalCode : " + PostalCode);
		reslogger.info("Enter PostalCode : " + PostalCode);
	}

	public void uncheck_CreateGuestProfile(WebDriver driver, ArrayList<String> test_steps, String IsGuesProfile) throws InterruptedException {
	    verifySpinerLoading(driver);
	    Wait.wait5Second();
        verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CreateGuestProfile);
		if (IsGuesProfile.equalsIgnoreCase("Yes")) {
			if (!res.CP_NewReservation_CreateGuestProfile.isSelected()) {
				driver.findElement(By.xpath("//span[contains(text(),'Create Guest Profile')]/..")).click();
				test_steps.add("Create Guest Profile selected");
				reslogger.info("Create Guest Profile selected");
			} else {
				test_steps.add("Create Guest Profile selected");
				reslogger.info("Create Guest Profile selected");
			}
		} else {
			if (res.CP_NewReservation_CreateGuestProfile.isSelected()) {
				driver.findElement(By.xpath("//span[contains(text(),'Create Guest Profile')]/..")).click();
				test_steps.add("Create Guest Profile unselected");
				reslogger.info("Create Guest Profile unselected");
			} else {
				test_steps.add("Create Guest Profile unselected");
				reslogger.info("Create Guest Profile unselected");
			}
		}
	}

	public ArrayList<String> enter_MailingAddress(WebDriver driver, ArrayList<String> test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String PhoneNumber, String AltenativePhone, String Email,
			String Account, String AccountType, String Address1, String Address2, String Address3, String City,
			String Country, String State, String PostalCode, String IsGuesProfile) throws InterruptedException {
		enter_GuestName(driver, test_steps, Salutation, GuestFirstName, GuestLastName);
		uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
		enter_Phone(driver, test_steps, PhoneNumber, AltenativePhone);
		// enter_Phone(driver, test_steps, PhoneNumber, AltenativePhone);
		enter_Email(driver, test_steps, Email);
		enter_Address(driver, test_steps, Address1, Address2, Address3);
		enter_City(driver, test_steps, City);
		select_Country(driver, test_steps, Country);
		select_State(driver, test_steps, State);
		enter_PostalCode(driver, test_steps, PostalCode);
		//enter_Account(driver, test_steps, Account, AccountType);
		enter_Account(driver, test_steps, Account, AccountType);
		//enter_Account(driver, test_steps, Account, AccountType);
		return test_steps;
	}

	public void enter_MailingAddress_OnUnchecked_CreateGuestProfile(WebDriver driver, ArrayList<String> test_steps,
			String Salutation, String GuestFirstName, String GuestLastName, String IsGuesProfile)
			throws InterruptedException {
		enter_GuestName(driver, test_steps, Salutation, GuestFirstName, GuestLastName);
		uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
	}

	public ArrayList<String> enter_PaymentDetails(WebDriver driver, ArrayList<String> test_steps, String PaymentType,
			String CardNumber, String NameOnCard, String CardExpDate) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
		res.CP_NewReservation_PaymentMethod.click();

		if (PaymentType.equalsIgnoreCase("Swipe")) {
			String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'MC')]";
			Wait.WaitForElement(driver, paymentMethod);
			driver.findElement(By.xpath(paymentMethod)).click();
			res.CP_NewReservation_Swipe.click();
			test_steps.add("Clicking in Swipe");
			reslogger.info("Clicking in Swipe");
			Wait.wait1Second();
			String CC = "(//label[text()='Credit Card Number']/preceding-sibling::input)[2]";
			Wait.WaitForElement(driver, CC);
			driver.findElement(By.xpath(CC)).sendKeys(CardNumber);
			test_steps.add("Enter CardNumber : " + CardNumber);
			reslogger.info("Enter CardNumber : " + CardNumber);
			res.CP_NewReservation_CardNumber.sendKeys(Keys.TAB);
			Wait.wait2Second();
		} else {
			String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'"
					+ PaymentType.trim() + "')]";
			Wait.WaitForElement(driver, paymentMethod);
			driver.findElement(By.xpath(paymentMethod)).click();
			test_steps.add("Selected PaymentType : " + PaymentType);
			reslogger.info("Selected PaymentType : " + PaymentType);
			if (PaymentType.trim().equalsIgnoreCase("MC") || PaymentType.trim().equalsIgnoreCase("Visa")
					|| PaymentType.trim().equalsIgnoreCase("Amex") || PaymentType.trim().equalsIgnoreCase("Discover")) {
				res.CP_NewReservation_CardNumber.sendKeys(CardNumber);
				test_steps.add("Enter CardNumber : " + CardNumber);
				reslogger.info("Enter CardNumber : " + CardNumber);
				res.CP_NewReservation_NameOnCard.clear();
				res.CP_NewReservation_NameOnCard.sendKeys(NameOnCard);
				test_steps.add("Enter Name On Card : " + NameOnCard);
				reslogger.info("Enter Name On Card : " + NameOnCard);
				res.CP_NewReservation_CardExpDate.clear();
				res.CP_NewReservation_CardExpDate.sendKeys(CardExpDate);
				test_steps.add("Enter Card ExpDate : " + CardExpDate);
				reslogger.info("Enter Card ExpDate : " + CardExpDate);
			}
		}
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CreateGuestProfile);
		if (!driver.findElement(By.xpath("//small[contains(text(),'Address')]/../../following-sibling::div//input"))
				.isSelected()) {
			driver.findElement(By.xpath("//small[contains(text(),'Address')]/../../following-sibling::div/label"))
					.click();
		}
		return test_steps;
	}

	public void select_HouseAccoutAsPayment(WebDriver driver, ArrayList<String> test_steps, String AccountName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
		res.CP_NewReservation_PaymentMethod.click();
		String houseAcc = "//span[text()='Account (House Account)']/..";
		Wait.WaitForElement(driver, houseAcc);
		driver.findElement(By.xpath(houseAcc)).click();
		test_steps.add("Selecting Account (House Account) as payment method");
		reslogger.info("Selecting Account (House Account) as payment method");

		String input = "//input[@name='houseaccount-autocomplete']";

		Wait.WaitForElement(driver, input);
		driver.findElement(By.xpath(input)).sendKeys(AccountName);
		String acc = "//b[text()='" + AccountName.trim() + "']";
		Wait.WaitForElement(driver, acc);
		driver.findElement(By.xpath(acc)).click();
		test_steps.add("Selecting Account (House Account) as payment method and the house account is : " + AccountName);
		reslogger.info("Selecting Account (House Account) as payment method and the house account is : " + AccountName);

	}
	
	public void select_GiftCertificateAsPayment(WebDriver driver, ArrayList<String> test_steps, String AccountName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
		res.CP_NewReservation_PaymentMethod.click();
		String gsAcc = "//span[text()='Gift Certificate']/..";
		Wait.WaitForElement(driver, gsAcc);
		driver.findElement(By.xpath(gsAcc)).click();
		test_steps.add("Selecting Gift Certificate as payment method");
		reslogger.info("Selecting Gift Certificate as payment method");

		String input = "//input[@name='giftCertificate-autocomplete']";

		Wait.WaitForElement(driver, input);
		driver.findElement(By.xpath(input)).sendKeys(AccountName);
		String acc = "//b[text()='" + AccountName.trim() + "']";
		Wait.WaitForElement(driver, acc);
		driver.findElement(By.xpath(acc)).click();
		test_steps.add("Selecting Gift Certificate as payment method and the house account is : " + AccountName);
		reslogger.info("Selecting Gift Certificate as payment method and the house account is : " + AccountName);

	}

    public void enter_MarketSegmentDetails(WebDriver driver, ArrayList<String> test_steps, String TravelAgent,
                                           String MarketSegment, String Referral) throws InterruptedException {
        enter_MarketSegmentDetails(driver, test_steps, TravelAgent, MarketSegment, Referral, true);
    }

	public void enter_MarketSegmentDetails(WebDriver driver, ArrayList<String> test_steps, String TravelAgent,
			String MarketSegment, String Referral, boolean useTravelAgentInfo) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_TravelAgent);

		if (!(TravelAgent.equalsIgnoreCase("") || TravelAgent.isEmpty())) {
			res.CP_NewReservation_TravelAgent.sendKeys(TravelAgent);
			Wait.wait2Second();
			String account = "//b[contains(text(),'" + TravelAgent.trim() + "')]/../../..";
			Wait.WaitForElement(driver, account);
			driver.findElement(By.xpath(account)).click();
			if(useTravelAgentInfo) {
                String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]/following-sibling::div//button[contains(text(),'Yes')]";
                Wait.WaitForElement(driver, dataYes);
                driver.findElement(By.xpath(dataYes)).click();
                test_steps.add("Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
                reslogger.info("Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
                Wait.wait5Second();
            } else {
                String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]/following-sibling::div//button[contains(text(),'No')]";
                Wait.WaitForElement(driver, dataYes);
                driver.findElement(By.xpath(dataYes)).click();
                test_steps.add("Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
                reslogger.info("Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
                Wait.wait5Second();
            }

			/*
			 * String
			 * policyYes="//div[contains(text(),'Do you want to replace the guest info')]/following-sibling::div//button[contains(text(),'Yes')]"
			 * ; Wait.WaitForElement(driver, policyYes);
			 * driver.findElement(By.xpath(policyYes)).click(); test_steps.
			 * add("Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes"
			 * ); reslogger.
			 * info("Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes"
			 * );
			 */
		}

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Referral);
		Wait.wait3Second();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Referral), driver);

		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_Referral), driver);
		Utility.ScrollToElement(res.CP_NewReservation_Referral, driver);

		res.CP_NewReservation_Referral.click();
		// Wait.wait1Second();
		String ref = "(//label[text()='Referral']/preceding-sibling::div//ul/li//span[contains(text(),'"
				+ Referral.trim() + "')])[2]";
		reslogger.info(ref);
		Wait.waitForElementToBeClickable(By.xpath(ref), 10, driver);
		Utility.ScrollToElement(driver.findElement(By.xpath(ref)), driver);

		Utility.app_logs.info(ref);
		// Wait.WaitForElement(driver, ref);

		driver.findElement(By.xpath(ref)).click();
		test_steps.add("Selected Referral as : " + Referral);
		reslogger.info("Selected Referral as : " + Referral);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Market);
		Utility.ScrollToElement(res.CP_NewReservation_Market, driver);
		Wait.wait2Second();
		res.CP_NewReservation_Market.click();
		String market = "//label[text()='Market']/preceding-sibling::div//ul/li//span[contains(text(),'"
				+ MarketSegment.trim() + "')]";
		Wait.WaitForElement(driver, market);

		driver.findElement(By.xpath(market)).click();
		test_steps.add("Selected MarketSegment as : " + MarketSegment);
		reslogger.info("Selected MarketSegment as : " + MarketSegment);
	}

	public ArrayList<String> clickBookNow(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Book);
		Wait.explicit_wait_elementToBeClickable(res.CP_NewReservation_Book, driver);
		Utility.ScrollToElement(res.CP_NewReservation_Book, driver);
		res.CP_NewReservation_Book.click();
		try {
			Wait.WaitForElementUsingClassName(driver, OR.Toaster_Message);
			Wait.waitForElementToBeVisibile(By.className(OR.Toaster_Message), driver);
			Wait.waitForElementToBeClickable(By.className(OR.Toaster_Message), driver);
			Utility.app_logs.info(res.Toaster_Message.getText());
			testSteps.add("Toaster message: " + res.Toaster_Message.getText());

		} catch (Exception e) {
			// TODO: handle exception
		}

		testSteps.add("Click on Book Now");
		reslogger.info("Click on Book Now");
		String loading = "(//div[@class='ir-loader-in'])[2]";
		int count = 0;
		try {
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (count == 60) {
					break;
				} else {
					count++;
					Wait.wait1Second();
				}
			}
		} catch (Exception e) {
			// TODO: handle exception
		}

		reslogger.info("Waited to loading symbol");
		return testSteps;

	}

	public void pay_DepositAmount(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_DepositPayPopUp);
		String depositAmount = "//h4[text()='Deposit Payment']/../..//label[text()='AMOUNT']/following-sibling::div/input";
		Wait.WaitForElement(driver, depositAmount);
		depositAmount = driver.findElement(By.xpath(depositAmount)).getText();

		String depositPaymentType = "//h4[text()='Deposit Payment']/../..//label[text()='TYPE']/preceding-sibling::div/button/span";
		Wait.WaitForElement(driver, depositPaymentType);
		depositPaymentType = driver.findElement(By.xpath(depositPaymentType)).getText();

		test_steps.add("Paying deposit amount : " + depositAmount + " and the payment type is : " + depositPaymentType);
		reslogger.info("Paying deposit amount : " + depositAmount + " and the payment type is : " + depositPaymentType);

		String pay = "//h4[text()='Deposit Payment']/../..//button[starts-with(text(),'Pay')]";

		Wait.WaitForElement(driver, pay);
		driver.findElement(By.xpath(pay)).click();
		test_steps.add("Click on Pay");
		reslogger.info("Click on Pay");

		String loading = "(//div[@class='ir-loader-in'])[3]";

		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
		String paymentFail = "//span[contains(text(),'Transaction Declined. Please try again or enter a different payment method.')]";

		if (driver.findElement(By.xpath(paymentFail)).isDisplayed()) {
			test_steps.add("Transaction Declined. Please try again or enter a different payment method.");
			reslogger.info("Transaction Declined. Please try again or enter a different payment method.");
		} else {

		}
	}

	public String get_ReservationConfirmationNumber(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait2Second();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ConfirmationNumber);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_ConfirmationNumber), driver, 120);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_ConfirmationNumber), driver, 120);
		String confirmation = res.CP_NewReservation_ConfirmationNumber.getText();
		test_steps.add("Captured reservation confirmation number is : <b>" + confirmation + "</b>");
		reslogger.info("Confirmation Number : <b>" + confirmation + "</b>");
		return confirmation;
	}

	public String get_ReservationStatus(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ReservationStatus);
		String status = res.CP_NewReservation_ReservationStatus.getText();
		test_steps.add("Captured reservation status on success popup is  : <b>" + status+"</b>");
		reslogger.info("Reservation Status : " + status);
		return status;
	}

	public void verify_QuoteConfirmetionPopup(WebDriver driver, ArrayList<String> test_steps) {
		String quote = "//h4[contains(text(),'Quote Confirmation')]";
		Wait.WaitForElement(driver, quote);
		if (driver.findElement(By.xpath(quote)).isDisplayed()) {
			test_steps.add("Quote Confirmation pop is displayed");
			reslogger.info("Quote Confirmation pop is displayed");
		} else {
			test_steps.add("Quote Confirmation pop not is displayed");
			reslogger.info("Quote Confirmation pop not is displayed");
		}
	}

	public ArrayList<String> clickCloseReservationSavePopup(WebDriver driver, ArrayList<String> test_steps)
			throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ClosePopUp);
		Utility.ScrollToElement(res.CP_NewReservation_ClosePopUp, driver);
		Wait.explicit_wait_elementToBeClickable(res.CP_NewReservation_ClosePopUp, driver);
		res.CP_NewReservation_ClosePopUp.click();
		test_steps.add("Clicking on Close");
		reslogger.info("Clicking on Close");
//		String loading = "(//div[@class='ir-loader-in'])";
//		int count = 0;
//		unsavedDataYesClick(driver, test_steps);
//		while (true) {
//			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
//				break;
//			} else if (count == 20) {
//				break;
//			} else {
//				count++;
//				Wait.wait1Second();
//			}
//		}
//
//		reslogger.info("Waited to loading symbol");
//
		return test_steps;
	}

	public void click_Folio(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Folio);
		res.CP_NewReservation_Folio.click();
		test_steps.add("Clicking on Folio");
		reslogger.info("Clicking on Folio");
		String path = "//a[@class='current']";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		assertTrue(driver.findElement(By.xpath(path)).isDisplayed(), "Failed: to Displayed Folio Detail");
		test_steps.add("Folio Detail Tab is Displayed");
		reslogger.info("Folio Detail Tab is Displayed");
	}

	public void click_Documents(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_DocumentsTab);
		res.CP_NewReservation_DocumentsTab.click();
		test_steps.add("Clicking on Documents");
		reslogger.info("Clicking on Documents");
	}

	public String get_RoomCharge(WebDriver driver, ArrayList<String> test_steps) {
		String Balance = driver
				.findElement(By
						.xpath("//label[contains(text(),'Room Charges: ')]/following-sibling::span[@class='pamt']/span[@class='pamt']"))
				.getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("Room Charges : <b>" + Balance + "</b>");
		reslogger.info("Room Charges : " + Balance);
		return Balance;
	}

	public String get_Taxes(WebDriver driver, ArrayList<String> test_steps) {
		String Balance = driver
				.findElement(By
						.xpath("//label[contains(text(),'Taxes & Service Charges:')]/following-sibling::span/span[@class='pamt']"))
				.getText();
		Balance = Balance.replace("$", "");
		test_steps.add("Taxes & Service Charges : " + Balance);
		reslogger.info("Taxes & Service Charges : " + Balance);
		return Balance;
	}

	public String get_Inceidentals(WebDriver driver, ArrayList<String> test_steps) {
		String Balance = driver
				.findElement(
						By.xpath("//label[contains(text(),'Incidentals')]/following-sibling::span/span[@class='pamt']"))
				.getText();
		Balance = Balance.replace("$", "");
		test_steps.add("Incidentals : " + Balance);
		reslogger.info("Incidentals : " + Balance);
		return Balance;
	}

	public String get_TotalCharges(WebDriver driver, ArrayList<String> test_steps) {
		String totalCharges = driver.findElement(By.xpath("//label[contains(text(),'Total Charges')]"
				+ "/following-sibling::span/span[@class='pamt']")).getText();
		totalCharges = totalCharges.replace("$ ", "");
		test_steps.add("Total Charges from folio is captured as : <b>"+totalCharges+"</b>");
		reslogger.info("Total Charges : " + Balance);
		return totalCharges;
	}

	public String get_Payments(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		String payments=driver.findElement(By.xpath
				("//label[contains(text(),'Payments')]/following-sibling::span/span[@class='pamt']")).getText();
		payments = payments.replace("$ ", "");
		test_steps.add("Payments from folio is captured as : <b>"+payments+"</b>");
		reslogger.info("Payments : " + payments);
		return payments;
	}

	public String get_PaymentsForAccountReservation(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		String payments=null;
		try{
			payments=driver.findElement(By.xpath
				("(//label[contains(text(),'Payments')]/following-sibling::span/span[@class='pamt'])[2]")).getText();
		}catch(Exception e) {
			payments=driver.findElement(By.xpath
					("//label[contains(text(),'Payments')]/following-sibling::span/span[@class='pamt']")).getText();
		}
		payments = payments.replace("$ ", "");
		test_steps.add("Payments from folio is captured as : <b>"+payments+"</b>");
		reslogger.info("Payments : " + payments);
		return payments;
	}
	public String get_Balance(WebDriver driver, ArrayList<String> test_steps) {
		String Balance= driver.findElement(By.xpath(
					"//label[contains(text(),'Balance')]/following-sibling::span[@class='pamt']/span[@class='pamt']"))
					.getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("Balance Charges : <b>" + Balance + "</b>");
		reslogger.info("Balance Charges : " + Balance);
		return Balance;
	}

	public String get_Balance(ArrayList<String> test_steps,WebDriver driver) {
		String Balance= driver.findElement(By.xpath(
					"//label[(text()='Balance: ')]/following-sibling::span[@class='pamt']/span[@class='pamt']"))
					.getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("Balance Charges : <b>" + Balance + "</b>");
		reslogger.info("Balance Charges : " + Balance);
		return Balance;
	}

	public void click_History(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String loading = "(//div[@class='ir-loader-in'])";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_History);
		Utility.ScrollToElement(res.CP_NewReservation_History, driver);
		res.CP_NewReservation_History.click();
		test_steps.add("Clicking on History");
		reslogger.info("Clicking on History");
	}

	public void verify_ReservationInHistoryTab(WebDriver driver, ArrayList test_steps, String reservation) {
		String res = "//span[contains(text(),'Created reservation with Confirmation Number: " + reservation.trim()
				+ "')]";
		if (driver.findElement(By.xpath(res)).isDisplayed()) {
			test_steps.add("Reservation creation verified in History tab : " + reservation);
			reslogger.info("Reservation creation verified in History tab : " + reservation);
		} else {
			test_steps.add("Reservation creation not found in History tab : " + reservation);
			reslogger.info("Reservation creation not found in History tab : " + reservation);
		}
	}

	public void verify_QuoteInHistoryTab(WebDriver driver, ArrayList test_steps, String reservation, String timeZone) {
		String res = "//span[contains(text(),'Saved quote with Confirmation Number: " + reservation.trim() + "')]";
		if (driver.findElement(By.xpath(res)).isDisplayed()) {
			test_steps.add("Reservation creation verified in History tab : " + reservation);
			reslogger.info("Reservation creation verified in History tab : " + reservation);
		} else {
			test_steps.add("Reservation creation not found in History tab : " + reservation);
			reslogger.info("Reservation creation not found in History tab : " + reservation);
		}

		String payment = "//span[contains(text(),'Saved quote with Confirmation Number: " + reservation.trim()
				+ "')]/../preceding-sibling::td//span";

		String room = driver.findElement(By.xpath(payment)).getText();
		if (room.equalsIgnoreCase("Reservation")) {
			test_steps.add("Payment category verified for the Reservation");
			reslogger.info("Payment category verified for the Reservation");
		} else {
			test_steps.add("Payment category not verified for the Reservation");
			reslogger.info("Payment category not verifie for the Reservation");
		}

		Date date = new Date();
		DateFormat df = new SimpleDateFormat("MM/dd/yy");

		// Use Madrid's time zone to format the date in
		df.setTimeZone(TimeZone.getTimeZone(timeZone));

		String d = df.format(date);

		String payline = "(//span[contains(text(),'Saved quote with Confirmation Number: " + reservation.trim()
				+ "')]/../preceding-sibling::td//span)[2]";
		room = driver.findElement(By.xpath(payline)).getText();
		if (room.equalsIgnoreCase(d)) {
			test_steps.add("Payment Date verified in history : " + room);
			reslogger.info("Payment Date verified in history : " + room);
		} else {
			test_steps.add("Payment Date not verified in history : " + room);
			reslogger.info("Payment Date not verified in history : " + room);
		}

	}

	public String get_RoomNumber(WebDriver driver, ArrayList test_steps, String IsAssign) {
		String room = "//span[text()='ROOM:']/following-sibling::span";
		Wait.WaitForElement(driver, room);
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(room)), driver);
		room = driver.findElement(By.xpath(room)).getText();

		if (IsAssign.equalsIgnoreCase("No")) {
			if (room.equalsIgnoreCase("Unassigned")) {
				test_steps.add("Room Number is : Unassigned");
				reslogger.info("Room Number is : Unassigned");
			}
		} else {
			test_steps.add("Room Number is : " + room);
			reslogger.info("Room Number is : " + room);
		}
		return room;
	}

	public String getSecondRoomNumber(WebDriver driver, ArrayList test_steps, String IsAssign) {
		String room = "(//span[text()='ROOM:']/following-sibling::span)[2]";
		Wait.WaitForElement(driver, room);
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(room)), driver);
		room = driver.findElement(By.xpath(room)).getText();

		if (IsAssign.equalsIgnoreCase("No")) {
			if (room.equalsIgnoreCase("Unassigned")) {
				test_steps.add("Room Number is : Unassigned");
				reslogger.info("Room Number is : Unassigned");
			}
		} else {
			test_steps.add("Room Number is : " + room);
			reslogger.info("Room Number is : " + room);
		}
		return room;
	}

	public String get_RoomChargeWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(By
						.xpath("//label[contains(text(),'Room Charges: ')]/following-sibling::span[@class='pamt']/span[@class='pamt']"))
				.getText();
		test_steps.add("Room Charges : " + Balance);
		reslogger.info("Room Charges : " + Balance);
		return Balance;
	}

	public String get_FeesWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(By
						.xpath("//label[contains(text(),'Fees')]/following-sibling::span/span"))
				.getText();
		test_steps.add("Fees: " + Balance);
		reslogger.info("Fees: " + Balance);
		return Balance;
	}
	
	public String get_TaxesWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(By
						.xpath("(//label[contains(text(),'Taxes & Service Charges:') or text()='Fees:']/following-sibling::span/span[@class='pamt'])[1]"))
				.getText();
		test_steps.add("Taxes & Service Charges : " + Balance);
		reslogger.info("Taxes & Service Charges : " + Balance);
		return Balance;
	}

	public String get_InceidentalsWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(
						By.xpath("//label[contains(text(),'Incidentals')]/following-sibling::span/span[@class='pamt']"))
				.getText();
		test_steps.add("Incidentals : " + Balance);
		reslogger.info("Incidentals : " + Balance);
		return Balance;
	}

	public String get_TotalChargesWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(By
						.xpath("//label[contains(text(),'Total Charges')]/following-sibling::span/span[@class='pamt']"))
				.getText();
		test_steps.add("Total Charges : " + Balance);
		reslogger.info("Total Charges : " + Balance);
		return Balance;
	}

	public String get_PaymentsWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(
						By.xpath("//label[contains(text(),'Payments')]/following-sibling::span/span[@class='pamt']"))
				.getText();
		test_steps.add("Payments : " + Balance);
		reslogger.info("Payments : " + Balance);
		return Balance;
	}

	public String get_BalanceWithCurrency(WebDriver driver, ArrayList test_steps) {

		String Balance = driver.findElement(By.xpath(
				"//label[contains(text(),'Balance')]/following-sibling::span[@class='pamt']/span[@class='pamt']"))
				.getText();
		/*String Balance = driver.findElement(By.xpath(
				"(//label[contains(text(),'Balance')]/following-sibling::span[@class='pamt']/span[@class='pamt'])[1]")).getText();*/
		test_steps.add("Balance Charges : " + Balance);
		reslogger.info("Balance Charges : " + Balance);
		return Balance;
	}

	public String get_TripSummaryRoomChargesWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(By
						.xpath("//span[text()='Summary']/../../..//div[text()='Room Charges']/following-sibling::div"))
				.getText();
		test_steps.add("TripSummary Room Charges : " + Balance);
		reslogger.info("TripSummary Room Charges : " + Balance);
		return Balance;
	}

	public String get_TripSummaryRoomChargesWithoutCurrency(WebDriver driver, ArrayList<String> test_steps) {

		String balance = "//span[contains(text(),'Summary')]/../../..//div[text()='Room Charges']/following-sibling::div";
		Wait.WaitForElement(driver, balance);
		WebElement balanceElement = driver.findElement(By.xpath(balance));
		balance = balanceElement.getText().replace("$ ", "");
		test_steps.add("TripSummary Room Charges : <b>" + balance + "</b>");
		reslogger.info("TripSummary Room Charges : " + balance);
		return balance;
	}

	public String get_TripSummaryTaxesWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(By
						.xpath("(//div[text()='Taxes & Service Charges' or text()='Taxes']//following-sibling::div)[1]"))
				.getText();
		test_steps.add("TripSummary Taxes & Service Charges : " + Balance);
		reslogger.info("TripSummary Taxes & Service Charges : " + Balance);
		return Balance;
	}

    public String get_TripSummaryTaxesWithoutCurrency(WebDriver driver, ArrayList test_steps) {
        String Balance = driver
                .findElement(By
                        .xpath("//span[text()='Summary']/../../..//div[contains(text(),'Taxes & Service Charges')]/following-sibling::div"))
                .getText();
        Balance = Balance.replace("$", "");
        test_steps.add("TripSummary Taxes & Service Charges : " + Balance);
        reslogger.info("TripSummary Taxes & Service Charges : " + Balance);
        return Balance;
    }

	public String get_TripSummaryInceidentalsWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(
						By.xpath("//span[text()='Summary']/../../..//div[text()='Incidentals']/following-sibling::div"))
				.getText();
		test_steps.add("TripSummary Incidentals : " + Balance);
		reslogger.info("TripSummary Incidentals : " + Balance);
		return Balance;
	}

	public String get_TripSummaryInceidentalsWithoutCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(
						By.xpath("//span[text()='Summary']/../../..//div[text()='Incidentals']/following-sibling::div"))
				.getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("TripSummary Incidentals : " + Balance);
		reslogger.info("TripSummary Incidentals : " + Balance);
		return Balance;
	}

	public String get_TripSummaryTripTotalChargesWithCurrency(WebDriver driver, ArrayList<String> test_steps) {
		String tripTotal = driver.findElement(By.xpath("//span[text()='Summary']/../../..//div[contains(text(),"
				+ "'Trip Total')]/following-sibling::div")).getText();
		test_steps.add("Captured TripSummary Trip Total as : <b>"+tripTotal+"</b>");
		reslogger.info("TripSummary Trip Total : " + tripTotal);
		return tripTotal;
	}

	public String get_TripSummaryTripTotalChargesWithoutCurrency(WebDriver driver, ArrayList<String> test_steps) {
		String xpath = "//span[text()='Summary']/../../..//div[contains(text(),'Trip Total')]/following-sibling::div";
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(xpath)), driver);
		String Balance = driver.findElement(By.xpath(xpath)).getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("Trip Total Charges captured at trip summary as : <b>" + Balance + "</b>");
		reslogger.info("Trip Total Charges captured at trip summary as : " + Balance);
		return Balance;
	}

	public String get_TripSummaryPaidWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = "$ 0.0";
		if (driver
				.findElements(By
						.xpath("//span[text()='Summary']/../../..//div[contains(text(),'Paid')]/following-sibling::div"))
				.size() > 0) {
			Balance = driver
					.findElement(By
							.xpath("//span[text()='Summary']/../../..//div[contains(text(),'Paid')]/following-sibling::div"))
					.getText();
			test_steps.add("TripSummary Paid : " + Balance);
			reslogger.info("TripSummary Paid : " + Balance);
		}
		return Balance;
	}

	public String getTripSummaryBalance(WebDriver driver, ArrayList<String> test_steps) {
		String balance = driver.findElement(By.xpath("//span[text()='Summary']/../../..//div[contains(text(),"
				+ "'Balance')]/following-sibling::div")).getText();
		balance = balance.replace("$ ", "");
		test_steps.add("Trip Summary Balance is captured as : <b>"+balance+"</b>");
		reslogger.info("TripSummary Balance Charges : " + balance);
		return balance;
	}

	public String get_TripSummaryPaid(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(By
						.xpath("//span[text()='Summary']/../../..//div[contains(text(),'Paid')]/following-sibling::div"))
				.getText();

		Balance = Balance.trim();
		Balance = Balance.substring(1, Balance.length() - 1);
		Balance = Balance.trim();
		test_steps.add("TripSummary Paid : " + Balance);
		reslogger.info("TripSummary Paid : " + Balance);

		return Balance;
	}

	public String getTripSummaryPaidAmount(WebDriver driver, ArrayList<String> test_steps) {
		String PaidBalance = driver.findElement(By.xpath("//span[text()='Summary']/../../..//div[contains(text(),"
				+ "'Paid')]/following-sibling::div")).getText();
		PaidBalance = PaidBalance.replace("$ ", "");
		test_steps.add("Paid amount captured at trip summary is : <b>" + PaidBalance + "</b>");
		reslogger.info("Paid amount captured at trip summary is : " + PaidBalance);
		return PaidBalance;
	}

	public void verifyTripSummaryPaid(WebDriver driver, ArrayList test_steps, String getPaid, String Paid) {
		double paidAmt = Double.valueOf(getPaid);
		int amt = (int) paidAmt;
		getPaid = String.valueOf(amt);
		assertEquals(getPaid.trim(), (Paid), "Failed : to Verify Trip Summary Paid");
		test_steps.add("Verified TripSummary  Paid : <b>" + Paid + "</b>");
		reslogger.info("Verified TripSummary  Paid : " + Paid);

	}

	public void verifyTripSummaryRoomCharges(WebDriver driver, ArrayList test_steps, String getRoomCharges,
			String RoomCharges) {
		double roomAmt = Double.valueOf(getRoomCharges);
		int amt = (int) roomAmt;
		getRoomCharges = String.valueOf(amt);
		assertEquals(getRoomCharges.trim(), (RoomCharges), "Failed : to Verify Trip Summary Room Changes");
		test_steps.add("Verified TripSummary Room Changes : <b>" + RoomCharges + "</b>");
		reslogger.info("Verified TripSummary Room Changes : " + RoomCharges);
	}

	public void verifyTripSummaryTaxService(WebDriver driver, ArrayList test_steps, String taxServiceCharges,
			String TaxService) {
		double taxAmt = Double.valueOf(taxServiceCharges);
		int amt = (int) taxAmt;
		taxServiceCharges = String.valueOf(amt);
		if (taxServiceCharges.equals(TaxService)) {
			assertEquals(taxServiceCharges.trim(), (TaxService), "Failed : to Verify Trip Summary Tax Service Changes");
			test_steps.add("Verified TripSummary Tax Service Changes : <b>" + TaxService + "</b>");
			reslogger.info("Verified TripSummary Tax Service Changes : " + TaxService);
		} else if (taxServiceCharges.equals("0")) {
			assertEquals(taxServiceCharges.trim(), ("0"), "Failed : to Verify Trip Summary Tax Service Changes");
			test_steps.add("Verified TripSummary Tax Service Changes : <b>" + taxServiceCharges + "</b>");
			reslogger.info("Verified TripSummary Tax Service Changes : " + taxServiceCharges);

		}
	}

	public void verifyTripSummaryTotal(WebDriver driver, ArrayList test_steps, String TripTotal, String Total) {
		double totalAmt = Double.valueOf(TripTotal);
		int amt = (int) totalAmt;
		TripTotal = String.valueOf(amt);
		assertEquals(TripTotal.trim(), (Total), "Failed : to Verify Trip Summary Total");
		test_steps.add("Verified TripSummary Trip Total Charges : <b>" + Total + "</b>");
		reslogger.info("Verified TripSummary  Trip Total  Charges : " + Total);
	}

	public String get_TripSummaryBalanceWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = "$ 0.0";
		if (driver
				.findElements(By
						.xpath("//span[text()='Summary']/../../..//div[contains(text(),'Paid')]/following-sibling::div"))
				.size() > 0) {
			Balance = driver
					.findElement(By
							.xpath("//span[text()='Summary']/../../..//div[contains(text(),'Balance')]/following-sibling::div"))
					.getText();

			test_steps.add("TripSummary Balance Charges : " + Balance);
			reslogger.info("TripSummary Balance Charges : " + Balance);
		}
		return Balance;
	}

	public String get_TripSummaryBalance_Amount(WebDriver driver, ArrayList<String> test_steps) {
		String Balance = driver
				.findElement(By
						.xpath("//span[text()='Summary']/../../..//div[contains(text(),'Balance')]/following-sibling::div"))
				.getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("Balance amount is captured at trip summary as : <b>" + Balance + "</b>");
		reslogger.info("TripSummary Balance Charges : " + Balance);
		return Balance;
	}

	public void verifyTripSummaryBalance(WebDriver driver, ArrayList test_steps, String getBalance, String Balance) {

		double balanceAmount = Double.valueOf(getBalance);
		reslogger.info(String.valueOf((int) (balanceAmount)).trim());
		assertTrue(String.valueOf((int) (balanceAmount)).trim().equals(Balance),
				"Failed : to Verify Trip Summary Balance");
		test_steps.add("Verified TripSummary Balance Charges :<b> " + Balance + "</b>");
		reslogger.info("Verified TripSummary Balance Charges : " + Balance);
	}

	public void verifyTripSummaryBalanceForCheckOut(WebDriver driver, ArrayList test_steps, String getBalance,
			String Balance) {

		// double balanceAmount=Double.valueOf(getBalance);
		// reslogger.info(String.valueOf((int)(balanceAmount)).trim());
		assertTrue(getBalance.contains(Balance), "Failed : to Verify Trip Summary Balance");
		test_steps.add("Verified TripSummary Balance Charges :<b> " + Balance + "</b>");
		reslogger.info("Verified TripSummary Balance Charges : " + Balance);

	}

	public void Verify_TripSummary_Balance_ForCheckOut(WebDriver driver, ArrayList test_steps, String getBalance,
			String Balance) {

		// double balanceAmount=Double.valueOf(getBalance);
		// reslogger.info(String.valueOf((int)(balanceAmount)).trim());
		assertTrue(getBalance.contains(Balance), "Failed : to Verify Trip Summary Balance");
		test_steps.add("Verified TripSummary Balance Charges :<b> " + Balance + "</b>");
		reslogger.info("Verified TripSummary Balance Charges : " + Balance);
	}

	public void verifyDepositPaymentInHistoryTab(WebDriver driver, ArrayList test_steps, Double deposit) {
		String depositOne = "//span[contains(text(),'payment') and contains(text(),'" + deposit + "')]";
		if (driver.findElement(By.xpath(depositOne)).isDisplayed()) {

			test_steps.add("Deposit payment verified in History Tab");
			reslogger.info("Deposit payment verified in History Tab");
		} else {
			test_steps.add("Deposit payment not found  in History Tab");
			reslogger.info("Deposit payment not found  in History Tab");
		}
	}

	public void verify_AcountPaymentInHistory(WebDriver driver, ArrayList test_steps, Double amount, String AccountName,
			ArrayList RoomAbbri, ArrayList Rooms, String timeZone) {
		String payline = "//span[contains(text(),'payment') and contains(text(),'" + amount + "') and contains(text(),'"
				+ AccountName + "')]";
		if (driver.findElement(By.xpath(payline)).isDisplayed()) {
			test_steps.add("Account payment verified in History Tab");
			reslogger.info("Account payment verified in History Tab");
		} else {
			test_steps.add("Account payment not found  in History Tab");
			reslogger.info("Account payment not found  in History Tab");
		}

		payline = "//span[contains(text(),'payment') and contains(text(),'" + amount + "') and contains(text(),'"
				+ AccountName + "')]/../following-sibling::td//span";

		String room = driver.findElement(By.xpath(payline)).getText();
		String rm = RoomAbbri.get(0).toString();
		String rm1 = Rooms.get(0).toString();
		String[] rm2 = rm.split(":");
		rm = rm2[1].trim();
		String[] rm3 = rm1.split(":");
		rm1 = rm3[1].trim();
		rm = rm + ": " + rm1;

		reslogger.info(room);
		reslogger.info(rm);

		if (rm.equalsIgnoreCase(room)) {
			test_steps.add("Room Number verified in history : " + room);
			reslogger.info("Room Number verified in history : " + room);
		} else {
			test_steps.add("Room Number not verified in history : " + room);
			reslogger.info("Room Number not verified in history : " + room);
		}

		String payment = "//span[contains(text(),'payment') and contains(text(),'" + amount + "') and contains(text(),'"
				+ AccountName + "')]/../preceding-sibling::td//span";

		room = driver.findElement(By.xpath(payment)).getText();
		if (room.equalsIgnoreCase("Payment")) {
			test_steps.add("Payment category verified for the payment");
			reslogger.info("Payment category verified for the payment");
		} else {
			test_steps.add("Payment category not verified for the payment");
			reslogger.info("Payment category not verifie for the payment");
		}

		Date date = new Date();
		DateFormat df = new SimpleDateFormat("MM/dd/yy");

		// Use Madrid's time zone to format the date in
		df.setTimeZone(TimeZone.getTimeZone(timeZone));

		String d = df.format(date);

		payline = "(//span[contains(text(),'payment') and contains(text(),'" + amount + "') and contains(text(),'"
				+ AccountName + "')]/../preceding-sibling::td//span)[2]";
		room = driver.findElement(By.xpath(payline)).getText();
		if (room.equalsIgnoreCase(d)) {
			test_steps.add("Payment Date verified in history : " + room);
			reslogger.info("Payment Date verified in history : " + room);
		} else {
			test_steps.add("Payment Date not verified in history : " + room);
			reslogger.info("Payment Date not verified in history : " + room);
		}

	}

	public void verify_BannerDetails(WebDriver driver, ArrayList test_steps, String Salutation, String GuestFirstName,
			String GuestLastName, String PhoneNumber, String Email, String TripTotal, String Balance,
			String ConfirmationNumber, String Status, String CheckInDate, String CheckOutDate, String Country) {
		test_steps.add("******************* Banner fields verification **********************");
		reslogger.info("******************* Banner fields verification **********************");

		String name = Salutation.trim() + " " + GuestFirstName.trim() + " " + GuestLastName.trim();
		String bannername = "//td/div/span[contains(text(),'" + name + "')]";
		reslogger.info(bannername);
		if (driver.findElement(By.xpath(bannername)).isDisplayed()) {
			test_steps.add("Reservation banner name field verified : " + name);
			reslogger.info("Reservation banner name field verified : " + name);
		} else {
			test_steps.add("Reservation banner name field not found : " + name);
			reslogger.info("Reservation banner name field not found : " + name);
		}

		PhoneNumber = PhoneNumber.replace("" + PhoneNumber.trim().charAt(0), "(" + PhoneNumber.trim().charAt(0));
		PhoneNumber = PhoneNumber.replace("" + PhoneNumber.trim().charAt(4), ")" + PhoneNumber.trim().charAt(4));
		PhoneNumber = PhoneNumber.replace("" + PhoneNumber.trim().charAt(5), " " + PhoneNumber.trim().charAt(5));
		PhoneNumber = PhoneNumber.replace("" + PhoneNumber.trim().charAt(9), "-" + PhoneNumber.trim().charAt(9));

		String code = null;
		if (Country.equalsIgnoreCase("United States")) {
			code = "1";
		} else if (Country.equalsIgnoreCase("United Kingdom")) {
			code = "41";
		}
		code = code + "-";
		PhoneNumber = code + PhoneNumber;
		reslogger.info(PhoneNumber);

		String phone = "//td//span[text()='" + PhoneNumber + "']";
		if (driver.findElement(By.xpath(phone)).isDisplayed()) {
			test_steps.add("Reservation banner PhoneNumber field verified : " + PhoneNumber);
			reslogger.info("Reservation banner PhoneNumber field verified : " + PhoneNumber);
		} else {
			test_steps.add("Reservation banner PhoneNumber field not found : " + PhoneNumber);
			reslogger.info("Reservation banner PhoneNumber field not found : " + PhoneNumber);
		}

		String trip = "//td[text()='TRIP TOTAL']/following-sibling::td[contains(text(),'" + TripTotal.trim() + "')]";
		if (driver.findElement(By.xpath(trip)).isDisplayed()) {
			test_steps.add("Reservation banner TripTotal field verified : " + TripTotal);
			reslogger.info("Reservation banner TripTotal field verified : " + TripTotal);
		} else {
			test_steps.add("Reservation banner TripTotal field not found : " + TripTotal);
			reslogger.info("Reservation banner TripTotal field not found : " + TripTotal);
		}

		String bal = "//td[text()='BALANCE']/following-sibling::td/div[contains(text(),'" + Balance.trim() + "')]";
		if (driver.findElement(By.xpath(trip)).isDisplayed()) {
			test_steps.add("Reservation banner Balance field verified : " + Balance);
			reslogger.info("Reservation banner Balance field verified : " + Balance);
		} else {
			test_steps.add("Reservation banner Balance field not found : " + Balance);
			reslogger.info("Reservation banner Balance field not found : " + Balance);
		}

		String mail = "//td//a[text()='" + Email + "']";
		if (driver.findElement(By.xpath(mail)).isDisplayed()) {
			test_steps.add("Reservation banner mail field verified : " + Email);
			reslogger.info("Reservation banner mail field verified : " + Email);
		} else {
			test_steps.add("Reservation banner mail field not found : " + Email);
			reslogger.info("Reservation banner mail field not found : " + Email);
		}

		String sta = "//td//span[text()='" + Status.trim() + "']";
		if (driver.findElement(By.xpath(sta)).isDisplayed()) {
			test_steps.add("Reservation banner Status field verified : " + Status);
			reslogger.info("Reservation banner Status field verified : " + Status);
		} else {
			test_steps.add("Reservation banner Status field not found : " + Status);
			reslogger.info("Reservation banner Status field not found : " + Status);
		}

		String confirmation = "//td//span[text()='" + ConfirmationNumber.trim() + "']";
		if (driver.findElement(By.xpath(confirmation)).isDisplayed()) {
			test_steps.add("Reservation banner ConfirmationNumber field verified : " + ConfirmationNumber);
			reslogger.info("Reservation banner ConfirmationNumber field verified : " + ConfirmationNumber);
		} else {
			test_steps.add("Reservation banner ConfirmationNumber field not found : " + ConfirmationNumber);
			reslogger.info("Reservation banner ConfirmationNumber field not found : " + ConfirmationNumber);
		}

		String[] checkIn = CheckInDate.split("/");

		if (checkIn[0].charAt(0) == '0') {
			checkIn[0] = checkIn[0].replace("" + checkIn[0].charAt(0), "");
		}

		String checkInMonthDay = Utility.get_Month(CheckInDate);
		checkInMonthDay = checkInMonthDay + " " + checkIn[0];
		checkInMonthDay = "(" + checkInMonthDay;

		String[] checkOut = CheckOutDate.split("/");

		if (checkOut[0].charAt(0) == '0') {
			checkOut[0] = checkOut[0].replace("" + checkOut[0].charAt(0), "");
		}

		String checkOutMonthDay = Utility.get_Month(CheckOutDate);
		checkOutMonthDay = checkOutMonthDay + " " + checkOut[0];
		checkOutMonthDay = checkOutMonthDay + ")";
		String day = checkInMonthDay + " - " + checkOutMonthDay;

		reslogger.info(day);
		String days = "//td//span[contains(text(),'" + day.trim() + "')]";
		if (driver.findElement(By.xpath(confirmation)).isDisplayed()) {
			test_steps.add("Reservation banner Stay from and Stay to are verified : " + day);
			reslogger.info("Reservation banner Stay from and Stay to are verified : " + day);
		} else {
			test_steps.add("Reservation banner Stay from and Stay to are not found : " + day);
			reslogger.info("Reservation banner Stay from and Stay to are not found : " + day);
		}
	}

	public void verify_StayInfo(WebDriver driver, ArrayList test_steps, String CheckInDate, String CheckOutDate,
			String Adults, String Children, String RoomClass, String RoomCharges) throws Exception {
		test_steps.add("******************* Stay info fields verification **********************");
		reslogger.info("******************* Stay info fields verification **********************");

		SimpleDateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");
		Date dateObj1 = format1.parse(CheckInDate);
		Date dateObj2 = format1.parse(CheckOutDate);
		long diff = dateObj2.getTime() - dateObj1.getTime();
		int Nights = (int) (diff / (24 * 60 * 60 * 1000));
		reslogger.info("difference between days: " + Nights);

		String[] checkIn = CheckInDate.split("/");
		if (checkIn[0].charAt(0) == '0') {
			checkIn[0] = checkIn[0].replace("" + checkIn[0].charAt(0), "");
		}
		String checkInMonth = Utility.get_Month(CheckInDate);
		String checkInDays = checkInMonth + " " + checkIn[0] + ", " + checkIn[2];

		String checkInDay = "//div[contains(text(),'Stay')]/..//div[@class='checkin']/span[text()='" + checkInDays
				+ "']";
		if (driver.findElement(By.xpath(checkInDay)).isDisplayed()) {
			test_steps.add("Reservation Stay Info checkin date verified : " + CheckInDate);
			reslogger.info("Reservation Stay Info checkin date verified : " + CheckInDate);
		} else {
			test_steps.add("Reservation Stay Info checkin date not found : " + CheckInDate);
			reslogger.info("Reservation Stay Info checkin date not found : " + CheckInDate);
		}

		Date now = new Date(checkIn[1] + "/" + checkIn[0] + "/" + checkIn[2]);
		SimpleDateFormat simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the
																				// day
																				// of
																				// the
																				// week
																				// abbreviated
		simpleDateformat = new SimpleDateFormat("EEEE"); // the day of the week
															// spelled out
															// completely
		String dayofCheckIn = simpleDateformat.format(now);

		String chckInday = "//div[contains(text(),'Stay')]/..//div[@class='checkin']//span[text()='"
				+ dayofCheckIn.trim() + "']";
		if (driver.findElement(By.xpath(chckInday)).isDisplayed()) {
			test_steps.add("Reservation Stay Info checkin day verified : " + dayofCheckIn);
			reslogger.info("Reservation Stay Info checkin day verified : " + dayofCheckIn);
		} else {
			test_steps.add("Reservation Stay Info checkin day not found : " + dayofCheckIn);
			reslogger.info("Reservation Stay Info checkin day not found : " + dayofCheckIn);
		}

		String[] checkOut = CheckOutDate.split("/");

		if (checkOut[0].charAt(0) == '0') {
			checkOut[0] = checkOut[0].replace("" + checkOut[0].charAt(0), "");
		}
		String checkOutMonth = Utility.get_Month(CheckOutDate);
		String checkOutDays = checkInMonth + " " + checkOut[0] + ", " + checkOut[2];
		String checkoutDay = "//div[contains(text(),'Stay')]/..//div[@class='checkout']/span[text()='" + checkOutDays
				+ "']";
		if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
			test_steps.add("Reservation Stay Info checkout date verified : " + CheckOutDate);
			reslogger.info("Reservation Stay Info checkout date verified : " + CheckOutDate);
		} else {
			test_steps.add("Reservation Stay Info checkout date not found : " + CheckOutDate);
			reslogger.info("Reservation Stay Info checkout date not found : " + CheckOutDate);
		}

		now = new Date(checkOut[1] + "/" + checkOut[0] + "/" + checkOut[2]);
		simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the day of the
																// week
																// abbreviated
		simpleDateformat = new SimpleDateFormat("EEEE"); // the day of the week
															// spelled out
															// completely
		String dayofCheckOut = simpleDateformat.format(now);
		String chkOutDay = "//div[contains(text(),'Stay')]/..//div[@class='checkout']//span[text()='"
				+ dayofCheckOut.trim() + "']";
		if (driver.findElement(By.xpath(chkOutDay)).isDisplayed()) {
			test_steps.add("Reservation Stay Info checkout day verified : " + dayofCheckOut);
			reslogger.info("Reservation Stay Info checkout day verified : " + dayofCheckOut);
		} else {
			test_steps.add("Reservation Stay Info checkout day not found : " + dayofCheckOut);
			reslogger.info("Reservation Stay Info checkout day not found : " + dayofCheckOut);
		}

		String nights = "//div[contains(text(),'Stay')]/..//div[@class='noofnights']/span[text()='" + Nights + "N']";
		if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
			test_steps.add("Reservation Stay Info Nights verified : " + Nights + "N");
			reslogger.info("Reservation Stay Info Nights verified : " + Nights + "N");
		} else {
			test_steps.add("Reservation Stay Info Nights not found : " + Nights + "N");
			reslogger.info("Reservation Stay Info Nights not found : " + Nights + "N");
		}

		String adults = "//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'numberOfAdults')]";
		adults = driver.findElement(By.xpath(adults)).getText().trim();
		if (adults.equalsIgnoreCase(Adults.trim())) {
			test_steps.add("Reservation Stay Info Adults verified : " + Adults);
			reslogger.info("Reservation Stay Info Adults verified : " + Adults);
		} else {
			test_steps.add("Reservation Stay Info Adults not found : " + Adults);
			reslogger.info("Reservation Stay Info Adults not found : " + Adults);
		}

		String children = "//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'numberOfChildren')]";
		children = driver.findElement(By.xpath(children)).getText().trim();
		if (children.equalsIgnoreCase(Children.trim())) {
			test_steps.add("Reservation Stay Info Children verified : " + Children);
			reslogger.info("Reservation Stay Info Children verified : " + Children);
		} else {
			test_steps.add("Reservation Stay Info Children not found : " + Children);
			reslogger.info("Reservation Stay Info Children not found : " + Children);
		}

		String roomClass = "//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'roomClassName')]";
		roomClass = driver.findElement(By.xpath(roomClass)).getText().trim();
		if (roomClass.equalsIgnoreCase(RoomClass.trim())) {
			test_steps.add("Reservation Stay Info RoomClass verified : " + RoomClass);
			reslogger.info("Reservation Stay Info RoomClass verified : " + RoomClass);
		} else {
			test_steps.add("Reservation Stay Info RoomClass not found : " + RoomClass);
			reslogger.info("Reservation Stay Info RoomClass not found : " + RoomClass);
		}

		String roomCharge = "//div[contains(text(),'Stay')]/..//div//span[text()='TOTAL']/following-sibling::span";
		roomCharge = driver.findElement(By.xpath(roomCharge)).getText().trim();
		if (roomCharge.equalsIgnoreCase(RoomCharges.trim())) {
			test_steps.add("Reservation Stay Info RoomCharges verified : " + RoomCharges);
			reslogger.info("Reservation Stay Info RoomCharges verified : " + RoomCharges);
		} else {
			test_steps.add("Reservation Stay Info RoomCharges not found : " + RoomCharges);
			reslogger.info("Reservation Stay Info RoomCharges not found : " + RoomCharges);
		}
	}

	public void verify_MRB_StayInfo(WebDriver driver, ArrayList test_steps, String CheckInDate, String CheckOutDate,
			String Adults, String Children, String RoomClass, String RoomCharges, ArrayList roomCost, String IsAssign,
			String RatePlan) throws Exception {
		test_steps.add("******************* MRB Stay info fields verification **********************");
		reslogger.info("******************* MRB Stay info fields verification **********************");

		/*
		 * <<<<<<< HEAD SimpleDateFormat format1=new
		 * SimpleDateFormat("dd/MM/yyyy"); Date dateObj1 =
		 * format1.parse(CheckInDate); Date dateObj2 =
		 * format1.parse(CheckOutDate); long diff = dateObj2.getTime() -
		 * dateObj1.getTime(); int Nights = (int) (diff / (24 * 60 * 60 *
		 * 1000)); Utility.app_logs.info("difference between days: " + Nights);
		 * ======= SimpleDateFormat format1=new SimpleDateFormat("dd/MM/yyyy");
		 * Date dateObj1 = format1.parse(CheckInDate); Date dateObj2 =
		 * format1.parse(CheckOutDate); long diff = dateObj2.getTime() -
		 * dateObj1.getTime(); int Nights = (int) (diff / (24 * 60 * 60 *
		 * 1000)); reslogger.info("difference between days: " + Nights); >>>>>>>
		 * b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
		 */

		String[] in = CheckInDate.split("\\|");
		String[] out = CheckOutDate.split("\\|");
		String[] adu = Adults.split("\\|");
		String[] chld = Children.split("\\|");
		String[] roomclass = RoomClass.split("\\|");
		String[] rate = RatePlan.split("\\|");

		int count = in.length;

		for (int i = 0; i < count; i++) {

			SimpleDateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");
			Date dateObj1 = format1.parse(in[i]);
			Date dateObj2 = format1.parse(out[i]);
			long diff = dateObj2.getTime() - dateObj1.getTime();
			int Nights = (int) (diff / (24 * 60 * 60 * 1000));
			reslogger.info("difference between days: " + Nights);

			String[] checkIn = in[i].split("/");
			if (checkIn[0].charAt(0) == '0') {
				checkIn[0] = checkIn[0].replace("" + checkIn[0].charAt(0), "");
			}
			String checkInMonth = Utility.get_Month(in[i]);
			String checkInDays = checkInMonth + " " + checkIn[0] + ", " + checkIn[2];

			String checkInDay = "//div[contains(text(),'Stay')]/..//div[@class='checkin']/span[text()='" + checkInDays
					+ "']";
			if (driver.findElement(By.xpath(checkInDay)).isDisplayed()) {
				test_steps.add("Reservation Stay Info checkin date verified : " + in[i]);
				reslogger.info("Reservation Stay Info checkin date verified : " + in[i]);
			} else {
				test_steps.add("Reservation Stay Info checkin date not found : " + in[i]);
				reslogger.info("Reservation Stay Info checkin date not found : " + in[i]);
			}

			Date now = new Date(checkIn[1] + "/" + checkIn[0] + "/" + checkIn[2]);
			SimpleDateFormat simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the
																					// day
																					// of
																					// the
																					// week
																					// abbreviated
			simpleDateformat = new SimpleDateFormat("EEEE"); // the day of the
																// week spelled
																// out
																// completely
			String dayofCheckIn = simpleDateformat.format(now);

			String chckInday = "//div[contains(text(),'Stay')]/..//div[@class='checkin']//span[text()='"
					+ dayofCheckIn.trim() + "']";
			if (driver.findElement(By.xpath(chckInday)).isDisplayed()) {
				test_steps.add("Reservation Stay Info checkin day verified : " + dayofCheckIn);
				reslogger.info("Reservation Stay Info checkin day verified : " + dayofCheckIn);
			} else {
				test_steps.add("Reservation Stay Info checkin day not found : " + dayofCheckIn);
				reslogger.info("Reservation Stay Info checkin day not found : " + dayofCheckIn);
			}

			String[] checkOut = out[i].split("/");

			if (checkOut[0].charAt(0) == '0') {
				checkOut[0] = checkOut[0].replace("" + checkOut[0].charAt(0), "");
			}
			String checkOutMonth = Utility.get_Month(out[i]);
			String checkOutDays = checkInMonth + " " + checkOut[0] + ", " + checkOut[2];
			String checkoutDay = "//div[contains(text(),'Stay')]/..//div[@class='checkout']/span[text()='"
					+ checkOutDays + "']";
			if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
				test_steps.add("Reservation Stay Info checkout date verified : " + out[i]);
				reslogger.info("Reservation Stay Info checkout date verified : " + out[i]);
			} else {
				test_steps.add("Reservation Stay Info checkout date not found : " + out[i]);
				reslogger.info("Reservation Stay Info checkout date not found : " + out[i]);
			}

			now = new Date(checkOut[1] + "/" + checkOut[0] + "/" + checkOut[2]);
			simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the day of
																	// the week
																	// abbreviated
			simpleDateformat = new SimpleDateFormat("EEEE"); // the day of the
																// week spelled
																// out
																// completely
			String dayofCheckOut = simpleDateformat.format(now);
			String chkOutDay = "//div[contains(text(),'Stay')]/..//div[@class='checkout']//span[text()='"
					+ dayofCheckOut.trim() + "']";
			if (driver.findElement(By.xpath(chkOutDay)).isDisplayed()) {
				test_steps.add("Reservation Stay Info checkout day verified : " + dayofCheckOut);
				reslogger.info("Reservation Stay Info checkout day verified : " + dayofCheckOut);
			} else {
				test_steps.add("Reservation Stay Info checkout day not found : " + dayofCheckOut);
				reslogger.info("Reservation Stay Info checkout day not found : " + dayofCheckOut);
			}

			String nights = "//div[contains(text(),'Stay')]/..//div[@class='noofnights']/span[text()='" + Nights
					+ "N']";
			if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
				test_steps.add("Reservation Stay Info Nights verified : " + Nights + "N");
				reslogger.info("Reservation Stay Info Nights verified : " + Nights + "N");
			} else {
				test_steps.add("Reservation Stay Info Nights not found : " + Nights + "N");
				reslogger.info("Reservation Stay Info Nights not found : " + Nights + "N");
			}

			String adults = "(//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'numberOfAdults')])["
					+ (i + 1) + "]";
			adults = driver.findElement(By.xpath(adults)).getText().trim();
			if (adults.equalsIgnoreCase(adu[i].trim())) {
				test_steps.add("Reservation Stay Info Adults verified : " + adu[i]);
				reslogger.info("Reservation Stay Info Adults verified : " + adu[i]);
			} else {
				test_steps.add("Reservation Stay Info Adults not found : " + adu[i]);
				reslogger.info("Reservation Stay Info Adults not found : " + adu[i]);
			}

			String children = "(//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'numberOfChildren')])["
					+ (i + 1) + "]";
			children = driver.findElement(By.xpath(children)).getText().trim();
			if (children.equalsIgnoreCase(chld[i].trim())) {
				test_steps.add("Reservation Stay Info Children verified : " + chld[i]);
				reslogger.info("Reservation Stay Info Children verified : " + chld[i]);
			} else {
				test_steps.add("Reservation Stay Info Children not found : " + chld[i]);
				reslogger.info("Reservation Stay Info Children not found : " + chld[i]);
			}

			String roomClass = "(//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'roomClassName')])["
					+ (i + 1) + "]";
			roomClass = driver.findElement(By.xpath(roomClass)).getText().trim();
			if (roomClass.contains(roomclass[i].trim())) {
				test_steps.add("Reservation Stay Info RoomClass verified : " + roomclass[i]);
				reslogger.info("Reservation Stay Info RoomClass verified : " + roomclass[i]);
			} else {
				test_steps.add("Reservation Stay Info RoomClass not found : " + roomclass[i]);
				reslogger.info("Reservation Stay Info RoomClass not found : " + roomclass[i]);
			}

			String roomCharge = "(//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'roomClassName')])["
					+ (i + 1) + "]/following-sibling::span";
			roomCharge = driver.findElement(By.xpath(roomCharge)).getText().trim();
			roomCharge = roomCharge.trim();
			roomCharge = roomCharge.substring(1, roomCharge.length());
			roomCharge = roomCharge.trim();
			if (roomCharge.equalsIgnoreCase(roomCost.get(i).toString().trim())) {
				test_steps.add(
						"Reservation Stay Info RoomCharges verified for line item : " + (i + 1) + " " + roomCharge);
				reslogger.info(
						"Reservation Stay Info RoomCharges verified for line item : " + (i + 1) + " " + roomCharge);
			} else {
				test_steps.add(
						"Reservation Stay Info RoomCharges not found for line item : " + (i + 1) + " " + roomCharge);
				reslogger.info(
						"Reservation Stay Info RoomCharges not found for line item : " + (i + 1) + " " + roomCharge);
			}

			String rateplan = "(//div[contains(text(),'Stay')]/..//div//span[contains(text(),'RATE PLAN:')])[" + (i + 1)
					+ "]/following-sibling::span";
			rateplan = driver.findElement(By.xpath(rateplan)).getText().trim();
			if (rateplan.equalsIgnoreCase(rate[i])) {
				test_steps.add("Reservation Stay Info rateplan verified for line item : " + (i + 1) + " " + rateplan);
				reslogger.info("Reservation Stay Info rateplan verified for line item : " + (i + 1) + " " + rateplan);
			} else {
				test_steps.add("Reservation Stay Info rateplan not found for line item : " + (i + 1) + " " + rateplan);
				reslogger.info("Reservation Stay Info rateplan not found for line item : " + (i + 1) + " " + rateplan);
			}

			String room = "(//span[text()='ROOM:']/following-sibling::span)[" + (i + 1) + "]";
			Wait.WaitForElement(driver, room);
			room = driver.findElement(By.xpath(room)).getText();

			if (IsAssign.equalsIgnoreCase("No")) {
				if (room.equalsIgnoreCase("Unassigned")) {
					test_steps.add("Room Number is of the line item: " + (i + 1) + " is Unassighed");
					reslogger.info("Room Number is of the line item: " + (i + 1) + " Unassighed");
				}
			} else {
				test_steps.add("Room Number is of the line item: " + (i + 1) + " is " + room);
				reslogger.info("Room Number is of the line item: " + (i + 1) + " is " + room);
			}

		}
	}

	public void velidate_TripSummaryAndFolio(WebDriver driver, ArrayList test_steps, String FilioRoomCharges,
			String FilioTaxes, String FilioIncidentals, String FilioTripTotal, String FilioPaid, String FilioBalance,
			String TripSummaryRoomCharges, String TripSummaryTaxes, String TripSummaryIncidentals,
			String TripSummaryTripTotal, String TripSummaryPaid, String TripSummaryBalance) {
		test_steps.add("******************* Validating Folio and TripSummary fields **********************");
		reslogger.info("******************* Validating Folio and TripSummary fields **********************");

		if (FilioRoomCharges.equalsIgnoreCase(TripSummaryRoomCharges)) {
			test_steps.add("TripSummary RoomCharges and Folio RoomCharges are same : " + FilioRoomCharges);
			reslogger.info("TripSummary RoomCharges and Folio RoomCharges are same : " + FilioRoomCharges);
		} else {
			test_steps.add("TripSummary RoomCharges and Folio RoomCharges are not same : " + FilioRoomCharges);
			reslogger.info("TripSummary RoomCharges and Folio RoomCharges are not same : " + FilioRoomCharges);
		}

		if (FilioTaxes.equalsIgnoreCase(TripSummaryTaxes)) {
			test_steps.add("TripSummaryTaxes and FilioTaxes are same : " + FilioTaxes);
			reslogger.info("TTripSummaryTaxes and FilioTaxes are same : " + FilioTaxes);
		} else {
			test_steps.add("TripSummaryTaxes and FilioTaxes are not same : " + FilioTaxes);
			reslogger.info("TripSummaryTaxes and FilioTaxes are not same : " + FilioTaxes);
		}
		if (FilioIncidentals.equalsIgnoreCase(TripSummaryIncidentals)) {
			test_steps.add("TripSummary Incidental and Folio Incidental are same : " + FilioIncidentals);
			reslogger.info("TripSummary Incidental and Folio Incidental are same : " + FilioIncidentals);
		} else {
			test_steps.add("TripSummary Incidental and Folio Incidental are not same : " + FilioIncidentals);
			reslogger.info("TripSummary Incidental and Folio Incidental are not same : " + FilioIncidentals);
		}
		if (FilioTripTotal.equalsIgnoreCase(TripSummaryTripTotal)) {
			test_steps.add("TripSummary TripTotal and Folio TripTotal are same : " + FilioTripTotal);
			reslogger.info("TripSummary TripTotal and Folio TripTotal are same : " + FilioTripTotal);
		} else {
			test_steps.add("TripSummary TripTotal and Folio TripTotal are not same : " + FilioTripTotal);
			reslogger.info("TripSummary TripTotal and Folio TripTotal are not same : " + FilioTripTotal);
		}
		if (FilioPaid.equalsIgnoreCase(TripSummaryPaid)) {
			test_steps.add("TripSummary Paid and Folio Paid are same : " + FilioPaid);
			reslogger.info("TripSummary Paid and Folio Paid are same : " + FilioPaid);
		} else {
			test_steps.add("TripSummary Paid and Folio Paid are not same : " + FilioPaid);
			reslogger.info("TripSummary Paid and Folio Paid are not same : " + FilioPaid);
		}
		if (FilioBalance.equalsIgnoreCase(TripSummaryBalance)) {
			test_steps.add("TripSummary Balance and Folio Balance are same : " + FilioBalance);
			reslogger.info("TripSummary Balance and Folio Balance are same : " + FilioBalance);
		} else {
			test_steps.add("TripSummary Balance and Folio Balance are not same : " + FilioBalance);
			reslogger.info("TripSummary Balance and Folio Balance are not same : " + FilioBalance);
		}
	}

	public void validate_GuestInfo(WebDriver driver, ArrayList test_steps, String Salutation, String GuestFirstName,
			String GuestLastName, String PhoneNumber, String AlternatePhone, String Email, String Country,
			String Account, String Address1, String Address2, String Address3, String State, String City,
			String PostalCode) {
		test_steps.add("******************* Guest Info fields verification **********************");
		reslogger.info("******************* Guest Info fields verification **********************");

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_GuestInfo_GuestName);

		String name = Salutation.trim() + " " + GuestFirstName.trim() + " " + GuestLastName.trim();
		String guestname = res.CP_GuestInfo_GuestName.getText().trim();
		reslogger.info(guestname);
		if (guestname.equalsIgnoreCase(name.trim())) {
			test_steps.add("Reservation Guest Info GuestName field verified : " + name);
			reslogger.info("Reservation Guest Info GuestName field verified : " + name);
		} else {
			test_steps.add("Reservation Guest Info GuestName field not found : " + name);
			reslogger.info("Reservation Guest Info GuestName field not found : " + name);
		}

		String contactname = res.CP_GuestInfo_ContactName.getText().trim();
		reslogger.info(contactname);
		if (contactname.equalsIgnoreCase(name.trim())) {
			test_steps.add("Reservation Guest Info ContactName field verified : " + name);
			reslogger.info("Reservation Guest Info ContactName field verified : " + name);
		} else {
			test_steps.add("Reservation Guest Info ContactName field not found : " + name);
			reslogger.info("Reservation Guest Info ContactName field not found : " + name);
		}

		PhoneNumber = PhoneNumber.replace("" + PhoneNumber.trim().charAt(0), "(" + PhoneNumber.trim().charAt(0));
		PhoneNumber = PhoneNumber.replace("" + PhoneNumber.trim().charAt(4), ")" + PhoneNumber.trim().charAt(4));
		PhoneNumber = PhoneNumber.replace("" + PhoneNumber.trim().charAt(5), " " + PhoneNumber.trim().charAt(5));
		PhoneNumber = PhoneNumber.replace("" + PhoneNumber.trim().charAt(9), "-" + PhoneNumber.trim().charAt(9));

		String code = null;
		if (Country.equalsIgnoreCase("United States")) {
			code = "1";
		} else if (Country.equalsIgnoreCase("United Kingdom")) {
			code = "41";
		}
		code = code + "-";
		PhoneNumber = code + PhoneNumber;
		reslogger.info(PhoneNumber);

		String phone = res.CP_GuestInfo_Phone.getText().trim();
		if (phone.equalsIgnoreCase(PhoneNumber)) {
			test_steps.add("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
			reslogger.info("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
		} else {
			test_steps.add("Reservation Guest Info PhoneNumber field not found : " + PhoneNumber);
			reslogger.info("Reservation Guest Info PhoneNumber field not found : " + PhoneNumber);
		}

		AlternatePhone = AlternatePhone.replace("" + AlternatePhone.trim().charAt(0),
				"(" + AlternatePhone.trim().charAt(0));
		AlternatePhone = AlternatePhone.replace("" + AlternatePhone.trim().charAt(4),
				")" + AlternatePhone.trim().charAt(4));
		AlternatePhone = AlternatePhone.replace("" + AlternatePhone.trim().charAt(5),
				" " + AlternatePhone.trim().charAt(5));
		AlternatePhone = AlternatePhone.replace("" + AlternatePhone.trim().charAt(9),
				"-" + AlternatePhone.trim().charAt(9));

		AlternatePhone = code + AlternatePhone;
		reslogger.info(AlternatePhone);

		phone = res.CP_GuestInfo_AlternatePhone.getText().trim();
		if (phone.equalsIgnoreCase(AlternatePhone)) {
			test_steps.add("Reservation Guest Info AlternatePhone field verified : " + AlternatePhone);
			reslogger.info("Reservation Guest Info AlternatePhone field verified : " + AlternatePhone);
		} else {
			test_steps.add("Reservation Guest Info AlternatePhone field not found : " + AlternatePhone);
			reslogger.info("Reservation Guest Info AlternatePhone field not found : " + AlternatePhone);
		}

		String mail = res.CP_GuestInfo_Email.getText().trim();
		reslogger.info(mail);
		if (mail.equalsIgnoreCase(Email.trim())) {
			test_steps.add("Reservation Guest Info Email field verified : " + Email);
			reslogger.info("Reservation Guest Info Email field verified : " + Email);
		} else {
			test_steps.add("Reservation Guest Info Email field not found : " + Email);
			reslogger.info("Reservation Guest Info Email field not found : " + Email);
		}

		String account = res.CP_GuestInfo_Account.getText().trim();
		if (account.equalsIgnoreCase("-") && (Account.equalsIgnoreCase("") || Account.isEmpty())) {
			test_steps.add("Reservation Guest Info Account field verified");
			reslogger.info("Reservation Guest Info Account field verified");
		} else if (!(account.equalsIgnoreCase("-")) && !(Account.equalsIgnoreCase("") || Account.isEmpty())) {
			if (account.contentEquals(Account.trim())) {
				test_steps.add("Reservation Guest Info Account field verified : " + Account);
				reslogger.info("Reservation Guest Info Account field verified  : " + Account);
			} else {
				test_steps.add("Reservation Guest Info Account field not found : " + Account);
				reslogger.info("Reservation Guest Info Account field not found : " + Account);
			}
		} else {
			test_steps.add("Reservation Guest Info Account field not found : " + Account);
			reslogger.info("Reservation Guest Info Account field not found : " + Account);
		}

		String address1 = res.CP_GuestInfo_Address1.getText().trim();
		reslogger.info(address1);
		if (address1.equalsIgnoreCase(Address1.trim())) {
			test_steps.add("Reservation Guest Info Address1 field verified : " + Address1);
			reslogger.info("Reservation Guest Info Address1 field verified : " + Address1);
		} else {
			test_steps.add("Reservation Guest Info Address1 field not found : " + Address1);
			reslogger.info("Reservation Guest Info Address1 field not found : " + Address1);
		}

		String address2 = res.CP_GuestInfo_Address2.getText().trim();
		reslogger.info(address2);
		if (address2.equalsIgnoreCase(Address2.trim())) {
			test_steps.add("Reservation Guest Info Address2 field verified : " + Address2);
			reslogger.info("Reservation Guest Info Address2 field verified : " + Address2);
		} else {
			test_steps.add("Reservation Guest Info Address2 field not found : " + Address2);
			reslogger.info("Reservation Guest Info Address2 field not found : " + Address2);
		}

		String address3 = res.CP_GuestInfo_Address3.getText().trim();
		reslogger.info(address3);
		if (address3.equalsIgnoreCase(Address3.trim())) {
			test_steps.add("Reservation Guest Info Address3 field verified : " + Address3);
			reslogger.info("Reservation Guest Info Address3 field verified : " + Address3);
		} else {
			test_steps.add("Reservation Guest Info Address3 field not found : " + Address3);
			reslogger.info("Reservation Guest Info Address3 field not found : " + Address3);
		}

		String city = res.CP_GuestInfo_City.getText().trim();
		reslogger.info(city);
		if (city.equalsIgnoreCase(City.trim())) {
			test_steps.add("Reservation Guest Info City field verified : " + City);
			reslogger.info("Reservation Guest Info City field verified : " + City);
		} else {
			test_steps.add("Reservation Guest Info City field not found : " + City);
			reslogger.info("Reservation Guest Info City field not found : " + City);
		}

		String postalcode = res.CP_GuestInfo_PostalCode.getText().trim();
		reslogger.info(postalcode);
		if (postalcode.equalsIgnoreCase(PostalCode.trim())) {
			test_steps.add("Reservation Guest Info PostalCode field verified : " + PostalCode);
			reslogger.info("Reservation Guest Info PostalCode field verified : " + PostalCode);
		} else {
			test_steps.add("Reservation Guest Info PostalCode field not found : " + PostalCode);
			reslogger.info("Reservation Guest Info PostalCode field not found : " + PostalCode);
		}

		String country = res.CP_GuestInfo_Country.getText().trim();
		reslogger.info(country);
		if (country.equalsIgnoreCase(Country.trim())) {
			test_steps.add("Reservation Guest Info Country field verified : " + Country);
			reslogger.info("Reservation Guest Info Country field verified : " + Country);
		} else {
			test_steps.add("Reservation Guest Info Country field not found : " + Country);
			reslogger.info("Reservation Guest Info Country field not found : " + Country);
		}

		String state = res.CP_GuestInfo_State.getText().trim();
		reslogger.info(state);

		if (!(state.equalsIgnoreCase("") || state.isEmpty())) {
			if (state.equalsIgnoreCase(State.trim())) {
				test_steps.add("Reservation Guest Info State field verified : " + State);
				reslogger.info("Reservation Guest Info State field verified : " + State);
			} else {
				test_steps.add("Reservation Guest Info State field not found : " + State);
				reslogger.info("Reservation Guest Info State field not found : " + State);
			}
		}
	}

	public void validate_MRB_GuestInfo(WebDriver driver, ArrayList test_steps, String Salutation, String GuestFirstName,
			String GuestLastName, String PhoneNumber, String AlternatePhone, String Email, String Country,
			String Account, String Address1, String Address2, String Address3, String State, String City,
			String PostalCode) {
		test_steps.add("******************* MRB Guest Info fields verification **********************");
		reslogger.info("******************* MRB Guest Info fields verification **********************");

		String[] sal = Salutation.split("\\|");
		String[] guestFName = GuestFirstName.split("\\|");
		String[] guestLName = GuestLastName.split("\\|");
		String[] phonenum = PhoneNumber.split("\\|");
		String[] email = Email.split("\\|");

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_GuestInfo_GuestName);

		String name = sal[0].trim() + " " + guestFName[0].trim() + " " + guestLName[0].trim();
		String guestname = res.CP_GuestInfo_GuestName.getText().trim();
		reslogger.info(guestname);
		if (guestname.equalsIgnoreCase(name.trim())) {
			test_steps.add("Reservation Guest Info GuestName field verified : " + name);
			reslogger.info("Reservation Guest Info GuestName field verified : " + name);
		} else {
			test_steps.add("Reservation Guest Info GuestName field not found : " + name);
			reslogger.info("Reservation Guest Info GuestName field not found : " + name);
		}

		String contactname = res.CP_GuestInfo_ContactName.getText().trim();
		reslogger.info(contactname);
		if (contactname.equalsIgnoreCase(name.trim())) {
			test_steps.add("Reservation Guest Info ContactName field verified : " + name);
			reslogger.info("Reservation Guest Info ContactName field verified : " + name);
		} else {
			test_steps.add("Reservation Guest Info ContactName field not found : " + name);
			reslogger.info("Reservation Guest Info ContactName field not found : " + name);
		}

		phonenum[0] = phonenum[0].replace("" + phonenum[0].trim().charAt(0), "(" + phonenum[0].trim().charAt(0));
		phonenum[0] = phonenum[0].replace("" + phonenum[0].trim().charAt(4), ")" + phonenum[0].trim().charAt(4));
		phonenum[0] = phonenum[0].replace("" + phonenum[0].trim().charAt(5), " " + phonenum[0].trim().charAt(5));
		phonenum[0] = phonenum[0].replace("" + phonenum[0].trim().charAt(9), "-" + phonenum[0].trim().charAt(9));

		String code = null;
		if (Country.equalsIgnoreCase("United States")) {
			code = "1";
		} else if (Country.equalsIgnoreCase("United Kingdom")) {
			code = "41";
		}
		code = code + "-";
		PhoneNumber = code + phonenum[0];
		reslogger.info(PhoneNumber);

		String phone = res.CP_GuestInfo_Phone.getText().trim();
		if (phone.equalsIgnoreCase(PhoneNumber)) {
			test_steps.add("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
			reslogger.info("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
		} else {
			test_steps.add("Reservation Guest Info PhoneNumber field not found : " + PhoneNumber);
			reslogger.info("Reservation Guest Info PhoneNumber field not found : " + PhoneNumber);
		}

		AlternatePhone = AlternatePhone.replace("" + AlternatePhone.trim().charAt(0),
				"(" + AlternatePhone.trim().charAt(0));
		AlternatePhone = AlternatePhone.replace("" + AlternatePhone.trim().charAt(4),
				")" + AlternatePhone.trim().charAt(4));
		AlternatePhone = AlternatePhone.replace("" + AlternatePhone.trim().charAt(5),
				" " + AlternatePhone.trim().charAt(5));
		AlternatePhone = AlternatePhone.replace("" + AlternatePhone.trim().charAt(9),
				"-" + AlternatePhone.trim().charAt(9));

		AlternatePhone = code + AlternatePhone;
		reslogger.info(AlternatePhone);

		phone = res.CP_GuestInfo_AlternatePhone.getText().trim();
		if (phone.equalsIgnoreCase(AlternatePhone)) {
			test_steps.add("Reservation Guest Info AlternatePhone field verified : " + AlternatePhone);
			reslogger.info("Reservation Guest Info AlternatePhone field verified : " + AlternatePhone);
		} else {
			test_steps.add("Reservation Guest Info AlternatePhone field not found : " + AlternatePhone);
			reslogger.info("Reservation Guest Info AlternatePhone field not found : " + AlternatePhone);
		}

		String mail = res.CP_GuestInfo_Email.getText().trim();
		reslogger.info(mail);
		if (mail.equalsIgnoreCase(email[0].trim())) {
			test_steps.add("Reservation Guest Info Email field verified : " + email[0]);
			reslogger.info("Reservation Guest Info Email field verified : " + email[0]);
		} else {
			test_steps.add("Reservation Guest Info Email field not found : " + email[0]);
			reslogger.info("Reservation Guest Info Email field not found : " + email[0]);
		}
		String account;
		if (!(Account.equalsIgnoreCase("") || Account.isEmpty())) {
			account = "//guest-info//span[contains(text(),'Gues')]/../..//label[text()='Account']/following-sibling::a//span";
			account = driver.findElement(By.xpath(account)).getText();
		} else {

			account = res.CP_GuestInfo_Account.getText().trim();
		}
		if (account.equalsIgnoreCase("-") && (Account.equalsIgnoreCase("") || Account.isEmpty())) {
			test_steps.add("Reservation Guest Info Account field verified");
			reslogger.info("Reservation Guest Info Account field verified");
		} else if (!(account.equalsIgnoreCase("-")) && !(Account.equalsIgnoreCase("") || Account.isEmpty())) {
			if (account.contentEquals(Account.trim())) {
				test_steps.add("Reservation Guest Info Account field verified : " + Account);
				reslogger.info("Reservation Guest Info Account field verified  : " + Account);
			} else {
				test_steps.add("Reservation Guest Info Account field not found : " + Account);
				reslogger.info("Reservation Guest Info Account field not found : " + Account);
			}
		} else {
			test_steps.add("Reservation Guest Info Account field not found : " + Account);
			reslogger.info("Reservation Guest Info Account field not found : " + Account);
		}

		String address1 = res.CP_GuestInfo_Address1.getText().trim();
		reslogger.info(address1);
		if (address1.equalsIgnoreCase(Address1.trim())) {
			test_steps.add("Reservation Guest Info Address1 field verified : " + Address1);
			reslogger.info("Reservation Guest Info Address1 field verified : " + Address1);
		} else {
			test_steps.add("Reservation Guest Info Address1 field not found : " + Address1);
			reslogger.info("Reservation Guest Info Address1 field not found : " + Address1);
		}

		String address2 = res.CP_GuestInfo_Address2.getText().trim();
		reslogger.info(address2);
		if (address2.equalsIgnoreCase(Address2.trim())) {
			test_steps.add("Reservation Guest Info Address2 field verified : " + Address2);
			reslogger.info("Reservation Guest Info Address2 field verified : " + Address2);
		} else {
			test_steps.add("Reservation Guest Info Address2 field not found : " + Address2);
			reslogger.info("Reservation Guest Info Address2 field not found : " + Address2);
		}

		String address3 = res.CP_GuestInfo_Address3.getText().trim();
		reslogger.info(address3);
		if (address3.equalsIgnoreCase(Address3.trim())) {
			test_steps.add("Reservation Guest Info Address3 field verified : " + Address3);
			reslogger.info("Reservation Guest Info Address3 field verified : " + Address3);
		} else {
			test_steps.add("Reservation Guest Info Address3 field not found : " + Address3);
			reslogger.info("Reservation Guest Info Address3 field not found : " + Address3);
		}

		String city = res.CP_GuestInfo_City.getText().trim();
		reslogger.info(city);
		if (city.equalsIgnoreCase(City.trim())) {
			test_steps.add("Reservation Guest Info City field verified : " + City);
			reslogger.info("Reservation Guest Info City field verified : " + City);
		} else {
			test_steps.add("Reservation Guest Info City field not found : " + City);
			reslogger.info("Reservation Guest Info City field not found : " + City);
		}

		String postalcode = res.CP_GuestInfo_PostalCode.getText().trim();
		reslogger.info(postalcode);
		if (postalcode.equalsIgnoreCase(PostalCode.trim())) {
			test_steps.add("Reservation Guest Info PostalCode field verified : " + PostalCode);
			reslogger.info("Reservation Guest Info PostalCode field verified : " + PostalCode);
		} else {
			test_steps.add("Reservation Guest Info PostalCode field not found : " + PostalCode);
			reslogger.info("Reservation Guest Info PostalCode field not found : " + PostalCode);
		}

		String country = res.CP_GuestInfo_Country.getText().trim();
		reslogger.info(country);
		if (country.equalsIgnoreCase(Country.trim())) {
			test_steps.add("Reservation Guest Info Country field verified : " + Country);
			reslogger.info("Reservation Guest Info Country field verified : " + Country);
		} else {
			test_steps.add("Reservation Guest Info Country field not found : " + Country);
			reslogger.info("Reservation Guest Info Country field not found : " + Country);
		}

		String state = res.CP_GuestInfo_State.getText().trim();
		reslogger.info(state);

		if (!(state.equalsIgnoreCase("") || state.isEmpty())) {
			if (state.equalsIgnoreCase(State.trim())) {
				test_steps.add("Reservation Guest Info State field verified : " + State);
				reslogger.info("Reservation Guest Info State field verified : " + State);
			} else {
				test_steps.add("Reservation Guest Info State field not found : " + State);
				reslogger.info("Reservation Guest Info State field not found : " + State);
			}
		}
	}

	public void validate_MRB_AdditionalGuestInfo(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String PhoneNumber, String Email, String Country) {
		test_steps.add("******************* MRB additional Guest Info fields verification **********************");
		reslogger.info("******************* MRB additional Guest Info fields verification **********************");

		String[] sal = Salutation.split("\\|");
		String[] guestFName = GuestFirstName.split("\\|");
		String[] guestLName = GuestLastName.split("\\|");
		String[] phonenum = PhoneNumber.split("\\|");
		String[] email = Email.split("\\|");

		String addtionalRoom = "//span[contains(text(),'Additional Room: ')]";

		int count = sal.length;

		for (int i = 1; i < count; i++) {

			addtionalRoom = "(//span[contains(text(),'Additional Room: ')])[" + i + "]";
			Wait.WaitForElement(driver, addtionalRoom);
			driver.findElement(By.xpath(addtionalRoom)).click();
			test_steps.add("Expending addtinal guest room : " + i);
			reslogger.info("Expending addtinal guest room : " + i);

			Elements_CPReservation res = new Elements_CPReservation(driver);

			String guestName = "(//span[contains(text(),'Additional Room: ')])[" + i
					+ "]/../../../../../..//label[text()='Guest Name']/following-sibling::span";
			Wait.WaitForElement(driver, guestName);

			String name = sal[i].trim() + " " + guestFName[i].trim() + " " + guestLName[i].trim();
			String guestname = driver.findElement(By.xpath(guestName)).getText().trim();
			reslogger.info(guestname);
			if (guestname.equalsIgnoreCase(name.trim())) {
				test_steps.add("Reservation addtinal Guest Info GuestName field verified for additonal room : " + i
						+ " " + name);
				reslogger.info("Reservation addtinal Guest Info GuestName field verified for additonal room : " + i
						+ " " + name);
			} else {
				test_steps.add("Reservation addtinal Guest Info GuestName field not found for additonal room : " + i
						+ " " + name);
				reslogger.info("Reservation addtinal Guest Info GuestName field not found for additonal room : " + i
						+ " " + name);
			}

			String code = null;
			if (Country.equalsIgnoreCase("United States")) {
				code = "1";
			} else if (Country.equalsIgnoreCase("United Kingdom")) {
				code = "41";
			}
			code = code + "-";
			PhoneNumber = phonenum[i];
			reslogger.info(PhoneNumber);

			String phone = "(//span[contains(text(),'Additional Room: ')])[" + i
					+ "]/../../../../../..//label[text()='Phone']/following-sibling::span";
			phone = driver.findElement(By.xpath(phone)).getText().trim();
			if (phone.equalsIgnoreCase(PhoneNumber)) {
				test_steps.add("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
				reslogger.info("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
			} else {
				test_steps.add("Reservation Guest Info PhoneNumber field not found : " + PhoneNumber);
				reslogger.info("Reservation Guest Info PhoneNumber field not found : " + PhoneNumber);
			}

			String mailadd = "(//span[contains(text(),'Additional Room: ')])[" + i
					+ "]/../../../../../..//label[text()='E-mail']/following-sibling::span";
			String mail = driver.findElement(By.xpath(mailadd)).getText().trim();
			reslogger.info(mail);
			/*
			 * if (mail.equalsIgnoreCase(email[i].trim())) {
			 * test_steps.add("Reservation Guest Info Email field verified : " +
			 * email[i]);
			 * reslogger.info("Reservation Guest Info Email field verified : " +
			 * email[i]); } else {
			 * test_steps.add("Reservation Guest Info Email field not found : "
			 * + email[i]);
			 * reslogger.info("Reservation Guest Info Email field not found : "
			 * + email[i]); }
			 */
		}
	}

	public void get_AssociatedPoliciesToReservation(WebDriver driver, ArrayList test_steps)
			throws InterruptedException {
		test_steps.add("******************* Policies associated to reservation **********************");
		reslogger.info("******************* Policies associated to reservation **********************");
		String policies = "(//div[text()='Policies And Disclaimers']/..//h4)";

		int count = driver.findElements(By.xpath(policies)).size();
		for (int i = 1; i < count; i++) {
			policies = "(//div[text()='Policies And Disclaimers']/..//h4)[" + i + "]/a";
			driver.findElement(By.xpath(policies)).click();
			Wait.wait2Second();
			if (i == 1) {
				String depositPolicy = "//div[text()='Policies And Disclaimers']/..//label[text()='Deposit Policy']/following-sibling::div//button/span";
				depositPolicy = driver.findElement(By.xpath(depositPolicy)).getText();
				test_steps.add("Associated deposit policy to reservation : " + depositPolicy);
				reslogger.info("Associated deposit policy to reservation : " + depositPolicy);
			}
			if (i == 2) {
				String checkinPolicy = "//div[text()='Policies And Disclaimers']/..//label[text()='Check-in Policy']/following-sibling::div//button/span";
				checkinPolicy = driver.findElement(By.xpath(checkinPolicy)).getText();
				test_steps.add("Associated checkin policy to reservation : " + checkinPolicy);
				reslogger.info("Associated checkin policy to reservation : " + checkinPolicy);
			}
			if (i == 3) {
				String noShow = "//div[text()='Policies And Disclaimers']/..//label[text()='No show Policy']/following-sibling::div//button/span";
				noShow = driver.findElement(By.xpath(noShow)).getText();
				test_steps.add("Associated noShow policy to reservation : " + noShow);
				reslogger.info("Associated noShow policy to reservation : " + noShow);
			}
		}
	}

	public void validate_DepositAmount(WebDriver driver, ArrayList test_steps, String Number, Double DepositPaid,
			Double RoomCharges) {
		test_steps.add("******************* validating deposit amount **********************");
		reslogger.info("******************* Verify Deposit Policy Associated **********************");
		int num = Integer.parseInt(Number.trim());
		if ((RoomCharges * num) / 100 == DepositPaid) {
			test_steps.add("Deposit amount validated : " + DepositPaid);
			reslogger.info("Deposit amount validated : " + DepositPaid);
		} else {
			test_steps.add("Deposit amount paid : " + DepositPaid + " and actual deposit are not same : "
					+ (RoomCharges * num) / 100);
			reslogger.info("Deposit amount paid : " + DepositPaid + " and actual deposit are not same : "
					+ (RoomCharges * num) / 100);
		}

	}

	public void verify_DepositPolicyAssociated(WebDriver driver, ArrayList test_steps, String PolicyName)
			throws InterruptedException {
		test_steps.add("******************* Verify Deposit Policy Associated **********************");
		reslogger.info("******************* Verify Deposit Policy Associated **********************");
		String policies = "(//div[text()='Policies And Disclaimers']/..//h4)/a";
		driver.findElement(By.xpath(policies)).click();
		Wait.wait2Second();
		String depositPolicy = "//div[text()='Policies And Disclaimers']/..//label[text()='Deposit Policy']/following-sibling::div//button/span";
		depositPolicy = driver.findElement(By.xpath(depositPolicy)).getText().trim();
		test_steps.add("Associated deposit policy to reservation : " + depositPolicy);
		reslogger.info("Associated deposit policy to reservation : " + depositPolicy);
		reslogger.info(depositPolicy);
		reslogger.info(PolicyName);
		assertEquals(depositPolicy, PolicyName);
		test_steps.add("Verified Associated deposit policy to reservation : " + depositPolicy);
		reslogger.info("Verified Associated deposit policy to reservation : " + depositPolicy);
	}

	public void verify_GuestReportLabelsValidations(WebDriver driver, ArrayList test_steps)
			throws InterruptedException {
		test_steps.add("===================Guest Reports labels verification===================");
		reslogger.info("===================Guest Reports labels verification===================");
		String reports = "//div/a[contains(text(),'Reports ')]";
		Wait.WaitForElement(driver, reports);
		driver.findElement(By.xpath(reports)).click();
		Wait.wait2Second();
		String guestStatement = "//div/a[contains(text(),'Reports ')]/..//ul//span[text()='Guest Statement']";
		String guestStatementWithTaxBreakdown = "//div/a[contains(text(),'Reports ')]/..//ul//span[text()='Guest Statement with Tax breakdown']";
		String guestRegistration = "//div/a[contains(text(),'Reports ')]/..//ul//span[text()='Guest Registration']";
		String guestRegistartiontaxbreakdown = "//div/a[contains(text(),'Reports ')]/..//ul//span[text()='Guest Registration with Tax breakdown']";

		if (driver.findElement(By.xpath(guestStatement)).isDisplayed()) {
			test_steps.add("Guest Statement label displayed");
			reslogger.info("Guest Statement label displayed");
		} else {
			test_steps.add("Guest Statement label not displayed");
			reslogger.info("Guest Statement label not displayed");
		}

		if (driver.findElement(By.xpath(guestStatementWithTaxBreakdown)).isDisplayed()) {
			test_steps.add("Guest Statement with Tax breakdown label displayed");
			reslogger.info("Guest Statement with Tax breakdown label displayed");
		} else {
			test_steps.add("Guest Statement with Tax breakdown label not displayed");
			reslogger.info("Guest Statement with Tax breakdown label not displayed");
		}

		if (driver.findElement(By.xpath(guestRegistration)).isDisplayed()) {
			test_steps.add("Guest Registration label displayed");
			reslogger.info("Guest Registration label displayed");
		} else {
			test_steps.add("Guest Registration label not displayed");
			reslogger.info("Guest Registration label not displayed");
		}

		if (driver.findElement(By.xpath(guestRegistartiontaxbreakdown)).isDisplayed()) {
			test_steps.add("Guest Registration with Tax breakdown label displayed");
			reslogger.info("Guest Registration with Tax breakdown label displayed");
		} else {
			test_steps.add("Guest Registration with Tax breakdown label not displayed");
			reslogger.info("Guest Registration with Tax breakdown label not displayed");
		}
		Wait.WaitForElement(driver, reports);
		driver.findElement(By.xpath(reports)).click();
	}

	public void verify_NotesSections(WebDriver driver, ArrayList test_steps) {
		test_steps.add("******************* Verify Notes section **********************");
		reslogger.info("******************* Verify Notes section **********************");
		String note = "//a[text()='ADD NOTE ']";
		if (driver.findElement(By.xpath(note)).isDisplayed()) {
			test_steps.add("Notes Section is displayed");
			reslogger.info("Notes Section is displayed");
		} else {
			test_steps.add("Notes Section is not displayed");
			reslogger.info("Notes Section is not displayed");
		}
	}

	public void enter_Notes(WebDriver driver, ArrayList test_steps, String IsAddNotes, String NoteType, String Subject,
			String Description) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddNotes);
		test_steps.add("******************* Adding Notes **********************");
		reslogger.info("******************* Adding Notes **********************");
		if (IsAddNotes.equalsIgnoreCase("Yes")) {
			res.CP_AddNotes.click();
			test_steps.add("Click on Add Notes");
			reslogger.info("Click on Add Notes");

			String noteTypeArrow = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Type']/..//button";
			Wait.WaitForElement(driver, noteTypeArrow);
			driver.findElement(By.xpath(noteTypeArrow)).click();

			String noteType = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Type']/..//button/..//div//li/a/span[text()='"
					+ NoteType.trim() + "']";
			Wait.WaitForElement(driver, noteType);
			driver.findElement(By.xpath(noteType)).click();
			test_steps.add("Select Note Type : " + NoteType);
			reslogger.info("Select Note Type : " + NoteType);

			String subject = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Subject']/..//input";
			Wait.WaitForElement(driver, subject);
			driver.findElement(By.xpath(subject)).sendKeys(Subject);
			test_steps.add("Enter subject : " + Subject);
			reslogger.info("Enter subject : " + Subject);

			String description = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Description']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, description);
			driver.findElement(By.xpath(description)).sendKeys(Description);
			test_steps.add("Enter Description : " + Description);
			reslogger.info("Enter Description : " + Description);

			String user = "//input[starts-with(@data-bind,'value: updatedBy')]";

			JavascriptExecutor js = (JavascriptExecutor) driver;
			user = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(user)));

			String add = "//h4[text()='Add Notes']/../..//button[text()='Add']";
			Wait.WaitForElement(driver, add);
			driver.findElement(By.xpath(add)).click();
			test_steps.add("Click on Add");
			reslogger.info("Click on Add");

			String noteverify = "//td[text()='" + NoteType.trim() + "']";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Sucessfully added Note : " + Subject);
			reslogger.info("Sucessfully added Note : " + Subject);

			test_steps.add("Verified Note Type : " + NoteType);
			reslogger.info("Verified Note Type : " + NoteType);

			noteverify = "//td[text()='" + Subject.trim() + "']";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note Subject : " + Subject);
			reslogger.info("Verified Note Subject : " + Subject);

			noteverify = "//td[text()='" + Description.trim() + "']";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note Description : " + Description);
			reslogger.info("Verified Note Description : " + Description);

			noteverify = "//td[text()='" + user.trim() + "']";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note updated by : " + user);
			reslogger.info("Verified Note updated by : " + user);
		}
	}

	public void verify_Notes(WebDriver driver, ArrayList test_steps, String NoteType, String Subject,
			String Description, String user, ArrayList RoomAbbri, ArrayList Rooms) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddNotes);
		test_steps.add("******************* Verify  Notes **********************");
		reslogger.info("******************* Verify Notes **********************");
		int count = RoomAbbri.size();
		for (int i = 0; i < count; i++) {
			String noteverify = "(//td[text()='" + NoteType.trim() + "'])[" + (i + 1) + "]";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Sucessfully added Note : " + Subject);
			reslogger.info("Sucessfully added Note : " + Subject);

			test_steps.add("Verified Note Type : " + NoteType);
			reslogger.info("Verified Note Type : " + NoteType);

			noteverify = "(//td[text()='" + Subject.trim() + "'])[" + (i + 1) + "]";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note Subject : " + Subject);
			reslogger.info("Verified Note Subject : " + Subject);

			noteverify = "(//td[text()='" + Description.trim() + "'])[" + (i + 1) + "]";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note Description : " + Description);
			reslogger.info("Verified Note Description : " + Description);

			noteverify = "(//td[text()='" + user.trim() + "'])[" + (i + 1) + "]";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note updated by : " + user);
			reslogger.info("Verified Note updated by : " + user);

			String[] room = Rooms.get(i).toString().trim().split(":");
			String abbr = RoomAbbri.get(i).toString().trim();

			String[] abbri = abbr.trim().split(":");

			abbr = abbri[1] + ":" + room[1];
			reslogger.info(abbr);
			String roomnum = "//td[contains(text(),'" + abbr + "')]";
			reslogger.info(roomnum);
			Wait.WaitForElement(driver, roomnum);
			test_steps.add("Verified Note Room Number : " + abbr);
			reslogger.info("Verified Note Room Number : " + abbr);
		}
	}

	public void enter_NotesWithTimeZone(WebDriver driver, ArrayList test_steps, String IsAddNotes, String NoteType,
			String Subject, String Description, String timeZone) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddNotes);
		test_steps.add("******************* Adding Notes **********************");
		reslogger.info("******************* Adding Notes **********************");
		if (IsAddNotes.equalsIgnoreCase("Yes")) {
			res.CP_AddNotes.click();
			test_steps.add("Click on Add Notes");
			reslogger.info("Click on Add Notes");

			String noteTypeArrow = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Type']/..//button";
			Wait.WaitForElement(driver, noteTypeArrow);
			driver.findElement(By.xpath(noteTypeArrow)).click();

			String noteType = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Type']/..//button/..//div//li/a/span[text()='"
					+ NoteType.trim() + "']";
			Wait.WaitForElement(driver, noteType);
			driver.findElement(By.xpath(noteType)).click();
			test_steps.add("Select Note Type : " + NoteType);
			reslogger.info("Select Note Type : " + NoteType);

			String subject = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Subject']/..//input";
			Wait.WaitForElement(driver, subject);
			driver.findElement(By.xpath(subject)).sendKeys(Subject);
			test_steps.add("Enter subject : " + Subject);
			reslogger.info("Enter subject : " + Subject);

			String description = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Description']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, description);
			driver.findElement(By.xpath(description)).sendKeys(Description);
			test_steps.add("Enter Description : " + Description);
			reslogger.info("Enter Description : " + Description);

			String user = "//input[starts-with(@data-bind,'value: updatedBy')]";

			JavascriptExecutor js = (JavascriptExecutor) driver;
			user = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(user)));

			Date date = new Date();
			DateFormat df = new SimpleDateFormat("MM/dd/yyy");

			// Use Madrid's time zone to format the date in
			df.setTimeZone(TimeZone.getTimeZone(timeZone));

			reslogger.info(df.format(date));

			String updatedon = "(//h4[text()='Add Notes']/../..//label[text()='Updated On']/../input)";
			js = (JavascriptExecutor) driver;
			String updatedOn = (String) js.executeScript("return arguments[0].value",
					driver.findElement(By.xpath(updatedon)));
			if (df.format(date).equalsIgnoreCase(updatedOn)) {
				test_steps.add("Updated on date validated with property time zone date : " + df.format(date));
				reslogger.info("Updated on date validated with property time zone date : " + df.format(date));
			}

			String add = "//h4[text()='Add Notes']/../..//button[text()='Add']";
			Wait.WaitForElement(driver, add);
			driver.findElement(By.xpath(add)).click();
			test_steps.add("Click on Add");
			reslogger.info("Click on Add");

			String noteverify = "//td[text()='" + NoteType.trim() + "']";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Sucessfully added Note : " + Subject);
			reslogger.info("Sucessfully added Note : " + Subject);

			test_steps.add("Verified Note Type : " + NoteType);
			reslogger.info("Verified Note Type : " + NoteType);

			noteverify = "//td[text()='" + Subject.trim() + "']";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note Subject : " + Subject);
			reslogger.info("Verified Note Subject : " + Subject);

			noteverify = "//td[text()='" + Description.trim() + "']";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note Description : " + Description);
			reslogger.info("Verified Note Description : " + Description);

			noteverify = "//td[text()='" + user.trim() + "']";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note updated by : " + user);
			reslogger.info("Verified Note updated by : " + user);
		}
	}

	public boolean verify_TaskSections(WebDriver driver, ArrayList test_steps) {
		test_steps.add("******************* Verify Task section **********************");
		reslogger.info("******************* Verify Task section **********************");
		String task = "//button[text()='ADD TASK']";
		if (driver.findElement(By.xpath(task)).isDisplayed()) {
			test_steps.add("Task Section is displayed");
			reslogger.info("Task Section is displayed");
			return true;
		} else {
			test_steps.add("Task Section is not displayed");
			reslogger.info("Task Section is not displayed");
			return false;
		}
	}

	public void enter_Task(WebDriver driver, ArrayList test_steps, String IsTask, String TaskCategory, String TaskType,
			String TaskDetails, String TaskRemarks, String TaskDueon, String TaskAssignee, String TaskStatus)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddTask);
		test_steps.add("******************* Adding Task **********************");
		reslogger.info("******************* Adding Task **********************");
		if (IsTask.equalsIgnoreCase("Yes")) {
			res.CP_AddTask.click();
			test_steps.add("Click on Add Task");
			reslogger.info("Click on Add Task");

			String taskCategoryArrow = "//label[text()='Category']/..//button";
			Wait.WaitForElement(driver, taskCategoryArrow);
			driver.findElement(By.xpath(taskCategoryArrow)).click();

			String taskCategory = "//label[text()='Category']/..//div/ul//span[text()='" + TaskCategory.trim() + "']";
			Wait.WaitForElement(driver, taskCategory);
			driver.findElement(By.xpath(taskCategory)).click();
			test_steps.add("Select Task Category : " + TaskCategory);
			reslogger.info("Select Task Category : " + TaskCategory);

			String taskType = "(//label[text()='Type']/..//button)[2]";
			Wait.WaitForElement(driver, taskType);
			driver.findElement(By.xpath(taskType)).click();
			Wait.wait2Second();
			taskType = "(//label[text()='Type']/..//div/ul//span[text()='" + TaskType.trim() + "'])[2]";
			Wait.WaitForElement(driver, taskType);
			driver.findElement(By.xpath(taskType)).click();
			test_steps.add("Select Task Type : " + TaskType);
			reslogger.info("Select Task Type : " + TaskType);

			String taskDetails = "//label[text()='Details']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, taskDetails);
			driver.findElement(By.xpath(taskDetails)).sendKeys(TaskDetails);
			test_steps.add("Select Task Details : " + TaskDetails);
			reslogger.info("Select Task Details : " + TaskDetails);

			String taskRemarks = "//label[text()='Remarks']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, taskRemarks);
			driver.findElement(By.xpath(taskRemarks)).sendKeys(TaskRemarks);
			test_steps.add("Enter Task Remarks : " + TaskRemarks);
			reslogger.info("Enter Task Remarks : " + TaskRemarks);

			String dueCalender = "//label[text()='Due On']/..//i";
			Wait.WaitForElement(driver, dueCalender);
			driver.findElement(By.xpath(dueCalender)).click();
			String monthYear = Utility.get_MonthYear(TaskDueon);
			String day = Utility.getDay(TaskDueon);
			reslogger.info(monthYear);
			String header = null, headerText = null, next = null, date;
			for (int i = 1; i <= 12; i++) {
				header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
				headerText = driver.findElement(By.xpath(header)).getText();
				if (headerText.equalsIgnoreCase(monthYear)) {
					date = "//td[contains(@class,'day') and text()='" + day + "']";
					Wait.WaitForElement(driver, date);
					int size = driver.findElements(By.xpath(date)).size();
					for (int k = 1; k <= size; k++) {
						date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + k + "]";
						String classText = driver.findElement(By.xpath(date)).getAttribute("class");
						if (!classText.contains("old")) {
							driver.findElement(By.xpath(date)).click();
							test_steps.add("Selecting due on date : " + TaskDueon);
							reslogger.info("Selecting due on date : " + TaskDueon);
							break;
						}
					}
					break;
				} else {
					next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
					Wait.WaitForElement(driver, next);
					driver.findElement(By.xpath(next)).click();
					Wait.wait2Second();
				}
			}

			String taskAssignee = "//label[text()='Assignee']/..//input";
			Wait.WaitForElement(driver, taskAssignee);
			driver.findElement(By.xpath(taskAssignee)).sendKeys(TaskAssignee);
			Wait.wait2Second();
			String taskassgin = "//label[text()='Assignee']/..//div/ul/li/div";
			Wait.WaitForElement(driver, taskassgin);
			driver.findElement(By.xpath(taskassgin)).click();
			test_steps.add("Enter Task Assignee : " + TaskAssignee);
			reslogger.info("Enter Task Assignee : " + TaskAssignee);

			String taskStatus = "(//label[text()='Status']/..//button)[2]";
			Wait.WaitForElement(driver, taskStatus);
			driver.findElement(By.xpath(taskStatus)).click();
			String status = "(//label[text()='Status']/..//button)[2]/following-sibling::div//li//span[text()='"
					+ TaskStatus.trim() + "']";
			Wait.WaitForElement(driver, status);
			driver.findElement(By.xpath(status)).click();
			test_steps.add("Select Task Status : " + TaskStatus);
			reslogger.info("Select Task Status : " + TaskStatus);

			String save = "//h4[text()='Add Task']/../..//button[text()='Save']";
			Wait.WaitForElement(driver, save);
			driver.findElement(By.xpath(save)).click();
			test_steps.add("Click on Save");
			reslogger.info("Click on Save");

			String taskVerify = "//span[text()='Tasks ']/../..//td//span[text()='" + TaskType.trim() + "']";
			Wait.WaitForElement(driver, taskVerify);
			test_steps.add("Sucessfully added Task : " + TaskType);
			reslogger.info("Sucessfully added Task : " + TaskType);

			test_steps.add("Verified Task Type : " + TaskType);
			reslogger.info("Verified Task Type : " + TaskType);

			test_steps.add("Verified Task Type : " + TaskType);
			reslogger.info("Verified Task Type : " + TaskType);

			taskDetails = "//span[text()='Tasks ']/../..//td[text()='" + TaskDetails.trim() + "']";
			Wait.WaitForElement(driver, taskDetails);
			test_steps.add("Verified Task details : " + TaskDetails);
			reslogger.info("Verified Task details : " + TaskDetails);

			String[] taskdue = TaskDueon.split("/");
			String due = "//span[text()='Tasks ']/../..//td[contains(text(),'" + taskdue[1] + "/" + taskdue[0] + "')]";
			Wait.WaitForElement(driver, due);
			test_steps.add("Verified Task due on : " + TaskDueon);
			reslogger.info("Verified Task due on : " + TaskDueon);

			String stat = "//span[text()='Tasks ']/../..//td[contains(text(),'" + TaskStatus.trim() + "')]";
			Wait.WaitForElement(driver, stat);
			test_steps.add("Verified Tsak Status : " + TaskStatus);
			reslogger.info("Verified Task Status : " + TaskStatus);

		}
	}

	public void select_Dates(WebDriver driver, ArrayList test_steps, String CheckInDate, String CheckoutDate,
			String Adults, String Children, String RatePlan, String PromoCode, String IsSplitRes)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		String loading = "(//div[@class='ir-loader-in'])[2]";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");

		String[] checkin = CheckInDate.split("\\|");
		String[] checkout = CheckoutDate.split("\\|");
		String[] adu = Adults.split("\\|");
		String[] child = Children.split("\\|");
		String[] rate = RatePlan.split("\\|");
		String[] promoCode = PromoCode.split("\\|");
		Boolean flag = false;
		reslogger.info(CheckInDate);
		int size = adu.length;

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddRoom);
		reslogger.info("MRB size : " + size);
		if (size > 1) {
			for (int i = 1; i <= size; i++) {
				String checkInCal = "(//label[text()='Check In']/following-sibling::i)[" + i + "]";
				reslogger.info(checkInCal);
				Wait.WaitForElement(driver, checkInCal);
				driver.findElement(By.xpath(checkInCal)).click();
				reslogger.info("Check in: "+checkin[i - 1]);
				String monthYear = Utility.get_MonthYear(checkin[i - 1]);
				String day = Utility.getDay(checkin[i - 1]);
				reslogger.info(monthYear);
				String header = null, headerText = null, next = null, date;
				for (int k = 1; k <= 12; k++) {
					header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
					headerText = driver.findElement(By.xpath(header)).getText();
					if (headerText.equalsIgnoreCase(monthYear)) {
						date = "//td[contains(@class,'day') and text()='" + day + "']";
						Wait.WaitForElement(driver, date);

						int size1 = driver.findElements(By.xpath(date)).size();
						for (int l = 1; l <= size; l++) {
							date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + l + "]";
							String classText = driver.findElement(By.xpath(date)).getAttribute("class");
							if (!classText.contains("old")) {
								driver.findElement(By.xpath(date)).click();
								test_steps.add("Selecting checkin date : " + checkin[+(i - 1)]);
								reslogger.info("Selecting checkin date : " + checkin[(i - 1)]);
								break;
							}
						}

						break;
					} else {
						next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
						Wait.WaitForElement(driver, next);
						driver.findElement(By.xpath(next)).click();
						Wait.wait2Second();
					}
				}

				String checkOutCal = "(//label[text()='Check Out']/following-sibling::i)[" + i + "]";
				reslogger.info(checkOutCal);
				Wait.WaitForElement(driver, checkOutCal);
				driver.findElement(By.xpath(checkOutCal)).click();
				monthYear = Utility.get_MonthYear(checkout[i - 1]);
				day = Utility.getDay(checkout[i - 1]);
				reslogger.info(monthYear);
				for (int k = 1; k <= 12; k++) {
					header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
					headerText = driver.findElement(By.xpath(header)).getText();
					if (headerText.equalsIgnoreCase(monthYear)) {
						date = "//td[contains(@class,'day') and text()='" + day + "']";
						Wait.WaitForElement(driver, date);

						int size1 = driver.findElements(By.xpath(date)).size();
						for (int l = 1; l <= size; l++) {
							date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + l + "]";
							String classText = driver.findElement(By.xpath(date)).getAttribute("class");
							if (!classText.contains("old")) {
								driver.findElement(By.xpath(date)).click();
								test_steps.add("Selecting checkout date : " + checkout[(i - 1)]);
								reslogger.info("Selecting checkout date : " + checkout[(i - 1)]);
								break;
							}
						}
						break;
					} else {
						next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
						Wait.WaitForElement(driver, next);
						driver.findElement(By.xpath(next)).click();
						Wait.wait2Second();
					}
				}
				if (!IsSplitRes.equalsIgnoreCase("Yes")) {

					String adults = "(//label[text()='Adults']/preceding-sibling::input)[" + i + "]";
					Wait.WaitForElement(driver, adults);
					driver.findElement(By.xpath(adults)).clear();
					driver.findElement(By.xpath(adults)).sendKeys(adu[i - 1]);
					test_steps.add("Enter Number of Adults : " + adu[(i - 1)]);
					reslogger.info("Enter Number of Adults : " + adu[(i - 1)]);

					String children = "(//label[text()='Children']/preceding-sibling::input)[" + i + "]";
					Wait.WaitForElement(driver, children);
					driver.findElement(By.xpath(children)).clear();
					driver.findElement(By.xpath(children)).sendKeys(child[i - 1]);
					test_steps.add("Enter Number of Children : " + child[(i - 1)]);
					reslogger.info("Enter Number of Children : " + child[(i - 1)]);

					// res.CP_NewReservation_Rateplan.click();
					String ratebutton = "(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div/button)["
							+ i + "]";
					Wait.WaitForElement(driver, ratebutton);
					driver.findElement(By.xpath(ratebutton)).click();

					int rateCount = driver.findElements(By
							.xpath("(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[contains(text(),'"
									+ rate[i - 1].trim() + "')]/..)"))
							.size();
					String rateLoc = "(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[contains(text(),'"
							+ rate[i - 1].trim() + "')]/..)[" + rateCount + "]";
					reslogger.info(rateLoc);
					Wait.WaitForElement(driver, rateLoc);
					driver.findElement(By.xpath(rateLoc)).click();
					test_steps.add("Selecting the rateplan : " + rate[i - 1]);
					reslogger.info("Selecting the rateplan : " + rate[i - 1]);
					if (RatePlan.contains("Promo")) {
						String promo = "(//label[contains(text(),'Enter Code')]/preceding-sibling::input)[" + i + "]";
						Wait.WaitForElement(driver, promo);
						res.CP_NewReservation_PromoCode.clear();
						res.CP_NewReservation_PromoCode.sendKeys(promoCode[i - 1]);
						test_steps.add("Enter promocode : " + promoCode[i]);
						reslogger.info("Enter promocode : " + promoCode[i]);
					}
				}
				if (!(i == size)) {
					clickOnAddARoomButton(driver, test_steps);
					reslogger.info("Clicking on add room");
					if (IsSplitRes.equalsIgnoreCase("Yes") && !flag) {
						res.CP_NewReservation_SplitReservation.click();
						test_steps.add("Clicking on split reservation");
						reslogger.info("Clicking on split reservation");
					}
					flag = true;
				}
			}
		} else {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CheckinCal);
			res.CP_NewReservation_CheckinCal.click();
			String monthYear = Utility.get_MonthYear(CheckInDate);
			String day = Utility.getDay(CheckInDate);
			reslogger.info(monthYear);
			String header = null, headerText = null, next = null, date;
			for (int i = 1; i <= 12; i++) {
				header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
				headerText = driver.findElement(By.xpath(header)).getText();
				if (headerText.equalsIgnoreCase(monthYear)) {
					date = "//td[contains(@class,'day') and text()='" + day + "']";
					Wait.WaitForElement(driver, date);
					driver.findElement(By.xpath(date)).click();
					test_steps.add("Selecting checkin date : " + CheckInDate);
					reslogger.info("Selecting checkin date : " + CheckInDate);
					break;
				} else {
					next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
					Wait.WaitForElement(driver, next);
					driver.findElement(By.xpath(next)).click();
					Wait.wait2Second();
				}
			}
		}
	}

	public int randomNumber;
	public ArrayList<String> select_MRBRooms(WebDriver driver, ArrayList<String> test_steps, String RoomClass,
			String IsAssign, String Account) throws InterruptedException {

		String[] roomclass = RoomClass.split("\\|");

		int size = roomclass.length;
		ArrayList al = new ArrayList();
		for (int i = 1; i <= size; i++) {
			String Applypolicy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
			if (driver.findElements(By.xpath(Applypolicy)).size() > 0) {
				Wait.WaitForElement(driver, Applypolicy);
				Wait.wait3Second();
				driver.findElement(By.xpath(Applypolicy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");
			}
			Wait.wait5Second();
			String rm = "//span[text()='Room " + i + " of " + size + "']";
			if (driver.findElement(By.xpath(rm)).isDisplayed()) {
				test_steps.add("Room " + i + " of " + size + " is displayed");
				reslogger.info("Room " + i + " of " + size + " is displayed");
			} else {
				String clickOnPopUpYesBut = "(//div[@class='row']//button[contains(text(),'Yes')])[3]";
				driver.findElement(By.xpath(clickOnPopUpYesBut)).click();

			}
			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1].trim() + "')]/following-sibling::span";
			Wait.WaitForElement(driver, rulessize);
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();

			String room = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../div[2]/span)";
			reslogger.info(room);
			Wait.WaitForElement(driver, room);
			Wait.wait2Second();
			String rooms = driver.findElement(By.xpath(room)).getText();
			reslogger.info(rooms);
			String[] roomsCount = rooms.split(" ");
			int count = Integer.parseInt(roomsCount[0].trim());

			String cost = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/span)";

			Utility.ScrollToElement(driver.findElement(By.xpath(room)), driver);

			cost = driver.findElement(By.xpath(cost)).getText();
			cost = cost.trim();
			cost = cost.substring(1, cost.length());
			reslogger.info("cost : " + cost);
			al.add(cost);
			if (count > 0) {
				test_steps.add("Selecting room class : " + roomclass[i - 1]);
				reslogger.info("Selecting room class : " + roomclass[i - 1]);
				String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select";
				WebElement ele = driver.findElement(By.xpath(sel));
				if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
					Wait.WaitForElement(driver, unAssign);
					driver.findElement(By.xpath(unAssign)).click();
					test_steps.add("Selected room number : Unassigned");
					reslogger.info("Selected room number : Unassigned");

				} else {
					String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select/option";
					reslogger.info(roomnum);
					int count1 = driver.findElements(By.xpath(roomnum)).size();
					Random random = new Random();
					randomNumber = random.nextInt(count1 - 1) + 1;
					reslogger.info("count : " + count1);
					reslogger.info("randomNumber : " + randomNumber);
					Wait.WaitForElement(driver, sel);

					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.wait2Second();
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
							+ randomNumber + "]/a/span";
					Wait.WaitForElement(driver, roomNumber);
					driver.findElement(By.xpath(roomNumber)).click();
				}

				String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();

				String loading = "(//div[@class='ir-loader-in'])[2]";
				int counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
				reslogger.info("Waited to loading symbol");

				reslogger.info("Rule Count : " + ruleCount);
				if (ruleCount > 1) {

					String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";
					counter = 0;
					Wait.wait3Second();
					if (driver.findElements(By.xpath(rules)).size() > 0) {
						driver.findElement(By.xpath(rules)).click();
						test_steps.add(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
						reslogger.info(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

						loading = "(//div[@class='ir-loader-in'])[2]";
						counter = 0;
						while (true) {
							if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
								break;
							} else if (counter == 3) {
								break;
							} else {
								counter++;
								Wait.wait3Second();
							}
						}
					}
				}
				if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
					if (i == 1) {
						String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
						if (driver.findElements(By.xpath(policy)).size() > 0) {
							Wait.WaitForElement(driver, policy);
							driver.findElement(By.xpath(policy)).click();
							test_steps.add("Based on the changes made, new policies are applicable.? : yes");
							reslogger.info("Based on the changes made, new policies are applicable.? : yes");

							loading = "(//div[@class='ir-loader-in'])[2]";
							counter = 0;
							while (true) {
								if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
									break;
								} else if (counter == 3) {
									break;
								} else {
									counter++;
									Wait.wait2Second();
								}
							}
						}
					}
				}
			} else {
				test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
				reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
			}
		}
		return al;
	}

	public void enter_MRB_MailingAddress(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String PhoneNumber, String AltenativePhone, String Email,
			String Account, String AccountType, String Address1, String Address2, String Address3, String City,
			String Country, String State, String PostalCode, String IsGuesProfile, String IsAddMoreGuestInfo,
			String IsSplit, ArrayList al) throws InterruptedException {

		if (!IsSplit.equalsIgnoreCase("Yes")) {
			Add_PrimaryRoom(driver, test_steps, al);
			Add_AdditionalRoom(driver, test_steps, al);
			uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
			enter_GuestDetails(driver, test_steps, Salutation, GuestFirstName, GuestLastName, Email, PhoneNumber,
					AltenativePhone, IsSplit, IsAddMoreGuestInfo);
			enter_Address(driver, test_steps, Address1, Address2, Address3);
			enter_City(driver, test_steps, City);
			select_Country(driver, test_steps, Country);
			select_State(driver, test_steps, State);
			enter_PostalCode(driver, test_steps, PostalCode);
			enter_Account(driver, test_steps, Account, AccountType);
		}
		if (IsAddMoreGuestInfo.equalsIgnoreCase("Yes") && IsSplit.equalsIgnoreCase("Yes")) {
			enter_Split_GuestName(driver, test_steps, Salutation, GuestFirstName, GuestLastName, Email, PhoneNumber,
					AltenativePhone);
			enter_Address(driver, test_steps, Address1, Address2, Address3);
			enter_City(driver, test_steps, City);
			select_Country(driver, test_steps, Country);
			select_State(driver, test_steps, State);
			enter_PostalCode(driver, test_steps, PostalCode);
			uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
			enter_Account(driver, test_steps, Account, AccountType);
		} else if (IsSplit.equalsIgnoreCase("Yes")) {
			enter_GuestName(driver, test_steps, Salutation, GuestFirstName, GuestLastName);
			enter_Phone(driver, test_steps, PhoneNumber, AltenativePhone);
			enter_Email(driver, test_steps, Email);
			enter_Address(driver, test_steps, Address1, Address2, Address3);
			enter_City(driver, test_steps, City);
			select_Country(driver, test_steps, Country);
			select_State(driver, test_steps, State);
			enter_PostalCode(driver, test_steps, PostalCode);
			uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
			enter_Account(driver, test_steps, Account, AccountType);
		}
	}

	public void enter_MRB_MailingAddressForMRB(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String PhoneNumber, String AltenativePhone, String Email,
			String Account, String AccountType, String Address1, String Address2, String Address3, String City,
			String Country, String State, String PostalCode, String IsGuesProfile, String IsAddMoreGuestInfo,
			String IsSplit, ArrayList al) throws InterruptedException {

		if (!IsSplit.equalsIgnoreCase("Yes")) {
			Add_PrimaryRoom(driver, test_steps, al);
			Add_AdditionalRoom(driver, test_steps, al);
			enter_GuestDetailsForMRB(driver, test_steps, Salutation, GuestFirstName, GuestLastName, Email, PhoneNumber,
					AltenativePhone, IsSplit, IsAddMoreGuestInfo);
			enter_Address(driver, test_steps, Address1, Address2, Address3);
			enter_City(driver, test_steps, City);
			select_Country(driver, test_steps, Country);
			select_State(driver, test_steps, State);
			enter_PostalCode(driver, test_steps, PostalCode);
			uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
			enter_Account(driver, test_steps, Account, AccountType);
		}
		if (IsAddMoreGuestInfo.equalsIgnoreCase("Yes") && IsSplit.equalsIgnoreCase("Yes")) {
			enter_Split_GuestName(driver, test_steps, Salutation, GuestFirstName, GuestLastName, Email, PhoneNumber,
					AltenativePhone);
			enter_Address(driver, test_steps, Address1, Address2, Address3);
			enter_City(driver, test_steps, City);
			select_Country(driver, test_steps, Country);
			select_State(driver, test_steps, State);
			enter_PostalCode(driver, test_steps, PostalCode);
			uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
			enter_Account(driver, test_steps, Account, AccountType);
		} else if (IsSplit.equalsIgnoreCase("Yes")) {
			enter_GuestName(driver, test_steps, Salutation, GuestFirstName, GuestLastName);
			enter_Phone(driver, test_steps, PhoneNumber, AltenativePhone);
			enter_Email(driver, test_steps, Email);
			enter_Address(driver, test_steps, Address1, Address2, Address3);
			enter_City(driver, test_steps, City);
			select_Country(driver, test_steps, Country);
			select_State(driver, test_steps, State);
			enter_PostalCode(driver, test_steps, PostalCode);
			uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
			enter_Account(driver, test_steps, Account, AccountType);
		}
	}

	public void enter_Split_GuestName(WebDriver driver, ArrayList test_steps, String Salutation, String GuestFirstName,
			String GuestLastName, String Email, String PhoneNumber, String AltenativePhone) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		String[] salu = Salutation.split("\\|");
		String[] guestFName = GuestFirstName.split("\\|");
		String[] guestLName = GuestLastName.split("\\|");
		String[] mail = Email.split("\\|");
		String[] phone = PhoneNumber.split("\\|");

		int size = salu.length;

		for (int i = 1; i <= size; i++) {
			if (i == 1) {
				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
				res.CP_NewReservation_GuestSalutation.click();
				String sal = "//span[contains(text(),'" + salu[i - 1] + "')]/../..";
				Wait.WaitForElement(driver, sal);
				driver.findElement(By.xpath(sal)).click();

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
				res.CP_NewReservation_GuestFirstName.sendKeys(guestFName[i - 1]);
				test_steps.add("Guest First Name : " + guestFName[i - 1]);
				reslogger.info("Guest First Name : " + guestFName[i - 1]);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);
				res.CP_NewReservation_GuestLastName.sendKeys(guestLName[i - 1]);
				test_steps.add("Guest Last Name : " + guestLName[i - 1]);
				reslogger.info("Guest Last Name : " + guestLName[i - 1]);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Phone);
				res.CP_NewReservation_Phone.clear();
				res.CP_NewReservation_Phone.sendKeys(phone[i - 1]);
				test_steps.add("Enter Phone Number : " + phone[i - 1]);
				reslogger.info("Enter Phone Number : " + phone[i - 1]);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AltenativePhone);
				res.CP_NewReservation_AltenativePhone.clear();
				res.CP_NewReservation_AltenativePhone.sendKeys(AltenativePhone);
				test_steps.add("Enter AltenativePhone Number : " + AltenativePhone);
				reslogger.info("Enter AltenativePhone Number : " + AltenativePhone);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Email);
				res.CP_NewReservation_Email.clear();
				res.CP_NewReservation_Email.sendKeys(mail[i - 1]);
				test_steps.add("Enter Email : " + mail[i - 1]);
				reslogger.info("Enter Email : " + mail[i - 1]);

			} else {
				int count = driver.findElements(By.xpath("//button[contains(@class,'salutationBtn')]")).size();
				String saluta = "(//button[contains(@class,'salutationBtn')])[" + count + "]";
				String slaut = "(//button[contains(@class,'salutationBtn')])[" + count
						+ "]/following-sibling::div//span[contains(text(),'" + salu[i - 1] + "')]";
				Wait.WaitForElement(driver, saluta);
				driver.findElement(By.xpath(saluta)).click();

				Wait.WaitForElement(driver, slaut);
				driver.findElement(By.xpath(slaut)).click();

				count = driver.findElements(By.xpath("//label[text()='Guest Name']/../input")).size();
				String fname = "(//label[text()='Guest Name']/../input)[" + count + "]";
				Wait.WaitForElement(driver, fname);
				driver.findElement(By.xpath(fname)).sendKeys(guestFName[i - 1]);
				test_steps.add("Guest First Name : " + guestFName[i - 1]);
				reslogger.info("Guest First Name : " + guestFName[i - 1]);

				count = driver.findElements(By.xpath("//label[text()='Last Name']/../input")).size();
				String lname = "(//label[text()='Last Name']/../input)[" + (count - 1) + "]";
				Wait.WaitForElement(driver, lname);
				driver.findElement(By.xpath(lname)).sendKeys(guestLName[i - 1]);
				test_steps.add("Guest Last Name : " + guestLName[i - 1]);
				reslogger.info("Guest Last Name : " + guestLName[i - 1]);

				count = driver.findElements(By.xpath("(//label[text()='Phone']/preceding-sibling::input)")).size();
				String ph = "(//label[text()='Phone']/preceding-sibling::input)[" + count + "]";
				driver.findElement(By.xpath(ph)).sendKeys(phone[i - 1]);
				test_steps.add("Enter Phone Number : " + phone[i - 1]);
				reslogger.info("Enter Phone Number : " + phone[i - 1]);

				count = driver.findElements(By.xpath("(//label[text()='E-mail']/preceding-sibling::input)")).size();
				String email = "(//label[text()='E-mail']/preceding-sibling::input)[" + count + "]";
				driver.findElement(By.xpath(email)).sendKeys(mail[i - 1]);
				test_steps.add("Enter Phone Number : " + mail[i - 1]);
				reslogger.info("Enter Phone Number : " + mail[i - 1]);
			}
			if (!(i == size)) {
				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddMoreGuestInfo);
				res.CP_NewReservation_AddMoreGuestInfo.click();
				test_steps.add("Clicking on Add More Guest Info");
				reslogger.info("Clicking on Add More Guest Info");
				String warn = "//div[contains(text(),'The number of guest names added surpasses the number of guests booked in the room.')]/..//button[text()='Yes']";
				Wait.WaitForElement(driver, warn);
				driver.findElement(By.xpath(warn)).click();
			}
		}
	}

	public String primary = null;;

	public void Add_PrimaryRoom(WebDriver driver, ArrayList test_steps, ArrayList al) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String primaryArrow = "//span[text()='Primary Room']/../../following-sibling::div//button";
		Wait.WaitForElement(driver, primaryArrow);
		try {
			driver.findElement(By.xpath(primaryArrow)).click();
		}catch(Exception e) {
			Utility.clickThroughAction(driver, driver.findElement(By.xpath(primaryArrow)));
		}
		
		String primaryRoom = "//span[text()='Primary Room']/../../following-sibling::div//li[2]//span";
		primary = driver.findElement(By.xpath(primaryRoom)).getText();
		Wait.WaitForElement(driver, primaryRoom);
		driver.findElement(By.xpath(primaryRoom)).click();
		test_steps.add("Selected Primary Room as : " + primary);
		reslogger.info("Selected Primary Room as : " + primary);
		al.add(primary);
	}

	public String additionalRoomNo = null;

	public void Add_AdditionalRoom(WebDriver driver, ArrayList test_steps, ArrayList al) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		String additional = "(//span[text()='Additional Room'])";
		int count = driver.findElements(By.xpath(additional)).size();
		for (int i = 1; i <= count; i++) {
			String additionalArrow = "(//span[text()='Additional Room'])[" + i
					+ "]/../../following-sibling::div//button";
			Wait.WaitForElement(driver, additionalArrow);
			driver.findElement(By.xpath(additionalArrow)).click();
			String additionalRoom = "(//span[text()='Additional Room'])[" + i + "]/../../following-sibling::div//li["
					+ (i + 2) + "]//span";
			additionalRoomNo = driver.findElement(By.xpath(additionalRoom)).getText();
			Wait.WaitForElement(driver, additionalRoom);
			driver.findElement(By.xpath(additionalRoom)).click();
			test_steps.add("Selected Addtinal  Room as : " + additionalRoomNo);
			reslogger.info("Selected Addtinal Room as : " + additionalRoomNo);
			al.add(additionalRoomNo);
		}
	}

	public void enter_GuestDetails(WebDriver driver, ArrayList test_steps, String Salutation, String GuestFirstName,
			String GuestLastName, String Email, String PhoneNumber, String AltenativePhone, String IsSplit,
			String IsAddMoreGuestInfo) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		String[] salu = Salutation.split("\\|");
		String[] guestFName = GuestFirstName.split("\\|");
		String[] guestLName = GuestLastName.split("\\|");
		String[] mail = Email.split("\\|");
		String[] phone = PhoneNumber.split("\\|");

		int size = salu.length;

		for (int i = 1; i <= size; i++) {
			if (i == 1) {
				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
				res.CP_NewReservation_GuestSalutation.click();
				String sal = "//span[contains(text(),'" + salu[i - 1] + "')]/../..";
				Wait.WaitForElement(driver, sal);
				driver.findElement(By.xpath(sal)).click();

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
				res.CP_NewReservation_GuestFirstName.clear();

				res.CP_NewReservation_GuestFirstName.sendKeys(guestFName[i - 1]);
				test_steps.add("Guest First Name : " + guestFName[i - 1]);
				reslogger.info("Guest First Name : " + guestFName[i - 1]);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);
				res.CP_NewReservation_GuestLastName.clear();

				res.CP_NewReservation_GuestLastName.sendKeys(guestLName[i - 1]);
				test_steps.add("Guest Last Name : " + guestLName[i - 1]);
				reslogger.info("Guest Last Name : " + guestLName[i - 1]);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Phone);
				res.CP_NewReservation_Phone.clear();
				res.CP_NewReservation_Phone.sendKeys(phone[i - 1]);
				test_steps.add("Enter Phone Number : " + phone[i - 1]);
				reslogger.info("Enter Phone Number : " + phone[i - 1]);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AltenativePhone);
				res.CP_NewReservation_AltenativePhone.clear();
				res.CP_NewReservation_AltenativePhone.sendKeys(AltenativePhone);
				test_steps.add("Enter AltenativePhone Number : " + AltenativePhone);
				reslogger.info("Enter AltenativePhone Number : " + AltenativePhone);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Email);
				res.CP_NewReservation_Email.clear();
				res.CP_NewReservation_Email.sendKeys(mail[i - 1]);
				test_steps.add("Enter Email : " + mail[i - 1]);
				reslogger.info("Enter Email : " + mail[i - 1]);

			} else {

				String additional = "(//span[text()='Additional Room'])";
				int count = driver.findElements(By.xpath(additional)).size();

				String saluta = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//span[text()='Select']/..";
				String slaut = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//span[text()='Select']/../following-sibling::div//li//span[text()='"
						+ salu[i - 1] + "']";
				Wait.WaitForElement(driver, saluta);
				driver.findElement(By.xpath(saluta)).click();
				reslogger.info(slaut);
				Wait.WaitForElement(driver, slaut);
				driver.findElement(By.xpath(slaut)).click();

				count = driver.findElements(By.xpath("//label[text()='Guest ']/../input")).size();
				String fname = "(//label[text()='Guest ']/../input)[" + i + "]";
				Wait.WaitForElement(driver, fname);
				driver.findElement(By.xpath(fname)).clear();
				driver.findElement(By.xpath(fname)).sendKeys(guestFName[i - 1]);
				test_steps.add("Guest First Name : " + guestFName[i - 1]);
				reslogger.info("Guest First Name : " + guestFName[i - 1]);

				count = driver
						.findElements(By
								.xpath("(//span[text()='Additional Room'])/../../../../../..//label[text()='Last Name']/../input"))
						.size();
				String lname = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//label[text()='Last Name']/../input";
				Wait.WaitForElement(driver, lname);
				driver.findElement(By.xpath(lname)).clear();
				driver.findElement(By.xpath(lname)).sendKeys(guestLName[i - 1]);
				test_steps.add("Guest Last Name : " + guestLName[i - 1]);
				reslogger.info("Guest Last Name : " + guestLName[i - 1]);

				count = driver.findElements(By.xpath("(//label[text()='Phone']/preceding-sibling::input)")).size();
				String ph = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//label[text()='Phone']/preceding-sibling::input";
				driver.findElement(By.xpath(ph)).clear();
				driver.findElement(By.xpath(ph)).sendKeys(phone[i - 1]);
				test_steps.add("Enter Phone Number : " + phone[i - 1]);
				reslogger.info("Enter Phone Number : " + phone[i - 1]);

				/*
				 * count = driver.findElements(By.xpath(
				 * "(//label[text()='E-mail']/preceding-sibling::input)")).size(
				 * ); String email = "(//span[text()='Additional Room'])[" + (i
				 * - 1) +
				 * "]/../../../../../..//label[text()='E-mail']/preceding-sibling::input";
				 * driver.findElement(By.xpath(email)).clear();
				 * 
				 * driver.findElement(By.xpath(email)).sendKeys(mail[i - 1]);
				 * test_steps.add("Enter Altenative Email : " + mail[i - 1]);
				 * reslogger.info("Enter Altenative Email : " + mail[i - 1]);
				 */

			}
			if (!(i == size) && IsAddMoreGuestInfo.equalsIgnoreCase("Yes") && IsSplit.equalsIgnoreCase("Yes")) {
				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddMoreGuestInfo);
				res.CP_NewReservation_AddMoreGuestInfo.click();
				test_steps.add("Clicking on Add More Guest Info");
				reslogger.info("Clicking on Add More Guest Info");
			}
		}
	}

	public void verify_MRB_Folio(WebDriver driver, ArrayList test_steps, ArrayList RoomAbbri, String IsAssign,
			ArrayList Rooms) throws InterruptedException {
		test_steps.add("******************* MRB Folio Creation verification **********************");
		reslogger.info("******************* MRB Folio Creation verification **********************");
		String abb = null;
		String roomnumber = null;
		reslogger.info(RoomAbbri.size());
		for (int i = 0; i < RoomAbbri.size(); i++) {
			abb = RoomAbbri.get(i).toString();
			roomnumber = Rooms.get(i).toString();
			String[] abbrivation = abb.split(":");
			String[] rooomno = roomnumber.split(":");
			String folio = null;

			String folioSize = "//button[contains(@title,'Guest')]";
			Wait.WaitForElement(driver, folioSize);
			driver.findElement(By.xpath(folioSize)).click();
			Wait.wait2Second();

			if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps
							.add("Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
					reslogger
							.info("Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
					// folio="Guest Folio For "+abbrivation[1]+" :
					// "+abbrivation[0];
					// new
					// Select(driver.findElement(By.xpath(folioSize))).selectByVisibleText(folio);
					driver.findElement(By.xpath(folio)).click();
					String roomCahrge = "//span[text()='Room Charge']";
					get_RoomCharge(driver, test_steps);
					if (driver.findElements(By.xpath(roomCahrge)).size() > 0) {
						test_steps.add("Room Charge Line Item  is present : " + "Guest Folio For " + abbrivation[1]
								+ " : " + abbrivation[0] + " with amount : " + get_RoomCharge(driver, test_steps));
						reslogger.info("Room Charge Line Item  is present : " + "Guest Folio For " + abbrivation[1]
								+ " : " + abbrivation[0] + " with amount : " + get_RoomCharge(driver, test_steps));
					} else {
						test_steps.add("Room Charge Line Item  is not present : " + "Guest Folio For " + abbrivation[1]
								+ " : " + abbrivation[0] + " with amount : " + get_RoomCharge(driver, test_steps));
						reslogger.info("Room Charge Line Item  is not present : " + "Guest Folio For " + abbrivation[1]
								+ " : " + abbrivation[0] + " with amount : " + get_RoomCharge(driver, test_steps));
					}
				} else {
					test_steps.add(
							"Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
					reslogger.info(
							"Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
				}
			} else {
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[1] + " : " + rooomno[1].trim()
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps.add(
							"Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + rooomno[1].trim());
					reslogger.info(
							"Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + rooomno[1].trim());
					// folio="Guest Folio For "+abbrivation[1]+" :
					// "+rooomno[1].trim();
					// new
					// Select(driver.findElement(By.xpath(folioSize))).selectByVisibleText(folio);
					driver.findElement(By.xpath(folio)).click();
					String roomCahrge = "//span[text()='Room Charge']";
					if (driver.findElements(By.xpath(roomCahrge)).size() > 0) {
						test_steps.add("Room Charge Line Item  is present : " + "Guest Folio For " + abbrivation[1]
								+ " : " + rooomno[1].trim() + " with amount : " + get_RoomCharge(driver, test_steps));
						reslogger.info("Room Charge Line Item  is present : " + "Guest Folio For " + abbrivation[1]
								+ " : " + rooomno[1].trim() + " with amount : " + get_RoomCharge(driver, test_steps));
					} else {
						test_steps.add("Room Charge Line Item  is not present : " + "Guest Folio For " + abbrivation[1]
								+ " : " + rooomno[1].trim() + " with amount : " + get_RoomCharge(driver, test_steps));
						reslogger.info("Room Charge Line Item  is not present : " + "Guest Folio For " + abbrivation[1]
								+ " : " + rooomno[1].trim() + " with amount : " + get_RoomCharge(driver, test_steps));
					}
				} else {
					test_steps.add("Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : "
							+ rooomno[1].trim());
					reslogger.info("Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : "
							+ rooomno[1].trim());
				}
			}
		}
	}

	public void verify_MRB_BannerDetails(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String PhoneNumber, String Email, String TripTotal,
			String Balance, String ConfirmationNumber, String Status, String CheckInDate, String CheckOutDate,
			String Country) {
		test_steps.add("******************* Banner fields verification **********************");
		reslogger.info("******************* Banner fields verification **********************");

		String[] salutation = Salutation.split("\\|");
		String[] guestFName = GuestFirstName.split("\\|");
		String[] guestLName = GuestLastName.split("\\|");
		String[] ph = PhoneNumber.split("\\|");
		String[] email = Email.split("\\|");
		String[] checkInDate = CheckInDate.split("\\|");
		String[] checkOutDate = CheckOutDate.split("\\|");

		String name = salutation[0].trim() + " " + guestFName[0].trim() + " " + guestLName[0].trim();
		String bannername = "//td/div/span[contains(text(),'" + name + "')]";
		reslogger.info(bannername);
		if (driver.findElement(By.xpath(bannername)).isDisplayed()) {
			test_steps.add("Reservation banner name field verified : " + name);
			reslogger.info("Reservation banner name field verified : " + name);
		} else {
			test_steps.add("Reservation banner name field not found : " + name);
			reslogger.info("Reservation banner name field not found : " + name);
		}

		ph[0] = ph[0].replace("" + ph[0].trim().charAt(0), "(" + ph[0].trim().charAt(0));
		ph[0] = ph[0].replace("" + ph[0].trim().charAt(4), ")" + ph[0].trim().charAt(4));
		ph[0] = ph[0].replace("" + ph[0].trim().charAt(5), " " + ph[0].trim().charAt(5));
		ph[0] = ph[0].replace("" + ph[0].trim().charAt(9), "-" + ph[0].trim().charAt(9));

		String code = null;
		if (Country.equalsIgnoreCase("United States")) {
			code = "1";
		} else if (Country.equalsIgnoreCase("United Kingdom")) {
			code = "41";
		}
		code = code + "-";
		ph[0] = code + ph[0];
		reslogger.info(ph[0]);

		String phone = "//td//span[text()='" + ph[0] + "']";
		if (driver.findElement(By.xpath(phone)).isDisplayed()) {
			test_steps.add("Reservation banner PhoneNumber field verified : " + ph[0]);
			reslogger.info("Reservation banner PhoneNumber field verified : " + ph[0]);
		} else {
			test_steps.add("Reservation banner PhoneNumber field not found : " + PhoneNumber);
			reslogger.info("Reservation banner PhoneNumber field not found : " + PhoneNumber);
		}

		String trip = "//td[text()='TRIP TOTAL']/following-sibling::td[contains(text(),'" + TripTotal.trim() + "')]";
		if (driver.findElement(By.xpath(trip)).isDisplayed()) {
			test_steps.add("Reservation banner TripTotal field verified : " + TripTotal);
			reslogger.info("Reservation banner TripTotal field verified : " + TripTotal);
		} else {
			test_steps.add("Reservation banner TripTotal field not found : " + TripTotal);
			reslogger.info("Reservation banner TripTotal field not found : " + TripTotal);
		}

		String bal = "//td[text()='BALANCE']/following-sibling::td/div[contains(text(),'" + Balance.trim() + "')]";
		if (driver.findElement(By.xpath(trip)).isDisplayed()) {
			test_steps.add("Reservation banner Balance field verified : " + Balance);
			reslogger.info("Reservation banner Balance field verified : " + Balance);
		} else {
			test_steps.add("Reservation banner Balance field not found : " + Balance);
			reslogger.info("Reservation banner Balance field not found : " + Balance);
		}

		/*
		 * String mail = "//td//a[text()='" + email[0] + "']"; if
		 * (driver.findElement(By.xpath(mail)).isDisplayed()) {
		 * test_steps.add("Reservation banner mail field verified : " +
		 * email[0]); reslogger.info("Reservation banner mail field verified : "
		 * + email[0]); } else {
		 * test_steps.add("Reservation banner mail field not found : " +
		 * email[0]);
		 * reslogger.info("Reservation banner mail field not found : " +
		 * email[0]); }
		 */

		String sta = "//td//span[text()='" + Status.trim() + "']";
		if (driver.findElement(By.xpath(sta)).isDisplayed()) {
			test_steps.add("Reservation banner Status field verified : " + Status);
			reslogger.info("Reservation banner Status field verified : " + Status);
		} else {
			test_steps.add("Reservation banner Status field not found : " + Status);
			reslogger.info("Reservation banner Status field not found : " + Status);
		}

		String confirmation = "//td//span[text()='" + ConfirmationNumber.trim() + "']";
		if (driver.findElement(By.xpath(confirmation)).isDisplayed()) {
			test_steps.add("Reservation banner ConfirmationNumber field verified : " + ConfirmationNumber);
			reslogger.info("Reservation banner ConfirmationNumber field verified : " + ConfirmationNumber);
		} else {
			test_steps.add("Reservation banner ConfirmationNumber field not found : " + ConfirmationNumber);
			reslogger.info("Reservation banner ConfirmationNumber field not found : " + ConfirmationNumber);
		}

		String[] checkIn = checkInDate[0].split("/");

		if (checkIn[0].charAt(0) == '0') {
			checkIn[0] = checkIn[0].replace("" + checkIn[0].charAt(0), "");
		}

		String checkInMonthDay = Utility.get_Month(checkInDate[0]);
		checkInMonthDay = checkInMonthDay + " " + checkIn[0];
		checkInMonthDay = "(" + checkInMonthDay;

		String[] checkOut = checkOutDate[(checkOutDate.length - 1)].split("/");

		if (checkOut[0].charAt(0) == '0') {
			checkOut[0] = checkOut[0].replace("" + checkOut[0].charAt(0), "");
		}

		String checkOutMonthDay = Utility.get_Month(checkOutDate[checkOutDate.length - 1]);
		checkOutMonthDay = checkOutMonthDay + " " + checkOut[0];
		checkOutMonthDay = checkOutMonthDay + ")";
		String day = checkInMonthDay + " - " + checkOutMonthDay;

		reslogger.info(day);
		String days = "//td//span[contains(text(),'" + day.trim() + "')]";
		if (driver.findElement(By.xpath(days)).isDisplayed()) {
			test_steps.add("Reservation banner Stay from and Stay to are verified : " + day);
			reslogger.info("Reservation banner Stay from and Stay to are verified : " + day);
		} else {
			test_steps.add("Reservation banner Stay from and Stay to are not found : " + day);
			reslogger.info("Reservation banner Stay from and Stay to are not found : " + day);
		}
	}

	public void click_Pay(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_Pay);
		res.CP_Reservation_Folio_Pay.click();
		test_steps.add("Clicking on Pay");
		reslogger.info("Clicking on Pay");
		String loading = "(//div[@class='ir-loader-in'])";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
		reslogger.info("loading done");
	}

	public String takePayment(WebDriver driver, ArrayList test_steps, String PaymentType, String CardNumber,
			String NameOnCard, String CardExpDate, String TakePaymentType, String IsChangeInPayAmount,
			String ChangedAmountValue, String IsSetAsMainPaymentMethod, String AddPaymentNotes)
			throws InterruptedException {
		test_steps.add("******************* Making payment **********************");
		reslogger.info("******************* Making payment **********************");
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_Amount);
		String amount = res.CP_Reservation_Folio_TakePayment_Amount.getText().trim();
		reslogger.info("amount : " + amount);
		test_steps.add("Amount before Pay : " + amount);
		reslogger.info("Amount before Pay : " + amount);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_PaymentButton);
		res.CP_Reservation_Folio_TakePayment_PaymentButton.click();

		String CCNumber = "//h4[text()='Take Payment']/../..//label[text()='CARD NUMBER']/following-sibling::div/input";
		String name = "//h4[text()='Take Payment']/../..//label[text()='NAME ON CARD']/following-sibling::div/input";
		String exp = "//h4[text()='Take Payment']/../..//label[contains(text(),'EXPIRY')]/following-sibling::div/input";
		if (PaymentType.equalsIgnoreCase("Swipe")) {
			String CCCard = "(//h4[text()='Take Payment']/../..//label[text()='CARD NUMBER']/following-sibling::div/input)[2]";
			String swipe = "//h4[text()='Take Payment']/../..//button[text()='SWIPE']";
			Wait.WaitForElement(driver, swipe);
			driver.findElement(By.xpath(swipe)).click();
			test_steps.add("Clicking on Swipe");
			reslogger.info("Clicking on Swipe");
			Wait.WaitForElement(driver, CCCard);
			driver.findElement(By.xpath(CCCard)).sendKeys(CardNumber);
			test_steps.add("Enter Card Number : " + CardNumber);
			reslogger.info("Enter Card Number : " + CardNumber);
		} else {
			String payment = "//h4[text()='Take Payment']/../..//label[text()='PAYMENT METHOD']/..//div/div//span[text()='"
					+ PaymentType.trim() + "']";
			Wait.WaitForElement(driver, payment);
			driver.findElement(By.xpath(payment)).click();
			test_steps.add("Select Payment Type as : " + PaymentType);
			reslogger.info("Select Payment Type as : " + PaymentType);
			if (PaymentType.equalsIgnoreCase("MC") || PaymentType.equalsIgnoreCase("Visa")
					|| PaymentType.equalsIgnoreCase("Amex") || PaymentType.equalsIgnoreCase("Discover")) {

				Wait.WaitForElement(driver, CCNumber);
				JavascriptExecutor js = (JavascriptExecutor) driver;
				String CC = (String) js.executeScript("return arguments[0].value",
						driver.findElement(By.xpath(CCNumber)));
				reslogger.info(CC);
				if (CC.isEmpty() || CC.equalsIgnoreCase("")) {
					Wait.WaitForElement(driver, CCNumber);
					driver.findElement(By.xpath(CCNumber)).sendKeys(CardNumber);
					test_steps.add("Enter Card Number : " + CardNumber);
					reslogger.info("Enter Card Number : " + CardNumber);
					Wait.WaitForElement(driver, name);
					driver.findElement(By.xpath(name)).sendKeys(NameOnCard);
					test_steps.add("Enter Card Name : " + NameOnCard);
					reslogger.info("Enter Card Name : " + NameOnCard);
					Wait.WaitForElement(driver, exp);
					driver.findElement(By.xpath(exp)).sendKeys(CardExpDate);
					test_steps.add("Enter Card Exp Date : " + CardExpDate);
					reslogger.info("Enter Card Exp Date : " + CardExpDate);
				}
			}
		}
		if (IsChangeInPayAmount.equalsIgnoreCase("Yes")) {
			test_steps.add("Change the pay amount value : Yes");
			reslogger.info("Change the pay amount value : Yes");
			res.CP_Reservation_Folio_TakePayment_Amount.clear();
			res.CP_Reservation_Folio_TakePayment_Amount.sendKeys(Keys.chord(Keys.CONTROL, "a"));
			res.CP_Reservation_Folio_TakePayment_Amount.sendKeys(ChangedAmountValue);
			test_steps.add("Enter the Change Amount Value : " + ChangedAmountValue);
			reslogger.info("Enter the Change Amount Value : " + ChangedAmountValue);
			amount = ChangedAmountValue;
		} else {
			test_steps.add("paying the amount : " + amount);
			reslogger.info("paying the amount : " + amount);
		}

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_TypeButton);
		res.CP_Reservation_Folio_TakePayment_TypeButton.click();

		String type = "//h4[text()='Take Payment']/../..//label[text()='TYPE']/..//div/div//span[text()='"
				+ TakePaymentType.trim() + "']";
		Wait.WaitForElement(driver, type);
		driver.findElement(By.xpath(type)).click();
		test_steps.add("Select Take Payment Type : " + TakePaymentType);
		reslogger.info("Select Take Payment Type : " + TakePaymentType);

		String setAsMainPaymentMethod = "//span[text()='Set As Main Payment Method']/../input";
		if (IsSetAsMainPaymentMethod.equalsIgnoreCase("Yes")) {
			if (!driver.findElement(By.xpath(setAsMainPaymentMethod)).isSelected()) {
				Wait.WaitForElement(driver, setAsMainPaymentMethod);
				driver.findElement(By.xpath("//span[text()='Set As Main Payment Method']")).click();
				test_steps.add("Select set As Main Payment Method");
				reslogger.info("Select set As Main Payment Method");
			} else {
				test_steps.add("Already Selected set As Main Payment Method");
				reslogger.info("Already Selected set As Main Payment Method");
			}
		}

		String addPaymentNotes = "//button[text()='ADD NOTES']";
		String notes = "//input[@placeholder='Add Notes']";

		if (!(AddPaymentNotes.isEmpty() || AddPaymentNotes.equalsIgnoreCase(""))) {
			Wait.WaitForElement(driver, addPaymentNotes);
			driver.findElement(By.xpath(addPaymentNotes)).click();
			test_steps.add("Clicking on Add Payment Notes");
			reslogger.info("Clicking on Add Payment Notes");
			Wait.WaitForElement(driver, notes);
			driver.findElement(By.xpath(notes)).sendKeys(AddPaymentNotes);
			test_steps.add("Adding payment notes : " + AddPaymentNotes);
			reslogger.info("Adding payment notes : " + AddPaymentNotes);
		}

		String button = "//h4[text()='Take Payment']/../..//button[contains(text(),'" + amount.trim() + "')]";
		Wait.WaitForElement(driver, button);
		driver.findElement(By.xpath(button)).click();
		test_steps.add("Click on Pay");
		reslogger.info("Click on Pay");

		String takePayType = "//h4[contains(text(),'Successful')]/../..//label[text()='TYPE']/following-sibling::span";
		Wait.WaitForElement(driver, takePayType);
		String paytype = driver.findElement(By.xpath(takePayType)).getText().trim();
		assertEquals(paytype, TakePaymentType.trim());
		test_steps.add("Take Payment Type validated after payment : " + TakePaymentType);
		reslogger.info("Take Payment Type validated after payment : " + TakePaymentType);

		String paymentType = "//h4[contains(text(),'Successful')]/../..//label[text()='PAYMENT METHOD']/following-sibling::label/span[contains(text(),'"
				+ PaymentType.trim() + "')]";

		if (PaymentType.equalsIgnoreCase("Swipe")) {
			paymentType = "//h4[contains(text(),'Successful')]/../..//label[text()='PAYMENT METHOD']/following-sibling::label/span[contains(text(),'MC')]";
		}
		Wait.WaitForElement(driver, paymentType);
		if (driver.findElement(By.xpath(paymentType)).isDisplayed()) {
			test_steps.add("Payment Type validated after payment : " + PaymentType);
			reslogger.info("Payment Type validated after payment : " + PaymentType);
		} else {
			test_steps.add("Payment Type not displayed after payment : " + PaymentType);
			reslogger.info("Payment Type not displayed after payment : " + PaymentType);
		}

		String status = "//h4[contains(text(),'Successful')]/../..//label[text()='Approved']";
		Wait.WaitForElement(driver, status);
		if (driver.findElement(By.xpath(status)).isDisplayed()) {
			test_steps.add("Transaction status is : Approved");
			reslogger.info("Transaction status is : Approved");
		} else {
			test_steps.add("Transaction status is not : Approved");
			reslogger.info("Transaction status is not : Approved");
		}

		String payNotes = "//h4[contains(text(),'Successful')]/../..//span[text()='" + AddPaymentNotes + "']";
		if (!(AddPaymentNotes.isEmpty() || AddPaymentNotes.equalsIgnoreCase(""))) {
			if (driver.findElement(By.xpath(payNotes)).isDisplayed()) {
				test_steps.add("Paymant notes displayed " + AddPaymentNotes);
				reslogger.info("Paymant notes displayed " + AddPaymentNotes);
			} else {
				test_steps.add("Paymant notes not displayed " + AddPaymentNotes);
				reslogger.info("Paymant notes not displayed " + AddPaymentNotes);
			}
		}

		String close = "//h4[contains(text(),'Successful')]/../..//button[text()='Close']";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		test_steps.add("Click on Close");
		reslogger.info("Click on Close");

		String saveFolio = "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save");
		reslogger.info("Click on Save");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
		return amount;
	}

	public void verify_PaymentLineItem(WebDriver driver, ArrayList test_steps, String PaymentType, String CardNumber,
			String NameOnCard, String CardExpDate, String amount, String AddPaymentNotes) throws InterruptedException {
		test_steps.add("******************* Verify payment line item **********************");
		reslogger.info("******************* Verify payment line item **********************");

		if (PaymentType.equalsIgnoreCase("MC") || PaymentType.equalsIgnoreCase("Visa")
				|| PaymentType.equalsIgnoreCase("Amex") || PaymentType.equalsIgnoreCase("Discover")) {
			String lastFourDightsOfCard = CardNumber.substring(CardNumber.length() - 4, CardNumber.length());

			String description = "//a[contains(text(),'Name: " + NameOnCard.trim()
					+ "')]/../following-sibling::td[3]/span[contains(text(),'" + amount.trim() + "')]";
			reslogger.info(description);
			if (driver.findElement(By.xpath(description)).isDisplayed()) {
				test_steps.add("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
				reslogger.info("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
			} else {
				test_steps.add(
						"Payment line item with " + amount + " is not displayed for payment type : " + PaymentType);
				reslogger.info(
						"Payment line item with " + amount + " is not displayed for payment type : " + PaymentType);
			}

			String line = "//a[contains(text(),'Name: " + NameOnCard.trim()
					+ "')]/../following-sibling::td[3]/span[contains(text(),'" + amount.trim()
					+ "')]/../preceding-sibling::td[3]/a";
			Wait.WaitForElement(driver, line);
			driver.findElement(By.xpath(line)).click();
			test_steps.add("Opening Payment line item");
			reslogger.info("Opening Payment line item");

			String payemntType = "//label[text()='Payment Method:']/following-sibling::div/select";

			WebElement pay = new Select(driver.findElement(By.xpath(payemntType))).getFirstSelectedOption();
			reslogger.info(pay.getText());
			if (pay.getText().trim().equalsIgnoreCase(PaymentType)) {
				test_steps.add("Payment Method verified in line item : " + pay.getText());
				reslogger.info("Payment Method verified in line item : " + pay.getText());
			} else {
				test_steps.add("Payment Method not verified in line item : " + pay.getText());
				reslogger.info("Payment Method not verified in line item : " + pay.getText());
			}

			String amt = "//label[text()='Amount:']/following-sibling::div//input";

			JavascriptExecutor js = (JavascriptExecutor) driver;
			String amtValue = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(amt)));
			reslogger.info(amtValue);
			if (amtValue.equalsIgnoreCase(amount)) {
				test_steps.add("Payment amount verified in line item : " + amount);
				reslogger.info("Payment amount verified in line item : " + amount);
			} else {
				test_steps.add("Payment amount not verified in line item : " + amount);
				reslogger.info("Payment amount not verified in line item : " + amount);
			}

			String payInfo = "//label[text()='Payment Info:']/following-sibling::div//textarea";
			String info = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(payInfo)));
			reslogger.info(info);
			if (info.contains(lastFourDightsOfCard) && info.contains(CardExpDate)) {
				test_steps.add("Payment info verified in line item : " + info);
				reslogger.info("Payment info verified in line item : " + info);
			} else {
				test_steps.add("Payment info not verified in line item : " + info);
				reslogger.info("Payment info not verified in line item : " + info);
			}

			String notes = "//label[text()='Notes:']/following-sibling::div//textarea";

			String note = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(notes)));
			reslogger.info(note);
			if (note.equalsIgnoreCase(AddPaymentNotes)) {
				test_steps.add("Payment notes verified in line item : " + note);
				reslogger.info("Payment notes verified in line item : " + note);
			} else {
				test_steps.add("Payment notes not verified in line item : " + note);
				reslogger.info("Payment notes not verified in line item : " + note);
			}

			String close = "//span[text()='Payment Details']/../../.././../../../..//button[text()='Cancel']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Closeing Payment line item");
			reslogger.info("Closeing Payment line item");
			Wait.wait5Second();

		} else if (PaymentType.equalsIgnoreCase("Cash")) {
			String description = "//a[contains(text(),'" + PaymentType.trim()
					+ "')]/../following-sibling::td[3]/span[contains(text(),'" + amount.trim() + "')]";
			reslogger.info(description);
			if (driver.findElement(By.xpath(description)).isDisplayed()) {
				test_steps.add("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
				reslogger.info("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
			} else {
				test_steps.add(
						"Payment line item with " + amount + " is nor displayed for payment type : " + PaymentType);
				reslogger.info(
						"Payment line item with " + amount + " is nor displayed for payment type : " + PaymentType);
			}

			String line = "//a[contains(text(),'" + PaymentType.trim()
					+ "')]/../following-sibling::td[3]/span[contains(text(),'" + amount.trim()
					+ "')]/../preceding-sibling::td[3]/a";
			Wait.WaitForElement(driver, line);
			driver.findElement(By.xpath(line)).click();
			test_steps.add("Opening Payment line item");
			reslogger.info("Opening Payment line item");

			String payemntType = "//label[text()='Payment Method:']/following-sibling::div/select";

			WebElement pay = new Select(driver.findElement(By.xpath(payemntType))).getFirstSelectedOption();
			reslogger.info(pay.getText());
			if (pay.getText().trim().equalsIgnoreCase("Cash")) {
				test_steps.add("Payment Method verified in line item : " + pay.getText());
				reslogger.info("Payment Method verified in line item : " + pay.getText());
			} else {
				test_steps.add("Payment Method not verified in line item : " + pay.getText());
				reslogger.info("Payment Method not verified in line item : " + pay.getText());
			}

			String amt = "//label[text()='Amount:']/following-sibling::div//input";

			JavascriptExecutor js = (JavascriptExecutor) driver;
			String amtValue = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(amt)));
			reslogger.info(amtValue);
			if (amtValue.equalsIgnoreCase(amount)) {
				test_steps.add("Payment amount verified in line item : " + amount);
				reslogger.info("Payment amount verified in line item : " + amount);
			} else {
				test_steps.add("Payment amount not verified in line item : " + amount);
				reslogger.info("Payment amount not verified in line item : " + amount);
			}

			String payInfo = "//label[text()='Payment Info:']/following-sibling::div//textarea";
			String info = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(payInfo)));
			reslogger.info(info);
			if (info.contains("Cash")) {
				test_steps.add("Payment info verified in line item : " + info);
				reslogger.info("Payment info verified in line item : " + info);
			} else {
				test_steps.add("Payment info not verified in line item : " + info);
				reslogger.info("Payment info not verified in line item : " + info);
			}

			String notes = "//label[text()='Notes:']/following-sibling::div//textarea";

			String note = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(notes)));
			reslogger.info(note);
			if (note.equalsIgnoreCase(AddPaymentNotes)) {
				test_steps.add("Payment notes verified in line item : " + note);
				reslogger.info("Payment notes verified in line item : " + note);
			} else {
				test_steps.add("Payment notes not verified in line item : " + note);
				reslogger.info("Payment notes not verified in line item : " + note);
			}

			String close = "//span[text()='Payment Details']/../../.././../../../..//button[text()='Close']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Closeing Payment line item");
			reslogger.info("Closeing Payment line item");
		} else if (PaymentType.equalsIgnoreCase("Swipe")) {
			String description = "//a[contains(text(),'Name: ')]/../following-sibling::td[3]/span[contains(text(),'"
					+ amount.trim() + "')]";
			if (driver.findElement(By.xpath(description)).isDisplayed()) {
				test_steps.add("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
				reslogger.info("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
			} else {
				test_steps.add(
						"Payment line item with " + amount + " is nor displayed for payment type : " + PaymentType);
				reslogger.info(
						"Payment line item with " + amount + " is nor displayed for payment type : " + PaymentType);
			}

			String line = "//a[contains(text(),'Name: ')]/../following-sibling::td[3]/span[contains(text(),'"
					+ amount.trim() + "')]/../preceding-sibling::td[3]/a";
			Wait.WaitForElement(driver, line);
			driver.findElement(By.xpath(line)).click();
			test_steps.add("Opening Payment line item");
			reslogger.info("Opening Payment line item");

			String payemntType = "//label[text()='Payment Method:']/following-sibling::div/select";

			WebElement pay = new Select(driver.findElement(By.xpath(payemntType))).getFirstSelectedOption();
			reslogger.info(pay.getText());
			if (pay.getText().trim().equalsIgnoreCase("MC")) {
				test_steps.add("Payment Method verified in line item : " + pay.getText());
				reslogger.info("Payment Method verified in line item : " + pay.getText());
			} else {
				test_steps.add("Payment Method not verified in line item : " + pay.getText());
				reslogger.info("Payment Method not verified in line item : " + pay.getText());
			}

			String amt = "//label[text()='Amount:']/following-sibling::div//input";

			JavascriptExecutor js = (JavascriptExecutor) driver;
			String amtValue = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(amt)));
			reslogger.info(amtValue);
			if (amtValue.equalsIgnoreCase(amount)) {
				test_steps.add("Payment amount verified in line item : " + amount);
				reslogger.info("Payment amount verified in line item : " + amount);
			} else {
				test_steps.add("Payment amount not verified in line item : " + amount);
				reslogger.info("Payment amount not verified in line item : " + amount);
			}

			String payInfo = "//label[text()='Payment Info:']/following-sibling::div//textarea";
			String info = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(payInfo)));
			reslogger.info(info);
			if (info.contains("5454")) {
				test_steps.add("Payment info verified in line item : " + info);
				reslogger.info("Payment info verified in line item : " + info);
			} else {
				test_steps.add("Payment info not verified in line item : " + info);
				reslogger.info("Payment info not verified in line item : " + info);
			}

			String notes = "//label[text()='Notes:']/following-sibling::div//textarea";

			String note = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(notes)));
			reslogger.info(note);
			if (note.equalsIgnoreCase(AddPaymentNotes)) {
				test_steps.add("Payment notes verified in line item : " + note);
				reslogger.info("Payment notes verified in line item : " + note);
			} else {
				test_steps.add("Payment notes not verified in line item : " + note);
				reslogger.info("Payment notes not verified in line item : " + note);
			}

			String close = "//span[text()='Payment Details']/../../.././../../../..//button[text()='Cancel']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Closeing Payment line item");
			reslogger.info("Closeing Payment line item");
		}
		Wait.wait2Second();
	}

	public void verify_DepositPaymentLineItem(WebDriver driver, ArrayList test_steps, String PaymentType,
			String CardNumber, String NameOnCard, String CardExpDate, String amount, String AddPaymentNotes)
			throws InterruptedException {
		test_steps.add("******************* Verify payment line item **********************");
		reslogger.info("******************* Verify payment line item **********************");

		if (PaymentType.equalsIgnoreCase("MC") || PaymentType.equalsIgnoreCase("Visa")
				|| PaymentType.equalsIgnoreCase("Amex") || PaymentType.equalsIgnoreCase("Discover")) {
			String lastFourDightsOfCard = CardNumber.substring(CardNumber.length() - 4, CardNumber.length());

			String description = "//a[contains(text(),'Name: " + NameOnCard.trim()
					+ "')]/../following-sibling::td[3]/span[contains(text(),'" + amount.trim() + "')]";
			reslogger.info(description);
			if (driver.findElement(By.xpath(description)).isDisplayed()) {
				test_steps.add("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
				reslogger.info("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
			} else {
				test_steps.add(
						"Payment line item with " + amount + " is not displayed for payment type : " + PaymentType);
				reslogger.info(
						"Payment line item with " + amount + " is not displayed for payment type : " + PaymentType);
			}

			String line = "//a[contains(text(),'Name: " + NameOnCard.trim()
					+ "')]/../following-sibling::td[3]/span[contains(text(),'" + amount.trim()
					+ "')]/../preceding-sibling::td[3]/a";
			Wait.WaitForElement(driver, line);
			driver.findElement(By.xpath(line)).click();
			test_steps.add("Opening Payment line item");
			reslogger.info("Opening Payment line item");

			String payemntType = "//label[text()='Payment Method:']/following-sibling::div/select";

			WebElement pay = new Select(driver.findElement(By.xpath(payemntType))).getFirstSelectedOption();
			reslogger.info(pay.getText());
			if (pay.getText().trim().equalsIgnoreCase(PaymentType)) {
				test_steps.add("Payment Method verified in line item : " + pay.getText());
				reslogger.info("Payment Method verified in line item : " + pay.getText());
			} else {
				test_steps.add("Payment Method not verified in line item : " + pay.getText());
				reslogger.info("Payment Method not verified in line item : " + pay.getText());
			}

			String amt = "//label[text()='Amount:']/following-sibling::div//input";

			JavascriptExecutor js = (JavascriptExecutor) driver;
			String amtValue = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(amt)));
			reslogger.info(amtValue);
			if (amtValue.equalsIgnoreCase(amount)) {
				test_steps.add("Payment amount verified in line item : " + amount);
				reslogger.info("Payment amount verified in line item : " + amount);
			} else {
				test_steps.add("Payment amount not verified in line item : " + amount);
				reslogger.info("Payment amount not verified in line item : " + amount);
			}

			String payInfo = "//label[text()='Payment Info:']/following-sibling::div//textarea";
			String info = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(payInfo)));
			reslogger.info(info);
			if (info.contains(lastFourDightsOfCard) && info.contains(CardExpDate)) {
				test_steps.add("Payment info verified in line item : " + info);
				reslogger.info("Payment info verified in line item : " + info);
			} else {
				test_steps.add("Payment info not verified in line item : " + info);
				reslogger.info("Payment info not verified in line item : " + info);
			}

			String notes = "//label[text()='Notes:']/following-sibling::div//textarea";

			String note = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(notes)));
			reslogger.info(note);
			if (note.equalsIgnoreCase(AddPaymentNotes)) {
				test_steps.add("Payment notes verified in line item : " + note);
				reslogger.info("Payment notes verified in line item : " + note);
			} else {
				test_steps.add("Payment notes not verified in line item : " + note);
				reslogger.info("Payment notes not verified in line item : " + note);
			}

			String close = "//span[text()='Payment Details']/../../.././../../../..//button[text()='Cancel']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Closeing Payment line item");
			reslogger.info("Closeing Payment line item");
			Wait.wait5Second();

		} else if (PaymentType.equalsIgnoreCase("Cash")) {
			String description = "//a[contains(text(),'" + PaymentType.trim()
					+ "')]/../following-sibling::td[3]/span[contains(text(),'" + amount.trim() + "')]";
			reslogger.info(description);
			if (driver.findElement(By.xpath(description)).isDisplayed()) {
				test_steps.add("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
				reslogger.info("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
			} else {
				test_steps.add(
						"Payment line item with " + amount + " is nor displayed for payment type : " + PaymentType);
				reslogger.info(
						"Payment line item with " + amount + " is nor displayed for payment type : " + PaymentType);
			}

			String line = "//a[contains(text(),'" + PaymentType.trim()
					+ "')]/../following-sibling::td[3]/span[contains(text(),'" + amount.trim()
					+ "')]/../preceding-sibling::td[3]/a";
			Wait.WaitForElement(driver, line);
			driver.findElement(By.xpath(line)).click();
			test_steps.add("Opening Payment line item");
			reslogger.info("Opening Payment line item");

			String payemntType = "//label[text()='Payment Method:']/following-sibling::div/select";

			WebElement pay = new Select(driver.findElement(By.xpath(payemntType))).getFirstSelectedOption();
			reslogger.info(pay.getText());
			if (pay.getText().trim().equalsIgnoreCase("Cash")) {
				test_steps.add("Payment Method verified in line item : " + pay.getText());
				reslogger.info("Payment Method verified in line item : " + pay.getText());
			} else {
				test_steps.add("Payment Method not verified in line item : " + pay.getText());
				reslogger.info("Payment Method not verified in line item : " + pay.getText());
			}

			String amt = "//label[text()='Amount:']/following-sibling::div//input";

			JavascriptExecutor js = (JavascriptExecutor) driver;
			String amtValue = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(amt)));
			reslogger.info(amtValue);
			if (amtValue.equalsIgnoreCase(amount)) {
				test_steps.add("Payment amount verified in line item : " + amount);
				reslogger.info("Payment amount verified in line item : " + amount);
			} else {
				test_steps.add("Payment amount not verified in line item : " + amount);
				reslogger.info("Payment amount not verified in line item : " + amount);
			}

			String payInfo = "//label[text()='Payment Info:']/following-sibling::div//textarea";
			String info = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(payInfo)));
			reslogger.info(info);
			if (info.contains("Cash")) {
				test_steps.add("Payment info verified in line item : " + info);
				reslogger.info("Payment info verified in line item : " + info);
			} else {
				test_steps.add("Payment info not verified in line item : " + info);
				reslogger.info("Payment info not verified in line item : " + info);
			}

			String notes = "//label[text()='Notes:']/following-sibling::div//textarea";

			String note = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(notes)));
			reslogger.info(note);
			if (note.equalsIgnoreCase(AddPaymentNotes)) {
				test_steps.add("Payment notes verified in line item : " + note);
				reslogger.info("Payment notes verified in line item : " + note);
			} else {
				test_steps.add("Payment notes not verified in line item : " + note);
				reslogger.info("Payment notes not verified in line item : " + note);
			}

			String close = "//span[text()='Payment Details']/../../.././../../../..//button[text()='Close']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Closeing Payment line item");
			reslogger.info("Closeing Payment line item");
		} else if (PaymentType.equalsIgnoreCase("Swipe")) {
			String description = "//a[contains(text(),'Name: ')]/../following-sibling::td[3]/span[contains(text(),'"
					+ amount.trim() + "')]";
			if (driver.findElement(By.xpath(description)).isDisplayed()) {
				test_steps.add("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
				reslogger.info("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
			} else {
				test_steps.add(
						"Payment line item with " + amount + " is nor displayed for payment type : " + PaymentType);
				reslogger.info(
						"Payment line item with " + amount + " is nor displayed for payment type : " + PaymentType);
			}

			String line = "//a[contains(text(),'Name: ')]/../following-sibling::td[3]/span[contains(text(),'"
					+ amount.trim() + "')]/../preceding-sibling::td[3]/a";
			Wait.WaitForElement(driver, line);
			driver.findElement(By.xpath(line)).click();
			test_steps.add("Opening Payment line item");
			reslogger.info("Opening Payment line item");

			String payemntType = "//label[text()='Payment Method:']/following-sibling::div/select";

			WebElement pay = new Select(driver.findElement(By.xpath(payemntType))).getFirstSelectedOption();
			reslogger.info(pay.getText());
			if (pay.getText().trim().equalsIgnoreCase("MC")) {
				test_steps.add("Payment Method verified in line item : " + pay.getText());
				reslogger.info("Payment Method verified in line item : " + pay.getText());
			} else {
				test_steps.add("Payment Method not verified in line item : " + pay.getText());
				reslogger.info("Payment Method not verified in line item : " + pay.getText());
			}

			String amt = "//label[text()='Amount:']/following-sibling::div//input";

			JavascriptExecutor js = (JavascriptExecutor) driver;
			String amtValue = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(amt)));
			reslogger.info(amtValue);
			if (amtValue.equalsIgnoreCase(amount)) {
				test_steps.add("Payment amount verified in line item : " + amount);
				reslogger.info("Payment amount verified in line item : " + amount);
			} else {
				test_steps.add("Payment amount not verified in line item : " + amount);
				reslogger.info("Payment amount not verified in line item : " + amount);
			}

			String payInfo = "//label[text()='Payment Info:']/following-sibling::div//textarea";
			String info = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(payInfo)));
			reslogger.info(info);
			if (info.contains("5454")) {
				test_steps.add("Payment info verified in line item : " + info);
				reslogger.info("Payment info verified in line item : " + info);
			} else {
				test_steps.add("Payment info not verified in line item : " + info);
				reslogger.info("Payment info not verified in line item : " + info);
			}

			String notes = "//label[text()='Notes:']/following-sibling::div//textarea";

			String note = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(notes)));
			reslogger.info(note);
			if (note.equalsIgnoreCase(AddPaymentNotes)) {
				test_steps.add("Payment notes verified in line item : " + note);
				reslogger.info("Payment notes verified in line item : " + note);
			} else {
				test_steps.add("Payment notes not verified in line item : " + note);
				reslogger.info("Payment notes not verified in line item : " + note);
			}

			String close = "//span[text()='Payment Details']/../../.././../../../..//button[text()='Close']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Closeing Payment line item");
			reslogger.info("Closeing Payment line item");
		}
		Wait.wait2Second();
	}

	public void validate_FolioAmountAfterPayment(WebDriver driver, ArrayList test_steps, String paidFolio,
			String balanceFolio, String paidFolioAfterPay, String balanceFolioAfterPay, String amount,
			String TakePaymentType) {
		test_steps.add("******************* Verify folio amount after payment **********************");
		reslogger.info("******************* Verify folio amount after payment **********************");

		Double paidBefore = Double.parseDouble(paidFolio);
		Double balBefore = Double.parseDouble(balanceFolio);
		Double paidAfter = Double.parseDouble(paidFolioAfterPay);
		Double balAfter = Double.parseDouble(balanceFolioAfterPay);
		Double amt = Double.parseDouble(amount);

		if (TakePaymentType.equalsIgnoreCase("Capture")) {

			if (Double.compare((paidBefore + amt), paidAfter) == 0) {
				test_steps.add("Folio Paid amount is updated with : " + amount);
				reslogger.info("Folio Paid amount is updated with : " + amount);
			} else {
				test_steps.add("Folio Paid amount is not updated with : " + amount);
				reslogger.info("Folio Paid amount is not updated with : " + amount);
			}

			if (Double.compare((balBefore - amt), balAfter) == 0) {
				test_steps.add("Folio Balance amount is updated with : " + amount);
				reslogger.info("Folio Balance amount is updated with : " + amount);
			} else {
				test_steps.add("Folio Balance amount is not updated with : " + amount);
				reslogger.info("Folio Balance amount is not updated with : " + amount);
			}

		} /*
			 * else if (GenerateGuestStatementStatus) {
			 * 
			 * }
			 */

	}

	public void click_Quote(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Quote);
		res.CP_NewReservation_Quote.click();
		test_steps.add("Click on Save Quote");
		reslogger.info("Click on Save Quote");
	}

	public void verify_QuoteStauts(WebDriver driver, ArrayList test_steps, String status) {
		if (status.equalsIgnoreCase("Quote")) {
			test_steps.add("Quote status is verified");
			reslogger.info("Quote status is verified");
		} else {
			test_steps.add("Quote status is not verified");
			reslogger.info("Quote status is not verified");
		}
	}

	public void verify_PaymentInHistoryTab(WebDriver driver, ArrayList test_steps, String amount, String PaymentType,
			String CardNumber, String CardExp, String timeZone) {
		test_steps.add("******************* Payment verification in History tab **********************");
		reslogger.info("******************* Payment verification in History tab **********************");
		String deposit = "//span[contains(text(),'payment') and contains(text(),'" + amount + "')]";

		String text = driver.findElement(By.xpath(deposit)).getText();
		reslogger.info(text);

		if (driver.findElement(By.xpath(deposit)).isDisplayed()) {
			test_steps.add("Payment verified in History Tab");
			reslogger.info("Payment verified in History Tab");
		} else {
			test_steps.add("Payment not found  in History Tab");
			reslogger.info("Payment not found  in History Tab");
		}

		String category = "//span[contains(text(),'payment ') and contains(text(),'" + amount
				+ "')]/../preceding-sibling::td/span[text()='Payment']";
		if (driver.findElement(By.xpath(category)).isDisplayed()) {
			test_steps.add("Payment category verified in History Tab");
			reslogger.info("Payment category verified in History Tab");
		} else {
			test_steps.add("Payment category not found  in History Tab");
			reslogger.info("Payment category not found  in History Tab");
		}

		Date date1 = new Date();
		DateFormat df = new SimpleDateFormat("MM/dd/yy");
		// Use Madrid's time zone to format the date in
		df.setTimeZone(TimeZone.getTimeZone(timeZone));

		reslogger.info(df.format(date1));
		String DateFormat = df.format(date1);

		/*
		 * DateFormat df = new SimpleDateFormat("dd/MM/yy"); Calendar calobj =
		 * <<<<<<< HEAD Calendar.getInstance();
		 * Utility.app_logs.info(df.format(calobj.getTime())); =======
		 * Calendar.getInstance(); reslogger.info(df.format(calobj.getTime()));
		 * >>>>>>> b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0 String
		 * DateFormat=df.format(calobj.getTime());
		 */

		String[] DFormat = DateFormat.split("/");
		String date = "//span[contains(text(),'payment ') and contains(text(),'" + amount
				+ "')]/../preceding-sibling::td/span[text()='" + DFormat[0] + "/" + DFormat[1] + "/" + DFormat[2]
				+ "']";
		if (driver.findElement(By.xpath(date)).isDisplayed()) {
			test_steps.add("Payment date verified in History Tab");
			reslogger.info("Payment date verified in History Tab");
		} else {
			test_steps.add("Payment date not found  in History Tab");
			reslogger.info("Payment date not found  in History Tab");
		}

		if (PaymentType.equalsIgnoreCase("MC") || PaymentType.equalsIgnoreCase("Visa")
				|| PaymentType.equalsIgnoreCase("Amex") || PaymentType.equalsIgnoreCase("Discover")) {
			String lastFourDightsOfCard = CardNumber.substring(CardNumber.length() - 4, CardNumber.length());
			if (text.contains(lastFourDightsOfCard) && text.contains(CardExp)) {
				test_steps.add("Verified Payment type " + PaymentType + " Last Four Digits " + lastFourDightsOfCard
						+ " and Exp Date of the card :" + CardExp + " in the payment description : " + text);
				reslogger.info("Verified Payment type " + PaymentType + " Last Four Digits " + lastFourDightsOfCard
						+ " and Exp Date of the card :" + CardExp + " in the payment description : " + text);
			} else {
				test_steps.add("Payment type " + PaymentType + " Last Four Digits " + lastFourDightsOfCard
						+ " and Exp Date of the card :" + CardExp + " in the payment description are not found : "
						+ text);
				reslogger.info("Payment type " + PaymentType + " Last Four Digits " + lastFourDightsOfCard
						+ " and Exp Date of the card :" + CardExp + " in the payment description are not found : "
						+ text);
			}
		} else if (PaymentType.equalsIgnoreCase("Swipe")) {
			String lastFourDightsOfCard = "5454";
			CardExp = "12/23";
			if (text.contains("MC") && text.contains("5454") && text.contains(CardExp)) {
				test_steps.add("Verified Payment type " + PaymentType + " Last Four Digits " + lastFourDightsOfCard
						+ " and Exp Date of the card :" + CardExp + " in the payment description : " + text);
				reslogger.info("Verified Payment type " + PaymentType + " Last Four Digits " + lastFourDightsOfCard
						+ " and Exp Date of the card :" + CardExp + " in the payment description : " + text);
			} else {
				test_steps.add("Payment type " + PaymentType + " Last Four Digits " + lastFourDightsOfCard
						+ " and Exp Date of the card :" + CardExp + " in the payment description are not found : "
						+ text);
				reslogger.info("Payment type " + PaymentType + " Last Four Digits " + lastFourDightsOfCard
						+ " and Exp Date of the card :" + CardExp + " in the payment description are not found : "
						+ text);
			}
		} else if (PaymentType.equalsIgnoreCase("Cash")) {
			if (text.contains("Cash")) {
				test_steps.add("Verified Payment type " + PaymentType + " in the payment description : " + text);
				reslogger.info("Verified Payment type " + PaymentType + " in the payment description : " + text);
			} else {
				test_steps.add("Payment type " + PaymentType + " in the payment description not found : " + text);
				reslogger.info("Payment type " + PaymentType + " in the payment description not found : " + text);
			}
		}
	}

	public ArrayList<String> click_DeatilsTab(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_DetailsTab);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_DetailsTab), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_DetailsTab), driver);
		res.CP_NewReservation_DetailsTab.click();
		test_steps.add("Click on Details Tab");
		reslogger.info("Click on Details Tab");
		return test_steps;
	}

	public void verify_MainPaymentMethod(WebDriver driver, ArrayList test_steps, String IsSetAsMainPaymentMethod,
			String PaymentType, String CardNumber, String CardExpDate, String NameOnCard) {

		test_steps.add("******************* Main Payment Method verification  **********************");
		reslogger.info("******************* Main Payment Method verification  **********************");
		if (IsSetAsMainPaymentMethod.equalsIgnoreCase("Yes")) {
			if (PaymentType.equalsIgnoreCase("Cash")) {
				String payment = "//span[text()='PAYMENT ']/../..//span[text()='Cash']";
				if (driver.findElement(By.xpath(payment)).isDisplayed()) {
					test_steps.add("Cash as Main Payment Method is validated");
					reslogger.info("Cash as Main Payment Method is validated");
				} else {
					test_steps.add("Cash as Main Payment Method is not validated");
					reslogger.info("Cash as Main Payment Method is not validated");
				}
			} else if (PaymentType.equalsIgnoreCase("Swipe")) {
				String payment = "//span[text()='PAYMENT ']/../..//span[text()='MC']";
				String cardnum = "//span[text()='PAYMENT ']/../..//span[contains(text(),'5454')]";
				String cardName = "//span[text()='PAYMENT ']/../..//span[contains(text(),'MC TEST CARD')]";
				String exp = "//span[text()='PAYMENT ']/../..//span[contains(text(),'12/23')]";

				if (driver.findElement(By.xpath(payment)).isDisplayed()
						&& driver.findElement(By.xpath(cardnum)).isDisplayed()
						&& driver.findElement(By.xpath(cardName)).isDisplayed()
						&& driver.findElement(By.xpath(exp)).isDisplayed()) {
					test_steps.add("Swipe card as Main Payment Method is validated");
					reslogger.info("Swipe card as Main Payment Method is validated");
				} else {
					test_steps.add("Swipe card as Main Payment Method is not validated");
					reslogger.info("Swipe card as Main Payment Method is not validated");
				}
			} else if (PaymentType.equalsIgnoreCase("MC") || PaymentType.equalsIgnoreCase("Visa")
					|| PaymentType.equalsIgnoreCase("Amex") || PaymentType.equalsIgnoreCase("Discover")) {
				String lastFourDightsOfCard = CardNumber.substring(CardNumber.length() - 4, CardNumber.length());
				String payment = "//span[text()='PAYMENT ']/../..//span[text()='" + PaymentType + "']";
				String cardnum = "//span[text()='PAYMENT ']/../..//span[contains(text(),'" + lastFourDightsOfCard
						+ "')]";
				String cardName = "//span[text()='PAYMENT ']/../..//span[contains(text(),'" + NameOnCard + "')]";
				String exp = "//span[text()='PAYMENT ']/../..//span[contains(text(),'" + CardExpDate + "')]";

				if (driver.findElement(By.xpath(payment)).isDisplayed()
						&& driver.findElement(By.xpath(cardnum)).isDisplayed()
						&& driver.findElement(By.xpath(cardName)).isDisplayed()
						&& driver.findElement(By.xpath(exp)).isDisplayed()) {
					test_steps.add(PaymentType + " as Main Payment Method is validated");
					reslogger.info(PaymentType + " as Main Payment Method is validated");
				} else {
					test_steps.add(PaymentType + " as Main Payment Method is not validated");
					reslogger.info(PaymentType + " as Main Payment Method is not validated");
				}
			}

		}

	}

	public void verify_UpdatedByUser(WebDriver driver, ArrayList test_steps, String LoggedInUser) {
		test_steps.add("******************* Updated By user verification  **********************");
		reslogger.info("******************* Updated By user verification  **********************");
		String user = "//div[contains(text(),'Updated By:')]/span";
		Wait.WaitForElement(driver, user);

		user = driver.findElement(By.xpath(user)).getText().trim();
		reslogger.info(LoggedInUser);
		reslogger.info(user);
		if (user.contains(LoggedInUser)) {
			test_steps.add("Updated by user validated : " + LoggedInUser);
			reslogger.info("Updated by user validated : " + LoggedInUser);
		} else {
			test_steps.add("Updated by user not validated : " + LoggedInUser);
			reslogger.info("Updated by user not validated : " + LoggedInUser);
		}
	}

	public void verify_UpdatedByUserTime(WebDriver driver, ArrayList test_steps, String timeZone) {
		test_steps.add("******************* Updated By date verification  **********************");
		reslogger.info("******************* Updated By date verification  **********************");
		String user = "//div[contains(text(),'Updated By:')]/span";
		Wait.WaitForElement(driver, user);

		user = driver.findElement(By.xpath(user)).getText().trim();
		// reslogger.info(LoggedInUser);
		reslogger.info(user);

		Date date = new Date();
		DateFormat df = new SimpleDateFormat("MM/dd/yy");

		// Use Madrid's time zone to format the date in
		df.setTimeZone(TimeZone.getTimeZone(timeZone));

		String d = df.format(date);

		if (user.contains(d)) {
			test_steps.add("Updated by date validated : " + d);
			reslogger.info("Updated by date validated : " + d);
		} else {
			test_steps.add("Updated by date not validated : " + d);
			reslogger.info("Updated by date not validated : " + d);
		}
	}

	public void close_FirstOpenedReservation(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		String close = "(//ul[@class='sec_nav']//li[5]//i)[2]";
		try {
			// Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(close)),
			// driver);
			// Wait.WaitForElement(driver, close);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(close)), driver);
			Utility.ScrollToElement(driver.findElement(By.xpath(close)), driver);
			driver.findElement(By.xpath(close)).click();
			try {
				Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(close)));
			}catch (Exception xe) {
				// TODO: handle exception
			}
			unsavedDataYesClick(driver, test_steps);
			test_steps.add("Closed the reservation");
			reslogger.info("Closed the reservation");

		} catch (Exception e) {
			// Wait.WaitForElement(driver, close);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(close)), driver);
			Utility.ScrollToElement(driver.findElement(By.xpath(close)), driver);
			Wait.wait2Second();
			driver.findElement(By.xpath(close)).click();
			unsavedDataYesClick(driver, test_steps);
			test_steps.add("Closed the reservation");
			reslogger.info("Closed the reservation");
		}
	}

	public void verify_MR_ToolTip(WebDriver driver, ArrayList test_steps, String reservation) {

		String pop = "//span[contains(text(),'" + reservation + "')]/following-sibling::span/span";
		Wait.WaitForElement(driver, pop);
		int count = driver.findElements(By.xpath(pop)).size();

		Actions act = new Actions(driver);

		String user = "(//span[contains(text(),'" + reservation + "')]/../preceding-sibling::td[2]//a)";

		String room = "(//span[contains(text(),'" + reservation + "')]/../following-sibling::td[5]/span)";

		for (int i = 1; i <= count; i++) {
			user = "(//span[contains(text(),'" + reservation + "')]/../preceding-sibling::td[2]//a)[" + i + "]";
			room = "(//span[contains(text(),'" + reservation + "')]/../following-sibling::td[5]/span)[" + i + "]";
			user = driver.findElement(By.xpath(user)).getText();
			room = driver.findElement(By.xpath(room)).getText();
			pop = "(//span[contains(text(),'" + reservation + "')]/following-sibling::span/span)[" + i + "]";
			act.moveToElement(driver.findElement(By.xpath(pop))).build().perform();
			String popup = "//span[contains(text(),'" + reservation
					+ "')]/following-sibling::span/span/..//div/div[text()='Multiple Rooms']";
			if (driver.findElement(By.xpath(pop)).isDisplayed()) {
				test_steps.add("MR symbol and Multiple Rooms tooltip are verified for the guest : " + user
						+ " and for the room : " + room);
				reslogger.info("MR symbol and Multiple Rooms tooltip are verified for the guest : " + user
						+ " and for the room : " + room);
			} else {
				test_steps.add("MR symbol and Multiple Rooms tooltip are not verified for the guest : " + user
						+ " and for the room : " + room);
				reslogger.info("MR symbol and Multiple Rooms tooltip are not verified for the guest : " + user
						+ " and for the room : " + room);
			}
		}
	}

	public String getPanelStatusGuestName(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String guestName = res.CP_Reservation_StatusPanel_GuestName.getText();
		return guestName;

	}

	public String getStayInfoSecondGuestName(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String guestName = res.CP_Reservation_StayInfo_SecondaryGuestName.getText();
		return guestName;

	}

	public String getPanelStatusStatusName(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_PanelNoShowStatus);
		String status = res.CP_Reservation_StatusPanel_Status.getText();
		reslogger.info("Status is: " + status);
		return status;

	}

	public void clickPolicyCollapseIcon(WebDriver driver, ArrayList<String> test_steps, String PolicyType,
			String percentage) throws InterruptedException

	{
		Elements_CPReservation res = new Elements_CPReservation(driver);
		if (PolicyType.equals("No Show")) {
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel, driver);
			boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("No Show Policy Alread Expanded");
				reslogger.info("No Show Policy Alread Expanded ");
			} else {
				res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyCollapse.click();
				test_steps.add("No Show Policy  Expanded");
				reslogger.info("No Show Policy  Expanded ");
			}
		} else if (PolicyType.equals("Check In")) {
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel, driver);
			boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("Check In Policy Alread Expanded");
				reslogger.info("Check In Policy Alread Expanded ");
			} else {
				res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyCollapse.click();
				test_steps.add("Check In Policy  Expanded");
				reslogger.info("Check In Policy  Expanded ");
			}
		} else if (PolicyType.equals("Cancel")) {
			String path = "//div[text()='Policies And Disclaimers']/..//span[contains(text(),'Cancellation "
					+ percentage + "%')]";
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CancellationPolicyLabel, driver);
			boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_CancellationPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("Cancellation Policy Alread Expanded");
				reslogger.info("Cancellation Policy Alread Expanded ");
			} else {
				WebElement element = driver.findElement(By.xpath(path));
				Utility.ScrollToElement(element, driver);
				element.click();
				test_steps.add("Cancellation Policy Expanded");
				reslogger.info("Cancellation Policy Expanded ");
			}

		}

	}

	public void verifyPOLICIESANDDISCLAIMERSNoShowPolicy(WebDriver driver, ArrayList<String> test_steps,
			String PolicyName, String PolicyType, String percentage) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		clickPolicyCollapseIcon(driver, test_steps, PolicyType, percentage);
		if (PolicyType.equals("No Show")) {
			// Verified No Show Policy Label
			assertTrue(res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel.isDisplayed(),
					"Failed: To verify No Show Policy Label");
			test_steps.add("Verified <b>'NO SHOW POLICY'</b> Label ");
			reslogger.info("Verified 'NO SHOW POLICY' Label ");

		} else if (PolicyType.equals("Check In")) {
			// Verified No Show Policy Label

			assertTrue(res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel.isEnabled(),
					"Failed: To verify Check-in  Policy Label");
			test_steps.add("Verified <b>'Check-in Policy'</b> Label ");
			reslogger.info("Verified 'Check-in Policy' Label ");
		}
		// Verified No Show Policy
		String path = "//div[@aria-expanded='true']//span[@class='filter-option pull-left'][contains(text(),'"
				+ PolicyName + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		reslogger.info(PolicyName);
		Utility.ScrollToElement(element, driver);
		reslogger.info("***************");
		assertTrue(element.isDisplayed(), "Failed: To verify  Policy " + PolicyName);
		test_steps.add("Verified: <b>" + PolicyName + " Associated</b>");
		reslogger.info("Verified : " + PolicyName + " Associated");

	}

	public void verifyCPReservationNotes(WebDriver driver, ArrayList<String> test_steps, String PolicyType,
			String NotesType, String Abb, String RoomNo, String Subject, String Desc, String UpdateOn, String Date)
			throws InterruptedException {
		reslogger.info("Policy Type: " + PolicyType);
		reslogger.info(" Abbrivation: " + Abb);

		String[] abb = Abb.split(":");
		String FinalAbb = abb[1].trim();
		reslogger.info(" Room No: " + FinalAbb);

		String[] room = RoomNo.split(":");
		String FinalRoomNo = room[1].trim();
		reslogger.info(" Room No: " + FinalRoomNo);
		reslogger.info(" Date: " + UpdateOn);
		if (PolicyType.equals("No Show")) {
			String path = "//notes-info[contains(@params,'reservationDetail')]//tr/td[contains(@data-bind,'type')][(text()='"
					+ NotesType + "')]" + "/following-sibling::td[contains(@data-bind,'roomClassAbbrv')][(text()='"
					+ FinalAbb + ": " + FinalRoomNo + "')]"
					+ "/following-sibling::td[contains(@data-bind,'subject')][(text()='" + PolicyType + "')]"
					+ "//following-sibling::td[contains(@data-bind,'updatedOn')][contains(text(),'" + UpdateOn + "')]";

			reslogger.info(path);
			WebElement element = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(element, driver);
			assertTrue(element.isDisplayed(), "Failed: To verify No Show Notes");
			test_steps.add("Verified Notes <br>" + "TYPE: <b>" + PolicyType + "</b> ROOM: <b>" + FinalAbb + "</b>: <b>"
					+ FinalRoomNo + "</b> SUBJECT: <b>" + Subject + "</b> DESCRIPTION: <b>" + Desc
					+ "</b> UPDATED ON: <b>" + Date + "</b>");
			reslogger.info("Verified Notes TYPE: " + PolicyType + " ROOM: " + FinalAbb + ": " + FinalRoomNo
					+ " SUBJECT: " + Subject + " DESCRIPTION: " + Desc + " UPDATED ON: " + Date);

		} else if (PolicyType.equals("Cancel")) {

			String path = "//notes-info[contains(@params,'reservationDetail')]//tr/td[contains(@data-bind,'type')][(text()='"
					+ NotesType + "')]" + "/following-sibling::td[contains(@data-bind,'roomClassAbbrv')][(text()='"
					+ FinalAbb + ": " + FinalRoomNo + "')]"
					+ "/following-sibling::td[contains(@data-bind,'subject')][(text()='" + Subject + "')] "
					+ "/following-sibling::td[contains(@data-bind,'details')][(text()='" + Desc + "')]"
					+ "//following-sibling::td[contains(@data-bind,'updatedOn')][contains(text(),'" + UpdateOn + "')]";

			reslogger.info(path);
			WebElement element = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(element, driver);
			assertTrue(element.isDisplayed(), "Failed: To verify Cancellation Notes");
			test_steps.add("Verified Notes <br>" + "TYPE: <b>" + PolicyType + " </b> ROOM:  <b>" + FinalAbb
					+ "</b>: <b>" + FinalRoomNo + " </b> SUBJECT:  <b>" + Subject + " </b> DESCRIPTION:  <b>" + Desc
					+ " </b> UPDATED ON:  <b>" + Date + " </b>");
			reslogger.info("Verified Notes TYPE: " + PolicyType + " ROOM: " + FinalAbb + ": " + FinalRoomNo
					+ " SUBJECT: " + Subject + " DESCRIPTION: " + Desc + " UPDATED ON: " + Date);

		}
	}

	public void verifyCPReservationDetailTabPolicies(WebDriver driver, ArrayList<String> test_steps, String PolicyType,
			String Percentage, String PolicyName, String Desc) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		clickPolicyCollapseIcon(driver, test_steps, PolicyType, Percentage);
		if (PolicyType.equals("No Show")) {

			// Verified No Show Policy Label
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel, driver);
			assertTrue(res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel.isDisplayed(),
					"Failed: To verify No Show Policy Label");
			test_steps.add("Verified <b>'NO SHOW POLICY'</b> Label ");
			reslogger.info("Verified 'NO SHOW POLICY' Label ");
		} else if (PolicyType.equals("Cancel")) {
			// Click_CancellationPolicy(driver, test_steps,Percentage);
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CancellationPolicyLabel, driver);
			assertTrue(res.CP_Reservation_POLICIESANDDISCLAIMERS_CancellationPolicyLabel.isDisplayed(),
					"Failed: To verify Cancellation Policy Label");
			test_steps.add("Verified <b>'Cancellation Policy'</b> Label ");
			reslogger.info("Verified 'Cancellation Policy' Label ");

		} else if (PolicyType.equals("Check In")) {
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel, driver);
			assertTrue(res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel.isDisplayed(),
					"Failed: To verify Check-In Policy Label");
			test_steps.add("Verified <b>'Check-In Policy'</b> Label ");
			reslogger.info("Verified 'Check-In Policy' Label ");

		}
		reslogger.info(PolicyName);
		// Verified Associate Policy
		String path = "//div[@aria-expanded='true']//span[@class='filter-option pull-left'][contains(text(),'"
				+ PolicyName + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		reslogger.info(PolicyName);
		Utility.ScrollToElement(element, driver);
		reslogger.info("***************");
		assertTrue(element.isDisplayed(), "Failed: To verify Associate Policy " + PolicyName);
		test_steps.add("Verified Policy: <b> " + PolicyName + "</b>");
		reslogger.info("Verified Policy: " + PolicyName);
		// Verified Description
		String DescPath = "//div[@aria-expanded='true']//textarea[contains(text(),'" + Desc + "')]";
		WebElement DescElement = driver.findElement(By.xpath(DescPath));
		Utility.ScrollToElement(DescElement, driver);
		assertTrue(DescElement.isDisplayed(), "Failed: To verify  Policy Description" + Desc);
		test_steps.add("Verified Policy Description: <b> " + Desc + "</b>");
		reslogger.info("Verified Policy Description: " + Desc);

	}

	public void verifyLineItem(WebDriver driver, ArrayList<String> test_steps, String Date, String PreviousDay,
			String Category, String Desc, String Amount) throws InterruptedException {
		reslogger.info("******************* Verify Folio Details **********************");

		Elements_CPReservation res = new Elements_CPReservation(driver);
		String LineItemSetMainPaymentPath = "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-date']/span[contains(text(),'"
				+ PreviousDay + "')]" + "/../following-sibling::td[@class='lineitem-category']/span[contains(text(),'"
				+ Category + "')]" + "/../following-sibling::td[@class='lineitem-description']//a[contains(text(),'"
				+ Desc + "')]" + "/../following-sibling::td[@class='lineitem-amount']/span[contains(text(),'" + Amount
				+ "')]";
		Wait.WaitForElement(driver, LineItemSetMainPaymentPath);
		WebElement SetLineItemElement = driver.findElement(By.xpath(LineItemSetMainPaymentPath));
		// Verified No Show Fee line item
		assertTrue(SetLineItemElement.isDisplayed(), "Failed: To Verify Line Item");
		test_steps.add(" Verified Date:<b>  " + Date + "</b>");
		reslogger.info("Verified  Date: " + Date);
		test_steps.add(" Verified  Category:<b>  " + Category + "</b>");
		reslogger.info(" Verified  Category: " + Category);
		test_steps.add("Verified  Description:<b>  " + Desc + "</b>");
		reslogger.info(" Verified Description: " + Desc);
		test_steps.add(" Verified Amount:<b>  " + Amount + "</b>");
		reslogger.info(" Verified  Amount: " + Amount);

	}

	public void VerifyLineItemSecondGuestAlreadyPayAmountByPrimaryOne(WebDriver driver, ArrayList<String> test_steps,
			String Desc) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String LineItemSetMainPaymentPath = "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-description']//a[(contains(text(),'"
				+ Desc + "'))]";
		// WebElement
		// SetLineItemElement=driver.findElement(By.xpath(LineItemSetMainPaymentPath));
		boolean isExist = Utility.isElementPresent(driver, By.xpath(LineItemSetMainPaymentPath));
		if (!isExist) {
			test_steps
					.add("Verified Primary Guest Pay Secondary Guest Charges, No Amount Available for Secondary Guest");
			reslogger.info(
					"Verified Primary Guest Pay Secondary Guest Charges ,No Amount Available for Secondary Guest");
		}

	}

	public void verifyDisplayVoidLineItems(WebDriver driver, ArrayList<String> test_steps, String Notes,
			String Category) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean isExist = checkedDisplayVoidItem(driver, test_steps);
		if (!isExist && res.CP_Reservation_DisplayVoidItemLineItemImage3.isDisplayed()) {
			String path = "//td[contains(@class,'lineitem-note')]/img[@title='" + Notes + "']";
			WebElement element = driver.findElement(By.xpath(path));
			Wait.explicit_wait_visibilityof_webelement(element, driver);
			// Verified Line Item for Display Void Item
			assertTrue(element.isDisplayed(), "Failed: To verify Display Line Item Notes");
			test_steps.add("'Line Item' Verified Notes:<b>  " + Notes + "</b>");
			reslogger.info("'Line Item' Verified Notes: " + Notes);
			// Verified Image
			assertTrue(res.CP_Reservation_DisplayVoidItemLineItemImage3.isDisplayed(),
					"Failed: To verify Display Line Item Image");
			test_steps.add("'Line Item' Verified<b>  Image </b>");
			reslogger.info("'Line Item' Verified Image ");
			// Verified Room Changes
			String RoomChange = "//td[contains(@class,'lineitem-note')]/img[@title='" + Notes
					+ "']/../following-sibling::td[@class='lineitem-category']/span";
			WebElement roomChangeEle = driver.findElement(By.xpath(RoomChange));
			assertTrue(roomChangeEle.getText().toLowerCase().trim().equals(Category.toLowerCase().trim()),
					"Failed: To verify Display Line Item Category");
			test_steps.add("'Line Item' Verified Category:<b>  " + Category + "</b>");
			reslogger.info("'Line Item' Verified Category: " + Category);
		} else if (!isExist) {
			String path = "//td[contains(@class,'lineitem-note')]/img[@title='" + Notes + "']";
			WebElement element = driver.findElement(By.xpath(path));
			Wait.explicit_wait_visibilityof_webelement(element, driver);
			// Verified Line Item for Display Void Item
			assertTrue(element.isDisplayed(), "Failed: To verify Display Line Item Notes");
			test_steps.add("'Line Item' Verified Notes:<b>  " + Notes + "</b>");
			reslogger.info("'Line Item' Verified Notes: " + Notes);
		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <verifyReservationStatusStatus> ' Description: <Verify
	 * Reservation Status from Panel> ' ' Input parameters: <string> ' Return:
	 * <<<<<<< HEAD <test_Steps> ' Created By: <Gangotri Sikheria> ' ' Created
	 * On: <> ' Modified ON: <11 June 2020> ======= <test_Steps> ' Created By:
	 * <Gangotri Sikheria> ' ' Created On: <> ' Modified ON: <11 June 2020>
	 * >>>>>>> b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> verifyReservationStatusStatus(WebDriver driver, ArrayList<String> test_steps,
			String Status) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_PanelNoShowStatus);
		Utility.ScrollToElement(res.CP_Reservation_StatusPanel_Status, driver);

		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_StatusPanel_Status, driver);
		// Verified History Tab No Show Entry
		reslogger.info("Status is: " + res.CP_Reservation_StatusPanel_Status.getText());
		reslogger.info("Matched Status is: " + Status);

		assertEquals(res.CP_Reservation_StatusPanel_Status.getText().toLowerCase().trim(), Status.toLowerCase().trim(),
				"Failed: To verify Status");
		test_steps.add("  Verified Reservation Status: <b>" + Status + "</b>");
		reslogger.info("Verified Reservation Status: " + Status);

		return test_steps;

	}

	public void VerifyReservationStatusTripTotal(WebDriver driver, ArrayList<String> test_steps,
			String TotalTripAmount) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_StatusPanel_TripTotal, driver);
		String RerservationStatus_TripTotalAmount = res.CP_Reservation_StatusPanel_TripTotal.getText().replace("$", "");
		double tripAmount = Double.valueOf(RerservationStatus_TripTotalAmount);
		int amt = (int) tripAmount;
		RerservationStatus_TripTotalAmount = String.valueOf(amt);
		// Verified History Tab No Show Entry
		assertTrue(RerservationStatus_TripTotalAmount.equals(TotalTripAmount), "Failed: To verify Total Trip");
		test_steps.add("  Verified Reservation Status Total Trip:  <b>" + TotalTripAmount + "</b>");
		reslogger.info(" Verified Reservation Status Total Trip: " + TotalTripAmount);
	}

	public void verifyReservationStatusBalance(WebDriver driver, ArrayList<String> test_steps, String Balance)
			throws InterruptedException

	{
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_PanelBalance);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_StatusPanel_Balance, driver);
		Utility.ScrollToElement(res.CP_Reservation_StatusPanel_Balance, driver);
		String RerservationStatus_BalanceAmount = res.CP_Reservation_StatusPanel_Balance.getText().replace("$", "");
		double balanceAmount = Double.valueOf(RerservationStatus_BalanceAmount);
		reslogger.info(String.valueOf((int) (balanceAmount)).trim());
		assertEquals(String.valueOf((int) (balanceAmount)).trim(), (Balance), "Failed: To verify Balance");

		test_steps.add("  Verified Reservation Status Balance:  <b>" + Balance + "</b>");
		reslogger.info(" Verified Reservation Status Balance: " + Balance);
	}

	public void verifyReservationStatusBalanceForCheckOut(WebDriver driver, ArrayList<String> test_steps,
			String Balance) throws InterruptedException

	{
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_Reservation_StatusPanel_Balance, driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_StatusPanel_Balance, driver);
		String RerservationStatus_BalanceAmount = res.CP_Reservation_StatusPanel_Balance.getText().replace("$", "");
		assertEquals(RerservationStatus_BalanceAmount.trim(), (Balance), "Failed: To verify Balance");
		test_steps.add("  Verified Reservation Status Balance:  <b>" + Balance + "</b>");
		reslogger.info(" Verified Reservation Status Balance: " + Balance);
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyHistoryTabDescription ' Description: Verification of
	 * Description Marked this reservation as a no show and Cancelled this
	 * reservation ' Input parameters: String ' Created By: Gangotri ' Created
	 * On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public void verifyHistoryTabDescription(WebDriver driver, ArrayList<String> test_steps, String Status) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_HistoryTab_NoShowDesc);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_HistoryTab_NoShow, driver);
		// Verified History Tab No Show Entry
		assertTrue(res.CP_Reservation_HistoryTab_NoShow.isDisplayed(), "Failed: To verify History Tab ");
		if (Status.equals("No Show")) {
			test_steps.add(" 'History Tab' Verified : <b> Marked this reservation as a no show </b>");
			reslogger.info("'History Tab' Verified : No Show Entry");
		} else if (Status.equals("Cancel")) {
			test_steps.add(" 'History Tab' Verified : <b> Cancelled this reservation </b>");
			reslogger.info("'History Tab' Verified :Cancel Entry");
		}

	}

	public void verifyHistoryTabDescriptionWithPayment(WebDriver driver, ArrayList<String> test_steps, String amount,
			String Status, String PaymentMethod) {
		String desc = "Made a no show payment of $" + amount.trim() + ".00 using " + PaymentMethod;
		String CancelDesc = "Made a cancellation payment of $" + amount.trim() + ".00 using " + PaymentMethod;
		String path = "//span[contains(text(),'" + desc + "')]|//span[contains(text(),'" + CancelDesc + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Description");
		if (Status.equals("No Show")) {
			test_steps.add("'History Tab' Verified Description: <b>" + desc + "</b>");
			reslogger.info("'History Tab' Verified Description : " + desc);
		} else if (Status.equals("Cancel")) {
			test_steps.add("'History Tab' Verified Description: <b>" + CancelDesc + "</b>");
			reslogger.info("'History Tab' Verified Description : " + CancelDesc);

		}
	}

	public void verifyHistoryTabPaymentDesc(WebDriver driver, ArrayList<String> test_steps, String amount,
			String Status, String abb, String RoomNo, String PaymentMethod) {
		String[] room = RoomNo.split(":");
		String FinalRoomNo = room[1].trim();
		reslogger.info(" Room No: " + FinalRoomNo);
		String checkIn = "Made a payment $" + amount.trim() + ".00 using " + PaymentMethod;
		String checkOut = "Captured payment for $" + amount.trim() + ".00 using " + PaymentMethod;

		String path = "//span[contains(text(),'" + checkIn
				+ "')]/ancestor::td/following-sibling::td/span[contains(text(),'" + abb + ": " + FinalRoomNo + "')]";
		String checkOutPath = "//span[contains(text(),'" + checkOut
				+ "')]/ancestor::td/following-sibling::td/span[contains(text(),'" + abb + ": " + FinalRoomNo + "')]";
		if (Status.equals("Check In")) {
			WebElement element = driver.findElement(By.xpath(path));
			assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Description");
			test_steps.add("'History Tab' Verified Description: <b>" + checkIn + "</b>");
			reslogger.info("'History Tab' Verified Description : " + checkIn);
			test_steps.add("'History Tab' Verified Room: <b>" + abb + ": " + FinalRoomNo + "</b>");
			reslogger.info("'History Tab' Verified Room : " + abb + ": " + FinalRoomNo);
		} else if (Status.equals("Check Out")) {
			WebElement elementCheckOut = driver.findElement(By.xpath(checkOutPath));
			assertTrue(elementCheckOut.isDisplayed(), "Failed: To verify History Tab  Description");
			test_steps.add("'History Tab' Verified Description: <b>" + checkOut + "</b>");
			reslogger.info("'History Tab' Verified Description : " + checkOut);
			test_steps.add("'History Tab' Verified Room: <b>" + abb + ": " + FinalRoomNo + "</b>");
			reslogger.info("'History Tab' Verified Room : " + abb + ": " + FinalRoomNo);
		}

	}

	public void Verify_HistoryTab_Checkout_ChangedRoomCharges(WebDriver driver, ArrayList<String> test_steps,
			String amount, String ChangedCharges) {
		String checkOut = "Changed room charge from $" + amount + ".00 to $" + ChangedCharges + ".00";
		String path = "//span[contains(text(),'" + checkOut + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Changed Room Charges");
		test_steps.add("'History Tab' Verified <b>Changed room charge from $" + amount + ".00 to $</b>" + ChangedCharges
				+ ".00");
		reslogger.info(
				"'History Tab' Verified  Changed room charge from $" + amount + ".00 to $" + ChangedCharges + ".00");

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: Verify_HistoryTab_Checkout_ChangedCheckOutDate '
	 * Description: Verification of Description Changed check out date from '
	 * Input parameters: String ' Created By: Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void Verify_HistoryTab_Checkout_ChangedCheckOutDate(WebDriver driver, ArrayList<String> test_steps,
			String date, String ChangedDate) {
		String checkOut = "Changed check out date from " + date + " to " + ChangedDate + "";
		String path = "//span[contains(text(),'" + checkOut + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Changed Checkout Date");
		test_steps.add("'History Tab' Verified <b>Changed check out date from " + date + " to </b>" + ChangedDate);
		reslogger.info("'History Tab' Verified  Changed check out date from " + date + " to " + ChangedDate);

	}

	public void commonMethodToverifyHistoryTabDescriptionForCheckINCheckOut(WebDriver driver,
			ArrayList<String> test_steps, String amount, String Status, String abb, String RoomNo,
			String PaymentMethod) {
		String[] room = RoomNo.split(":");
		String FinalRoomNo = room[1].trim();
		reslogger.info(" Room No: " + FinalRoomNo);
		String checkIn = "Made a payment $" + amount.trim() + ".00 using " + PaymentMethod;
		String checkOut = "Captured payment for $" + amount.trim() + ".00 using " + PaymentMethod;

		String path = "//span[contains(text(),'" + checkIn
				+ "')]/ancestor::td/following-sibling::td/span[contains(text(),'" + abb + ": " + FinalRoomNo + "')]";
		String checkOutPath = "//span[contains(text(),'" + checkOut
				+ "')]/ancestor::td/following-sibling::td/span[contains(text(),'" + abb + ": " + FinalRoomNo + "')]";
		if (Status.equals("Check In")) {
			WebElement element = driver.findElement(By.xpath(path));
			assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Description");
			test_steps.add("'History Tab' Verified Description: <b>" + checkIn + "</b>");
			reslogger.info("'History Tab' Verified Description : " + checkIn);
			test_steps.add("'History Tab' Verified Room: <b>" + abb + ": " + FinalRoomNo + "</b>");
			reslogger.info("'History Tab' Verified Room : " + abb + ": " + FinalRoomNo);
		} else if (Status.equals("Check Out")) {
			WebElement elementCheckOut = driver.findElement(By.xpath(checkOutPath));
			assertTrue(elementCheckOut.isDisplayed(), "Failed: To verify History Tab  Description");
			test_steps.add("'History Tab' Verified Description: <b>" + checkOut + "</b>");
			reslogger.info("'History Tab' Verified Description : " + checkOut);
			test_steps.add("'History Tab' Verified Room: <b>" + abb + ": " + FinalRoomNo + "</b>");
			reslogger.info("'History Tab' Verified Room : " + abb + ": " + FinalRoomNo);
		}

	}

	public void verifyChangedRoomChargesOnHistoryTabForCheckout(WebDriver driver, ArrayList<String> test_steps,
			String amount, String ChangedCharges) {
		String checkOut = "Changed room charge from $" + amount + ".00 to $" + ChangedCharges + ".00";
		String path = "//span[contains(text(),'" + checkOut + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Changed Room Charges");
		test_steps.add("'History Tab' Verified <b>Changed room charge from $" + amount + ".00 to $</b>" + ChangedCharges
				+ ".00");
		reslogger.info(
				"'History Tab' Verified  Changed room charge from $" + amount + ".00 to $" + ChangedCharges + ".00");

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyChangedCheckOutDateOnHistoryTab ' Description:
	 * Verification of Description Changed check out date from ' Input
	 * parameters: String ' Created By: Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public void verifyChangedCheckOutDateOnHistoryTab(WebDriver driver, ArrayList<String> test_steps, String date,
			String ChangedDate) {
		String checkOut = "Changed check out date from " + date + " to " + ChangedDate + "";
		String path = "//span[contains(text(),'" + checkOut + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Changed Checkout Date");
		test_steps.add("'History Tab' Verified <b>Changed check out date from " + date + " to </b>" + ChangedDate);
		reslogger.info("'History Tab' Verified  Changed check out date from " + date + " to " + ChangedDate);

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: commonMethodToverifyRoomsOnHistoryTab ' Description:
	 * Verification of Rooms on History ' Input parameters: String ' Created By:
	 * Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public void commonMethodToverifyRoomsOnHistoryTab(WebDriver driver, ArrayList<String> test_steps,
			String RoomClassName) throws InterruptedException {
		String path = "//div[contains(@data-bind,'hasHistory')]//td/span[contains(@data-bind,'data.room')]";
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		assertTrue(element.getText().toLowerCase().trim().equals(RoomClassName.toLowerCase().trim()),
				"Failed: To verify History Tab  Room");
		test_steps.add("'History Tab' Verified Room: <b>" + RoomClassName + "</b>");
		reslogger.info("'History Tab' Verified Room : " + RoomClassName);
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyRollBackButton ' Description: Verification of Roll
	 * Back button ' Input parameters: String ' Created By: Gangotri ' Created
	 * On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void verifyRollBackButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_RolleBackButton);
		Utility.ScrollToElement(res.CP_Reservation_RollBackAllButton, driver);
		assertTrue(res.CP_Reservation_RollBackAllButton.isDisplayed(), "Failed: To verify Roll Back Button");

		test_steps.add("Verified  <b>Roll Back </b> Button");
		reslogger.info("Verified Roll Back Button");
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyStayInforRollBackButton ' Description: Verification
	 * of Stay Info Roll Back button ' Input parameters: String ' Created By:
	 * Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void verifyStayInforRollBackButton(WebDriver driver, ArrayList<String> test_steps, String RoomClassName)
			throws InterruptedException {
		String path = "//div[contains(@data-bind,'ReservationStatusLookup')]/div//div[contains(@class,'ir-roomInfo')]//span[contains(text(),'"
				+ RoomClassName + "')]"
				+ "/ancestor::div/div[contains(@class,'detailsbox')]/following-sibling::div//button[contains(text(),'Roll Back')]";
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		assertTrue(element.isDisplayed(), "Failed: To verify Stay Info Roll Back Button");
		test_steps.add(" Stay Info-Roll Back Button is Displayed For Room Class <b>" + RoomClassName + "</b>");
		reslogger.info("Stay Info-Roll Back Button is Displayed For Room Class: " + RoomClassName);

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyCheckOutAllButton ' Description: Verification of
	 * CheckOut All button ' Input parameters: String ' Created By: Gangotri '
	 * Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void verifyCheckOutAllButton(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutAllButton);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_CheckOutAllButton, driver);
		assertTrue(res.CP_Reservation_CheckOutAllButton.isDisplayed(), "Failed: To verify Check Out All Button");
		test_steps.add("Verified  <b>Check Out All </b> Button");
		reslogger.info("Verified Check Out All  Button");
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyCheckOutButton ' Description: Verification of
	 * CheckOut button ' Input parameters: String ' Created By: Gangotri '
	 * Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void verifyCheckOutButton(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutButton);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_CheckOutButton, driver);
		assertTrue(res.CP_Reservation_CheckOutButton.isDisplayed(), "Failed: To verify Check Out  Button");
		test_steps.add("Verified  <b>Check Out  </b> Button");
		reslogger.info("Verified Check Out   Button");
	}

	public void click_RollBackButton(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_RolleBackButton);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_RollBackAllButton, driver);
		res.CP_Reservation_RollBackAllButton.click();
		test_steps.add("Click Roll Back Button");
		reslogger.info("Click Roll Back Button");
	}

	public void Click_CancellationPolicy(WebDriver driver, ArrayList<String> test_steps, String percentage)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String path = "//div[text()='Policies And Disclaimers']/..//span[contains(text(),'Cancellation " + percentage
				+ "%')]";
		Wait.WaitForElement(driver, path);
		Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CancellationPolicyLabel, driver);
		boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_CancellationPolicyLabel.isDisplayed();
		if (isEclicked) {
			test_steps.add("Cancellation Policy Alread Expanded");
			reslogger.info("Cancellation Policy Alread Expanded ");
		} else {
			WebElement element = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(element, driver);
			element.click();
			test_steps.add("Cancellation Policy Expanded");
			reslogger.info("Cancellation Policy Expanded ");
		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: addCancelationReson ' Description: Add Cancel Reason and
	 * click PROCEED TO CANCELLATION PAYMENT button and verify Cancellation
	 * Reason Validation ' Input parameters: String ' Created By: Gangotri '
	 * Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void addCancelationReson(WebDriver driver, ArrayList<String> test_steps, String reason, String validationMsg)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		// Wait.WaitForElement(driver, OR_Reservation.ProceedToPaymentButton);
		CompleteCancelProcess(driver, test_steps);
		// Utility.ScrollToElement(res.ProceedToPaymentButton, driver);
		// res.ProceedToPaymentButton.click();
		// test_steps.add("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
		// reslogger.info("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
		test_steps.add("<b>****Start Verifying Reason****</b>");
		assertEquals(res.CancelReservation_ValidationMsg.getText().toLowerCase().trim(),
				(validationMsg.toLowerCase().trim()), "Failed: To verify reason");
		test_steps.add("Verified  Cancellation Reason Validation: <b>" + validationMsg + "</b>");
		reslogger.info("Verified Cancellation Reason Validation: " + validationMsg);
		provideReasonForCancelAndClickOnProceedToPay(driver, test_steps, reason, true);
		String loading = "(//div[@class='ir-loader-in'])[2]";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 10) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
	}

	public void enableVoidRoomCharge(WebDriver driver, ArrayList<String> test_steps, boolean voidRoomCharges) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean voidRoomChargesSelected = res.cancelResPopupVoidRoomChargesCheckBox.isSelected();
		if (voidRoomCharges) {
			if (!(voidRoomChargesSelected)) {
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.cancelResPopupVoidRoomChargesCheckBoxClick),
						driver);
				res.cancelResPopupVoidRoomChargesCheckBoxClick.click();
				test_steps.add("Enabling Void Room Charges check box");
			} else {
				test_steps.add("Void Room Charges check box is already selected");
			}
		} else {
			if (voidRoomChargesSelected) {
				res.cancelResPopupVoidRoomChargesCheckBoxClick.click();
				test_steps.add("Unselecting Void Room Charges check box");
			} else {
				test_steps.add("Void Room Charges check box is already unselected");
			}
		}
	}

	public void provideReasonForCancelAndClickOnProceedToPay(WebDriver driver, ArrayList<String> test_steps,
			String reason, boolean voidRoomCharges) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CancelReservation_Reason);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CancelReservation_Reason), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelReservation_Reason), driver);
		res.CancelReservation_Reason.clear();
		res.CancelReservation_Reason.sendKeys(reason);
		test_steps.add("Providing Cancellation Reason as : <b>" + reason + " </b>");
		reslogger.info("Providing Cancellation Reason as : " + reason);

		CompleteCancelProcess(driver, test_steps);
		// Wait.WaitForElement(driver, OR_Reservation.ProceedToPaymentButton);
		// Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ProceedToPaymentButton),
		// driver);
		// Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ProceedToPaymentButton),
		// driver);
		// Utility.ScrollToElement_NoWait(res.ProceedToPaymentButton, driver);
		// res.ProceedToPaymentButton.sendKeys(Keys.ENTER);
		// Utility.clickThroughJavaScript(driver, res.ProceedToPaymentButton);
		// test_steps.add("Clicking on '<b>PROCEED TO CANCELLATION PAYMENT</b>'
		// Button");
		// reslogger.info("Click 'PROCEED TO CANCELLATION PAYMENT' Button");

	}

	public void verifyCancelPolicyOnCancelPaymentPopup(WebDriver driver, ArrayList<String> test_steps,
			String policyName, String policyText) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.cancelResPopupPolicyName), driver);
			String policyNameDisplayed = res.cancelResPopupPolicyName.getText();
			Actions act = new Actions(driver);
			act.moveToElement(res.cancelResPopupPolicyName).perform();
			String policyNameAtToolTip = res.cancelResPopupPolicyToolTipName.getText();
			String policyTextAtToolTip = res.cancelResPopupPolicyToolTipText.getText();

			assertEquals(policyNameDisplayed, policyName, "Failed - Verify policy name on cancel popup");
			test_steps.add("Successfully verified policy name on cancel popup as <b>" + policyNameDisplayed + "</b>");

			assertEquals(policyNameAtToolTip, policyName, "Failed - Verify policy name on cancel popup");
			test_steps.add(
					"Successfully verified policy name on cancel popup tool tip as <b>" + policyNameAtToolTip + "</b>");

			assertEquals(policyTextAtToolTip, policyText, "Failed - Verify policy name on cancel popup");
			test_steps.add(
					"Successfully verified policy text on cancel popup tool tip as <b>" + policyTextAtToolTip + "</b>");

		} catch (Exception e) {
			reslogger.info(e);
		}
	}

	public String get_STAYINFORoomChargesWithoutCurrency(WebDriver driver, ArrayList test_steps, String RoomClassName) {
		String Balance = driver
				.findElement(By
						.xpath("//div[contains(@data-bind,'ReservationStatusLookup')]/div//div[contains(@class,'ir-roomInfo')]//span[contains(text(),'"
								+ RoomClassName + "')]"
								+ "/following-sibling::span[contains(@data-bind,'showInnroadCurrency')]"))
				.getText();
		Balance = Balance.replace("$", "");
		test_steps.add("StayInfo Room Charges : <b>" + Balance + "</b>");
		reslogger.info("StayInfo Room Charges : " + Balance);
		return Balance;
	}

	public String stayInfoActualRoom = "", stayInfoActualAbb = "";

	public int actualRoom = 0;

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickSTAYINFOThreeDots ' Description: Click three demo
	 * from stay info page as per room no ' Input parameters: String ' Created
	 * By: Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void clickSTAYINFOThreeDots(WebDriver driver, ArrayList<String> test_steps, String Status,

			String roomNO, ArrayList<String> Rooms, ArrayList<String> RoomAbbri) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		int size = res.CP_Reservation_StayInfo_ThreeDotts.size();
		for (int i = 0; i < size; i++) {
			if (i == (Integer.parseInt(roomNO) - 1)) {
				actualRoom = i;
				stayInfoActualRoom = Rooms.get(i).toString();
				stayInfoActualAbb = RoomAbbri.get(i).toString();
				Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_StayInfo_ThreeDotts);
				Utility.ScrollToElement(res.CP_Reservation_StayInfo_ThreeDotts.get(i), driver);
				res.CP_Reservation_StayInfo_ThreeDotts.get(i).click();
				test_steps.add("Room <b>" + (Integer.parseInt(roomNO)) + "</b> in the MRB Reservation");
				reslogger.info("Room " + (Integer.parseInt(roomNO)) + " in the MRB Reservation");
				break;
			}
		}

		String pathCancel = "//ul//li[contains(text(),'" + Status + "')]";
		WebDriverWait wait = new WebDriverWait(driver, 25);
		By locator = By.xpath(pathCancel);
		WebElement elementCancel = wait.until(ExpectedConditions.elementToBeClickable(locator));
		elementCancel.click();
		test_steps.add("Click : <b>" + Status + "</b>");
		reslogger.info("Click : " + Status);
	}

	public void click_FolioDetail_DropDownBox(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_FolioDetailDropDownBox);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_FolioDetailDropDownBox, driver);
		Utility.ScrollToElement(res.CP_Reservation_FolioDetailDropDownBox, driver);
		res.CP_Reservation_FolioDetailDropDownBox.click();
		test_steps.add("Click Folio Detail Drop Down Box");
		reslogger.info("Click Folio Detail Drop Down Box");
	}

	public void click_FolioDetail_DropDownBox( ArrayList<String> test_steps,WebDriver driver)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_ReservationFolioDetailDropDownBox);
		Wait.explicit_wait_visibilityof_webelement(res.CP_ReservationFolioDetailDropDownBox, driver);
		Utility.ScrollToElement(res.CP_ReservationFolioDetailDropDownBox, driver);
		res.CP_ReservationFolioDetailDropDownBox.click();
		test_steps.add("Click Folio Detail Drop Down Box");
		reslogger.info("Click Folio Detail Drop Down Box");
	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickFolioDetailOptionValue ' Description: Click on Folio
	 * Drop Down BOx option ' Input parameters: String ' Created By: Gangotri '
	 * Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void clickFolioDetailOptionValue(WebDriver driver, ArrayList<String> test_steps, String abb, String RoomNO)
			throws InterruptedException {
		String FinalRoomNo = null;
		if (RoomNO.contains(":")) {
			String[] room = RoomNO.split(":");
			FinalRoomNo = room[1].trim();
			reslogger.info(" Room No: " + FinalRoomNo);

		} else {
			FinalRoomNo = RoomNO;
		}

		String path = "//a/span[contains(text(),'Guest Folio For " + abb + " : " + FinalRoomNo + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		Wait.WaitForElement(driver, path);
		Utility.ScrollToElement(element, driver);
		element.click();
		test_steps.add("Select Guest Folio For: <b>" + abb + ":" + FinalRoomNo + "</b>");
		reslogger.info("Select Guest Folio For: " + abb + ":" + FinalRoomNo);
	}

	public void verify_PaymentInTripSummary(WebDriver driver, ArrayList test_steps, String paidFolio,
			String balanceFolio, String paidFolioAfterPay, String balanceFolioAfterPay, String amount,
			String TakePaymentType) {
		test_steps.add("******************* Verify TripSummary amount after payment **********************");
		reslogger.info("******************* Verify TripSummary amount after payment **********************");

		Double paidBefore = Double.parseDouble(paidFolio);
		Double balBefore = Double.parseDouble(balanceFolio);
		Double paidAfter = Double.parseDouble(paidFolioAfterPay);
		Double balAfter = Double.parseDouble(balanceFolioAfterPay);
		Double amt = Double.parseDouble(amount);

		if (TakePaymentType.equalsIgnoreCase("Capture")) {

			if (Double.compare((paidBefore + amt), paidAfter) == 0) {
				test_steps.add("Folio Paid amount is updated with : " + amount);
				reslogger.info("Folio Paid amount is updated with : " + amount);
			} else {
				test_steps.add("Folio Paid amount is not updated with : " + amount);
				reslogger.info("Folio Paid amount is not updated with : " + amount);
			}

			if (Double.compare((balBefore - amt), balAfter) == 0) {
				test_steps.add("Folio Balance amount is updated with : " + amount);
				reslogger.info("Folio Balance amount is updated with : " + amount);
			} else {
				test_steps.add("Folio Balance amount is not updated with : " + amount);
				reslogger.info("Folio Balance amount is not updated with : " + amount);
			}
		}
	}

	public void create_SplitResFromMRB(WebDriver driver, ArrayList test_steps, ArrayList Rooms)
			throws InterruptedException {
		test_steps.add("******************* Spliting a room from MRB to a separate reservation **********************");
		reslogger.info("******************* Spliting a room from MRB to a separate reservation **********************");
		String circle = "//div[contains(text(),'Stay')]/..//button[contains(@class,'Circle')]";
		int count = driver.findElements(By.xpath(circle)).size();
		circle = "(//div[contains(text(),'Stay')]/..//button[contains(@class,'Circle')])[" + count + "]";
		Wait.WaitForElement(driver, circle);
		driver.findElement(By.xpath(circle)).click();

		String split = "(//li[text()='Split into Separate Reservation'])[" + (count - 1) + "]";
		Wait.WaitForElement(driver, split);
		driver.findElement(By.xpath(split)).click();
		test_steps.add("Clicking on split into separate reservation");
		reslogger.info("Clicking on split into separate reservation");

		String areYouSure = "//div[contains(text(),'Are you sure you want to split this room into a separate reservation')]/..//button[text()='Yes']";
		Wait.WaitForElement(driver, areYouSure);
		driver.findElement(By.xpath(areYouSure)).click();

		test_steps.add("Are you sure you want to split this room into a separate reservation Popup verified");
		reslogger.info("Are you sure you want to split this room into a separate reservation Popup verified");
		String loading = "(//div[@class='ir-loader-in'])";
		count = 0;
		while (true) {
			if (driver.findElements(By.xpath(loading)).size() > 4) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
	}

	public ArrayList get_FolioBalanceForAllFolios(WebDriver driver, ArrayList test_steps, ArrayList Rooms,
			ArrayList RoomAbbri, String IsAssign) throws InterruptedException {
		test_steps.add("******************* MRB Folio Creation verification **********************");
		reslogger.info("******************* MRB Folio Creation verification **********************");
		String abb = null;
		String roomnumber = null;

		ArrayList<ArrayList> al = new ArrayList<ArrayList>();

		for (int i = 0; i < RoomAbbri.size(); i++) {
			ArrayList al1 = new ArrayList();
			abb = RoomAbbri.get(i).toString();
			roomnumber = Rooms.get(i).toString();
			String[] abbrivation = abb.split(":");
			String[] rooomno = roomnumber.split(":");
			String folio = null;

			String folioSize = "//button[contains(@title,'Guest')]";
			Wait.WaitForElement(driver, folioSize);
			driver.findElement(By.xpath(folioSize)).click();
			Wait.wait2Second();
			if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps
							.add("Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
					reslogger
							.info("Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
					// folio="Guest Folio For "+abbrivation[1]+" :
					// "+abbrivation[0];
					// new
					// Select(driver.findElement(By.xpath(folioSize))).selectByVisibleText(folio);
					driver.findElement(By.xpath(folio)).click();
					String roomCahrge = "//span[text()='Room Charge']";

					Double FilioRoomCharges = Double.parseDouble(get_RoomCharge(driver, test_steps));
					Double FilioIncidentals = Double.parseDouble(get_Inceidentals(driver, test_steps));
					Double FilioTaxes = Double.parseDouble(get_Taxes(driver, test_steps));
					Double FilioTripTotal = Double.parseDouble(get_TotalCharges(driver, test_steps));
					Double FilioPaid = Double.parseDouble(get_Payments(driver, test_steps));
					Double FilioBalance = Double.parseDouble(get_Balance(driver, test_steps));
					al1.add(FilioRoomCharges);
					al1.add(FilioIncidentals);
					al1.add(FilioTaxes);
					al1.add(FilioTripTotal);
					al1.add(FilioPaid);
					al1.add(FilioBalance);
					al.add(al1);
				} else {
					test_steps.add(
							"Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
					reslogger.info(
							"Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
				}
			} else {
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[1] + " : " + rooomno[1].trim()
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps.add(
							"Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + rooomno[1].trim());
					reslogger.info(
							"Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + rooomno[1].trim());
					// folio="Guest Folio For "+abbrivation[1]+" :
					// "+rooomno[1].trim();
					// new
					// Select(driver.findElement(By.xpath(folioSize))).selectByVisibleText(folio);
					driver.findElement(By.xpath(folio)).click();
					String roomCahrge = "//span[text()='Room Charge']";

					Double FilioRoomCharges = Double.parseDouble(get_RoomCharge(driver, test_steps));
					Double FilioIncidentals = Double.parseDouble(get_Inceidentals(driver, test_steps));
					Double FilioTaxes = Double.parseDouble(get_Taxes(driver, test_steps));
					Double FilioTripTotal = Double.parseDouble(get_TotalCharges(driver, test_steps));
					Double FilioPaid = Double.parseDouble(get_Payments(driver, test_steps));
					Double FilioBalance = Double.parseDouble(get_Balance(driver, test_steps));
					al1.add(FilioRoomCharges);
					al1.add(FilioIncidentals);
					al1.add(FilioTaxes);
					al1.add(FilioTripTotal);
					al1.add(FilioPaid);
					al1.add(FilioBalance);
					al.add(al1);
				} else {
					test_steps.add("Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : "
							+ rooomno[1].trim());
					reslogger.info("Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : "
							+ rooomno[1].trim());
				}
			}
		}
		return al;
	}

	public void velidate_MRB_TripSummaryAndFolio(WebDriver driver, ArrayList test_steps, ArrayList al,
			String TripSummaryRoomCharges, String TripSummaryTaxes, String TripSummaryIncidentals,
			String TripSummaryTripTotal, String TripSummaryPaid, String TripSummaryBalance) {
		test_steps.add("******************* Validating Folio and TripSummary fields **********************");
		reslogger.info("******************* Validating Folio and TripSummary fields **********************");

		TripSummaryRoomCharges = TripSummaryRoomCharges.trim();
		TripSummaryRoomCharges = TripSummaryRoomCharges.substring(1, TripSummaryRoomCharges.length());
		TripSummaryRoomCharges = TripSummaryRoomCharges.trim();
		Double TripSummRoom = Double.parseDouble(TripSummaryRoomCharges);

		TripSummaryTaxes = TripSummaryTaxes.trim();
		TripSummaryTaxes = TripSummaryTaxes.substring(1, TripSummaryTaxes.length());
		TripSummaryTaxes = TripSummaryTaxes.trim();
		Double TripSummTax = Double.parseDouble(TripSummaryTaxes);

		TripSummaryIncidentals = TripSummaryIncidentals.trim();
		TripSummaryIncidentals = TripSummaryIncidentals.substring(1, TripSummaryIncidentals.length());
		TripSummaryIncidentals = TripSummaryIncidentals.trim();
		Double TripSummInci = Double.parseDouble(TripSummaryIncidentals);

		TripSummaryTripTotal = TripSummaryTripTotal.trim();
		TripSummaryTripTotal = TripSummaryTripTotal.substring(1, TripSummaryTripTotal.length());
		TripSummaryTripTotal = TripSummaryTripTotal.trim();
		Double TripSummTot = Double.parseDouble(TripSummaryTripTotal);

		TripSummaryPaid = TripSummaryPaid.trim();
		TripSummaryPaid = TripSummaryPaid.substring(1, TripSummaryPaid.length());
		TripSummaryPaid = TripSummaryPaid.trim();
		Double TripSummPaid = Double.parseDouble(TripSummaryPaid);

		TripSummaryBalance = TripSummaryBalance.trim();
		TripSummaryBalance = TripSummaryBalance.substring(1, TripSummaryBalance.length());
		TripSummaryBalance = TripSummaryBalance.trim();
		Double TripSummBal = Double.parseDouble(TripSummaryBalance);

		int count = al.size();
		ArrayList al1;
		Double FilioRoomCharges = (double) 0, FilioIncidentals = (double) 0, FilioTaxes = (double) 0,
				FilioTripTotal = (double) 0, FilioPaid = (double) 0, FilioBalance = (double) 0;

		for (int i = 0; i < count; i++) {
			al1 = (ArrayList) al.get(i);
			FilioRoomCharges = FilioRoomCharges + Double.parseDouble(al1.get(0).toString());
			FilioIncidentals = FilioIncidentals + Double.parseDouble(al1.get(1).toString());
			FilioTaxes = FilioTaxes + Double.parseDouble(al1.get(2).toString());
			FilioTripTotal = FilioTripTotal + Double.parseDouble(al1.get(3).toString());
			FilioPaid = FilioPaid + Double.parseDouble(al1.get(4).toString());
			FilioBalance = FilioBalance + Double.parseDouble(al1.get(5).toString());
		}

		/*
		 * reslogger.info("FilioRoomCharges :"+FilioRoomCharges);
		 * reslogger.info("FilioIncidentals : "+FilioIncidentals);
		 * reslogger.info("FilioTaxes : "+FilioTaxes);
		 * reslogger.info("FilioTripTotal : "+FilioTripTotal);
		 * reslogger.info("FilioPaid : "+FilioPaid);
		 * reslogger.info("FilioBalance : "+FilioBalance);
		 * reslogger.info("TripSummRoom : "+TripSummRoom);
		 * reslogger.info("TripSummTax : "+TripSummTax);
		 * reslogger.info("TripSummInci : "+TripSummInci);
		 * reslogger.info("TripSummTot : "+TripSummTot);
		 * reslogger.info("TripSummPaid : "+TripSummPaid);
		 * reslogger.info("TripSummBal : "+TripSummBal);
		 */

		if (Double.compare(TripSummRoom, FilioRoomCharges) == 0) {
			test_steps.add("TripSummary RoomCharges and Folio RoomCharges are same : " + FilioRoomCharges);
			reslogger.info("TripSummary RoomCharges and Folio RoomCharges are same : " + FilioRoomCharges);
		} else {
			test_steps.add("TripSummary RoomCharges and Folio RoomCharges are not same : " + FilioRoomCharges);
			reslogger.info("TripSummary RoomCharges and Folio RoomCharges are not same : " + FilioRoomCharges);
		}

		if (Double.compare(FilioTaxes, TripSummTax) == 0) {
			test_steps.add("TripSummaryTaxes and FilioTaxes are same : " + FilioTaxes);
			reslogger.info("TTripSummaryTaxes and FilioTaxes are same : " + FilioTaxes);
		} else {
			test_steps.add("TripSummaryTaxes and FilioTaxes are not same : " + FilioTaxes);
			reslogger.info("TripSummaryTaxes and FilioTaxes are not same : " + FilioTaxes);
		}
		if (Double.compare(FilioIncidentals, TripSummInci) == 0) {
			test_steps.add("TripSummary Incidental and Folio Incidental are same : " + FilioIncidentals);
			reslogger.info("TripSummary Incidental and Folio Incidental are same : " + FilioIncidentals);
		} else {
			test_steps.add("TripSummary Incidental and Folio Incidental are not same : " + FilioIncidentals);
			reslogger.info("TripSummary Incidental and Folio Incidental are not same : " + FilioIncidentals);
		}
		if (Double.compare(FilioTripTotal, TripSummTot) == 0) {
			test_steps.add("TripSummary TripTotal and Folio TripTotal are same : " + FilioTripTotal);
			reslogger.info("TripSummary TripTotal and Folio TripTotal are same : " + FilioTripTotal);
		} else {
			test_steps.add("TripSummary TripTotal and Folio TripTotal are not same : " + FilioTripTotal);
			reslogger.info("TripSummary TripTotal and Folio TripTotal are not same : " + FilioTripTotal);
		}
		if (Double.compare(FilioPaid, TripSummPaid) == 0) {
			test_steps.add("TripSummary Paid and Folio Paid are same : " + FilioPaid);
			reslogger.info("TripSummary Paid and Folio Paid are same : " + FilioPaid);
		} else {
			test_steps.add("TripSummary Paid and Folio Paid are not same : " + FilioPaid);
			reslogger.info("TripSummary Paid and Folio Paid are not same : " + FilioPaid);
		}
		if (Double.compare(FilioBalance, TripSummBal) == 0) {
			test_steps.add("TripSummary Balance and Folio Balance are same : " + FilioBalance);
			reslogger.info("TripSummary Balance and Folio Balance are same : " + FilioBalance);
		} else {
			test_steps.add("TripSummary Balance and Folio Balance are not same : " + FilioBalance);
			reslogger.info("TripSummary Balance and Folio Balance are not same : " + FilioBalance);
		}
	}

	public String verify_MRB_SplitResInHistory(WebDriver driver, ArrayList test_steps) {
		test_steps.add(
				"******************* Validating Split Reservation recored in MRB History Tab **********************");
		reslogger.info(
				"******************* Validating Split Reservation recored in MRB History Tab **********************");

		String description = "//span[contains(text(),'Split a room into separate reservation with Confirmation Number: ')]";
		String confirmation = driver.findElement(By.xpath(description)).getText();
		test_steps.add(confirmation);
		reslogger.info(confirmation);
		confirmation = confirmation.replace("Split a room into separate reservation with Confirmation Number: ", "");
		return confirmation;
	}

	public void verify_MRB_FolioAfterSplit(WebDriver driver, ArrayList test_steps, ArrayList RoomAbbri, String IsAssign,
			ArrayList Rooms) throws InterruptedException {
		test_steps.add("******************* MRB Folio Creation verification After Split**********************");
		reslogger.info("******************* MRB Folio Creation verification After Split**********************");
		String abb = null;
		String roomnumber = null;
		for (int i = 0; i < RoomAbbri.size(); i++) {
			abb = RoomAbbri.get(i).toString();
			roomnumber = Rooms.get(i).toString();
			String[] abbrivation = abb.split(":");
			String[] rooomno = roomnumber.split(":");
			String folio = null;

			String folioSize = "//button[contains(@title,'Guest')]";
			Wait.WaitForElement(driver, folioSize);
			driver.findElement(By.xpath(folioSize)).click();
			Wait.wait2Second();

			if (i == (RoomAbbri.size() - 1) || RoomAbbri.size() > 2) {
				if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
					folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]
							+ "')]";
					reslogger.info(folio);
					if (driver.findElements(By.xpath(folio)).size() > 0) {
						test_steps.add(
								"Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
						reslogger.info(
								"Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
						// folio="Guest Folio For "+abbrivation[1]+" :
						// "+abbrivation[0];
						// new
						// Select(driver.findElement(By.xpath(folioSize))).selectByVisibleText(folio);
						driver.findElement(By.xpath(folio)).click();
						String roomCahrge = "//span[text()='Room Charge']";
						if (driver.findElements(By.xpath(roomCahrge)).size() > 0) {
							test_steps.add("Room Charge Line Item  is present : " + "Guest Folio For " + abbrivation[1]
									+ " : " + abbrivation[0]);
							reslogger.info("Room Charge Line Item  is present : " + "Guest Folio For " + abbrivation[1]
									+ " : " + abbrivation[0]);
						} else {
							test_steps.add("Room Charge Line Item  is not present : " + "Guest Folio For "
									+ abbrivation[1] + " : " + abbrivation[0]);
							reslogger.info("Room Charge Line Item  is not present : " + "Guest Folio For "
									+ abbrivation[1] + " : " + abbrivation[0]);
						}
					} else {
						test_steps.add("Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : "
								+ abbrivation[0]);
						reslogger.info("Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : "
								+ abbrivation[0]);
					}
					folioSize = "//button[contains(@title,'Guest')]";
					Wait.WaitForElement(driver, folioSize);
					driver.findElement(By.xpath(folioSize)).click();
				} else {
					folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[1] + " : " + rooomno[1].trim()
							+ "')]";
					reslogger.info(folio);
					if (driver.findElements(By.xpath(folio)).size() > 0) {
						test_steps.add("Folio is present : " + "Guest Folio For " + abbrivation[1] + " : "
								+ rooomno[1].trim());
						reslogger.info("Folio is present : " + "Guest Folio For " + abbrivation[1] + " : "
								+ rooomno[1].trim());
						// folio="Guest Folio For "+abbrivation[1]+" :
						// "+rooomno[1].trim();
						// new
						// Select(driver.findElement(By.xpath(folioSize))).selectByVisibleText(folio);
						driver.findElement(By.xpath(folio)).click();
						String roomCahrge = "//span[text()='Room Charge']";
						if (driver.findElements(By.xpath(roomCahrge)).size() > 0) {
							test_steps.add("Room Charge Line Item  is present : " + "Guest Folio For " + abbrivation[1]
									+ " : " + rooomno[1].trim());
							reslogger.info("Room Charge Line Item  is present : " + "Guest Folio For " + abbrivation[1]
									+ " : " + rooomno[1].trim());
						} else {
							test_steps.add("Room Charge Line Item  is not present : " + "Guest Folio For "
									+ abbrivation[1] + " : " + rooomno[1].trim());
							reslogger.info("Room Charge Line Item  is not present : " + "Guest Folio For "
									+ abbrivation[1] + " : " + rooomno[1].trim());
						}
					} else {
						test_steps.add("Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : "
								+ rooomno[1].trim());
						reslogger.info("Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : "
								+ rooomno[1].trim());
					}
				}
			} else {
				String option = "//option[text()='Guest Folio']";
				if (driver.findElements(By.xpath(option)).size() > 0) {
					test_steps.add("Folio present : Guest Folio");
					reslogger.info("Folio present : Guest Folio");
					folio = "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0];
					String roomCahrge = "//span[text()='Room Charge']";
					if (driver.findElements(By.xpath(roomCahrge)).size() > 0) {
						test_steps.add("Room Charge Line Item  is present : Guest Folio");
						reslogger.info("Room Charge Line Item  is present : Guest Folio");
					} else {
						test_steps.add("Room Charge Line Item  is not present : Guest Folio");
						reslogger.info("Room Charge Line Item  is not present : Guest Folio");
					}
				} else {
					test_steps.add("Guest folio not present");
					reslogger.info("Guest folio not present");
				}
			}
		}
		String folioSize = "//button[contains(@title,'Guest')]";
		Wait.WaitForElement(driver, folioSize);
		driver.findElement(By.xpath(folioSize)).click();
	}

	public void validate_MRBFolio_AfterSplit(WebDriver driver, ArrayList test_steps, ArrayList al)
			throws InterruptedException {
		test_steps.add("******************* MRB Folio verification After Split**********************");
		reslogger.info("******************* MRB Folio verification After Split**********************");
		int count = al.size();
		ArrayList al1;
		Double FilioRoomCharges = (double) 0, FilioIncidentals = (double) 0, FilioTaxes = (double) 0,
				FilioTripTotal = (double) 0, FilioPaid = (double) 0, FilioBalance = (double) 0;
		for (int i = 0; i < count - 1; i++) {

			al1 = (ArrayList) al.get(i);

			FilioRoomCharges = FilioRoomCharges + Double.parseDouble(al1.get(0).toString());
			FilioIncidentals = FilioIncidentals + Double.parseDouble(al1.get(1).toString());
			FilioTaxes = FilioTaxes + Double.parseDouble(al1.get(2).toString());
			FilioTripTotal = FilioTripTotal + Double.parseDouble(al1.get(3).toString());
			FilioPaid = FilioPaid + Double.parseDouble(al1.get(4).toString());
			FilioBalance = FilioBalance + Double.parseDouble(al1.get(5).toString());
		}

		String folio = "(//li//span[contains(text(),'Guest Folio')])";

		count = driver.findElements(By.xpath(folio)).size();

		// ##
		Double FilioRoomChrg = (double) 0, FilioInci = (double) 0, FilioTax = (double) 0, FilioTripTot = (double) 0,
				FilioPad = (double) 0, FilioBal = (double) 0;
		for (int i = 1; i <= count; i++) {
			String folioSize = "//button[contains(@title,'Guest')]";
			Wait.WaitForElement(driver, folioSize);
			driver.findElement(By.xpath(folioSize)).click();
			Wait.wait2Second();

			folio = "(//li//span[contains(text(),'Guest Folio')])[" + (i) + "]";
			driver.findElement(By.xpath(folio)).click();

			FilioRoomChrg = FilioRoomChrg + Double.parseDouble(get_RoomCharge(driver, test_steps));
			FilioInci = FilioInci + Double.parseDouble(get_Inceidentals(driver, test_steps));
			FilioTax = FilioTax + Double.parseDouble(get_Taxes(driver, test_steps));
			FilioTripTot = FilioTripTot + Double.parseDouble(get_TotalCharges(driver, test_steps));
			FilioPad = FilioPad + Double.parseDouble(get_Payments(driver, test_steps));
			FilioBal = FilioBal + Double.parseDouble(get_Balance(driver, test_steps));
		}

		reslogger.info("FilioRoomCharges :" + FilioRoomCharges);
		reslogger.info("FilioIncidentals : " + FilioIncidentals);
		reslogger.info("FilioTaxes : " + FilioTaxes);
		reslogger.info("FilioTripTotal : " + FilioTripTotal);
		reslogger.info("FilioPaid : " + FilioPaid);
		reslogger.info("FilioBalance : " + FilioBalance);
		reslogger.info("FilioRoomChrg : " + FilioRoomChrg);
		reslogger.info("FilioTax : " + FilioTax);
		reslogger.info("FilioInci : " + FilioInci);
		reslogger.info("FilioTripTot : " + FilioTripTot);
		reslogger.info("FilioPad : " + FilioPad);
		reslogger.info("FilioBal : " + FilioBal);

		if (Double.compare(FilioRoomChrg, FilioRoomCharges) == 0) {
			test_steps.add("After Spliting the reservation folio RoomCharges are validated : " + FilioRoomCharges);
			reslogger.info("After Spliting the reservation folio RoomCharges are validated : " + FilioRoomCharges);
		} else {
			test_steps.add("After Spliting the reservation folio RoomCharges are not validated : " + FilioRoomCharges);
			reslogger.info("After Spliting the reservation folio RoomCharges are not validated : " + FilioRoomCharges);
		}

		if (Double.compare(FilioTaxes, FilioTax) == 0) {
			test_steps.add("After Spliting the reservation folio taxes are validated : " + FilioTaxes);
			reslogger.info("After Spliting the reservation folio taxes are validated : " + FilioTaxes);
		} else {
			test_steps.add("After Spliting the reservation folio taxes are not validated : " + FilioTaxes);
			reslogger.info("After Spliting the reservation folio taxes are not validated : " + FilioTaxes);
		}
		if (Double.compare(FilioIncidentals, FilioInci) == 0) {
			test_steps.add("After Spliting the reservation folio Incidental are validated : " + FilioIncidentals);
			reslogger.info("After Spliting the reservation folio Incidental are validated : " + FilioIncidentals);
		} else {
			test_steps.add("After Spliting the reservation folio Incidental are not validated : " + FilioIncidentals);
			reslogger.info("After Spliting the reservation folio Incidental are not validated : " + FilioIncidentals);
		}
		if (Double.compare(FilioTripTotal, FilioTripTot) == 0) {
			test_steps.add("After Spliting the reservation folio TripTotal are validated : " + FilioTripTotal);
			reslogger.info("After Spliting the reservation folio TripTotal are validated : " + FilioTripTotal);
		} else {
			test_steps.add("After Spliting the reservation folio TripTotal are not validated : " + FilioTripTotal);
			reslogger.info("After Spliting the reservation folio TripTotal are not validated : " + FilioTripTotal);
		}
		if (Double.compare(FilioPaid, FilioPad) == 0) {
			test_steps.add("After Spliting the reservation folio Paid are validated : " + FilioPaid);
			reslogger.info("After Spliting the reservation folio Paid are validated : " + FilioPaid);
		} else {
			test_steps.add("After Spliting the reservation folio Paid are not validated : " + FilioPaid);
			reslogger.info("After Spliting the reservation folio Paid are not validated : " + FilioPaid);
		}
		if (Double.compare(FilioBalance, FilioBal) == 0) {
			test_steps.add("After Spliting the reservation folio Balance are validated : " + FilioBalance);
			reslogger.info("After Spliting the reservation folio Balance are validated : " + FilioBalance);
		} else {
			test_steps.add("After Spliting the reservation folio Balance are validated : " + FilioBalance);
			reslogger.info("After Spliting the reservation folio Balance are validated : " + FilioBalance);
		}
	}

	public void velidate_MRB_TripSummaryAfterSplit(WebDriver driver, ArrayList test_steps, ArrayList al,
			String TripSummaryRoomCharges, String TripSummaryTaxes, String TripSummaryIncidentals,
			String TripSummaryTripTotal, String TripSummaryPaid, String TripSummaryBalance) {
		test_steps.add("******************* Validating TripSummary fields after split**********************");
		reslogger.info("******************* Validating TripSummary fields after split**********************");

		TripSummaryRoomCharges = TripSummaryRoomCharges.trim();
		TripSummaryRoomCharges = TripSummaryRoomCharges.substring(1, TripSummaryRoomCharges.length());
		TripSummaryRoomCharges = TripSummaryRoomCharges.trim();
		Double TripSummRoom = Double.parseDouble(TripSummaryRoomCharges);

		TripSummaryTaxes = TripSummaryTaxes.trim();
		TripSummaryTaxes = TripSummaryTaxes.substring(1, TripSummaryTaxes.length());
		TripSummaryTaxes = TripSummaryTaxes.trim();
		Double TripSummTax = Double.parseDouble(TripSummaryTaxes);

		TripSummaryIncidentals = TripSummaryIncidentals.trim();
		TripSummaryIncidentals = TripSummaryIncidentals.substring(1, TripSummaryIncidentals.length());
		TripSummaryIncidentals = TripSummaryIncidentals.trim();
		Double TripSummInci = Double.parseDouble(TripSummaryIncidentals);

		TripSummaryTripTotal = TripSummaryTripTotal.trim();
		TripSummaryTripTotal = TripSummaryTripTotal.substring(1, TripSummaryTripTotal.length());
		TripSummaryTripTotal = TripSummaryTripTotal.trim();
		Double TripSummTot = Double.parseDouble(TripSummaryTripTotal);

		TripSummaryPaid = TripSummaryPaid.trim();
		TripSummaryPaid = TripSummaryPaid.substring(1, TripSummaryPaid.length());
		TripSummaryPaid = TripSummaryPaid.trim();
		Double TripSummPaid = Double.parseDouble(TripSummaryPaid);

		TripSummaryBalance = TripSummaryBalance.trim();
		TripSummaryBalance = TripSummaryBalance.substring(1, TripSummaryBalance.length());
		TripSummaryBalance = TripSummaryBalance.trim();
		Double TripSummBal = Double.parseDouble(TripSummaryBalance);

		int count = al.size();
		ArrayList al1;
		Double FilioRoomCharges = (double) 0, FilioIncidentals = (double) 0, FilioTaxes = (double) 0,
				FilioTripTotal = (double) 0, FilioPaid = (double) 0, FilioBalance = (double) 0;

		for (int i = 0; i < count; i++) {
			if (i == (count - 1)) {
				al1 = (ArrayList) al.get(i);
				FilioRoomCharges = FilioRoomCharges + Double.parseDouble(al1.get(0).toString());
				FilioIncidentals = FilioIncidentals + Double.parseDouble(al1.get(1).toString());
				FilioTaxes = FilioTaxes + Double.parseDouble(al1.get(2).toString());
				FilioTripTotal = FilioTripTotal + Double.parseDouble(al1.get(3).toString());
				FilioPaid = FilioPaid + Double.parseDouble(al1.get(4).toString());
				FilioBalance = FilioBalance + Double.parseDouble(al1.get(5).toString());
			}
		}

		String TripSummaryRoomChrg = get_TripSummaryRoomChargesWithCurrency(driver, test_steps);
		String TripSummaryTax = get_TripSummaryTaxesWithCurrency(driver, test_steps);
		String TripSummaryInci = get_TripSummaryInceidentalsWithCurrency(driver, test_steps);
		String TripSummaryTripTot = get_TripSummaryTripTotalChargesWithCurrency(driver, test_steps);
		String TripSummaryPad = get_TripSummaryPaidWithCurrency(driver, test_steps);
		String TripSummaryBal = get_TripSummaryBalanceWithCurrency(driver, test_steps);

		TripSummaryRoomChrg = TripSummaryRoomChrg.trim();
		TripSummaryRoomChrg = TripSummaryRoomChrg.substring(1, TripSummaryRoomChrg.length());
		TripSummaryRoomChrg = TripSummaryRoomChrg.trim();
		Double TripSummRm = Double.parseDouble(TripSummaryRoomChrg);

		TripSummaryTax = TripSummaryTax.trim();
		TripSummaryTax = TripSummaryTax.substring(1, TripSummaryTax.length());
		TripSummaryTax = TripSummaryTax.trim();
		Double TripSummTx = Double.parseDouble(TripSummaryTax);

		TripSummaryInci = TripSummaryInci.trim();
		TripSummaryInci = TripSummaryInci.substring(1, TripSummaryInci.length());
		TripSummaryInci = TripSummaryInci.trim();
		Double TripSummIncid = Double.parseDouble(TripSummaryInci);

		TripSummaryTripTot = TripSummaryTripTot.trim();
		TripSummaryTripTot = TripSummaryTripTot.substring(1, TripSummaryTripTot.length());
		TripSummaryTripTot = TripSummaryTripTot.trim();
		Double TripSummTota = Double.parseDouble(TripSummaryTripTot);

		TripSummaryPad = TripSummaryPad.trim();
		TripSummaryPad = TripSummaryPad.substring(1, TripSummaryPad.length());
		TripSummaryPad = TripSummaryPad.trim();
		Double TripSummPad = Double.parseDouble(TripSummaryPad);

		TripSummaryBal = TripSummaryBal.trim();
		TripSummaryBal = TripSummaryBal.substring(1, TripSummaryBal.length());
		TripSummaryBal = TripSummaryBal.trim();
		Double TripSummBala = Double.parseDouble(TripSummaryBal);

		/*
		 * reslogger.info("FilioRoomCharges :"+FilioRoomCharges);
		 * reslogger.info("FilioIncidentals : "+FilioIncidentals);
		 * reslogger.info("FilioTaxes : "+FilioTaxes);
		 * reslogger.info("FilioTripTotal : "+FilioTripTotal);
		 * reslogger.info("FilioPaid : "+FilioPaid);
		 * reslogger.info("FilioBalance : "+FilioBalance);
		 * reslogger.info("TripSummRoom : "+TripSummRoom);
		 * reslogger.info("TripSummTax : "+TripSummTax);
		 * reslogger.info("TripSummInci : "+TripSummInci);
		 * reslogger.info("TripSummTot : "+TripSummTot);
		 * reslogger.info("TripSummPaid : "+TripSummPaid);
		 * reslogger.info("TripSummBal : "+TripSummBal);
		 */

		if (Double.compare((TripSummRoom - FilioRoomCharges), TripSummRm) == 0) {
			test_steps.add("TripSummary RoomCharges are verified : " + TripSummRm);
			reslogger.info("TripSummary RoomCharges are verified : " + TripSummRm);
		} else {
			test_steps.add("TripSummary RoomCharges are not verified : " + TripSummRm);
			reslogger.info("TripSummary RoomCharges are not verified : " + TripSummRm);
		}

		if (Double.compare((TripSummTax - FilioTaxes), TripSummTx) == 0) {
			test_steps.add("TripSummaryTaxes are verified : " + TripSummTx);
			reslogger.info("TripSummaryTaxes are verified : " + TripSummTx);
		} else {
			test_steps.add("TripSummaryTaxes are not verified : " + TripSummTx);
			reslogger.info("TripSummaryTaxes are not verified : " + TripSummTx);
		}
		if (Double.compare((TripSummInci - FilioIncidentals), TripSummIncid) == 0) {
			test_steps.add("TripSummary Incidental are verified : " + TripSummIncid);
			reslogger.info("TripSummary Incidental are verified : " + TripSummIncid);
		} else {
			test_steps.add("TripSummary Incidental are not verified : " + TripSummIncid);
			reslogger.info("TripSummary Incidental are not verified : " + TripSummIncid);
		}
		if (Double.compare((TripSummTot - FilioTripTotal), TripSummTota) == 0) {
			test_steps.add("TripSummary TripTotal are verified : " + TripSummTota);
			reslogger.info("TripSummary TripTotal are verified : " + TripSummTota);
		} else {
			test_steps.add("TripSummary TripTotal are not verified : " + TripSummTota);
			reslogger.info("TripSummary TripTotal are not verified : " + TripSummTota);
		}
		if (Double.compare((TripSummPaid - FilioPaid), TripSummPad) == 0) {
			test_steps.add("TripSummary Paid verified : " + TripSummPad);
			reslogger.info("TripSummary Paid verified : " + TripSummPad);
		} else {
			test_steps.add("TripSummary Paid not verified : " + TripSummPad);
			reslogger.info("TripSummary Paid not verified : " + TripSummPad);
		}
		if (Double.compare((TripSummBal - FilioBalance), TripSummBala) == 0) {
			test_steps.add("TripSummary Balance are verified : " + TripSummBala);
			reslogger.info("TripSummary Balance are verified : " + TripSummBala);
		} else {
			test_steps.add("TripSummary Balance are not verified : " + TripSummBala);
			reslogger.info("TripSummary Balance are not verified : " + TripSummBala);
		}
	}

	public void verify_MRB_FolioAfterSplitResSecondRes(WebDriver driver, ArrayList test_steps, ArrayList RoomAbbri,
			String IsAssign, ArrayList Rooms) {
		test_steps.add(
				"******************* MRB Folio Creation verification After Split for second reservation **********************");
		reslogger.info(
				"******************* MRB Folio Creation verification After Split for second reservation **********************");

		String folioSize = "//button[contains(@title,'Guest')]";
		Wait.WaitForElement(driver, folioSize);

		String option = "//li//span[text()='Guest Folio']";
		if (driver.findElements(By.xpath(option)).size() > 0) {
			test_steps.add("Folio present : Guest Folio");
			reslogger.info("Folio present : Guest Folio");

			String roomCahrge = "//span[text()='Room Charge']";
			if (driver.findElements(By.xpath(roomCahrge)).size() > 0) {
				test_steps.add("Room Charge Line Item  is present : Guest Folio");
				reslogger.info("Room Charge Line Item  is present : Guest Folio");
			} else {
				test_steps.add("Room Charge Line Item  is not present : Guest Folio");
				reslogger.info("Room Charge Line Item  is not present : Guest Folio");
			}
		} else {
			test_steps.add("Guest folio not present");
			reslogger.info("Guest folio not present");
		}
	}

	public void verify_SecondaryResFolio(WebDriver driver, ArrayList test_steps, ArrayList al) throws NumberFormatException, InterruptedException {

		test_steps.add(
				"******************* MRB Folio verification After Split for second reservation **********************");
		reslogger.info(
				"******************* MRB Folio verification After Split for second reservation **********************");

		int count = al.size();
		ArrayList al1;
		Double FilioRoomCharges = (double) 0, FilioIncidentals = (double) 0, FilioTaxes = (double) 0,
				FilioTripTotal = (double) 0, FilioPaid = (double) 0, FilioBalance = (double) 0;

		for (int i = 0; i < count; i++) {
			if (i == (count - 1)) {
				reslogger.info(al.get(i));
				al1 = (ArrayList) al.get(i);
				FilioRoomCharges = FilioRoomCharges + Double.parseDouble(al1.get(0).toString());
				FilioIncidentals = FilioIncidentals + Double.parseDouble(al1.get(1).toString());
				FilioTaxes = FilioTaxes + Double.parseDouble(al1.get(2).toString());
				FilioTripTotal = FilioTripTotal + Double.parseDouble(al1.get(3).toString());
				FilioPaid = FilioPaid + Double.parseDouble(al1.get(4).toString());
				FilioBalance = FilioBalance + Double.parseDouble(al1.get(5).toString());
			}
		}

		Double FilioRoomChrg = Double.parseDouble(get_RoomCharge(driver, test_steps));
		Double FilioInci = Double.parseDouble(get_Inceidentals(driver, test_steps));
		Double FilioTax = Double.parseDouble(get_Taxes(driver, test_steps));
		Double FilioTripTot = Double.parseDouble(get_TotalCharges(driver, test_steps));
		Double FilioPad = Double.parseDouble(get_Payments(driver, test_steps));
		Double FilioBal = Double.parseDouble(get_Balance(driver, test_steps));

		if (Double.compare(FilioRoomChrg, FilioRoomCharges) == 0) {
			test_steps.add(
					"After Spliting the secondary reservation folio RoomCharges are validated : " + FilioRoomCharges);
			reslogger.info(
					"After Spliting the secondary reservation folio RoomCharges are validated : " + FilioRoomCharges);
		} else {
			test_steps.add("After Spliting the secondary reservation folio RoomCharges are not validated : "
					+ FilioRoomCharges);
			reslogger.info("After Spliting the secondary reservation folio RoomCharges are not validated : "
					+ FilioRoomCharges);
		}

		if (Double.compare(FilioTaxes, FilioTax) == 0) {
			test_steps.add("After Spliting the secondary reservation folio taxes are validated : " + FilioTaxes);
			reslogger.info("After Spliting the secondary reservation folio taxes are validated : " + FilioTaxes);
		} else {
			test_steps.add("After Spliting the secondary reservation folio taxes are not validated : " + FilioTaxes);
			reslogger.info("After Spliting the secondary reservation folio taxes are not validated : " + FilioTaxes);
		}
		if (Double.compare(FilioIncidentals, FilioInci) == 0) {
			test_steps.add(
					"After Spliting the secondary reservation folio Incidental are validated : " + FilioIncidentals);
			reslogger.info(
					"After Spliting the secondary reservation folio Incidental are validated : " + FilioIncidentals);
		} else {
			test_steps.add("After Spliting the secondary reservation folio Incidental are not validated : "
					+ FilioIncidentals);
			reslogger.info("After Spliting the secondary reservation folio Incidental are not validated : "
					+ FilioIncidentals);
		}
		if (Double.compare(FilioTripTotal, FilioTripTot) == 0) {
			test_steps
					.add("After Spliting the secondary reservation folio TripTotal are validated : " + FilioTripTotal);
			reslogger
					.info("After Spliting the secondary reservation folio TripTotal are validated : " + FilioTripTotal);
		} else {
			test_steps.add(
					"After Spliting the secondary reservation folio TripTotal are not validated : " + FilioTripTotal);
			reslogger.info(
					"After Spliting the secondary reservation folio TripTotal are not validated : " + FilioTripTotal);
		}
		if (Double.compare(FilioPaid, FilioPad) == 0) {
			test_steps.add("After Spliting the secondary reservation folio Paid are validated : " + FilioPaid);
			reslogger.info("After Spliting the secondary reservation folio Paid are validated : " + FilioPaid);
		} else {
			test_steps.add("After Spliting the secondary reservation folio Paid are not validated : " + FilioPaid);
			reslogger.info("After Spliting the secondary reservation folio Paid are not validated : " + FilioPaid);
		}
		if (Double.compare(FilioBalance, FilioBal) == 0) {
			test_steps.add("After Spliting the secondary reservation folio Balance are validated : " + FilioBalance);
			reslogger.info("After Spliting the secondary reservation folio Balance are validated : " + FilioBalance);
		} else {
			test_steps.add("After Spliting the secondary reservation folio Balance are validated : " + FilioBalance);
			reslogger.info("After Spliting the secondary reservation folio Balance are validated : " + FilioBalance);
		}
	}

	public void veerify_SplitResFromExistringresInHistory(WebDriver driver, ArrayList test_steps, String reservation) {
		String res = "//span[contains(text(),'Split a room from existing reservation with Confirmation Number: "
				+ reservation.trim() + "')]";
		if (driver.findElement(By.xpath(res)).isDisplayed()) {
			test_steps.add("Split a room from existing reservation with Confirmation Number: " + reservation.trim()
					+ "')] verified in History tab : " + reservation);
			reslogger.info("Split a room from existing reservation with Confirmation Number: " + reservation.trim()
					+ "')] verified in History tab : " + reservation);
		} else {
			test_steps.add("Split a room from existing reservation with Confirmation Number: " + reservation.trim()
					+ "')] not found in History tab : " + reservation);
			reslogger.info("Split a room from existing reservation with Confirmation Number: " + reservation.trim()
					+ "')] not found in History tab : " + reservation);
		}
	}

	public void verify_RoomNumberForSecondaryRes(WebDriver driver, ArrayList test_steps, ArrayList Rooms,
			String roomNumber) {

		test_steps.add("******************* Secondary reservation room number verification **********************");
		reslogger.info("******************* Secondary reservation room number verification **********************");
		int count = Rooms.size();
		String room = (String) Rooms.get(count - 1);

		String[] st = room.split(":");
		room = st[1];
		room = room.trim();
		reslogger.info(room);
		reslogger.info(roomNumber);
		if (room.equalsIgnoreCase(roomNumber)) {
			test_steps.add("Room number is verified for secondary reservation : " + room);
			reslogger.info("Room number is verified for secondary reservation : " + room);
		} else {
			test_steps.add("Room number is not verified for secondary reservation : " + room);
			reslogger.info("Room number is not verified for secondary reservation : " + room);
		}
	}

	public void change_ReservationStatus(WebDriver driver, ArrayList test_steps, String ResStatus)
			throws InterruptedException {

		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			JavascriptExecutor jse = (JavascriptExecutor) driver;

			String expand = "//div[@class='ng-statusChnage ir-statusMenu ul']//span";
			Wait.WaitForElement(driver, expand);
			WebElement expandElement = driver.findElement(By.xpath(expand));
			Wait.explicit_wait_elementToBeClickable(expandElement, driver);
			expandElement.click();
			String status = "//div[@class='ng-statusChnage ir-statusMenu ul']//span//ul//span[text()='" + ResStatus
					+ "']";
			Wait.WaitForElement(driver, status);
			driver.findElement(By.xpath(status)).click();
			test_steps.add("Reservation status changes to : " + ResStatus);
			reslogger.info("Reservation status changes to : " + ResStatus);
			if (ResStatus.equals("Cancel")) {
				Utility.app_logs.info("ResStatus: " + ResStatus);
				Wait.WaitForElement(driver, OR_Reservation.CancelReservation_Reason);
				Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CancelReservation_Reason), driver);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelReservation_Reason), driver);
				res.CancelReservation_Reason.sendKeys(ResStatus);
				test_steps.add("Cancel Reason : " + ResStatus);
				reslogger.info("Cancel Reason: " + ResStatus);
				Wait.WaitForElement(driver, OR_Reservation.CancelReservation_CofirmCancellation);
                Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CancelReservation_CofirmCancellation), driver);
                Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelReservation_CofirmCancellation), driver);
				Utility.ScrollToElement(res.CancelReservation_CofirmCancellation, driver);
				res.CancelReservation_CofirmCancellation.click();
				test_steps.add("Confirm Cancel Button Clicked");
				reslogger.info("Confirm Cancel Button Clicked");
			}
			String loading = "(//div[@class='ir-loader-in'])";
			int count = 0;
			while (true) {
				if (driver.findElements(By.xpath(loading)).size() > 4) {
					break;
				} else if (count == 20) {
					break;
				} else {
					count++;
					Wait.wait2Second();

				}
				reslogger.info("Waited to loading symbol");
			}
		} catch (Exception e) {
			reslogger.info(e);
		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickCheckInAllButton ' Description: Click on Check In All
	 * Button ' Input parameters: String ' Created By: Gangotri ' Created On:
	 * June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void clickCheckInAllButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckInAllButton);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_CheckInAllButton, driver);
		Utility.ScrollToElement(res.CP_Reservation_CheckInAllButton, driver);
		res.CP_Reservation_CheckInAllButton.click();
		test_steps.add("Click Check In All Button");
		reslogger.info("Click Check In All Button");

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickCheckInButton ' Description: Click on Check In Button
	 * ' Input parameters: String ' Created By: Gangotri ' Created On: June 3
	 * 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void clickCheckInButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckInButton);
		Utility.ScrollToElement(res.CP_Reservation_CheckInButton, driver);
		res.CP_Reservation_CheckInButton.click();
		test_steps.add("Click Check In  Button");
		reslogger.info("Click Check In  Button");
        verifySpinerLoading(driver);
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickCheckOutAllButton ' Description: Click on Check Out
	 * All Button ' Input parameters: String ' Created By: Gangotri ' Created
	 * On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void clickCheckOutAllButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_ReservationStatusCheckOutAllButton);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ReservationStatusCheckOutAllButton, driver);
		Utility.ScrollToElement(res.CP_Reservation_ReservationStatusCheckOutAllButton, driver);
		res.CP_Reservation_ReservationStatusCheckOutAllButton.click();
		test_steps.add("Click Check Out All  Button");
		reslogger.info("Click Check Out All Button");

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickCheckOutButton ' Description: Click on Check Out
	 * Button ' Input parameters: String ' Created By: Gangotri ' Created On:
	 * June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void clickCheckOutButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ReservationStatusCheckOutButton, driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_Reservation_ReservationStatusCheckOutButton), driver);
        Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_Reservation_ReservationStatusCheckOutButton), driver);
		Utility.ScrollToElement(res.CP_Reservation_ReservationStatusCheckOutButton, driver);
		res.CP_Reservation_ReservationStatusCheckOutButton.click();
		test_steps.add("Click Check Out  Button");
		reslogger.info("Click Check Out  Button");

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyCheckINStayInfo ' Description: Verify Stay Info
	 * details on CheckIn Window ' Input parameters: String ' Created By:
	 * Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void verifyCheckINStayInfo(WebDriver driver, ArrayList test_steps, String CheckInDate, String CheckOutDate,
			String Adults, String Children, String RoomClass, List<String> RoomCharges, String Salutation,
			String GuestName, String LastName, String RatePlan) throws Exception {

		List<String> checkInDate = Arrays.asList(CheckInDate.split("\\|"));
		List<String> checkOutDate = Arrays.asList(CheckOutDate.split("\\|"));
		List<String> adults = Arrays.asList(Adults.split("\\|"));
		List<String> children = Arrays.asList(Children.split("\\|"));
		List<String> roomClass = Arrays.asList(RoomClass.split("\\|"));
		List<String> salutation = Arrays.asList(Salutation.split("\\|"));
		List<String> guestFName = Arrays.asList(GuestName.split("\\|"));
		List<String> guestLName = Arrays.asList(LastName.split("\\|"));
		List<String> ratePlan = Arrays.asList(RatePlan.split("\\|"));
		String[] checkIn, checkInSplit;
		String checkInMonth = "";
		SimpleDateFormat simpleDateformat;
		Date now;
		int Nights = 0;
		for (int i = 0; i < checkInDate.size(); i++) {
			SimpleDateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");
			Date dateObj1 = format1.parse(CheckInDate);
			Date dateObj2 = format1.parse(CheckOutDate);
			long diff = dateObj2.getTime() - dateObj1.getTime();
			Nights = (int) (diff / (24 * 60 * 60 * 1000));
			reslogger.info("difference between days: " + Nights);
			checkIn = checkInDate.get(i).split("/");
			if (checkIn[0].charAt(0) == '0') {
				checkIn[0] = checkIn[0].replace("" + checkIn[0].charAt(0), "");
			}
			checkInMonth = Utility.get_Month(checkInDate.get(i));
			String checkInDays = checkInMonth + " " + checkIn[0] + ", " + checkIn[2];
			String checkInDay = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='checkin']/span[text()='"
					+ checkInDays + "']";
			if (driver.findElement(By.xpath(checkInDay)).isDisplayed()) {
				test_steps.add("Stay Info checkin date verified : <b>" + checkInDays + "</b>");
				reslogger.info("Stay Info checkin date verified : " + checkInDays);
			} else {
				test_steps.add("Stay Info checkin date not found : <b>" + checkInDays + "</b>");
				reslogger.info("Stay Info checkin date not found : " + checkInDays);
			}
			now = new Date(checkIn[1] + "/" + checkIn[0] + "/" + checkIn[2]);
			simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the day of
																	// the week
																	// abbreviated
			simpleDateformat = new SimpleDateFormat("EEEE"); // the day of the
			String dayofCheckIn = simpleDateformat.format(now); // week spelled

			String chckInday = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='checkin']//span[text()='"
					+ dayofCheckIn.trim() + "']";
			if (driver.findElement(By.xpath(chckInday)).isDisplayed()) {
				test_steps.add(" Stay Info checkin day verified : <b>" + dayofCheckIn + "</b>");
				reslogger.info(" Stay Info checkin day verified : " + dayofCheckIn);
			} else {
				test_steps.add(" Stay Info checkin day not found : <b>" + dayofCheckIn + "</b>");
				reslogger.info(" Stay Info checkin day not found : " + dayofCheckIn);
			}

		}

		for (int i = 0; i < checkOutDate.size(); i++) {
			String[] checkOut = checkOutDate.get(i).split("/");

			if (checkOut[0].charAt(0) == '0') {
				checkOut[0] = checkOut[0].replace("" + checkOut[0].charAt(0), "");
			}
			String checkOutMonth = Utility.get_Month(checkOutDate.get(i));
			String[] checkOutSplit = checkOut[2].split("\\|");
			String checkOutDays = checkOutMonth + " " + checkOut[0] + ", " + checkOut[2];
			String checkoutDay = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='checkout']/span[text()='"
					+ checkOutDays + "']";
			if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
				test_steps.add(" Stay Info checkout date verified : <b>" + checkOutDays + "</b>");
				reslogger.info(" Stay Info checkout date verified : " + checkOutDays);
			} else {
				test_steps.add(" Stay Info checkout date not found : <b>" + checkOutDays + "</b>");
				reslogger.info(" Stay Info checkout date not found : " + checkOutDays);
			}

			now = new Date(checkOut[1] + "/" + checkOut[0] + "/" + checkOut[2]);
			simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the day of
																	// the week
																	// abbreviated
			simpleDateformat = new SimpleDateFormat("EEEE"); // the day of the
																// week spelled
																// out
																// completely
			String dayofCheckOut = simpleDateformat.format(now);
			String chkOutDay = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='checkout']//span[text()='"
					+ dayofCheckOut.trim() + "']";
			if (driver.findElement(By.xpath(chkOutDay)).isDisplayed()) {
				test_steps.add(" Stay Info checkout day verified : <b>" + dayofCheckOut + "</b>");
				reslogger.info("Stay Info checkout day verified : " + dayofCheckOut);
			} else {
				test_steps.add(" Stay Info checkout day not found : <b>" + dayofCheckOut + "</b>");
				reslogger.info(" Stay Info checkout day not found : " + dayofCheckOut);
			}

			String nights = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='noofnights']/span[text()='"
					+ Nights + "N']";
			if (driver.findElement(By.xpath(nights)).isDisplayed()) {
				test_steps.add(" Stay Info Nights verified : <b>" + Nights + "N</b>");
				reslogger.info(" Stay Info Nights verified : " + Nights + "N");
			} else {
				test_steps.add(" Stay Info Nights not found : <b>" + Nights + "N</b>");
				reslogger.info(" Stay Info Nights not found : " + Nights + "N");
			}
		}

		for (int i = 0; i < adults.size(); i++) {
			String adult = "//div[contains(@class,'ir-checkin-stay-info')]/..//div//span[contains(@data-bind,'numberOfAdults')]";
			adult = driver.findElement(By.xpath(adult)).getText().trim();
			if (adult.equals(adults.get(i).trim())) {
				test_steps.add(" Stay Info Adults verified : <b>" + adults.get(i) + "</b>");
				reslogger.info(" Stay Info Adults verified : " + adults.get(i));
			} else {
				test_steps.add(" Stay Info Adults not found : <b>" + adults.get(i) + "</b>");
				reslogger.info(" Stay Info Adults not found : " + adults.get(i));
			}

		}
		for (int i = 0; i < children.size(); i++) {
			String childrens = "//div[contains(@class,'ir-guestInfo')]/div/span//span[contains(@data-bind,'text: $data.numberOfChildren')]";
			List<WebElement> childrensList = driver.findElements(By.xpath(childrens));
			if (childrensList.get(i).getText().trim().contains(children.get(i))) {
				test_steps.add(" Stay Info Children verified : <b>" + children.get(i) + "</b>");
				reslogger.info(" Stay Info Children verified : " + children.get(i));
			} else {
				test_steps.add(" Stay Info Children not found : <b>" + children.get(i) + "</b>");
				reslogger.info(" Stay Info Children not found : " + children.get(i));
			}
		}

		for (int i = 0; i < roomClass.size(); i++) {
			String roomClasss1 = "//div[contains(@class,'ir-checkin-stay-info')]/..//div//label[contains(@data-bind,'roomClassName')]";
			List<WebElement> roomClasss = driver.findElements(By.xpath(roomClasss1));
			if (roomClasss.get(i).getText().trim().equals((roomClass.get(i) + ":").trim())) {
				test_steps.add(" Stay Info RoomClass verified : <b>" + roomClass.get(i) + "</b>");
				reslogger.info(" Stay Info RoomClass verified : " + roomClass.get(i));
			} else {
				test_steps.add(" Stay Info RoomClass not found : <b>" + roomClass.get(i) + "</b>");
				reslogger.info(" Stay Info RoomClass not found : " + roomClass.get(i));
			}
		}

		for (int i = 0; i < salutation.size(); i++) {
			String guestName = "//div[contains(@class,'ir-checkin-stay-info')]/..//span[contains(@data-bind,'guestNameInSync')][contains(text(),'"
					+ salutation.get(i) + " " + guestFName.get(i) + " " + guestLName.get(i) + "')]";
			WebElement element = driver.findElement(By.xpath(guestName));

			if (element.isDisplayed()) {
				test_steps.add(" Stay Info Guest Name verified : <b>" + salutation.get(i) + " " + guestFName.get(i)
						+ " " + guestLName.get(i) + "</b>");
				reslogger.info(" Stay Info Guest Name verified : " + salutation.get(i) + " " + guestFName.get(i) + " "
						+ guestLName.get(i));
			} else {
				test_steps.add(" Stay Info Guest Name not found : <b>" + salutation.get(i) + " " + guestFName.get(i)
						+ " " + guestLName.get(i) + "</b>");
				reslogger.info(" Stay Info Guest Name not found : " + salutation.get(i) + " " + guestFName.get(i) + " "
						+ guestLName.get(i));
			}
		}

		for (int i = 0; i < ratePlan.size(); i++) {
			String ratePlans1 = "//div[contains(@class,'ir-checkin-stay-info')]/..//span[contains(@data-bind,'ratePlanName')]";
			List<WebElement> ratePlans = driver.findElements(By.xpath(ratePlans1));
			if (ratePlans.get(i).getText().trim().equals(ratePlan.get(i).trim())) {
				test_steps.add(" Stay Info RatePlan verified :<b> " + ratePlan.get(i) + "</b>");
				reslogger.info(" Stay Info RatePlan verified : " + ratePlan.get(i));
			} else {
				test_steps.add(" Stay Info RatePlan not found : <b>" + ratePlan.get(i) + "</b>");
				reslogger.info(" Stay Info RatePlan not found : " + ratePlan.get(i));
			}
		}

		String roomCharge1 = "//div[contains(@class,'ir-checkin-stay-info')]/..//div//label[contains(@data-bind,'roomTotal ')]";
		List<WebElement> roomCharge = driver.findElements(By.xpath(roomCharge1));

		for (int i = 0; i < roomCharge.size(); i++) {
			if (roomCharge.get(i).getText().trim().equalsIgnoreCase(RoomCharges.get(i).trim())) {
				test_steps.add(" Stay Info RoomCharges verified : <b>" + RoomCharges.get(i).trim() + "</b>");
				reslogger.info(" Stay Info RoomCharges verified : " + RoomCharges.get(i).trim());
			} else {
				test_steps.add(" Stay Info RoomCharges not found : <b>" + RoomCharges.get(i).trim() + "</b>");
				reslogger.info(" Stay Info RoomCharges not found : " + RoomCharges.get(i).trim());
			}

		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyGuestContactInfo ' Description: Verify Guest Contact
	 * Infor on Check In Window ' Input parameters: String ' Created By:
	 * Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void verifyGuestContactInfo(WebDriver driver, ArrayList test_steps, String Salutation, String GuestName,
			String LastName, String Email, String Phone) {
		WebElement element;

		List<String> salutation = Arrays.asList(Salutation.split("\\|"));
		List<String> guestFName = Arrays.asList(GuestName.split("\\|"));
		List<String> guestLName = Arrays.asList(LastName.split("\\|"));
		List<String> email = Arrays.asList(Email.split("\\|"));
		List<String> phone = Arrays.asList(Phone.split("\\|"));
		for (int i = 0; i < salutation.size(); i++) {
			String test = salutation.get(i).toString().trim();
			String guestName = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'irFormattedProfileName')][contains(text(),'"
					+ salutation.get(i) + " " + guestFName.get(i) + "')]";
			element = driver.findElement(By.xpath(guestName));
			if (element.isDisplayed()) {
				test_steps.add(" Stay Info Primary Guest Name verified : <b>" + salutation.get(i) + " "
						+ guestFName.get(i) + "</b>");
				reslogger.info(
						" Stay Info Primary Guest Name verified : " + salutation.get(i) + " " + guestFName.get(i));
			} else {
				test_steps.add(" Stay Info Primary Guest Name not found : <b>" + salutation.get(i) + " "
						+ guestFName.get(i) + "</b>");
				reslogger.info(
						" Stay Info Primary Guest Name not found : " + salutation.get(i) + " " + guestFName.get(i));
			}
		}

		for (int i = 0; i < guestLName.size(); i++) {
			String lastName = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'LastName')][contains(text(),'"
					+ guestLName.get(i) + "')]";
			element = driver.findElement(By.xpath(lastName));
			if (element.isDisplayed()) {
				test_steps.add(" Stay Info Last Name verified : <b>" + guestLName.get(i) + "</b>");
				reslogger.info(" Stay Info Last Name verified : " + guestLName.get(i));
			} else {
				test_steps.add(" Stay Info Last Name not found : <b>" + guestLName.get(i) + "</b>");
				reslogger.info(" Stay Info Last Name not found : " + guestLName.get(i));
			}
		}
		for (int i = 0; i < email.size(); i++) {
			String emails = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'EmailAddress')][contains(text(),'"
					+ email.get(i) + "')]";
			element = driver.findElement(By.xpath(emails));
			if (element.isDisplayed()) {
				test_steps.add(" Stay Info Email verified : <b>" + email.get(i) + "</b>");
				reslogger.info(" Stay Info Email verified : " + email.get(i));
			} else {
				test_steps.add(" Stay Info Email not found : <b>" + email.get(i) + "</b>");
				reslogger.info(" Stay Info Email not found : " + email.get(i));
			}

		}

		for (int i = 0; i < phone.size(); i++) {
			if (i == 0) {
				String extension = "1-(";
				String firstPhone = phone.get(i).substring(0, 3);
				String phoneBracket = firstPhone + ") ";
				String secondPhone = Phone.substring(3, 6);
				String lastPhone = Phone.substring(6, 10);
				String finalPhone = extension + phoneBracket + secondPhone + "-" + lastPhone;
				String phones = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'irFormattedPhoneNumber')][contains(text(),'"
						+ finalPhone + "')]";
				element = driver.findElement(By.xpath(phones));
				if (element.isDisplayed()) {
					test_steps.add(" Stay Info Phone verified : <b>" + finalPhone + "</b>");
					reslogger.info(" Stay Info Phone verified : " + finalPhone);
				} else {
					test_steps.add(" Stay Info Phone not found : <b>" + finalPhone + "</b>");
					reslogger.info(" Stay Info Phone not found : " + finalPhone);
				}
			} else {
				String phones = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'irFormattedPhoneNumber')][contains(text(),'"
						+ phone.get(i) + "')]";
				element = driver.findElement(By.xpath(phones));
				if (element.isDisplayed()) {
					test_steps.add(" Stay Info Phone verified : <b>" + phone.get(i) + "</b>");
					reslogger.info(" Stay Info Phone verified : " + phone.get(i));
				} else {
					test_steps.add(" Stay Info Phone not found : <b>" + phone.get(i) + "</b>");
					reslogger.info(" Stay Info Phone not found : " + phone.get(i));
				}
			}

		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyGenerateGuestReportToggle ' Description: Verify
	 * Generate Guest Registration Toggle in CheckIn Window and Checkot Window '
	 * Input parameters: String ' Created By: Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void verifyGenerateGuestReportToggle(WebDriver driver, ArrayList test_steps, boolean isFlagSetting)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait5Second();

		if (isFlagSetting) {
			boolean isExist = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggleOff));

			assertEquals(isExist, false, "Failed: to Verify Toggle");
			test_steps.add("Generate Guest Registration Toggle On");

			reslogger.info("Generate Guest Registration Toggle On");
		} else if (!isFlagSetting) {
			assertTrue(res.CP_Reservation_CheckIn_GuestRegistrationReportToggleOff.isEnabled(),
					"Failed: to Verify Toggle");
			test_steps.add("Generate Guest Registration Toggle Off");
			reslogger.info("Generate Guest Registration Toggle Off");

		}
	}

	public void cancelReservation(WebDriver driver, ArrayList test_steps) {
		String expand = "//div[@class='ng-statusChnage ir-statusMenu ul']//span[@class='dropdown dropdown-toggle ir-dropdown-span-status']";
		Wait.waitForElementToBeClickable(By.xpath(expand), driver);
		driver.findElement(By.xpath(expand)).click();
		String status = "//div[@class='ng-statusChnage ir-statusMenu ul']//span//ul//span[text()='Cancel']";
		Wait.waitForElementToBeClickable(By.xpath(status), driver);
		driver.findElement(By.xpath(status)).click();
		test_steps.add("Clicking on cancel reservation button");
		reslogger.info("Clicking on cancel reservation button");
	}

	public void disableGenerateGuestReportToggle(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggle),
				driver);
		res.CP_Reservation_CheckIn_GuestRegistrationReportToggle.click();
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggleOff);
		// test_steps.add("Enabled Generate Guest Registration Toggle");
		// reslogger.info("Enabled Generate Guest Registration Toggle");
		Wait.waitForElementToBeClickable(
				By.xpath(OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggleOff), driver);
	}

	public boolean generatGuestReportToggle(WebDriver driver, ArrayList test_steps, String IsGuesRegistration)
			throws InterruptedException {
		boolean GenerateGuestStatementStatus = false;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggle);
		boolean isExist = Utility.isElementPresent(driver,
				By.xpath(OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggleOff));
		if (IsGuesRegistration.contentEquals("Yes")) {
			if (isExist) {
				GenerateGuestStatementStatus = true;
				disableGenerateGuestReportToggle(driver, test_steps);
			} else {
				GenerateGuestStatementStatus = true;
				test_steps.add("Enabled Generate Guest Registration Toggle");
				reslogger.info("Enabled Generate Guest Registration Toggle");
			}
		} else if (IsGuesRegistration.contentEquals("No")) {
			if (isExist) {
				GenerateGuestStatementStatus = false;
				test_steps.add("Disabled Generate Guest Registration Toggle");
				reslogger.info("Disabled Generate Guest Registration Toggle");
			} else {
				GenerateGuestStatementStatus = false;
				disableGenerateGuestReportToggle(driver, test_steps);
			}
		}
		return GenerateGuestStatementStatus;

	}

	public boolean isRoomReserved = false;

	private void CheckINScreenRoomOccupiedWithOtherReservation(WebDriver driver, boolean isRoomBooked)
			throws InterruptedException {
		int count = 0;
		List<String> OccupiedRooms = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'occupying room')]";
		isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
		while (isRoomBooked) {
			reslogger.info("Occupied: " + path);

			isRoomReserved = true;
			WebElement element = driver.findElement(By.xpath(path));
			String textIs = element.getText();
			reslogger.info("<br>" + textIs);
			String[] nag = textIs.split("is occupying room ");
			List<String> roomNos = new ArrayList<String>();
			for (int i = 0; i < nag.length; i++) {
				if (!(i == 0) && !(i == (nag.length - 1))) {
					roomNos.add(nag[i].split("Reservation")[0].trim());
				}

				if ((i == nag.length - 1)) {
					roomNos.add(nag[i].split("Please")[0].trim());
				}

			}

			reslogger.info(roomNos);
			Utility.ScrollToElement(element, driver);

			res.CP_Reservation_CheckInOkButton.click();
			reslogger.info("Click Confirm CheckIn Button");
			String DropDownBoxPath = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//button[@title='"
					+ roomNos.get(count).toString() + "']";
			Wait.WaitForElement(driver, DropDownBoxPath);
			WebElement dropdownElement = driver.findElement(By.xpath(DropDownBoxPath));
			Utility.ScrollToElement(dropdownElement, driver);
			dropdownElement.click();
			reslogger.info("Click Drop Down Box");
			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckDropDownOpenRooms);
			Utility.ScrollToElement(res.CP_Reservation_CheckDropDownOpenRooms.get(0), driver);

			int count1 = res.CP_Reservation_CheckDropDownOpenRooms.size();
			reslogger.info("Count is: " + count1);
			Random random = new Random();
			randomNumber = random.nextInt(count1 - 1) + 1;
			reslogger.info("count : " + count1);
			reslogger.info("randomNumber : " + randomNumber);
			String roomNumber = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li["
					+ randomNumber + "]/a/span";
			reslogger.info(roomNumber);
			Wait.waitUntilPresenceOfElementLocated(roomNumber, driver);
			Utility.ScrollToElement(driver.findElement(By.xpath(roomNumber)), driver);
			driver.findElement(By.xpath(roomNumber)).click();
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			reslogger.info("Click Confirm CheckIn Button");
			isRoomBooked = Utility.isElementDisplayed(driver, By.xpath(path));
			boolean isRoomDirty = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckIn_ModelPopMsg));

			if (!isRoomBooked) {
				reslogger.info("Occuied Again");
				break;
			} else if (isRoomDirty) {
				ClickConfirmButtonOfDirtyPopupModel(driver, test_steps, isRoomDirty);
			}

		}

	}

	public boolean isRoomUnAssigned = false;

	private void CheckINScreenRoomUnAssigned(WebDriver driver, boolean isExist) throws InterruptedException {
		int count = 0;

		List<String> OccupiedRooms = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);

		while (isExist) {
			isRoomUnAssigned = true;
			Wait.wait5Second();
			Utility.ScrollToElement(res.CP_Reservation_CheckINUassigned.get(count), driver);
			res.CP_Reservation_CheckINUassigned.get(count).click();
			reslogger.info("Click UnAssigned Drop Down Box");
			String path = "//ir-stay-info-checkin//div[contains(@class,'dropdown-menu open')]//ul/li[@class='selected']/following-sibling::li/a/span[@class='text']";
			List<WebElement> ele = driver.findElements(By.xpath(path));
			int count1 = ele.size();
			reslogger.info("Count is: " + count1);
			Random random = new Random();
			randomNumber = random.nextInt(count1 - 1) + 1;
			reslogger.info("count : " + count1);
			reslogger.info("randomNumber : " + randomNumber);
			String roomNumber = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li["
					+ randomNumber + "]/a/span";
			Wait.WaitForElement(driver, roomNumber);
			Utility.ScrollToElement(driver.findElement(By.xpath(roomNumber)), driver);
			driver.findElement(By.xpath(roomNumber)).click();
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			reslogger.info("Click Confirm CheckIn Button");
			isExist = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
			reslogger.info("UnAssigned Exist or Not: " + isExist);
			boolean isRoomDirty = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckIn_ModelPopMsg));

			if (!isExist) {
				break;
			} else if (isRoomDirty) {
				ClickConfirmButtonOfDirtyPopupModel(driver, test_steps, isRoomDirty);
			}
		}
		int count2 = 0;
		String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'occupying room')]";
		Wait.wait5Second();
		boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));

		while (isRoomBooked) {
			reslogger.info("Occupied: " + path);
			WebElement element = driver.findElement(By.xpath(path));
			String textIs = element.getText();
			reslogger.info(textIs);
			String[] nag = textIs.split("is occupying room ");
			List<String> roomNos = new ArrayList<String>();
			for (int i = 0; i < nag.length; i++) {
				if (!(i == 0) && !(i == (nag.length - 1))) {
					roomNos.add(nag[i].split("Reservation")[0].trim());
				}

				if ((i == nag.length - 1)) {
					roomNos.add(nag[i].split("Please")[0].trim());
				}

			}

			reslogger.info(roomNos);
			Utility.ScrollToElement(element, driver);
			res.CP_Reservation_CheckInOkButton.click();
			String DropDownBoxPath = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//button[@title='"
					+ roomNos.get(count2).toString() + "']";
			Wait.WaitForElement(driver, DropDownBoxPath);
			WebElement dropdownElement = driver.findElement(By.xpath(DropDownBoxPath));
			Utility.ScrollToElement(dropdownElement, driver);
			dropdownElement.click();
			reslogger.info("Room is Dirty");
			int count1 = res.CP_Reservation_CheckDropDownOpenRooms.size();
			reslogger.info("Count is: " + count1);
			Random random = new Random();
			randomNumber = random.nextInt(count1 - 1) + 1;
			reslogger.info("count : " + count1);
			reslogger.info("randomNumber : " + randomNumber);
			String roomNumber = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li["
					+ randomNumber + "]/a/span";
			Wait.WaitForElement(driver, roomNumber);
			Utility.ScrollToElement(driver.findElement(By.xpath(roomNumber)), driver);
			driver.findElement(By.xpath(roomNumber)).click();
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			/*
			 * isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
			 */
			isRoomBooked = Utility.isElementDisplayed(driver, By.xpath(path));
			reslogger.info("Room is Again Dirty or Not: " + isRoomBooked);
			boolean isRoomDirty = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckIn_ModelPopMsg));

			if (!isRoomBooked) {

				break;
			} else if (isRoomDirty) {
				ClickConfirmButtonOfDirtyPopupModel(driver, test_steps, isRoomDirty);
			}
		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickOnProceedToCheckInPaymentButton ' Description:
	 * Clicking on Proceed to Check-In Payment Button ' Input parameters: String
	 * ' Created By: Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void clickOnProceedToCheckInPaymentButton(WebDriver driver, ArrayList<String> test_steps) throws Exception {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_ConfirmCheckInPayment_Button);
		Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckInPayment_Button, driver);
		res.CP_Reservation_ConfirmCheckInPayment_Button.click();
		test_steps.add("Clicking on  Proceed to Check-In Payment Button");
		reslogger.info("Clicking on Proceed to Check-In Payment Button");

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: completeCheckInProcess ' Description: Complete Check In
	 * Process, Covered Dirty message , Unassigned and Room Reserved with
	 * another reservation ' Input parameters: String ' Created By: Gangotri '
	 * Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	// public boolean isCheckOutAllPresent = false
	public boolean isRoomDirty = false, confirmCheckIn = false, confirmCheckInWithPayment = false;

	public String completeCheckInProcess(WebDriver driver, ArrayList test_steps) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		String buttonName = null;
		if (res.CP_Reservation_ConfirmCheckIn_Button.isEnabled()) {
			confirmCheckIn = true;
			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckIn_Button, driver);
			buttonName = res.CP_Reservation_ConfirmCheckIn_Button.getText();
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			test_steps.add("Clicking on  Confirm Check-In Button");
			reslogger.info("Clicking on Confirm  Check-In Button");
			boolean isUnassigned = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
			reslogger.info("IsUnassigned:" + isUnassigned);
			String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'occupying room')]";
			boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
			reslogger.info("isRoomBooked:" + isRoomBooked);
			if (isUnassigned) {
				CheckINScreenRoomUnAssigned(driver, isUnassigned);

			}

			if (isRoomBooked) {
				CheckINScreenRoomOccupiedWithOtherReservation(driver, isRoomBooked);

			}
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);

			isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.CP_Reservation_CheckIn_ModelPopMsg));
			reslogger.info("isRoomDirty:" + isRoomDirty);

			if (isRoomDirty) {
				ClickConfirmButtonOfDirtyPopupModel(driver, test_steps, isRoomDirty);
			}

		} else if (res.CP_Reservation_ConfirmCheckInPayment_Button.isEnabled()) {
			confirmCheckInWithPayment = true;

			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckInPayment_Button, driver);
			buttonName = res.CP_Reservation_ConfirmCheckInPayment_Button.getText();
			res.CP_Reservation_ConfirmCheckInPayment_Button.click();
			test_steps.add("Clicking on  Proceed to Check-In Payment Button");
			reslogger.info("Clicking on Proceed to Check-In Payment Button");

			boolean isUnassigned = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
			reslogger.info("isUnassigned:" + isUnassigned);
			String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'occupying room')]";
			boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
			reslogger.info("isRoomBooked:" + isRoomBooked);

			/*
			 * isCheckOutAllPresent = Utility.isElementPresent(driver,
			 * By.xpath(OR_Reservation.CP_Reservation_CheckOutAllButton));
			 */

			if (isUnassigned) {
				CheckINScreenRoomUnAssigned(driver, isUnassigned);
			}
			if (isRoomBooked) {
				CheckINScreenRoomOccupiedWithOtherReservation(driver, isRoomBooked);

			}
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
			isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.CP_Reservation_CheckIn_ModelPopMsg));
			reslogger.info("isRoomDirty:" + isRoomDirty);
			if (isRoomDirty) {
				ClickConfirmButtonOfDirtyPopupModel(driver, test_steps, isRoomDirty);
			}
		}

		return buttonName;
	}

	public void ClickConfirmButtonOfDirtyPopupModel(WebDriver driver, ArrayList test_steps,

			boolean isPresent) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		if (isPresent) {

			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckIn_ModelPopConfirmButton);
			Utility.ScrollToElement(res.CP_Reservation_CheckIn_ModelPopConfirmButton, driver);
			test_steps.add("One or more of the selected room(s) is Dirty");
			reslogger.info("One or more of the selected room(s) is Dirty");
			res.CP_Reservation_CheckIn_ModelPopConfirmButton.click();
			test_steps.add("Click Confirm Button");
			reslogger.info("Click Confirm Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
			reslogger.info("Loading Done");
		} else {
			test_steps.add("One or more of the selected room(s) is Not Dirty ");
			reslogger.info("One or more of the selected room(s) is Not Dirty ");
		}

	}

	public void switchToTabTwo(WebDriver driver, ArrayList test_steps) throws InterruptedException {

		Wait.waitForNewWindow(driver, 10);
		ArrayList<String> tabs2 = new ArrayList<String>(driver.getWindowHandles());
		reslogger.info(tabs2);
		if (tabs2.size() == 2) {
			driver.switchTo().window(tabs2.get(1));
			test_steps.add("Switch to report tab");
			reslogger.info("Switch to report tab");
		}

	}

	public void SwitchToTabTwoAndClose(WebDriver driver, ArrayList test_steps) throws InterruptedException {

		ArrayList<String> tabs2 = new ArrayList<String>(driver.getWindowHandles());
		reslogger.info(tabs2);
		if (tabs2.size() == 2) {
			driver.switchTo().window(tabs2.get(1));
			driver.close();
			test_steps.add("Switch to Tab tab Two and Close");
			reslogger.info("Switch to Tab tab Two and Close");
			Wait.wait2Second();
			driver.switchTo().window(tabs2.get(0));
			test_steps.add("Switch to Main tab");
			reslogger.info("Switch to Main tab");
		}

	}

	public String getURL = "";

	public void VerifyGuestRegistrationReportDisplayed(WebDriver driver, ArrayList test_steps)
			throws InterruptedException {

		Wait.wait5Second();
		getURL = driver.getCurrentUrl();
		reslogger.info(getURL);
		assertTrue(getURL.contains(".pdf"));
		test_steps.add("Guest Registration Report Page is Displayed");
		reslogger.info("Guest Registration Report Page is Displayed");
	}

	public void switchToTabOne(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Wait.waitForNewWindow(driver, 10);
		ArrayList<String> tabs2 = new ArrayList<String>(driver.getWindowHandles());
		reslogger.info(tabs2);
		/*
		 * if (tabs2.size() == 2) { driver.switchTo().window(tabs2.get(0));
		 * test_steps.add("Switch to Main tab");
		 * reslogger.info("Switch to Main tab"); }
		 */

		driver.switchTo().window(tabs2.get(0));
		test_steps.add("Switch to Main tab");
		reslogger.info("Switch to Main tab");
	}

	public String getMainWindow(WebDriver driver, ArrayList test_steps) {
		String winHandelBefore = driver.getWindowHandle();
		test_steps.add("Get Main Window");
		reslogger.info("Get Main Window");
		return winHandelBefore;
	}

	public void switchToMainWindow(WebDriver driver, ArrayList test_steps, String windowName) {
		Wait.waitForNewWindow(driver, 10);
		driver.switchTo().window(windowName);
		test_steps.add("Switch to Parent Window");
		reslogger.info("Switch to Parent Window");

	}

	public void switchToChildWindow(WebDriver driver, ArrayList test_steps) {
		Wait.waitForNewWindow(driver, 10);
		for (String windowHandel : driver.getWindowHandles())

		{
			reslogger.info(windowHandel);
			driver.switchTo().window(windowHandel);
			test_steps.add("Switch to Child Window");
			reslogger.info("Switch Child Window");
		}
	}

	public boolean verifyPDFContent(String strURL, String reqTextInPDF) {

		boolean flag = false;

		PDFTextStripper pdfStripper = null;
		PDDocument pdDoc = null;
		COSDocument cosDoc = null;
		String parsedText = null;

		try {
			URL url = new URL(strURL);
			BufferedInputStream file = new BufferedInputStream(url.openStream());
			PDFParser parser = new PDFParser(file);
			parser.parse();
			String TestText = new PDFTextStripper().getText(parser.getPDDocument());
			assertTrue(TestText.contains(reqTextInPDF));
			/*
			 * cosDoc = parser.getDocument(); pdfStripper = new
			 * PDFTextStripper(); pdfStripper.setStartPage(1);
			 * pdfStripper.setEndPage(1);
			 * 
			 * pdDoc = new PDDocument(cosDoc); parsedText =
			 * pdfStripper.getText(pdDoc);
			 */
		} catch (MalformedURLException e2) {
			System.err.println("URL string could not be parsed " + e2.getMessage());
		} catch (IOException e) {
			System.err.println("Unable to open PDF Parser. " + e.getMessage());
			try {
				if (cosDoc != null)
					cosDoc.close();
				if (pdDoc != null)
					pdDoc.close();
			} catch (Exception e1) {
				e.printStackTrace();
			}
		}

		reslogger.info("+++++++++++++++++");
		reslogger.info(parsedText);
		reslogger.info("+++++++++++++++++");

		// if(parsedText.contains(reqTextInPDF)) {
		// flag=true;
		// }

		return flag;
	}

	public void verifyHistoryForCheckin(WebDriver driver, ArrayList test_steps, String desc, String abb, String RoomNo,
			String CheckInStatus, ArrayList<String> RoomAbbri, ArrayList<String> Rooms) throws InterruptedException {
		if (CheckInStatus.equals("CheckInSingleRoom") || CheckInStatus.equals("CheckOutSingleRoom")
				|| CheckInStatus.equals("RollBackSingleRoom")) {
			String[] room = RoomNo.split(":");
			String FinalRoomNo = room[1].trim();
			reslogger.info(" Room No: " + FinalRoomNo);

			String[] abbr = abb.split(":");
			String FinalAbb = abbr[1].trim();
			reslogger.info(" Room Abb: " + FinalAbb);

			String path = "//td/span[contains(text(),'" + desc
					+ "')]/ancestor::td/following-sibling::td/span[contains(text(),'" + FinalAbb + ": " + FinalRoomNo
					+ "')]";
			WebElement element = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(element, driver);
			assertTrue(element.isDisplayed(), "Failed: to Verify Description and Room");
			test_steps.add("Verified Description: <b>" + desc + "</b>");
			reslogger.info("Verified Description: " + desc);
			test_steps.add("Verified Room: <b>" + FinalAbb + ": " + FinalRoomNo + "</b>");
			reslogger.info("Verified Room: " + FinalAbb + ": " + FinalRoomNo);
		} else if (CheckInStatus.equals("CheckInAll") || CheckInStatus.equals("Check Out")
				|| CheckInStatus.equals("RollBack")) {
			for (int i = 0; i < Rooms.size(); i++) {
				String[] room = Rooms.get(i).split(":");
				String FinalRoomNo = room[1].trim();
				reslogger.info(" Room No: " + FinalRoomNo);

				String[] abbr = RoomAbbri.get(i).split(":");
				String FinalAbb = abbr[1].trim();
				reslogger.info(" Room Abb: " + FinalAbb);

				String path = "//td/span[contains(text(),'" + desc
						+ "')]/ancestor::td/following-sibling::td/span[contains(text(),'" + FinalAbb + ": "
						+ FinalRoomNo + "')]";
				WebElement element = driver.findElement(By.xpath(path));
				Utility.ScrollToElement(element, driver);
				assertTrue(element.isDisplayed(), "Failed: to Verify Description and Room");
				test_steps.add("Verified Description: <b>" + desc + "</b>");
				reslogger.info("Verified Description: " + desc);
				test_steps.add("Verified Room: <b>" + FinalAbb + ": " + FinalRoomNo + "</b>");
				reslogger.info("Verified Room: " + FinalAbb + ": " + FinalRoomNo);
			}
		}

	}

	public void verifyDocuments(WebDriver driver, ArrayList test_steps, String resNO) throws InterruptedException {
		String Path = "//td[contains(text(),'" + resNO + "')]";
		Wait.WaitForElement(driver, Path);
		WebElement element = driver.findElement(By.xpath(Path));
		Utility.ScrollToElement(element, driver);
		assertTrue(element.isDisplayed(), "Failed: to Verify Documents");
		test_steps.add("Verified Documents: <b>" + resNO + "</b>");
		reslogger.info("Verified Documents: " + resNO);
	}

	public void clickGuestContactInfoCollapseIcon(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_Reservation_GuestContactInforCollapse, driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_GuestContactInforCollapse, driver);
		res.CP_Reservation_GuestContactInforCollapse.click();
		test_steps.add("Click Guest Contact Infor Collapse Icon");
		reslogger.info("Click Guest Contact Infor Collapse Icon");

	}

	public List<String> getStayInfoRoomCharges(WebDriver driver, ArrayList<String> test_steps) {
		List<String> roomCharges = new ArrayList<String>();
		String path = "//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'roomTotal')]";
		List<WebElement> roomCharge = driver.findElements(By.xpath(path));
		for (int i = 0; i < roomCharge.size(); i++) {
			roomCharges.add(roomCharge.get(i).getText());
			reslogger.info(roomCharges);

		}
		test_steps.add("Successfully Get Stay Info Room Charges");
		reslogger.info("Successfully Get Stay Info Room Charges");
		return roomCharges;
	}

	public List<String> getStayInfoRoomNo(WebDriver driver, ArrayList<String> test_steps) {
		List<String> roomNos = new ArrayList<String>();
		String path = "//div[contains(text(),'Stay')]/..//div[@class='ir-flex-grow ir-roomInfo']//span[contains(@data-bind,'roomNumber')]";
		List<WebElement> roomNo = driver.findElements(By.xpath(path));
		for (int i = 0; i < roomNo.size(); i++) {
			roomNos.add(roomNo.get(i).getText());
			reslogger.info(roomNos);

		}
		// test_steps.add("Successfully Get Stay Info Room Number");
		reslogger.info("Successfully Get Stay Info Room Number");
		return roomNos;
	}

	public List<String> getStayInfoGuestName(WebDriver driver, ArrayList<String> test_steps) {
		List<String> guestNames = new ArrayList<String>();
		String path = "//div[contains(text(),'Stay')]/..//div[@class='ir-flex-grow ir-guestInfo']//span[contains(@data-bind,'guestName')]";
		List<WebElement> roomNo = driver.findElements(By.xpath(path));
		for (int i = 0; i < roomNo.size(); i++) {

			guestNames.add(roomNo.get(i).getText());
			reslogger.info(guestNames);

		}

		test_steps.add("Get Stay Info Room Gust Name: <b>" + guestNames + " </b>");
		reslogger.info("Get Stay Info Room Gust Name: " + guestNames);
		return guestNames;
	}

	public void clickPrintButtonFromSuccessFullPop(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_CheckInSuccessPrintButton, driver);
		res.CP_CheckInSuccessPrintButton.click();
		test_steps.add("Click Print Button ");
		reslogger.info("Click Print Button ");
		Wait.wait5Second();
	}

	public void reservationStatusPanelSelectStatus(WebDriver driver, String status, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_StatusPanel_DropDownBox);
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.CP_Reservation_StatusPanel_DropDownBox, driver);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_StatusPanel_DropDownBox, driver);
		CPReservationPage.CP_Reservation_StatusPanel_DropDownBox.click();
		test_steps.add("Click on Drop Down box of Reservation Status Panel");
		reslogger.info("Click on Drop Down box of Reservation Status Panel");
		String path = "//span[contains(@class,'ir-dropdown-span-status open')]//ul[contains(@class,'dropdown-menu')]/li/a/span[contains(text(),'"
				+ status + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		Wait.explicit_wait_visibilityof_webelement(element, driver);
		Utility.ScrollToElement(element, driver);
		element.click();
		test_steps.add("Select Status : <b>" + status + "</b>");
		reslogger.info("Select Status : " + status);

		if (status.equals("Cancel") || status.equals("No Show")) {

			// Wait till pop model is not displayed
			int counter = 0;
			while (true) {
				if (!CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_Title.isDisplayed()) {
					break;
				} else if (counter == 40) {
					break;
				} else {
					counter++;
				}
			}
		}
	}

	public boolean checkedVoidRoomChargeCheckBox(WebDriver driver, ArrayList<String> test_steps) {
		boolean isChecked = false;
		Elements_CPReservation res = new Elements_CPReservation(driver);

		String path = "//span[contains(text(),'Void Room Charges')]/ancestor::div/label/input|//span[contains(text(),'Void room charges for unused nights')]/ancestor::div/label/input";
		isChecked = driver.findElement(By.xpath(path)).isSelected();
		if (!isChecked) {
			res.CP_Reservation_NoShow_VoidRoomChargeCheckBox.click();
			test_steps.add("Checked Void Room Charge Check Box ");
			reslogger.info("Checked Void Room Charge Check Box ");
		} else {
			test_steps.add(" Void Room Charge Check Box is Already Checked ");
			reslogger.info("Void Room Charge Check Box is Already Checked ");
		}

		return isChecked;
	}

	public boolean unCheckedVoidRoomChargeCheckBox(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		boolean isUnchecked = false;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait5Second();
		String path = "//span[contains(text(),'Void Room Charges')]/ancestor::div/label/input|//span[contains(text(),'Void room charges for unused nights')]/ancestor::div/label/input";

		isUnchecked = driver.findElement(By.xpath(path)).isSelected();
		if (isUnchecked) {
			res.CP_Reservation_NoShow_VoidRoomChargeCheckBox.click();
			test_steps.add("UnChecked Void Room Charge Check Box ");
			reslogger.info("UnChecked Void Room Charge Check Box ");
		} else {
			test_steps.add("UnChecked Void Room Charge Check Box ");
			reslogger.info("UnChecked Void Room Charge Check Box ");
		}
		return isUnchecked;
	}

	public void clickProceedToNoShowPaymentButton(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ProceedToPaymentButton), driver);
		res.ProceedToPaymentButton.click();
		test_steps.add("Click on Proceed To No Show Payment Button ");
		reslogger.info("Click on Proceed To No Show Payment Button ");
	}

	public void clickConfirmNoShowButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait2Second();
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ConfirmButton, driver);
		Wait.explicit_wait_elementToBeClickable(res.CP_Reservation_ConfirmButton, driver);
		res.CP_Reservation_ConfirmButton.click();
		test_steps.add("Click on Confirm No Show Button ");
		reslogger.info("Click on Confirm No Show Button ");
		verifySpinerLoading(driver);
	}

	public void clickConfirmButtonFromNoShowModelPopup(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ConfirmNoShowNoButton, driver);
		res.CP_Reservation_ConfirmNoShowNoButton.click();
		test_steps.add("Click on " + " 'No, Cancel the no show process' " + "Button ");
		reslogger.info("Click on " + " 'No, Cancel the no show process' " + "Button ");
	}

	public boolean verifyConfirmYesButton(WebDriver driver) {
		boolean value = Utility.isElementPresent(driver, By.xpath(OR_Reservation.ConfirmDialog_YesButton));
		return value;
	}

	public void clickYesButtonOfConfirmTheNoShowProcessPopupModel(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ConfirmNoShowYesButton, driver);
		res.CP_Reservation_ConfirmNoShowYesButton.click();
		test_steps.add("Click on " + " 'Yes, Confirm no show & refund later' " + "Button ");
		reslogger.info("Click on " + " 'Yes, Confirm no show & refund later' " + "Button ");
	}

	public void clickCloseButtonOfPaymentWindow(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_NoShowPaymentPopup_CloseButton, driver);
		res.CP_Reservation_NoShowPaymentPopup_CloseButton.click();
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
	}

	public void clickYesButtonOfNoShowPaymentWindow(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_NoShowPaymentPopup_CloseButtonMsgYesButton,
				driver);
		res.CP_Reservation_NoShowPaymentPopup_CloseButtonMsgYesButton.click();
		test_steps.add("Click Yes Button ");
		reslogger.info("Click Yes Button ");
	}

	public void clickNoButtonOfNoShowPaymentWindow(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_NoShowPaymentPopup_CloseButtonMsgNoButton,
				driver);
		res.CP_Reservation_NoShowPaymentPopup_CloseButtonMsgNoButton.click();
		test_steps.add("Click No Button ");
		reslogger.info("Click No Button ");
	}

	public void verifyReservationPopWindow(WebDriver driver, String Title, String GuestName, String Status,
			String ResNo, ArrayList<String> test_steps, String OptionPerform) throws InterruptedException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShow_Cancel_CheckIn_CheckOut_Title);
		Wait.explicit_wait_visibilityof_webelement(
				CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_Title, driver);
		// Verified No Show Reservation Page Title
		assertEquals(
				CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_Title.getText().toLowerCase().trim(),
				Title.toLowerCase().trim(), "Failed: To verify Reservation Page Title");
		test_steps.add("Verified Header: <b>" + Title + "</b>");
		reslogger.info(" Verified Header: " + Title);
		// Verified No Show Reservation Page Guest Name
		assertEquals(CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_GuestName.getText().toLowerCase()
				.trim(), GuestName.toLowerCase().trim(), "Failed: To verify Reservation Page GuestName");

		test_steps.add("Verified Guest Name <b>" + GuestName + "</b>");
		reslogger.info("Verified Guest Name " + GuestName);
		String[] status = null;

		if (OptionPerform.equals("Check Out")) {
			status = CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_Status.getText().split("-");
			status[0] = status[0] + "-" + status[1];
		} else {
			status = CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_Status.getText().split("-");

		}
		// Verified No Show Reservation Page Status
		/*
		 * assertTrue(status[0].toLowerCase().trim().equals(Status.toLowerCase()
		 * .trim()), "Failed: To verify Reservation Page Status");
		 */
		assertEquals(status[0].toLowerCase().trim(), Status.toLowerCase().trim(),
				"Failed: To verify Reservation Page Status");

		test_steps.add(" Verified Status <b>" + Status + "</b>");
		reslogger.info(" Verified Status: " + Status);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_ConfirmationNo, driver);
		// Verified No Show Reservation Page ReservationNo
		String ConfirmationNO = CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_ConfirmationNo.getText()
				.trim();
		reslogger.info(ConfirmationNO);
		/*
		 * assertTrue(CPReservationPage.
		 * CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_ConfirmationNo.getText(
		 * ).trim() .equals(ResNo.trim()),
		 * "Failed: To verifyReservation Page Confirmation No");
		 */

		assertEquals(CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_ConfirmationNo.getText().trim(),
				ResNo.trim(), "Failed: To verifyReservation Page Confirmation No");
		test_steps.add(" Verified Reservation  No <b>" + ResNo + "</b>");
		reslogger.info(" Verified Reservation No: " + ResNo);

	}

	public void voidRoomChargeVerificationOfNoShow(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.VoidRoomChargeLabel, driver);
		// Verified No Show Reservation Page Void Room Charge Label
		assertTrue(CPReservationPage.VoidRoomChargeLabel.isDisplayed(), "Failed: To verify  Void Room Charge Lable");
		test_steps.add(" Verified <b> Void Room Charge </b> Label ");
		reslogger.info(" Verified  Void Room Charge Label");
	}

	public String TripSummary_RoomCharges = "";
	public String TripSummary_TaxServices = "";
	public String AmountPaid = "";

	public String CalculationFee(WebDriver driver, int roomCharge, int noShowPercent, int taxPercentage,
			int paidAmount) {
		int NoShowFee = (roomCharge * noShowPercent) / 100;
		reslogger.info("Pearcentage: " + NoShowFee);
		TripSummary_RoomCharges = String.valueOf(NoShowFee);
		int TaxOnNoShowFee = (NoShowFee * taxPercentage) / 100;
		reslogger.info("Tax on Pearcentage: " + TaxOnNoShowFee);
		TripSummary_TaxServices = String.valueOf(TaxOnNoShowFee);
		int TotalNoShowFee = NoShowFee + TaxOnNoShowFee;
		reslogger.info("Total Fee  : " + TotalNoShowFee);
		int PaidAmount = TotalNoShowFee - paidAmount;
		AmountPaid = String.valueOf(PaidAmount);
		reslogger.info("Need to Paid  : " + AmountPaid);
		return String.valueOf(TotalNoShowFee);

	}

	public void getAmountOnPaymentVerificationPage(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount, driver);
		// Get Amount
		Amount = CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		double noshowPaymentAmount = Double.valueOf(Amount);
		int amt = (int) noshowPaymentAmount;
		Amount = String.valueOf(amt);
		reslogger.info(Amount);
	}

	String type = "";
	public String Amount = "", Balance = "";

	public double amount = 0.00;

	public void commonMethodForPaymentPopUpVerification(WebDriver driver, ArrayList<String> test_steps, String Title,
			String expiryDate, String nameOnCard, String cardNo, String PaymentType, String Type, String totalFee,
			String tripTax, String Percentage, String PolicyType, String TripPaid) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopupTitle);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle, driver);
		// Verified No Show Payment Page Title
		assertEquals(CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText().toLowerCase()
				.trim(), (Title.toLowerCase().trim()), "Failed: To verify  Payment Page Title");
		test_steps.add(" Verified Title:<b> " + Title + "</b>");
		reslogger.info(" Verified Title: " + Title);
		String path = "//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + PaymentType + "']";
		WebElement paymentElement = driver.findElement(By.xpath(path));

		// Get Amount
		Amount = CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		double noshowPaymentAmount = Double.valueOf(Amount);
		int amt = (int) noshowPaymentAmount;
		Amount = String.valueOf(amt);
		reslogger.info(Amount);
		amount = noshowPaymentAmount;
		reslogger.info(amount);

		String balance = "";
		if (PolicyType.equals("No Show") || PolicyType.equals("Cancel")) {
			balance = CPReservationPage.NoShowCancelPaymentPopup_Balance.getText().replace("$", "");
			Balance = balance;
		} else if (PolicyType.equals("Check In")) {
			balance = CPReservationPage.CheckInPaymentPopup_Balance.getText().replace("$", "");
			Balance = balance;
		}

		double balanceDouble = Double.valueOf(balance);
		int balanceInt = (int) balanceDouble;
		balance = String.valueOf(balanceInt);
		if (Amount.equals(totalFee)) {
			assertEquals(Amount, (totalFee), "Failed: To verify Payment Page Amount: " + totalFee);
			test_steps.add("Verified Amount : <b> " + totalFee + "</b>");
			reslogger.info(" Verified Amount: " + totalFee);
			assertEquals(balance, (totalFee), "Failed: To verify Payment Page Balance: " + totalFee);
			test_steps.add("Verified Balance : <b> " + totalFee + "</b>");
			reslogger.info(" Verified Balance: " + totalFee);
		} else if (Amount.equals(tripTax)) {
			assertEquals(Amount, (tripTax), "Failed: To verify Payment Page Amount: " + tripTax);
			test_steps.add(" Verified Amount : <b> " + tripTax + "</b>");
			reslogger.info(" Verified Amount: " + tripTax);
			assertEquals(balance, (tripTax), "Failed: To verify  Payment Page Balance: " + tripTax);
			test_steps.add(" Verified Balance : <b> " + tripTax + "</b>");
			reslogger.info(" Verified Balance: " + tripTax);
		}

		else if (Amount.equals(Percentage)) {
			assertEquals(Amount, (Percentage), "Failed: To verify Payment Page Amount: " + Percentage);
			test_steps.add(" Verified Amount : <b> " + Percentage + "</b>");
			reslogger.info(" Verified Amount: " + Percentage);
			assertEquals(balance, (Percentage), "Failed: To verify  Payment Page Balance: " + Percentage);
			test_steps.add(" Verified Balance : <b> " + Percentage + "</b>");
			reslogger.info(" Verified Balance: " + Percentage);
		} else if (Amount.equals(TripPaid)) {
			assertEquals(Amount, (TripPaid), "Failed: To verify Payment Page Amount: " + TripPaid);
			test_steps.add(" Verified Amount : <b> " + TripPaid + "</b>");
			reslogger.info(" Verified Amount: " + TripPaid);
			assertEquals(balance, (TripPaid), "Failed: To verify  Payment Page Balance: " + TripPaid);
			test_steps.add(" Verified Balance : <b> " + TripPaid + "</b>");
			reslogger.info(" Verified Balance: " + TripPaid);
		}

		// Verified Type
		type = CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.getText().toLowerCase()
				.trim();
		assertEquals(type, (Type.toLowerCase().trim()), "Failed: To verify  Page Type: " + Type);
		test_steps.add(" Verified Type : <b> " + Type + "</b>");
		reslogger.info(" Verified Type: " + Type);

		if (PaymentType.equals("MC")) {
			// Verified No Show Payment Page Payment Method
			assertTrue(paymentElement.isDisplayed(), "Failed: To verify Payment Method");
			test_steps.add(" Verified Payment Method:<b> " + PaymentType + "</b> ");
			reslogger.info(" Verified Payment Method: " + PaymentType);

			// Verified No Show Payment Page Card No
			JavascriptExecutor executor = (JavascriptExecutor) driver;
			String CardNo = (String) executor.executeScript("return arguments[0].value",
					CPReservationPage.CP_Reservation_NoShowPaymentPopup_CardNumber);
			reslogger.info(CardNo);
			// Verify Card Number
			assertTrue(CardNo.contains(cardNo), "Failed: To verify Card Number");
			test_steps.add(" Verified Card Number: <b>" + CardNo + "</b>");
			reslogger.info(" Verified Card Number");
			String NameOnCard = (String) executor.executeScript("return arguments[0].value",
					CPReservationPage.CP_Reservation_NoShowPaymentPopup_NameOnCard);
			reslogger.info(NameOnCard);

			// Verify Name on Card Number
			assertEquals(NameOnCard.toLowerCase().trim(), (nameOnCard.toLowerCase().trim()),
					"Failed: To verify Name on Card ");
			test_steps.add("Verified Name on Card:<b>  " + nameOnCard + "</b>");
			reslogger.info(" Verified Name on Card");

			String ExpiryDate = (String) executor.executeScript("return arguments[0].value",
					CPReservationPage.CP_Reservation_NoShowPaymentPopup_Expiry);
			reslogger.info(ExpiryDate);

			// Verify Expiry Date
			assertEquals(ExpiryDate, (expiryDate), "Failed: To verify Expiry Date ");
			test_steps.add(" Verified Expiry Date:<b> " + ExpiryDate + "</b>");
			reslogger.info(" Verified Expiry Date");
		}
		if (PolicyType.equals("No Show") || PolicyType.equals("Cancel")) {
			// Verified Log as External Payment
			boolean isExistLogAsExternal = CPReservationPage.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox
					.isEnabled();
			if (isExistLogAsExternal) {
				if (!CPReservationPage.NoShowPaymentPopup_Date.isEnabled()) {
					test_steps.add(" Verified  Date Field Disabled ");
					reslogger.info(" Verified  Date Field Disabled ");
				}
				if (!CPReservationPage.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox.isSelected()) {
					CPReservationPage.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox.click();
					reslogger.info("Click  Log as External Payment Check Box");
					// Verified No Show Payment Log Button
					assertTrue(CPReservationPage.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.isDisplayed(),
							"Failed: To verify Payment Page Log Button");
					test_steps.add(" Verified  Log/Pay Button ");
					reslogger.info("' Verified  Log/Pay Button ");
					assertTrue(CPReservationPage.NoShowPaymentPopup_Date.isEnabled(),
							"Failed: To verify Payment Page Date Field");
					test_steps.add(" Verified  Date Field  Enabled");
					reslogger.info(" Verified  Date Field  Enabled ");
				}

			}
		}
		if (PolicyType.equals("Check In")) {
			// Verified Override Check-In Amount
			res.CP_OverrideCheckInAmountCheckBox.click();
			test_steps.add(" Checked Override Check-In Amount Check Box");
			reslogger.info(" Checked Override Check-In Amount Check Box");
			boolean isAmountEnabled = CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount
					.isEnabled();
			assertEquals(isAmountEnabled, true, "Failed : to verify Amount field Enabled");
			test_steps.add(" Amount Field  Enabled");
			reslogger.info(" Amount Field  Enabled");
			boolean isTypeEnabled = CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType
					.isEnabled();
			assertEquals(isTypeEnabled, true, "Failed : to verify Type field Enabled");
			test_steps.add(" Type Field  Enabled");
			reslogger.info(" Type Field  Enabled");
			CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
			test_steps.add(" Click on Type Drop Down Box");
			reslogger.info(" Click on Type Drop Down Box");
			String[] type = { "Authorization Only", "Capture" };
			for (int i = 0; i < res.CP_CheckInTypeOptions.size(); i++) {
				assertTrue(res.CP_CheckInTypeOptions.get(i).getText().toLowerCase().trim()
						.equals(type[i].toLowerCase().trim()), "Failed: To verify Type Field");
				test_steps.add(" Verified  Type Option: <b>" + res.CP_CheckInTypeOptions.get(i).getText() + "</b>");
				reslogger.info(" Verified  Date Field  Enabled " + res.CP_CheckInTypeOptions.get(i).getText());
			}

			CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
			test_steps.add(" Click on Type Drop Down Box");
			reslogger.info(" Click on Type Drop Down Box");

			boolean iExist = CPReservationPage.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.isDisplayed();
			assertEquals(iExist, true, "Failed : to verify Authrozied Button");
			test_steps.add(" Authrozied Button  Enabled");
			reslogger.info(" Authrozied Button  Enabled");
		}

	}

	public void SelectDate(WebDriver driver, Date Date, String day) {
		DateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
		String tDate = dateFormat.format(Date);
		String[] checkin = tDate.split("\\|");
		int size = checkin.length;
		String header = null, headerText = null, date;
		// String monthYear=Utility.get_MonthYear(Date);
		for (int i = 1; i <= size; i++) {
			String monthYear = Utility.get_MonthYear(checkin[i - 1]);

			for (int k = 1; k <= 12; k++) {
				header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
				headerText = driver.findElement(By.xpath(header)).getText();
				if (headerText.equalsIgnoreCase(monthYear)) {
					date = "//td[contains(@class,'day') and text()='" + day + "']";
					Wait.WaitForElement(driver, date);

					int size1 = driver.findElements(By.xpath(date)).size();
					for (int l = 1; l <= size1; l++) {
						date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + l + "]";
						String classText = driver.findElement(By.xpath(date)).getAttribute("class");
						if (!classText.contains("old")) {
							driver.findElement(By.xpath(date)).click();
							test_steps.add("Selecting  date : " + Date);
							reslogger.info("Selecting  date : " + Date);
							break;
						}
					}

					break;
				}

			}
		}
	}

	public String previousDate = "";
	public String currentDay = "";
	public String PreviousDay = "";
	public Date oneDayBefore;
	public String Current_Date = "";
	public Date current_Date;

	public void getTodaysANDYesturdayDate() throws ParseException {
		DateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy");
		dateFormat.setTimeZone(TimeZone.getTimeZone("EST"));

		Date currentDate = new Date();
		current_Date = currentDate;
		String CurrentDate = dateFormat.format(currentDate);
		Current_Date = CurrentDate;
		Date myDate = dateFormat.parse(CurrentDate);
		reslogger.info("CurrentDate: " + Current_Date);
		int CD = myDate.getDate();
		currentDay = String.valueOf(CD);
		reslogger.info("CurrentDay: " + currentDay);

		// Date oneDayBefore = new Date(myDate.getTime() - 2);
		oneDayBefore = new Date(myDate.getTime() - 2);
		previousDate = dateFormat.format(oneDayBefore);
		reslogger.info("Previous Date: " + previousDate);
		Date myPDate = dateFormat.parse(previousDate);
		int PD = myPDate.getDate();
		PreviousDay = String.valueOf(PD);
		reslogger.info("PreviousDay: " + PreviousDay);

	}

	public Date getTodaysDate(String format, String timeZone) {
		Date current_Date = null;
		DateFormat dateFormat = new SimpleDateFormat(format);
		dateFormat.setTimeZone(TimeZone.getTimeZone(timeZone));
		Date currentDate = new Date();
		current_Date = currentDate;
		String CurrentDate = dateFormat.format(currentDate);
		reslogger.info("CurrentDate: " + CurrentDate);

		return current_Date;
	}

	public Date getPreviousDate(String format, String timeZone) throws ParseException {
		// String previousDate=null;
		DateFormat dateFormat = new SimpleDateFormat(format);
		dateFormat.setTimeZone(TimeZone.getTimeZone(timeZone));

		Date currentDate = new Date();
		String CurrentDate = dateFormat.format(currentDate);
		Date myDate = dateFormat.parse(CurrentDate);
		Date oneDayBefore = new Date(myDate.getTime() - 2);
		String previousDate = dateFormat.format(oneDayBefore);
		Date previous = dateFormat.parse(previousDate);
		reslogger.info("Previous Date: " + previousDate);

		return previous;
	}

	public void SetAsMainPaymentMethod(WebDriver driver, ArrayList<String> test_steps, String PaymentType,
			String PaymentTypeTwo, Date Date, String Day, String PolicyType) throws ParseException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		String path = "//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + PaymentType + "']";
		WebElement PaymentMethodElement = driver.findElement(By.xpath(path));
		PaymentMethodElement.click();
		test_steps.add("Click Payment Method");
		reslogger.info("Click CPayment Method");
		String options = "//paymentmethod//div[contains(@class,'open')]/ul//li/a//span[@class='text'][contains(text(),'"
				+ PaymentTypeTwo + "')]";
		WebElement PaymentMethodOptions = driver.findElement(By.xpath(options));
		PaymentMethodOptions.click();
		test_steps.add("Select Payment Option :<b> " + PaymentTypeTwo + "<b>");
		reslogger.info("Click Payment Option: " + PaymentTypeTwo);
		if (PolicyType.equals("Cancel") || PolicyType.equals("No Show")) {
			CPReservationPage.NoShow_Cancel_Checkout_Date_CalanderIcon.click();
			test_steps.add("Click Calander Icon");
			reslogger.info("Click Calander Icon");
		} else if (PolicyType.equals("Check In")) {
			CPReservationPage.CheckInPaymentPopup_Date_CalanderIcon.click();
			test_steps.add("Click Calander Icon");
			reslogger.info("Click Calander Icon");
		} else if (PolicyType.equals("Check Out")) {
			CPReservationPage.CheckOutPaymentPopup_Date_CalanderIcon.click();
			test_steps.add("Click Calander Icon");
			reslogger.info("Click Calander Icon");
		}

		SelectDate(driver, Date, Day);
		test_steps.add("Select Date: <b>" + previousDate + "</b>");
		reslogger.info("Select Date: " + previousDate);
		CPReservationPage.CP_Reservation_NoShowPaymentPopup_SetMainPaymentCheckBox.click();
		test_steps.add("Click Set As Main Payment Method Check Box");
		reslogger.info("Click Set As Main Payment Method Check Box");

	}

	public void closeWindowVerificationOfPaymentPopup(WebDriver driver, ArrayList<String> test_steps, String Msg) {

		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		// Verified No Show Payment Page Close Title
		assertTrue(CPReservationPage.CP_Reservation_NoShowPaymentPopup_CloseButtonMsg.getText().toLowerCase().trim()
				.equals(Msg.toLowerCase().trim()), "Failed: To verify Are You Sure Msg");
		test_steps.add("Verified Message:<b> " + Msg + "</b>");
		reslogger.info("Verified Message: " + Msg);
		// Verified No Show Payment Page Close Page Yes Button
		assertTrue(CPReservationPage.CP_Reservation_NoShowPaymentPopup_CloseButtonMsgYesButton.isDisplayed(),
				"Failed: To verify Payment Page Yes Button");
		test_steps.add(" Verified <b>Yes</b> Button ");
		reslogger.info("Verified Yes Button");
		// Verified No Show Payment Page Close Page No Button
		assertTrue(CPReservationPage.CP_Reservation_NoShowPaymentPopup_CloseButtonMsgNoButton.isDisplayed(),
				"Failed: To verify Payment Page No Button");
		test_steps.add(" Verified <b>No</b> Button ");
		reslogger.info(" Verified No Button");
		clickNoButtonOfNoShowPaymentWindow(driver, test_steps);
		// Wait.explicit_wait_visibilityof_webelement(CPReservationPage.CP_Reservation_StatusPanel_DropDownBox,
		// driver);
	}

	public boolean confirmNoShowVerification(WebDriver driver) {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		boolean isExitNoShowVerification = CPReservationPage.CP_Reservation_ConfirmNoShowMsg.isEnabled();
		return isExitNoShowVerification;

	}

	public void confirmNoShowWindowVerification(WebDriver driver, ArrayList<String> test_steps, String ConfirmNoShowMsg)
			throws InterruptedException {

		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ConfirmDialog_Message);
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.CP_Reservation_ConfirmNoShowMsg, driver);
		// Verified Confirm No Show Msg
		assertTrue(CPReservationPage.CP_Reservation_ConfirmNoShowMsg.getText().toLowerCase().trim()
				.equals(ConfirmNoShowMsg.toLowerCase().trim()), "Failed: To verify The guest is owed a refund");
		test_steps.add("Successfull Verified Confirm No Show  Message ");
		reslogger.info("Successfull Verified Confirm No Show  Message");
		// Verified Confirm No Show Page Yes Button
		assertTrue(CPReservationPage.CP_Reservation_ConfirmNoShowYesButton.isDisplayed(),
				"Failed: To verify Confirm No Show  Page Yes Button");
		test_steps.add("Successfull Verified Confirm No Show  Page  Yes Button ");
		reslogger.info("Successfull Verified Confirm No Show  Page Yes Button");
		// Verified Confirm No Show Page No Button
		assertTrue(CPReservationPage.CP_Reservation_ConfirmNoShowNoButton.isDisplayed(),
				"Failed: To verify Confirm No Show Page No Button");
		test_steps.add("Successfull Verified Confirm No Show Page  No Button ");
		reslogger.info("Successfull Verified Confirm No Show  Page No Button");
		clickConfirmButtonFromNoShowModelPopup(driver, test_steps);
		// Verified Confirm No Show Button Again
		assertTrue(CPReservationPage.CP_Reservation_ConfirmButton.isDisplayed(),
				"Failed: To verify Confirm No Show   Button");
		test_steps.add("Successfull Verified Confirm No Show   Button Again");
		reslogger.info("Successfull Verified Confirm No Show  Button Again");
		// Click Again Confirm No Show Button
		clickConfirmNoShowButton(driver, test_steps);
		clickYesButtonOfConfirmTheNoShowProcessPopupModel(driver, test_steps);
		Wait.wait10Second();

	}

	public boolean NoShowSuccessFull(WebDriver driver) throws InterruptedException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowSuccessFul_ModelHeader);
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.NoShowSuccessfull_Header, driver);
		boolean iExistNoShowSuccessScreen = CPReservationPage.NoShowSuccessfull_Header.isEnabled();
		return iExistNoShowSuccessScreen;
	}

	public void commonMethodForSuccessfullWindowVerification(WebDriver driver, ArrayList<String> test_steps,
			String NoShowSuccess, String Status, String PaymentMethod, String Notes, String Balance, String Type,
			String TotalNoFee, String PaymentType, String dateValue) throws InterruptedException, ParseException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowSuccess_ModelHeader);
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.CP_Reservation_NoShowSuccess, driver);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShowSuccess, driver);

		// Verified Success -Message
		assertEquals(CPReservationPage.CP_Reservation_NoShowSuccess.getText().toLowerCase().trim(),
				(NoShowSuccess.toLowerCase().trim()), "Failed: To verify Success Header");
		test_steps.add("  Verified Message: <b>" + NoShowSuccess + "</b>");
		reslogger.info("  Verified Message:" + NoShowSuccess);

		if (PaymentType.equals("Check Out")) {
			// Verified Success-Date
			Date date = null;
			String Date = CPReservationPage.NoShowSuccess_Date.getText();
			DateFormat dateFormat = new SimpleDateFormat("MM/dd/yy");
			dateFormat.setTimeZone(TimeZone.getTimeZone("EST"));
			Date myDate = dateFormat.parse(dateValue);
			String CurrentDate = dateFormat.format(myDate);

			// date = formatter.parse(Date);
			assertEquals(CPReservationPage.NoShowSuccess_Date.getText(), (CurrentDate),
					"Failed: To verify  Success Page Date");
			test_steps.add("  Verified Date: <b>" + dateValue + "</b>");
			reslogger.info("  Verified Date: " + dateValue);
		} else {

			assertEquals(CPReservationPage.NoShowSuccess_Date.getText(), (dateValue),
					"Failed: To verify  Success Page Date");

			test_steps.add("  Verified Date: <b>" + dateValue + "</b>");
			reslogger.info("  Verified Date: " + dateValue);
		}

		// Verified Success-Balance
		String balance = CPReservationPage.NoShowSuccess_Balance.getText().replace("$ ", "");

		reslogger.info(balance);
		if (PaymentType.equals("Check Out")) {
			double tripAmount = Double.valueOf(balance);
			int amt = (int) tripAmount;
			String BalanceCheckOut = String.valueOf(amt);
			assertEquals(BalanceCheckOut.trim(), (Balance), "Failed: To verify Success Page Balance");
			test_steps.add(" Verified Balance: <b>" + Balance + "</b>");
			reslogger.info("  Verified Balance: " + Balance);
		} else {
			assertEquals(balance.trim(), (Balance), "Failed: To verify Success Page Balance");
			test_steps.add(" Verified Balance: <b>" + Balance + "</b>");
			reslogger.info("  Verified Balance: " + Balance);

		}
		// Verified Success-Amount

		reslogger.info("Amount: " + TotalNoFee);
		String path = "//span[contains(@data-bind,'noShow.PaymentAmount')][contains(text(),'$ " + TotalNoFee
				+ "')]|//span[contains(@data-bind,'cancel.PaymentAmount')][contains(text(),'$ " + TotalNoFee
				+ "')]|//span[contains(@data-bind,'checkInDetail.PaymentAmount')][contains(text(),'$ " + TotalNoFee
				+ "')]|//span[contains(@data-bind,'checkOutDetail.PaymentAmount')][contains(text(),'$ " + TotalNoFee
				+ "')]";
		WebElement AmountElement = driver.findElement(By.xpath(path));
		assertTrue(AmountElement.isDisplayed(), "Failed: To verify  Success Page Amount: " + TotalNoFee);
		test_steps.add("  Verified Amount: <b>" + TotalNoFee + "</b>");
		reslogger.info("  Verified Amount: " + TotalNoFee);

		// Verified Success-Type
		reslogger.info(type);
		assertEquals(CPReservationPage.NoShowSuccess_Type.getText().toLowerCase().trim(), (Type.toLowerCase().trim()),
				"Failed: To verify  Success Page Type");
		test_steps.add("  Verified Type: <b>" + Type + "</b>");
		reslogger.info(" Verified Type: " + Type);

		// Verified Success-Payment Method
		assertTrue(CPReservationPage.CP_Reservation_NoShowSuccessPaymentMethod.getText().toLowerCase().trim()
				.contains(PaymentMethod.toLowerCase().trim()), "Failed: To verify Success Page Payment Method");
		test_steps.add("  Verified Payment Method: <b>" + PaymentMethod + "</b>");
		reslogger.info("  Verified Payment Method: " + PaymentMethod);

		// Verified Success -Status
		assertEquals(CPReservationPage.CP_Reservation_NoShowSuccessStatus.getText().toLowerCase().trim(),
				(Status.toLowerCase().trim()), "Failed: To verify  Success Page Status ");
		test_steps.add("  Verified Status:<b> " + Status + "</b>");
		reslogger.info(" Verified Status: " + Status);

		// Verified Success Notes
		if (Utility.validateString(Notes)) {
			assertEquals(CPReservationPage.CP_Reservation_NoShowSuccessNotes.getText().toLowerCase().trim(),
					(Notes.toLowerCase().trim()), "Failed: To verify  Success Page Notes ");
			test_steps.add(" Verified  Notes: <b>" + Notes + "</b>");
			reslogger.info(" Verified  Notes: " + Notes);
		}
	}

	public boolean VerifyNoShowSuccessFull(WebDriver driver) {
		boolean value = Utility.isElementPresent(driver, By.xpath(OR_Reservation.NoShowSuccessFul_ModelHeader));
		return value;
	}

	public void noShowSuccessfullyWindowVerification(WebDriver driver, ArrayList<String> test_steps, String headerText,
			String Reg) throws InterruptedException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.wait10Second();
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.NoShowSuccessfull_Header, driver);
		// Verified No Show Successful Header
		assertTrue(CPReservationPage.NoShowSuccessfull_Header.getText().toLowerCase().trim()
				.equals(headerText.toLowerCase().trim()), "Failed: To verify No Show Successful Header");
		test_steps.add("'No Show Successful' Verified Header: <b>" + headerText + "</b>");
		reslogger.info("'No Show Successful' Verified Header");

		// Verified No Show Successful message
		assertTrue(CPReservationPage.NoShowSuccessfull_Msg.isDisplayed(),
				"Failed: To verify No Show Successful Message: ");
		test_steps.add("'No Show Successful' Verified Message: <b>No Show successful</b>");
		reslogger.info("'No Show Successful' Verified Message");

		// Verified No Show Successful Registration NO
		assertTrue(
				CPReservationPage.NoShowSuccessfull_Reg.getText().toLowerCase().trim().equals(Reg.toLowerCase().trim()),
				"Failed: To verify No Show Successful Reg No");
		test_steps.add("'No Show Successful' Verified Registration No:<b> " + Reg + "</b>");
		reslogger.info("'No Show Successful' Verified Registration No " + Reg);
		CPReservationPage.NoShowSuccessfull_Button.click();
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");

	}

	public void clickCloseButtonOfSuccessModelPopup(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowSuccess_CloseButton);
		//Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowSuccess_CloseButton), driver, 10);
		// res.CP_Reservation_NoShowSuccessCloseButton.click();
		
		for(WebElement ele : driver.findElements(By.xpath(OR_Reservation.NoShowSuccess_CloseButton))) {
			if(ele.isDisplayed()) {
				Utility.clickThroughJavaScript(driver, ele);
				break;
			}
		}
		
//		JavascriptExecutor executor = (JavascriptExecutor) driver;
//		executor.executeScript("arguments[0].click();", res.CP_Reservation_NoShowSuccessCloseButton);
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
		verifySpinerLoading(driver);
	}

	public void clickAddNoteLinks(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentAddNoteLink);
		Wait.explicit_wait_elementToBeClickable(res.CP_Reservation_NoShowPayment_AddNoteLink, driver);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click()", res.CP_Reservation_NoShowPayment_AddNoteLink);
		// res.CP_Reservation_NoShowPayment_AddNoteLink.click();
		test_steps.add("Click Add Notes Link ");
		reslogger.info("Click Add Notes Link ");
	}

	public ArrayList<String> clickOnPayButtonOnPaymentPopup(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowPaymentPopup_LogANDPayButton), driver);
		String buttonName = res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().split(" ")[0];
		JavascriptExecutor js = (JavascriptExecutor) driver;
		js.executeScript("arguments[0].click();", res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton);
		// res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.click();
		test_steps.add("Clicking on " + buttonName + " Button ");
		reslogger.info("Clicking on " + buttonName + " Button ");
		try {
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowSuccess_ModelHeader), driver);
		} catch (Exception e) {

			try {
				js.executeScript("arguments[0].click();", res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton);
				test_steps.add("Clicking on " + buttonName + " Button ");
				reslogger.info("Clicking on " + buttonName + " Button ");
				Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowSuccess_ModelHeader), driver);

			} catch (Exception e2) {
				test_steps
						.add("Existing issue in CP: Posted room charges do not move to account when charge routing is set"
								+ "<br/><a href='https://innroad.atlassian.net/browse/NG-10512' target='_blank'>"
								+ "Verified :NG-10512</a><br/>");
				reslogger
						.info("Existing issue in CP: Posted room charges do not move to account when charge routing is set"
								+ "<br/><a href='https://innroad.atlassian.net/browse/NG-10512' target='_blank'>"
								+ "Verified :NG-10512</a><br/>");
			}

		}
		return test_steps;
	}

	public void clickLogORPayAuthorizedButton(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowPaymentPopup_LogANDPayButton), driver);
		res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.click();
		String buttonName = res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().split(" ")[0];
		test_steps.add("Clicking on " + buttonName + " Button ");
		reslogger.info("Clicking on " + buttonName + " Button ");
	}

	public String getPaymentMethod(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		String path = "//paymentmethod//div[(@class='form-group ir-frm-grp')]//button";
		WebElement PaymentMethod = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(PaymentMethod, driver);
		String paymentMethod = PaymentMethod.getAttribute("title");

		reslogger.info(paymentMethod);
		return paymentMethod;
	}

	public void addNotesAndClickLogORPayORAuthorizedButton(WebDriver driver, ArrayList<String> test_steps,
			String Notes) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		clickAddNoteLinks(driver, test_steps);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentAddNoteTextBox);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_NoShowPayment_AddNoteTextBox, driver);
		res.CP_Reservation_NoShowPayment_AddNoteTextBox.sendKeys(Notes);
		test_steps.add("Input Notes: <b>" + Notes + "</b>");
		reslogger.info("Input Notes: " + Notes);
		clickLogORPayAuthorizedButton(driver, test_steps);
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
		reslogger.info("Loading Done");
	}

	public void verifyReservationPopWindowPolicyName(WebDriver driver, ArrayList<String> test_steps, String PolicyName,
			String PolicyType) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait5Second();
		if (PolicyType.equals("No Show") || PolicyType.contains("Cancel")) {
			Utility.ScrollToElement(res.NoShowAndCancelReservation_PolicyName, driver);
			assertTrue(res.NoShowAndCancelReservation_PolicyName.getText().toLowerCase().trim()
					.contains(PolicyName.toLowerCase().trim()), "Failed: To verify Reservation Window Policy Name");
		} else if (PolicyType.equals("Check In")) {
			Utility.ScrollToElement(res.CheckInReservation_PolicyName, driver);
			assertTrue(res.CheckInReservation_PolicyName.getText().toLowerCase().trim()
					.equals(PolicyName.toLowerCase().trim()), "Failed: To verify Reservation Window Policy Name");
		}

		test_steps.add("Verified Policy Name:<b> " + PolicyName + "</b>");
		reslogger.info("Verified Policy Name " + PolicyName);
	}

	public void verifyPolicyToolTip(WebDriver driver, ArrayList<String> test_steps, String PolicyName,
			String PolicyDesc, String PolicyType) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Actions action = new Actions(driver);

		if (PolicyType.contains("Cancel")) {
			action.moveToElement(res.NoShowAndCancelReservation_PolicyName).perform();
			assertTrue(res.CancelRoom_ToolTip_PolicyName.getText().toLowerCase().trim()
					.equals(PolicyName.toLowerCase().trim()), "Failed: To verify Tooltip Policy Name");
			test_steps.add("Verified ToolTip Policy Name:<b> " + PolicyName + "</b>");
			reslogger.info("Verified ToolTip Policy Name " + PolicyName);
			assertTrue(res.CancelRoom_ToolTip_PolicyDescription.getText().toLowerCase().trim()
					.equals(PolicyDesc.toLowerCase().trim()), "Failed: To verify Tooltip Policy Description");
			test_steps.add("Verified ToolTip Policy Description:<b> " + PolicyDesc + "</b>");
			reslogger.info("Verified ToolTip Policy Description " + PolicyDesc);

		} else if (PolicyType.equals("No Show")) {
			action.moveToElement(res.NoShowAndCancelReservation_PolicyName).perform();
			assertTrue(res.CancelRoom_ToolTip_PolicyDescription.getText().toLowerCase().trim()
					.equals(PolicyDesc.toLowerCase().trim()), "Failed: To verify Tooltip Policy Description");
			test_steps.add("Verified ToolTip Policy Description:<b> " + PolicyDesc + "</b>");
			reslogger.info("Verified ToolTip Policy Description " + PolicyDesc);

		} else if (PolicyType.equals("Check In")) {
			action.moveToElement(res.CheckInReservation_PolicyName).perform();
			assertTrue(res.CancelRoom_ToolTip_PolicyDescription.getText().toLowerCase().trim()
					.equals(PolicyDesc.toLowerCase().trim()), "Failed: To verify Tooltip Policy Description");
			test_steps.add("Verified ToolTip Policy Description:<b> " + PolicyDesc + "</b>");
			reslogger.info("Verified ToolTip Policy Description " + PolicyDesc);

		}

	}

	public void verifyReservationPopWindowPostLabel(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.ReservationPopUp_PostLabel, driver);

		assertTrue(res.ReservationPopUp_PostLabel.isDisplayed(), "Failed: To verify  Reservation Post  Label");
		test_steps.add(" Verified: <b>" + res.ReservationPopUp_PostLabel.getText() + "</b>");
		reslogger.info("Verified: " + res.ReservationPopUp_PostLabel.getText());
	}

	public void Verify_VoidRoomCharge(WebDriver driver, ArrayList<String> test_steps, String Status)
			throws InterruptedException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.VoidRoomChargeLabel, driver);
		// Verified Reservation Page Void Room Charge Label
		assertTrue(CPReservationPage.VoidRoomChargeLabel.isDisplayed(),
				"Failed: To verify Reservation Page Void Room Charge Lable");
		if (Status.equals("Cancel")) {
			test_steps.add("Verified <b>Void Room Charge Label</b> ");
			reslogger.info("Verified  Void Room Charge Label");

		} else if (Status.equals("Check Out")) {
			test_steps.add("Verified <b>Void Room Charges for Unused Nights Label</b> ");
			reslogger.info("Verified  Void Room Charges for Unused Nights Label");
		}

	}

	public void verify_AccountFolio(WebDriver driver, ArrayList test_steps, String AccountName)
			throws InterruptedException {
		String folioSize = "//button[contains(@title,'Guest')]";
		Wait.WaitForElement(driver, folioSize);
		driver.findElement(By.xpath(folioSize)).click();
		Wait.wait2Second();

		String verify_AccountFolio = "//li//span[contains(text(),'" + AccountName.trim() + "')]";
		try {
			WebElement ele = driver.findElement(By.xpath(verify_AccountFolio));
			test_steps.add("Account Folio verified in reservation : " + AccountName);
			reslogger.info("Account Folio verified in reservation : " + AccountName);
		} catch (Exception e) {
			test_steps.add("Account Folio not created in reservation : " + AccountName);
			reslogger.info("Account Folio not created in reservation : " + AccountName);
		}
		folioSize = "//li//span[contains(text(),'Guest Folio For')]";
		Wait.WaitForElement(driver, folioSize);
		driver.findElement(By.xpath(folioSize)).click();
		Wait.wait2Second();
	}

	public String pay_Account(WebDriver driver, ArrayList test_steps, String AccountName, String IsChangeInPayAmount,
			String ChangedAmountValue, String TakePaymentType) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		res.CP_Reservation_Folio_Pay.click();
		test_steps.add("Clicking on Pay");
		reslogger.info("Clicking on Pay");

		test_steps.add("******************* Making account payment **********************");
		reslogger.info("******************* Making account payment **********************");
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_Amount);
		String amount = res.CP_Reservation_Folio_TakePayment_Amount.getText().trim();
		reslogger.info("amount : " + amount);
		test_steps.add("Amount before Pay : " + amount);
		reslogger.info("Amount before Pay : " + amount);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_PaymentButton + "/span");

		String paymentType = driver
				.findElement(By.xpath(OR_Reservation.CP_Reservation_Folio_TakePayment_PaymentButton + "/span"))
				.getText().trim();

		if (paymentType.contains(AccountName.trim())) {
			test_steps.add("Payment method is verified as account : " + paymentType);
			reslogger.info("Payment method is verified as account : " + paymentType);
		}

		// res.CP_Reservation_Folio_TakePayment_PaymentButton.click();

		if (IsChangeInPayAmount.equalsIgnoreCase("Yes")) {
			test_steps.add("Change the pay amount value : Yes");
			reslogger.info("Change the pay amount value : Yes");
			res.CP_Reservation_Folio_TakePayment_Amount.clear();
			res.CP_Reservation_Folio_TakePayment_Amount.sendKeys(Keys.chord(Keys.CONTROL, "a"));
			res.CP_Reservation_Folio_TakePayment_Amount.sendKeys(ChangedAmountValue);
			test_steps.add("Enter the Change Amount Value : " + ChangedAmountValue);
			reslogger.info("Enter the Change Amount Value : " + ChangedAmountValue);
			amount = ChangedAmountValue;
		} else {
			test_steps.add("paying the amount : " + amount);
			reslogger.info("paying the amount : " + amount);
		}

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_TypeButton);
		res.CP_Reservation_Folio_TakePayment_TypeButton.click();

		String type = "//h4[text()='Take Payment']/../..//label[text()='TYPE']/..//div/div//span[text()='"
				+ TakePaymentType.trim() + "']";
		Wait.WaitForElement(driver, type);
		driver.findElement(By.xpath(type)).click();
		test_steps.add("Select Take Payment Type : " + TakePaymentType);
		reslogger.info("Select Take Payment Type : " + TakePaymentType);

		String button = "//h4[text()='Take Payment']/../..//button[contains(text(),'" + amount.trim() + "')]";
		Wait.WaitForElement(driver, button);
		driver.findElement(By.xpath(button)).click();
		test_steps.add("Click on Pay");
		reslogger.info("Click on Pay");

		String takePayType = "//h4[contains(text(),'Successful')]/../..//label[text()='TYPE']/following-sibling::span";
		Wait.WaitForElement(driver, takePayType);
		String paytype = driver.findElement(By.xpath(takePayType)).getText().trim();
		assertEquals(paytype, TakePaymentType.trim());
		test_steps.add("Take Payment Type validated after payment : " + TakePaymentType);
		reslogger.info("Take Payment Type validated after payment : " + TakePaymentType);
		String status = "//h4[contains(text(),'Successful')]/../..//label[text()='Approved']";
		Wait.WaitForElement(driver, status);
		if (driver.findElement(By.xpath(status)).isDisplayed()) {
			test_steps.add("Transaction status is : Approved");
			reslogger.info("Transaction status is : Approved");
		} else {
			test_steps.add("Transaction status is not : Approved");
			reslogger.info("Transaction status is not : Approved");
		}

		String close = "//h4[contains(text(),'Successful')]/../..//button[text()='Close']";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		test_steps.add("Click on Close");
		reslogger.info("Click on Close");

		String saveFolio = "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save");
		reslogger.info("Click on Save");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
		return amount;
	}

	public void verify_AccountPaymentLineItem(WebDriver driver, ArrayList test_steps, String amount, String Account)
			throws InterruptedException {
		test_steps.add("******************* Verify account apayment line item **********************");
		reslogger.info("******************* Verify account payment line item **********************");

		String payment = "//td/a[contains(text(),'" + Account + "')]/../following-sibling::td//span[contains(text(),'"
				+ amount + "')]";
		Wait.WaitForElement(driver, payment);
		test_steps.add("Account payment line item displayed");
		reslogger.info("Account payment line item displayed");

		String line = "//td/a[contains(text(),'" + Account + "')]/../following-sibling::td//span[contains(text(),'"
				+ amount + "')]/../preceding-sibling::td[3]/a";
		Wait.WaitForElement(driver, line);
		driver.findElement(By.xpath(line)).click();
		test_steps.add("Opening Payment line item");
		reslogger.info("Opening Payment line item");
		Wait.wait5Second();
		String payemntType = "(//label[text()='Payment Method:']/following-sibling::div/select)[2]";

		WebElement pay = new Select(driver.findElement(By.xpath(payemntType))).getFirstSelectedOption();
		reslogger.info(pay.getText());
		if (pay.getText().trim().contains(Account)) {
			test_steps.add("Payment Method verified in line item : " + pay.getText());
			reslogger.info("Payment Method verified in line item : " + pay.getText());
		} else {
			test_steps.add("Payment Method not verified in line item : " + pay.getText());
			reslogger.info("Payment Method not verified in line item : " + pay.getText());
		}

		String amt = "(//label[text()='Amount:']/following-sibling::div//input)[2]";

		JavascriptExecutor js = (JavascriptExecutor) driver;
		String amtValue = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(amt)));
		reslogger.info(amtValue);
		if (amtValue.equalsIgnoreCase(amount)) {
			test_steps.add("Payment amount verified in line item : " + amount);
			reslogger.info("Payment amount verified in line item : " + amount);
		} else {
			test_steps.add("Payment amount not verified in line item : " + amount);
			reslogger.info("Payment amount not verified in line item : " + amount);
		}

		String payInfo = "//label[text()='Payment Info:']/following-sibling::div//textarea";
		String info = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(payInfo)));
		reslogger.info(info);
		Wait.wait2Second();
		String close = "//span[text()='Payment Details']/../../.././../../../..//button[text()='Close']";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		test_steps.add("Closeing Payment line item");
		reslogger.info("Closeing Payment line item");
		Wait.wait5Second();
	}

	public void verify_AccountPaymentLineItemHA(WebDriver driver, ArrayList test_steps, String amount, String Account)
			throws InterruptedException {
		test_steps.add("******************* Verify account apayment line item **********************");
		reslogger.info("******************* Verify account payment line item **********************");

		String payment = "//td/a[contains(text(),'" + Account
				+ "')]//..//following-sibling::td[@class='lineitem-amount']//span";
		Utility.app_logs.info("path: " + payment);
		Wait.WaitForElement(driver, payment);
		test_steps.add("Account payment line item displayed");
		reslogger.info("Account payment line item displayed");

		String line = "//td/a[contains(text(),'" + Account + "')]";
		Wait.WaitForElement(driver, line);
		driver.findElement(By.xpath(line)).click();
		test_steps.add("Opening Payment line item");
		reslogger.info("Opening Payment line item");
		Wait.wait5Second();
		String payemntType = "(//label[text()='Payment Method:']/following-sibling::div/select)[2]";

		WebElement pay = new Select(driver.findElement(By.xpath(payemntType))).getFirstSelectedOption();
		reslogger.info(pay.getText());
		if (pay.getText().trim().contains(Account)) {
			test_steps.add("Payment Method verified in line item : " + pay.getText());
			reslogger.info("Payment Method verified in line item : " + pay.getText());
		} else {
			test_steps.add("Payment Method not verified in line item : " + pay.getText());
			reslogger.info("Payment Method not verified in line item : " + pay.getText());
		}

		String amt = "(//label[text()='Amount:']/following-sibling::div//input)[2]";

		JavascriptExecutor js = (JavascriptExecutor) driver;
		String amtValue = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(amt)));
		reslogger.info(amtValue);
		if (amtValue.equalsIgnoreCase(amount)) {
			test_steps.add("Payment amount verified in line item : " + amount);
			reslogger.info("Payment amount verified in line item : " + amount);
		} else {
			test_steps.add("Payment amount not verified in line item : " + amount);
			reslogger.info("Payment amount not verified in line item : " + amount);
		}

		String payInfo = "//label[text()='Payment Info:']/following-sibling::div//textarea";
		String info = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(payInfo)));
		reslogger.info(info);
		Wait.wait2Second();
		String close = "//span[text()='Payment Details']/../../.././../../../..//button[text()='Close']";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		test_steps.add("Closeing Payment line item");
		reslogger.info("Closeing Payment line item");
		Wait.wait5Second();
	}

	public String get_FilioBalance(WebDriver driver) {

		String bal = "//label[.='Balance: ']//following-sibling::span[@class='pamt']";
		Wait.WaitForElement(driver, bal);
		return driver.findElement(By.xpath(bal)).getText();

	}

	public String getFolioRoomCharges(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String roomCharges = res.Folio_RoomCharges.getText();
		roomCharges = roomCharges.replace("$", "");
		return roomCharges;

	}

	public String getFolioTaxServices(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String taxCharges = res.Folio_TaxServices.getText();
		taxCharges = taxCharges.replace("$", "");
		return taxCharges;

	}

	public void enter_TravelAgentMarketSegmentDetails(WebDriver driver, ArrayList test_steps, String TravelAgent,
			String MarketSegment, String Referral, String AccountType) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_TravelAgent);

		if (!(TravelAgent.equalsIgnoreCase("") || TravelAgent.isEmpty())) {
			res.CP_NewReservation_TravelAgent.clear();
			Wait.wait1Second();
			res.CP_NewReservation_TravelAgent.sendKeys(TravelAgent);
			Wait.wait2Second();
			String account = "//b[contains(text(),'" + TravelAgent.trim() + "')]/../../..";
			Wait.WaitForElement(driver, account);
			driver.findElement(By.xpath(account)).click();
			String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]/following-sibling::div//button[contains(text(),'No')]";
			Wait.WaitForElement(driver, dataYes);
			driver.findElement(By.xpath(dataYes)).click();
			test_steps.add(
					"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
			reslogger.info(
					"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
			Wait.wait5Second();

			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
			res.CP_NewReservation_PaymentMethod.click();
			String type = null;

			if (AccountType.contentEquals("Travel Agent") || AccountType.contains("Travel")
					|| AccountType.contains("Travel Agent")) {
				type = "Account (Travel Agent)";
			}
			String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'"
					+ type + "')]";
			Wait.WaitForElement(driver, paymentMethod);
			driver.findElement(By.xpath(paymentMethod)).click();
			String acc = "//label[text()='Account Name ']/preceding-sibling::input";
			Wait.WaitForElement(driver, acc);
			String accName = driver.findElement(By.xpath(acc)).getText();
			if (accName.contains(TravelAgent)) {
				test_steps.add("Account successfully associated : " + TravelAgent);
				reslogger.info("Account successfully associated : " + TravelAgent);

				test_steps.add("Verified payment method with Travel agent account" + TravelAgent);
				reslogger.info("Verified payment method with Travel agent account" + TravelAgent);
			}

			/*
			 * String
			 * policyYes="//div[contains(text(),'Do you want to replace the guest info')]/following-sibling::div//button[contains(text(),'Yes')]"
			 * ; Wait.WaitForElement(driver, policyYes);
			 * driver.findElement(By.xpath(policyYes)).click(); test_steps.
			 * add("Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes"
			 * ); reslogger.
			 * info("Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes"
			 * );
			 */
		}

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Market);
		Utility.ScrollToElement(res.CP_NewReservation_Market, driver);
		Wait.wait2Second();
		res.CP_NewReservation_Market.click();
		String market = "//label[text()='Market']/preceding-sibling::div//ul/li//span[contains(text(),'"
				+ MarketSegment.trim() + "')]";
		Wait.WaitForElement(driver, market);

		driver.findElement(By.xpath(market)).click();
		test_steps.add("Selected MarketSegment as : " + MarketSegment);
		reslogger.info("Selected MarketSegment as : " + MarketSegment);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Referral);
		res.CP_NewReservation_Referral.click();
		Wait.wait1Second();
		String ref = "(//label[text()='Referral']/preceding-sibling::div//ul/li//span[contains(text(),'"
				+ Referral.trim() + "')])[2]";
		reslogger.info(ref);
		Wait.WaitForElement(driver, ref);
		driver.findElement(By.xpath(ref)).click();
		test_steps.add("Selected Referral as : " + Referral);
		reslogger.info("Selected Referral as : " + Referral);
	}

	public void verify_DepositPolicyValidation(WebDriver driver, ArrayList test_steps, String CheckInDate,
			String CheckOutDate, String Value) throws ParseException, InterruptedException {
		test_steps.add("******************* Verify Deposit policy amount for " + Value
				+ " Night Room Charges **********************");
		reslogger.info("******************* Verify Deposit policy amount for " + Value
				+ " Night Room Charges **********************");
		SimpleDateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");
		Date dateObj1 = format1.parse(CheckInDate);
		Date dateObj2 = format1.parse(CheckOutDate);
		long diff = dateObj2.getTime() - dateObj1.getTime();
		int Nights = (int) (diff / (24 * 60 * 60 * 1000));
		reslogger.info("difference between days: " + Nights);

		String roomCharge = get_RoomCharge(driver, test_steps);
		Double d = Double.parseDouble(roomCharge);
		Double d1 = d / Nights;
		reslogger.info(d1);

		String payments = get_Payments(driver, test_steps);
		Double d2 = Double.parseDouble(payments);
		reslogger.info(d2);

		if (Double.compare(d1, d2) == 0) {
			test_steps.add("Deposit policy for " + Value + " Night Room Charges is validated : " + d1);
			reslogger.info("Deposit policy for " + Value + " Night Room Charges is validated : " + d1);
		} else {
			test_steps.add("Deposit policy for " + Value + " Night Room Charges is not validated : " + d1);
			reslogger.info("Deposit policy for " + Value + " Night Room Charges is not validated : " + d1);
		}
	}

	public int getTotalStayInfoRooms(WebDriver driver) {
		int totalRooms = 0;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_StayInfo_CheckInButton);
		totalRooms = res.CP_Reservation_StayInfo_CheckInButton.size();
		reslogger.info("Total Rooms Is: " + totalRooms);
		return totalRooms;
	}

	public int TotalRoom = 0, actualRoomCheckIn = 0;
	public String actualRoomCheckInCharge = null, actualRoomClassCheckIn = null, actualRoomAbbCheckIn = null;

	public void stayInfoCheckIn(WebDriver driver, ArrayList<String> test_steps, String roomNO, List<String> RoomCharges,
			ArrayList<String> Rooms, ArrayList<String> RoomAbbri) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_StayInfo_CheckInButton);
		TotalRoom = res.CP_Reservation_StayInfo_CheckInButton.size();
		for (int i = 0; i < TotalRoom; i++) {
			if (i == (Integer.parseInt(roomNO) - 1)) {
				actualRoomCheckIn = i;
				actualRoomCheckInCharge = RoomCharges.get(i).replace("$", "").trim();
				actualRoomClassCheckIn = Rooms.get(i);
				actualRoomAbbCheckIn = RoomAbbri.get(i);
				Utility.ScrollToElement(res.CP_Reservation_StayInfo_CheckInButton.get(i), driver);
				res.CP_Reservation_StayInfo_CheckInButton.get(i).click();
				test_steps.add(
						"Room <b>" + (Integer.parseInt(roomNO)) + "</b> in the MRB Reservation Click CheckIn Button");
				reslogger.info("Room " + (Integer.parseInt(roomNO)) + " in the MRB Reservation Click CheckIn Button");
				break;
			}
		}

	}

	public int TotalRooms = 0, actualRoomCheckOut = 0;
	public String actualRoomCheckOutCharge = null, actualRoomClassCheckOut = null, actualRoomAbbCheckOut = null,
			actualGuestNameCheckOut = null;

	public void stayInfoCheckOutRoom(WebDriver driver, ArrayList<String> test_steps, String roomNO,
			List<String> RoomCharges, ArrayList<String> Rooms, ArrayList<String> RoomAbbri, List<String> GuestName,
			String Phone, String Email) throws InterruptedException {
		List<String> Phones = Arrays.asList(Phone.split("\\|"));
		List<String> Emails = Arrays.asList(Email.split("\\|"));
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_StayInfo_CheckOutButton);
		TotalRooms = res.CP_Reservation_StayInfo_CheckOutButtonList.size();
		for (int i = 0; i < TotalRooms; i++) {
			if (i == (Integer.parseInt(roomNO) - 1)) {
				actualRoomCheckOut = i;
				actualRoomCheckOutCharge = RoomCharges.get(i).replace("$", "").trim();
				actualRoomClassCheckOut = Rooms.get(i);
				actualRoomAbbCheckOut = RoomAbbri.get(i);
				actualGuestNameCheckOut = GuestName.get(i);

				Utility.ScrollToElement(res.CP_Reservation_StayInfo_CheckOutButtonList.get(i), driver);
				res.CP_Reservation_StayInfo_CheckOutButtonList.get(i).click();
				test_steps.add(
						"Room <b>" + (Integer.parseInt(roomNO)) + "</b> in the MRB Reservation Click Check-Out Button");
				reslogger.info("Room " + (Integer.parseInt(roomNO)) + " in the MRB Reservation Click Check-Out Button");
				break;
			}
		}

	}

	public void verifyDepositAmountTripSummary(WebDriver driver, ArrayList test_steps, String CheckInDate,
			String CheckOutDate, String Value, Double DepositAmount) throws ParseException, InterruptedException {
		SimpleDateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");

		Date dateObj1 = format1.parse(CheckInDate);
		Date dateObj2 = format1.parse(CheckOutDate);
		long diff = dateObj2.getTime() - dateObj1.getTime();
		int Nights = (int) (diff / (24 * 60 * 60 * 1000));
		reslogger.info("difference between days: " + Nights);
		Wait.wait3Second();
		String roomCharge = get_TripSummaryRoomChargesWithoutCurrency(driver, test_steps);
		Double d = Double.parseDouble(roomCharge);
		Double d1 = d / Nights;
		reslogger.info(d1);

		// String payments=DepositAmount;
		Double d2 = DepositAmount;
		reslogger.info(d2);

		if (Double.compare(d1, d2) == 0) {
			test_steps.add("Deposit policy for " + Value + " Night Room Charges is validated : " + d1);
			reslogger.info("Deposit policy for " + Value + " Night Room Charges is validated : " + d1);
		} else {
			test_steps.add("Deposit policy for " + Value + " Night Room Charges is not validated : " + d1);
			reslogger.info("Deposit policy for " + Value + " Night Room Charges is not validated : " + d1);
		}
	}

	public String verifyGuestContactInfoForCheckInRoom(WebDriver driver, ArrayList<String> test_steps, int TotalRoom,
			String roomNO, String Salutation, String GuestName, String LastName, String Email, String Phone) {
		String guestNameCheckInRoom = null;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		WebElement element;

		List<String> salutation = Arrays.asList(Salutation.split("\\|"));
		List<String> guestFName = Arrays.asList(GuestName.split("\\|"));
		List<String> guestLName = Arrays.asList(LastName.split("\\|"));
		List<String> email = Arrays.asList(Email.split("\\|"));
		List<String> phone = Arrays.asList(Phone.split("\\|"));

		// int size=res.CP_Reservation_StayInfo_CheckInButton.size();
		for (int i = 0; i < TotalRoom; i++) {
			if (i == (Integer.parseInt(roomNO) - 1)) {

				String test = salutation.get(i).toString().trim();
				guestNameCheckInRoom = salutation.get(i) + " " + guestFName.get(i) + " " + guestLName.get(i);
				String guestName = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'irFormattedProfileName')][contains(text(),'"
						+ salutation.get(i) + " " + guestFName.get(i) + "')]";
				element = driver.findElement(By.xpath(guestName));
				if (element.isDisplayed()) {
					test_steps.add(" Stay Info Primary Guest Name verified : <b>" + salutation.get(i) + " "
							+ guestFName.get(i) + "</b>");
					reslogger.info(
							" Stay Info Primary Guest Name verified : " + salutation.get(i) + " " + guestFName.get(i));
				} else {
					test_steps.add(" Stay Info Primary Guest Name not found : <b>" + salutation.get(i) + " "
							+ guestFName.get(i) + "</b>");
					reslogger.info(
							" Stay Info Primary Guest Name not found : " + salutation.get(i) + " " + guestFName.get(i));
				}

				String lastName = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'LastName')][contains(text(),'"
						+ guestLName.get(i) + "')]";
				element = driver.findElement(By.xpath(lastName));
				if (element.isDisplayed()) {
					test_steps.add(" Stay Info Last Name verified : <b>" + guestLName.get(i) + "</b>");
					reslogger.info(" Stay Info Last Name verified : " + guestLName.get(i));
				} else {
					test_steps.add(" Stay Info Last Name not found : <b>" + guestLName.get(i) + "</b>");
					reslogger.info(" Stay Info Last Name not found : " + guestLName.get(i));
				}

				String emails = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'EmailAddress')][contains(text(),'"
						+ email.get(i) + "')]";
				element = driver.findElement(By.xpath(emails));
				if (element.isDisplayed()) {
					test_steps.add(" Stay Info Email verified : <b>" + email.get(i) + "</b>");
					reslogger.info(" Stay Info Email verified : " + email.get(i));
				} else {
					test_steps.add(" Stay Info Email not found : <b>" + email.get(i) + "</b>");
					reslogger.info(" Stay Info Email not found : " + email.get(i));
				}

				if (i == 0) {
					String extension = "1-(";
					String firstPhone = phone.get(i).substring(0, 3);
					String phoneBracket = firstPhone + ") ";
					String secondPhone = Phone.substring(3, 6);
					String lastPhone = Phone.substring(6, 10);
					String finalPhone = extension + phoneBracket + secondPhone + "-" + lastPhone;
					String phones = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'irFormattedPhoneNumber')][contains(text(),'"
							+ finalPhone + "')]";
					element = driver.findElement(By.xpath(phones));
					if (element.isDisplayed()) {
						test_steps.add(" Stay Info Phone verified : <b>" + finalPhone + "</b>");
						reslogger.info(" Stay Info Phone verified : " + finalPhone);
					} else {
						test_steps.add(" Stay Info Phone not found : <b>" + finalPhone + "</b>");
						reslogger.info(" Stay Info Phone not found : " + finalPhone);
					}
				} else {
					String phones = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'irFormattedPhoneNumber')][contains(text(),'"
							+ phone.get(i) + "')]";
					element = driver.findElement(By.xpath(phones));
					if (element.isDisplayed()) {
						test_steps.add(" Stay Info Phone verified : <b>" + phone.get(i) + "</b>");
						reslogger.info(" Stay Info Phone verified : " + phone.get(i));
					} else {
						test_steps.add(" Stay Info Phone not found : <b>" + phone.get(i) + "</b>");
						reslogger.info(" Stay Info Phone not found : " + phone.get(i));
					}
				}
			}

		}
		return guestNameCheckInRoom;
	}

	public void verifyStayInfoForCheckInRoom(WebDriver driver, ArrayList test_steps, int TotalRoom, String roomNO,
			String CheckInDate, String CheckOutDate, String Adults, String Children, String RoomClass,
			List<String> RoomCharges, String Salutation, String GuestName, String LastName, String RatePlan)
			throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		List<String> checkInDate = Arrays.asList(CheckInDate.split("\\|"));
		List<String> checkOutDate = Arrays.asList(CheckOutDate.split("\\|"));
		List<String> adults = Arrays.asList(Adults.split("\\|"));
		List<String> children = Arrays.asList(Children.split("\\|"));
		List<String> roomClass = Arrays.asList(RoomClass.split("\\|"));
		List<String> salutation = Arrays.asList(Salutation.split("\\|"));
		List<String> guestFName = Arrays.asList(GuestName.split("\\|"));
		List<String> guestLName = Arrays.asList(LastName.split("\\|"));
		List<String> ratePlan = Arrays.asList(RatePlan.split("\\|"));
		String[] checkIn, checkInSplit;
		String checkInMonth = "";
		SimpleDateFormat simpleDateformat;
		Date now;
		int Nights = 0;
		// int size=res.CP_Reservation_StayInfo_CheckInButton.size();
		for (int i = 0; i < TotalRoom; i++) {
			if (i == (Integer.parseInt(roomNO) - 1)) {
				// CheckIn

				SimpleDateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");
				Date dateObj1 = format1.parse(CheckInDate);
				Date dateObj2 = format1.parse(CheckOutDate);
				long diff = dateObj2.getTime() - dateObj1.getTime();
				Nights = (int) (diff / (24 * 60 * 60 * 1000));
				reslogger.info("difference between days: " + Nights);
				checkIn = checkInDate.get(i).split("/");
				if (checkIn[0].charAt(0) == '0') {
					checkIn[0] = checkIn[0].replace("" + checkIn[0].charAt(0), "");
				}
				checkInMonth = Utility.get_Month(checkInDate.get(i));
				String checkInDays = checkInMonth + " " + checkIn[0] + ", " + checkIn[2];
				String checkInDay = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='checkin']/span[text()='"
						+ checkInDays + "']";
				if (driver.findElement(By.xpath(checkInDay)).isDisplayed()) {
					test_steps.add("Stay Info checkin date verified : <b>" + checkInDays + "</b>");
					reslogger.info("Stay Info checkin date verified : " + checkInDays);
				} else {
					test_steps.add("Stay Info checkin date not found : <b>" + checkInDays + "</b>");
					reslogger.info("Stay Info checkin date not found : " + checkInDays);
				}
				now = new Date(checkIn[1] + "/" + checkIn[0] + "/" + checkIn[2]);
				simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the
																		// day
																		// of
																		// the
																		// week
																		// abbreviated
				simpleDateformat = new SimpleDateFormat("EEEE"); // the day of
																	// the week
																	// spelled
																	// out
																	// completely
				String dayofCheckIn = simpleDateformat.format(now);

				String chckInday = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='checkin']//span[text()='"
						+ dayofCheckIn.trim() + "']";
				if (driver.findElement(By.xpath(chckInday)).isDisplayed()) {
					test_steps.add(" Stay Info checkin day verified : <b>" + dayofCheckIn + "</b>");
					reslogger.info(" Stay Info checkin day verified : " + dayofCheckIn);
				} else {
					test_steps.add(" Stay Info checkin day not found : <b>" + dayofCheckIn + "</b>");
					reslogger.info(" Stay Info checkin day not found : " + dayofCheckIn);
				}

				// CheckOut
				String[] checkOut = checkOutDate.get(i).split("/");

				if (checkOut[0].charAt(0) == '0') {
					checkOut[0] = checkOut[0].replace("" + checkOut[0].charAt(0), "");
				}
				String checkOutMonth = Utility.get_Month(checkOutDate.get(i));
				String[] checkOutSplit = checkOut[2].split("\\|");
				String checkOutDays = checkInMonth + " " + checkOut[0] + ", " + checkOut[2];
				String checkoutDay = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='checkout']/span[text()='"
						+ checkOutDays + "']";
				if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
					test_steps.add(" Stay Info checkout date verified : <b>" + checkOutDays + "</b>");
					reslogger.info(" Stay Info checkout date verified : " + checkOutDays);
				} else {
					test_steps.add(" Stay Info checkout date not found : <b>" + checkOutDays + "</b>");
					reslogger.info(" Stay Info checkout date not found : " + checkOutDays);
				}

				now = new Date(checkOut[1] + "/" + checkOut[0] + "/" + checkOut[2]);
				simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the
																		// day
																		// of
																		// the
																		// week
																		// abbreviated
				simpleDateformat = new SimpleDateFormat("EEEE"); // the day of
																	// the week
																	// spelled
																	// out
																	// completely
				String dayofCheckOut = simpleDateformat.format(now);
				String chkOutDay = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='checkout']//span[text()='"
						+ dayofCheckOut.trim() + "']";
				if (driver.findElement(By.xpath(chkOutDay)).isDisplayed()) {
					test_steps.add(" Stay Info checkout day verified : <b>" + dayofCheckOut + "</b>");
					reslogger.info("Stay Info checkout day verified : " + dayofCheckOut);
				} else {
					test_steps.add(" Stay Info checkout day not found : <b>" + dayofCheckOut + "</b>");
					reslogger.info(" Stay Info checkout day not found : " + dayofCheckOut);
				}

				String nights = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='noofnights']/span[text()='"
						+ Nights + "N']";
				if (driver.findElement(By.xpath(nights)).isDisplayed()) {
					test_steps.add(" Stay Info Nights verified : <b>" + Nights + "N</b>");
					reslogger.info(" Stay Info Nights verified : " + Nights + "N");
				} else {
					test_steps.add(" Stay Info Nights not found : <b>" + Nights + "N</b>");
					reslogger.info(" Stay Info Nights not found : " + Nights + "N");
				}

				// Adults
				String adult = "//div[contains(@class,'ir-checkin-stay-info')]/..//div//span[contains(@data-bind,'numberOfAdults')]";
				adult = driver.findElement(By.xpath(adult)).getText().trim();
				if (adult.equals(adults.get(i).trim())) {
					test_steps.add(" Stay Info Adults verified : <b>" + adults.get(i) + "</b>");
					reslogger.info(" Stay Info Adults verified : " + adults.get(i));
				} else {
					test_steps.add(" Stay Info Adults not found : <b>" + adults.get(i) + "</b>");
					reslogger.info(" Stay Info Adults not found : " + adults.get(i));
				}
				// Children
				String childrens = "//div[contains(@class,'ir-guestInfo')]/div/span//span[contains(@data-bind,'text: $data.numberOfChildren')]";
				WebElement childrensList = driver.findElement(By.xpath(childrens));
				if (childrensList.getText().trim().contains(children.get(i).trim())) {
					test_steps.add(" Stay Info Children verified : <b>" + children.get(i) + "</b>");
					reslogger.info(" Stay Info Children verified : " + children.get(i));
				} else {
					test_steps.add(" Stay Info Children not found : <b>" + children.get(i) + "</b>");
					reslogger.info(" Stay Info Children not found : " + children.get(i));
				}
				// Room Class
				String roomClasss1 = "//div[contains(@class,'ir-checkin-stay-info')]/..//div//label[contains(@data-bind,'roomClassName')]";
				WebElement roomClasss = driver.findElement(By.xpath(roomClasss1));
				if (roomClasss.getText().trim().equals((roomClass.get(i) + ":").trim())) {
					test_steps.add(" Stay Info RoomClass verified : <b>" + roomClass.get(i) + "</b>");
					reslogger.info(" Stay Info RoomClass verified : " + roomClass.get(i));
				} else {
					test_steps.add(" Stay Info RoomClass not found : <b>" + roomClass.get(i) + "</b>");
					reslogger.info(" Stay Info RoomClass not found : " + roomClass.get(i));
				}
				// GUest Name
				String guestName = "//div[contains(@class,'ir-checkin-stay-info')]/..//span[contains(@data-bind,'guestNameInSync')][contains(text(),'"
						+ salutation.get(i) + " " + guestFName.get(i) + " " + guestLName.get(i) + "')]";
				WebElement element = driver.findElement(By.xpath(guestName));

				if (element.isDisplayed()) {
					test_steps.add(" Stay Info Guest Name verified : <b>" + salutation.get(i) + " " + guestFName.get(i)
							+ " " + guestLName.get(i) + "</b>");
					reslogger.info(" Stay Info Guest Name verified : " + salutation.get(i) + " " + guestFName.get(i)
							+ " " + guestLName.get(i));
				} else {
					test_steps.add(" Stay Info Guest Name not found : <b>" + salutation.get(i) + " " + guestFName.get(i)
							+ " " + guestLName.get(i) + "</b>");
					reslogger.info(" Stay Info Guest Name not found : " + salutation.get(i) + " " + guestFName.get(i)
							+ " " + guestLName.get(i));
				}

				// RatePlan
				String ratePlans1 = "//div[contains(@class,'ir-checkin-stay-info')]/..//span[contains(@data-bind,'ratePlanName')]";
				WebElement ratePlans = driver.findElement(By.xpath(ratePlans1));
				if (ratePlans.getText().trim().equals(ratePlan.get(i).trim())) {
					test_steps.add(" Stay Info RatePlan verified :<b> " + ratePlan.get(i) + "</b>");
					reslogger.info(" Stay Info RatePlan verified : " + ratePlan.get(i));
				} else {
					test_steps.add(" Stay Info RatePlan not found : <b>" + ratePlan.get(i) + "</b>");
					reslogger.info(" Stay Info RatePlan not found : " + ratePlan.get(i));
				}
				// RoomCharges
				String roomCharge1 = "//div[contains(@class,'ir-checkin-stay-info')]/..//div//label[contains(@data-bind,'roomTotal ')]";
				WebElement roomCharge = driver.findElement(By.xpath(roomCharge1));
				if (roomCharge.getText().trim().equalsIgnoreCase(RoomCharges.get(i).trim())) {
					test_steps.add(" Stay Info RoomCharges verified : <b>" + RoomCharges.get(i).trim() + "</b>");
					reslogger.info(" Stay Info RoomCharges verified : " + RoomCharges.get(i).trim());
				} else {
					test_steps.add(" Stay Info RoomCharges not found : <b>" + RoomCharges.get(i).trim() + "</b>");
					reslogger.info(" Stay Info RoomCharges not found : " + RoomCharges.get(i).trim());
				}

			}

		}
	}

	public void verifyStayInfoCheckOutButton(WebDriver driver, ArrayList<String> test_steps, int RoomNO)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		int size = res.CP_Reservation_StayInfo_ThreeDotts.size();
		for (int i = 0; i < size; i++) {
			if (i == RoomNO) {
				Utility.ScrollToElement(res.CP_Reservation_StayInfo_CheckOutButton, driver);

				assertTrue(res.CP_Reservation_StayInfo_CheckOutButton.isDisplayed(),
						"Failed: To verify Check Out Button");
				test_steps.add("Verified  <b>Check Out  </b> Button For Room: <b>" + i + "</b>");
				reslogger.info("Verified Check Out Button for Room : " + i);

			}

		}

	}

	// public int ButtonSize;

	public ArrayList<String> getStayInfoButtonsText(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		ArrayList<String> buttonsName = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_Reservation_StayInfo_TotalButton.get(0), driver);
		int ButtonSize = res.CP_Reservation_StayInfo_TotalButton.size();
		for (int i = 0; i < ButtonSize; i++) {
			String text = res.CP_Reservation_StayInfo_TotalButton.get(i).getText();
			buttonsName.add(res.CP_Reservation_StayInfo_TotalButton.get(i).getText().toString());
		}

		return buttonsName;
	}

	public void verifyRoomStatusAfterCheckedInRoom(WebDriver driver, ArrayList<String> test_steps, List<String> Rooms,
			ArrayList<String> RoomAbbri, String DirtyStatus, String CleanStatus, String VacantStatus,
			String OccupiedStatus) throws InterruptedException

	{

		RoomStatus roomstatus = new RoomStatus();

		for (int i = 0; i < Rooms.size(); i++) {
			String[] room = Rooms.get(i).split(":");
			String FinalRoom = room[1].trim();
			reslogger.info(" Room No: " + FinalRoom);
			String[] roomClass = RoomAbbri.get(i).split(":");
			String FinalRoomClass = roomClass[0].trim();
			reslogger.info(" Room Class: " + FinalRoomClass);
			roomstatus.searchByRoomHashVerifyRoomStatus(driver, FinalRoom, FinalRoomClass, DirtyStatus, CleanStatus,
					VacantStatus, OccupiedStatus, test_steps);

		}

	}

	public void verifyPaymentDetailUpdateBy(WebDriver driver, String NameOnCard, String UpdateByName,
			String PaymentMethod) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String path = null;
		WebElement element = null;
		if (PaymentMethod.equals("MC")) {
			path = "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-description']/a[contains(text(),'Name: "
					+ NameOnCard + "')]";
			element = driver.findElement(By.xpath(path));
			int counter = 0;
			while (true) {
				if (!element.isDisplayed()) {
					break;
				} else if (counter == 40) {
					break;
				} else {
					counter++;
				}
			}

			Utility.ScrollToElement(element, driver);

		} else if (PaymentMethod.equals("Cash")) {
			path = "//tbody[contains(@data-bind,'ComputedFolioItems')]//tr//td[@class='lineitem-description']/a[contains(text(),'"
					+ PaymentMethod + "')]";
			element = driver.findElement(By.xpath(path));
			int counter = 0;
			while (true) {
				if (!element.isDisplayed()) {
					break;
				} else if (counter == 40) {
					break;
				} else {
					counter++;
				}
			}
			Wait.explicit_wait_elementToBeClickable(element, driver);
			Wait.WaitForElement(driver, path);
			Utility.ScrollToElement(element, driver);

		}
		element.click();
		reslogger.info("Click on Description");
		String updatePath = "//div[@id='ReservationPaymetItemDetail']/..//div[contains(@data-bind,'root.ShowUpateUserInfo')]/span[contains(text(),'"
				+ UpdateByName + "')]";
		Wait.WaitForElement(driver, updatePath);
		WebElement elementUpdateBy = driver.findElement(By.xpath(updatePath));
		Utility.ScrollToElement(elementUpdateBy, driver);
		assertTrue(elementUpdateBy.isDisplayed(), "Failed: to Verify Update By");
		reslogger.info("Verified Update By: " + UpdateByName);

	}

	public void clickPaymentDetailCancel(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.Cp_Reservation_PaymentDetail_CanceButton);
		Utility.ScrollToElement(res.Cp_Reservation_PaymentDetail_CanceButton, driver);
		res.Cp_Reservation_PaymentDetail_CanceButton.click();
		test_steps.add("Clicking on Cancel Button");
		reslogger.info("Clicking on Cancel Button");
	}

	public void clickPaymentDetailClose(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.Cp_Reservation_PaymentDetail_CloseButton);
		Utility.ScrollToElement(res.Cp_Reservation_PaymentDetail_CloseButton, driver);
		res.Cp_Reservation_PaymentDetail_CloseButton.click();
		test_steps.add("Clicking on Close Button");
		reslogger.info("Clicking on Close Button");
	}

	public String getTripSummaryTripTotalAmountBeforeReservation(WebDriver driver, ArrayList test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_NewReservation_TripTotalAmount, driver);
		String Balance = res.CP_NewReservation_TripTotalAmount.getText();
		Balance = Balance.replace("$", "");
		test_steps.add("TripSummary Trip Total Before Reservation: " + Balance);
		reslogger.info("TripSummary Trip Total Before Reservation: " + Balance);
		return Balance;
	}

	public void clickCheckOutButton(WebDriver driver, ArrayList test_steps, int balance) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_ConfirmCheckOut_Button);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ConfirmCheckOut_Button, driver);
		if (balance > 0) {

			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckOut_Button, driver);
			res.CP_Reservation_ConfirmCheckOut_Button.click();
			test_steps.add("Clicking on  Proceed to Check-Out Payment Button");
			reslogger.info("Clicking on Proceed to Check-Out Payment Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);

		} else {
			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckOut_Button, driver);
			res.CP_Reservation_ConfirmCheckOut_Button.click();
			test_steps.add("Clicking on  Confirm Check-Out Button");
			reslogger.info("Clicking on Confirm  Check-Out Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
		}

	}

	public boolean confirmCheckOutButton = false, confirmCheckOutWithPayment = false;

	public String clickCheckOutButtons(WebDriver driver, ArrayList test_steps,

			String checkINConfirm, String CheckINCOnfirmWithPayment) throws InterruptedException {
		String buttonText = null;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_ConfirmCheckOut_Button);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ConfirmCheckOut_Button, driver);

		if (res.CP_Reservation_ConfirmCheckOut_Button.getText().toLowerCase().trim()
				.equals(checkINConfirm.toLowerCase().trim())) {

			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckOut_Button, driver);
			buttonText = res.CP_Reservation_ConfirmCheckOut_Button.getText();
			confirmCheckOutButton = true;
			reslogger.info(buttonText);
			res.CP_Reservation_ConfirmCheckOut_Button.click();
			test_steps.add("Clicking on  Confirm Check-Out Button");
			reslogger.info("Clicking on Confirm  Check-Out Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
		} else if (res.CP_Reservation_ConfirmCheckOut_Button.getText().toLowerCase().trim()
				.equals(CheckINCOnfirmWithPayment.toLowerCase().trim())) {

			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckOut_Button, driver);
			buttonText = res.CP_Reservation_ConfirmCheckOut_Button.getText();
			confirmCheckOutWithPayment = true;
			reslogger.info(buttonText);
			res.CP_Reservation_ConfirmCheckOut_Button.click();
			test_steps.add("Clicking on  Proceed to Check-Out Payment Button");
			reslogger.info("Clicking on Proceed to Check-Out Payment Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);

		}

		return buttonText;
	}

	/*
	 * public void AddLineItem(WebDriver driver, ArrayList test_steps, String
	 * LineItemCategory, String LineItemCategoryAmount) throws
	 * InterruptedException { test_steps.
	 * add("******************* Add Line Item to folio**********************");
	 * reslogger.
	 * info("******************* Add Line Item to folio**********************");
	 * 
	 * Elements_CPReservation ReservationPage = new
	 * Elements_CPReservation(driver);
	 * Wait.explicit_wait_visibilityof_webelement_150(ReservationPage.
	 * Add_LineItem, driver);
	 * Utility.ScrollToElement(ReservationPage.Add_LineItem, driver);
	 * ReservationPage.Add_LineItem.click(); test_steps.add("Click Add");
	 * reslogger.info("Click Add"); Wait.wait2Second();
	 * Utility.ScrollToElement(ReservationPage.Select_LineItem_Category,
	 * driver); Wait.wait2Second();
	 * Wait.explicit_wait_visibilityof_webelement(ReservationPage.
	 * Select_LineItem_Category, driver); new
	 * Select(ReservationPage.Select_LineItem_Category).selectByVisibleText(
	 * LineItemCategory); test_steps.add("Adding line item to folio : " +
	 * LineItemCategory); reslogger.info("Adding line item to folio : " +
	 * LineItemCategory);
	 * ReservationPage.Enter_LineItem_Amount.sendKeys(LineItemCategoryAmount);
	 * test_steps.add("Add Line Item Amount : " + LineItemCategoryAmount);
	 * reslogger.info("Add Line Item Amount : " + LineItemCategoryAmount);
	 * Wait.wait2Second(); ReservationPage.Commit_LineItem.click();
	 * test_steps.add("Click Commit"); reslogger.info("Click Commit"); String
	 * saveFolio = "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
	 * 
	 * Wait.WaitForElement(driver, saveFolio);
	 * driver.findElement(By.xpath(saveFolio)).click();
	 * test_steps.add("Click on Save Folio");
	 * reslogger.info("Click on Save Folio"); String loading =
	 * "(//div[@class='ir-loader-in'])"; int count = 0; while (true) { if
	 * (!driver.findElement(By.xpath(loading)).isDisplayed()) { break; } else if
	 * (count == 20) { break; } else { count++; Wait.wait2Second(); } }
	 * reslogger.info("Waited to loading symbol"); }
	 */

	public void AddLineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String LineItemCategoryAmount) throws InterruptedException {
		test_steps.add("******************* Add Line Item to folio**********************");
		reslogger.info("******************* Add Line Item to folio**********************");

		String[] item = LineItemCategory.split("\\|");
		String[] amt = LineItemCategoryAmount.split("\\|");
		for (int i = 0; i < item.length; i++) {

			Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
			Wait.explicit_wait_visibilityof_webelement_150(ReservationPage.Add_LineItem, driver);
			Utility.ScrollToElement(ReservationPage.Add_LineItem, driver);
			ReservationPage.Add_LineItem.click();
			test_steps.add("Click Add");
			reslogger.info("Click Add");
			Wait.wait2Second();
			Utility.ScrollToElement(ReservationPage.Select_LineItem_Category, driver);
			Wait.wait2Second();
			Wait.explicit_wait_visibilityof_webelement(ReservationPage.Select_LineItem_Category, driver);
			new Select(ReservationPage.Select_LineItem_Category).selectByVisibleText(item[i]);
			test_steps.add("Adding line item to folio : " + item[i]);
			reslogger.info("Adding line item to folio : " + item[i]);

			test_steps.add("Line Item Quantity : 1");
			reslogger.info("Line Item Quantity : 1");

			ReservationPage.Enter_LineItem_Amount.sendKeys(amt[i]);
			test_steps.add("Add Line Item Amount : " + amt[i]);
			reslogger.info("Add Line Item Amount : " + amt[i]);

			Wait.wait2Second();
			ReservationPage.Commit_LineItem.click();
			test_steps.add("Click Commit");
			reslogger.info("Click Commit");
			Wait.wait2Second();
		}
		String saveFolio = "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save Folio");
		reslogger.info("Click on Save Folio");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");
	}

	public void verifyAddedLineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String LineItemCategoryAmount) {
		test_steps.add("******************* Verifying Added Line Item to folio**********************");
		reslogger.info("******************* Verifying Added Line Item to folio**********************");

		String includeTax = "//span[text()='Include Taxes in Line Items']/preceding-sibling::input";
		Wait.WaitForElement(driver, includeTax);
		if (driver.findElement(By.xpath(includeTax)).isSelected()) {
			driver.findElement(By.xpath(includeTax)).click();
		}

		String line = "//td[@class='lineitem-category']/span";

		int count = driver.findElements(By.xpath(line)).size();
		String text = null;

		line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])";
		Wait.WaitForElement(driver, line);
		test_steps.add("Line item category verified in folio : " + LineItemCategory);
		reslogger.info("Line item category verified in folio : " + LineItemCategory);

		line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../following-sibling::td[contains(@class,'amount')]/span[contains(text(),'"
				+ LineItemCategoryAmount + "')]";
		Wait.WaitForElement(driver, line);
		test_steps.add("Line item category amount verified in folio : " + LineItemCategoryAmount);
		reslogger.info("Line item category amount verified in folio : " + LineItemCategoryAmount);
	}

	public void void_LineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String LineItemCategoryAmount) throws InterruptedException {
		test_steps.add("******************* Void Line Item to folio**********************");
		reslogger.info("******************* Void Line Item to folio**********************");

		Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
		String line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])";

		String input = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../preceding-sibling::td//input";
		Wait.WaitForElement(driver, input);
		driver.findElement(By.xpath(input)).click();
		test_steps.add("Selecting Line item category  : " + LineItemCategory);
		reslogger.info("Selecting Line item category  : " + LineItemCategory);

		String lineItemVoid = "//button[text()='Void']";
		Wait.WaitForElement(driver, lineItemVoid);
		driver.findElement(By.xpath(lineItemVoid)).click();
		test_steps.add("Voiding Line item category  : " + LineItemCategory);
		reslogger.info("Voiding Line item category  : " + LineItemCategory);

		String notes = "//h4[text()='Notes']/../..//textarea";
		Wait.WaitForElement(driver, notes);
		driver.findElement(By.xpath(notes)).sendKeys("Test Notes");
		test_steps.add("Enter Void notes as : Test Notes");
		reslogger.info("Enter Void notes as : Test Notes");

		String voidline = "//h4[text()='Notes']/../..//button[text()='Void']";
		Wait.WaitForElement(driver, voidline);
		driver.findElement(By.xpath(voidline)).click();
		test_steps.add("Click on void");
		reslogger.info("Click on void");

		Wait.wait2Second();
		ReservationPage.Commit_LineItem.click();
		test_steps.add("Click Commit");
		reslogger.info("Click Commit");
		Wait.wait2Second();
		String saveFolio = "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save Folio");
		reslogger.info("Click on Save Folio");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");

		line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])";

		count = driver.findElements(By.xpath(line)).size();
		if (count <= 0) {
			test_steps.add("Successfully voided line item : " + LineItemCategory);
			reslogger.info("Successfully voided line item : " + LineItemCategory);
		} else {
			test_steps.add("Line item not voided : " + LineItemCategory);
			reslogger.info("Line item not voided : " + LineItemCategory);
		}
	}

	public void verify_VoidedLineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String LineItemCategoryAmount) throws InterruptedException {
		test_steps.add("******************* Verify Voided Line Item to folio**********************");
		reslogger.info("******************* Verify Voided Line Item to folio**********************");

		String voidLine = "//span[text()='Display Void Items']/preceding-sibling::input";
		Wait.WaitForElement(driver, voidLine);
		if (!driver.findElement(By.xpath(voidLine)).isSelected()) {
			driver.findElement(By.xpath(voidLine)).click();
			test_steps.add("Click on Display Void Items");
			reslogger.info("Click on Display Void Items");
		}

		String line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])";

		int count = driver.findElements(By.xpath(line)).size();
		if (count > 0) {
			test_steps.add("Successfully verified voided line item : " + LineItemCategory);
			reslogger.info("Successfully verified voided line item : " + LineItemCategory);
		} else {
			test_steps.add("Line item not voided : " + LineItemCategory);
			reslogger.info("Line item not voided : " + LineItemCategory);
		}

		line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../preceding-sibling::td//img[contains(@data-bind,'PendingToPosted')]";
		count = driver.findElements(By.xpath(line)).size();
		if (count > 0) {
			test_steps.add("Successfully verified voided line item image");
			reslogger.info("Successfully verified voided line item image");
		} else {
			test_steps.add("Voided line item image validation failed");
			reslogger.info("Voided line item image validation failed");
		}

		line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../preceding-sibling::td[contains(@class,'note')]/img";
		String notes = driver.findElement(By.xpath(line)).getAttribute("title");

		if (notes.equalsIgnoreCase("test Notes")) {
			test_steps.add("Successfully verified voided line item notes");
			reslogger.info("Successfully verified voided line item notes");
		} else {
			test_steps.add("Voided line item notes validation failed");
			reslogger.info("Voided line item notes validation failed");
		}

		line = "((//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../following-sibling::td//span[contains(text(),'0.00')])[2]";
		count = driver.findElements(By.xpath(line)).size();
		if (count > 0) {
			test_steps.add("Successfully verified voided line item amount 0.00");
			reslogger.info("Successfully verified voided line item amount 0.00");
		} else {
			test_steps.add("Voided line item amount validation failed");
			reslogger.info("Voided line item amount validation failed");
		}

		if (driver.findElement(By.xpath(voidLine)).isSelected()) {
			driver.findElement(By.xpath(voidLine)).click();
			test_steps.add("Click on Display Void Items");
			reslogger.info("Click on Display Void Items");
		}
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: basicSearch_WithGuestName ' Description: Reservation
	 * search with guest name until it shows ' Input parameters: WebDriver,
	 * ArrayList, String ' Return value: String ' Created By: Naveen Banda '
	 * Created On: 04-04-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String searchWithGuestName(WebDriver driver, ArrayList<String> test_steps, String guestName)
			throws InterruptedException {
		Elements_Reservation_SearchPage resservationSearch = new Elements_Reservation_SearchPage(driver);

		String getGuestName = null;

		Wait.explicit_wait_visibilityof_webelement_120(resservationSearch.BasicGuestName, driver);
		resservationSearch.BasicGuestName.clear();
		resservationSearch.BasicGuestName.sendKeys(guestName);
		resservationSearch.Click_BasicSearch.click();
		Wait.wait3Second();
		if (resservationSearch.noRecordAlertMessage.isDisplayed()) {
			for (int i = 0; i < 5; i++) {
				resservationSearch.Click_BasicSearch.click();
				Wait.wait3Second();
				if (!resservationSearch.noRecordAlertMessage.isDisplayed()) {
					getGuestName = resservationSearch.Get_Guest_Name.getAttribute("title");
					break;
				}
			}
		} else {
			getGuestName = resservationSearch.Get_Guest_Name.getAttribute("title");
		}
		reslogger.info("Searching for a reservation with guest name as : <b>" + guestName + "</b>");
		test_steps.add("Searching for a reservation with guest name as : <b>" + guestName + "</b>");
		return getGuestName;
	}

	public void verifyCheckInPolicy(WebDriver driver, ArrayList<String> test_steps, String policyName,
			String policyText) throws ParseException, InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(
				By.xpath(OR_Reservation.CP_Reservation_POLICIESANDDISCLAIMERS_CheckINPolicyCollapse), driver);
		Utility.ScrollToViewElementINMiddle(driver, res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyCollapse);
		res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyCollapse.click();

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkInPolicyName), driver);
		String checkinPolicyName = res.checkInPolicyName.getText();
		assertEquals(checkinPolicyName, policyName, "Failed - Associated policy is not matched with created one");
		test_steps.add("Successfully verified associated check-in policy as : <b>" + checkinPolicyName + "</b>");

		String checkinPolicyToolTip = res.checkInPolicyToolTip.getAttribute("title");
		assertEquals(checkinPolicyToolTip, policyName, "Failed - Associated policy is not matched with created one");
		test_steps.add("Successfully verified associated check-in policy tool tip text as : <b>" + checkinPolicyToolTip
				+ "</b>");

		if(Utility.validateString(policyText)){
			String checkInPolicyText = res.checkInPolicyText.getText();
			assertEquals(checkInPolicyText, policyText, "Failed - Associated policy text is not matched with created one");
			test_steps.add("Successfully verified associated check-in policy text as : <b>" + checkInPolicyText + "</b>");
		}

	}

	/*
	 * ======= Elements_Reservation ReservationPage = new
	 * Elements_Reservation(driver);
	 * Wait.explicit_wait_visibilityof_webelement(ReservationPage.
	 * Click_Email_icon, driver);
	 * Utility.ScrollToElement(ReservationPage.Click_Email_icon, driver);
	 * 
	 * ReservationPage.Click_Email_icon.click();
	 * Utility.app_logs.info("Click Mail Icon");
	 * Wait.explicit_wait_xpath(OR.Verify_Send_Email_Popup, driver);
	 * Wait.explicit_wait_absenceofelement(OR.
	 * Verify_loading_popup_mailContentPopUp, driver); Wait.wait5Second();
	 * String GetEmailid = ReservationPage.Get_email_Id.getText();
	 * reslogger.info(GetEmailid + "" + GetEmailid);
	 * 
	 * ReservationPage.Get_email_Id.clear(); Wait.wait3Second();
	 * ReservationPage.Get_email_Id.sendKeys(Email);
	 * 
	 * if(Attachment.equalsIgnoreCase("")||Attachment.equals(null)) {
	 * Utility.app_logs.info("No Attachment"); }else { new
	 * Select(ReservationPage.Select_Attachment).selectByVisibleText(Attachment)
	 * ; } Wait.wait5Second(); ReservationPage.Click_Send_Email.click();
	 * Utility.app_logs.info("Click Send Email "); Wait.wait10Second(); }
	 * 
	 * } >>>>>>> AUTOMATION-1361
	 */
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickOnGuestName ' Description: Clicking on guest name
	 * after searching for a reservation ' Input parameters: WebDriver,
	 * ArrayList ' Return value: void ' Created By: Naveen Banda ' Created On:
	 * 04-04-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void clickOnGuestName(WebDriver driver, ArrayList<String> test_steps) {
		try {
			Elements_Reservation_SearchPage resservationSearch = new Elements_Reservation_SearchPage(driver);
			Wait.explicit_wait_visibilityof_webelement_120(resservationSearch.Get_Guest_Name, driver);
			resservationSearch.Get_Guest_Name.click();
			test_steps.add("Clicked on guest name and opened guest profile");
		} catch (Exception e) {

		}
	}

	public ArrayList<String> cancelPaymentCalculations(ArrayList<String> baseAmount, ArrayList<String> totalNights,
			String attribute, String attributeValue) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		ArrayList<String> roomCharges = new ArrayList<>();
		ArrayList<String> amountDetails = new ArrayList<>();
		double amountToDeduct = 0.00;
		for (int i = 0; i < baseAmount.size(); i++) {
			roomCharges
					.add(df.format((Double.parseDouble(baseAmount.get(i))) * (Double.parseDouble(totalNights.get(i)))));
		}
		if (attribute.equalsIgnoreCase("Room Charges")) {
			for (int i = 0; i < roomCharges.size(); i++) {
				double abc = (Double.parseDouble(roomCharges.get(i))) * (Double.parseDouble(attributeValue));
				double perc = abc / 100;
				amountToDeduct = amountToDeduct + perc;
			}
		} else if (attribute.equalsIgnoreCase("First Night")) {
			for (int i = 0; i < baseAmount.size(); i++) {
				amountToDeduct = amountToDeduct + Double.parseDouble(baseAmount.get(i));
			}
		}
		amountDetails.add(df.format(amountToDeduct));
		return amountDetails;
	}

	// public ArrayList<String> checkInPaymentCalculations(ArrayList<String>
	// baseAmount, ArrayList<String> totalNights, String policyFor,
	// String percentage, String taxes) {
	// DecimalFormat df = new DecimalFormat("0.00");
	// df.setMaximumFractionDigits(2);
	// ArrayList<String> roomCharges = new ArrayList<>();
	// ArrayList<String> amountDetails = new ArrayList<>();
	// double balance = 0.00;
	// double amount = 0.00;
	// for (int i = 0; i < baseAmount.size(); i++) {
	// roomCharges.add(df.format(
	// (Double.parseDouble(baseAmount.get(i)))*(Double.parseDouble(totalNights.get(i)))
	// ) );
	// }
	// if (policyFor.equalsIgnoreCase("Capture")) {
	// for (int i = 0; i < roomCharges.size(); i++) {
	// double abc =
	// (Double.parseDouble(roomCharges.get(i)))*(Double.parseDouble(percentage));
	// double perc = abc/100;
	// balance = balance+perc;
	// }
	// }else if (policyFor.equalsIgnoreCase("Authorize")) {
	// for (int i = 0; i < roomCharges.size(); i++) {
	// double abc =
	// (Double.parseDouble(roomCharges.get(i)))*(Double.parseDouble(percentage));
	// double perc = abc/100;
	// balance = balance+perc;
	// }
	// }
	// return amountDetails;
	// }

	public ArrayList<String> paymentCheckInPopupVerify(WebDriver driver, ArrayList<String> test_steps, String title,
			String expiryDate, String nameOnCard, String cardNo, String paymentMethod, String type, String percentage,
			String policyFor, String policyName, String policyText, ArrayList<String> baseAmount,
			ArrayList<String> totalNights, String taxes, String attr, String attrValue) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> details = new ArrayList<>();
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle), driver);
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		try {

			String titleDisplayed = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText();
			reslogger.info(" Verified Payment Page Title : " + titleDisplayed);
			assertEquals(titleDisplayed, title, "Failed: To verify Payment Page Title");
			test_steps.add(" Verified Payment Page Title :<b> " + title + "</b>");

			WebElement paymentElement = driver.findElement(By.xpath(
					"//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + paymentMethod + "']"));
			String paymentMethodDisplayed = paymentElement.getText().trim();
			assertEquals(paymentMethodDisplayed, paymentMethod, "Failed: To verify Payment Method");
			test_steps.add(" Verified Payment Method:<b> " + paymentMethodDisplayed + "</b> ");
			reslogger.info(" Verified Payment Method: " + paymentMethodDisplayed);

			String cardNoDisplayed = ((String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_CardNumber)).trim();
			assertEquals(cardNoDisplayed, cardNo, "Failed: To verify Card Number");
			test_steps.add(" Verified Card Number: <b>" + cardNoDisplayed + "</b>");
			reslogger.info(" Verified Card Number");

			String nameOnCardDisplayed = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_NameOnCard);
			assertEquals(nameOnCardDisplayed, nameOnCard, "Failed: To verify Name on Card ");
			test_steps.add("Verified Name on Card:<b>  " + nameOnCard + "</b>");
			reslogger.info(" Verified Name on Card");
			String expiryDateDisplayed = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_Expiry);
			assertEquals(expiryDateDisplayed, expiryDate, "Failed: To verify Expiry Date ");
			test_steps.add(" Verified Expiry Date:<b> " + expiryDateDisplayed + "</b>");
			reslogger.info(" Verified Expiry Date");

			String typeDisplayed = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.getText().trim();
			String amountDisplayed = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText().trim();
			String balanceDisplayed = null;
			String buttonExp = null;
			String buttonDisplayed = res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().trim();

			if (title.contains("Check In Payment")) {
				balanceDisplayed = res.CheckInPaymentPopup_Balance.getText().replace("$ ", "");
				String policyDisplayed = res.checkInPaymentPopupPolicyName.getText();
				assertEquals(policyDisplayed, policyName, "Failed: To verify  type");
				test_steps.add(" Verified Policy name is :<b> " + policyDisplayed + "</b>");
				reslogger.info(" Verified Check-in payment type is : " + policyDisplayed);

				Actions action = new Actions(driver);
				action.moveToElement(res.CheckInReservation_PolicyName).perform();
				String toolTipPolicyDesc = res.CancelRoom_ToolTip_PolicyDescription.getText();
				reslogger.info(" Verified tool tip text at policy name : " + toolTipPolicyDesc);
				assertEquals(toolTipPolicyDesc, policyText, "Failed: To verify Payment Page Title");
				test_steps.add(" Verified tool tip text at policy name as :<b> " + toolTipPolicyDesc + "</b>");

				assertEquals(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.isEnabled(), false,
						"Failed - Amount is in read only and can be changed");
				test_steps.add("Amount for <b>" + policyFor + "</b> is read only and can't be changeds");

				assertEquals(typeDisplayed, type, "Failed: To verify  type");
				test_steps.add(" Verified Check-in payment type is :<b> " + type + "</b>");
				reslogger.info(" Verified Check-in payment type is : " + type);

				try {
					boolean readOnly = driver.findElement(By.xpath(
							"//button[@class='btn dropdown-toggle disabled btn-default'][@title='" + type + "']"))
							.isDisplayed();// res.paymentCheckInPopupAuthTypeReadOnly.isDisplayed();
					assertEquals(readOnly, true, "Failed - Payment type is read only");
					test_steps.add(
							"Successfully verified Payment type <b>" + type + "</b> is read only and can't be changed");
				} catch (Exception e) {
					boolean editable = driver
							.findElement(By
									.xpath("//button[@class='btn dropdown-toggle btn-default'][@title='" + type + "']"))
							.isDisplayed();
					assertEquals(editable, true, "Failed - Payment type is editable");
					test_steps.add("Successfully verified Payment type is editable");
				}
				double totalAmount = 0.00;
				for (int i = 0; i < baseAmount.size(); i++) {
					totalAmount = (totalAmount)
							+ (Double.parseDouble(baseAmount.get(i)) * Double.parseDouble(totalNights.get(i)));
				}
				totalAmount = totalAmount + Double.parseDouble(taxes);
				String balanceExp = df.format(totalAmount);
				double amount2 = (totalAmount * Double.parseDouble(percentage)) / 100;
				String amountExp = df.format(amount2);
				details.add(balanceExp);
				details.add(amountExp);
				test_steps.add("Calculated policy amount <b>" + percentage + "</b> % from total amount <b>" + balanceExp
						+ "</b> is <b>" + amountExp + "</b>");

				assertEquals(amountDisplayed, amountExp,
						"Failed - Amount for " + policyFor + " while check-in is not applied as per policy");
				test_steps.add("Successfully Verified Amount for <b>" + policyFor
						+ "</b> while check-in is applied as per policy is <b>" + amountExp + "</b>");

				assertEquals(balanceDisplayed, balanceExp, "Failed - Verify balance inclunding taxes");
				test_steps.add("Successfully Verified balance inclunding taxes <b>" + balanceExp + "</b>");

				if (policyFor.equalsIgnoreCase("Capture")) {
					buttonExp = "PAY $ " + df.format(amount2);
				} else if (policyFor.equalsIgnoreCase("Authorize")) {
					buttonExp = policyFor.toUpperCase() + " $ " + df.format(amount2);
				}
				assertEquals(buttonDisplayed, buttonExp, "Failed: To verify Button for " + buttonDisplayed);
				test_steps.add(" Verified button text as :<b> " + buttonDisplayed + "</b>");
				reslogger.info(" Verified button text as :<b> " + buttonDisplayed + "</b>");

			} else if (title.contains("Cancellation Payment")) {
				balanceDisplayed = res.cancelPaymentPopupBalance.getText().replace("$ ", "");
				if (!(typeDisplayed.equalsIgnoreCase(type))) {
					res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
					driver.findElement(
							By.xpath("//ul[@class='dropdown-menu inner']//span[contains(text(),'" + type + "')]"))
							.click();
				}
				ArrayList<String> payment = cancelPaymentCalculations(baseAmount, totalNights, attr, attrValue);
				details.add(payment.get(0));
				assertEquals(balanceDisplayed, payment.get(0),
						"Failed - Balance while cancelling reservation is not matched with one night charge");
				test_steps.add("Successfully verified balance displayed on cancel reservation popup is <b>"
						+ balanceDisplayed + "</b>");
				assertEquals(amountDisplayed, payment.get(0),
						"Failed - Amount while cancelling reservation is not matched with one night charge");
				test_steps.add("Successfully verified amount displayed on cancel reservation popup is <b>"
						+ amountDisplayed + "</b>");
				if (type.equalsIgnoreCase("Capture")) {
					buttonExp = "PAY $ " + payment.get(0);
				} else if (type.equalsIgnoreCase("Refund")) {
					buttonExp = "REFUND $ " + payment.get(0);
				}
				assertEquals(buttonDisplayed, buttonExp, "Failed - Verify button for " + type);
				test_steps.add("Successfully verified button text displayed on cancel reservation popup is <b>"
						+ buttonDisplayed + "</b>");
			}
		} catch (Exception e) {
			reslogger.info(e);
		}
		return details;
	}

	public void verifyFolioLineItem(WebDriver driver, ArrayList<String> test_steps, ArrayList<String> baseAmount,
			ArrayList<String> totalNights, String totalAmount, String paymentType, String authAmount, String policyFor)
			throws Exception {
		ArrayList<String> roomCharges = new ArrayList<>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		double folioRoomChargeLineItems = 0.00;
		double folioAuthOrCaptureLineItems = 0.00;
		double folioRoomCharges = 0.00;
		double folioIncidentals = 0.00;
		double folioTaxes = 0.00;
		double folioPayments = 0.00;
		double folioTotalCharges = 0.00;
		double folioBalance = 0.00;
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);

		List<WebElement> rooms = res.guestFolioAllGuestsFromDropDown;
		reslogger.info(rooms.size());
		for (WebElement roomsToSelect : rooms) {
			res.guestFolioGuestDropDown.click();
			Wait.wait1Second();
			roomsToSelect.click();
			List<WebElement> roomChargesAmount = driver.findElements(
					By.xpath("//span[contains(text(), 'Room Charge')]/../..//td[@class='lineitem-amount']"));
			if (roomChargesAmount.size() != 0) {
				for (WebElement getRoomCharges : roomChargesAmount) {
					double roomCharge = Double.parseDouble(getRoomCharges.getText().replace("$ ", ""));
					folioRoomChargeLineItems = folioRoomChargeLineItems + roomCharge;
				}
			}
			List<WebElement> authOrCaptureAmount = driver.findElements(
					By.xpath("//span[contains(text(), '" + paymentType + "')]/../..//td[@class='lineitem-amount']"));
			if (authOrCaptureAmount.size() != 0) {
				for (WebElement getAuthOrCaptureCharges : authOrCaptureAmount) {
					double authOrCaptureCharge = Double
							.parseDouble(getAuthOrCaptureCharges.getText().replace("$ ", ""));
					folioAuthOrCaptureLineItems = folioAuthOrCaptureLineItems + authOrCaptureCharge;
				}
			}
			// folioAuthOrCaptureLineItems =
			// folioAuthOrCaptureLineItems+Double.parseDouble(getFolioAmount(driver,
			// test_steps, paymentType));
			folioRoomCharges = folioRoomCharges + Double.parseDouble(get_RoomCharge(driver, test_steps));
			folioTotalCharges = folioTotalCharges + Double.parseDouble(get_TotalCharges(driver, test_steps));
			folioPayments = folioPayments + Double.parseDouble(get_Payments(driver, test_steps));
			String balance1 = get_Balance(driver, test_steps);
			if (balance1.contains("(") || balance1.contains(")")) {
				balance1 = balance1.replace("(", "");
				balance1 = balance1.replace(")", "");
				folioBalance = folioBalance - Double.parseDouble(balance1);
			} else {
				folioBalance = folioBalance + Double.parseDouble(get_Balance(driver, test_steps));
			}
		}
		String balanceExp = null;
		String paymentsExp = null;
		if (policyFor.equalsIgnoreCase("Capture")) {
			double amount2 = Double.parseDouble(authAmount);
			double total2 = Double.parseDouble(totalAmount);
			double balance2 = total2 - amount2;
			double payments2 = total2 - balance2;
			balanceExp = df.format(balance2);
			paymentsExp = df.format(payments2);
		} else if (policyFor.equalsIgnoreCase("Authorize")) {
			balanceExp = totalAmount;
			paymentsExp = "0.00";
		}
		String folioRoomChargeLineItemsDisplayed = df.format(folioRoomChargeLineItems);
		String folioAuthOrCaptureLineItemsDisplayed = df.format(folioAuthOrCaptureLineItems);
		String folioRoomChargesDisplayed = df.format(folioRoomCharges);
		String folioTotalChargesDisplayed = df.format(folioTotalCharges);
		String folioPaymentsDisplayed = df.format(folioPayments);
		String folioBalanceDisplayed = df.format(folioBalance);

		assertEquals(folioRoomChargeLineItemsDisplayed, totalAmount,
				"Failed - Room charges line items for all nights mismatched at folio tab");
		test_steps.add("Successfully verified Room charge line items for all nights after check-in is <b>"
				+ folioRoomChargeLineItemsDisplayed + "</b>");

		assertEquals(folioAuthOrCaptureLineItemsDisplayed, authAmount,
				"Failed - " + policyFor + " amount mismatched at folio tab ");
		test_steps.add("Successfully verified " + policyFor + " amount after check-in is <b>"
				+ folioAuthOrCaptureLineItemsDisplayed + "</b>");
		double totalAmount2 = 0.00;
		for (int i = 0; i < baseAmount.size(); i++) {
			totalAmount2 = totalAmount2
					+ Double.parseDouble(baseAmount.get(i)) * Double.parseDouble(totalNights.get(i));
		}
		String roomChargeExp = df.format(totalAmount2);
		assertEquals(folioRoomChargesDisplayed, roomChargeExp, "Failed - Room charges mismatched at folio tab ");
		test_steps.add("Successfully verified Room charges after check-in is <b>" + folioRoomChargesDisplayed + "</b>");

		assertEquals(folioTotalChargesDisplayed, totalAmount, "Failed - Total charges mismatched at folio tab ");
		test_steps.add("Successfully verified Total charges after check-in is <b>" + folioTotalCharges + "</b>");

		assertEquals(folioPaymentsDisplayed, paymentsExp, "Failed - payments mismatched at folio tab ");
		test_steps.add("Successfully verified payments after check-in is <b>" + folioPaymentsDisplayed + "</b>");

		assertEquals(folioBalanceDisplayed, balanceExp, "Failed - Balance mismatched at folio tab ");
		test_steps.add("Successfully verified balance after check-in is <b>" + folioBalanceDisplayed + "</b>");

	}

	public void verifyAuthAmountInFolioHistory(WebDriver driver, ArrayList<String> test_steps, String descExp,
			String categoryExp, String policyFor) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement_120(res.folioHistoryTabSearchBox, driver);
		String desc = null;
		String category = null;
		if (policyFor.equalsIgnoreCase("Capture")) {
			descExp = "Captured" + descExp;
			desc = res.folioHistoryCapturePaymentDesc.getText();
			category = res.folioHistoryCapturePaymentCategory.getText();
		} else if (policyFor.equalsIgnoreCase("Authorize")) {
			descExp = "Authorized" + descExp;
			desc = res.folioHistoryAuthPaymentDesc.getText();
			category = res.folioHistoryAuthPaymentCategory.getText();
		}
		assertEquals(desc, descExp,
				"Failed - Description of payment for " + policyFor + " is not matched at folio history tab");
		test_steps.add("Successfully verified Description of payment for " + policyFor + " at folio history is <b>"
				+ desc + "</b>");

		assertEquals(category, categoryExp,
				"Failed - Category of authorized payment is not matched at folio history tab");
		test_steps.add(
				"Successfully verified Category of authorized payment at folio history is <b>" + category + "</b>");
	}

	public void selectRoomAtPaymentCheckInPopup(WebDriver driver, ArrayList<String> test_steps,
			ArrayList<String> roomNumbers) throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.roomNoDDAtCheckInPopup), driver);
		List<WebElement> roomDropDowns = res.roomsDDAtCheckInPopup;
		List<WebElement> roomClasses = res.confirmCheckInPaymentRoomClassName;
		for (int i = 0; i < roomDropDowns.size(); i++) {
			int index = i + 1;
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.confirmCheckInPaymentRoomClassName), driver);
			String roomClass = roomClasses.get(i).getText();
			roomDropDowns.get(i).click();
			String roomNo = roomNumbers.get(i);
			String xpathOfRoomNo = "(//span[@class='text' and text()='" + roomNo + "'])[" + index + "]";
			Wait.waitForElementToBeClickable(By.xpath(xpathOfRoomNo), driver);
			driver.findElement(By.xpath(xpathOfRoomNo)).click();
			test_steps.add("Selecting room number <b>" + roomNo + "</b> for <b>" + roomClass
					+ "</b> room class during payment check-in");
		}
	}

	public void checkInPaymentSuccessPopupVerify(WebDriver driver, ArrayList<String> test_steps, String NoShowSuccess,
			String Status, String PaymentMethod, String balance, String Type, String amount, String policyName,
			String policyFor, String policyText) throws Exception {
		try {
			String validate = null;
			DecimalFormat df = new DecimalFormat("0.00");
			df.setMaximumFractionDigits(2);
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.explicit_wait_visibilityof_webelement_120(res.CP_Reservation_NoShowSuccess, driver);
			Utility.ScrollToElement(res.CP_Reservation_NoShowSuccess, driver);

			String balanceDisplayed = res.NoShowSuccess_Balance.getText().replace("$ ", "").trim();
			String balanceCalculated = null;
			String amountDisplayed = res.noShowSuccessPolicyAmount.getText().replace("$ ", "");
			String amountExp = balance;

			if (NoShowSuccess.contains("Check-In Successful")) {
				validate = "Check-In";
				// Verified Success-Balance
				double balance2 = Double.parseDouble(balance);
				double amount2 = Double.parseDouble(amount);
				if (policyFor.equalsIgnoreCase("Capture")) {
					balance2 = balance2 - amount2;
					balanceCalculated = df.format(balance2);
				} else if (policyFor.equalsIgnoreCase("Authorize")) {
					balanceCalculated = df.format(balance2);
				}
				amountExp = amount;
				// Verified Success-policy name
				String policyDisplayed = res.noShowSuccessPolicyName.getText();
				assertEquals(policyDisplayed, policyName, "Failed: To verify policy name");
				test_steps.add(" Verified policy name : <b>" + policyDisplayed + "</b>");
				reslogger.info("  Verified policy name : " + policyDisplayed);

				Actions action = new Actions(driver);
				action.moveToElement(res.noShowSuccessPolicyName).perform();

				String toolTipPolicyDesc = res.CancelRoom_ToolTip_PolicyDescription.getText();
				reslogger.info(" Verified tool tip text at policy name : " + toolTipPolicyDesc);
				assertEquals(toolTipPolicyDesc, policyText, "Failed: To verify Payment Page Title");
				test_steps.add(" Verified tool tip text at policy name as :<b> " + toolTipPolicyDesc + "</b>");

			} else if (NoShowSuccess.contains("Cancellation Successful")) {
				validate = "Cancellation";
				balanceCalculated = "0.00";
				amountExp = df.format(Double.parseDouble(balance));
			}

			assertEquals(balanceDisplayed, balanceCalculated, "Failed: To verify Success Page Balance");
			test_steps.add(" Verified Balance during : " + validate + " <b> " + balanceDisplayed + "</b>");
			reslogger.info("  Verified Balance: " + balanceDisplayed);

			assertEquals(amountDisplayed, amountExp, "Failed : To verify Success Page Amount");
			test_steps.add(" Verified Amount  during : " + validate + " <b> " + amountDisplayed + "</b>");
			reslogger.info("  Verified Amount : " + amountDisplayed);

			// Verified Success -Message
			String header = res.CP_Reservation_NoShowSuccess.getText().trim();
			assertEquals(header, NoShowSuccess, "Failed: To verify Success Header");
			test_steps.add("  Verified header of the " + validate + " payment popup: <b>" + NoShowSuccess + "</b>");
			reslogger.info("  Verified header of the " + validate + " payment popup :" + NoShowSuccess);

			// Verified Success-Date
			// === For check-in/cancel it takes current day as updated so
			// validating with current day
			String date = Utility.getCurrentDate("MM/dd/yyyy");
			// date = Utility.parseDate(date, "dd/MM/yyyy", "MM/dd/yyyy");
			String dateDisplayed = res.NoShowSuccess_Date.getText();
			assertEquals(dateDisplayed, date, "Failed: To verify  Success Page Date");
			test_steps.add("  Verified Date of " + validate + " : <b>" + date + "</b>");
			reslogger.info("  Verified Date of " + validate + " : " + date);

			// Verified Success-Type
			String typeDisplayed = res.NoShowSuccess_Type.getText().trim();
			assertEquals(typeDisplayed, Type, "Failed: To verify  Success Page Type");
			test_steps.add("  Verified " + validate + " payment type : <b>" + Type + "</b>");
			reslogger.info(" Verified " + validate + " payment type : " + Type);

			// Verified Success-Payment Method
			String paymentMethodDisplayed = res.CP_Reservation_NoShowSuccessPaymentMethod.getText().trim();
			assertEquals(paymentMethodDisplayed, PaymentMethod, "Failed: To verify Success Page Payment Method");
			test_steps.add("  Verified " + validate + " Payment Method: <b>" + PaymentMethod + "</b>");
			reslogger.info("  Verified " + validate + " Payment Method: " + PaymentMethod);

			// Verified Success -Status
			String statusDisplayed = res.CP_Reservation_NoShowSuccessStatus.getText().trim();
			assertEquals(statusDisplayed, Status, "Failed: To verify  Success Page Status ");
			test_steps.add("  Verified Status of " + validate + " payment :<b> " + Status + "</b>");
			reslogger.info(" Verified Status of " + validate + " payment : " + Status);

		} catch (Exception e) {
			reslogger.info(e);
		}
	}

	public String verifyCheckOutPaymentWindow(WebDriver driver, ArrayList<String> test_steps, String Title,
			String PaymentType, String Type, String AmountRemaining,

			String cardNo, String nameOnCard, String expiryDate) throws InterruptedException {
		String CheckOutAmount = null;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopupTitle);
		Utility.ScrollToElement(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle, driver);
		// Verified No Show Payment Page Title
		assertTrue(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText().toLowerCase().trim()
				.equals(Title.toLowerCase().trim()), "Failed: To verify  Payment Page Title");
		test_steps.add(" Verified Payment Title:<b> " + Title + "</b>");
		reslogger.info(" Verified Payment Title: " + Title);
		String path = "//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + PaymentType + "']";
		reslogger.info(path);
		WebElement paymentElement = driver.findElement(By.xpath(path));
		// Verified Payment Page Type
		type = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.getText().toLowerCase().trim();
		assertEquals(type, Type.toLowerCase().trim(), "Failed: To verify  Page Type: " + Type);
		test_steps.add(" Verified Type : <b> " + Type + "</b>");
		reslogger.info(" Verified Type: " + Type);

		// Get Amount
		CheckOutAmount = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		double PaymentAmount = Double.valueOf(CheckOutAmount);
		int amt = (int) PaymentAmount;
		CheckOutAmount = String.valueOf(amt);
		reslogger.info(CheckOutAmount);

		// Get Balance
		String balance = "";
		balance = res.NoShowCancelPaymentPopup_Balance.getText().replace("$", "");

		double balanceDouble = Double.valueOf(balance);
		int balanceInt = (int) balanceDouble;
		balance = String.valueOf(balanceInt);
		if (CheckOutAmount.equals(AmountRemaining)) {
			assertEquals(CheckOutAmount, AmountRemaining, "Failed: To verify Payment Page Amount: " + AmountRemaining);
			test_steps.add("Verified Amount : <b> " + AmountRemaining + "</b>");
			reslogger.info(" Verified Amount: " + AmountRemaining);
			assertEquals(balance, AmountRemaining, "Failed: To verify Payment Page Balance: " + AmountRemaining);
			test_steps.add("Verified Balance : <b> " + AmountRemaining + "</b>");
			reslogger.info(" Verified Balance: " + AmountRemaining);
		}

		if (PaymentType.equals("Cash")) {
			// Verified Payment Page Payment Method
			assertTrue(paymentElement.isDisplayed(), "Failed: To verify Payment Method");
			test_steps.add(" Verified Payment Method:<b> " + PaymentType + "</b> ");
			reslogger.info(" Verified Payment Method: " + PaymentType);

		} else if (PaymentType.equals("MC")) {
			// Verified No Show Payment Page Payment Method
			assertTrue(paymentElement.isDisplayed(), "Failed: To verify Payment Method");
			test_steps.add(" Verified Payment Method:<b> " + PaymentType + "</b> ");
			reslogger.info(" Verified Payment Method: " + PaymentType);

			// Verified No Show Payment Page Card No
			JavascriptExecutor executor = (JavascriptExecutor) driver;
			String CardNo = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_CardNumber);
			reslogger.info(CardNo);
			// Verify Card Number

			assertTrue(CardNo.contains(cardNo), "Failed: To verify Card Number");
			test_steps.add(" Verified Card Number: <b>" + CardNo + "</b>");
			reslogger.info(" Verified Card Number");
			String NameOnCard = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_NameOnCard);
			reslogger.info(NameOnCard);

			// Verify Name on Card Number
			assertEquals(NameOnCard.toLowerCase().trim(), (nameOnCard.toLowerCase().trim()),
					"Failed: To verify Name on Card ");
			test_steps.add("Verified Name on Card:<b>  " + nameOnCard + "</b>");
			reslogger.info(" Verified Name on Card");

			String ExpiryDate = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_Expiry);
			reslogger.info(ExpiryDate);
			reslogger.info(expiryDate);
			// Verify Expiry Date
			assertEquals(ExpiryDate, expiryDate, "Failed: To verify Expiry Date ");
			test_steps.add(" Verified Expiry Date:<b> " + ExpiryDate + "</b>");
			reslogger.info(" Verified Expiry Date");
		}

		return CheckOutAmount;
	}

	public void selectTypeWhileCheckIN(WebDriver driver, ArrayList<String> test_steps, String Type)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_Type);
		Utility.ScrollToElement(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType, driver);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
		test_steps.add("Click on Type Drop Down Box");
		reslogger.info("Click on Type Drop Down Box");
		List<String> type = Arrays.asList(Type.split("\\|"));
		for (int i = 0; i < res.CP_CheckInTypeOptions.size(); i++) {
			if (res.CP_CheckInTypeOptions.get(i).getText().toLowerCase().trim()
					.equals(type.get(1).toLowerCase().trim())) {
				Wait.WaitForElement(driver, OR_Reservation.CP_CheckInTypeOptions);
				Utility.ScrollToElement(res.CP_CheckInTypeOptions.get(i), driver);
				res.CP_CheckInTypeOptions.get(i).click();
				test_steps.add(" Selected  Type : <b>" + res.CP_CheckInTypeOptions.get(i).getText() + "</b>");
				reslogger.info(" Selected Type " + res.CP_CheckInTypeOptions.get(i).getText());
				break;
			}
			res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
			test_steps.add(" Click on Type Drop Down Box Again");
			reslogger.info(" Click on Type Drop Down Box Again");

		}
	}

	public void selectType(WebDriver driver, ArrayList<String> test_steps, String Type) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_Type);
		Utility.ScrollToElement(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType, driver);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
		test_steps.add("Click on Type Drop Down Box");
		reslogger.info("Click on Type Drop Down Box");
		Wait.WaitForElement(driver, OR_Reservation.CP_CheckInTypeOptions);
		String path = "//div[contains(@data-bind,'IsAuthTypeDropDownVisible')]//ul//li/a/span[@class='text'][contains(text(),'"
				+ Type + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		element.click();
		test_steps.add(" Selected  Type : <b>" + Type + "</b>");
		reslogger.info(" Selected Type " + Type);
	}

	public void checkInPaymentSuccessPopupClose(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String close = "//ul[@class='sec_nav']//li[5]//i";
		Wait.WaitForElement(driver, OR_Reservation.NoShowSuccess_CloseButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowSuccess_CloseButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowSuccess_CloseButton), driver);

		res.CP_Reservation_NoShowSuccessCloseButton.click();

		test_steps.add("Closing payment successful popup");
		try {
			Wait.WaitForElement(driver, close);

		} catch (Exception e) {
			reslogger.info(e);
		}

		unsavedDataYesClick(driver, test_steps);

		test_steps.add("Closing payment successful popup");

	}

	/*
	 * public void checkInPaymentSuccessPopupClose(WebDriver driver,
	 * ArrayList<String> test_steps) { Elements_CPReservation res = new
	 * Elements_CPReservation(driver); String close =
	 * "//ul[@class='sec_nav']//li[5]//i";
	 * res.CP_Reservation_NoShowSuccessCloseButton.click();
	 * test_steps.add("Closing payment successful popup"); try {
	 * Wait.WaitForElement(driver, close);
	 * 
	 * } catch (Exception e) { reslogger.info(e); } }
	 */
	public void verifyFolioLineItem(WebDriver driver, ArrayList<String> test_steps, String totalAmount,
			String paymentType, String authAmount, String policyFor) {
		ArrayList<String> roomCharges = new ArrayList<>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		double folioRoomCharge = 0.00;
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		List<WebElement> roomChargesAmount = driver
				.findElements(By.xpath("//span[contains(text(), 'Room Charge')]/../..//td[@class='lineitem-amount']"));
		String roomCharge = get_RoomCharge(driver, test_steps);
		String balance = get_Balance(driver, test_steps);

		String balanceExp = null;
		if (policyFor.equalsIgnoreCase("Capture")) {
			double amount2 = Double.parseDouble(authAmount);
			double total2 = Double.parseDouble(totalAmount);
			double balance2 = total2 - amount2;
			balanceExp = df.format(balance2);
		} else if (policyFor.equalsIgnoreCase("Authorize")) {
			balanceExp = totalAmount;
		}
		assertEquals(balance, balanceExp, "Failed - Balance mismatched at folio tab ");
		test_steps.add("Successfully verified balance after check-in is " + balance);
		if (roomChargesAmount.size() > 1) {
			for (WebElement webElement : roomChargesAmount) {
				String roomChargeMulti = webElement.getText().replace("$ ", "");
				roomCharges.add(roomChargeMulti);
				double abc = Double.parseDouble(roomChargeMulti);
				folioRoomCharge = folioRoomCharge + abc;
			}
		} else {
			folioRoomCharge = Double.parseDouble(getFolioAmount(driver, test_steps, "Room Charge"));
		}

		String folioRoomCharges = df.format(folioRoomCharge);

		String folioAuthAmount = getFolioAmount(driver, test_steps, paymentType);
		assertEquals(folioRoomCharges, totalAmount, "Failed - Room charge mismatched at folio line item ");
		test_steps.add("Successfully verified Room charge at folio line item after check-in is ");

		assertEquals(folioAuthAmount, authAmount, "Failed - Authorization amount mismatched at folio line item ");
		test_steps.add("Successfully verified Authorization amount at folio line item after check-in");

	}

	public String getFolioAmount(WebDriver driver, ArrayList test_steps, String category) {
		String Balance = driver
				.findElement(
						By.xpath("//span[contains(text(), '" + category + "')]/../..//td[@class='lineitem-amount']"))
				.getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("Folio amount for : " + category + " is :: " + Balance);
		reslogger.info("Folio amount for : " + category + " is :: " + Balance);
		return Balance;
	}

	public void verifyTripAmountDetailsAtTop(WebDriver driver, ArrayList<String> test_steps, String totalExp,
			String amount, String policyFor) {
		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			DecimalFormat df = new DecimalFormat("0.00");
			df.setMaximumFractionDigits(2);
			String total = res.tripTotalAmountAtTop.getText().replace("$ ", "");
			assertEquals(total, totalExp, "Failed - Total amount in trip summary displayed at top is not matched");
			test_steps
					.add("Successfully verified Total amount in trip summary displayed at top as <b>" + total + "</b>");
			test_steps.add("Amount paid during check-in is <b>" + amount + "</b>");
			String balanceExp = null;
			if (policyFor.equalsIgnoreCase("Capture")) {
				double amount2 = Double.parseDouble(amount);
				double total2 = Double.parseDouble(totalExp);
				double balance = total2 - amount2;
				balanceExp = df.format(balance);
			} else if (policyFor.equalsIgnoreCase("Authorize")) {
				balanceExp = totalExp;
			}
			String balance = res.tripBalanceAmountAtTop.getText().replace("$ ", "");
			reslogger.info(balance);
			reslogger.info(balanceExp);
			assertEquals(balance, balanceExp, "Failed - Balance amount on top is not matched");
			test_steps.add(
					"Successfully verified Balance amount in trip summary displayed at top as <b>" + balance + "</b>");
		} catch (Exception e) {

		}
	}

	public void selectRoomAtCheckInPopup(WebDriver driver, String roomNo) throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement_120(res.roomNoDDAtCheckInPopup, driver);
		try {
			res.roomNoDDAtCheckInPopup.click();
			Wait.wait1Second();
			driver.findElement(By.xpath("//span[@class='text' and text()='" + roomNo + "']")).click();
			Wait.wait1Second();
		} catch (Exception e) {
			res.roomNoDDAtCheckInPopup.click();
			Wait.wait1Second();
			driver.findElement(By.xpath("//span[@class='text' and text()='" + roomNo + "']")).click();
			Wait.wait1Second();
		}
	}

	public void checkInPaymentSuccessPopupVerify(WebDriver driver, ArrayList<String> test_steps, String NoShowSuccess,
			String Status, String PaymentMethod, String date, String balance, String Type, String amount,
			String policyName, String policyFor, String policyText) throws Exception {
		try {
			DecimalFormat df = new DecimalFormat("0.00");
			df.setMaximumFractionDigits(2);
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.explicit_wait_visibilityof_webelement_120(res.CP_Reservation_NoShowSuccess, driver);
			Utility.ScrollToElement(res.CP_Reservation_NoShowSuccess, driver);
			// Verified Success -Message

			String header = res.CP_Reservation_NoShowSuccess.getText().trim();
			assertEquals(header, NoShowSuccess, "Failed: To verify Success Header");
			test_steps.add("  Verified header of the popup: <b>" + NoShowSuccess + "</b>");
			reslogger.info("  Verified header of the popup :" + NoShowSuccess);
			// Verified Success-Date

			date = Utility.parseDate(date, "dd/MM/yyyy", "MM/dd/yyyy");
			String dateDisplayed = res.NoShowSuccess_Date.getText();
			assertEquals(dateDisplayed, date, "Failed: To verify  Success Page Date");
			test_steps.add("  Verified Date of check-in : <b>" + date + "</b>");
			reslogger.info("  Verified Date of check-in : " + date);

			// Verified Success-Balance
			String balanceDisplayed = res.NoShowSuccess_Balance.getText().replace("$ ", "").trim();
			String balanceCalculated = null;
			double balance2 = Double.parseDouble(balance);
			double amount2 = Double.parseDouble(amount);
			if (policyFor.equalsIgnoreCase("Capture")) {
				balance2 = balance2 - amount2;
				balanceCalculated = df.format(balance2);
			} else if (policyFor.equalsIgnoreCase("Authorize")) {
				balanceCalculated = df.format(balance2);
			}
			assertEquals(balanceDisplayed, balanceCalculated, "Failed: To verify Success Page Balance");
			test_steps.add(" Verified Balance: <b>" + balanceDisplayed + "</b>");
			reslogger.info("  Verified Balance: " + balanceDisplayed);

			// Verified Success-policy name
			String policyDisplayed = res.noShowSuccessPolicyName.getText();
			assertEquals(policyDisplayed, policyName, "Failed: To verify Success Page Balance");
			test_steps.add(" Verified policy name : <b>" + policyDisplayed + "</b>");
			reslogger.info("  Verified policy name : " + policyDisplayed);

			Actions action = new Actions(driver);
			action.moveToElement(res.noShowSuccessPolicyName).perform();

			String toolTipPolicyDesc = res.CancelRoom_ToolTip_PolicyDescription.getText();
			reslogger.info(" Verified tool tip text at policy name : " + toolTipPolicyDesc);
			assertEquals(toolTipPolicyDesc, policyText, "Failed: To verify Payment Page Title");
			test_steps.add(" Verified tool tip text at policy name as :<b> " + toolTipPolicyDesc + "</b>");

			// Verified Success-Amount
			reslogger.info("Amount: " + amount);
			String path = "//span[contains(@data-bind,'noShow.PaymentAmount')][contains(text(),'$ " + amount + "')]|"
					+ "//span[contains(@data-bind,'cancel.PaymentAmount')][contains(text(),'$ " + amount + "')]|"
					+ "//span[contains(@data-bind,'checkInDetail.PaymentAmount')][contains(text(),'$ " + amount + "')]";
			WebElement AmountElement = driver.findElement(By.xpath(path));

			assertTrue(AmountElement.isDisplayed(), "Failed: To verify  Success Page Amount: " + amount);
			test_steps.add("  Verified Amount: <b>" + amount + "</b>");
			reslogger.info("  Verified Amount: " + amount);

			// Verified Success-Type
			reslogger.info(type);
			String typeDisplayed = res.NoShowSuccess_Type.getText().trim();
			assertEquals(typeDisplayed, Type, "Failed: To verify  Success Page Type");
			test_steps.add("  Verified check-in payment type : <b>" + Type + "</b>");
			reslogger.info(" Verified check-in payment type : " + Type);

			// Verified Success-Payment Method
			String paymentMethodDisplayed = res.CP_Reservation_NoShowSuccessPaymentMethod.getText().trim();
			assertEquals(paymentMethodDisplayed, PaymentMethod, "Failed: To verify Success Page Payment Method");
			test_steps.add("  Verified Payment Method: <b>" + PaymentMethod + "</b>");
			reslogger.info("  Verified Payment Method: " + PaymentMethod);

			// Verified Success -Status
			String statusDisplayed = res.CP_Reservation_NoShowSuccessStatus.getText().trim();
			assertEquals(statusDisplayed, Status, "Failed: To verify  Success Page Status ");
			test_steps.add("  Verified Status of payment :<b> " + Status + "</b>");
			reslogger.info(" Verified Status of payment : " + Status);
		} catch (Exception e) {

		}
	}

	public String CheckOutAmount = "";

	public void Verify_CheckOutPayment(WebDriver driver, ArrayList<String> test_steps, String Title, String PaymentType,
			String Type, String AmountRemaining, String cardNo, String nameOnCard, String expiryDate)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopupTitle);
		Utility.ScrollToElement(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle, driver);
		// Verified No Show Payment Page Title
		assertTrue(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText().toLowerCase().trim()
				.equals(Title.toLowerCase().trim()), "Failed: To verify  Payment Page Title");
		test_steps.add(" Verified Title:<b> " + Title + "</b>");
		reslogger.info(" Verified Title: " + Title);
		String path = "//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + PaymentType + "']";
		WebElement paymentElement = driver.findElement(By.xpath(path));

		// Verified Payment Page Type
		type = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.getText().toLowerCase().trim();
		assertTrue(type.equals(Type.toLowerCase().trim()), "Failed: To verify  Page Type: " + Type);
		test_steps.add(" Verified Type : <b> " + Type + "</b>");
		reslogger.info(" Verified Type: " + Type);

		// Get Amount
		CheckOutAmount = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		double PaymentAmount = Double.valueOf(CheckOutAmount);
		int amt = (int) PaymentAmount;
		CheckOutAmount = String.valueOf(amt);
		reslogger.info(CheckOutAmount);
		// Get Balance
		String balance = "";
		balance = res.NoShowCancelPaymentPopup_Balance.getText().replace("$", "");

		double balanceDouble = Double.valueOf(balance);
		int balanceInt = (int) balanceDouble;
		balance = String.valueOf(balanceInt);
		if (CheckOutAmount.equals(AmountRemaining)) {
			assertTrue(CheckOutAmount.equals(AmountRemaining),
					"Failed: To verify Payment Page Amount: " + AmountRemaining);
			test_steps.add("Verified Amount : <b> " + AmountRemaining + "</b>");
			reslogger.info(" Verified Amount: " + AmountRemaining);
			assertTrue(balance.equals(AmountRemaining), "Failed: To verify Payment Page Balance: " + AmountRemaining);
			test_steps.add("Verified Balance : <b> " + AmountRemaining + "</b>");
			reslogger.info(" Verified Balance: " + AmountRemaining);
		}

		if (PaymentType.equals("Cash")) {
			// Verified Payment Page Payment Method
			assertTrue(paymentElement.isDisplayed(), "Failed: To verify Payment Method");
			test_steps.add(" Verified Payment Method:<b> " + PaymentType + "</b> ");
			reslogger.info(" Verified Payment Method: " + PaymentType);

		} else if (PaymentType.equals("MC")) {
			// Verified No Show Payment Page Payment Method
			assertTrue(paymentElement.isDisplayed(), "Failed: To verify Payment Method");
			test_steps.add(" Verified Payment Method:<b> " + PaymentType + "</b> ");
			reslogger.info(" Verified Payment Method: " + PaymentType);

			// Verified No Show Payment Page Card No
			JavascriptExecutor executor = (JavascriptExecutor) driver;
			String CardNo = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_CardNumber);
			reslogger.info(CardNo);
			// Verify Card Number
			assertTrue(CardNo.contains(cardNo), "Failed: To verify Card Number");
			test_steps.add(" Verified Card Number: <b>" + CardNo + "</b>");
			reslogger.info(" Verified Card Number");
			String NameOnCard = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_NameOnCard);
			reslogger.info(NameOnCard);

			// Verify Name on Card Number
			assertTrue(NameOnCard.toLowerCase().trim().equals(nameOnCard.toLowerCase().trim()),
					"Failed: To verify Name on Card ");
			test_steps.add("Verified Name on Card:<b>  " + nameOnCard + "</b>");
			reslogger.info(" Verified Name on Card");

			String ExpiryDate = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_Expiry);
			reslogger.info(ExpiryDate);

			// Verify Expiry Date
			assertTrue(ExpiryDate.equals(expiryDate), "Failed: To verify Expiry Date ");
			test_steps.add(" Verified Expiry Date:<b> " + ExpiryDate + "</b>");
			reslogger.info(" Verified Expiry Date");
		}

	}

	public void Select_Type_Check_IN(WebDriver driver, ArrayList<String> test_steps, String Type)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_Type);
		Utility.ScrollToElement(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType, driver);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
		test_steps.add(" Click on Type Drop Down Box");
		reslogger.info(" Click on Type Drop Down Box");
		List<String> type = Arrays.asList(Type.split("\\|"));
		for (int i = 0; i < res.CP_CheckInTypeOptions.size(); i++) {
			if (res.CP_CheckInTypeOptions.get(i).getText().toLowerCase().trim()
					.equals(type.get(1).toLowerCase().trim())) {
				res.CP_CheckInTypeOptions.get(i).click();
				test_steps.add(" Selected  Type : <b>" + res.CP_CheckInTypeOptions.get(i).getText() + "</b>");
				reslogger.info(" Selected Type " + res.CP_CheckInTypeOptions.get(i).getText());
				break;
			}

		}

		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
		test_steps.add(" Click on Type Drop Down Box Again");
		reslogger.info(" Click on Type Drop Down Box Again");

	}

	public String CancelWindowVerifiedButtonAndPerformAction(WebDriver driver, ArrayList test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String buttonName = null;
		if (res.CP_Reservation_NoShow_ConfirmNoShowButton.isEnabled()) {
			buttonName = res.CP_Reservation_NoShow_ConfirmNoShowButton.getText();
			test_steps.add("Enabled Button: " + buttonName);
			reslogger.info("Enabled Button: " + buttonName);
		} else if (res.ProceedToPaymentButton.isEnabled()) {
			buttonName = res.ProceedToPaymentButton.getText();
			test_steps.add("Enabled Button: " + buttonName);
			reslogger.info("Enabled Button: " + buttonName);
		}

		return buttonName;
	}

	public void Click_Confirm_Button(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait2Second();
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_NoShow_ConfirmNoShowButton, driver);
		res.CP_Reservation_NoShow_ConfirmNoShowButton.click();

	}

	public void Click_Confirm_Payment_Button(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait2Second();
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_NoShow_ConfirmNoShowButton, driver);
		res.ProceedToPaymentButton.click();

	}

	public String CheckINCheckOutAmount = null;

	public void Get_Checkin_Amount(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		// Get Amount
		Amount = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		double noshowPaymentAmount = Double.valueOf(Amount);
		int amt = ((int) noshowPaymentAmount) / 2;
		CheckINCheckOutAmount = String.valueOf(amt);
		reslogger.info(CheckINCheckOutAmount);

	}

	public String get_Checkin_Amount(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		// Get Amount
		Amount = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		double noshowPaymentAmount = Double.valueOf(Amount);
		int amt = ((int) noshowPaymentAmount) / 2;
		String CheckINCheckOutAmount = String.valueOf(amt);
		reslogger.info(CheckINCheckOutAmount);

		return CheckINCheckOutAmount;
	}

	public ArrayList<String> checkInDate(WebDriver driver, int Days) throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckinDate);
		Wait.explicit_wait_visibilityof_webelement(elements.EnterCheckinDate, driver);
		Wait.explicit_wait_elementToBeClickable(elements.EnterCheckinDate, driver);
		elements.EnterCheckinDate.click();
		elements.EnterCheckinDate.clear();
		String checkInDate = ESTTimeZone.DateFormateForLineItem(Days);
		elements.EnterCheckinDate.sendKeys(checkInDate);
		testSteps.add("CheckIn date: " + checkInDate);
		return testSteps;
	}

	public ArrayList<String> checkOutDate(WebDriver driver, int Days) throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckout);
		Wait.explicit_wait_visibilityof_webelement(elements.EnterCheckout, driver);
		Wait.explicit_wait_elementToBeClickable(elements.EnterCheckout, driver);
		elements.EnterCheckout.click();
		elements.EnterCheckout.clear();
		String checkInDate = ESTTimeZone.DateFormateForLineItem(Days);
		elements.EnterCheckout.sendKeys(checkInDate);
		testSteps.add("CheckIn date: " + checkInDate);
		return testSteps;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <enter_Adults> ' Description: <Enter adult value> ' Input
	 * parameters: < String value> ' Return value: <array list> ' Created By:
	 * <Farhan Ghaffar> ' Created On: <04/17/2020>
	 * 
	 * ' Modified By | Description of Modification:
	 * ------------------------------------------ <mm/dd/yyyy>:<Developer name>:
	 * 1.Step modified 2.Step modified
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> enterAdult(WebDriver driver, String Adults) {
		Elements_CPReservation elementsReservation = new Elements_CPReservation(driver);
		ArrayList<String> testStep = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Adults);
		elementsReservation.CP_NewReservation_Adults.clear();
		elementsReservation.CP_NewReservation_Adults.sendKeys(Adults);
		testStep.add("Enter No of adults : " + Adults);
		reslogger.info("Enter No of adults : " + Adults);
		return testStep;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <enterChildren> ' Description: <Enter childern value> '
	 * Input parameters: < String value> ' Return value: <array list> ' Created
	 * By: <Farhan Ghaffar> ' Created On: <04/17/2020>
	 * 
	 * ' Modified By | Description of Modification:
	 * ------------------------------------------ <mm/dd/yyyy>:<Developer name>:
	 * 1.Step modified 2.Step modified
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> enterChildren(WebDriver driver, String Children) {

		Elements_CPReservation elementsReservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Children);
		elementsReservation.CP_NewReservation_Children.clear();
		elementsReservation.CP_NewReservation_Children.sendKeys(Children);
		testSteps.add("Enter No of Children : " + Children);
		reslogger.info("Enter No of Children : " + Children);
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <VeriGuestProfileCheckox> ' Description: <Verify create
	 * guest profile checkbox is checked or not> ' Input parameters: <boolean
	 * value> ' Return value: <array list> ' Created By: <Farhan Ghaffar> '
	 * Created On: <04/17/2020>
	 * 
	 * ' Modified By | Description of Modification:
	 * ------------------------------------------ <mm/dd/yyyy>:<Developer name>:
	 * 1.Step modified 2.Step modified
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> VerifyGuestProfileCheckox(WebDriver driver, boolean isChecked)
			throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckboxGuestProfile);
		Wait.explicit_wait_visibilityof_webelement(element.CheckboxGuestProfile, driver);
		Wait.explicit_wait_elementToBeClickable(element.CheckboxGuestProfile, driver);
		Utility.ScrollToElement(element.CheckboxGuestProfile, driver);
		if (isChecked) {
			if (element.CheckboxGuestProfile.isSelected()) {
				test_step.add("Verified create guest profile checkbox already checked");
			} else {
				element.CheckboxGuestProfile.click();
				test_step.add("Verified create guest profile checkbox is checked");
			}
		} else {
			if (!element.CheckboxGuestProfile.isSelected()) {
				element.CheckboxGuestProfile.click();
				test_step.add("Verified create guest profile checkbox is  unchecked");
			} else {
				test_step.add("Verified create guest profile checkbox already unchecked");
			}
		}

		return test_step;
	}

	public ArrayList<String> CheckInReservationWithOutPolicy(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckInPopupHeading);
		Wait.explicit_wait_visibilityof_webelement(element.CheckInPopupHeading, driver);
		Wait.explicit_wait_elementToBeClickable(element.CheckInPopupHeading, driver);
		assertEquals(element.CheckInPopupHeading.getText(), "Check In", "Failed: Check In popup heading is mismaching");
		test_steps.add("Verified checkin reservation opend");
		return test_steps;
	}

	public ArrayList<String> CheckInConfrimButton(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckinConfirmButton);
		Wait.explicit_wait_visibilityof_webelement(element.CheckinConfirmButton, driver);
		Wait.explicit_wait_elementToBeClickable(element.CheckinConfirmButton, driver);
		element.CheckinConfirmButton.click();
		test_steps.add("Click on checkin confrim buttton");
		return test_steps;
	}

	public ArrayList<String> CheckInButton(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_CheckInButton, driver);
		Utility.ScrollToElement(res.CP_Reservation_CheckInButton, driver);
		res.CP_Reservation_CheckInButton.click();
		test_steps.add("Click Check In  Button");
		reslogger.info("Click Check In  Button");
		return test_steps;

	}

	public ArrayList<String> VerifyDirtyRoom(WebDriver driver) throws InterruptedException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		try {
			Wait.wait2Second();
			Wait.explicit_wait_visibilityof_webelement(element.VerifyDirtyRoomPopup, driver);
			test_steps.add("Dirty room popup is appeared during checkin reservation");
			element.ButtonDirtyConfirm.click();
			test_steps.add("Click on dirty confirm button");

		} catch (Exception e) {
			test_steps.add("No dirty room popup appeared during checkin reservation");

		}

		return test_steps;

	}

	public String VerifyReservationStatus_Status(WebDriver driver, String Status) throws InterruptedException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Utility.ScrollToElement(element.ReservationStatus, driver);
		Wait.explicit_wait_visibilityof_webelement(element.ReservationStatus, driver);
		assertEquals(element.ReservationStatus.getText(), Status, "Failed: reservation has been changed");
		return element.ReservationStatus.getText();
	}

	public ArrayList<String> ButtonAddIncidental(WebDriver driver) throws InterruptedException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		reslogger.info("in add incidentail button");
		try {
			reslogger.info("in try");

			Wait.WaitForElement(driver, OR_Reservation.ButtonAddIncidental);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ButtonAddIncidental), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ButtonAddIncidental), driver);
		} catch (Exception e) {
			reslogger.info("in catch");

			driver.navigate().refresh();
			Wait.WaitForElement(driver, OR_Reservation.ButtonAddIncidental);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ButtonAddIncidental), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ButtonAddIncidental), driver);

		}
		reslogger.info("move");

		Utility.ScrollToElement(element.ButtonAddIncidental, driver);
		element.ButtonAddIncidental.click();
		test_steps.add("Click on Add Incidental");
		return test_steps;
	}

	public ArrayList<String> EnterAddOn_Incidental(WebDriver driver, int days, String category, String perUnit,
			String quentity) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.EnterAddOn_IncidenalDate);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterAddOn_IncidenalDate), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.EnterAddOn_IncidenalDate), driver);
		Utility.ScrollToElement(element.EnterAddOn_IncidenalDate, driver);
		String getDate = ESTTimeZone.DateFormateForLineItem(days);
		element.EnterAddOn_IncidenalDate.click();
		element.EnterAddOn_IncidenalDate.clear();
		element.EnterAddOn_IncidenalDate.sendKeys(getDate);
		test_steps.add("Enter Date: " + getDate);

		element.ButtonSelectIncidental.click();
		test_steps.add("Click on select button");
		Wait.wait1Second();
		String pathSelectIncidental = "//div[text()='ADD-ONS & INCIDENTALS']//..//ul//li//span[text()='" + category
				+ "']";
		WebElement elementSelect = driver.findElement(By.xpath(pathSelectIncidental));
		elementSelect.click();
		test_steps.add("Select Category: " + category);

		element.EnterPerUnit.clear();
		element.EnterPerUnit.sendKeys(perUnit);
		test_steps.add("Enter Per Unit: " + perUnit);

		element.EnterQuentity.clear();
		element.EnterQuentity.sendKeys(quentity);
		test_steps.add("Enter Quentity: " + quentity);

		element.IncidentalSave.click();
		test_steps.add("Click on Save button");
		Wait.WaitForElementUsingClassName(driver, OR.Toaster_Title);
		Wait.waitForElementToBeVisibile(By.className(OR.Toaster_Title), driver);
		Wait.waitForElementToBeClickable(By.className(OR.Toaster_Title), driver);
		return test_steps;
	}

	public String getIncidentalDate(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		driver.navigate().refresh();
		try {
			Wait.WaitForElement(driver, OR_Reservation.GetIncidentalDate);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GetIncidentalDate), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GetIncidentalDate), driver);
		} catch (Exception e) {
			driver.navigate().refresh();
			Wait.WaitForElement(driver, OR_Reservation.GetIncidentalDate);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GetIncidentalDate), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GetIncidentalDate), driver);
		}

		reslogger.info("element.GetIncidentalDate:+ " + element.GetIncidentalDate.size());
		Utility.ScrollToElement_NoWait(element.GetIncidentalDate.get(index), driver);
		return element.GetIncidentalDate.get(index).getText();
	}

	public String getIncidentalCategory(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.GetIncidentalCategory.get(index).getText();
	}

	public String getIncidentalDescritption(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.GetIncidentalDescription.get(index).getText();
	}

	public String getIncidentalPerUnit(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.GetIncidentalPerUnit.get(index).getText();
	}

	public String getIncidentalTax(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.GetIncidentalTax.get(index).getText();
	}

	public String getIncidentalTotalAmount(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.GetIncidentalTotalAmount.get(index).getText();
	}

	public ArrayList<String> ClickOnHistory(WebDriver driver) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.HistoryTab), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.HistoryTab), driver);
		Utility.ScrollToElement_NoWait(element.HistoryTab, driver);
		element.HistoryTab.click();
		test_step.add("Click on history");
		return test_step;

	}

	public String getHistoryCategory(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(element.History_Category.get(index), driver);
		Utility.ScrollToElement_NoWait(element.History_Category.get(index), driver);
		return element.History_Category.get(index).getText();
	}

	public String gettHistoryDate(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.History_Date.get(index).getText();
	}

	public String gettHistoryTime(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.History_Time.get(index).getText();
	}

	public String gettHistoryUser(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.History_User.get(index).getText();
	}

	public String getHistoryDescription(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.History_Description.get(index).getText();
	}

	public ArrayList<String> ClickOnDetails(WebDriver driver) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		Wait.explicit_wait_visibilityof_webelement(element.DetailsTab, driver);
		Wait.explicit_wait_elementToBeClickable(element.DetailsTab, driver);
		Utility.ScrollToElement_NoWait(element.DetailsTab, driver);
		element.DetailsTab.click();
		test_step.add("Click on details");
		return test_step;

	}

	public int getNumberOfIncidentalRows(WebDriver driver) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		int counter = 0;
		String loading = "(//div[@class='ir-loader-in'])[1]";
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait1Second();
			}
		}
		Wait.WaitForElement(driver, OR_Reservation.TotalNumberofIncidentalRows);
		return element.TotalNumberofIncidentalRows.size();
	}

	public ArrayList<String> ClickOnDeleteOncidentalButton(WebDriver driver, int index)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		try {
			Wait.explicit_wait_visibilityof_webelement(element.DeleteIncidentalInSatyInfoButton.get(index), driver);
			Wait.explicit_wait_elementToBeClickable(element.DeleteIncidentalInSatyInfoButton.get(index), driver);
		} catch (Exception e) {
			driver.navigate().refresh();
			Wait.wait3Second();
			Wait.WaitForElement(driver, OR_Reservation.DeleteIncidentalInSatyInfoButton);
			Wait.explicit_wait_visibilityof_webelement(element.DeleteIncidentalInSatyInfoButton.get(index), driver);
			Wait.explicit_wait_elementToBeClickable(element.DeleteIncidentalInSatyInfoButton.get(index), driver);
		}

		Utility.ScrollToElement_NoWait(element.DeleteIncidentalInSatyInfoButton.get(index), driver);
		element.DeleteIncidentalInSatyInfoButton.get(index).click();
		return test_step;
	}

	public ArrayList<String> IncidentalVoidpopup(WebDriver driver, String EnterNotes, int index)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.VoidPopupHeading);
		Wait.explicit_wait_visibilityof_webelement(element.VoidPopupHeading, driver);
		Wait.explicit_wait_elementToBeClickable(element.VoidPopupHeading, driver);
		// assertEquals(element.VoidPopupHeading.getText(), "Void Items");
		element.EnterNotes.sendKeys(EnterNotes);
		test_step.add("Enter notes: " + EnterNotes);
		element.VoidButton.get(index).click();
		test_step.add("Click on Void button");
		return test_step;
	}

	public void VerifyRoomDisplayed(WebDriver driver, String roomClassName, ArrayList<String> test_steps) {

		String Roomxpath = "//span[contains(@data-bind,'roomClass.name') and text()='" + roomClassName + "']";
		WebElement RoomName = driver.findElement(By.xpath(Roomxpath));
		Wait.explicit_wait_visibilityof_webelement(RoomName, driver);
		assertTrue(RoomName.isDisplayed(), "Failed: '" + roomClassName + "' not displayed");
		test_steps.add("Verified Room Class '" + roomClassName + "' is Displayed");
	}

	public void VerifyAvgPerNight(WebDriver driver, String roomClassName, String baseAmount, boolean expand,
			ArrayList<String> test_steps) throws InterruptedException {

		String AvgRatePerNightxpath = "//span[contains(@data-bind,'roomClass.name') and text()='" + roomClassName
				+ "']/following-sibling::span[contains(@data-bind,'Avg per night')]";
		WebElement AvgRatePerNight = driver.findElement(By.xpath(AvgRatePerNightxpath));
		Wait.explicit_wait_visibilityof_webelement(AvgRatePerNight, driver);
		assertTrue(AvgRatePerNight.isDisplayed(), "Failed: 'Avg per night ' not displayed");
		String AvgValue = AvgRatePerNight.getText();
		AvgValue = AvgValue.split(" ")[3];
		AvgValue = AvgValue.replace("$", "").replaceAll(" ", "");
		assertEquals(AvgValue, baseAmount, "Failed: Base Amount missmatched");
		test_steps.add("Verified Room Class '" + roomClassName + "' 'Avg per night $" + AvgValue + "' is Displayed");
		if (expand) {
			Utility.ScrollToElement(AvgRatePerNight, driver);
			AvgRatePerNight.click();
			test_steps.add("Click on 'Avg per night $" + AvgValue + "' link");
		}
	}

	public void VerifyRoomClassDescription_Date(WebDriver driver, String roomClassName, String expectedvalue,
			ArrayList<String> test_steps) {

		String elementxpath = "//span[contains(@data-bind,'roomClass.name') and text()='" + roomClassName
				+ "']//ancestor::div[contains(@data-bind,'expandRoomClassRateInfo')]/following-sibling::div//td[contains(@data-bind,'startDate')]";
		WebElement Element = driver.findElement(By.xpath(elementxpath));
		Wait.explicit_wait_visibilityof_webelement(Element, driver);
		assertTrue(Element.isDisplayed(), "Failed: Date not displayed");
		assertEquals(Element.getText(), expectedvalue, "Failed: Datet missmatched");
		test_steps.add("Verified Date '" + expectedvalue + "' is Displayed");
	}

	public void VerifyRoomClassDescription_Rate(WebDriver driver, String roomClassName, String expectedvalue,
			ArrayList<String> test_steps) {

		String elementxpath = "//span[contains(@data-bind,'roomClass.name') and text()='" + roomClassName
				+ "']//ancestor::div[contains(@data-bind,'expandRoomClassRateInfo')]/following-sibling::div//td[contains(@data-bind,'rateDisplayName')]";
		WebElement Element = driver.findElement(By.xpath(elementxpath));
		Wait.explicit_wait_visibilityof_webelement(Element, driver);
		assertTrue(Element.isDisplayed(), "Failed: Rate not displayed");
		assertEquals(Element.getText(), expectedvalue, "Failed: Rate missmatched");
		test_steps.add("Verified Rate '" + expectedvalue + "' is Displayed");
	}

	public void VerifyRoomClassDescription_Amount(WebDriver driver, String roomClassName, String expectedvalue,
			ArrayList<String> test_steps) {

		String elementxpath = "//span[contains(@data-bind,'roomClass.name') and text()='" + roomClassName
				+ "']//ancestor::div[contains(@data-bind,'expandRoomClassRateInfo')]/following-sibling::div//td[contains(@data-bind,'roomTotal')]";
		WebElement Element = driver.findElement(By.xpath(elementxpath));
		Wait.explicit_wait_visibilityof_webelement(Element, driver);
		assertTrue(Element.isDisplayed(), "Failed: Amount not displayed");
		assertEquals(Utility.convertDollarToNormalAmount(driver, Element.getText()).trim(), expectedvalue,
				"Failed: Amount missmatched");
		test_steps.add("Verified Amount '" + expectedvalue + "' is Displayed");
	}

	public void closeReservationTab(WebDriver driver) throws InterruptedException {

		Elements_Reservation reservationPage = new Elements_Reservation(driver);
		Wait.WaitForElement(driver, OR.OpenedReservation_CloseButton);
		Utility.ScrollToElement(driver.findElement(By.xpath(OR.OpenedReservation_CloseButton)), driver);
		reservationPage.OpenedReservation_CloseButton.click();
		try {
			Wait.wait1Second();
			reservationPage.unsavedReservationAlert.click();

		} catch (Exception e) {
			// TODO: handle exception
		}

	}

	public void EnterDate(WebDriver driver, String DateType, String Date) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String Datexpath = "//input[contains(@data-bind,'" + DateType + "Date')]";
		Wait.explicit_wait_xpath(Datexpath, driver);
		WebElement DateInput = driver.findElement(By.xpath(Datexpath));
		Wait.explicit_wait_visibilityof_webelement(DateInput, driver);
		Utility.ScrollToElement(DateInput, driver);
		DateInput.sendKeys(Keys.chord(Keys.CONTROL, "a"), Date);
		assertEquals(DateInput.getAttribute("value"), Date, "Failed: Entered Date missmatched");
	}

	public ArrayList<String> VerifyCreatedTask(WebDriver driver, String TaskType, String Details, String Status,
			ArrayList<String> test_steps) throws InterruptedException {
		Elements_Reservation ReservationPage = new Elements_Reservation(driver);

		WebElement TaskTypeCheck = driver
				.findElement(By.xpath("//span[text()='Tasks ']/../..//td//span[text()='" + TaskType.trim() + "']"));
		Utility.ScrollToElement(TaskTypeCheck, driver);
		TaskTypeCheck.getText();
		assertEquals(TaskTypeCheck.getText(), TaskType, "Failed : TaskType missmatched");
		reslogger.info("Verified Task Bar Type :" + TaskType);
		test_steps.add("Verified Task Bar Type :" + TaskType);

		WebElement DetailsCheck = driver.findElement(By.xpath(
				"//td[contains(@data-bind,'text: description')  and contains(text(),'" + Details.trim() + "')]"));
		DetailsCheck.getText();
		assertEquals(DetailsCheck.getText(), Details, "Failed : Detail missmatched");
		reslogger.info("Verified Task Bar Detail :" + Details);

		test_steps.add("Verified Task Bar Detail :" + Details);

		WebElement StatusCheck = driver
				.findElement(By.xpath("//span[text()='Tasks ']/../..//td[contains(text(),'" + Status + "')]"));
		StatusCheck.getText();
		assertEquals(StatusCheck.getText(), Status, "Failed : Status missmatched");
		reslogger.info("Verified Task Bar Status :" + Status);
		test_steps.add("Verified Task Bar Status :" + Status);
		return test_steps;

	}

	public ArrayList<String> DeleteTask(WebDriver driver, String TaskDetails, ArrayList<String> test_steps)
			throws InterruptedException {

		WebElement DeletTaskButton = driver
				.findElement(By.xpath("//td[contains(@data-bind,'text: description')  and contains(text(),'"
						+ TaskDetails.trim() + "')]/ancestor::tr//button"));

		String DeleteConfirmationPopUp = "//div[text()='Are you sure you want to delete this task?']";
		String YesButton = "//div[text()='Are you sure you want to delete this task?']/parent::div//button[text()='Yes']";
		JavascriptExecutor jse = (JavascriptExecutor) driver;
		jse.executeScript("arguments[0].click();", DeletTaskButton);
		reslogger.info("Delete Task Button Clicked");
		test_steps.add("Delete Task Button Clicked");

		WebElement DeleteConfirmationPopUpEle = driver.findElement(By.xpath(DeleteConfirmationPopUp));
		WebElement YesButtonEle = driver.findElement(By.xpath(YesButton));
		Wait.WaitForElement(driver, DeleteConfirmationPopUp);

		reslogger.info("Confirmation Message Popup Displayed: " + DeleteConfirmationPopUpEle.getText());
		test_steps.add("Confirmation Message Popup Displayed: " + DeleteConfirmationPopUpEle.getText());
		YesButtonEle.click();

		reslogger.info("Task With Details :" + TaskDetails + " Deleted Successfully");
		test_steps.add("Task With Details :" + TaskDetails + " Deleted Successfully");
		return test_steps;

	}

	public ArrayList<String> clickPencilIcon_GoBackToStayInfo(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.explicit_wait_visibilityof_webelement_120(res.ClickGoBackToStayInfo, driver);
		Wait.explicit_wait_elementToBeClickable(res.ClickGoBackToStayInfo, driver);
		Utility.ScrollToElement(res.ClickGoBackToStayInfo, driver);
		res.ClickGoBackToStayInfo.click();
		reslogger.info("Edit Icon Clicked");
		test_steps.add("Edit Icon Clicked");
		return test_steps;
	}

	public LocalDate StartDate, EndDate;

	public List<LocalDate> getDatesBetweenFromAndToDate(WebDriver driver, ArrayList<String> test_steps,
			String CheckINDate, String CheckOutDate) {
		List<String> checkINDate = Arrays.asList(CheckINDate.split("\\|"));
		List<String> checkOutDate = Arrays.asList(CheckOutDate.split("\\|"));
		// SimpleDateFormat formatter1=new SimpleDateFormat("dd/MM/yyyy");
		DateTimeFormatter formatter = DateTimeFormatter.ofPattern("dd/MM/yyyy");
		// LocalDate date = LocalDate.parse("29-Mar-2019", formatter);

		LocalDate Start = LocalDate.parse(checkINDate.get(0), formatter);
		LocalDate End = LocalDate.parse(checkOutDate.get(0), formatter);
		List<LocalDate> ret = new ArrayList<LocalDate>();
		for (LocalDate date = Start.plusDays(1); !date.isAfter(End.minusDays(1)); date = date.plusDays(1)) {
			ret.add(date);
			StartDate = Start;
			EndDate = End;
		}
		return ret;

	}

	public void verifyDisplayVoidItems(WebDriver driver, ArrayList<String> test_steps, String Date, String Note,
			String amount) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		String LineItemNotePath = "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-date']/span[contains(text(),'"
				+ Date + "')]/ancestor::td//preceding-sibling::td[contains(@class,'lineitem-note')]/img[@title='" + Note
				+ "']";
		WebElement SetLineItemElement = driver.findElement(By.xpath(LineItemNotePath));
		String LineItemAmount = "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-date']/span[contains(text(),'"
				+ Date
				+ "')]/ancestor::td//following-sibling::td[contains(@class,'lineitem-amount')]/span[contains(text(),'"
				+ amount + "')]";
		WebElement LineItemElement = driver.findElement(By.xpath(LineItemAmount));

		assertTrue(SetLineItemElement.isDisplayed(), "Failed: To Verify Line Item");
		assertTrue(LineItemElement.isDisplayed(), "Failed: To Verify Line Item");
		test_steps.add(" Verified Date:<b>  " + Date + "</b>");
		reslogger.info("Verified  Date: " + Date);
		test_steps.add(" Verified  Note:<b>  " + Note + "</b>");
		reslogger.info(" Verified  Note: " + Note);
		test_steps.add(" Verified  Amount:<b>  " + amount + "</b>");
		reslogger.info(" Verified  Amount: " + amount);

	}

	// Created by Adhnan: ClickEditStayInfo
	public ArrayList<String> ClickEditStayInfo(WebDriver driver, ArrayList<String> steps)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(element.StayInfo_Editbutton, driver);
		Wait.explicit_wait_elementToBeClickable(element.StayInfo_Editbutton, driver);
		Utility.ScrollToElement(element.StayInfo_Editbutton, driver);
		element.StayInfo_Editbutton.click();
		reslogger.info("Click Stay Info Edit button");
		steps.add("Click Stay Info Edit button");
		Wait.explicit_wait_visibilityof_webelement(element.StayInfo_ChangeDetails, driver);
		return steps;
	}

	// Created By adhnan : ClickStayInfo_ChangeDetails
	public ArrayList<String> ClickStayInfo_ChangeDetails(WebDriver driver, ArrayList<String> steps)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(element.StayInfo_ChangeDetails, driver);
		Wait.explicit_wait_elementToBeClickable(element.StayInfo_ChangeDetails, driver);
		Utility.ScrollToElement(element.StayInfo_ChangeDetails, driver);
		element.StayInfo_ChangeDetails.click();
		reslogger.info("Click Stay Info 'Change Stay Details");
		steps.add("Click Stay Info 'Change Stay Details'");
		return steps;
	}

	public ArrayList<String> VerifyRoomClass_Rule(WebDriver driver, String roomClassName, String ruleName,
			boolean broken, ArrayList<String> getTest_Steps) throws InterruptedException {
		String RuleBrokenxpath = "//span[contains(@data-bind,'roomClass.name') and text()='" + roomClassName
				+ "']/following-sibling::span[contains(@data-bind,'rules')]";
		WebElement RuleBroken = driver.findElement(By.xpath(RuleBrokenxpath));
		Wait.explicit_wait_visibilityof_webelement(RuleBroken, driver);
		Utility.ScrollToElement(RuleBroken, driver);
		assertTrue(RuleBroken.isDisplayed(), "Failed: 'Rule' not displayed");
		String rule = RuleBroken.getText();
		assertEquals(rule, ruleName, "Failed: rule Name missmatched");
		getTest_Steps.add("Verified Room Class '" + roomClassName + "' rule '" + rule + "' is Displayed");
		String color = RuleBroken.getAttribute("class");
		String ruleapplied = RuleBroken.getAttribute("data-bind");
		reslogger.info(color);
		reslogger.info(ruleapplied);
		if (broken) {
			assertTrue(color.contains("red"), "Failed : Rule color is not red");
			assertTrue(ruleapplied.contains("broken"), "Failed : Rule color is not broken");
			getTest_Steps.add("Verified Rule is 'Broken'");
			getTest_Steps.add("Verified Rule is Shown in 'Red'");
		} else {
			assertTrue(color.contains("green"), "Failed : Rule color is not green");
			assertTrue(ruleapplied.contains("statisfied"), "Failed : Rule is not satisfied");
			getTest_Steps.add("Verified Rule is 'Satisfied'");
			getTest_Steps.add("Verified Rule is Shown in 'Green'");
		}

		Actions actions = new Actions(driver);
		actions.moveToElement(RuleBroken).perform();
		String mouseenter = RuleBroken.getAttribute("is-title-added-on-mouseenter");
		assertEquals(mouseenter, "true", "Failed: rule Name not appear on mouse enter missmatched");
		getTest_Steps.add(
				"Verified Upon navigating mouse on top of the Rule name in context sensitive tool tip Rule name is displayed");
		return getTest_Steps;
	}

	public ArrayList<String> getRoomsOnDetailPage(WebDriver driver, ArrayList<String> Rooms) {
		String path = "//div/a[@class='accordion-toggle']/following-sibling::span[contains(@data-bind,'roomClassName')]";
		List<WebElement> element = driver.findElements(By.xpath(path));
		for (WebElement element1 : element) {
			Rooms.add(element1.getText());
			/*
			 * if (element1.isDisplayed()) {
			 * Rooms.add(element1.getText().trim()); }
			 */
		}
		reslogger.info("New Rooms are:" + Rooms);

		return Rooms;
	}

	public void click_YestakemetotheFolio(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.Checkout_CompleteCheckOutMsgYesButton, driver);
		res.Checkout_CompleteCheckOutMsgYesButton.click();
		test_steps.add("Clicking on Yes, take me to the Folio");
		reslogger.info("Clicking on Yes, take me to the Folio");
	}

	public void click_Nocancelthecheckoutprocess(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.Checkout_CompleteCheckOutMsgNoButton, driver);
		res.Checkout_CompleteCheckOutMsgNoButton.click();
		test_steps.add("Clicking on No, cancel the check-out process");
		reslogger.info("Clicking on No, cancel the check-out process");
	}

	public ArrayList<String> VerifyRoomClassManualRateAmount(WebDriver driver, String RoomClass, String ManualRate)
			throws InterruptedException {
		ArrayList<String> test_steps = new ArrayList<>();
		String path = "((//span[.='" + RoomClass + "'])[2]//parent::div//following::div[2]//span)[1]";
		Wait.WaitForElement(driver, path);
		ManualRate = "$" + ManualRate + ".00";
		test_steps.add("Expected room class rate : " + ManualRate);
		reslogger.info("Expected room class rate : " + ManualRate);

		WebElement roomAmountEl = driver.findElement(By.xpath(path));
		String roomClassRate = roomAmountEl.getText();
		test_steps.add("Found : " + roomClassRate);
		reslogger.info("Found : " + roomClassRate);

		assertEquals(ManualRate, roomClassRate, "Failed: RoomClass rate didn't override");
		test_steps.add("Verified that room class rate override with manual rate");
		reslogger.info("Verified that room class rate override with manual rate");
		return test_steps;

	}

	public ArrayList<String> clickAddSRoomButtton(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.explicit_wait_visibilityof_webelement_120(res.CP_NewReservation_AddRoom, driver);
		Wait.explicit_wait_elementToBeClickable(res.CP_NewReservation_AddRoom, driver);
		Utility.ScrollToElement(res.CP_NewReservation_AddRoom, driver);
		res.CP_NewReservation_AddRoom.click();
		test_steps.add("Clicking on add room");
		reslogger.info("Clicking on add room");
		return test_steps;
	}

	public String selectRoomNumber(WebDriver driver, String roomClassName, String roomNo, boolean autoSelect,
			ArrayList<String> test_steps) throws InterruptedException {

		// String path =
		// "//span[contains(@data-bind,'roomClass.name')][text()='"+roomClassName+"']/../../../..//select[contains(@data-bind,'roomNumber')]";
		String path = "//span[contains(@data-bind,'roomClass.name')][text()='" + roomClassName
				+ "']/../../../..//button";
		String selectedRoomNo = "";
		int count = 0;
		// try {
		// Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(path)),
		// driver);
		// }catch (Exception e) {
		// Wait.wait5Second();
		// }
		// while (true) {
		// if
		// (driver.findElement(By.xpath("//section[@class='ir-roomClassDetails
		// manual-override']")).isDisplayed()) {
		// break;
		// } else if (count == 20) {
		// break;
		// } else {
		// count++;
		// Wait.wait2Second();
		// }
		// }

		if (autoSelect) {
			try {
				Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
				driver.findElement(By.xpath(path)).click();
			} catch (Exception e) {
				reslogger.info("Waited to loading symbol");
			}
			int size = driver.findElements(By.xpath("//span[contains(@data-bind,'roomClass.name')][text()='"
					+ roomClassName + "']/../../../..//ul/li/a")).size();
			Random random = new Random();
			int randomNumber = 0;

			randomNumber = random.nextInt(size) + 1;
			if (randomNumber <= 1) {
				randomNumber = randomNumber + 1;
			}

			reslogger.info("count : " + size);
			reslogger.info("randomNumber : " + randomNumber);
			driver.findElement(By.xpath("(//span[contains(@data-bind,'roomClass.name')][text()='" + roomClassName
					+ "']/../../../..//ul/li/a)[" + randomNumber + "]")).click();
			selectedRoomNo = driver.findElement(By.xpath("//span[contains(@data-bind,'roomClass.name')][text()='"
					+ roomClassName + "']/../../../..//ul/li[@class='selected']/a/span")).getText();
			test_steps.add("Selected Room No : " + selectedRoomNo);
			reslogger.info("Selected Room No : " + selectedRoomNo);
		} else {
			try {
				Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
				driver.findElement(By.xpath(path)).click();
			} catch (Exception e) {
				reslogger.info("Waited to loading symbol");
			}
			driver.findElement(By.xpath("//span[contains(@data-bind,'roomClass.name')][text()='" + roomClassName
					+ "']/../../../..//ul/li/a/span[text()='" + roomNo + "']")).click();
			// new
			// Select(driver.findElement(By.xpath(path))).selectByVisibleText(roomNo);
			test_steps.add("Selected Room No : " + roomNo);
			reslogger.info("Selected Room No : " + roomNo);
		}

		return selectedRoomNo;
	}

	public ArrayList<String> clickSelectRoomButtton(WebDriver driver, String roomClassName)
			throws InterruptedException {
		ArrayList<String> test_steps = new ArrayList<String>();
		String path = "//span[contains(@data-bind,'roomClass.name')][text()='" + roomClassName
				+ "']/../../../..//div[contains(@data-bind,'click: onSelect')]/a";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(path)), driver);
		Utility.ScrollToElement(driver.findElement(By.xpath(path)), driver);
		driver.findElement(By.xpath(path)).click();
		test_steps.add("Clicking on Select room");
		reslogger.info("Clicking on Select room");
		return test_steps;

	}

	public ArrayList<String> newPolicesApplicableYesBtn(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		Wait.wait5Second();
		Wait.explicit_wait_visibilityof_webelement_120(res.NewPolicesApplicableYesBtn, driver);
		Wait.explicit_wait_elementToBeClickable(res.NewPolicesApplicableYesBtn, driver);
		Utility.ScrollToElement(res.NewPolicesApplicableYesBtn, driver);
		res.NewPolicesApplicableYesBtn.click();
		reslogger.info("New Polices Applicable Popup Yes button Clicked");
		test_steps.add("New Polices Applicable Popup Yes button Clicked");
		return test_steps;
	}

	public ArrayList<String> selectPrimaryRoom(WebDriver driver, String roomClass, String roomNo) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		String primaryArrow = "//span[text()='Primary Room']/../../following-sibling::div//button";
		Wait.WaitForElement(driver, primaryArrow);
		driver.findElement(By.xpath(primaryArrow)).click();
		String primaryRoom = "//span[text()='Primary Room']/../../following-sibling::div//li//span[text()='" + roomClass
				+ ": " + roomNo + "']";
		// primary = driver.findElement(By.xpath(primaryRoom)).getText();
		Wait.WaitForElement(driver, primaryRoom);
		driver.findElement(By.xpath(primaryRoom)).click();
		test_steps.add("Selected Primary Room as : " + roomClass + ": " + roomNo);
		reslogger.info("Selected Primary Room as : " + roomClass + ": " + roomNo);
		return test_steps;
	}

	public ArrayList<String> selectAdditionalRoom(WebDriver driver, String roomClass, String roomNo) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		String additionalArrow = "//span[text()='Additional Room']/../../following-sibling::div//button";
		Wait.WaitForElement(driver, additionalArrow);
		driver.findElement(By.xpath(additionalArrow)).click();
		String additionalRoomPath = "//span[text()='Additional Room']/../../following-sibling::div//li//span[text()='"
				+ roomClass + ": " + roomNo + "']";
		// primary = driver.findElement(By.xpath(primaryRoom)).getText();
		Wait.WaitForElement(driver, additionalRoomPath);
		driver.findElement(By.xpath(additionalRoomPath)).click();
		test_steps.add("Selected Additional Room as : " + roomClass + ": " + roomNo);
		reslogger.info("Selected Additional Room as : " + roomClass + ": " + roomNo);
		return test_steps;
	}

	public ArrayList<String> enterPrimaryGuestName(WebDriver driver, String GuestFirstName, String GuestLastName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.WaitForElement(driver, OR_Reservation.PrimaryGuestFirstName);
		res.PrimaryGuestFirstName.clear();
		res.PrimaryGuestFirstName.sendKeys(GuestFirstName);
		test_steps.add("Guest First Name : " + GuestFirstName);
		reslogger.info("Guest First Name : " + GuestFirstName);

		Wait.WaitForElement(driver, OR_Reservation.PrimaryGuestLastName);
		res.PrimaryGuestLastName.clear();
		res.PrimaryGuestLastName.sendKeys(GuestLastName);
		test_steps.add("Guest Last Name : " + GuestLastName);
		reslogger.info("Guest Last Name : " + GuestLastName);

		return test_steps;

	}

	public ArrayList<String> enterAdditionalGuestName(WebDriver driver, String GuestFirstName, String GuestLastName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.WaitForElement(driver, OR_Reservation.AdditonalGuest1FirstName);
		res.AdditonalGuest1FirstName.clear();
		res.AdditonalGuest1FirstName.sendKeys(GuestFirstName);
		test_steps.add("Guest First Name : " + GuestFirstName);
		reslogger.info("Guest First Name : " + GuestFirstName);

		Wait.WaitForElement(driver, OR_Reservation.AdditonalGuest1LastName);
		res.AdditonalGuest1LastName.clear();
		res.AdditonalGuest1LastName.sendKeys(GuestLastName);
		test_steps.add("Guest Last Name : " + GuestLastName);
		reslogger.info("Guest Last Name : " + GuestLastName);

		return test_steps;

	}

	public ArrayList<String> verifyAccountName(WebDriver driver, String accountName, boolean isOpen) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.explicit_wait_visibilityof_webelement_120(res.HeaderAccountName_AfterReservation, driver);
		String foundName = res.HeaderAccountName_AfterReservation.getText();
		foundName = foundName.replace("(", "");
		foundName = foundName.replace(")", "");
		assertEquals(foundName.trim(), accountName, "Failed to verify Account Name");
		test_steps.add("Successfully Verified Assoicated Account Name : " + accountName);
		reslogger.info("Successfully Verified Assoicated Account Name : " + accountName);
		if (isOpen) {
			Wait.explicit_wait_elementToBeClickable(res.HeaderAccountName_AfterReservation, driver);
			res.HeaderAccountName_AfterReservation.click();
			test_steps.add("Account Link Clicked");
			reslogger.info("Account Link Clicked");
		}
		return test_steps;
	}

	public String getFolioOptionCount(WebDriver driver) throws InterruptedException {
		String path = "//li//span[contains(text(),'Guest Folio')]/../../../li";
		Wait.wait2Second();
		return driver.findElements(By.xpath(path)).size() + "";
	}

	public ArrayList<String> selectFolioOption(WebDriver driver, String option) throws InterruptedException {
		String buttonPath = "//li//span[contains(text(),'Guest Folio')]/../../../../..//button";
		String optionPath = "//li//span[contains(text(),'" + option + "')]";
		ArrayList<String> test_steps = new ArrayList<String>();
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(buttonPath)), driver);
		driver.findElement(By.xpath(buttonPath)).click();
		Wait.wait1Second();
		driver.findElement(By.xpath(optionPath)).click();
		test_steps.add("Selected Folio Option : " + option);
		reslogger.info("Selected Folio Option : " + option);
		return test_steps;
	}

	public ArrayList<String> selectFolioOption(WebDriver driver, int index) throws InterruptedException {
		String buttonPath = "//li//span[contains(text(),'Guest Folio')]/../../../../..//button";
		String optionPath = "//li//span[contains(text(),'Guest Folio')]/../../..//li[" + index + "]";
		ArrayList<String> test_steps = new ArrayList<String>();
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(buttonPath)), driver);
		driver.findElement(By.xpath(buttonPath)).click();
		Wait.wait1Second();
		driver.findElement(By.xpath(optionPath)).click();
		test_steps.add("Selected Folio Option : " + driver
				.findElement(
						By.xpath("//li//span[contains(text(),'Guest Folio')]/../../../li[@class='selected']//span"))
				.getText());
		reslogger.info("Selected Folio Option : " + driver
				.findElement(
						By.xpath("//li//span[contains(text(),'Guest Folio')]/../../../li[@class='selected']//span"))
				.getText());
		return test_steps;
	}

	// Stay Info

	public String getArrivalDate_ResDetail(WebDriver driver) {
		String ariveDatePath = "//div[@class='checkin']//span[contains(@data-bind,'dateArrive')][1]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(ariveDatePath)), driver);
		return driver.findElement(By.xpath(ariveDatePath)).getText();
	}

	public String getDepartDate_ResDetail(WebDriver driver) {
		String path = "//div[@class='checkout']//span[contains(@data-bind,'dateDepart')][1]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getNoOfNights_ResDetail(WebDriver driver) {
		String path = "(//div[@class='noofnights']//span[contains(@data-bind,'noOfNights')])[1]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getNoOfAdults_ResDetail(WebDriver driver) {
		String path = "//div[contains(@class,'guestInfo')]//span[contains(@data-bind,'numberOfAdults')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getNoOfChilds_ResDetail(WebDriver driver) {
		String path = "//div[contains(@class,'guestInfo')]//span[contains(@data-bind,'numberOfChildren')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getRoomClass_ResDetail(WebDriver driver) {
		String path = "//div[contains(@class,'roomInfo')]//span[contains(@data-bind,'roomClassName')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getRoomNo_ResDetail(WebDriver driver) {
		String path = "//div[contains(@class,'roomInfo')]//span[contains(@data-bind,'roomNumber')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	// Guest-Info

	public String getGuestName_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:GuestInfo')]//span[contains(@data-bind,'GuestProfileName')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getContactName_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:GuestInfo')]//span[contains(@data-bind,'ContactProfileName')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getEmail_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:GuestInfo')]//span[contains(@data-bind,'emailAddress')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getPhoneNO_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:GuestInfo')]//span[contains(@data-bind,'mailing_formattedPhoneNumber')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		String foundNo = driver.findElement(By.xpath(path)).getText();
		foundNo = foundNo.replace("-", "").trim();
		foundNo = foundNo.replace("(", "");
		foundNo = foundNo.replace(")", "");
		return foundNo.trim();
	}

	public String getAlternateNo_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:GuestInfo')]//span[contains(@data-bind,'mailing_formattedAlternativePhoneNumber')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		String foundNo = driver.findElement(By.xpath(path)).getText();
		foundNo = foundNo.replace("-", "").trim();
		foundNo = foundNo.replace("(", "");
		foundNo = foundNo.replace(")", "");
		return foundNo.trim();
	}

	public String getAccount_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:GuestInfo')]//span[contains(@data-bind,'account')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getAddressLine1_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:mailingAddress')]//span[contains(@data-bind,'text:address1')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getAddressLine2_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:mailingAddress')]//span[contains(@data-bind,'text:address2')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getAddressLine3_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:mailingAddress')]//span[contains(@data-bind,'text:address3')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getCity_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:mailingAddress')]//span[contains(@data-bind,'city')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getState_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:mailingAddress')]//span[contains(@data-bind,'stateName')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getContry_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:mailingAddress')]//span[contains(@data-bind,'countryId')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getPostalCode_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:mailingAddress')]//span[contains(@data-bind,'postalCode')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public ArrayList<String> verfifyGuestinfo_ResDetail(WebDriver driver, String guestName, String addLine1,
			String city, String state, String contry, String postalCode, String email, String phoneNo) {
		ArrayList<String> test_steps = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.explicit_wait_visibilityof_webelement_120(res.GuestName_GuestInfo, driver);
		String foundGuestName = res.GuestName_GuestInfo.getText();
		assertEquals(foundGuestName, guestName, "Failed To Verify Guest Name");
		reslogger.info("Successfully Verified Guest Name : " + foundGuestName);
		test_steps.add("Successfully Verified Guest Name : " + foundGuestName);

		Wait.explicit_wait_visibilityof_webelement_120(res.AddressLine1_GuestInfo, driver);
		String foundAddLine1 = res.AddressLine1_GuestInfo.getText();
		assertEquals(foundAddLine1, addLine1, "Failed To Verify Address Line1");
		reslogger.info("Successfully Verified Address Line1 : " + foundAddLine1);
		test_steps.add("Successfully Verified Address Line1 : " + foundAddLine1);

		Wait.explicit_wait_visibilityof_webelement_120(res.City_GuestInfo, driver);
		String foundCity = res.City_GuestInfo.getText();
		assertEquals(foundCity, city, "Failed To Verify City");
		reslogger.info("Successfully Verified City : " + foundCity);
		test_steps.add("Successfully Verified City : " + foundCity);

		Wait.explicit_wait_visibilityof_webelement_120(res.Contry_GuestInfo, driver);
		String foundCountry = res.Contry_GuestInfo.getText();
		assertEquals(foundCountry, contry, "Failed To Verify Country");
		reslogger.info("Successfully Verified Country : " + foundCountry);
		test_steps.add("Successfully Verified Country : " + foundCountry);

		Wait.explicit_wait_visibilityof_webelement_120(res.State_GuestInfo, driver);
		String foundState = res.State_GuestInfo.getText();
		assertEquals(foundState, state, "Failed To Verify State");
		reslogger.info("Successfully Verified State : " + foundState);
		test_steps.add("Successfully Verified State : " + foundState);

		Wait.explicit_wait_visibilityof_webelement_120(res.PostalCode_GuestInfo, driver);
		String foundPostalCode = res.PostalCode_GuestInfo.getText();
		assertEquals(foundPostalCode, postalCode, "Failed To Verify PostalCode");
		reslogger.info("Successfully Verified PostalCode : " + foundPostalCode);
		test_steps.add("Successfully Verified PostalCode : " + foundPostalCode);

		Wait.explicit_wait_visibilityof_webelement_120(res.Email_GuestInfo, driver);
		String foundEmail = res.Email_GuestInfo.getText();
		assertEquals(foundEmail, email, "Failed To Verify Email");
		reslogger.info("Successfully Verified Email : " + foundEmail);
		test_steps.add("Successfully Verified Email : " + foundEmail);

		Wait.explicit_wait_visibilityof_webelement_120(res.PhoneNo_GuestInfo, driver);
		String foundphoneNo = res.PhoneNo_GuestInfo.getText();
		foundphoneNo = foundphoneNo.replace("-", "").trim();
		foundphoneNo = foundphoneNo.replace("(", "");
		foundphoneNo = foundphoneNo.replace(")", "");
		foundphoneNo = foundphoneNo.replace(" ", "");
		assertEquals(foundphoneNo.trim(), phoneNo, "Failed To Verify phoneNo");
		reslogger.info("Successfully Verified PhoneNo : " + foundphoneNo);
		test_steps.add("Successfully Verified PhoneNo : " + foundphoneNo);

		return test_steps;
	}

	// Payment Info
	public String getPaymentMethod_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'PaymentDetail')]//span[contains(@data-bind,'methodName')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getCardNoLast4Digits_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'PaymentDetail')]//span[contains(@data-bind,'text: PaymentDetail().creditCard.displayNumber')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getNameOnCard_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'PaymentDetail')]//span[contains(@data-bind,'cardHolderName')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getCardExpiryDate_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'PaymentDetail')]//span[contains(@data-bind,'expiresOn')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public ArrayList<String> verifyPaymentDetail_ResDetail(WebDriver driver, String paymentMethod, String cardNo,
			String nameOnCard, String expiry) {
		ArrayList<String> test_steps = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.explicit_wait_visibilityof_webelement_120(res.PaymentMethod_PayInfo, driver);
		String foundPayMethod = res.PaymentMethod_PayInfo.getText();
		assertEquals(foundPayMethod, paymentMethod, "Failed To Verify Payment Method");
		reslogger.info("Successfully Verified Payment Method : " + foundPayMethod);
		test_steps.add("Successfully Verified Payment Method : " + foundPayMethod);

		Wait.explicit_wait_visibilityof_webelement_120(res.CardNo_PayInfo, driver);
		String foundCardNo = res.CardNo_PayInfo.getText();
		assertEquals(foundCardNo, cardNo, "Failed To Verify CardNo");
		reslogger.info("Successfully Verified CardNo : " + foundCardNo);
		test_steps.add("Successfully Verified CardNo : " + foundCardNo);

		Wait.explicit_wait_visibilityof_webelement_120(res.NameOnCard_PayInfo, driver);
		String foundNameOnCard = res.NameOnCard_PayInfo.getText();
		assertEquals(foundNameOnCard, nameOnCard, "Failed To Verify Name On Card");
		reslogger.info("Successfully Verified Name On Card : " + foundNameOnCard);
		test_steps.add("Successfully Verified Name On Card : " + foundNameOnCard);

		Wait.explicit_wait_visibilityof_webelement_120(res.CardExpiry_PayInfo, driver);
		String foundExpiry = res.CardExpiry_PayInfo.getText();
		assertEquals(foundExpiry, expiry, "Failed To Verify expiry");
		reslogger.info("Successfully Verified expiry : " + foundExpiry);
		test_steps.add("Successfully Verified expiry : " + foundExpiry);

		return test_steps;
	}

	// Market Info
	public String getReferral_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:marketingInfo')]//span[text()='Referral']/following-sibling::span";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getSource_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:marketingInfo')]//span[text()='Source']/following-sibling::span";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public ArrayList<String> verifyPopupChangeInPolicy(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		reslogger.info("Verifying Popup Appear for Policy Change");
		try {
			Wait.explicit_wait_visibilityof_webelement(res.CP_VerifyPolicyChangePopup, driver);
			String text = res.CP_VerifyPolicyChangePopup.getText();
			String message = "Would you like to update the reservation to the new policies?";
			if (text.contains(message)) {
				test_steps.add("Verified pop up displayed for Policy Change");
			}

			// Click on Yes Button
			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutAllButton_ConfirmationMsg);
			res.CP_Reservation_CheckOutAllButton_ConfirmationMsgYesButton.click();
			test_steps.add("Click on Yes");
		} catch (Exception e) {
			test_steps.add("Policy Change PopUp didn't Display");
		}

		return test_steps;
	}

	public void verifyRoomChangeInHistoryTab(WebDriver driver, ArrayList test_steps, String roomNoBefore,
			String roomNoAfter) {

		String res = "//span[contains(text(),'Changed room assignment from')]";
		reslogger.info("msg :: " + res);
		// Wait.expl
		if (driver.findElement(By.xpath(res)).isDisplayed()) {
			test_steps.add("Verified Changed room assignment from " + roomNoBefore + " to " + roomNoAfter);
			reslogger.info("Verified Changed room assignment from " + roomNoBefore + " to " + roomNoAfter);
		} else {
			test_steps.add("Failed to Change room assignment from " + roomNoBefore + " to " + roomNoAfter);
			reslogger.info("Failed to Change room assignment from " + roomNoBefore + " to " + roomNoAfter);
		}
	}

	public ArrayList<String> clickAddRooms(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddRoom);
		res.CP_NewReservation_AddRoom.click();
		test_steps.add("Click on Add a Room Button");
		reslogger.info("Click on Add a Room Button");
		return test_steps;
	}

	public String AssignNewRoomNumber(WebDriver driver) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		WebDriverWait wait = new WebDriverWait(driver, 25);

		Wait.wait2Second();
		int count = res.CP_Reservation_StayInfo_ThreeDotts.size();
		Utility.ScrollToElement(res.CP_Reservation_StayInfo_ThreeDotts.get(count - 1), driver);

		res.CP_Reservation_StayInfo_ThreeDotts.get(count - 1).click();
		test_steps.add("Click Edit Stay Info");
		reslogger.info("Click Edit Stay Info");

		// Click on room Assign Room No
		reslogger.info("Click on Assign Room No");
		String assignRoomNumber = "//ul//li[contains(text(),'Assign  room Number')]";
		By locator = By.xpath(assignRoomNumber);
		int assignRoomsize = res.CP_ClickAssignRoomNumber.size();
		res.CP_ClickAssignRoomNumber.get(assignRoomsize - 1).click();
		test_steps.add("Click Assign Room Number");

		// Click on room DropDown
		reslogger.info("Click on room dropdown");
		String part = "//div[contains(@class,'ir-flex-grow ir-flex-grow-3 ir-flex-mb-grow-3')]";
		By roomLocator = By.xpath(part);
		WebElement elementRoom = wait.until(ExpectedConditions.elementToBeClickable(roomLocator));
		String roomNumber = elementRoom.getText();
		reslogger.info("Room Number :: " + roomNumber);

		elementRoom.click();
		test_steps.add("Click on room dropdown");

		// Select different room number
		String selectRoom = "//div[contains(@class,'ir-flex-grow ir-flex-grow-3 ir-flex-mb-grow-3')]//div//div//ul//li//a";
		int roomNum = driver.findElements(By.xpath(selectRoom)).size();
		String getRoomNumber = "";
		for (int i = 0; i < roomNum; i++) {
			getRoomNumber = res.CP_SelectResRoom.get(i).getText();
			if (!(getRoomNumber.equals(roomNumber)) && (!(getRoomNumber.equals("Unassigned")))) {
				res.CP_SelectResRoom.get(i).click();
				break;
			}
		}

		// Click Save Button
		reslogger.info("Clicking Save Button");
		Wait.explicit_wait_visibilityof_webelement(res.CP_SaveRoomNo, driver);
		Utility.ScrollToElement(res.CP_SaveRoomNo, driver);
		res.CP_SaveRoomNo.click();
		test_steps.add("Click on Save Room Number Button");

		return roomNumber + "-" + getRoomNumber;
	}

	public void clickSaveButton(WebDriver driver) {
		// Click Save Button
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {

			Wait.explicit_wait_visibilityof_webelement(res.CP_SaveRoomNo, driver);
			Utility.ScrollToElement(res.CP_SaveRoomNo, driver);
			res.CP_SaveRoomNo.click();
			reslogger.info("Clicking Save Button");
		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			reslogger.info("Fail to Click on Save Button");
		}
	}

	public ArrayList<String> verifyPopupChangeInCost(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		reslogger.info("Verifying Popup Appear for Change In Cost");
		Wait.explicit_wait_visibilityof_webelement(res.CP_VerifyChangeCostPopup, driver);
		String text = res.CP_VerifyChangeCostPopup.getText();
		String[] parts = text.split("from");
		String message = parts[0];
		assertEquals(message, "Are you sure you wish to change the total cost of the stay ",
				"Failed : to verify amount change popup message");
		test_steps.add("Verified pop up displayed for Change in Total Cost");

		// Click on Yes Button
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutAllButton_ConfirmationMsg);
		res.CP_Reservation_CheckOutAllButton_ConfirmationMsgYesButton.click();
		test_steps.add("Click on Yes");

		return test_steps;
	}

	public void validateMRBAdditionalGuestInfo(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String PhoneNumber, String Email, String Country) {

		String sal = Salutation.split("\\|")[0];
		String guestFName = GuestFirstName.split("\\|")[0];
		String guestLName = GuestLastName.split("\\|")[0];
		String phonenum = PhoneNumber.split("\\|")[0];
		String email = Email.split("\\|")[0];

		String addtionalRoom = "//span[starts-with(text(),'Additional Room: ')]";
		List<WebElement> we = driver.findElements(By.xpath(addtionalRoom));

		int count = we.size();
		for (int i = 1; i <= count; i++) {
			addtionalRoom = "(//span[contains(text(),'Additional Room: ')])[" + i + "]";
			Wait.WaitForElement(driver, addtionalRoom);
			try {
				Utility.ScrollToElement(driver.findElement(By.xpath(addtionalRoom)), driver);
			} catch (InterruptedException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
			driver.findElement(By.xpath(addtionalRoom)).click();

			Elements_CPReservation res = new Elements_CPReservation(driver);

			String guestName = "(//span[contains(text(),'Additional Room: ')])[" + i
					+ "]/../../../../../..//label[text()='Guest Name']/following-sibling::span";
			Wait.WaitForElement(driver, guestName);

			String name = sal.trim() + " " + guestFName.trim() + " " + guestLName.trim();
			String guestname = driver.findElement(By.xpath(guestName)).getText().trim();
			reslogger.info(guestname);
			if (guestname.equalsIgnoreCase(name.trim())) {
				test_steps.add("Expanding additional guest room");
				reslogger.info("Expanding additional guest room");

				test_steps
						.add("Reservation additional Guest Info GuestName field verified for additonal room: " + name);
				reslogger
						.info("Reservation additional Guest Info GuestName field verified for additonal room: " + name);
			}
			String code = null;
			if (Country.equalsIgnoreCase("United States")) {
				code = "1";
			} else if (Country.equalsIgnoreCase("United Kingdom")) {
				code = "41";
			}
			code = code + "-";
			PhoneNumber = phonenum;
			reslogger.info(PhoneNumber);

			String phone = "(//span[contains(text(),'Additional Room: ')])[" + i
					+ "]/../../../../../..//label[text()='Phone']/following-sibling::span";
			phone = driver.findElement(By.xpath(phone)).getText().trim();
			if (phone.equalsIgnoreCase(PhoneNumber)) {
				test_steps.add("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
				reslogger.info("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
			}

			String mailadd = "(//span[contains(text(),'Additional Room: ')])[" + i
					+ "]/../../../../../..//label[text()='E-mail']/following-sibling::span";
			String mail = driver.findElement(By.xpath(mailadd)).getText().trim();
			reslogger.info(mail);
			if (mail.equalsIgnoreCase(email.trim())) {
				test_steps.add("Reservation Guest Info Email field verified : " + email);
				reslogger.info("Reservation Guest Info Email field verified : " + email);
			}
		}
		test_steps.add("Successfully validate MRB Additional Guest Info same as Primary Room's guest");
		reslogger.info("Successfully validate MRB Additional Guest Info same as Primary Room's guest");
	}

	public String VerifyFolioDropDownItem(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		List<WebElement> we = driver.findElements(By.xpath(OR_Reservation.CP_VerifyFolioDropDownItem));
		int count = we.size();
		String roomNo = res.CP_VerifyFolioDropDownItem.get(count - 1).getText().split(":")[1].trim();
		Utility.ScrollToElement(res.CP_Reservation_FolioDetailDropDownBox, driver);

		if (count > 2) {
			res.CP_VerifyFolioDropDownItem.get(count - 1).click();
			test_steps.add("Verified new Room is added to Folio: " + roomNo);
			reslogger.info("Verified new Room is added to Folio: " + roomNo);
		}
		return roomNo;
	}

	public void verifyAddRoomChangeInHistoryTab(WebDriver driver, ArrayList test_steps) {
		// Verify Rrom change message
		String res = "//span[contains(text(),'Added a room to this reservation')]";
		reslogger.info("msg :: " + res);

		if (driver.findElement(By.xpath(res)).isDisplayed()) {
			test_steps.add("Verified Add Room Change In History Tab");
			reslogger.info("Verified Add Room Change In History Tab");
		} else {
			test_steps.add("Failed to verify Add Room Change In History Tab");
			reslogger.info("Failed to verify Add Room Change In History Tab");
		}
	}

	public void verifyCostChangeInHistoryTab(WebDriver driver, ArrayList<String> test_steps) {
		// Verify Room change message
		String res = "//span[contains(text(),'Changed room charge from ')]";
		reslogger.info("msg :: " + res);
		String message = driver.findElement(By.xpath(res)).getText();
		if (driver.findElement(By.xpath(res)).isDisplayed()) {
			test_steps.add("Verified Message: " + message);
			reslogger.info("Verified Message: " + message);
		} else {
			test_steps.add("Failed to verify message: " + message);
			reslogger.info("Failed to verify message: " + message);
		}
	}

	public void openReservation(WebDriver driver, ArrayList<String> test_steps) {
		// TODO Auto-generated method stub
		String res = "//a[contains(@data-bind,'text: GuestName')]";
		WebElement reservationVisible = driver.findElement(By.xpath(res));
		if (driver.findElement(By.xpath(res)).isDisplayed()) {
			reservationVisible.click();
			test_steps.add("Click on Reservation");
			reslogger.info("Click on Reservation");
		} else {
			test_steps.add("Failed to Click on Reservation");
			reslogger.info("Failed to Click on Reservation");
		}
	}

	public void verifyStayInfoNewRoom(WebDriver driver, ArrayList test_steps, String CheckInDate, String CheckOutDate,
			String Adults, String Children, String RoomClass, String RoomCharges) throws Exception {
		test_steps.add("******************* Stay info fields verification **********************");
		reslogger.info("******************* Stay info fields verification **********************");

		SimpleDateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");
		Date dateObj1 = format1.parse(CheckInDate);
		Date dateObj2 = format1.parse(CheckOutDate);
		long diff = dateObj2.getTime() - dateObj1.getTime();
		int Nights = (int) (diff / (24 * 60 * 60 * 1000));
		reslogger.info("difference between days: " + Nights);

		String[] checkIn = CheckInDate.split("/");
		if (checkIn[0].charAt(0) == '0') {
			checkIn[0] = checkIn[0].replace("" + checkIn[0].charAt(0), "");
		}
		String checkInMonth = Utility.get_Month(CheckInDate);
		String checkInDays = checkInMonth + " " + checkIn[0] + ", " + checkIn[2];

		String checkInDay = "//div[contains(text(),'Stay')]/..//div[@class='checkin']/span[text()='" + checkInDays
				+ "']";
		if (driver.findElement(By.xpath(checkInDay)).isDisplayed()) {
			test_steps.add("Reservation Stay Info checkin date verified : " + CheckInDate);
			reslogger.info("Reservation Stay Info checkin date verified : " + CheckInDate);
		} else {
			test_steps.add("Reservation Stay Info checkin date not found : " + CheckInDate);
			reslogger.info("Reservation Stay Info checkin date not found : " + CheckInDate);
		}

		Date now = new Date(checkIn[1] + "/" + checkIn[0] + "/" + checkIn[2]);
		SimpleDateFormat simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the
																				// day
																				// of
																				// the
																				// week
																				// abbreviated
		simpleDateformat = new SimpleDateFormat("EEEE"); // the day of the week
															// spelled out
															// completely
		String dayofCheckIn = simpleDateformat.format(now);

		String chckInday = "//div[contains(text(),'Stay')]/..//div[@class='checkin']//span[text()='"
				+ dayofCheckIn.trim() + "']";
		if (driver.findElement(By.xpath(chckInday)).isDisplayed()) {
			test_steps.add("Reservation Stay Info checkin day verified : " + dayofCheckIn);
			reslogger.info("Reservation Stay Info checkin day verified : " + dayofCheckIn);
		} else {
			test_steps.add("Reservation Stay Info checkin day not found : " + dayofCheckIn);
			reslogger.info("Reservation Stay Info checkin day not found : " + dayofCheckIn);
		}

		String[] checkOut = CheckOutDate.split("/");

		if (checkOut[0].charAt(0) == '0') {
			checkOut[0] = checkOut[0].replace("" + checkOut[0].charAt(0), "");
		}
		String checkOutMonth = Utility.get_Month(CheckOutDate);
		String checkOutDays = checkInMonth + " " + checkOut[0] + ", " + checkOut[2];
		String checkoutDay = "//div[contains(text(),'Stay')]/..//div[@class='checkout']/span[text()='" + checkOutDays
				+ "']";
		if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
			test_steps.add("Reservation Stay Info checkout date verified : " + CheckOutDate);
			reslogger.info("Reservation Stay Info checkout date verified : " + CheckOutDate);
		} else {
			test_steps.add("Reservation Stay Info checkout date not found : " + CheckOutDate);
			reslogger.info("Reservation Stay Info checkout date not found : " + CheckOutDate);
		}

		now = new Date(checkOut[1] + "/" + checkOut[0] + "/" + checkOut[2]);
		simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the day of the
																// week
																// abbreviated
		simpleDateformat = new SimpleDateFormat("EEEE"); // the day of the week
															// spelled out
															// completely
		String dayofCheckOut = simpleDateformat.format(now);
		String chkOutDay = "//div[contains(text(),'Stay')]/..//div[@class='checkout']//span[text()='"
				+ dayofCheckOut.trim() + "']";
		if (driver.findElement(By.xpath(chkOutDay)).isDisplayed()) {
			test_steps.add("Reservation Stay Info checkout day verified : " + dayofCheckOut);
			reslogger.info("Reservation Stay Info checkout day verified : " + dayofCheckOut);
		} else {
			test_steps.add("Reservation Stay Info checkout day not found : " + dayofCheckOut);
			reslogger.info("Reservation Stay Info checkout day not found : " + dayofCheckOut);
		}

		String nights = "//div[contains(text(),'Stay')]/..//div[@class='noofnights']/span[text()='" + Nights + "N']";
		if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
			test_steps.add("Reservation Stay Info Nights verified : " + Nights + "N");
			reslogger.info("Reservation Stay Info Nights verified : " + Nights + "N");
		} else {
			test_steps.add("Reservation Stay Info Nights not found : " + Nights + "N");
			reslogger.info("Reservation Stay Info Nights not found : " + Nights + "N");
		}

		String adults = "//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'numberOfAdults')]";
		adults = driver.findElement(By.xpath(adults)).getText().trim();
		if (adults.equalsIgnoreCase(Adults.trim())) {
			test_steps.add("Reservation Stay Info Adults verified : " + Adults);
			reslogger.info("Reservation Stay Info Adults verified : " + Adults);
		} else {
			test_steps.add("Reservation Stay Info Adults not found : " + Adults);
			reslogger.info("Reservation Stay Info Adults not found : " + Adults);
		}

		String children = "//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'numberOfChildren')]";
		children = driver.findElement(By.xpath(children)).getText().trim();
		if (children.equalsIgnoreCase(Children.trim())) {
			test_steps.add("Reservation Stay Info Children verified : " + Children);
			reslogger.info("Reservation Stay Info Children verified : " + Children);
		} else {
			test_steps.add("Reservation Stay Info Children not found : " + Children);
			reslogger.info("Reservation Stay Info Children not found : " + Children);
		}

		reslogger.info("roomClass found : " + RoomClass);

		String roomClass = "//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'roomClassName')]";
		reslogger.info("roomClass found : " + roomClass);

		List<WebElement> roomClasses = driver.findElements(By.xpath(roomClass));
		int elements = roomClasses.size();
		String roomClassName = "";
		for (int i = 0; i < elements; i++) {
			roomClassName = driver.findElements(By.xpath(roomClass)).get(i).getText();
			reslogger.info("charges : " + roomClassName);
			if (roomClassName.contains(RoomClass)) {
				test_steps.add("Reservation Stay Info Room Class Name : " + RoomClass);
				reslogger.info("Reservation Stay Info Room Class Name : " + RoomClass);
			}
		}

		String roomCharge = "//span[contains(@data-bind,'showInnroadCurrency: { value: roomTotal , ShouldShowNegativeAsBracket: true }')]";
		reslogger.info("roomCharge found : " + roomCharge);

		List<WebElement> roomCharges = driver.findElements(By.xpath(roomCharge));
		int count = roomCharges.size();
		String charges = "";
		for (int i = 0; i < count; i++) {
			charges = driver.findElements(By.xpath(roomCharge)).get(i).getText();
			reslogger.info("charges : " + charges);
			if (charges.contains(RoomCharges)) {
				test_steps.add("Reservation Stay Info RoomCharges verified : " + RoomCharges);
				reslogger.info("Reservation Stay Info RoomCharges verified : " + RoomCharges);
			}
		}
	}

	public void VerifyChangeOfPolicyMessageForRoomChange(WebDriver driver, String RoomNewClass, String IsAssign,
			String Account, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		WebDriverWait wait = new WebDriverWait(driver, 25);

		try {
			Wait.wait2Second();
			int count = res.CP_Reservation_StayInfo_ThreeDotts.size();
			Utility.ScrollToElement(res.CP_Reservation_StayInfo_ThreeDotts.get(1), driver);

			res.CP_Reservation_StayInfo_ThreeDotts.get(0).click();
			test_steps.add("Click Edit Stay Info");
			reslogger.info("Click Edit Stay Info");

			// Click on change stay Info
			reslogger.info("Click on Change Stay Info");
			String changeStayInfo = "//ul//li[contains(text(),'Change Stay Details')]";
			By locator = By.xpath(changeStayInfo);
			List<WebElement> changeStayInfoEl = driver.findElements(By.xpath(changeStayInfo));
			changeStayInfoEl.get(1).click();
			test_steps.add("Click on Change Stay Info");

			// Select room
			selectRoom(driver, test_steps, RoomNewClass, IsAssign, Account);
			test_steps.add("Room Selected for new Room Class: " + RoomNewClass);
			test_steps.addAll(verifyPopupChangeInPolicy(driver, test_steps));

			// Click Save Button
			reslogger.info("Clicking Save Button");
			Wait.explicit_wait_visibilityof_webelement(res.CP_SaveRoomNo, driver);
			Utility.ScrollToElement(res.CP_SaveRoomNo, driver);
			res.CP_SaveRoomNo.click();
			test_steps.add("Click on Save Room Number Button");

		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

	public void enter_BillingAddress(WebDriver driver, ArrayList test_steps, String Salutation, String GuestFirstName,
			String GuestLastName, String Address1, String Address2, String Address3, String City, String Country,
			String State, String PostalCode, String IsBillingSameAsMailingAddress) throws InterruptedException {
		uncheck_BillingAddresSameAsMailingAddress(driver, test_steps, IsBillingSameAsMailingAddress);

		enter_BillingContactName(driver, test_steps, Salutation, GuestFirstName, GuestLastName);
		enter_BillingContactAddress(driver, test_steps, Address1, Address2, Address3);
		enter_BillingCity(driver, test_steps, City);
		select_BillingCountry(driver, test_steps, Country);
		select_BillingState(driver, test_steps, State);
		enter_BillingPostalCode(driver, test_steps, PostalCode);
	}

	public void enter_BillingContactAddress(WebDriver driver, ArrayList test_steps, String Address1, String Address2,
			String Address3) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_BillingAddress1);
		res.CP_NewReservation_BillingAddress1.clear();
		res.CP_NewReservation_BillingAddress1.sendKeys(Address1);
		test_steps.add("Enter Address1 : " + Address1);
		reslogger.info("Enter Address1 : " + Address1);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_BillingAddress2);
		res.CP_NewReservation_BillingAddress2.clear();
		res.CP_NewReservation_BillingAddress2.sendKeys(Address2);
		test_steps.add("Enter Address2 : " + Address2);
		reslogger.info("Enter Address2 : " + Address2);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_BillingAddress3);
		res.CP_NewReservation_BillingAddress3.clear();
		res.CP_NewReservation_BillingAddress3.sendKeys(Address3);
		test_steps.add("Enter Address3 : " + Address3);
		reslogger.info("Enter Address3 : " + Address3);
	}

	public void enter_BillingCity(WebDriver driver, ArrayList test_steps, String City) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_BillingCity);
		res.CP_NewReservation_BillingCity.clear();
		res.CP_NewReservation_BillingCity.sendKeys(City);
		test_steps.add("Enter City : " + City);
		reslogger.info("Enter City : " + City);
	}

	public void select_BillingCountry(WebDriver driver, ArrayList test_steps, String Country) {
		String button = "(//select[@name='country']/following-sibling::div/button)[2]";
		Wait.WaitForElement(driver, button);
		driver.findElement(By.xpath(button)).click();

		String cntry = "(//select[@name='country']/following-sibling::div//ul/li//span[contains(text(),'"
				+ Country.trim() + "')])[2]";
		Wait.WaitForElement(driver, cntry);
		driver.findElement(By.xpath(cntry)).click();
		test_steps.add("Selected Country : " + Country);
		reslogger.info("Selected Country : " + Country);
	}

	public void select_BillingState(WebDriver driver, ArrayList test_steps, String State) {
		String button = "(//select[@name='state']/following-sibling::div)[2]";
		Wait.WaitForElement(driver, button);

		if (driver.findElements(By.xpath("(//select[@name='state'])[2]/option")).size() > 1) {
			button = "(//select[@name='state']/following-sibling::div/button)[2]";
			driver.findElement(By.xpath(button)).click();
			String cntry = "(//select[@name='state'])[2]/following-sibling::div//following-sibling::div//ul/li//a//span[contains(text(),'"
					+ State.trim() + "')]";
			Wait.WaitForElement(driver, cntry);
			driver.findElement(By.xpath(cntry)).click();
			test_steps.add("Selected State : " + State);
			reslogger.info("Selected State : " + State);
		} else {
			test_steps.add("State field disabled");
			reslogger.info("State field disabled");
		}
	}

	public void enter_BillingPostalCode(WebDriver driver, ArrayList test_steps, String PostalCode) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_BillingPostalCode);
		res.CP_NewReservation_BillingPostalCode.clear();
		res.CP_NewReservation_BillingPostalCode.sendKeys(PostalCode);
		test_steps.add("Enter PostalCode : " + PostalCode);
		reslogger.info("Enter PostalCode : " + PostalCode);
	}

	public ArrayList<String> VerifyPaymentMethod(WebDriver driver, ArrayList<String> test_steps, String PaymentMethod,
			String CardNumber, String CardHolder, String ExpiryDate) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_PaymentMethod_Section);
		Utility.ScrollToElement(res.CP_Reservation_PaymentMethod_Section, driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_PaymentMethod);
		reslogger.info("Expected Payment Method : " + PaymentMethod);
		test_steps.add("Expected Payment Method : " + PaymentMethod);
		String paymentMethod = res.CP_Reservation_PaymentMethod.getText();
		reslogger.info("Found : " + paymentMethod);
		test_steps.add("Found : " + paymentMethod);

		assertEquals(PaymentMethod, paymentMethod, "Failed: payment Method doesn't match");
		reslogger.info("Verified payment method");
		test_steps.add("Verified payment method");

		Wait.WaitForElement(driver, OR_Reservation.CP_RESERVATION_CC_Number);
		String input = CardNumber; // input string
		String lastFourDigits = ""; // substring containing last 4 characters

		if (input.length() > 4) {
			lastFourDigits = input.substring(input.length() - 4);
		} else {
			lastFourDigits = input;
		}

		reslogger.info(lastFourDigits);
		CardNumber = lastFourDigits;
		reslogger.info("Expected Credit Card Number : XXXX" + CardNumber);
		test_steps.add("Expected Credit Card Number : XXXX" + CardNumber);
		String cardNumber = res.CP_RESERVATION_CC_Number.getText();
		reslogger.info("Found : XXXX" + cardNumber);
		test_steps.add("Found : XXXX" + cardNumber);

		assertEquals(CardNumber, cardNumber, "Failed: payment Method doesn't match");
		test_steps.add("Verified credit card number");

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CardHolder_Name);
		reslogger.info("Expected Name on Card : " + CardHolder);
		test_steps.add("Expected Name on Card : " + CardHolder);
		String cardHolder = res.CP_Reservation_CardHolder_Name.getText();
		reslogger.info("Found : " + cardHolder);
		test_steps.add("Found : " + cardHolder);

		assertEquals(CardHolder, cardHolder, "Failed: Card Holder doesn't match");
		test_steps.add("Verified name on card");

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Card_ExpiryDate);
		reslogger.info("Expected Card ExpiryDate : " + ExpiryDate);
		test_steps.add("Expected Card ExpiryDate : " + ExpiryDate);
		String expiryDate = res.CP_Reservation_Card_ExpiryDate.getText();
		reslogger.info("Found : " + expiryDate);
		test_steps.add("Found : " + expiryDate);

		assertEquals(ExpiryDate, expiryDate, "Failed: Card expiryDate doesn't match");
		test_steps.add("Verified card expiry date");

		return test_steps;
	}

	public void enter_BillingContactName(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_BillingSalutation);
		res.CP_NewReservation_BillingSalutation.click();
		String sal = "(//a//span[contains(text(),'" + Salutation + "')])[7]";
		Wait.WaitForElement(driver, sal);
		driver.findElement(By.xpath(sal)).click();

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_BillingFirstName);
		res.CP_NewReservation_BillingFirstName.sendKeys(GuestFirstName);
		test_steps.add("Contact First Name : " + GuestFirstName);
		reslogger.info("Contact First Name : " + GuestFirstName);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_BillingLastName);
		res.CP_NewReservation_BillingLastName.sendKeys(GuestLastName);
		test_steps.add("Contact Last Name : " + GuestLastName);
		reslogger.info("Contact Last Name : " + GuestLastName);
	}

	public void uncheck_BillingAddresSameAsMailingAddress(WebDriver driver, ArrayList test_steps,
			String IsBillingAddressSame) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_SameAsMailingAddressCheckBox);
		Utility.ScrollToElement(res.CP_NewReservation_SameAsMailingAddressCheckBox, driver);
		if (IsBillingAddressSame.contentEquals("Yes")) {
			if (!res.CP_NewReservation_SameAsMailingAddressCheckBox.isSelected()) {
				driver.findElement(By
						.xpath("//label//following-sibling::input[@data-bind='checked: PaymentDetail().useMailingInfo']//.."))
						.click();
				test_steps.add("Billing Address Same as mailing selected");
				reslogger.info("Billing Address Same as mailing selected");
			} else {
				test_steps.add("Billing Address Same as mailing selected");
				reslogger.info("Billing Address Same as mailing selected");
			}
		} else {
			if (res.CP_NewReservation_SameAsMailingAddressCheckBox.isSelected()) {
				driver.findElement(By
						.xpath("//label//following-sibling::input[@data-bind='checked: PaymentDetail().useMailingInfo']//.."))
						.click();
				test_steps.add("Billing Address Same as mailing unselected");
				reslogger.info("Billing Address Same as mailing unselected");
			} else {
				test_steps.add("Billing Address Same as mailing unselected");
				reslogger.info("Billing Address Same as mailing unselected");
			}
		}
	}

	public ArrayList<String> clickCopyButton(WebDriver driver, String GuestFirstName) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		Wait.WaitForElement(driver, OR_Reservation.COPY_BUTTON);
		Utility.ScrollToElement(cpelements.COPY_BUTTON, driver);
		cpelements.COPY_BUTTON.click();
		reslogger.info("Copy Button Clicked");
		test_steps.add("Copy Button Clicked");
		Wait.wait10Second();
		Wait.explicit_wait_visibilityof_webelement(cpelements.COPY_RESERVATION_TRIMNAME, driver);
		Wait.WaitForElement(driver, OR_Reservation.COPY_RESERVATION_TRIMNAME);
		GuestFirstName = GuestFirstName.substring(0, 3);
		String copiedReservationTrimmedName = "copy [" + GuestFirstName + "...";
		// assertEquals(cpelements.COPY_RESERVATION_TRIMNAME.getText().equals(copiedReservationTrimmedName),
		// true);
		reslogger.info("Verified Trimmed Copy Text In Copied Tab: " + copiedReservationTrimmedName);
		test_steps.add("Verified Trimmed Copy Text In Copied Tab: " + copiedReservationTrimmedName);
		return test_steps;

	}

	public ArrayList<String> verifyContactInfo(WebDriver driver, String IsGuesProfile, String GuestProfileName,
			String Salutation, String GuestFistName, String GuestLastName, String FirstName, String LastName,
			String Email, String Phone, String AlternativePhone) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		if (IsGuesProfile.equals("Yes")) {
			assertEquals(GuestProfileName, cpelements.COPY_CP_GuestInfo_GuestProfile.getAttribute("value"));
			reslogger.info("Contact Info GuestProfileName: " + GuestProfileName + " :Verified");
			test_steps.add("Contact Info GuestProfileName: " + GuestProfileName + " :Verified");

			assertEquals(GuestFistName, cpelements.COPY_CP_GuestInfo_FirstName.getAttribute("value"));
			reslogger.info("Guest Info FirstName: " + GuestFistName + " :Verified");
			test_steps.add("Guest Info FistName: " + GuestFistName + " :Verified");

			assertEquals(GuestLastName, cpelements.COPY_CP_GuestInfo_LastName.getAttribute("value"));
			reslogger.info("Guest Info LastName: " + GuestFistName + " :Verified");
			test_steps.add("Guest Info LastName: " + GuestFistName + " :Verified");
		} else {
			assertEquals("", cpelements.COPY_CP_GuestInfo_GuestProfile.getAttribute("value"));
			reslogger.info("Contact Info GuestProfileName: " + "Empty" + " :Verified");
			test_steps.add("Contact Info GuestProfileName: " + "Empty" + " :Verified");

			assertEquals("", cpelements.COPY_CP_GuestInfo_FirstName.getAttribute("value"));
			reslogger.info("Guest Info FirstName: " + "Empty" + " :Verified");
			test_steps.add("Guest Info FistName: " + "Empty" + " :Verified");

			assertEquals("", cpelements.COPY_CP_GuestInfo_LastName.getAttribute("value"));
			reslogger.info("Guest Info LastName: " + "Empty" + " :Verified");
			test_steps.add("Guest Info LastName: " + "Empty" + " :Verified");
		}

		assertEquals(Salutation, cpelements.COPY_CP_GuestInfo_Guest_Salutation.getText());
		reslogger.info("Guest Info Salutation: " + "Empty" + " :Verified");
		test_steps.add("Guest Info Salutation: " + "Empty" + " :Verified");

		assertEquals(Salutation, cpelements.COPY_CP_ContactInfo_Salutation.getText());
		reslogger.info("Contact Info Saluation: " + Salutation + " :Verified");
		test_steps.add("Contact Info Saluation: " + Salutation + " :Verified");

		assertEquals(FirstName, cpelements.COPY_CP_ContactInfo_FirstName.getAttribute("value"));
		reslogger.info("Contact Info FirstName: " + FirstName + " :Verified");
		test_steps.add("Contact Info FirstName: " + FirstName + " :Verified");

		assertEquals(LastName, cpelements.COPY_CP_ContactInfo_LastName.getAttribute("value"));
		reslogger.info("Contact Info LastName: " + LastName + " :Verified");
		test_steps.add("Contact Info LastName: " + LastName + " :Verified");

		assertEquals(Email, cpelements.COPY_CP_ContactInfo_Email.getAttribute("value"));
		reslogger.info("Contact Info Email: " + Email + " :Verified");
		test_steps.add("Contact Info Email: " + Email + " :Verified");

		assertEquals(Phone, cpelements.COPY_CP_ContactInfo_Phone.getAttribute("value").replaceAll("-", "")
				.replaceAll(" ", "").replaceAll("\\)", "").replaceAll("\\(", ""));
		reslogger.info("Contact Info PhoneNumber: " + Phone + " :Verified");
		test_steps.add("Contact Info PhoneNumber: " + Phone + " :Verified");

		assertEquals(AlternativePhone, cpelements.COPY_CP_ContactInfo_AlternativePhone.getAttribute("value")
				.replaceAll("-", "").replaceAll(" ", "").replaceAll("\\)", "").replaceAll("\\(", ""));
		reslogger.info("Contact Info AlternativePhon: " + AlternativePhone + " :Verified");
		test_steps.add("Contact Info AlternativePhon: " + AlternativePhone + " :Verified");

		return test_steps;

	}

	public ArrayList<String> verifyMailingInfo(WebDriver driver, String Address1, String Address2, String Address3,
			String City, String Country, String State, String PostalCode) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		assertEquals(Address1, cpelements.COPY_CP_MailingInfo_Address1.getAttribute("value"));
		reslogger.info("Mailing Info Address1: " + Address1 + " :Verified");
		test_steps.add("Mailing Info Address1: " + Address1 + " :Verified");
		assertEquals(Address2, cpelements.COPY_CP_MailingInfo_Address2.getAttribute("value"));
		reslogger.info("Mailing Info Address2: " + Address2 + " :Verified");
		test_steps.add("Mailing Info Address2: " + Address2 + " :Verified");
		assertEquals(Address3, cpelements.COPY_CP_MailingInfo_Address3.getAttribute("value"));
		reslogger.info("Mailing Info Address3: " + Address3 + " :Verified");
		test_steps.add("Mailing Info Address3: " + Address3 + " :Verified");
		assertEquals(City, cpelements.COPY_CP_MailingInfo_City.getAttribute("value"));
		reslogger.info("Mailing Info City: " + City + " :Verified");
		test_steps.add("Mailing Info City: " + City + " :Verified");
		assertEquals(Country, cpelements.COPY_CP_MailingInfo_Country.getText());
		reslogger.info("Mailing Info Country: " + Country + " :Verified");
		test_steps.add("Mailing Info Country: " + Country + " :Verified");
		assertEquals(State, cpelements.COPY_CP_MailingInfo_State.getText());
		reslogger.info("Mailing Info State: " + State + " :Verified");
		test_steps.add("Mailing Info State: " + State + " :Verified");
		assertEquals(PostalCode, cpelements.COPY_CP_MailingInfo_PostalCode.getAttribute("value"));
		reslogger.info("Mailing Info PostalCode: " + PostalCode + " :Verified");
		test_steps.add("Mailing Info PostalCode: " + PostalCode + " :Verified");

		return test_steps;

	}

	public ArrayList<String> verifyBillingInfo(WebDriver driver, String PaymentMethod, String CardNumber,
			String NameOnCard, String ExpDate) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		assertEquals(PaymentMethod, cpelements.COPY_CP_BillingInfo_PaymentMethod.getText());
		reslogger.info("Billing Info PaymentMethod: " + PaymentMethod + " :Verified");
		test_steps.add("Billing Info PaymentMethod: " + PaymentMethod + " :Verified");

		assertEquals(CardNumber, cpelements.COPY_CP_BillingInfo_CreditCardNumber.getAttribute("value"));
		reslogger.info("Billing Info CardNumber: " + CardNumber + " :Verified");
		test_steps.add("Billing Info CardNumber: " + CardNumber + " :Verified");

		assertEquals(NameOnCard, cpelements.COPY_CP_BillingInfo_NameOnCard.getAttribute("value"));
		reslogger.info("Billing Info NameOnCard: " + NameOnCard + " :Verified");
		test_steps.add("Billing Info NameOnCard: " + NameOnCard + " :Verified");

		assertEquals(ExpDate, cpelements.COPY_CP_BillingInfo_ExpDate.getAttribute("value"));
		reslogger.info("Billing Info ExpDate: " + ExpDate + " :Verified");
		test_steps.add("Billing Info ExpDate: " + ExpDate + " :Verified");

		return test_steps;

	}

	public ArrayList<String> verifyRoomClassDetails(WebDriver driver, String RoomClassName, String RoomNumber)
			throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		assertEquals(RoomClassName.replace(" ", ""),
				cpelements.COPY_CP_RoomClassName.getText().split(":")[0].replace(" ", ""));
		reslogger.info("Room Class Name: " + RoomClassName + " :Verified");
		test_steps.add("Room Class Name: " + RoomClassName + " :Verified");

		assertEquals(!RoomNumber.equals(cpelements.COPY_CP_RoomClassName.getText().split(":")[1]), true);
		reslogger.info("Room Number changed from : " + RoomNumber + " to "
				+ cpelements.COPY_CP_RoomClassName.getText().split(":")[1] + ": Verified");
		test_steps.add("Room Number changed from : " + RoomNumber + " to "
				+ cpelements.COPY_CP_RoomClassName.getText().split(":")[1] + ": Verified");
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: verifyMarketingInfo ' Description: Verifies the
	 * Information is same as Copied From Reservation/ Can User After Copy
	 * Reservation. ' Input parameters: (driver,String, String ) ' Return value:
	 * String<> ' Created By: Aqsa ' Created On: <06/22/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> verifyMarketingInfo(WebDriver driver, String Market, String Referral)
			throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		String marketValue = "(//label[text()='Market']/preceding-sibling::div/button)[2]//span[text()='" + Market
				+ "']";
		String referralValue = "(//label[text()='Referral']/preceding-sibling::div/button)[3]//span[text()='" + Referral
				+ "']";

		WebElement MarketEle = driver.findElement(By.xpath(marketValue));
		WebElement ReferraltEle = driver.findElement(By.xpath(referralValue));

		assertEquals(Market, MarketEle.getText());
		reslogger.info("Marketing Info Market: " + Market + " :Verified");
		test_steps.add("Marketing Info Market: " + Market + " :Verified");
		reslogger.info("Valueee:" + ReferraltEle.getText());

		assertEquals(Referral, ReferraltEle.getText());
		reslogger.info("Marketing Info Referral: " + Referral + " :Verified");
		test_steps.add("Marketing Info Referral: " + Referral + " :Verified");
		return test_steps;
	}

	public ArrayList<String> verifyNotes(WebDriver driver, String Type, String Subject, String Description)
			throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		Elements_Reservation ReservationPage = new Elements_Reservation(driver);
		WebElement NotesType = null;
		WebElement NotesSubject = null;
		WebElement NotesDesctiption = null;
		try {
			NotesType = driver
					.findElement(By.xpath("(//div[text()='Notes']/parent::div//td[text()='" + Type + "'])[2]"));
			Utility.ScrollToElement(NotesType, driver);
			assertEquals(NotesType.getText(), Type, "Failed : NotesType missmatched");
			reslogger.info("Verified Notes Type :" + Type);
			test_steps.add("Verified Notes Type :" + Type);

			NotesSubject = driver.findElement(
					By.xpath("(//td[contains(@data-bind,'text: subject') and contains(text(),'" + Subject + "')])[2]"));
			assertEquals(NotesSubject.getText(), Subject, "Failed : Detail missmatched");
			reslogger.info("Verified Notes Subject :" + Subject);

			test_steps.add("Verified Notes Subject :" + Subject);

			NotesDesctiption = driver.findElement(
					By.xpath("(//td[contains(@data-bind,'text: de') and contains(text(),'" + Description + "')])[2]"));
			assertEquals(NotesDesctiption.getText(), Description, "Failed : Status missmatched");
			reslogger.info("Verified Notes Description :" + Description);
			test_steps.add("Verified Notes Description :" + Description);
		} catch (Exception e) {
			NotesType = driver
					.findElement(By.xpath("(//div[text()='Notes']/parent::div//td[text()='" + Type + "'])[1]"));
			Utility.ScrollToElement(NotesType, driver);
			assertEquals(NotesType.getText(), Type, "Failed : NotesType missmatched");
			reslogger.info("Verified Notes Type :" + Type);
			test_steps.add("Verified Notes Type :" + Type);

			NotesSubject = driver.findElement(
					By.xpath("(//td[contains(@data-bind,'text: subject') and contains(text(),'" + Subject + "')])[1]"));
			assertEquals(NotesSubject.getText(), Subject, "Failed : Detail missmatched");
			reslogger.info("Verified Notes Subject :" + Subject);

			test_steps.add("Verified Notes Subject :" + Subject);

			NotesDesctiption = driver.findElement(
					By.xpath("(//td[contains(@data-bind,'text: de') and contains(text(),'" + Description + "')])[1]"));
			assertEquals(NotesDesctiption.getText(), Description, "Failed : Status missmatched");
			reslogger.info("Verified Notes Description :" + Description);
			test_steps.add("Verified Notes Description :" + Description);
		}

		return test_steps;
	}

	public ArrayList<String> verifyIncidentals(WebDriver driver, String Category, String PerUnit, String Quantity)
			throws InterruptedException, ParseException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		Elements_Reservation ReservationPage = new Elements_Reservation(driver);
		String incidentalCategory = getIncidentalCategory(driver, 3);
		assertEquals(incidentalCategory, Category, "Failed : Category mismatched");
		reslogger.info("Verified Incidental Category :" + incidentalCategory);
		test_steps.add("Verified Incidental Category :" + incidentalCategory);

		String incidentalDescription = getIncidentalDescritption(driver, 3);
		assertEquals(incidentalDescription, Category, "Failed : Description mismatched");
		reslogger.info("Verified Incidental Description :" + incidentalDescription);
		test_steps.add("Verified Incidental Description :" + incidentalDescription);

		String incidentalPerUnit = getIncidentalPerUnit(driver, 3);
		incidentalPerUnit = incidentalPerUnit.split("\\.")[0];
		incidentalPerUnit = incidentalPerUnit.replace("$", "").replace(" ", "");
		assertEquals(incidentalPerUnit, PerUnit, "Failed : PerUnit mismatched");
		reslogger.info("Verified Incidental PerUnit :" + PerUnit);
		test_steps.add("Verified Incidental PerUnit :" + PerUnit);

		String incidentalAmount = getIncidentalTotalAmount(driver, 3);
		incidentalAmount = incidentalAmount.split("\\.")[0];
		incidentalAmount = incidentalAmount.replace("$", "").replace(" ", "");

		// assertEquals(incidentalAmount, (Integer.parseInt(Quantity) *
		// Integer.parseInt(PerUnit)),
		// "Failed : PerUnit mismatched");
		reslogger.info("Verified Incidental Amount :" + incidentalAmount);
		test_steps.add("Verified Incidental Amount :" + incidentalAmount);

		return test_steps;
	}

	public ArrayList<String> verifyCopyButtonState(WebDriver driver, String ReservationStatus)
			throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		if (ReservationStatus.equals("Confirmed") || ReservationStatus.equals("Guaranteed")
				|| ReservationStatus.equals("On Hold") || ReservationStatus.equals("Reserved")) {
			Wait.WaitForElement(driver, OR_Reservation.COPY_BUTTON);
			assertEquals(cpelements.COPY_BUTTON.isDisplayed(), true, "Failed: Copy Button is not displayed");
			reslogger.info("Copy Button is Displayed In CP Reservation Page");
			test_steps.add("Copy Button is Displayed In CP Reservation Page");

		} else {
			assertEquals(cpelements.COPY_BUTTON.isDisplayed(), false, "Failed: Copy Button is displayed");
			reslogger.info(
					"Copy Button is not Displayed In CP Reservation Page Due to: " + ReservationStatus + " Status");
			test_steps.add(
					"Copy Button is not Displayed In CP Reservation Page Due to: " + ReservationStatus + " Status");
		}
		return test_steps;
	}

	public ArrayList<String> enter_GuestName(WebDriver driver, ArrayList<String> test_steps, String GuestFirstName,
			String GuestLastName) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String CP_NewReservation_GuestFirstName = "(//label[text()='Guest ']/preceding-sibling::input)[2]";
		Wait.WaitForElement(driver, CP_NewReservation_GuestFirstName);
		WebElement CP_NewReservation_GuestFirstNameEle = driver.findElement(By.xpath(CP_NewReservation_GuestFirstName));
		Utility.ScrollToElement(CP_NewReservation_GuestFirstNameEle, driver);
		CP_NewReservation_GuestFirstNameEle.sendKeys(GuestFirstName);
		test_steps.add("Guest First Name : " + GuestFirstName);
		reslogger.info("Guest First Name : " + GuestFirstName);
		String CP_NewReservation_GuestLastName = "(//label[text()='Guest ']/../../../../following-sibling::div//input)[2]";
		Wait.WaitForElement(driver, CP_NewReservation_GuestLastName);
		WebElement CP_NewReservation_GuestLasttNameEle = driver.findElement(By.xpath(CP_NewReservation_GuestLastName));
		CP_NewReservation_GuestLasttNameEle.sendKeys(GuestLastName);
		test_steps.add("Guest Last Name : " + GuestLastName);
		reslogger.info("Guest Last Name : " + GuestLastName);

		return test_steps;

	}

	public void verifyTaskNotCopied(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.COPY_CP_NewReservation_TaskNotCopy);
		Utility.ScrollToElement(res.COPY_CP_NewReservation_TaskNotCopy, driver);
		assertEquals(res.COPY_CP_NewReservation_TaskNotCopy.getText(), "There are no Tasks created on this reservation",
				"Failed: Task Copied");
		test_steps.add("Task not Copied : " + res.COPY_CP_NewReservation_TaskNotCopy.getText() + " Verified");
		reslogger.info("Task not Copied : " + res.COPY_CP_NewReservation_TaskNotCopy.getText() + "Verified");

	}

	public void verifyCopyAddedLineItem(WebDriver driver, ArrayList<String> test_steps, String LineItemCategory,
			String LineItemCategoryAmount) {
		test_steps.add("******************* Verifying Added Line Item to folio**********************");
		reslogger.info("******************* Verifying Added Line Item to folio**********************");

		String includeTax = "//span[text()='Include Taxes in Line Items']/preceding-sibling::input";
		String copyReservationIncludeTax = "(//span[text()='Include Taxes in Line Items']/preceding-sibling::input)[2]";
		try {
			Wait.WaitForElement(driver, includeTax);
			if (driver.findElement(By.xpath(includeTax)).isSelected()) {
				driver.findElement(By.xpath(includeTax)).click();
			}
		} catch (Exception e) {
			Wait.WaitForElement(driver, copyReservationIncludeTax);
			if (driver.findElement(By.xpath(copyReservationIncludeTax)).isSelected()) {
				driver.findElement(By.xpath(copyReservationIncludeTax)).click();
			}
		}

		String line = "//td[@class='lineitem-category']/span";

		int count = driver.findElements(By.xpath(line)).size();
		String text = null;

		line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])[2]";
		Wait.WaitForElement(driver, line);
		WebElement linItemCategoryElement = driver.findElement(By.xpath(line));
		assertEquals(linItemCategoryElement.getText(), LineItemCategory);
		test_steps.add("Line item category verified in folio : " + LineItemCategory);
		reslogger.info("Line item category verified in folio : " + LineItemCategory);

		line = "((//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../following-sibling::td[contains(@class,'amount')]/span[contains(text(),'"
				+ LineItemCategoryAmount + "')])[2]";
		Wait.WaitForElement(driver, line);
		WebElement linItemAmountElement = driver.findElement(By.xpath(line));
		assertEquals(linItemAmountElement.getText().split("\\.")[0].replace("$", "").replaceAll(" ", ""),
				LineItemCategoryAmount);
		test_steps.add("Line item category amount verified in folio : " + LineItemCategoryAmount);
		reslogger.info("Line item category amount verified in folio : " + LineItemCategoryAmount);
	}

	public ArrayList<String> verifyGuestNameAfterReservation(WebDriver driver, String guestName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.explicit_wait_visibilityof_webelement_120(res.HeaderGuestName_AfterReservation, driver);
		String foundName = res.HeaderGuestName_AfterReservation.getText();

		assertEquals(foundName.trim(), guestName, "Failed to verify AccounGuestt No");
		test_steps.add("Successfully Verified Guest Name : " + guestName);
		reslogger.info("Successfully Verified Guest Name : " + guestName);

		return test_steps;

	}

	public ArrayList<String> verifyConfirmationNoAfterReservation(WebDriver driver, String confirmationNo) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.explicit_wait_visibilityof_webelement_120(res.HeaderConfirmationNo, driver);
		String foundNO = res.HeaderConfirmationNo.getText();

		assertEquals(foundNO.trim(), confirmationNo, "Failed to verify ConfirmationNo");

		test_steps.add("Successfully Verified ConfirmationNo : " + confirmationNo);

		reslogger.info("Successfully Verified ConfirmationNo : " + confirmationNo);

		return test_steps;

	}

	public ArrayList<String> verifyStatusAfterReservation(WebDriver driver, String status) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		try {
			Wait.explicit_wait_visibilityof_webelement_600(res.HeaderStatus_AfterReservation, driver);
		} catch (Exception e) {
			Wait.wait5Second();
		}
		String foundTxt = res.HeaderStatus_AfterReservation.getText();

		assertEquals(foundTxt.toUpperCase(), status.toUpperCase(), "Failed to verify Status");
		test_steps.add("Successfully Verified Status : " + status);
		reslogger.info("Successfully Verified Status : " + status);
		return test_steps;

	}

	public ArrayList<String> verifyStayDateAfterReservation(WebDriver driver, String arivalDate, String departDate) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.explicit_wait_visibilityof_webelement_120(res.HeaderStayDate, driver);
		String foundTxt = res.HeaderStayDate.getText();

		assertEquals(foundTxt, "(" + arivalDate + " - " + departDate + ")", "Failed to verify StayDate");
		test_steps.add("Successfully Verified StayDate : " + foundTxt);

		reslogger.info("Successfully Verified StayDate : " + foundTxt);

		return test_steps;

	}

	public ArrayList<String> selectSalutation(WebDriver driver, String salutation) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
		Wait.explicit_wait_visibilityof_webelement(res.CP_NewReservation_GuestSalutation, driver);
		Wait.explicit_wait_elementToBeClickable(res.CP_NewReservation_GuestSalutation, driver);
		Utility.ScrollToElement(res.CP_NewReservation_GuestSalutation, driver);
		res.CP_NewReservation_GuestSalutation.click();
		String sal = "//span[contains(text(),'" + salutation + "')]/../..";
		Wait.WaitForElement(driver, sal);

		driver.findElement(By.xpath(sal)).click();
		test_steps.add("Selected Salutation : " + salutation);
		reslogger.info("Selected Salutation : " + salutation);
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <VeriGuestProfileCheckox> ' Description: <Verify create
	 * guest profile checkbox is checked or not> ' Input parameters: <boolean
	 * value> ' Return value: <array list> ' Created By: <Farhan Ghaffar> '
	 * Created On: <04/17/2020>
	 * 
	 * ' Modified By | Description of Modification:
	 * ------------------------------------------ <mm/dd/yyyy>:<Developer name>:
	 * 1.Step modified 2.Step modified
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> verifyGuestProfileCheckoxChecked(WebDriver driver, boolean isChecked)
			throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> testStep = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckboxGuestProfile);
		Wait.explicit_wait_visibilityof_webelement(element.CheckboxGuestProfile, driver);
		Wait.explicit_wait_elementToBeClickable(element.CheckboxGuestProfile, driver);
		Utility.ScrollToElement(element.CheckboxGuestProfile, driver);
		if (isChecked) {
			if (element.CheckboxGuestProfile.isSelected()) {
				testStep.add("Verified create guest profile checkbox already checked");
			} else {
				element.CheckboxGuestProfile.click();
				testStep.add("Verified create guest profile checkbox is checked");
			}
		} else {
			if (!element.CheckboxGuestProfile.isSelected()) {
				try {
					element.CheckboxGuestProfile.click();
				} catch (Exception e) {
					Utility.clickThroughJavaScript(driver, element.CheckboxGuestProfile);
				}
				testStep.add("Verified create guest profile checkbox is  unchecked");
			} else {
				testStep.add("Verified create guest profile checkbox already unchecked");
			}
		}

		return testStep;
	}

	public ArrayList<String> enterGuestName(WebDriver driver, ArrayList<String> test_steps, String Salutation,
			String GuestFirstName,

			String GuestLastName) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		try {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
			Wait.explicit_wait_visibilityof_webelement(res.CP_NewReservation_GuestSalutation, driver);
			Wait.explicit_wait_elementToBeClickable(res.CP_NewReservation_GuestSalutation, driver);
			Utility.ScrollToElement(res.CP_NewReservation_GuestSalutation, driver);
			res.CP_NewReservation_GuestSalutation.click();
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, res.CP_NewReservation_GuestSalutation);
		}
		String sal = "//span[contains(text(),'" + Salutation + "')]/../..";
		try {

			reslogger.info(sal);
			Wait.WaitForElement(driver, sal);
			driver.findElement(By.xpath(sal)).click();
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(sal)));
		}
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
		res.CP_NewReservation_GuestFirstName.sendKeys(GuestFirstName);
		test_steps.add("Guest First Name : " + GuestFirstName);
		reslogger.info("Guest First Name : " + GuestFirstName);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);
		res.CP_NewReservation_GuestLastName.sendKeys(GuestLastName);
		test_steps.add("Guest Last Name : " + GuestLastName);
		reslogger.info("Guest Last Name : " + GuestLastName);

		return test_steps;
	}

	public void enterPaymentDetails(WebDriver driver, ArrayList<String> testSteps, String paymentType,
			String cardNumber, String nameOnCard, String cardExpDate) throws InterruptedException {
		Elements_CPReservation elementsReservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
		elementsReservation.CP_NewReservation_PaymentMethod.click();

		if (paymentType.equalsIgnoreCase("Swipe")) {
			String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'MC')]";
			Wait.WaitForElement(driver, paymentMethod);
			driver.findElement(By.xpath(paymentMethod)).click();
			elementsReservation.CP_NewReservation_Swipe.click();
			testSteps.add("Clicking in Swipe");
			reslogger.info("Clicking in Swipe");
			Wait.wait1Second();
			String CC = "(//label[text()='Credit Card Number']/preceding-sibling::input)[2]";
			Wait.WaitForElement(driver, CC);
			driver.findElement(By.xpath(CC)).sendKeys(cardNumber);
			testSteps.add("Enter CardNumber : " + cardNumber);
			reslogger.info("Enter CardNumber : " + cardNumber);
			elementsReservation.CP_NewReservation_CardNumber.sendKeys(Keys.TAB);
			Wait.wait2Second();
		} else {
			String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'"
					+ paymentType.trim() + "')]";
			Wait.WaitForElement(driver, paymentMethod);
			driver.findElement(By.xpath(paymentMethod)).click();
			testSteps.add("Selected PaymentType : " + paymentType);
			reslogger.info("Selected PaymentType : " + paymentType);
			if (paymentType.trim().equalsIgnoreCase("MC") || paymentType.trim().equalsIgnoreCase("Visa")
					|| paymentType.trim().equalsIgnoreCase("Amex") || paymentType.trim().equalsIgnoreCase("Discover")) {
				elementsReservation.CP_NewReservation_CardNumber.sendKeys(cardNumber);
				testSteps.add("Enter CardNumber : " + cardNumber);
				reslogger.info("Enter CardNumber : " + cardNumber);
				elementsReservation.CP_NewReservation_NameOnCard.sendKeys(nameOnCard);
				testSteps.add("Enter Name On Card : " + nameOnCard);
				reslogger.info("Enter Name On Card : " + nameOnCard);
				elementsReservation.CP_NewReservation_CardExpDate.sendKeys(cardExpDate);
				testSteps.add("Enter Card ExpDate : " + cardExpDate);
				reslogger.info("Enter Card ExpDate : " + cardExpDate);
			}
		}
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CreateGuestProfile);
		if (!driver.findElement(By.xpath("//small[contains(text(),'Address')]/../../following-sibling::div//input"))
				.isSelected()) {
			driver.findElement(By.xpath("//small[contains(text(),'Address')]/../../following-sibling::div/label"))
					.click();
		}
	}

	public ArrayList<String> selectReferral(WebDriver driver, String referral) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.SelectMarketButton);
		Wait.explicit_wait_visibilityof_webelement(element.SelectMarketButton, driver);
		Wait.explicit_wait_elementToBeClickable(element.SelectMarketButton, driver);
		Utility.ScrollToElement(element.SelectMarketButton, driver);
		element.SelectMarketButton.click();
		testSteps.add("Click on market");
		String pathMarket = "(//label[text()='Market']/preceding-sibling::div//ul/li//span[contains(text(),'Internet')])[1]";
		Wait.WaitForElement(driver, pathMarket);
		WebElement elementMarket = driver.findElement(By.xpath(pathMarket));
		elementMarket.click();
		reslogger.info("Selected market as : Internet");
		testSteps.add("Selected market as : Internet");

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Referral);
		Wait.explicit_wait_visibilityof_webelement(element.CP_NewReservation_Referral, driver);
		Wait.explicit_wait_elementToBeClickable(element.CP_NewReservation_Referral, driver);
		element.CP_NewReservation_Referral.click();

		String pathReferral = "(//label[text()='Referral']/preceding-sibling::div//ul/li//span[contains(text(),'"
				+ referral.trim() + "')])[2]";
		reslogger.info(pathReferral);
		Wait.WaitForElement(driver, pathReferral);
		WebElement elementReferral = driver.findElement(By.xpath(pathReferral));
		Wait.explicit_wait_visibilityof_webelement(elementReferral, driver);
		elementReferral.click();
		reslogger.info("Selected Referral as : " + referral);
		testSteps.add("Selected Referral as : " + referral);
		return testSteps;
	}

	public void clickOnQuote(WebDriver driver) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.SaveQuote);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.SaveQuote), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.SaveQuote), driver);
		element.saveQuote.click();

	}

	public String getReservationConfirmationNumber(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath("(//div[@class='ir-loader-in'])")).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ConfirmationNumber);
		String confirmation = res.CP_NewReservation_ConfirmationNumber.getText();
		test_steps.add("Confirmation Number : <b>" + confirmation + "</b>");
		reslogger.info("Confirmation Number : <b>" + confirmation + "</b>");
		return confirmation;
	}

	public String getRoomNumberDetail(WebDriver driver) {
		String path = "//div[contains(@class,'roomInfo')]//span[contains(@data-bind,'roomNumber')]";
		Wait.WaitForElement(driver, path);
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getRoomChargesInTripSummary(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.getRoomChargesInTripSummary);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.getRoomChargesInTripSummary), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.getRoomChargesInTripSummary), driver);
		return element.getRoomChargesInTripSummary.getText();
	}

	public String getIncidentalsInTripSummary(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.getIncidentalsInTripSummary);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.getIncidentalsInTripSummary), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.getIncidentalsInTripSummary), driver);
		return element.getIncidentalsInTripSummary.getText();
	}

	public String getTaxandServicesInTripSummary(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.getTaxandServicesInTripSummary);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.getTaxandServicesInTripSummary), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.getTaxandServicesInTripSummary), driver);
		return element.getTaxandServicesInTripSummary.getText();
	}

	public String getTotalTripSummary(WebDriver driver) throws InterruptedException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.getTripTotalInTripSummary);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.getTripTotalInTripSummary), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.getTripTotalInTripSummary), driver);
		return element.getTripTotalInTripSummary.getText();
	}

	public String getBalanceInTripSummary(WebDriver driver) throws InterruptedException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.getTotalBalanceInTripSummary);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.getTotalBalanceInTripSummary), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.getTotalBalanceInTripSummary), driver);
		Utility.ScrollToElement(element.getTotalBalanceInTripSummary, driver);
		return element.getTotalBalanceInTripSummary.getText();
	}

	public String getPaidInTripSummary(WebDriver driver) throws InterruptedException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.getPaidInTripSummary);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.getPaidInTripSummary), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.getPaidInTripSummary), driver);
		Utility.ScrollToElement(element.getPaidInTripSummary, driver);
		return element.getPaidInTripSummary.getText();
	}

	public ArrayList<String> selectAllSearchedReservationCheckBox(WebDriver driver) throws Exception {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.ClickOnCheckBoxProperty);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ClickOnCheckBoxProperty), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ClickOnCheckBoxProperty), driver);
		element.clickOnCheckBoxProperty.click();
		testSteps.add("Successfully all reservations are selected ");
		return testSteps;

	}

	public ArrayList<String> clickBulkOptionCheckInAndVerifyPopUp(WebDriver driver) throws Exception {
		ArrayList<String> test_steps = new ArrayList<>();
		Elements_Reservation_SearchPage resservationSearch = new Elements_Reservation_SearchPage(driver);
		Wait.waitUntilPresenceOfElementLocated(OR.Click_Bulk_Action, driver);
		resservationSearch.Click_Bulk_Action.click();
		test_steps.add("Click Bulk Action");
		resservationSearch.Select_Checkin.click();
		test_steps.add("Clicked on bulk action - CHECKIN option");
		Wait.explicit_wait_visibilityof_webelement_120(resservationSearch.Verify_Bulk_Checkin_popup, driver);
		test_steps.add("Bulk CheckIn Popup is displayed");
		return test_steps;

	}

	public ArrayList<String> clickOnBulkResservationCanUpdated(WebDriver driver, String numberOfReservations)
			throws Exception {
		ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ResBulkCanUpdatedTab);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ResBulkCanUpdatedTab), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ResBulkCanUpdatedTab), driver);

		String tabText = element.ResBulkCanUpdatedTab.getText();
		assertTrue(tabText.contains(numberOfReservations), "Failed: Number of reservation can be updated mismatching");
		testSteps.add(tabText);
		element.ResBulkCanUpdatedTab.click();
		return testSteps;
	}

	public String getReservationDetails(WebDriver driver, String Guestname, int parentInex, int Index) {

		String Path = "((//span[text()='" + Guestname + "'])[" + parentInex + "]//..//following-sibling::td//span)["
				+ Index + "]";
		WebElement element = driver.findElement(By.xpath(Path));
		return element.getText();
	}

	public String getGuestName(WebDriver driver, String Guestname, int parentInex) throws InterruptedException {

		String Path = "(//span[text()='" + Guestname + "'])[" + parentInex + "]";
		WebElement element = driver.findElement(By.xpath(Path));
		Utility.ScrollToElement(element, driver);
		return element.getText();
	}

	public ArrayList<String> clickOnBulkReservationCanNotUpdated(WebDriver driver, String numberOfReservation)
			throws Exception {
		ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ResBulkCanNotUpdatedTab);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ResBulkCanNotUpdatedTab), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ResBulkCanNotUpdatedTab), driver);
		String tabText = elements.ResBulkCanNotUpdatedTab.getText();
		assertTrue(tabText.contains(numberOfReservation));
		testSteps.add(tabText);
		reslogger.info(tabText);
		elements.ResBulkCanNotUpdatedTab.click();
		testSteps.add("Click on tab");
		return testSteps;
	}

	public ArrayList<String> clickOnProcessButtonInBulkCheckInPopUp(WebDriver driver) throws Exception {
		ArrayList<String> test_steps = new ArrayList<>();
		Elements_CPReservation cpResElm = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement_120(cpResElm.ClickProcessButtonBulkCheckIN, driver);
		cpResElm.ClickProcessButtonBulkCheckIN.click();
		reslogger.info("Process Button is Pressed Successfully");
		test_steps.add("Process Button is Pressed Successfully");

		return test_steps;
	}

	public ArrayList<String> clickOnBulkReservationCanUpdatedAfterProcess(WebDriver driver) throws Exception {
		ArrayList<String> test_steps = new ArrayList<>();
		Elements_CPReservation cpResElm = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement_120(cpResElm.verifyBulkCheckInCompletePopUp, driver);
		test_steps.add("Bulk Check In Complete PopUp After Process Is Successfully open");
		reslogger.info("Bulk Check In Complete PopUp After Process Is Successfully open");
		Wait.explicit_wait_visibilityof_webelement_120(cpResElm.clickResCanUpdateAfterProcess, driver);
		String tabText = cpResElm.clickResCanUpdateAfterProcess.getText();
		test_steps.add(tabText);
		reslogger.info(tabText);
		cpResElm.clickResCanUpdateAfterProcess.click();
		test_steps.add(tabText + " Tab is Successfully Clicked");
		reslogger.info(tabText + " Tab is Successfully Clicked");

		return test_steps;
	}

	public ArrayList<String> clickOnBulkCheckInReservationCanNotUpdated(WebDriver driver, String numberOfReservation)
			throws Exception {
		ArrayList<String> test_steps = new ArrayList<>();
		Elements_CPReservation cpResElm = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ClickResCanNotUpdateAfterProcess);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ClickResCanNotUpdateAfterProcess), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ClickResCanNotUpdateAfterProcess), driver);

		String tabText = cpResElm.clickResCanNotUpdateAfterProcess.getText();
		assertTrue(tabText.contains(numberOfReservation), "Failed: cannot updated tab is mismatching");
		test_steps.add(tabText);
		reslogger.info(tabText);
		cpResElm.clickResCanNotUpdateAfterProcess.click();
		test_steps.add("Click on tab");

		return test_steps;
	}

	public ArrayList<String> closeBulkActionPopUp(WebDriver driver) throws Exception {
		ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation elementsReservation = new Elements_CPReservation(driver);
		try {
			Wait.WaitForElement(driver, OR_Reservation.CLOSEBULKACTIONPOPUP);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CLOSEBULKACTIONPOPUP), driver);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CLOSEBULKACTIONPOPUP), driver);
			Utility.ScrollToElement_NoWait(elementsReservation.CLOSEBULKACTIONPOPUP, driver);
			elementsReservation.CLOSEBULKACTIONPOPUP.click();
		} catch (Exception e) {
			Utility.ScrollToElement_NoWait(elementsReservation.CLOSE_BULK_ACTION_POPUP, driver);
			elementsReservation.CLOSE_BULK_ACTION_POPUP.click();
		}
		test_steps.add("Bulk Action PopUp Closed Successfully");
		reslogger.info("Bulk Action PopUp Closed Successfully");

		return testSteps;

	}

	public ArrayList<String> verifyReservationStatus(WebDriver driver, String reservationNumber, String expectedStatus)
			throws Exception {

		ArrayList<String> testSteps = new ArrayList<>();
		String path = "//span[contains(text(),'" + reservationNumber
				+ "')]//..//following-sibling::td//span[contains(@data-bind,'text: StatusName.replace')]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);

		WebElement element = driver.findElement(By.xpath(path));
		testSteps.add("Expected status: " + expectedStatus);
		testSteps.add("Found: " + element.getText());
		assertEquals(element.getText(), expectedStatus, "Failed: reservation status is mismatching!");
		test_steps.add("Verified resevrtaion number " + reservationNumber + " status");
		return testSteps;
	}

	public ArrayList<String> clickOnProcessInBulkCheckOutPopUp(WebDriver driver) throws Exception {
		ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement_120(element.clickProcessButtonBulkCheckOut, driver);
		element.clickProcessButtonBulkCheckOut.click();
		reslogger.info("Process Button is Pressed Successfully");
		testSteps.add("Process Button is Pressed Successfully");

		return testSteps;
	}

	public ArrayList<String> clickOnBulkCheckoutReservationCanUpdatedAfterProcess(WebDriver driver) throws Exception {
		ArrayList<String> test_steps = new ArrayList<>();
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement_120(elements.verifyBulkCheckOutCompletePopUp, driver);
		test_steps.add("Bulk Check Out Complete PopUp After Process Is Successfully open");
		reslogger.info("Bulk Check Out Complete PopUp After Process Is Successfully open");
		Wait.explicit_wait_visibilityof_webelement_120(elements.clickResCanUpdateAfterProcess, driver);
		String tabText = elements.clickResCanUpdateAfterProcess.getText();
		test_steps.add(tabText);
		reslogger.info(tabText);
		elements.clickResCanUpdateAfterProcess.click();
		test_steps.add(tabText + " Tab is Successfully Clicked");
		reslogger.info(tabText + " Tab is Successfully Clicked");

		return test_steps;
	}

	public ArrayList<String> clickOnGuestNameInSearchReaservation(WebDriver driver, String ReservationNumber)
			throws Exception {

		ArrayList<String> testSteps = new ArrayList<>();
		String path = "//span[contains(text(),'" + ReservationNumber + "')]//..//..//following-sibling::td//a";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);

		String guestName = driver.findElement(By.xpath(path)).getText();
		driver.findElement(By.xpath(path)).click();
		Wait.wait2Second();
		driver.navigate().refresh();
		Wait.wait2Second();
		reslogger.info("Clicked " + guestName);
		return testSteps;

	}

	public ArrayList<String> checkInDates(WebDriver driver, int Days, int index)
			throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckinDate);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterCheckinDate), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.EnterCheckinDate), driver);
		elements.listEnterCheckinDate.get(index).click();
		elements.listEnterCheckinDate.get(index).clear();
		String checkInDate = ESTTimeZone.DateFormateForLineItem(Days);
		elements.listEnterCheckinDate.get(index).sendKeys(checkInDate);
		test_steps.add("CheckIn date: " + checkInDate);
		return test_steps;
	}

	public ArrayList<String> checkOutDates(WebDriver driver, int Days, int index)
			throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckout);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterCheckout), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.EnterCheckout), driver);
		elements.listEnterCheckout.get(index).click();
		elements.listEnterCheckout.get(index).clear();
		String checkOutDate = ESTTimeZone.DateFormateForLineItem(Days);
		elements.listEnterCheckout.get(index).sendKeys(checkOutDate);
		test_steps.add("CheckOut date: " + checkOutDate);
		return test_steps;

	}

	public String selectRoomNumberInMRB(WebDriver driver, String RoomClass, int index, int RoomIndex)
			throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.selectRoomNumberInMRB);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.selectRoomNumberInMRB), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.selectRoomNumberInMRB), driver);
		Utility.ScrollToElement(elements.SelectRoomNumberInMRB.get(index), driver);
		elements.SelectRoomNumberInMRB.get(index).click();
		String Path = "//div[contains(@data-bind,'validationOptions')]//button[@title='--Select Room--']//following-sibling::div//ul//li//span[contains(text(),'"
				+ RoomClass + "')]";
		Wait.WaitForElement(driver, Path);
		List<WebElement> ListRoomNumber = driver.findElements(By.xpath(Path));
		String GetRoomNumber = ListRoomNumber.get(RoomIndex).getText();
		ListRoomNumber.get(RoomIndex).click();
		return GetRoomNumber;

	}

	public ArrayList<String> checkboxCopyGuest(WebDriver driver) throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.checkboxCopyGuest);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkboxCopyGuest), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.checkboxCopyGuest), driver);
		Utility.ScrollToElement_NoWait(elements.CheckboxCopyGuest, driver);
		elements.CheckboxCopyGuest.click();
		testSteps.add("Checked Copy Guest 1 Info From Primary Room");
		return testSteps;

	}

	public String getRoomNumber(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.GetIncidentalRoomNumber.get(index).getText();
	}

	public ArrayList<String> clickAddARoom(WebDriver driver) throws InterruptedException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.ClickOnAddRooms);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ClickOnAddRooms), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ClickOnAddRooms), driver);
		elements.clickOnAddRooms.click();
		test_steps.add("Click on add a room");
		return test_steps;

	}

	public ArrayList<String> clickAddOnsButton(WebDriver driver) throws InterruptedException {

		Elements_CPReservation elements_CPReservation = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.addOnsButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.addOnsButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.addOnsButton), driver);
		Utility.ScrollToElement(elements_CPReservation.CP_ADDON_Button, driver);
		elements_CPReservation.CP_ADDON_Button.click();
		reslogger.info("Clicked AddOn Button");
		test_steps.add("Clicked AddOn Button");

		Wait.WaitForElement(driver, OR_Reservation.ADDONSHeading);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ADDONSHeading), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ADDONSHeading), driver);

		assertTrue(elements_CPReservation.ADDONSHeading.isDisplayed(), "Popup didn't display");
		reslogger.info("ADDON Popup Opened");
		test_steps.add("ADDON Popup Opened");

		return test_steps;
	}

	public ArrayList<String> addingAddOns(WebDriver driver, String packageName, String packageAmount,
			String packageQuentity, boolean isRoom, String roomClassAbvWithRoomNumber) throws InterruptedException {

		Elements_CPReservation elements_CPReservation = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();

		if (isRoom) {
			elements_CPReservation.ADDONSRoomButton.click();
			String Path = "//h4[text()='ADD-ONS']//..//..//div[@class='dropdown-menu open']//ul//li//span[text()='"
					+ roomClassAbvWithRoomNumber + "']";
			Wait.WaitForElement(driver, Path);
			WebElement element = driver.findElement(By.xpath(Path));
			element.click();
			Wait.WaitForElement(driver, OR_Reservation.ADDONSSelectedRoom);
			assertEquals(elements_CPReservation.ADDONSSelectedRoom.getText(), roomClassAbvWithRoomNumber,
					"Failed:Room number is mismatching");
			test_steps.add("Verified selected room number");
		}

		elements_CPReservation.AddONSSearchInput.clear();
		elements_CPReservation.AddONSSearchInput.sendKeys(packageName);
		reslogger.info("Entered PackageName : " + packageName);
		test_steps.add("Entered PackageName : " + packageName);

		elements_CPReservation.AddONSSearchButtton.click();
		reslogger.info("Clicked Search Icon");
		test_steps.add("Clicked Search Icon");

		assertEquals(elements_CPReservation.AddONSAmount.getText(), "$ " + packageAmount,
				"Failed: Amount is mismatching");
		test_steps.add("Verified amount before add new ADD-ONS");
		reslogger.info("Verified amount before add new ADD-ONS");

		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ADDONSPlus), driver);
		for (int i = 0; i < Integer.parseInt(packageQuentity); i++) {
			elements_CPReservation.ADDONSPlus.click();
			reslogger.info("in click");

		}
		Utility.ScrollToElement(elements_CPReservation.ADDONSSaveButton, driver);
		elements_CPReservation.ADDONSSaveButton.click();
		test_steps.add("Clicked On Save");
		reslogger.info("Clicked On Save");

		Wait.waitForElementToBeVisibile(By.className(OR.Toaster_Title), driver);
		return test_steps;
	}

	public String getIncidentalInTripSummery(WebDriver driver) throws InterruptedException, ParseException {

		Elements_CPReservation elements_CPReservation = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.incidentalInTS);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.incidentalInTS), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.incidentalInTS), driver);
		return elements_CPReservation.incidentalInTS.getText();

	}

	public ArrayList<String> clickOnHistory(WebDriver driver) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		Wait.explicit_wait_visibilityof_webelement(element.HistoryTab, driver);
		Wait.explicit_wait_elementToBeClickable(element.HistoryTab, driver);
		Utility.ScrollToElement_NoWait(element.HistoryTab, driver);
		element.HistoryTab.click();
		test_step.add("Click on history");
		return test_step;

	}

	public String gettHistoryRoom(WebDriver driver, int index) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.HistoryRoom.get(index).getText();
	}

	public ArrayList<String> clickOnDetails(WebDriver driver) throws InterruptedException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.detailsTab);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.detailsTab), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.detailsTab), driver);

		Utility.ScrollToElement_NoWait(element.detailsTab, driver);
		element.detailsTab.click();
		test_step.add("Click on details");
		return test_step;

	}

	public ArrayList<String> clickOnDeleteOncidentalButton(WebDriver driver, int index)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		try {
			Wait.WaitForElement(driver, OR_Reservation.deleteIncidentalInSatyInfoButton);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.deleteIncidentalInSatyInfoButton), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.deleteIncidentalInSatyInfoButton), driver);

		} catch (Exception e) {
			driver.navigate().refresh();

			Wait.WaitForElement(driver, OR_Reservation.deleteIncidentalInSatyInfoButton);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.deleteIncidentalInSatyInfoButton), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.deleteIncidentalInSatyInfoButton), driver);
		}

		Utility.ScrollToElement_NoWait(element.deleteIncidentalInSatyInfoButton.get(index), driver);
		element.deleteIncidentalInSatyInfoButton.get(index).click();
		return testSteps;
	}

	public ArrayList<String> incidentalVoidpopup(WebDriver driver, String EnterNotes, int index)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.voidPopupHeading);
		Wait.explicit_wait_visibilityof_webelement(element.voidPopupHeading, driver);
		Wait.explicit_wait_elementToBeClickable(element.voidPopupHeading, driver);
		// assertEquals(element.VoidPopupHeading.getText(), "Void Items");
		element.enterNotes.sendKeys(EnterNotes);
		test_step.add("Enter notes: " + EnterNotes);
		element.voidButton.get(index).click();
		test_step.add("Click on Void button");
		return test_step;
	}

	public String getTotaltaxBeforeSaveRes(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait5Second();
		// String taxCharges =
		// res.getTotalTaxBeforeSaveRes.getAttribute("value");
		String taxCharges = res.getTotalTaxBeforeSaveRes.getText();
		return taxCharges;
	}

	public String getTotalTripTotalBeforeSaveRes(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait5Second();
		// String totalTripCharges =
		// res.getTotalTripBeforeSaveRes.getAttribute("value");
		String totalTripCharges = res.getTotalTripBeforeSaveRes.getText();
		return totalTripCharges;
	}

	public String getRoomChargesbeforeResSave(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait5Second();
		String totalRoomcharges = res.getRoomChrgesBeforeSaveRes.getText();
		return totalRoomcharges;
	}

	public String getPercentcalcvalueSingleItem(WebDriver driver, String values, String totalroomcharge, int stay) {
		String getCalculated = "";
		double percentval = Double.parseDouble(values.trim());
		double roomchargeamount = Double.parseDouble(totalroomcharge);
		double perDayRoomCharge = roomchargeamount / stay;
		double total = perDayRoomCharge * percentval / 100;
		getCalculated = String.valueOf(total);
		return getCalculated;

	}

	public String getPercentcalcvalueSingleItemforoneday(WebDriver driver, String values, String perdayRoomCharge) {
		String getCalculated = "";
		double percentval = Double.parseDouble(values.trim());
		double perDayRoomCharge = Double.parseDouble(perdayRoomCharge);
		double total = perDayRoomCharge * percentval / 100;
		getCalculated = String.valueOf(total);
		return getCalculated;

	}

	public void verifyChildLineItemTaxes(WebDriver driver, ArrayList<String> test_steps, String taxLedgeraccount,
			String existingTaxDescriptions, double percentCalculatedVal) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		// double foliovalue = 0.0;
		DecimalFormat f = new DecimalFormat("##.00");
		double totalTaxinFolios = 0.0;
		double capturetotalTax = 0.0;
		int roomChargesFolioCount = getRoomChargeFolioItemCountInRes(driver);
		for (int i = 1; i <= roomChargesFolioCount; i++) {
			String xpath = "(//tbody[starts-with(@data-bind,'getElement: ComputedFolioItemsElement')]/tr/td/span[text()='"
					+ taxLedgeraccount + "']/../following-sibling::td/a)[" + i + "]";
			// clickroomChargeFolioItems
			Wait.waitUntilPresenceOfElementLocated(xpath, driver);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(xpath)), driver);
			driver.findElement(By.xpath(xpath)).click();
			test_steps.add("Click at folio line item: " + i + " of" + " " + taxLedgeraccount);
			Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);
			Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ItemDetailOnFolioPopup, driver);
			double individualFolioTotal = 0.0;
			double totalperdayfolioTax = 0.0;
			double folioValue = 0.0;
			String xpath1 = "(//a[text()='" + existingTaxDescriptions.trim()
					+ "'])[1]/ancestor::td/following-sibling::td/span";
			Wait.waitUntilPresenceOfElementLocated(xpath1, driver);
			String val = driver.findElement(By.xpath(xpath1)).getText();
			folioValue = Double.parseDouble(val.replace("$", "").trim());
			double calculatedTax = Double.parseDouble(f.format(percentCalculatedVal));
			assertEquals(calculatedTax, folioValue);
			clickFolioPopupCancel(driver);
			test_steps.add("Close open folio line item");
		}

	}

	public String getTotalTaxInResFolios(WebDriver driver, String taxLedgeraccount, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		DecimalFormat f = new DecimalFormat("##.00");
		int roomChargesFolioCount = getRoomChargeFolioItemCountInRes(driver);
		double totalTax = 0.0;
		double totalTaxCaculated = 0.0;
		String taxAmount = "";
		for (int i = 1; i <= roomChargesFolioCount; i++) {
			String xpath = "(//tbody[starts-with(@data-bind,'getElement: ComputedFolioItemsElement')]/tr/td/span[text()='"
					+ taxLedgeraccount + "']/../following-sibling::td/a)[" + i + "]";
			// clickroomChargeFolioItems
			Wait.waitUntilPresenceOfElementLocated(xpath, driver);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(xpath)), driver);
			driver.findElement(By.xpath(xpath)).click();
			test_steps.add("Click at folio line item: " + i + " of" + " " + taxLedgeraccount);
			int taxCount = res.getTaxFolioItems.size();
			double taxVal = 0.0;
			double sumOfTaxFolio = 0.0;
			double capturetotalTax = 0.0;
			double folioClculation = 0.0;
			for (int j = 0; j < res.getTaxFolioItems.size(); j++) {
				taxVal = Double.parseDouble(res.getTaxFolioItems.get(j).getText().replace("$", "").trim());
				sumOfTaxFolio = sumOfTaxFolio + taxVal;
			}
			capturetotalTax = Double.parseDouble(res.getTaxTotalinChildFolioItem.getText().replace("$", "").trim());
			folioClculation = Double.parseDouble(f.format(sumOfTaxFolio));
			assertEquals(capturetotalTax, folioClculation);
			test_steps.add("Verifying successfully total amount captured with calculated taxes in one folio line Item: "
					+ "<b>" + folioClculation + "</b>");
			totalTax = totalTax + folioClculation;
			clickFolioPopupCancel(driver);
			test_steps.add("Close open folio line item");

		}
		String totalTaxAmount = driver.findElement(By.xpath("//span[@class='pamt tsc']/span[starts-with(.,'$')]"))
				.getText().replace("$", "").trim();
		totalTaxCaculated = Double.parseDouble(totalTaxAmount);
		assertEquals(Double.parseDouble(totalTaxAmount), totalTaxCaculated);
		test_steps.add("Verifying successfully total amount captured with Calculated Tax amount over reservation stay: "
				+ "<b>" + totalTaxCaculated + "</b>");
		taxAmount = Double.toString(totalTaxCaculated);

		return taxAmount;

	}

	public void clickFolioPopupCancel(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait10Second();
		res.clickFolioPopupCancel.click();

	}

	public int getRoomChargeFolioItemCountInRes(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		int count = res.getRoomChargeFolioCount.size();
		return count;

	}

	public String GETRoomNumber(WebDriver driver, ArrayList test_steps) {
		String room = "//div[contains(@data-bind,'roomClass.name')]";
		Wait.WaitForElement(driver, room);
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(room)), driver);
		room = driver.findElement(By.xpath(room)).getText();

		room = room.split(":")[1];
		room = room.replace(" ", "");
		test_steps.add("Room Number : " + room);
		reslogger.info("Room Number : " + room);

		return room;
	}

	public ArrayList<String> verifyMarketSegmentDropDown(WebDriver driver, ArrayList<String> test_steps,
			String MarketSegment, boolean isContains) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Market);
		Utility.ScrollToElement(res.CP_NewReservation_Market, driver);
		Wait.wait2Second();
		res.CP_NewReservation_Market.click();
		test_steps.add("Market Segment Dropdown Opened");
		reslogger.info("Market Segment Dropdown Opened");
		boolean isMarketSegmentFound = false;

		for (int i = 0; i < res.MARKETSEGMENT_DROPDOWNLIST.size(); i++) {
			WebElement marketSegementElement = driver.findElement(
					By.xpath("//label[text()='Market']/preceding-sibling::div//ul/li[@data-original-index='" + i
							+ "']//a//span[@class='text']"));

			if (isContains) {
				isMarketSegmentFound = marketSegementElement.getText().equals(MarketSegment);
				reslogger.info("Found:" + isMarketSegmentFound);
				if (isMarketSegmentFound) {
					assertEquals(isMarketSegmentFound, true);
					test_steps.add("Market Segment Dropdown Contains Active: " + MarketSegment);
					reslogger.info("Market Segment Dropdown Contains Active: " + MarketSegment);
					break;
				}
			} else {
				if (!isMarketSegmentFound) {
					isMarketSegmentFound = marketSegementElement.getText().contains(MarketSegment);
					assertEquals(isMarketSegmentFound, false);
					test_steps.add("Market Segment Dropdown Doesn't Contain InActive/Obsolete: " + MarketSegment);
					reslogger.info("Market Segment Dropdown Doesn't Contain InActive/Obsolete: " + MarketSegment);
					break;
				}

			}
		}
		return test_steps;
	}

	public void verifyQuoteConfirmetionPopupWithStatusCodeAndConfirmationNumber(WebDriver driver,
			String reservationNumber, String Status, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String quote = "//h4[contains(text(),'Quote Confirmation')]";
		Wait.WaitForElement(driver, quote);
		if (driver.findElement(By.xpath(quote)).isDisplayed()) {
			test_steps.add("Quote Confirmation pop is displayed");
			reslogger.info("Quote Confirmation pop is displayed");
		} else {
			test_steps.add("Quote Confirmation pop not is displayed");
			reslogger.info("Quote Confirmation pop not is displayed");
		}

		assertEquals(res.QUOTECREATED_ALERTMESSAGE.getText(), "Quote successfully created.");
		test_steps.add("Quote Confirmation pop contains Alert Message: " + res.QUOTECREATED_ALERTMESSAGE.getText());
		reslogger.info("Quote Confirmation pop contains Alert Message: " + res.QUOTECREATED_ALERTMESSAGE.getText());

		assertEquals(res.CP_NewReservation_ConfirmationNumber.getText(), reservationNumber);
		test_steps.add("Quote Confirmation pop contains Reservation Number: " + reservationNumber);
		reslogger.info("Quote Confirmation pop contains Reservation Number: " + reservationNumber);

		assertEquals(res.CP_NewReservation_ReservationStatus.getText(), Status);
		test_steps.add("Quote Confirmation pop contains Status: " + Status);
		reslogger.info("Quote Confirmation pop contains Status: " + Status);

		res.CP_NewReservation_ClosePopUp.click();
		test_steps.add("Quote Confirmation pop Close Button Click");
		reslogger.info("Quote Confirmation pop Close Button Click");

	}

	public ArrayList<String> verifyMarketSegmentDropDownAdvanceSearch(WebDriver driver, ArrayList<String> test_steps,
			String MarketSegment, boolean isContains) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.MARKETSEGMENT_ADVANCESEARCH_DROPDOWNLIST);
		res.ADVANCESEARCH_MARKETSEGMENT_BUTTON.click();
		test_steps.add("Market Segment Dropdown Opened");
		reslogger.info("Market Segment Dropdown Opened");

		boolean isMarketSegmentFound = false;

		for (int i = 0; i < res.MARKETSEGMENT_ADVANCESEARCH_DROPDOWNLIST.size(); i++) {
			WebElement marketSegementElement = driver.findElement(By
					.xpath("//span[text()='Marketing Segment']/parent::button/following-sibling::div//li[@data-original-index='"
							+ i + "']//a//span[@class='text']"));
			if (isContains) {
				isMarketSegmentFound = marketSegementElement.getText().equals(MarketSegment);

				if (isMarketSegmentFound) {
					assertEquals(isMarketSegmentFound, true);
					test_steps.add("Market Segment Dropdown Contains Active: " + MarketSegment);
					reslogger.info("Market Segment Dropdown Contains Active: " + MarketSegment);
					break;
				}
			} else {
				if (!isMarketSegmentFound) {
					isMarketSegmentFound = marketSegementElement.getText().contains(MarketSegment);
					assertEquals(isMarketSegmentFound, false);
					test_steps.add("Market Segment Dropdown Doesn't Contain InActive/Obsolete: " + MarketSegment);
					reslogger.info("Market Segment Dropdown Doesn't Contain InActive/Obsolete: " + MarketSegment);
					break;
				}

			}
		}
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <searcRoom> ' Description: <Search room in reservation
	 * room list > ' Input parameters: < String RoomClassName> ' Return value:
	 * ArrayList<String> ' Created By: <Reddy Ponnolu> ' Created On:
	 * <04/05/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> searcRoom(WebDriver driver, String RoomClassName, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		List<WebElement> AvilableRooms = driver.findElements(
				By.xpath("//div[@id='rcDtails']//following-sibling::div/span[contains(@data-bind,'roomClass.name')]"));
		String text = null;
		for (int i = 1; i <= AvilableRooms.size(); i++) {
			text = driver.findElement(By
					.xpath("(//div[@id='rcDtails']//following-sibling::div/span[contains(@data-bind,'roomClass.name')])["
							+ i + "]"))
					.getText();
			test_steps.add("Avilable Rooms :" + text);
			reslogger.info("Avilable Rooms :" + text);
			;
			if (text.equals(RoomClassName)) {
				test_steps.add("In Room List newly Created room class avilable " + RoomClassName);
				reslogger.info("In Room List newly Created room class avilable " + RoomClassName);

			} else {
				// test_steps.add("In Room List newly Created room class not
				// avilable ");
				reslogger.info("In Room List newly Created room class not avilable ");

			}

		}
		if (!(text == RoomClassName)) {
			test_steps.add("RoomClass Not avilable in Reservation RoomingList: " + RoomClassName);
			reslogger.info("RoomClass Not avilable in Reservation RoomingList: " + RoomClassName);

		}
		return test_steps;
	}

	public void clickYestakemetotheFolio(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.Checkout_CompleteCheckOutMsgYesButton, driver);
		res.Checkout_CompleteCheckOutMsgYesButton.click();
		test_steps.add("Clicking on Yes, take me to the Folio");
		reslogger.info("Clicking on Yes, take me to the Folio");

	}

	public void createTask(WebDriver driver, ArrayList test_steps, boolean isAddDueOn, boolean isAddAssignee,
			String TaskCategory, String TaskType, String TaskDetails, String TaskRemarks, String TaskDueon,
			String TaskAssignee, String TaskStatus) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddTask);
		test_steps.add("******************* Adding Task **********************");
		reslogger.info("******************* Adding Task **********************");
		res.CP_AddTask.click();
		test_steps.add("Click on Add Task");
		reslogger.info("Click on Add Task");

		String taskCategoryArrow = "//label[text()='Category']/..//button";
		Wait.WaitForElement(driver, taskCategoryArrow);
		driver.findElement(By.xpath(taskCategoryArrow)).click();

		String taskCategory = "//label[text()='Category']/..//div/ul//span[text()='" + TaskCategory.trim() + "']";
		Wait.WaitForElement(driver, taskCategory);
		driver.findElement(By.xpath(taskCategory)).click();
		test_steps.add("Select Task Category : " + TaskCategory);
		reslogger.info("Select Task Category : " + TaskCategory);

		String taskType = "//label[text()='Type']/..//button";
		Wait.WaitForElement(driver, taskType);
		driver.findElement(By.xpath(taskType)).click();
		Wait.wait2Second();
		taskType = "//label[text()='Type']/..//div/ul//span[text()='" + TaskType.trim() + "']";
		Wait.WaitForElement(driver, taskType);
		driver.findElement(By.xpath(taskType)).click();
		test_steps.add("Select Task Type : " + TaskType);
		reslogger.info("Select Task Type : " + TaskType);

		String taskDetails = "//label[text()='Details']/preceding-sibling::textarea";
		Wait.WaitForElement(driver, taskDetails);
		driver.findElement(By.xpath(taskDetails)).sendKeys(TaskDetails);
		test_steps.add("Select Task Details : " + TaskDetails);
		reslogger.info("Select Task Details : " + TaskDetails);

		String taskRemarks = "//label[text()='Remarks']/preceding-sibling::textarea";
		Wait.WaitForElement(driver, taskRemarks);
		driver.findElement(By.xpath(taskRemarks)).sendKeys(TaskRemarks);
		test_steps.add("Enter Task Remarks : " + TaskRemarks);
		reslogger.info("Enter Task Remarks : " + TaskRemarks);
		if (isAddDueOn) {
			String dueCalender = "//label[text()='Due On']/..//i";
			Wait.WaitForElement(driver, dueCalender);
			driver.findElement(By.xpath(dueCalender)).click();
			String monthYear = Utility.get_MonthYear(TaskDueon);
			String day = Utility.getDay(TaskDueon);
			reslogger.info(monthYear);
			String header = null, headerText = null, next = null, date;
			for (int i = 1; i <= 12; i++) {
				header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
				headerText = driver.findElement(By.xpath(header)).getText();
				if (headerText.equalsIgnoreCase(monthYear)) {
					date = "//td[contains(@class,'day') and text()='" + day + "']";
					Wait.WaitForElement(driver, date);
					int size = driver.findElements(By.xpath(date)).size();
					for (int k = 1; k <= size; k++) {
						date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + k + "]";
						String classText = driver.findElement(By.xpath(date)).getAttribute("class");
						if (!classText.contains("old")) {
							driver.findElement(By.xpath(date)).click();
							test_steps.add("Selecting due on date : " + TaskDueon);
							reslogger.info("Selecting due on date : " + TaskDueon);
							break;
						}
					}
					break;
				} else {
					next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
					Wait.WaitForElement(driver, next);
					driver.findElement(By.xpath(next)).click();
					Wait.wait2Second();
				}
			}
		}
		if (isAddAssignee) {
			String taskAssignee = "//label[text()='Assignee']/..//input";
			Wait.WaitForElement(driver, taskAssignee);
			driver.findElement(By.xpath(taskAssignee)).sendKeys(TaskAssignee);
			Wait.wait2Second();
			String taskassgin = "//label[text()='Assignee']/..//div/ul/li/div";
			Wait.WaitForElement(driver, taskassgin);
			driver.findElement(By.xpath(taskassgin)).click();
			test_steps.add("Enter Task Assignee : " + TaskAssignee);
			reslogger.info("Enter Task Assignee : " + TaskAssignee);

		}
	}

	public void clickNocancelthecheckoutprocess(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.Checkout_CompleteCheckOutMsgNoButton, driver);
		res.Checkout_CompleteCheckOutMsgNoButton.click();
		test_steps.add("Clicking on No, cancel the check-out process");
		reslogger.info("Clicking on No, cancel the check-out process");
	}

	public Double verify_TotalCharges(WebDriver driver, ArrayList<String> test_steps, String RoomCharges,
			String FolioTaxes, String TotalCharges) {
		String roomCharges = RoomCharges.replace("$", "");
		Double roomrate = Double.parseDouble(roomCharges);
		reslogger.info("roomCharges : " + roomCharges);

		String folioTaxes = FolioTaxes.replace("$", "");
		Double tax = Double.parseDouble(folioTaxes);
		reslogger.info("folioTaxes : " + tax);
		Double total = roomrate + tax;
		test_steps.add("Expected total charges : " + total);
		reslogger.info("Expected total charges : " + total);
		TotalCharges = TotalCharges.replace("$", "");
		TotalCharges = TotalCharges.trim();
		Double totalCharges = Double.parseDouble(TotalCharges);
		test_steps.add("Found : " + totalCharges);
		reslogger.info("Found : " + totalCharges);
		assertEquals(total, totalCharges, "Failed: Total Charges mismatches");
		test_steps.add("Verified total charges");
		reslogger.info("Verified total charges");

		return total;
	}

	public ArrayList<String> EnterManualRateAmount(WebDriver driver, String ManualRate) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterManualRate);
		res.EnterManualRate.clear();
		res.EnterManualRate.sendKeys(ManualRate);
		test_steps.add("Entered manual rate amount : " + ManualRate);
		reslogger.info("Entered manual rate amount : " + ManualRate);
		return test_steps;
	}

	public ArrayList<String> VerifyBalance(WebDriver driver, Double TotalCharges, String Paid, String TotalBalance) {

		ArrayList<String> test_steps = new ArrayList<>();
		Paid = Paid.replace("$", "");
		Paid = Paid.trim();
		Double paid = Double.parseDouble(Paid);
		reslogger.info("Paid : " + paid);

		Double total = TotalCharges + paid;
		test_steps.add("Expected balance : " + total);
		reslogger.info("Expected balance : " + total);

		TotalBalance = TotalBalance.replace("$", "");
		TotalBalance = TotalBalance.trim();
		Double totalBalance = Double.parseDouble(TotalBalance);
		reslogger.info("totalBalance : " + totalBalance);

		test_steps.add("Found : " + totalBalance);
		reslogger.info("Found : " + totalBalance);
		assertEquals(total, totalBalance, "Failed: Balance mismatches");
		test_steps.add("Verified balance");
		reslogger.info("Verified balance");
		return test_steps;
	}

	public void clickRollBackButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
	    verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_RolleBackButton);
		Utility.ScrollToElement(res.CP_Reservation_RollBackAllButton, driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_Reservation_RolleBackButton), 60, driver);
		res.CP_Reservation_RollBackAllButton.click();
		test_steps.add("Click Roll Back  Button");
		reslogger.info("Click Roll Back  Button");
		Wait.waitTillElementDisplayed(driver, OR_Reservation.RollBackPopupMsg);
		Wait.WaitForElement(driver, OR_Reservation.RollBackPopupMsg);
	}

	public void verifyRollBackMsg(WebDriver driver, ArrayList<String> test_steps, String Msg)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.RollBackPopupMsg);
		Wait.explicit_wait_visibilityof_webelement(res.RollBackMsg, driver);
		Utility.ScrollToElement(res.RollBackMsg, driver);
		assertTrue(res.RollBackMsg.getText().toLowerCase().trim().equals(Msg.toLowerCase().trim()),
				"Failed : Verify RollBack Msg");
		test_steps.add("Verified RollBack Msg : <b>" + Msg + "</b>");
		reslogger.info("Verified RollBack :" + Msg);
	}

	public void clickCloseRollBackMsg(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.RollBackPopupCloseButton);
		Utility.ScrollToElement(res.RollBackPopupCloseButton, driver);
		res.RollBackPopupCloseButton.click();
		test_steps.add("Click Roll Back  Close Button");
		reslogger.info("Click Roll Back  Close Button");
	}

	public void clickYesButtonRollBackMsg(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
        verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.RollBacktPopupYesButton);
        Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RollBacktPopupYesButton), 60, driver);
		Utility.ScrollToElement(res.RollBacktPopupYesButton, driver);
		res.RollBacktPopupYesButton.click();
		test_steps.add("Click Yes Button");
		reslogger.info("Click  Yes Button");
		verifySpinerLoading(driver);
	}

	public void verifyCheckInAllButton(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_CheckInAllButton, driver);
		assertTrue(res.CP_Reservation_CheckInAllButton.isDisplayed(), "Failed: To verify Check In All Button");
		test_steps.add("Verified  <b>Check In All </b> Button");
		reslogger.info("Verified Check IN All  Button");
	}

	public void verifyStayInfoCheckINButtonForMRB(WebDriver driver, ArrayList<String> test_steps, String RoomClassName)
			throws InterruptedException {
		String path = "//div[contains(@data-bind,'ReservationStatusLookup')]/div//div[contains(@class,'ir-roomInfo')]//span[contains(text(),'"
				+ RoomClassName + "')]"
				+ "/ancestor::div/div[contains(@class,'detailsbox')]/following-sibling::div//button[contains(text(),'Check In')]";
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		assertTrue(element.isDisplayed(), "Failed: To verify Stay Info Check In Button");
		test_steps.add(" Stay Info Check In  Button is Displayed For Room Class <b>" + RoomClassName + "</b>");
		reslogger.info("Stay Info Check In  Button is Displayed For Room Class: " + RoomClassName);

	}

	public void verifyStayInfoCheckOutButtonForMRB(WebDriver driver, ArrayList<String> test_steps, String RoomClassName)
			throws InterruptedException {
		Wait.wait10Second();
		String path = "//div[contains(@data-bind,'ReservationStatusLookup')]/div//div[contains(@class,'ir-roomInfo')]//span[contains(text(),'"
				+ RoomClassName + "')]"
				+ "/ancestor::div/div[contains(@class,'detailsbox')]/following-sibling::div//button[contains(text(),'Check Out')]";
		WebElement element = driver.findElement(By.xpath(path));
		Wait.WaitForElement(driver, path);
		Utility.ScrollToElement(element, driver);
		assertTrue(element.isDisplayed(), "Failed: To verify Stay Info Check Out Button");
		test_steps.add(" Stay Info Check Out  Button is Displayed For Room Class <b>" + RoomClassName + "</b>");
		reslogger.info("Stay Info Check Out  Button is Displayed For Room Class: " + RoomClassName);

	}

	public void clickStayInforRollBackButton(WebDriver driver, ArrayList<String> test_steps, String RoomClassName)
			throws InterruptedException {
		String path = "//div[contains(@data-bind,'ReservationStatusLookup')]/div//div[contains(@class,'ir-roomInfo')]//span[contains(text(),'"
				+ RoomClassName + "')]"
				+ "/ancestor::div/div[contains(@class,'detailsbox')]/following-sibling::div//button[contains(text(),'Roll Back')]";
		WebElement element = driver.findElement(By.xpath(path));
		Wait.WaitForElement(driver, path);
		Utility.ScrollToElement(element, driver);
		element.click();
		test_steps.add("Click Stay Info-Roll Back Button For Room Class <b>" + RoomClassName + "</b>");
		reslogger.info("Click Stay Info-Roll Back Button For Room Class: " + RoomClassName);

	}

	public void verifyHistoryTabDescriptionForRollBack(WebDriver driver, ArrayList<String> test_steps) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_HistoryTab_RollBackDesc);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_HistoryTab_RollBackDesc, driver);
		// Verified History Tab No Show Entry
		assertTrue(res.CP_Reservation_HistoryTab_RollBackDesc.isDisplayed(), "Failed: To verify History Tab ");
		test_steps.add(" 'History Tab' Verified : <b> Rolled back this reservation to Reserved</b>");
		reslogger.info("'History Tab' Verified : Rolled back this reservation to Reserved");

	}

	public void addResonOnCancelModelPopup(WebDriver driver, ArrayList<String> test_steps, String reason)
			throws InterruptedException {
	    verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CancelReservation_Reason);
		Utility.ScrollToElement(res.CancelReservation_Reason, driver);
		res.CancelReservation_Reason.clear();
		test_steps.add("Clear Reason");
		reslogger.info("Clear Reason");
		res.CancelReservation_Reason.sendKeys(reason);
		test_steps.add("Input Reason: <b>" + reason + " </b>");
		reslogger.info("Input Reason: " + reason);

	}

	public String CompleteCancelProcess(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait10Second();
		String buttonName = null;
		if (Utility.isElementPresent(driver, By.xpath(OR_Reservation.ConfirmedNoShowButton))
				&& res.CP_Reservation_ConfirmButton.isDisplayed()) {
			Utility.ScrollToElement(res.CP_Reservation_ConfirmButton, driver);
			buttonName = res.CP_Reservation_ConfirmButton.getText();
			res.CP_Reservation_ConfirmButton.sendKeys(Keys.ENTER);
			Utility.clickThroughJavaScript(driver, res.CP_Reservation_ConfirmButton);
			test_steps.add("Clicking on  CONFIRM CANCELLATION Button");
			reslogger.info("Clicking on CONFIRM  CANCELLATION  Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);

		} else if (Utility.isElementPresent(driver, By.xpath(OR_Reservation.ProceedToPaymentButton))
				&& res.ProceedToPaymentButton.isDisplayed()) {
			Utility.ScrollToElement(res.ProceedToPaymentButton, driver);
			buttonName = res.ProceedToPaymentButton.getText();
			res.ProceedToPaymentButton.sendKeys(Keys.ENTER);
			Utility.clickThroughJavaScript(driver, res.ProceedToPaymentButton);
			test_steps.add("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
			reslogger.info("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);

		}

		return buttonName;
	}

	public String CompleteNoShowProcess(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait10Second();
		String buttonName = null;
		// Wait till pop model is not displayed

		if (res.CP_Reservation_ConfirmButton.isDisplayed()) {
			Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ConfirmButton, driver);
			Utility.ScrollToElement(res.CP_Reservation_ConfirmButton, driver);
			buttonName = res.CP_Reservation_ConfirmButton.getText();
			res.CP_Reservation_ConfirmButton.click();
			test_steps.add("Click on Confirm No Show Button ");
			reslogger.info("Click on Confirm No Show Button ");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
			Wait.explicit_wait_absenceofelement(loading, driver);

		} else if (res.ProceedToPaymentButton.isDisplayed()) {
			Wait.explicit_wait_visibilityof_webelement(res.ProceedToPaymentButton, driver);
			Utility.ScrollToElement(res.ProceedToPaymentButton, driver);
			buttonName = res.ProceedToPaymentButton.getText();
			res.ProceedToPaymentButton.click();
			test_steps.add("Click on Proceed To No Show Payment Button ");
			reslogger.info("Click on Proceed To No Show Payment Button ");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
			Wait.explicit_wait_absenceofelement(loading, driver);

		}

		return buttonName;
	}

	public void clickOnAddARoomButton(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddRoom);
		res.CP_NewReservation_AddRoom.click();
		test_steps.add("Clicking on add room");

	}

	public String getTripTotal_Header(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.tripTotalAmountAtTop.getText());

	}

	public String getBalance_Header(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.tripBalanceAmountAtTop.getText());
	}

	public String getRoomCharge_TripSummary(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.TripSummary_RoomCharge.getText());

	}

	public String getIncidentals_TripSummary(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.TripSummary_Incidentals.getText());

	}

	public String getTaxesAndServiceCharges_TripSummary(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.TripSummary_TaxesAndServiceCharges.getText());

	}

	public String getTripTotal_TripSummary(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.TripSummary_TripTotal.getText());

	}

	public String getPayment_TripSummary(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.TripSummary_Payment.getText());

	}

	public String getBalance_TripSummary(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.TripSummary_Balance.getText());
	}

	public void verifyTripSummeryAmount(WebDriver driver, ArrayList<String> test_steps, ArrayList<String> baseAmount,
			ArrayList<String> totalNights, String total, String payment, String policyFor) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String tripRoomCharge = res.TripSummary_RoomCharge.getText().replace("$ ", "");
		String tripTotal = res.TripSummary_TripTotal.getText().replace("$ ", "");
		String tripPaid = res.TripSummary_Payment.getText().replace("$ ", "");
		String tripBalance = res.TripSummary_Balance.getText().replace("$ ", "");
		String tripTaxes = res.TripSummary_TaxesAndServiceCharges.getText().replace("$ ", "");
		double tripRoomCharge2 = 0.00;
		for (int i = 0; i < baseAmount.size(); i++) {

			tripRoomCharge2 = tripRoomCharge2
					+ Double.parseDouble(baseAmount.get(i)) * Double.parseDouble(totalNights.get(i));
		}
		String tripRoomChargeExp = df.format(tripRoomCharge2);

		double tripTaxes2 = Double.parseDouble(total) - tripRoomCharge2;
		String tripTaxesExp = df.format(tripTaxes2);
		Utility.verifyText(tripRoomCharge, tripRoomChargeExp, "Room charges at trip summary", test_steps, reslogger);

		String expBalanceDisplayed = null;
		String expPaidDisplayed = null;

		if (policyFor.equalsIgnoreCase("Capture")) {
			double expBalance = ((Double.parseDouble(total)) - (Double.parseDouble(payment)));
			expBalanceDisplayed = df.format(expBalance);
			expPaidDisplayed = tripPaid;
		} else if (policyFor.equalsIgnoreCase("Authorize")) {
			expBalanceDisplayed = total;
			expPaidDisplayed = "0.00";
		}
		Utility.verifyText(tripTotal, total, "Trip total at trip summary", test_steps, reslogger);
		Utility.verifyText(tripBalance, expBalanceDisplayed, "Balance at trip summary", test_steps, reslogger);
		Utility.verifyText(tripPaid, expPaidDisplayed, "Paid amount at trip summary", test_steps, reslogger);
	}

	public void verifyNotesDetails(ArrayList<String> test_steps, List<WebElement> element, String expString,
			String type) {
		int i = 1;
		for (WebElement webElement : element) {
			String actString = webElement.getText();
			assertEquals(actString, expString, "Failed - Verify " + type + " of note");
			if (element.size() > 1) {
				test_steps.add("Successfully verified " + type + " of note as <b>" + actString + "</b> at row " + i);
				i++;
			} else {
				test_steps.add("Successfully verified " + type + " of note as <b>" + actString + "</b>");
			}
		}
	}

	public void verifyNoteRoomsDetails(WebDriver driver, ArrayList<String> test_steps, String noteType,
			ArrayList<String> abbrivations, ArrayList<String> roomNumbers) {
		List<WebElement> noteRoomsDisplayed = driver.findElements(
				By.xpath("//td[text()='" + noteType + "']/..//td[contains(@data-bind,'text: roomClassAbbrv')]"));
		for (int i = 0; i < noteRoomsDisplayed.size(); i++) {
			int j = i + 1;
			String actString = noteRoomsDisplayed.get(i).getText();
			String expString = abbrivations.get(i) + ": " + roomNumbers.get(i);
			assertEquals(actString, expString, "Failed - Verify room of cancel note");
			test_steps.add("Successfully verified room of note as <b>" + actString + "</b> at row " + j);
		}
	}

	public void verifyNotesDetails(WebDriver driver, ArrayList<String> test_steps, String noteType, String noteSubject,
			String noteDesc, String updatedBy) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.notesTabHeader), driver);
			Utility.ScrollToElement(res.notesTabHeader, driver);
			List<WebElement> noteTypesDisplayed = driver.findElements(
					By.xpath("//td[text()='" + noteSubject + "']/..//td[contains(@data-bind,'text: type')]"));
			List<WebElement> noteDescriptionsDisplayed = driver.findElements(
					By.xpath("//td[text()='" + noteSubject + "']/..//td[contains(@data-bind,'text: details')]"));
			List<WebElement> noteSubjectsDisplayed = driver.findElements(
					By.xpath("//td[text()='" + noteSubject + "']/..//td[contains(@data-bind,'text: subject')]"));
			List<WebElement> noteUpdatedBysDisplayed = driver.findElements(
					By.xpath("//td[text()='" + noteSubject + "']/..//td[contains(@data-bind,'text: updatedBy')]"));
			List<WebElement> noteUpdatedOnsDisplayed = driver.findElements(By.xpath(
					"//td[text()='" + noteSubject + "']/..//td[contains(@data-bind,'text: moment(updatedOn())')]"));
			if (noteType.equalsIgnoreCase("No Show")) {
				noteType = "Internal";
			}
			if (Utility.validateString(noteType)) {
				verifyNotesDetails(test_steps, noteTypesDisplayed, noteType, "type");
			}
			if (Utility.validateString(noteDesc)) {
				verifyNotesDetails(test_steps, noteDescriptionsDisplayed, noteDesc, "description");
			}
			if (Utility.validateString(updatedBy)) {
				verifyNotesDetails(test_steps, noteUpdatedBysDisplayed, updatedBy, "updated by");
			}
			if (Utility.validateString(noteSubject)) {
				verifyNotesDetails(test_steps, noteSubjectsDisplayed, noteSubject, "subject");
			}
			int i = 1;
			for (WebElement webElement : noteUpdatedOnsDisplayed) {
				String actString = webElement.getText();
				actString = Utility.parseDate(actString, "MM/dd/ yy HH:mm aa", "MM/dd/yyyy");
				String expString = Utility.getCurrentDate("MM/dd/yyyy");
				// assertEquals(actString, expString, "Failed - Verify note
				// updated on date of cancel note");
				if (noteUpdatedOnsDisplayed.size() > 1) {
					test_steps
							.add("Successfully verified note updated on date as <b>" + actString + "</b> at row " + i);
					i++;
				} else {
					test_steps.add("Successfully verified note updated on date as <b>" + actString + "</b> ");
				}
			}
		} catch (Exception e) {
			reslogger.info(e);
		}
	}

	public boolean getPaymentWindow(WebDriver driver) {
		boolean isExist = false;
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		isExist = Utility.isElementPresent(driver, By.xpath(OR_Reservation.NoShow_Cancel_CheckIn_CheckOut_Title));
		return isExist;
	}

	public ArrayList<String> getAssignedRoomNumbers(WebDriver driver, ArrayList<String> test_steps,
			ArrayList<String> roomClasses) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> roomNumbers = new ArrayList<>();
		try {
			if (roomClasses.size() == 1) {
				String xpath = "//div[@data-bind='with: roomSearch.SelectedRoomClass']//div[contains(text(),'"
						+ roomClasses.get(0) + "')]";
				Wait.waitForElementToBeVisibile(By.xpath(xpath), driver);
				String roomNumber = driver.findElement(By.xpath(xpath)).getText().split(": ")[1];
				roomNumbers.add(roomNumber);
			} else if (roomClasses.size() > 1) {
				for (int i = 0; i < roomClasses.size(); i++) {
					String xpath = "(//div[@data-bind='click: onToggleRoomInfo']//span[contains(text(),'"
							+ roomClasses.get(i) + "')])[2]";
					reslogger.info(xpath);
					reslogger.info(roomClasses.get(i));
					Wait.waitForElementToBeVisibile(By.xpath(xpath), driver);
					String roomNumber = driver.findElement(By.xpath(xpath)).getText().split(": ")[1];
					roomNumbers.add(roomNumber);
				}
			}
		} catch (Exception e) {
			reslogger.info(e);
		}
		return roomNumbers;

	}

	public String getPolicyfromDetailTab(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		String policyName = null;
		String path = "//div[@aria-expanded='true']//span[@class='filter-option pull-left']";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		policyName = element.getText();
		return policyName;
	}

	public void setAsMainPayment(WebDriver driver, ArrayList<String> test_steps, String PaymentType,
			String PaymentTypeTwo, Date Date, String PolicyType) throws ParseException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		String path = "//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + PaymentType + "']";
		WebElement PaymentMethodElement = driver.findElement(By.xpath(path));
		PaymentMethodElement.click();
		test_steps.add("Click Payment Method");
		reslogger.info("Click CPayment Method");
		String options = "//paymentmethod//div[contains(@class,'open')]/ul//li/a//span[@class='text'][contains(text(),'"
				+ PaymentTypeTwo + "')]";
		WebElement PaymentMethodOptions = driver.findElement(By.xpath(options));
		PaymentMethodOptions.click();
		test_steps.add("Select Payment Option :<b> " + PaymentTypeTwo + "<b>");
		reslogger.info("Click Payment Option: " + PaymentTypeTwo);
		if (PolicyType.equals("Cancel") || PolicyType.equals("No Show")) {
			CPReservationPage.NoShow_Cancel_Checkout_Date_CalanderIcon.click();
			test_steps.add("Click Calander Icon");
			reslogger.info("Click Calander Icon");
		} else if (PolicyType.equals("Check In")) {
			CPReservationPage.CheckInPaymentPopup_Date_CalanderIcon.click();
			test_steps.add("Click Calander Icon");
			reslogger.info("Click Calander Icon");
		} else if (PolicyType.equals("Check Out")) {
			CPReservationPage.CheckOutPaymentPopup_Date_CalanderIcon.click();
			test_steps.add("Click Calander Icon");
			reslogger.info("Click Calander Icon");
		}

		int CD = Date.getDate();
		String Day = String.valueOf(CD);
		reslogger.info("Day: " + Day);

		SelectDate(driver, Date, Day);
		test_steps.add("Select Date: <b>" + Date + "</b>");
		reslogger.info("Select Date: " + Date);
		CPReservationPage.CP_Reservation_NoShowPaymentPopup_SetMainPaymentCheckBox.click();
		test_steps.add("Click Set As Main Payment Method Check Box");
		reslogger.info("Click Set As Main Payment Method Check Box");

	}

	public void verifyFolioLineItem(WebDriver driver, ArrayList<String> test_steps, Date Date, String Category,
			String Desc, String Amount) throws InterruptedException {
		reslogger.info("******************* Verify Folio Details **********************");

		int CD = Date.getDate();
		String Day = String.valueOf(CD);
		reslogger.info("Day: " + Day);

		Elements_CPReservation res = new Elements_CPReservation(driver);
		String LineItemSetMainPaymentPath = "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-date']/span[contains(text(),'"
				+ Day + "')]" + "/../following-sibling::td[@class='lineitem-category']/span[contains(text(),'"
				+ Category + "')]" + "/../following-sibling::td[@class='lineitem-description']//a[contains(text(),'"
				+ Desc + "')]" + "/../following-sibling::td[@class='lineitem-amount']/span[contains(text(),'" + Amount
				+ "')]";
		Wait.WaitForElement(driver, LineItemSetMainPaymentPath);
		WebElement SetLineItemElement = driver.findElement(By.xpath(LineItemSetMainPaymentPath));
		// Verified No Show Fee line item
		assertTrue(SetLineItemElement.isDisplayed(), "Failed: To Verify Line Item");
		test_steps.add(" Verified Date:<b>  " + Date + "</b>");
		reslogger.info("Verified  Date: " + Date);
		test_steps.add(" Verified  Category:<b>  " + Category + "</b>");
		reslogger.info(" Verified  Category: " + Category);
		test_steps.add("Verified  Description:<b>  " + Desc + "</b>");
		reslogger.info(" Verified Description: " + Desc);
		test_steps.add(" Verified Amount:<b>  " + Amount + "</b>");
		reslogger.info(" Verified  Amount: " + Amount);

	}

	public boolean getNoShowHeaderWindow(WebDriver driver) {
		String path = "//h4[contains(@data-bind,'PaymentPopupHeaderText()')][contains(text(),'No Show Payment')]";
		boolean value = Utility.isElementPresent(driver, By.xpath(path));
		return value;
	}

	public boolean getCancelReservationHeaderWindow(WebDriver driver) {
		String path = "//h4[contains(@data-bind,'PaymentPopupHeaderText()')][contains(text(),'Cancellation Payment')]";
		boolean value = Utility.isElementPresent(driver, By.xpath(path));
		return value;
	}

	public void clickSendEmailButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.GUESTINFO_SENDEMAIL_BUTTON, driver);
		res.GUESTINFO_SENDEMAIL_BUTTON.click();
		Wait.WaitForElement(driver, OR_Reservation.GUESTINFO_SENDEMAIL_HEADERTITLE);
		assertEquals(res.GUESTINFO_SENDEMAIL_HEADERTITLE.getText(), "Send Mail");
		test_steps.add("Send Email Popup Opened With Title: " + res.GUESTINFO_SENDEMAIL_HEADERTITLE.getText());
		reslogger.info("Send Email Popup Opened With Title: " + res.GUESTINFO_SENDEMAIL_HEADERTITLE.getText());

	}

	public void SendEmail(WebDriver driver, String emailID, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		res.GUESTINFO_SENDEMAIL_EMAILID.clear();
		res.GUESTINFO_SENDEMAIL_EMAILID.sendKeys(emailID);
		test_steps.add("Email ID Added/Updated: " + emailID);
		reslogger.info("Email ID Added/Updated: " + emailID);
		Utility.ScrollToElement(res.SENDMAIL_POPUP_SEND_BUTTON, driver);
		res.SENDMAIL_POPUP_SEND_BUTTON.click();
		test_steps.add("Send Email Button Clicked");
		reslogger.info("Send Email Button Clicked");
		Wait.wait2Second();
		assertEquals(res.GUESTINFO_SENDEMAIL_HEADERTITLE.isDisplayed(), false);
		test_steps.add("Send Email Popup Closed");
		reslogger.info("Send Email Popup Closed");

	}

	public String getEmailSubject(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String emailSubject = null;
		emailSubject = res.GUESTINFO_SENDEMAIL_SUBJECT.getAttribute("value");
		reslogger.info(" Subject: " + emailSubject);
		return emailSubject;

	}

	public String getEmailDescription(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String emailDescription = null;
		driver.switchTo().frame(driver.findElement(By.className("cke_wysiwyg_frame")));
		try {
			emailDescription = res.GUESTINFO_SENDEMAIL_DESCRIPTION.getText();
		} catch (Exception e) {

			emailDescription = "";
		}
		reslogger.info(" emailDescription: " + emailDescription);
		driver.switchTo().defaultContent();
		return emailDescription;

	}

	public ArrayList<String> verifyAutoGeneratedNotes(WebDriver driver, String Type, String Subject, String Description,
			String Date, String Assignee) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		Elements_Reservation ReservationPage = new Elements_Reservation(driver);

		WebElement NotesType = driver
				.findElement(By.xpath("(//div[text()='Notes']/parent::div//td[text()='" + Type + "'])[1]"));
		Utility.ScrollToElement(NotesType, driver);
		assertEquals(NotesType.getText(), Type, "Failed : NotesType missmatched");
		reslogger.info("Verified Notes Type :" + Type);
		test_steps.add("Verified Notes Type :" + Type);

		WebElement NotesSubject = driver.findElement(
				By.xpath("(//td[contains(@data-bind,'text: subject') and contains(text(),'" + Subject + "')])[1]"));
		assertEquals(NotesSubject.getText().contains(Subject), true, "Failed : Detail missmatched");
		reslogger.info("Verified Notes Subject :" + Subject);

		test_steps.add("Verified Notes Subject :" + Subject);
		WebElement NotesDesctiption = null;
		int tableRowSize = driver.findElements(By.xpath("//tbody[contains(@data-bind,'foreach: notes')]//tr")).size();
		reslogger.info("Size is :" + tableRowSize);
		NotesDesctiption = driver.findElement(By.xpath("(//tbody[contains(@data-bind,'foreach: notes')]//tr)["
				+ tableRowSize + "]//td[contains(@data-bind,'text: de')]"));

		assertEquals(NotesDesctiption.getText().replaceAll(" ", ""), Description.replaceAll(" ", ""),
				"Failed : Description missmatched");
		reslogger.info("Verified Notes Description :" + Description);
		test_steps.add("Verified Notes Description :" + Description);
		WebElement noteAssigne = driver.findElement(By.xpath("(//tbody[contains(@data-bind,'foreach: notes')]//tr)["
				+ tableRowSize + "]//td[text()='" + Assignee + "']"));
		assertEquals(noteAssigne.getText(), Assignee, "Failed : Assignee missmatched");
		reslogger.info("Verified Notes Assignee :" + Assignee);
		test_steps.add("Verified Notes Assignee :" + Assignee);

		WebElement noteDate = driver.findElement(By.xpath("(//tbody[contains(@data-bind,'foreach: notes')]//tr)["
				+ tableRowSize + "]//td[contains(text(),'" + Date + "')]"));
		assertEquals(noteDate.getText().contains(Date), true, "Failed : Date  missmatched");
		reslogger.info("Verified Notes Date :" + Date);
		test_steps.add("Verified Notes Date :" + Date);
		return test_steps;
	}

	// Created By Aqsa : clickGuestInfoEditDetailsButton
	public ArrayList<String> clickGuestInfoEditDetailsButton(WebDriver driver, ArrayList<String> steps)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(element.GUESTINFO_EDITBUTTON, driver);
		Wait.explicit_wait_elementToBeClickable(element.GUESTINFO_EDITBUTTON, driver);
		Utility.ScrollToElement(element.GUESTINFO_EDITBUTTON, driver);
		element.GUESTINFO_EDITBUTTON.click();
		reslogger.info("Click Guest Info Edit Button");
		steps.add("Click Guest Info Edit Button");
		return steps;
	}

	// Created By Aqsa : clickGuestInfoSaveDetailsButton
	public ArrayList<String> clickGuestInfoSaveDetailsButton(WebDriver driver, ArrayList<String> steps)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(element.GUESTINFO_SAVEBUTTON, driver);
		Wait.explicit_wait_elementToBeClickable(element.GUESTINFO_SAVEBUTTON, driver);
		Utility.ScrollToElement(element.GUESTINFO_SAVEBUTTON, driver);
		element.GUESTINFO_SAVEBUTTON.click();
		reslogger.info("Click Guest Info Save Button");
		steps.add("Click Guest Info Save Button");
		return steps;
	}

	// Created By Aqsa : attachGuestProfile
	public ArrayList<String> attachGuestProfile(WebDriver driver, ArrayList<String> steps, String GuestProfileName,
			String ReplaceTheGuestInfo) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(element.GUESTINFO_GUESTPROFILE_INPUTFIELD, driver);
		Utility.ScrollToElement(element.GUESTINFO_GUESTPROFILE_INPUTFIELD, driver);
		element.GUESTINFO_GUESTPROFILE_INPUTFIELD.sendKeys(GuestProfileName);
		// search GuestProfile
		Wait.wait3Second();
		WebElement searchResult = driver
				.findElement(By.xpath("(//*[contains (text(), '" + GuestProfileName + "')])[1]"));
		Wait.wait2Second();
		Wait.explicit_wait_visibilityof_webelement(searchResult, driver);
		searchResult.click();
		Wait.WaitForElement(driver, OR_Reservation.GUESTINFO_GUESTPROFILE_CONFIRMATIONPOPUP);
		assertEquals(element.GUESTINFO_GUESTPROFILE_CONFIRMATIONPOPUP.getText(),
				"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation.");
		reslogger.info("Guest Profile Attachment Confirmation Popup Opened With Text: "
				+ element.GUESTINFO_GUESTPROFILE_CONFIRMATIONPOPUP.getText());
		steps.add("Guest Profile Attachment Confirmation Popup Opened With Text: "
				+ element.GUESTINFO_GUESTPROFILE_CONFIRMATIONPOPUP.getText());
		if (ReplaceTheGuestInfo.equalsIgnoreCase("Yes")) {
			element.GUESTINFO_GUESTPROFILE_CONFIRMATIONPOPUP_YESBUTTON.click();
			reslogger.info("Click Change Guest Info Confirmation Yes Button");
			steps.add("Click Change Guest Info Confirmation  Yes Button");
		} else if (ReplaceTheGuestInfo.equalsIgnoreCase("No")) {
			element.GUESTINFO_GUESTPROFILE_CONFIRMATIONPOPUP_NOBUTTON.click();
			reslogger.info("Click Change Guest Info Confirmation No Button");
			steps.add("Click Change Guest Info Confirmation No Button");
		} else {
			element.GUESTINFO_GUESTPROFILE_CONFIRMATIONPOPUP_CLOSEBUTTON.click();
			reslogger.info("Click Change Guest Info Confirmation Close Button");
			steps.add("Click Change Guest Info Confirmation Close Button");
		}

		return steps;
	}

	public ArrayList<String> verfifyGuestProfileAttachedInfo(WebDriver driver, String guestName, String contactName,
			String addressLine1, String addressLine2, String addressLine3, String email, String phone,
			String alternativePhone, String city, String country, String state, String postalCode, String marketSegment,
			String referral) throws InterruptedException {
		ArrayList<String> test_steps = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.explicit_wait_visibilityof_webelement_120(res.GuestName_GuestInfo, driver);
		String foundGuestName = res.GuestName_GuestInfo.getText();
		assertEquals(foundGuestName, guestName, "Failed To Verify Guest Name");
		reslogger.info("Successfully Verified Guest Name : " + foundGuestName);
		test_steps.add("Successfully Verified Guest Name : " + foundGuestName);

		Wait.explicit_wait_visibilityof_webelement_120(res.ContactName_GuestInfo, driver);
		String foundContactName = res.ContactName_GuestInfo.getText();
		assertEquals(foundContactName, contactName, "Failed To Verify ContactName");
		reslogger.info("Successfully Verified ContactName : " + foundContactName);
		test_steps.add("Successfully Verified ContactName : " + foundContactName);

		String foundAddressLine1 = res.AddressLine1_GuestInfo.getText();
		assertEquals(foundAddressLine1, addressLine1, "Failed To Verify Address Line1");
		reslogger.info("Successfully Verified Address Line1 : " + foundAddressLine1);
		test_steps.add("Successfully Verified Address Line1 : " + foundAddressLine1);

		String foundAddressLine2 = res.AddressLine2_GuestInfo.getText();
		assertEquals(foundAddressLine2, addressLine2, "Failed To Verify Address Line2");
		reslogger.info("Successfully Verified Address Line2 : " + foundAddressLine2);
		test_steps.add("Successfully Verified Address Line2 : " + foundAddressLine2);

		String foundAddressLine3 = res.AddressLine3_GuestInfo.getText();
		assertEquals(foundAddressLine3, addressLine3, "Failed To Verify Address Line3");
		reslogger.info("Successfully Verified Address Line3 : " + foundAddressLine3);
		test_steps.add("Successfully Verified Address Line3 : " + foundAddressLine3);

		String foundCity = res.City_GuestInfo.getText();
		assertEquals(foundCity, city, "Failed To Verify City");
		reslogger.info("Successfully Verified City : " + foundCity);
		test_steps.add("Successfully Verified City : " + foundCity);

		String foundCountry = res.Contry_GuestInfo.getText();
		assertEquals(foundCountry, country, "Failed To Verify Country");
		reslogger.info("Successfully Verified Country : " + foundCountry);
		test_steps.add("Successfully Verified Country : " + foundCountry);

		String foundState = res.State_GuestInfo.getText();
		assertEquals(foundState, state, "Failed To Verify State");
		reslogger.info("Successfully Verified State : " + foundState);
		test_steps.add("Successfully Verified State : " + foundState);

		String foundPostalCode = res.PostalCode_GuestInfo.getText();
		assertEquals(foundPostalCode, postalCode, "Failed To Verify PostalCode");
		reslogger.info("Successfully Verified PostalCode : " + foundPostalCode);
		test_steps.add("Successfully Verified PostalCode : " + foundPostalCode);

		String foundEmail = res.Email_GuestInfo.getText();
		assertEquals(foundEmail, email, "Failed To Verify Email");
		reslogger.info("Successfully Verified Email : " + foundEmail);
		test_steps.add("Successfully Verified Email : " + foundEmail);

		String foundphoneNo = res.PhoneNo_GuestInfo.getText();
		foundphoneNo = foundphoneNo.replace("-", "").trim();
		foundphoneNo = foundphoneNo.replace("(", "");
		foundphoneNo = foundphoneNo.replace(")", "");
		foundphoneNo = foundphoneNo.replace(" ", "");
		assertEquals(foundphoneNo.trim(), "1" + phone, "Failed To Verify phoneNo");
		reslogger.info("Successfully Verified PhoneNo : " + foundphoneNo);
		test_steps.add("Successfully Verified PhoneNo : " + foundphoneNo);

		String foundalternativephoneNo = res.AlternativePhoneNo_GuestInfo.getText();
		foundalternativephoneNo = foundalternativephoneNo.replace("-", "").trim();
		foundalternativephoneNo = foundalternativephoneNo.replace("(", "");
		foundalternativephoneNo = foundalternativephoneNo.replace(")", "");
		foundalternativephoneNo = foundalternativephoneNo.replace(" ", "");
		assertEquals(foundalternativephoneNo.trim(), "1" + alternativePhone, "Failed To Verify phoneNo");
		reslogger.info("Successfully Verified Alternative PhoneNo : " + foundalternativephoneNo);
		test_steps.add("Successfully Verified Alternative PhoneNo : " + foundalternativephoneNo);

		Utility.ScrollToElement(res.MarketSegment_GuestInfo, driver);
		String foundMarketSegment = res.MarketSegment_GuestInfo.getText();
		assertEquals(foundMarketSegment, marketSegment, "Failed To Verify MarketSegment");
		reslogger.info("Successfully Verified MarketSegment : " + foundMarketSegment);
		test_steps.add("Successfully Verified MarketSegment : " + foundMarketSegment);

		Utility.ScrollToElement(res.Referral_GuestInfo, driver);
		String foundReferral = res.Referral_GuestInfo.getText();
		assertEquals(foundReferral, referral, "Failed To Verify Referral");
		reslogger.info("Successfully Verified Referral : " + foundReferral);
		test_steps.add("Successfully Verified Referral : " + foundReferral);

		return test_steps;

	}

	public void closeFirstOpenedReservationUnSavedData(WebDriver driver, ArrayList test_steps)
			throws InterruptedException {
		String close = "//ul[@class='sec_nav']//li[5]//i";
		try {
			// Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(close)),
			// driver);
			Wait.WaitForElement(driver, close);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(close)), driver);
			Utility.ScrollToElement(driver.findElement(By.xpath(close)), driver);
			driver.findElement(By.xpath(close)).click();
		} catch (Exception e) {
			Wait.WaitForElement(driver, close);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(close)), driver);
			Utility.ScrollToElement(driver.findElement(By.xpath(close)), driver);
			Wait.wait2Second();
			driver.findElement(By.xpath(close)).click();
		}
		if (driver.findElement(By.xpath("//div[@id='alertForTab']//h4[.='You have Unsaved Data!']")).isDisplayed()) {
			test_steps.add(
					"Unsaved data model popup is displayed while closing the reservation and clicking on YES button");
			reslogger.info(
					"Unsaved data model popup is displayed while closing the reservation and clicking on YES button");
			driver.findElement(By.xpath("//div[@id='alertForTab']//button[.='Yes']")).click();
		}
		test_steps.add("Closed the reservation");
		reslogger.info("Closed the reservation");
	}

	public String getTotalIncidentals(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait10Second();
		String IncidentalTotal = res.getTotalIncidentalsAmount.getText();

		return IncidentalTotal;
	}

	public void verifyLedgerAccountnotPresentInTaxDetailPopup(WebDriver driver, ArrayList test_steps,
			ArrayList<String> existingTaxDescription, String PackageCategory) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String taxLedgeraccount = "Room Charge";

		int roomChargesFolioCount = getRoomChargeFolioItemCountInRes(driver);
		for (int i = 1; i <= roomChargesFolioCount; i++) {
			String xpath = "(//tbody[starts-with(@data-bind,'getElement: ComputedFolioItemsElement')]/tr/td/span[text()='"
					+ taxLedgeraccount + "']/../following-sibling::td/a)[" + i + "]";
			// clickroomChargeFolioItems
			Wait.waitUntilPresenceOfElementLocated(xpath, driver);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(xpath)), driver);
			driver.findElement(By.xpath(xpath)).click();
			test_steps.add("Click at folio line item: " + i + " of" + " " + taxLedgeraccount);
			Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);
			Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ItemDetailOnFolioPopup, driver);
			boolean ledgerflag = true;
			for (int k = 0; k < existingTaxDescription.size(); k++) {

				try {
					ledgerflag = IsTaxApplicableOnLedgerAccount(driver, test_steps,
							existingTaxDescription.get(k).trim(), PackageCategory);
				} catch (Exception e) {
					// TODO Auto-generated catch block
					reslogger.info(e);
				}
				assertEquals(false, ledgerflag);

				test_steps.add("<b>" + PackageCategory + "<b>" + "not associated to the Tax: " + "<b>"
						+ existingTaxDescription.get(k) + "</b>");
				cancelTaxItemDetails(driver);
				test_steps.add("Cancel tax item details popup");
			}
			clickFolioPopupCancel(driver);
			test_steps.add("Close open folio line item");
		}
	}

	public boolean IsTaxApplicableOnLedgerAccount(WebDriver driver, ArrayList<String> test_steps,
			String createdTaxDescriptions, String ledgerAccount) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean flag = false;
		Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ItemDetailOnFolioPopup, driver);

		// String xpath =
		// "(//a[text()='"+createdTaxDescriptions.trim()+"'])[1]/ancestor::td";
		JavascriptExecutor js = (JavascriptExecutor) driver;
		WebElement element = driver.findElement(By.xpath(
				"(//a[text()='" + createdTaxDescriptions.trim() + "'])[1]/ancestor::td/span/following-sibling::a"));
		// js.executeScript("arguments[0].click(true);", element);
		// reslogger.info(xpath);
		// driver.findElement(By.xpath(xpath)).click();
		Wait.explicit_wait_elementToBeClickable(element, driver);
		element.click();
		reslogger.info("Click at description link");

		test_steps.add("Click at tax Description link: " + "<b>" + createdTaxDescriptions + "</b>");
		String xpath1 = "//table[@class='table table-bordered table-striped table-hover table-condensed']/tbody/tr/td/span[text()='"
				+ ledgerAccount.trim() + "']";
		Wait.explicit_wait_10sec(res.taxItemPlaceholderInFolioDetail, driver);
		Wait.waitUntilPresenceOfElementLocated(OR.TaxItemPlaceholderInFolioDetail, driver);
		reslogger.info(xpath1);
		try {
			flag = verifySizeOfLaundryItems(driver, xpath1);
		} catch (Exception e) {
			reslogger.info(e);
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		reslogger.info(flag);
		Wait.wait5Second();
		return flag;

	}

	public boolean verifySizeOfLaundryItems(WebDriver driver, String xpath) {
		boolean laundryExists = false;
		try {
			// String xpath1 = "//table[@class='table table-bordered
			// table-striped table-hover
			// table-condensed']/tbody/tr/td/span[text()='Laundry']";
			laundryExists = driver.findElements(By.xpath(xpath)).size() != 0;
		} catch (Exception e) {
			reslogger.info(e);
			laundryExists = false;
		}
		return laundryExists;
	}

	public void cancelTaxItemDetails(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_10sec(res.taxItemDetailsPopup, driver);
		reslogger.info("cancel");
		res.cancelTaxItemDetailsPopup.click();
	}

	public void verifypackagecharges(WebDriver driver, ArrayList<String> test_steps, double packagerate,
			String PackageCategory) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		// double foliovalue = 0.0;
		double totalIncidentals = 0.0;
		double captureTotalIncidentals = 0.0;
		String mainLedgeraccount = "Room Charge";
		int roomChargesFolioCount = getRoomChargeFolioItemCountInRes(driver);
		for (int i = 1; i <= roomChargesFolioCount; i++) {
			double getincidentalval = 0.0;
			String xpath = "(//tbody[starts-with(@data-bind,'getElement: ComputedFolioItemsElement')]/tr/td/span[text()='"
					+ mainLedgeraccount + "']/../following-sibling::td/a)[" + i + "]";

			// clickroomChargeFolioItems
			driver.findElement(By.xpath(xpath)).click();
			test_steps.add("Click at folio line item: " + i + " of" + " " + PackageCategory.trim());
			Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);

			String xpath1 = "(//span[text()='" + PackageCategory.trim()
					+ "'])[1]/ancestor::td/following-sibling::td/span[starts-with(.,'$')]";
			reslogger.info(xpath1);
			String getincidentalvalue = driver.findElement(By.xpath(xpath1)).getText().replace("$", "").trim();
			getincidentalval = Double.parseDouble(getincidentalvalue);
			assertEquals(packagerate, getincidentalval);
			test_steps.add("Verifying child folio line item package value:" + PackageCategory + " " + "value" + "<b>"
					+ getincidentalval + "</b>");
			totalIncidentals = totalIncidentals + getincidentalval;
			clickFolioPopupCancel(driver);
			test_steps.add("Close open folio line item");

		}
		String capturetotalincidentals = driver
				.findElement(By.xpath("(//span[@class='pamt']/span[starts-with(.,'$')])[2]")).getText().replace("$", "")
				.trim();

		assertEquals(Double.parseDouble(capturetotalincidentals), totalIncidentals);
		test_steps.add("Verifying totalIncidental captured with calculated of each existing folio: " + "<b>"
				+ totalIncidentals + "</b>");
	}

	public void inputReason(WebDriver driver, ArrayList<String> test_steps, String reason) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		res.CancelReservation_Reason.clear();
		res.CancelReservation_Reason.sendKeys(reason);
		test_steps.add("Providing Cancellation Reason as : <b>" + reason + " </b>");
		reslogger.info("Providing Cancellation Reason as : " + reason);
	}

	public void clickProceedToCancelPaymentButton(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
	    verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ProceedToPaymentButton);
		Utility.ScrollToElement(res.ProceedToPaymentButton, driver);
		res.ProceedToPaymentButton.click();
		test_steps.add("Clicking on '<b>PROCEED TO CANCELLATION PAYMENT</b>' Button");
		reslogger.info("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
	}

	public void clickConfirmCancelButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
//			Wait.WaitForElement(driver, OR_Reservation.ConfirmedNoShowButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ConfirmedNoShowButton), driver);
		String buttonText = res.CP_Reservation_ConfirmButton.getText();
		Utility.ScrollToElement(res.CP_Reservation_ConfirmButton, driver);
		res.CP_Reservation_ConfirmButton.click();
		test_steps.add("Clicking on <b>"+buttonText+"</b> Button");
		reslogger.info("Clicking on "+buttonText+" Button");
	}

	public boolean verifyNoShowSuccessFull(WebDriver driver) {

		String path = "//h4[contains(@class,'modal-title')][contains(text(),'No Show Successful')]";
		boolean value = Utility.isElementPresent(driver, By.xpath(path));
		return value;
	}

	public String getAmountFromPaymentVerificationPage(WebDriver driver) throws InterruptedException {
		String amount = null;
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_Amount);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount, driver);
		// Get Amount
		amount = CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		double noshowPaymentAmount = Double.valueOf(amount);

		// amount = String.valueOf(noshowPaymentAmount);
		amount = String.format("%.2f", noshowPaymentAmount);
		reslogger.info("Get Amount from Payment Page Is : " + amount);

		return amount;

	}

	public void verifyHistoryDescriptionWithPayment(WebDriver driver, ArrayList<String> test_steps, String amount,
			String Status, String abb, String RoomNo, String PaymentMethod) {
		String[] room = RoomNo.split(":");
		String FinalRoomNo = room[1].trim();
		reslogger.info(" Room No: " + FinalRoomNo);
		String checkIn = "Made a payment $" + amount.trim() + " using " + PaymentMethod;
		String checkOut = "Captured payment for $" + amount.trim() + " using " + PaymentMethod;
		String path = "//span[contains(text(),'" + checkIn
				+ "')]/ancestor::td/following-sibling::td/span[contains(text(),'" + abb + ": " + FinalRoomNo + "')]";
		String checkOutPath = "//span[contains(text(),'" + checkOut
				+ "')]/ancestor::td/following-sibling::td/span[contains(text(),'" + abb + ": " + FinalRoomNo + "')]";
		if (Status.equals("Check In")) {
			WebElement element = driver.findElement(By.xpath(path));
			assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Description");
			test_steps.add("'History Tab' Verified Description: <b>" + checkIn + "</b>");
			reslogger.info("'History Tab' Verified Description : " + checkIn);
			test_steps.add("'History Tab' Verified Room: <b>" + abb + ": " + FinalRoomNo + "</b>");
			reslogger.info("'History Tab' Verified Room : " + abb + ": " + FinalRoomNo);
		} else if (Status.equals("Check Out")) {
			WebElement elementCheckOut = driver.findElement(By.xpath(checkOutPath));
			assertTrue(elementCheckOut.isDisplayed(), "Failed: To verify History Tab  Description");
			test_steps.add("'History Tab' Verified Description: <b>" + checkOut + "</b>");
			reslogger.info("'History Tab' Verified Description : " + checkOut);
			test_steps.add("'History Tab' Verified Room: <b>" + abb + ": " + FinalRoomNo + "</b>");
			reslogger.info("'History Tab' Verified Room : " + abb + ": " + FinalRoomNo);
		}

	}

	public void verifyChangedRoomChargesOnHistory(WebDriver driver, ArrayList<String> test_steps, String roomCharge,
			String ChangedCharges) {
		String checkOut = "Changed room charge from $" + roomCharge + " to $" + ChangedCharges;
		String path = "//span[contains(text(),'" + checkOut + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Changed Room Charges");
		test_steps.add("'History Tab' Verified <b>" + checkOut + "/b<>");
		reslogger.info("'History Tab' Verified" + checkOut);

	}

	public void verifyReservationPanelTripTotal(WebDriver driver, ArrayList<String> test_steps,
			String TotalTripAmount) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_StatusPanel_TripTotal, driver);
		String RerservationStatus_TripTotalAmount = res.CP_Reservation_StatusPanel_TripTotal.getText().replace("$", "");
		double tripAmount = Double.valueOf(RerservationStatus_TripTotalAmount);
		RerservationStatus_TripTotalAmount = String.valueOf(tripAmount);
		// Verified History Tab No Show Entry
		assertEquals(RerservationStatus_TripTotalAmount, (TotalTripAmount), "Failed: To verify Total Trip");
		test_steps.add("  Verified Reservation Panel Total Trip:  <b>" + TotalTripAmount + "</b>");
		reslogger.info(" Verified Reservation Panel Total Trip: " + TotalTripAmount);
	}

	public void verifyReservationPanelBalance(WebDriver driver, ArrayList<String> test_steps, String Balance)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_PanelBalance);
		Utility.ScrollToElement(res.CP_Reservation_StatusPanel_Balance, driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_StatusPanel_Balance, driver);
		String RerservationStatus_BalanceAmount = res.CP_Reservation_StatusPanel_Balance.getText().replace("$", "");
		double balanceAmount = Double.valueOf(RerservationStatus_BalanceAmount);
		reslogger.info("Actual Balance: " + String.format("%.2f", balanceAmount).trim());
		assertEquals(String.format("%.2f", balanceAmount).trim(), (Balance), "Failed: To verify Balance");
		test_steps.add("  Verified Reservation Panel Balance:  <b>" + Balance + "</b>");
		reslogger.info(" Verified Reservation Panel Balance: " + Balance);
	}

	public void verifyTripSummaryPaidAmount(WebDriver driver, ArrayList test_steps, String getPaid, String Paid) {
		double paidAmt = Double.valueOf(getPaid);
		getPaid = String.format("%.2f", paidAmt);
		assertEquals(getPaid.trim(), (Paid), "Failed : to Verify Trip Summary Paid");
		test_steps.add("Verified TripSummary  Paid : <b>" + Paid + "</b>");
		reslogger.info("Verified TripSummary  Paid : " + Paid);

	}

	public void verifyTripSummaryBalanceAmount(WebDriver driver, ArrayList test_steps, String getBalance,
			String Balance) {

		double balanceAmount = Double.valueOf(getBalance);
		reslogger.info("Actual Balance : " + String.format("%.2f", balanceAmount).trim());
		assertEquals(String.format("%.2f", balanceAmount).trim(), (Balance), "Failed : to Verify Trip Summary Balance");
		test_steps.add("Verified TripSummary Balance Charges :<b> " + Balance + "</b>");
		reslogger.info("Verified TripSummary Balance Charges : " + Balance);
	}

	public ArrayList<String> verifyOverbookingTab(WebDriver driver, String RoomClassName) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		Wait.WaitForElement(driver, OR_Reservation.OVERBOOKING_TAB_MESSAGE);
		Utility.ScrollToElement(cpelements.OVERBOOKING_TAB_MESSAGE, driver);
		String overbookingMessage = "There are 0 rooms available for the " + RoomClassName
				+ ", Are you sure you want to overbook this room class?";
		assertEquals(overbookingMessage, cpelements.OVERBOOKING_TAB_MESSAGE.getText());
		test_steps.add("Overbooking Tab Message Verified : " + overbookingMessage);
		reslogger.info("Overbooking Tab Message Verified : " + overbookingMessage);
		cpelements.OVERBOOKING_TAB_NOBUTTON.click();
		reslogger.info("Overbooking Tab No Buton Clicked");
		test_steps.add("Overbooking Tab No Buton Clicked");
		return test_steps;

	}

	public ArrayList<String> verifyNewReservationPage(WebDriver driver) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_FindRooms);
		assertEquals(cpelements.CP_NewReservation_FindRooms.isDisplayed(), true);
		test_steps.add("New Reservation Page Displayed");
		reslogger.info("New Reservation Page Displayed");

		return test_steps;

	}

	public ArrayList<String> selectCheckInDate(WebDriver driver, String checkInDate) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		String loading = "(//div[@class='ir-loader-in'])[2]";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CheckinCal);
		res.CP_NewReservation_CheckinCal.click();
		String monthYear = Utility.get_MonthYear(checkInDate);
		String day = Utility.getDay(checkInDate);
		reslogger.info(monthYear);
		String header = null, headerText = null, next = null, date;
		for (int i = 1; i <= 12; i++) {
			header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
			headerText = driver.findElement(By.xpath(header)).getText();
			if (headerText.equalsIgnoreCase(monthYear)) {
				date = "//td[contains(@class,'day') and text()='" + day + "']";
				Wait.WaitForElement(driver, date);
				int size = driver.findElements(By.xpath(date)).size();
				for (int k = 1; k <= size; k++) {
					date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + k + "]";
					String classText = driver.findElement(By.xpath(date)).getAttribute("class");
					if (!classText.contains("old")) {
						driver.findElement(By.xpath(date)).click();
						test_steps.add("Selecting checkin date : " + checkInDate);
						reslogger.info("Selecting checkin date : " + checkInDate);
						break;
					}
				}
				break;
			} else {
				next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
				Wait.WaitForElement(driver, next);
				driver.findElement(By.xpath(next)).click();
				Wait.wait2Second();
			}
		}

		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <selectCheckoutDate> ' Description: <Method will select
	 * check out date> ' Input parameters: <WebDriver driver, String
	 * CheckoutDate> ' Return value: <ArrayList<String>> ' Created By: <Jamal
	 * Nasir> ' Created On: <05/04/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> selectCheckoutDate(WebDriver driver, String CheckoutDate) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CheckoutCal);
		res.CP_NewReservation_CheckoutCal.click();
		String monthYear = Utility.get_MonthYear(CheckoutDate);
		String day = Utility.getDay(CheckoutDate);
		reslogger.info(monthYear);
		String header = null, headerText = null, next = null, date;
		for (int i = 1; i <= 12; i++) {
			header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
			headerText = driver.findElement(By.xpath(header)).getText();
			if (headerText.equalsIgnoreCase(monthYear)) {
				date = "//td[contains(@class,'day') and text()='" + day + "']";
				Wait.WaitForElement(driver, date);
				int size = driver.findElements(By.xpath(date)).size();
				for (int k = 1; k <= size; k++) {
					date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + k + "]";
					String classText = driver.findElement(By.xpath(date)).getAttribute("class");
					if (!classText.contains("old")) {
						driver.findElement(By.xpath(date)).click();
						test_steps.add("Selecting checkout date : " + CheckoutDate);
						reslogger.info("Selecting checkout date : " + CheckoutDate);
						break;
					}
				}

				break;
			} else {
				next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
				Wait.WaitForElement(driver, next);
				driver.findElement(By.xpath(next)).click();
				Wait.wait2Second();
			}
		}
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getReservationStatus> ' Description: <return reservation
	 * status> ' Input parameters: <WebDriver driver> ' Return value: <String> '
	 * Created By: <Jamal Nasir> ' Created On: <05/06/2020> *
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getReservationStatus(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ReservationStatus);
		String status = res.CP_NewReservation_ReservationStatus.getText();
		return status;
	}

	/**
	 * ##########################################################################################################################################################################
	 * 
	 * ' Method Name: <selectRoom> ' Description: <Select Room IN Resevation> '
	 * Input parameters: <WebDriver driver, String RoomClass, String IsAssign,
	 * String Account> ' Return value: <ArrayList<String>> ' Created By: <Jamal
	 * Nasir> ' Created On: <05/06/2020>
	 * 
	 * ##########################################################################################################################################################################
	 */
	public ArrayList<String> selectRoom(WebDriver driver, String RoomClass, String IsAssign, String Account)
			throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, room);

		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				reslogger.info(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				Random random = new Random();
				int randomNumber = random.nextInt(count1 - 1) + 1;
				reslogger.info("count : " + count1);
				reslogger.info("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}
			if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
				String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
				Wait.WaitForElement(driver, policy);
				driver.findElement(By.xpath(policy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");

				loading = "(//div[@class='ir-loader-in'])[2]";
				counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
		return test_steps;
	}

	public String getRoomChargeUnderTripSummary(WebDriver driver, ArrayList<String> test_steps) {
		String Balance = driver
				.findElement(By
						.xpath("//span[text()='Summary']/../../..//div[contains(text(),'Room Charges')]/following-sibling::div"))
				.getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("Room Charges captured at trip summary as : <b>" + Balance + "</b>");
		reslogger.info("Room Charges captured at trip summary as : " + Balance);
		return Balance;
	}

	public String getRoomNumber(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GetRoomNumber);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GetRoomNumber), driver);
		String room = reservation.GetRoomNumber.getText();
		room = room.split(":")[1].trim();
		reslogger.info("Room Number is : " + room);
		return room;
	}

	public ArrayList<String> verifyAssociatedAccount(WebDriver driver, String accountName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<String>();

		Wait.WaitForElement(driver, OR_Reservation.AssociatedAccountName);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.AssociatedAccountName), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.AssociatedAccountName), driver);
		String foundName = res.AssociatedAccountName.getText();

		assertEquals(res.AssociatedAccountName.isDisplayed(), OR_Reservation.AssociatedAccountName.contains("//a"),
				"Failed to verify Account No");
		testSteps.add("Verified Assoicated Account Name is displayed as link");
		reslogger.info("Verified Assoicated Account Name is displayed as link");
		assertEquals(foundName.trim(), accountName.trim(), "Failed to verify Account No");
		testSteps.add("Successfully Verified Assoicated Account Name : " + accountName);
		reslogger.info("Successfully Verified Assoicated Account Name : " + accountName);
		return testSteps;
	}

	public ArrayList<String> verifyResInHistory(WebDriver driver, String ReservationNumber) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		String historyPath = "//span[.='Created reservation with Confirmation Number: " + ReservationNumber + "']";
		WebElement historyMsg = driver.findElement(By.xpath(historyPath));
		assertTrue(historyMsg.isDisplayed(), "Failed to verify reservation creation in history");

		test_steps.add("Description : Created reservation with Confirmation Number: " + ReservationNumber);
		reslogger.info("Description : Created reservation with Confirmation Number: " + ReservationNumber);
		test_steps.add("Successfully Verified reservation in history tab");
		reslogger.info("Successfully Verified reservation in history tab");
		return test_steps;
	}

	public ArrayList<String> verifyAssociatedAccount_ResHeader(WebDriver driver, String accountName) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<String>();

		String foundName = reservation.HeaderAccountName_BeforeReservation.getText();
		assertEquals(foundName.trim(), accountName, "Failed to verify Account No");
		testSteps.add("Successfully Verified Assoicated Account Name : " + accountName);
		reslogger.info("Successfully Verified Assoicated Account Name : " + accountName);
		assertEquals(reservation.GroupSign.isDisplayed(), true, "Failed: Group tic sign is not showing");
		testSteps.add("Verified group tick sign in reservation page");
		try {
			reservation.CP_NewReservation_Next.click();
		} catch (Exception e) {
			// TODO: handle exception
		}
		return testSteps;
	}

	public void verifyNoShowPolicy(WebDriver driver, ArrayList<String> test_steps, String policyName,
			String policyText) {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			guestDetailsTabClick(driver, test_steps);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.noShowPolicyDisclaimersTab), driver);
			res.noShowPolicyDisclaimersTab.click();

			String noShowPolicyNameInDetailsTab = "//button[@title='" + policyName + "']";
			String noShowPolicyTextDetailsTab = "//textarea[contains(text(),'" + policyText + "')]";

			Wait.waitForElementToBeVisibile(By.xpath(noShowPolicyNameInDetailsTab), driver);
			String noShowPolicyName = driver.findElement(By.xpath(noShowPolicyNameInDetailsTab)).getText().trim();
			assertEquals(noShowPolicyName, policyName, "Failed - Associated policy is not matched with created one");
			test_steps.add("Successfully verified associated no show policy name as : <b>" + noShowPolicyName + "</b>");
			Wait.waitForElementToBeVisibile(By.xpath(noShowPolicyTextDetailsTab), driver);
			String noShowPolicyText = driver.findElement(By.xpath(noShowPolicyTextDetailsTab)).getText();
			assertEquals(noShowPolicyText, policyText, "Failed - Associated policy  text is not matched with created one");
			test_steps.add("Successfully verified associated no show policy description as : <b>" + noShowPolicyText + "</b>");

			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.closeNoShowPolicyExpand), driver);
			res.closeNoShowPolicyExpand.click();
	}

	public boolean isVoidRoomChecked;

	public void verifyNoShowReservationPopUp(WebDriver driver, String policyName, ArrayList<String> test_steps)
			throws Exception {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		String path = "//span[contains(text(),'Void Room Charges')]/ancestor::div/label/input|//span[contains(text(),'Void room charges for unused nights')]/ancestor::div/label/input";
		Wait.WaitForElement(driver, OR_Reservation.NoShowAndCancelReservation_PolicyName);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowAndCancelReservation_PolicyName), driver);

		Utility.ScrollToElement(reservation.NoShowAndCancelReservation_PolicyName, driver);
		// Wait.wait2Second();
		assertTrue(reservation.NoShowAndCancelReservation_PolicyName.getText().toLowerCase().trim()
				.equals(policyName.toLowerCase().trim()), "Failed: To verify Reservation Window Policy Name");
		isVoidRoomChecked = driver.findElement(By.xpath(path)).isSelected();
		if (!isVoidRoomChecked) {
			reservation.CP_Reservation_NoShow_VoidRoomChargeCheckBox.click();
			test_steps.add("Checked Void Room Charge Check Box ");
			reslogger.info("Checked Void Room Charge Check Box ");
		} else {
			test_steps.add(" Void Room Charge Check Box is Already Checked ");
			reslogger.info("Void Room Charge Check Box is Already Checked ");
		}

		reservation.ProceedToPaymentButton.click();
		test_steps.add("Click on Proceed To No Show Payment Button ");
		reslogger.info("Click on Proceed To No Show Payment Button ");

	}

	public ArrayList<String> verifyNoShowPaymentPopUp(WebDriver driver, String title, String Amount, String expiryDate,
			String nameOnCard, String cardNo, String paymentMethod, String type, ArrayList<String> test_steps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle), driver);
		String titleDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText();
		reslogger.info(" Verified Payment Page Title : " + titleDisplayed);
		assertEquals(titleDisplayed, title, "Failed: To verify Payment Page Title");
		test_steps.add(" Verified Payment Page Title :<b> " + title + "</b>");
		WebElement paymentElement = driver.findElement(
				By.xpath("//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + paymentMethod + "']"));
		String paymentMethodDisplayed = paymentElement.getText().trim();
		assertEquals(paymentMethodDisplayed, paymentMethod, "Failed: To verify Payment Method");
		test_steps.add(" Verified Payment Method:<b> " + paymentMethodDisplayed + "</b> ");
		reslogger.info(" Verified Payment Method: " + paymentMethodDisplayed);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.folioBalance), driver);
		String folioBalence = reservation.folioBalance.getText().replace("$", "").replace(".00", "").trim();
		test_steps.add(" Verified folio Balence<b> " + folioBalence + "</b> ");
		reslogger.info(" Verifiedfolio Balence: " + folioBalence);
		assertEquals(folioBalence, Amount, "Mismatch actuval value different than expected value");

		String currentdate = Utility.getCurrentDate("MM/dd/yyyy");
		String date = "(//input[contains(@data-bind,'value:PaymentDate')])[2]";
		Wait.waitForElementToBeVisibile(By.xpath(date), driver);
		String checkOutDate = driver.findElement(By.xpath(date)).getAttribute("value");
		test_steps.add(" Verified checkOutDate: " + checkOutDate);
		reslogger.info(" Verified checkOutDate :" + checkOutDate);
		assertEquals(checkOutDate, currentdate, "Failed: To verify Account Details");

		String cardNoDisplayed = ((String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_CardNumber)).trim();
		assertEquals(cardNoDisplayed, cardNo, "Failed: To verify Card Number");
		test_steps.add(" Verified Card Number: <b>" + cardNoDisplayed + "</b>");
		reslogger.info(" Verified Card Number");

		String nameOnCardDisplayed = (String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_NameOnCard);
		assertEquals(nameOnCardDisplayed, nameOnCard, "Failed: To verify Name on Card ");
		test_steps.add("Verified Name on Card:<b>  " + nameOnCard + "</b>");
		reslogger.info(" Verified Name on Card");

		String expiryDateDisplayed = (String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_Expiry);
		assertEquals(expiryDateDisplayed, expiryDate, "Failed: To verify Expiry Date ");
		test_steps.add(" Verified Expiry Date:<b> " + expiryDateDisplayed + "</b>");
		reslogger.info(" Verified Expiry Date");

		String buttonDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().trim();
		buttonDisplayed = buttonDisplayed.replace("$", "").replace("PAY", "").replace(".00", "").trim();
		test_steps.add(" Verified button displayed  Amount:<b> " + buttonDisplayed + "</b>");
		reslogger.info(" Verified button displayed  Amount:<b> " + buttonDisplayed + "</b>");
		assertEquals(buttonDisplayed, folioBalence, "Failed: To verify Payment Type");

		reservation.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.click();
		test_steps.add(" Click on pament button");
		reslogger.info("  Click on pament button");

		return test_steps;

	}

	public void verifyNoShowNotesDetails(WebDriver driver, ArrayList<String> test_steps, String noteType,
			String noteSubject, String noteDesc, String updatedBy) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.wait3Second();
			Wait.explicit_wait_visibilityof_webelement_120(res.noShowNotesType, driver);
			Utility.ScrollToElement(res.noShowNotesType, driver);
			String noteTypeDisplayed = res.noShowNotesType.getText();
			assertEquals(noteTypeDisplayed, "Internal", "Failed - Verify type of No Show note");
			test_steps.add("Successfully verified type of note as <b>" + noteTypeDisplayed + "</b>");

			/*
			 * String noteDescriptionDisplayed =
			 * driver.findElement(By.xpath("//td[text()='"+
			 * noteType+"']/..//td[contains(@data-bind,'text: details')]")).
			 * getText(); assertEquals(noteDescriptionDisplayed, noteDesc,
			 * "Failed - Verify cancel note description section"); test_steps.
			 * add("Successfully verified cancel note description as <b>"
			 * +noteDescriptionDisplayed+"</b>");
			 */

			String noteSubjectDisplayed = driver
					.findElement(By.xpath("//td[text()='" + noteType + "']/..//td[contains(@data-bind,'subject')]"))
					.getText();
			assertEquals(noteSubjectDisplayed, noteType, "Failed - Verify subject of cancel note");
			test_steps.add("Successfully verified subject of note as <b>" + noteSubjectDisplayed + "</b>");

			String noteUpdatedByDisplayed = driver
					.findElement(By.xpath("//td[text()='" + noteType + "']/..//td[contains(@data-bind,'updatedBy')]"))
					.getText();
			assertEquals(noteUpdatedByDisplayed, updatedBy, "Failed - Verify note updated by");
			test_steps.add("Successfully verified note updated by as <b>" + noteUpdatedByDisplayed + "</b>");

			String noteUpdatedOnDisplayed = driver
					.findElement(By.xpath("//td[text()='" + noteType + "']/..//td[contains(@data-bind,'updatedOn')]"))
					.getText();
			String updateDateExp = Utility.getCurrentDate("MM/dd/yyyy");
			noteUpdatedOnDisplayed = Utility.parseDate(noteUpdatedOnDisplayed, "MM/dd/ yy HH:mm aa", "MM/dd/yyyy");
			// assertEquals(noteUpdatedOnDisplayed, updateDateExp, "Failed -
			// Verify note
			// updated on date");
			test_steps.add("Successfully verified note updated on date as <b>" + noteUpdatedOnDisplayed + "</b>");

		} catch (Exception e) {
			Utility.app_logs.info(e);
		}
	}

	public boolean CheckedDisplayVoidItem(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_DisplayVoidItemCheckBox, driver);
		boolean isChecked = res.CP_Reservation_DisplayVoidItemCheckBox.isSelected();
		if (!isChecked) {
			Utility.ScrollToElement(res.CP_Reservation_DisplayVoidItemCheckBox, driver);
			res.CP_Reservation_DisplayVoidItemCheckBox.click();
			test_steps.add("Checked Display Void Item Check Box ");
			reslogger.info("Checked Display Void Item Check Box ");
		} else {
			test_steps.add("Display Void Item Check Box is Already Checked ");
			reslogger.info("Display Void Item Check Box is Already Checked ");
		}
		return isChecked;
	}

	public String getRoomNumberWithClass(WebDriver driver) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GetRoomNumber);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GetRoomNumber), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GetRoomNumber), driver);
		String room = reservation.GetRoomNumber.getText();
		return room;
	}

	public ArrayList<String> verifyReservationFolioDetails(WebDriver driver, String roomNumber, String roomClass,
			ArrayList<String> test_steps) {

		Folio folio = new Folio();
		/*
		 * driver.findElement(By.
		 * xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]"
		 * )).click(); WebElement roomsToSelect=driver.findElement(By.
		 * xpath("(//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]/..//a/span[@class='text'])[1]"
		 * )); roomsToSelect.click();
		 */
		double folioRoomChargeLineItems = 0.00;
		String noShowFee = null;
		/*
		 * List<WebElement> rooms = driver.findElements(By.
		 * xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]/..//a/span[@class='text']"
		 * )); Utility.app_logs.info(rooms.size()); for (WebElement roomsToSelect :
		 * rooms) { driver.findElement(By.
		 * xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]"
		 * )).click(); Wait.wait1Second(); roomsToSelect.click();
		 */
		List<WebElement> roomChargesAmount = driver
				.findElements(By.xpath("//span[contains(text(), 'Room Charge')]/../..//td[@class='lineitem-amount']"));
		if (roomChargesAmount.size() != 0) {
			for (WebElement getRoomCharges : roomChargesAmount) {
				double roomCharge = Double.parseDouble(getRoomCharges.getText().replace("$ ", ""));
				folioRoomChargeLineItems = folioRoomChargeLineItems + roomCharge;
				test_steps.add("voidedRoom charges for 2 nights should be voided :" + folioRoomChargeLineItems);
				reslogger.info("folio RoomCharge LineItem Amount:" + folioRoomChargeLineItems);

			}
		}
		noShowFee = folio.getNoShowFeeAmount(driver, "No Show Fee", test_steps);
		folio.verifyLineItemPaymentMethod(driver, "No Show Fee", test_steps);
		verifyResrvationFolioBalence(driver, test_steps);
		folio.clikOnLineItemDescription(driver, "No Show Fee", test_steps);
		folio.verifyLineItemDetails(driver, roomNumber, roomClass, noShowFee, test_steps);

		return test_steps;

	}

	public void verifyResrvationFolioBalence(WebDriver driver, ArrayList<String> test_steps) {
		String totalCharge = null;
		String payments = null;
		String balance = null;
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		totalCharge = "//label[contains(text(),'Total Charges:')]/../span[@class='pamt']";
		payments = "//label[contains(text(),'Payments:')]/../span[@class='pamt']";
		balance = "//label[contains(text(),'Balance: ')]/../span[@class='pamt']";

		totalCharge = driver.findElement(By.xpath(totalCharge)).getText().replace("$ ", "");
		test_steps.add("Reservation Folio Total Cgharges:" + totalCharge);
		reslogger.info("Reservation Folio Total Cgharges:" + totalCharge);
		double tcharge = Double.valueOf(totalCharge);

		payments = driver.findElement(By.xpath(payments)).getText().replace("$ ", "");
		;
		test_steps.add("Reservation Folio Total Cgharges:" + payments);
		reslogger.info("Reservation Folio Total Cgharges:" + payments);
		double payAmount = Double.valueOf(payments);
		// int payAmount= Integer.valueOf(payments);
		double totalAmount = tcharge - payAmount;
		String tAmount = df.format(totalAmount);
		test_steps.add("Reservation Folio Balence:" + totalAmount);
		reslogger.info("Reservation Folio Balence:" + totalAmount);

		balance = driver.findElement(By.xpath(balance)).getText().replace("$ ", "");

		test_steps.add("Reservation Folio Total Cgharges:" + balance);
		reslogger.info("Reservation Folio Total Cgharges:" + balance);
		assertEquals(tAmount, balance, "reservation folio balnce not a zero");

	}

	public String getTaxandServicesInTripSummaryBeforeCreateReservation(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GetTaxandServicesInTripSummaryBeforeCreateReservation);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GetTaxandServicesInTripSummaryBeforeCreateReservation),
				driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GetTaxandServicesInTripSummaryBeforeCreateReservation),
				driver);
		return element.GetTaxandServicesInTripSummaryBeforeCreateReservation.getText();
	}

	public void makeReservationNoShow(WebDriver driver, ArrayList test_steps) throws Exception {
		String expand = "//div[@class='ng-statusChnage ir-statusMenu ul']//span[@class='dropdown dropdown-toggle ir-dropdown-span-status']";

		Wait.WaitForElement(driver, expand);
		Wait.waitForElementToBeClickable(By.xpath(expand), driver);
		Utility.ScrollToElement(driver.findElement(By.xpath(expand)), driver);
		driver.findElement(By.xpath(expand)).click();
		String status = "//div[@class='ng-statusChnage ir-statusMenu ul']//span//ul//span[text()='No Show']";
		Wait.waitForElementToBeClickable(By.xpath(status), driver);
		driver.findElement(By.xpath(status)).click();
		test_steps.add("Clicking on No Show reservation button");
		reslogger.info("Clicking on No Show reservation button");
	}

	public ArrayList<String> verifyNoShowPaymentPopUp(WebDriver driver, String title, String expiryDate,
			String nameOnCard, String cardNo, String paymentMethod, String type, String percentage,
			ArrayList<String> baseAmount, ArrayList<String> totalNights, String taxes, ArrayList<String> test_steps) {

		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> details = new ArrayList<>();
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle), driver);
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText()
				.trim();
		String balanceDisplayed = reservation.CheckInPaymentPopup_Balance.getText().replace("$ ", "");
		if (amountDisplayed.equals(amount)) {
			assertEquals(amountDisplayed, amount, "Faild to verify calculated amount");
			test_steps.add("Successfull verified amount as : <b>" + amountDisplayed + "</b>");
		} else {
			test_steps.add("Existing issue in CP: Convert WCF Service to in-process calls - PolicyService"
					+ "<br/><a href='https://innroad.atlassian.net/browse/REF-62'>" + "Verified : REF-62</a><br/>");
			reslogger.info("Existing issue in CP: Convert WCF Service to in-process calls - PolicyService"
					+ "<br/><a href='https://innroad.atlassian.net/browse/REF-62'>" + "Verified : REF-62</a><br/>");
			// assertEquals(amountDisplayed,amount,"Faild to verify calculated
			// amount");
		}
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle), driver);
		String titleDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText();
		reslogger.info(" Verified Payment Page Title : " + titleDisplayed);
		assertEquals(titleDisplayed, title, "Failed: To verify Payment Page Title");
		test_steps.add(" Verified Payment Page Title :<b> " + title + "</b>");
		WebElement paymentElement = driver.findElement(
				By.xpath("//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + paymentMethod + "']"));
		String paymentMethodDisplayed = paymentElement.getText().trim();
		assertEquals(paymentMethodDisplayed, paymentMethod, "Failed: To verify Payment Method");
		test_steps.add(" Verified Payment Method:<b> " + paymentMethodDisplayed + "</b> ");
		reslogger.info(" Verified Payment Method: " + paymentMethodDisplayed);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.folioBalance), driver);
		String folioBalence = reservation.folioBalance.getText().replace("$", "").trim();
		test_steps.add(" Verified folio Balence<b> " + folioBalence + "</b> ");
		reslogger.info(" Verifiedfolio Balence: " + folioBalence);

		String currentdate = Utility.getCurrentDate("MM/dd/yyyy");
		String date = "(//input[contains(@data-bind,'value:PaymentDate')])[2]";
		Wait.waitForElementToBeVisibile(By.xpath(date), driver);
		String checkOutDate = driver.findElement(By.xpath(date)).getAttribute("value");
		test_steps.add(" Verified checkOutDate: " + checkOutDate);
		reslogger.info(" Verified checkOutDate :" + checkOutDate);
		assertEquals(checkOutDate, currentdate, "Failed: To verify Account Details");

		String cardNoDisplayed = ((String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_CardNumber)).trim();
		assertEquals(cardNoDisplayed, cardNo, "Failed: To verify Card Number");
		test_steps.add(" Verified Card Number: <b>" + cardNoDisplayed + "</b>");
		reslogger.info(" Verified Card Number");

		String nameOnCardDisplayed = (String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_NameOnCard);
		assertEquals(nameOnCardDisplayed, nameOnCard, "Failed: To verify Name on Card ");
		test_steps.add("Verified Name on Card:<b>  " + nameOnCard + "</b>");
		reslogger.info(" Verified Name on Card");

		String expiryDateDisplayed = (String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_Expiry);
		assertEquals(expiryDateDisplayed, expiryDate, "Failed: To verify Expiry Date ");
		test_steps.add(" Verified Expiry Date:<b> " + expiryDateDisplayed + "</b>");
		reslogger.info(" Verified Expiry Date");

		String buttonDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().trim();
		buttonDisplayed = buttonDisplayed.replace("$", "").replace("PAY", "").trim();
		test_steps.add(" Verified button displayed  Amount:<b> " + buttonDisplayed + "</b>");
		reslogger.info(" Verified button displayed  Amount:<b> " + buttonDisplayed + "</b>");
		assertEquals(buttonDisplayed, folioBalence, "Failed: To verify Payment Type");

		return test_steps;

	}

	public ArrayList<String> verifyPrimaryUserFolioDetails(WebDriver driver, String roomNumber1, String roomClass,
			ArrayList<String> test_steps) {

		Folio folio = new Folio();
		driver.findElement(
				By.xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]")).click();
		WebElement roomsToSelect = driver.findElement(By.xpath(
				"(//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]/..//a/span[@class='text'])[1]"));
		roomsToSelect.click();
		double folioRoomChargeLineItems = 0.00;
		String noShowFee = null;
		/*
		 * List<WebElement> rooms = driver.findElements(By.
		 * xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]/..//a/span[@class='text']"
		 * )); Utility.app_logs.info(rooms.size()); for (WebElement roomsToSelect :
		 * rooms) { driver.findElement(By.
		 * xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]"
		 * )).click(); Wait.wait1Second(); roomsToSelect.click();
		 */
		List<WebElement> roomChargesAmount = driver
				.findElements(By.xpath("//span[contains(text(), 'Room Charge')]/../..//td[@class='lineitem-amount']"));
		if (roomChargesAmount.size() != 0) {
			for (WebElement getRoomCharges : roomChargesAmount) {
				double roomCharge = Double.parseDouble(getRoomCharges.getText().replace("$ ", ""));
				folioRoomChargeLineItems = folioRoomChargeLineItems + roomCharge;
			}
		}
		noShowFee = folio.getNoShowFeeAmount(driver, "No Show Fee", test_steps);

		folio.clikOnLineItemDescription(driver, "No Show Fee", test_steps);
		folio.verifyLineItemDetails(driver, roomNumber1, roomClass, noShowFee, test_steps);
		;

		return test_steps;

	}

	public String calculationOfNoShowAmountToBePaid(ArrayList<String> baseAmounts, ArrayList<String> totalNights,
			String attr, String attrValue, String taxes, String totalRoomCharges) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountToBePaid = null;
		double paidAmount = 0.00;
		double taxesToAdd = 0.00;
		double taxesPerc = 0.00;
		double roomChargesCalc = 0.00;

		if (!(taxes.equalsIgnoreCase("0")) && !(taxes.equalsIgnoreCase("0.0")) && !(taxes.equalsIgnoreCase("0.00"))) {
			double abc = (Double.parseDouble(taxes)) * 100;
			taxesPerc = abc / Double.parseDouble(totalRoomCharges);
		}
		if (attr.equalsIgnoreCase("First Night")) {
			for (String string : baseAmounts) {
				double amount = (Double.parseDouble(string)) * (Double.parseDouble(attrValue));
				paidAmount = paidAmount + amount;
			}
			if ((taxesPerc != 0) && (taxesPerc != 0.0) && (taxesPerc != 0.00)) {
				double abc = paidAmount * taxesPerc;
				taxesToAdd = abc / 100;
				paidAmount = paidAmount + taxesToAdd;
			}
		} else if (attr.equalsIgnoreCase("Fixed Amount")) {
			paidAmount = (Double.parseDouble(attrValue)) * (baseAmounts.size());
		} else if (attr.equalsIgnoreCase("Room Charges")) {
			for (int i = 0; i < baseAmounts.size(); i++) {
				double abc = (Double.parseDouble(baseAmounts.get(i))) * (Double.parseDouble(totalNights.get(i)))
						* (Double.parseDouble(attrValue)) / 100;
				roomChargesCalc = abc + roomChargesCalc;
			}
			paidAmount = roomChargesCalc;

			/*
			 * if ( (taxesPerc != 0) && (taxesPerc != 0.0) && (taxesPerc !=
			 * 0.00) ) { double abc = paidAmount*taxesPerc; taxesToAdd =
			 * abc/100; paidAmount = paidAmount+taxesToAdd; }
			 */
		}
		amountToBePaid = df.format(paidAmount);
		return amountToBePaid;
	}

	public String getTaxesFromTripSummary(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		return res.TripSummary_TaxesAndServiceCharges.getText().replace("$ ", "");
	}

	public void verifyNoShowPaymentSuccessPopupVerify(WebDriver driver, ArrayList<String> test_steps,
			String NoShowSuccess, String Status, String PaymentMethod, String Type, String amount) throws Exception {

		try {
			String validate = null;
			DecimalFormat df = new DecimalFormat("0.00");
			df.setMaximumFractionDigits(2);
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.explicit_wait_visibilityof_webelement_120(res.CP_Reservation_NoShowSuccess, driver);
			Utility.ScrollToElement(res.CP_Reservation_NoShowSuccess, driver);

			String balanceDisplayed = res.NoShowSuccess_Balance.getText().replace("$ ", "").trim();
			String balanceCalculated = null;
			String amountDisplayed = res.noShowSuccessPolicyAmount.getText().replace("$ ", "");
			String header = res.CP_Reservation_NoShowSuccess.getText().trim();
			assertEquals(header, NoShowSuccess, "Failed: To verify Success Header");
			test_steps.add("  Verified header of the payment popup: <b>" + NoShowSuccess + "</b>");
			reslogger.info("  Verified header of the  payment popup :" + NoShowSuccess);

			// Verified Success-Date
			// === For check-in/cancel it takes current day as updated so
			// validating with current day
			String date = Utility.getCurrentDate("MM/dd/yyyy");
			// date = Utility.parseDate(date, "dd/MM/yyyy", "MM/dd/yyyy");
			String dateDisplayed = res.NoShowSuccess_Date.getText();
			assertEquals(dateDisplayed, date, "Failed: To verify  Success Page Date");
			test_steps.add("  Verified Date of  : <b>" + date + "</b>");
			reslogger.info("  Verified Date of : " + date);

			String typeDisplayed = res.NoShowSuccess_Type.getText().trim();
			assertEquals(typeDisplayed, Type, "Failed: To verify  Success Page Type");
			test_steps.add("  Verified payment type : <b>" + Type + "</b>");
			reslogger.info(" Verified  payment type : " + Type);

			// Verified Success-Payment Method
			String paymentMethodDisplayed = res.CP_Reservation_NoShowSuccessPaymentMethod.getText().trim();
			assertEquals(paymentMethodDisplayed, PaymentMethod, "Failed: To verify Success Page Payment Method");
			test_steps.add("  Verified Payment Method: <b>" + PaymentMethod + "</b>");
			reslogger.info("  Verified Payment Method: " + PaymentMethod);

			// Verified Success -Status
			String statusDisplayed = res.CP_Reservation_NoShowSuccessStatus.getText().trim();
			assertEquals(statusDisplayed, Status, "Failed: To verify  Success Page Status ");
			test_steps.add("  Verified Status of payment :<b> " + Status + "</b>");
			reslogger.info(" Verified Status  of payment : " + Status);

		} catch (Exception e) {
			Utility.app_logs.info(e);
		}
	}

	public ArrayList<String> verifyNoShowPaymentPopUp(WebDriver driver, ArrayList<String> test_steps, String title,
			String expiryDate, String nameOnCard, String cardNo, String paymentMethod, String type, String amount) {

		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> details = new ArrayList<>();
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle), driver);
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);

		String titleDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText();
		assertEquals(titleDisplayed, title, "Failed: To verify Payment Page Title");
		test_steps.add("Verified Payment Page Title :<b> " + title + "</b>");

		String amountDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText()
				.trim();
		if (amountDisplayed.equals(amount)) {
			assertEquals(amountDisplayed, amount, "Faild to verify calculated amount");
			test_steps.add("Successfull verified amount as : <b>" + amountDisplayed + "</b>");
		} else {
			test_steps.add("Existing issue in CP: Convert WCF Service to in-process calls - PolicyService"
					+ "<br/><a href='https://innroad.atlassian.net/browse/REF-62'>" + "Verified : REF-62</a><br/>");
			reslogger.info("Existing issue in CP: Convert WCF Service to in-process calls - PolicyService"
					+ "<br/><a href='https://innroad.atlassian.net/browse/REF-62'>" + "Verified : REF-62</a><br/>");
			assertEquals(amountDisplayed, amount, "Faild to verify calculated amount");
		}
		String balanceDisplayed = reservation.NoShowCancelPaymentPopup_Balance.getText().replace("$ ", "");
		assertEquals(balanceDisplayed, amount, "Faild to verify calculated amount");
		test_steps.add("Successfull verified balance as : <b>" + balanceDisplayed + "</b>");

		WebElement paymentElement = driver.findElement(
				By.xpath("//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + paymentMethod + "']"));
		String paymentMethodDisplayed = paymentElement.getText().trim();
		assertEquals(paymentMethodDisplayed, paymentMethod, "Failed: To verify Payment Method");
		test_steps.add("Successfull verified Payment Method:<b> " + paymentMethodDisplayed + "</b> ");
		reslogger.info("Successfull verified Payment Method: " + paymentMethodDisplayed);

		String currentdate = Utility.getCurrentDate("MM/dd/yyyy");
		String noShowDate = reservation.NoShowPaymentPopup_Date.getAttribute("value");
		assertEquals(noShowDate, currentdate, "Failed: To verify Account Details");
		test_steps.add("Successfull verified No Show date as : <b>" + noShowDate + "</b>");
		reslogger.info("Successfull verified checkOutDate :" + noShowDate);

		String cardNoDisplayed = ((String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_CardNumber)).trim();
		assertEquals(cardNoDisplayed, cardNo, "Failed: To verify Card Number");
		test_steps.add("Successfull verified Card Number as : <b>" + cardNoDisplayed + "</b>");
		reslogger.info(" Verified Card Number");

		String nameOnCardDisplayed = (String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_NameOnCard);
		assertEquals(nameOnCardDisplayed, nameOnCard, "Failed: To verify Name on Card ");
		test_steps.add("Successfull verified Name on Card as : <b>" + nameOnCard + "</b>");
		reslogger.info(" Verified Name on Card");

		String expiryDateDisplayed = (String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_Expiry);
		assertEquals(expiryDateDisplayed, expiryDate, "Failed: To verify Expiry Date ");
		test_steps.add("Successfull verified Expiry Date as : <b>" + expiryDateDisplayed + "</b>");
		reslogger.info(" Verified Expiry Date");

		String buttonDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().trim();
		String buttonExp = "PAY $ " + amount;
		// buttonDisplayed = buttonDisplayed.replace("$", "").replace("PAY",
		// "").trim();
		assertEquals(buttonDisplayed, buttonExp, "Failed: To verify Payment Type");
		test_steps.add("Successfull verified button displayed as : <b>" + buttonDisplayed + "</b>");
		reslogger.info(" Verified button displayed  Amount:<b> " + buttonDisplayed + "</b>");

		clickOnPayButtonOnPaymentPopup(driver, test_steps);
		return test_steps;
	}

	public ArrayList<String> verifySecondaryUserFolioDetails(WebDriver driver, String roomNumber1, String roomClass,
			ArrayList<String> test_steps) {

		Folio folio = new Folio();
		driver.findElement(
				By.xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]")).click();
		WebElement roomsToSelect = driver.findElement(By.xpath(
				"(//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]/..//a/span[@class='text'])[2]"));
		roomsToSelect.click();
		double folioRoomChargeLineItems = 0.00;
		String noShowFee = null;
		/*
		 * List<WebElement> rooms = driver.findElements(By.
		 * xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]/..//a/span[@class='text']"
		 * )); Utility.app_logs.info(rooms.size()); for (WebElement roomsToSelect :
		 * rooms) { driver.findElement(By.
		 * xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]"
		 * )).click(); Wait.wait1Second(); roomsToSelect.click();
		 */
		List<WebElement> roomChargesAmount = driver
				.findElements(By.xpath("//span[contains(text(), 'Room Charge')]/../..//td[@class='lineitem-amount']"));
		if (roomChargesAmount.size() != 0) {
			for (WebElement getRoomCharges : roomChargesAmount) {
				double roomCharge = Double.parseDouble(getRoomCharges.getText().replace("$ ", ""));
				folioRoomChargeLineItems = folioRoomChargeLineItems + roomCharge;
				Utility.app_logs.info(folioRoomChargeLineItems);
			}
		}
		noShowFee = folio.getNoShowFeeAmount(driver, "No Show Fee", test_steps);
		folio.clikOnLineItemDescription(driver, "No Show Fee", test_steps);
		folio.verifyLineItemDetails(driver, roomNumber1, roomClass, noShowFee, test_steps);
		return test_steps;
	}

	public void clickOnEditMarketingInfoIcon(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.EditMarketingInfoIcon);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EditMarketingInfoIcon), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.EditMarketingInfoIcon), driver);
		Utility.ScrollToElement_NoWait(element.EditMarketingInfoIcon, driver);
		element.EditMarketingInfoIcon.click();
	}

	public void clickOnSaveMarketingInfoIcon(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.SaveMarketingInfo);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.SaveMarketingInfo), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.SaveMarketingInfo), driver);
		element.SaveMarketingInfo.click();
		verifySpinerLoading(driver);

	}

	public ArrayList<String> splitRoomCheckbox(WebDriver driver, boolean isChecked) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_SplitCheckBox);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_SplitCheckBox), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_SplitCheckBox), driver);
		Utility.ScrollToElement(element.CP_NewReservation_SplitCheckBox, driver);
		if (isChecked) {
			if (element.CP_NewReservation_SplitCheckBox.isSelected()) {
				testSteps.add("Verified 'Split-Room Reservation' checkbox already checked");
			} else {
				element.CP_NewReservation_SplitCheckBox.click();
				testSteps.add("Verified 'Split-Room Reservation' checkbox is checked");
			}
		} else {
			if (element.CP_NewReservation_SplitCheckBox.isSelected()) {
				element.CP_NewReservation_SplitCheckBox.click();
				testSteps.add("Verified 'Split-Room Reservation' checkbox is unchecked");
			} else {
				testSteps.add("Verified 'Split-Room Reservation' checkbox already unchecked");
			}
		}
		return testSteps;
	}

	// Created By adhnan
	public ArrayList<String> selectSplitRoom(WebDriver driver, String roomClass, int roomNumber, int RoomIndex)
			throws InterruptedException {

		Elements_CPReservation elementsReservation = new Elements_CPReservation(driver);
		ArrayList<String> steps = new ArrayList<>();
		spinerLoadingatRoomSelection(driver);

		String SplitRoomTabxpath = "//div[contains(@class,'split-parts')]/div[" + RoomIndex + "]";
		Wait.WaitForElement(driver, SplitRoomTabxpath);
		Wait.waitForElementToBeVisibile(By.xpath(SplitRoomTabxpath), driver);
		Wait.waitForElementToBeClickable(By.xpath(SplitRoomTabxpath), driver);
		WebElement SplitRoomTab = driver.findElement(By.xpath(SplitRoomTabxpath));
		Utility.ScrollToElement(SplitRoomTab, driver);
		SplitRoomTab.click();
		reslogger.info("after click");

		assertTrue(SplitRoomTab.getAttribute("class").contains("active"),
				"Failed: Split Room tab " + RoomIndex + " is not opened");
		steps.add("Split Room Tab '" + RoomIndex + "' is opened");
		reslogger.info("after click");

		String expand = "//section[@class='ir-roomClassDetails manual-override']//span[text()='" + roomClass
				+ "']//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
		reslogger.info(expand);
		// Wait.WaitForElement(driver, expand);
		WebElement selectRoomNumber = driver.findElement(By.xpath(expand));
		Utility.ScrollToElement(selectRoomNumber, driver);
		selectRoomNumber.click();
		reslogger.info("after click o room selector");

		String selectedRoomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[text()='" + roomClass
				+ "']//..//..//../following-sibling::div//div//select//following-sibling::div//ul/li[" + roomNumber
				+ "]/a/span";
		Wait.WaitForElement(driver, selectedRoomNumber);
		driver.findElement(By.xpath(selectedRoomNumber)).click();
		String Selectxpath = "//section[@class='ir-roomClassDetails manual-override']//span[text()='" + roomClass
				+ "']//ancestor::div[contains(@data-bind,'expandRoomClassRateInfo')]//span[contains(@data-bind,'SELECT')]";
		Wait.WaitForElement(driver, Selectxpath);
		WebElement select = driver.findElement(By.xpath(Selectxpath));
		Utility.ScrollToElement(select, driver);
		select.click();
		steps.add("Click Select button");
		reslogger.info("Click Select button");
		String classvalue = select.getAttribute("class");
		for (int i = 0; i < 5; i++) {
			if (classvalue.contains("selected")) {
				break;
			} else {
				Wait.wait2Second();
				classvalue = select.getAttribute("class");
			}
		}
		assertTrue(classvalue.contains("selected"), "Failed: Room Class not selected");
		String RoomNO = driver.findElement(By.xpath(expand)).getAttribute("title");
		steps.add("Select Room as '" + roomClass + " : " + RoomNO + "'");
		reslogger.info("Select Room as '" + roomClass + " : " + RoomNO + "'");
		return steps;

	}

	public String getSplitRoomNumber(WebDriver driver, String IsAssign, int index) {
		String room = "(//span[text()='ROOM:']//following-sibling::span)[" + index + "]";
		Wait.WaitForElement(driver, room);
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(room)), driver);
		room = driver.findElement(By.xpath(room)).getText();

		if (IsAssign.equalsIgnoreCase("No")) {
			if (room.equalsIgnoreCase("Unassigned")) {
				test_steps.add("Room Number is : Unassigned");
				reslogger.info("Room Number is : Unassigned");
			}
		} else {
			test_steps.add("Room Number is : " + room);
			reslogger.info("Room Number is : " + room);
		}
		return room;
	}

	public void spinerLoadingatRoomSelection(WebDriver driver) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		try {
			int count = 0;
			while (true) {
				if (!res.spinerLoadingatRoomSelection.isDisplayed()) {
					break;
				}
				count++;
				Wait.wait1Second();

			}
		} catch (Exception e) {
			reslogger.info("In catch module loading");
		}

		reslogger.info("Waited to loading symbol");

	}

	public void moveToAddARoom(WebDriver driver) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddRoom);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_AddRoom), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_AddRoom), driver);
		Utility.ScrollToElement_NoWait(res.CP_NewReservation_AddRoom, driver);

	}

	public void enterDate(WebDriver driver, String dateType, String Date, String roomIndex)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String Datexpath = "(//input[contains(@data-bind,'" + dateType + "Date')])[" + roomIndex + "]";
		Wait.explicit_wait_xpath(Datexpath, driver);
		WebElement DateInput = driver.findElement(By.xpath(Datexpath));
		Wait.explicit_wait_visibilityof_webelement(DateInput, driver);
		Utility.ScrollToElement(DateInput, driver);
		DateInput.sendKeys(Keys.chord(Keys.CONTROL, "a"), Date);
		assertEquals(DateInput.getAttribute("value"), Date, "Failed: Entered Date missmatched");
	}

	public void enterMailingAddressOnUncheckedCreateGuestProfile(WebDriver driver, ArrayList<String> test_steps,
			String Salutation, String GuestFirstName, String GuestLastName, String IsGuesProfile)
			throws InterruptedException {
		enter_GuestName(driver, test_steps, Salutation, GuestFirstName, GuestLastName);
		uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
	}

	public String getBalanceHeader(WebDriver driver) {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		return Utility.convertDollarToNormalAmount(driver, elements.tripBalanceAmountAtTop.getText());
	}

	public String getTripTotalHeader(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.tripTotalAmountAtTop.getText());

	}

	public String getRoomCharge(WebDriver driver, ArrayList<String> test_steps) {
		String Balance = driver
				.findElement(By
						.xpath("//label[contains(text(),'Room Charges: ')]/following-sibling::span[@class='pamt']/span[@class='pamt']"))
				.getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("Room Charges : <b>" + Balance + "</b>");
		reslogger.info("Room Charges : " + Balance);
		return Balance;
	}

	public String getTax(WebDriver driver, ArrayList<String> test_steps) {
		String Balance = driver
				.findElement(By
						.xpath("//label[contains(text(),'Taxes & Service Charges:')]/following-sibling::span/span[@class='pamt']"))
				.getText();
		Balance = Balance.replace("$", "");
		test_steps.add("Taxes & Service Charges : " + Balance);
		reslogger.info("Taxes & Service Charges : " + Balance);
		return Balance;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <selectRoom> ' Description: <method will select roomclass>
	 * ' Input parameters: <WebDriver driver,String RoomClass,String IsAssign> '
	 * Return value: <ArrayList<String>> ' Created By: <Jamal Nasir> ' Created
	 * On: <05/19/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> selectRoom(WebDriver driver, String RoomClass, String IsAssign)
			throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				reslogger.info(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				Random random = new Random();
				int randomNumber = random.nextInt(count1 - 1) + 1;
				reslogger.info("count : " + count1);
				reslogger.info("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <VeriGuestProfileCheckox> ' Description: <Verify create
	 * guest profile checkbox is checked or not> ' Input parameters: <boolean
	 * value> ' Return value: <array list> ' Created By: <Farhan Ghaffar> '
	 * Created On: <04/17/2020>
	 * 
	 * ' Modified By | Description of Modification:
	 * ------------------------------------------ <mm/dd/yyyy>:<Developer name>:
	 * 1.Step modified 2.Step modified
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> VeriGuestProfileCheckox(WebDriver driver, boolean isChecked) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckboxGuestProfile);
		Wait.explicit_wait_visibilityof_webelement(element.CheckboxGuestProfile, driver);
		Wait.explicit_wait_elementToBeClickable(element.CheckboxGuestProfile, driver);
		Utility.ScrollToElement(element.CheckboxGuestProfile, driver);
		if (isChecked) {
			if (element.CheckboxGuestProfile.isSelected()) {
				test_step.add("Verified create guest profile checkbox already checked");
			} else {
				element.CheckboxGuestProfile.click();
				test_step.add("Verified create guest profile checkbox is checked");
			}
		} else {
			if (!element.CheckboxGuestProfile.isSelected()) {
				element.CheckboxGuestProfile.click();
				test_step.add("Verified create guest profile checkbox is  unchecked");
			} else {
				test_step.add("Verified create guest profile checkbox already unchecked");
			}
		}

		return test_step;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <verifyGuestReportLabelsValidations> ' Description:
	 * <Method will verify system report labels is displaying or not> ' Input
	 * parameters: <WebDriver driver> ' Return value: <ArrayList<String>> '
	 * Created By: <Jamal Nasir> ' Created On: <05/22/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> verifyGuestReportLabelsValidations(WebDriver driver) throws InterruptedException {
		ArrayList<String> test_steps = new ArrayList<>();
		test_steps.add("========== Guest Reports labels verification ==========");
		reslogger.info("========== Guest Reports labels verification ==========");
		Elements_CPReservation reservationPage = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.reservationReports);
		reservationPage.reservationReports.click();

		Wait.WaitForElement(driver, OR_Reservation.guestStatement);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.guestStatement), driver);
		if (reservationPage.guestStatement.isDisplayed()) {
			test_steps.add("Guest Statement label displayed");
			reslogger.info("Guest Statement label displayed");
		} else {
			test_steps.add("Guest Statement label not displayed");
			reslogger.info("Guest Statement label not displayed");
		}

		if (reservationPage.guestStatementWithTaxBreakdown.isDisplayed()) {
			test_steps.add("Guest Statement with Tax breakdown label displayed");
			reslogger.info("Guest Statement with Tax breakdown label displayed");
		} else {
			test_steps.add("Guest Statement with Tax breakdown label not displayed");
			reslogger.info("Guest Statement with Tax breakdown label not displayed");
		}

		if (reservationPage.guestRegistration.isDisplayed()) {
			test_steps.add("Guest Registration label displayed");
			reslogger.info("Guest Registration label displayed");
		} else {
			test_steps.add("Guest Registration label not displayed");
			reslogger.info("Guest Registration label not displayed");
		}

		if (reservationPage.guestRegistartiontaxbreakdown.isDisplayed()) {
			test_steps.add("Guest Registration with Tax breakdown label displayed");
			reslogger.info("Guest Registration with Tax breakdown label displayed");
		} else {
			test_steps.add("Guest Registration with Tax breakdown label not displayed");
			reslogger.info("Guest Registration with Tax breakdown label not displayed");
		}
		reservationPage.reservationReports.click();
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <clickGuestStatementWithTaxBreakdown> ' Description: <This
	 * method will click Guest Statement with Tax breakdown report button> '
	 * Input parameters: <WebDriver driver> ' Return value: <ArrayList<String>>
	 * ' Created By: <Jamal Nasir> ' Created On: <05/22/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickGuestStatementWithTaxBreakdown(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.reservationReports);
		res.reservationReports.click();
		test_steps.add("Click on reports");
		reslogger.info("Click on reports");

		Wait.WaitForElement(driver, OR_Reservation.guestStatementWithTaxBreakdown);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.guestStatementWithTaxBreakdown), driver);
		res.guestStatementWithTaxBreakdown.click();

		test_steps.add("Click on Guest Statement with Tax breakdown button");
		reslogger.info("Click on Guest Statement with Tax breakdown button");
		Wait.wait5Second();
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <clickGuestRegistartiontaxbreakdown> ' Description: <This
	 * method will click Guest Registration with Tax breakdown report button> '
	 * Input parameters: <WebDriver driver> ' Return value: <ArrayList<String>>
	 * ' Created By: <Jamal Nasir> ' Created On: <05/22/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickGuestRegistartionTaxBreakdown(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.reservationReports);
		res.reservationReports.click();
		test_steps.add("Click on reports");
		reslogger.info("Click on reports");

		Wait.WaitForElement(driver, OR_Reservation.guestRegistartiontaxbreakdown);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.guestRegistartiontaxbreakdown), driver);
		res.guestRegistartiontaxbreakdown.click();
		test_steps.add("Click on Guest Registration with Tax breakdown button");
		reslogger.info("Click on Guest Registration with Tax breakdown button");
		Wait.wait5Second();

		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <replaceCurrency> ' Description: <This method will return
	 * string withOut currency symbol> ' Input parameters: <String str> ' Return
	 * value: <String> ' Created By: <Jamal Nasir> ' Created On: <05/22/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String replaceCurrency(String str) {
		str = str.replace("$", "");
		str = str.trim();
		reslogger.info("str : " + str);

		return str;
	}

	public void verifyNoteForSingleReservation(WebDriver driver, ArrayList<String> test_steps, String type,
			String subject, String desc, Date date, String policyType) throws InterruptedException {
		int CD = date.getDate();
		String day = String.valueOf(CD);
		reslogger.info("Day: " + day);

		if (policyType.equals("Cancel")) {

			String path = "//notes-info[contains(@params,'reservationDetail')]//tr/td[contains(@data-bind,'type')][(text()='"
					+ type + "')]/following-sibling::td[contains(@data-bind,'subject')][(text()='" + subject + "')] "
					+ "/following-sibling::td[contains(@data-bind,'details')][(text()='" + desc + "')]"
					+ "//following-sibling::td[contains(@data-bind,'updatedOn')][contains(text(),'" + day + "')]";

			reslogger.info(path);
			WebElement element = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(element, driver);
			assertTrue(element.isDisplayed(), "Failed: To verify Cancellation Notes");
			test_steps.add("Verified Notes <br>" + "TYPE: <b>" + type + " </b> SUBJECT:  <b>" + subject
					+ " </b> DESCRIPTION:  <b>" + desc + " </b> UPDATED ON:  <b>" + date + " </b>");
			reslogger.info("Verified Notes TYPE: " + type + " SUBJECT: " + subject + " DESCRIPTION: " + desc
					+ " UPDATED ON: " + date);

		} else if (policyType.equals("No Show")) {
			String path = "//notes-info[contains(@params,'reservationDetail')]//tr/td[contains(@data-bind,'type')][(text()='"
					+ type + "')]/following-sibling::td[contains(@data-bind,'subject')][(text()='" + subject + "')]"
					+ "//following-sibling::td[contains(@data-bind,'updatedOn')][contains(text(),'" + day + "')]";

			reslogger.info(path);
			WebElement element = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(element, driver);
			assertTrue(element.isDisplayed(), "Failed: To verify No Show Notes");
			test_steps.add("Verified Notes <br>" + "TYPE: <b>" + type + "</b> SUBJECT: <b>" + subject
					+ "</b> UPDATED ON: <b>" + date + "</b>");
			reslogger.info("Verified Notes TYPE: " + type + " SUBJECT: " + subject + " DESCRIPTION: " + desc
					+ " UPDATED ON: " + date);

		}
	}

	public void verifyStayInfoRoomNo(WebDriver driver, ArrayList<String> test_steps, List<String> roomNos) {
		String path = "//div[contains(text(),'Stay')]/..//div[@class='ir-flex-grow ir-roomInfo']//span[contains(@data-bind,'roomNumber')]";
		List<WebElement> roomNo = driver.findElements(By.xpath(path));
		for (int i = 0; i < roomNo.size(); i++) {
			assertEquals(roomNo.get(i).getText().toLowerCase().trim(), roomNos.get(i).toLowerCase().trim(),
					"Failed: To verify Stay Info Room Nos");
			test_steps.add("Verified Stay Info Room Number <b>" + roomNos.get(i) + "</b>");
			reslogger.info("Verified Stay Info Room Number " + roomNos.get(i));
		}

	}

	public void verifyHistoryForChangedToUnAssigned(WebDriver driver, ArrayList<String> testSteps, String roomNo,
			String roomClass) {
		String changedRoom = "Changed room assignment from " + roomNo + " to " + roomClass + "";
		String path = "//span[contains(text(),'" + changedRoom + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Changed Room Assignment");
		testSteps.add("'History Tab' Verified <b>Changed room assignment from " + roomNo + " to </b>" + roomClass);
		reslogger.info("'History Tab' Verified  Changed room assignment from " + roomNo + " to " + roomClass);

	}

	public void commonMethodToverifyRoomsOnHistoryTab(WebDriver driver, ArrayList<String> test_steps, String abb,
			String RoomClassName)

			throws InterruptedException {
		String path = "//div[contains(@data-bind,'hasHistory')]//td/span[contains(@data-bind,'data.room')][contains(text(),'"
				+ abb + ": " + RoomClassName + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		/*
		 * assertEquals(element.getText().toLowerCase().trim(),(RoomClassName.
		 * toLowerCase().trim()), "Failed: To verify History Tab  Room");
		 */
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Room");
		test_steps.add("'History Tab' Verified Room: <b>" + abb + ": " + RoomClassName + "</b>");
		reslogger.info("'History Tab' Verified Room : " + abb + ": " + RoomClassName);
	}

	public void checkInProcess(WebDriver driver, ArrayList test_steps) throws InterruptedException {
        verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		if (res.CP_Reservation_ConfirmCheckIn_Button.isEnabled()) {
			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_ConfirmCheckIn_Button);
			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckIn_Button, driver);
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			test_steps.add("Clicking on  Confirm Check-In Button");
			reslogger.info("Clicking on Confirm  Check-In Button");
		} else if (res.CP_Reservation_ConfirmCheckInPayment_Button.isEnabled()) {
			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_ConfirmCheckInPayment_Button);
			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckInPayment_Button, driver);
			res.CP_Reservation_ConfirmCheckInPayment_Button.click();
			test_steps.add("Clicking on  Proceed to Check-In Payment Button");
			reslogger.info("Clicking on Proceed to Check-In Payment Button");
		}
		verifySpinerLoading(driver);
	}

	public void AddTask(WebDriver driver, ArrayList test_steps, String IsTask, String TaskCategory, String TaskType,
			String TaskDetails, String TaskRemarks, String TaskDueon, String TaskAssignee, String TaskStatus)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddTask);
		test_steps.add("******************* Adding Task **********************");
		reslogger.info("******************* Adding Task **********************");
		if (IsTask.equalsIgnoreCase("Yes")) {
			Utility.ScrollToElement(res.CP_AddTask, driver);
			res.CP_AddTask.click();
			test_steps.add("Click on Add Task");
			reslogger.info("Click on Add Task");

			String taskCategoryArrow = "//label[text()='Category']/..//button";
			Wait.WaitForElement(driver, taskCategoryArrow);
			driver.findElement(By.xpath(taskCategoryArrow)).click();

			String taskCategory = "//label[text()='Category']/..//div/ul//span[text()='" + TaskCategory.trim() + "']";
			Wait.WaitForElement(driver, taskCategory);
			driver.findElement(By.xpath(taskCategory)).click();
			test_steps.add("Select Task Category : " + TaskCategory);
			reslogger.info("Select Task Category : " + TaskCategory);
			Wait.wait2Second();

			String taskType = "//label[text()='Type']//..//div//button";
			reslogger.info(taskType);
			Wait.WaitForElement(driver, taskType);
			driver.findElement(By.xpath(taskType)).click();
			Wait.wait2Second();
			taskType = "//label[text()='Type']//..//div/ul//span[text()='" + TaskType.trim() + "']";
			Wait.WaitForElement(driver, taskType);
			driver.findElement(By.xpath(taskType)).click();
			test_steps.add("Select Task Type : " + TaskType);
			reslogger.info("Select Task Type : " + TaskType);

			String taskDetails = "//label[text()='Details']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, taskDetails);
			driver.findElement(By.xpath(taskDetails)).sendKeys(TaskDetails);
			test_steps.add("Select Task Details : " + TaskDetails);
			reslogger.info("Select Task Details : " + TaskDetails);

			String taskRemarks = "//label[text()='Remarks']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, taskRemarks);
			driver.findElement(By.xpath(taskRemarks)).sendKeys(TaskRemarks);
			test_steps.add("Enter Task Remarks : " + TaskRemarks);
			reslogger.info("Enter Task Remarks : " + TaskRemarks);

			if (!TaskAssignee.isEmpty()) {
				String taskAssignee = "//label[text()='Assignee']/..//input";
				WebElement elementAssigneeInput = driver.findElement(By.xpath(taskAssignee));

				// elementAssigneeInput.sendKeys(TaskAssignee);
				TaskAssignee = "auto";
				String[] splitString = TaskAssignee.split(" ");
				TaskAssignee = splitString[0];
				String noDataFound = "//label[text()='Assignee']//..//div//div";
				for (int i = 0; i < 5; i++) {
					elementAssigneeInput.click();
					elementAssigneeInput.clear();
					for (int j = 0; j < TaskAssignee.length(); j++) {
						elementAssigneeInput.sendKeys(String.valueOf(TaskAssignee.charAt(j)));
						Wait.wait1Second();
					}
					try {
						reslogger.info("in try");
						Wait.wait1Second();
						String taskassgin = "(//label[text()='Assignee']/..//div//ul//li//div/span)[2]";
						// Wait.WaitForElement(driver, taskassgin);
						WebElement elementTaskAssign = driver.findElement(By.xpath(taskassgin));
						elementTaskAssign.click();
						break;
					} catch (Exception e) {
						reslogger.info("in catch");
					}

				}

			}

			String taskStatus = "(//label[text()='Status']/..//button)[2]";
			Wait.WaitForElement(driver, taskStatus);
			driver.findElement(By.xpath(taskStatus)).click();
			String status = "(//label[text()='Status']/..//button)[2]/following-sibling::div//li//span[text()='"
					+ TaskStatus.trim() + "']";
			Wait.WaitForElement(driver, status);
			driver.findElement(By.xpath(status)).click();
			test_steps.add("Select Task Status : " + TaskStatus);
			reslogger.info("Select Task Status : " + TaskStatus);

			String save = "//h4[text()='Add Task']/../..//button[text()='Save']";
			Wait.WaitForElement(driver, save);
			driver.findElement(By.xpath(save)).click();
			test_steps.add("Click on Save");
			reslogger.info("Click on Save");

		}
	}

	public ArrayList<String> CheckInDate(WebDriver driver, int Days) throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckinDate);
		Wait.explicit_wait_visibilityof_webelement(elements.EnterCheckinDate, driver);
		Wait.explicit_wait_elementToBeClickable(elements.EnterCheckinDate, driver);
		elements.EnterCheckinDate.click();
		elements.EnterCheckinDate.clear();
		String checkInDate = ESTTimeZone.DateFormateForLineItem(Days);
		elements.EnterCheckinDate.sendKeys(checkInDate);
		test_steps.add("CheckIn date: " + checkInDate);
		return test_steps;
	}

	public ArrayList<String> CheckOutDate(WebDriver driver, int Days) throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckout);
		Wait.explicit_wait_visibilityof_webelement(elements.EnterCheckout, driver);
		Wait.explicit_wait_elementToBeClickable(elements.EnterCheckout, driver);
		elements.EnterCheckout.click();
		elements.EnterCheckout.clear();
		String checkInDate = ESTTimeZone.DateFormateForLineItem(Days);
		elements.EnterCheckout.sendKeys(checkInDate);
		test_steps.add("CheckIn date: " + checkInDate);
		return test_steps;

	}

	public void click_FindRooms(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_FindRooms);
		res.CP_NewReservation_FindRooms.click();
		test_steps.add("Clicking on FindRooms");
		reslogger.info("Clicking on FindRooms");
		int count = 0;
		while (true) {
			if (driver.findElement(By.xpath("//section[@class='ir-roomClassDetails manual-override']")).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
	}

	public void select_Room(WebDriver driver, ArrayList test_steps, String RoomClass, String IsAssign, String Account)
			throws InterruptedException {
		reslogger.info(RoomClass);
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";
		reslogger.info(room);
		Wait.WaitForElement(driver, room);

		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				reslogger.info(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				Random random = new Random();
				int randomNumber = random.nextInt(count1 - 1) + 1;
				reslogger.info("count : " + count1);
				reslogger.info("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			}

			/*String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();*/

	        String select = "//section[@class='ir-roomClassDetails manual-override']//span[text()='"
	                    + RoomClass + "']/../../../following-sibling::div//span[contains(text(),'SELECT')]";
	            if(driver.findElements(By.xpath(select)).size()>0) {
	            Wait.WaitForElement(driver, select);
	            driver.findElement(By.xpath(select)).click();
	            }else {
	                String selected="//section[@class='ir-roomClassDetails manual-override']//span[text()='"+RoomClass+"']/../../../following-sibling::div/div//span[contains(@data-bind,'SELECT')]/..";
	                Wait.WaitForElement(driver, selected);
	                driver.findElement(By.xpath(selected)).click();
	            }
			
			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}
			if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
				String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
				Wait.WaitForElement(driver, policy);
				driver.findElement(By.xpath(policy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");

				loading = "(//div[@class='ir-loader-in'])[2]";
				counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
	}

	public void click_Next(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeInvisibile(By.xpath("(//div[@class='ir-loader-in'])[2]"), driver);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Next), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_Next), driver);
		res.CP_NewReservation_Next.click();
		test_steps.add("Clicking on Next");
		reslogger.info("Clicking on Next");
//		int count = 0;
//		while (true) {
//			if (driver.findElement(By.xpath("//span[contains(text(),'Contact Info')]")).isDisplayed()) {
//				break;
//			} else if (count == 20) {
//				break;
//			} else {
//				count++;
//				Wait.wait2Second();
//			}
//		}
//		reslogger.info("Waited to loading symbol");
	}

	public void click_BookNow(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Book);
		res.CP_NewReservation_Book.click();
		test_steps.add("Click on Book Now");
		reslogger.info("Click on Book Now");
		String loading = "(//div[@class='ir-loader-in'])[2]";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 50) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
	}

	public String GetTaskCategoryImage(WebDriver driver, int index) throws InterruptedException {
		Elements_CPReservation elements_CPReservation = new Elements_CPReservation(driver);

		try {
			Utility.app_logs.info("in try");
			Wait.WaitForElement(driver, OR_Reservation.SpanTaskCategoryImage);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.SpanTaskCategoryImage), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.SpanTaskCategoryImage), driver);
			Utility.ScrollToElement_NoWait(elements_CPReservation.SpanTaskCategoryImage.get(index), driver);

		} catch (Exception e) {
			driver.navigate().refresh();
			Utility.app_logs.info("in catch");
			Wait.WaitForElement(driver, OR_Reservation.SpanTaskCategoryImage);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.SpanTaskCategoryImage), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.SpanTaskCategoryImage), driver);
			Utility.ScrollToElement_NoWait(elements_CPReservation.SpanTaskCategoryImage.get(index), driver);

		}
		return elements_CPReservation.SpanTaskCategoryImage.get(index).getAttribute("class");

	}

	public String GetTaskName(WebDriver driver, int index) throws InterruptedException {
		Elements_CPReservation elements_CPReservation = new Elements_CPReservation(driver);
		return elements_CPReservation.SpanTaskName.get(index).getText();

	}

	public String GetTaskDetail(WebDriver driver, int index) throws InterruptedException {
		Elements_CPReservation elements_CPReservation = new Elements_CPReservation(driver);
		return elements_CPReservation.SpanTaskDetails.get(index).getText();

	}

	public String GetTaskDueOn(WebDriver driver, int index) throws InterruptedException {
		Elements_CPReservation elements_CPReservation = new Elements_CPReservation(driver);
		return elements_CPReservation.SpanTaskDueOn.get(index).getText();

	}

	public String GetTaskStatus(WebDriver driver, int index) throws InterruptedException {
		Elements_CPReservation elements_CPReservation = new Elements_CPReservation(driver);
		return elements_CPReservation.SpanTaskStatus.get(index).getText();

	}

	public void verifyReservationStausOnBasicSearch(WebDriver driver, ArrayList<String> test_steps, String statusExp) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.resStatusAtBasicSearch), driver);
		String statusDisplayed = res.resStatusAtBasicSearch.getText().trim();
		assertEquals(statusDisplayed, statusExp, "Failed: To verify reservation status at basic search");
		test_steps.add("Verified reservation status at basic search is : <b>" + statusDisplayed + "</b>");
		reslogger.info("Verified reservation status at basic search is : <b>" + statusDisplayed + "</b>");
	}

	public void enablePostCancellationFee(WebDriver driver, ArrayList<String> test_steps, boolean postCancellationFee) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean postCancellationFeeSelected = res.cancelResPopupPostCancelFeeCheckBox.isSelected();
		if (postCancellationFee) {
			if (!(postCancellationFeeSelected)) {
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.cancelResPopupPostCancelFeeCheckBoxClick),
						driver);
				res.cancelResPopupPostCancelFeeCheckBoxClick.click();
				test_steps.add("Enabling Post Cancellation Fee check box");
			} else {
				test_steps.add("Post Cancellation Fee check box is already selected");
			}
		} else {
			if (postCancellationFeeSelected) {
				res.cancelResPopupPostCancelFeeCheckBoxClick.click();
				test_steps.add("Unselecting Post Cancellation Fee check box");
			} else {
				test_steps.add("Post Cancellation Fee check box is already unselected");
			}
		}
	}

	public void unsavedDataYesClick(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			boolean popupDisplayed = driver.findElements(By.xpath(OR_Reservation.unsavedDataDisplayed)).size() > 0;
			if (popupDisplayed) {
				res.unsavedDataPopupYesButton.click();
				test_steps.add("Clicking on yes button on unsaved data popup");
			} else {
				test_steps.add("Unsaved data popup is not displayed");
			}
		} catch (Exception e) {
			reslogger.info(e);
		}
	}

	public String get_TripSummaryPaidAmount(WebDriver driver, ArrayList test_steps) {
		String PaidBalance = driver
				.findElement(By
						.xpath("//span[text()='Summary']/../../..//div[contains(text(),'Paid')]/following-sibling::div"))
				.getText();
		PaidBalance = PaidBalance.replace("$ ", "");
		test_steps.add("Paid amount captured at trip summary is : <b>" + PaidBalance + "</b>");
		reslogger.info("Paid amount captured at trip summary is : " + PaidBalance);
		return PaidBalance;
	}

	public void verifyRoomChargesAtFolio(WebDriver driver, ArrayList<String> test_steps, String amount) {
		ArrayList<String> roomCharges = new ArrayList<>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		List<WebElement> roomChargesAmount = driver
				.findElements(By.xpath("//span[contains(text(), 'Room Charge')]/../..//td[@class='lineitem-amount']"));
		for (WebElement roomCharge : roomChargesAmount) {
			String roomChargeAtFolioLineItem = roomCharge.getText().replace("$ ", "");
			roomCharges.add(roomChargeAtFolioLineItem);
		}
		int i = 1;
		for (String roomChargesDisplayed : roomCharges) {
				assertEquals(roomChargesDisplayed, amount,
					"Failed - verify room charges at row " + i + " as : " + roomChargesDisplayed);
			test_steps.add("Successfully verified voided line items at row <b>" + i + "</b> as <b>"
					+ roomChargesDisplayed + "</b>");
			i++;
		}
	}

	public void verifyDepositPolicyDetailsAtPoliciesAndDisclaimers(WebDriver driver, ArrayList<String> test_steps,
			String policyName, String policyText) {
		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.depositPolicyCollapseIcon), driver);
			Utility.ScrollToViewElementINMiddle(driver, res.depositPolicyCollapseIcon);
			res.depositPolicyCollapseIcon.click();
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.depositPolicyNameAtDisclaimers), driver);
			String policyNameDisplayed = res.depositPolicyNameAtDisclaimers.getText();

			
			String policyNameAtToolTipDisplayed = res.depositPolicyToolTipTextAtDisclaimers.getAttribute("title");
			

			assertEquals(policyNameDisplayed, policyName, "Failed - Verify deposit policy name");
			test_steps.add("Successfully verified deposit policy name as <b>" + policyNameDisplayed + "</b>");
			reslogger.info("Successfully verified deposit policy name as <b>" + policyNameDisplayed + "</b>");


			/*assertEquals(policyTextDisplayed, policyText, "Failed - Verify deposit policy text");
			test_steps.add("Successfully verified deposit policy text as <b>" + policyTextDisplayed + "</b>");
			reslogger.info("Successfully verified deposit policy text as <b>" + policyTextDisplayed + "</b>");*/


			assertEquals(policyNameAtToolTipDisplayed, policyName, "Failed - Verify deposit policy name at tooltip");
			test_steps.add("Successfully verified deposit policy name at tooltip as <b>" + policyNameAtToolTipDisplayed
					+ "</b>");
			reslogger.info("Successfully verified deposit policy name at tooltip as <b>" + policyNameAtToolTipDisplayed
					+ "</b>");
			if(Utility.validateString(policyText))
			{
				String policyTextDisplayed = res.depositPolicyTextAtDisclaimers.getText();
				assertEquals(policyTextDisplayed, policyText, "Failed - Verify deposit policy text");
				test_steps.add("Successfully verified deposit policy text as <b>" + policyTextDisplayed + "</b>");
				reslogger.info("Successfully verified deposit policy text as <b>" + policyTextDisplayed + "</b>");

			}

		} catch (Exception e) {

		}
	}

	public void verifyTripSummaryPaidAmount(WebDriver driver, ArrayList<String> test_steps, String paidAmount) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		paidAmount = df.format(Double.parseDouble(paidAmount));
		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			String paidAmountDisplayed = get_TripSummaryPaidAmount(driver, test_steps);
			paidAmountDisplayed.trim();
			assertEquals(paidAmountDisplayed, paidAmount, "Failed - Verify paid amount at summary");
			test_steps.add("Successfully verified paid amount displayed at trip summary as <b>" + paidAmountDisplayed
					+ "</b>");
			reslogger.info("Successfully verified paid amount displayed at trip summary as <b>" + paidAmountDisplayed
					+ "</b>");

		} catch (Exception e) {

		}
	}

	public void verifyTripPaidAmountAtFolio(WebDriver driver, ArrayList<String> test_steps, String paidAmount) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		paidAmount = df.format(Double.parseDouble(paidAmount));

		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			String paidAmountDisplayed = get_Payments(driver, test_steps);
			assertEquals(paidAmountDisplayed, paidAmount, "Failed - Verify paid amount at summary");
			test_steps
					.add("Successfully verified paid amount displayed at folio as <b>" + paidAmountDisplayed + "</b>");
			reslogger
					.info("Successfully verified paid amount displayed at folio as <b>" + paidAmountDisplayed + "</b>");

		} catch (Exception e) {

		}
	}

	/*
	 * <<<<<<< HEAD
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: enterAdditionalEmailAndPhoneNumber ' Description: enter
	 * email and phone number in additional room guest details ' Input
	 * parameters: WebDriver,String,String ' Return value: ArrayList<String> '
	 * Created By: Adnan Ghaffar ' Created On: 28-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> enterAdditionalEmailAndPhoneNumber(WebDriver driver, String email, String phoneNumber)
			throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<String>();

		Wait.WaitForElement(driver, OR_Reservation.ADDITIONAL_EMAIL_ADDRESS);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ADDITIONAL_EMAIL_ADDRESS), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ADDITIONAL_EMAIL_ADDRESS), driver);
		Utility.ScrollToElement_NoWait(reservation.additionalEmailAddress, driver);
		reservation.additionalEmailAddress.clear();
		reservation.additionalEmailAddress.sendKeys(email);
		testSteps.add("Additional email : " + email);
		reslogger.info("Additional email : " + email);

		Wait.WaitForElement(driver, OR_Reservation.ADDITIONAL_PHONE_NUMBER);
		reservation.additionalPhoneNumber.clear();
		reservation.additionalPhoneNumber.sendKeys(phoneNumber);
		testSteps.add("Additional phone number : " + phoneNumber);
		reslogger.info("Additional phone number : " + phoneNumber);

		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getFristReservationRoomNumber> ' Description: <get the
	 * RoomNumber from frist reservation> ' Input parameters: < > ' Return
	 * value: <StringayList> ' Created By: <Reddy Ponnolu> ' Created On:
	 * <08/05/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getFristReservationRoomNumber(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.fristRoomNumberInReservation), driver);
		String fristRoomNumberInReservation = res.fristRoomNumberInReservation.getText();
		test_steps.add("frist RoomNumber InReservation ::" + fristRoomNumberInReservation);
		reslogger.info("frist RoomNumber InReservation ::" + fristRoomNumberInReservation);
		return fristRoomNumberInReservation;

	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: clickOnPrintButton ' Description: click on print button '
	 * Input parameters: WebDriver ' Return value: ArrayList<String> ' Created
	 * By: Adnan Ghaffar ' Created On: 28-05-2020
	 * 
	 * <<<<<<< HEAD ' Method Name: <getSecondReservationRoomNumber> '
	 * Description: <get the RoomNumber from Second reservation> ' Input
	 * parameters: < > ' Return value: <String> ' Created By: <Reddy Ponnolu> '
	 * Created On: <08/05/2020> ======= >>>>>>>
	 * b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public ArrayList<String> clickOnPrintButton(WebDriver driver) {
		ArrayList<String> testSteps = new ArrayList<String>();
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CLICK_ON_PRINT_BUTTON);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CLICK_ON_PRINT_BUTTON), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CLICK_ON_PRINT_BUTTON), driver);
		if (!element.radioButtonMailingDetails.isSelected()) {
			element.radioButtonMailingDetails.click();
			testSteps.add("Mailing details is selected");
		} else {
			testSteps.add("Mailing details is selected");
		}

		element.clickOnPrintButton.click();
		testSteps.add("Click print button");

		return testSteps;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: downloadPDFReport ' Description: download PDF Report of
	 * Guest Reservation ' Input parameters: WebDriver ' Return value: String '
	 * Created By: Adnan Ghaffar ' Created On: 11-05-2020
	 * 
	 * <<<<<<< HEAD ' Method Name: <getFristReservationRoomCharge> '
	 * Description: <get the RoomCharge from frist reservation> ' Input
	 * parameters: < > ' Return value: <String> ' Created By: <Reddy Ponnolu> '
	 * Created On: <08/05/2020> ======= >>>>>>>
	 * b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public void downloadPDFReport(WebDriver driver) throws InterruptedException, IOException {

		Wait.wait15Second();
		Wait.waitForElementToBeGone(driver,
				driver.findElement(By.xpath("//*[@id='bpjscontainer_23']/div[2]//div[@class='modules_loading']")),
				10000);
		ArrayList<String> tabs2 = new ArrayList<String>(driver.getWindowHandles());
		driver.switchTo().window(tabs2.get(1));
		Wait.wait2Second();
		Utility.app_logs.info("after swithc");

		new Select(driver.findElement(By.xpath("//*[@id='drpReportType']"))).selectByVisibleText("Download As Pdf");
		Wait.wait5Second();

		driver.findElement(By.xpath("//*[@id='btnImgDownload']")).click();
		Wait.wait5Second();

		driver.close();
		driver.switchTo().window(tabs2.get(0));

	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: clickOnPrintIcon ' Description: click on report print icon
	 * ' Input parameters:WebDriver ' Return value: void ' Created By: Adnan
	 * Ghaffar ' Created On: 11-05-2020
	 * 
	 * <<<<<<< HEAD ' Method Name: <getSecondReservationRoomCharge> '
	 * Description: <get the RoomCharge from second reservation> ' Input
	 * parameters: < > ' Return value: <String> ' Created By: <Reddy Ponnolu> '
	 * Created On: <08/05/2020> ======= >>>>>>>
	 * b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public ArrayList<String> clickOnPrintIcon(WebDriver driver) throws InterruptedException, IOException {
		ArrayList<String> testSteps = new ArrayList<String>();
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.PRINT_ICON);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.PRINT_ICON), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.PRINT_ICON), driver);
		element.printIcon.click();
		testSteps.add("Click on print icon");

		return testSteps;

	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * <<<<<<< HEAD ########################
	 *
	 * ' Method Name: <getRoomSelectedFromTapeChart> ' Description: <Get the
	 * reservation Room number which is created from the tape chart> ' Input
	 * parameters: <WebDriver , ArrayList> ' Return value: <String> ' Created
	 * By: <Adhnan Ghaffar> ' Created On: <05/11/2020> ======= ####
	 * ################
	 * 
	 * ' Method Name: clickOnAdvanceSearch ' Description: click on advanced '
	 * Input parameters: WebDriver ' Return value: String ' Created By: Adnan
	 * Ghaffar ' Created On: 28-05-2020
	 * 
	 * >>>>>>> b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public ArrayList<String> clickOnAdvance(WebDriver driver) throws InterruptedException {
		ArrayList<String> testSteps = new ArrayList<String>();
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CLICK_ON_ADVANCE_SEARCH);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CLICK_ON_ADVANCE_SEARCH), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CLICK_ON_ADVANCE_SEARCH), driver);
		element.clickOnAdvanceSearch.click();
		testSteps.add("Click on advanced");

		return testSteps;

	}
	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getGuestInfoText ' Description: get guest Info text '
	 * Input parameters: WebDriver ' Return value: String ' Created By: Adnan
	 * Ghaffar ' Created On: 28-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public String getGuestInfoText(WebDriver driver) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GET_GUEST_INFO_TEXT);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GET_GUEST_INFO_TEXT), driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GET_GUEST_INFO_TEXT), driver);
		String guestInfo = element.getGuestInfoText.getText();

		return guestInfo;

	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getReservationInfoText ' Description: get reservation Info
	 * text ' Input parameters: WebDriver ' Return value: String ' Created By:
	 * Adnan Ghaffar ' Created On: 28-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public String getReservationInfoText(WebDriver driver) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GET_RESERVATION_INFO_TEXT);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GET_RESERVATION_INFO_TEXT), driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GET_RESERVATION_INFO_TEXT), driver);
		String guestInfo = element.getReservationInfoText.getText();

		return guestInfo;

	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getMarketingInfoText ' Description: get Marketing Info
	 * text ' Input parameters: WebDriver ' Return value: String ' Created By:
	 * Adnan Ghaffar ' Created On: 28-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public String getMarketingInfoText(WebDriver driver) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GET_MARKETING_INFO_TEXT);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GET_MARKETING_INFO_TEXT), driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GET_MARKETING_INFO_TEXT), driver);
		String guestInfo = element.getMarketingInfoText.getText();

		return guestInfo;

	}

	public String verifyEmailPDFDetails(String folder, ArrayList<String> documentfields, ArrayList<String> test_steps)
			throws IOException {
		File getFile = Utility.getLatestFilefromDir(System.getProperty("user.dir") + File.separator + "externalFiles"
				+ File.separator + "downloadFiles" + File.separator + folder + File.separator);
		reslogger.info(getFile.getAbsolutePath());
		reslogger.info(getFile.getName());
		PDDocument document = PDDocument.load(getFile);
		document.getClass();
		String pdfFileInText = null;
		if (!document.isEncrypted()) {
			PDFTextStripperByArea stripper = new PDFTextStripperByArea();
			stripper.setSortByPosition(true);
			PDFTextStripper tStripper = new PDFTextStripper();
			pdfFileInText = tStripper.getText(document);
			String lines[] = pdfFileInText.split("\\n");
			boolean flag1 = true;
			for (String string : documentfields) {
				boolean propertyFound = false;
				for (String line : lines) {
					if (string.equalsIgnoreCase(line.trim())) {
						test_steps.add("Verified property details (" + string + ") in Guest Statement Report");
						reslogger.info("Verified propertyDetails  (" + string + ") in Guest Statement Report");
						propertyFound = true;
						break;
					}
				}
				if (!propertyFound) {
					test_steps.add("Property details for (" + string + ") not found in Guest Statement Report");
					reslogger.info("Property details for (" + string + ") not in Guest Statement Report");
				}
			}
			document.close();

			if (getFile.delete()) {
				reslogger.info("File deleted successfully");
			} else {
				reslogger.info("Failed to delete the file");
			}
		}
		return pdfFileInText;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getGuestName ' Description: get guest name from table
	 * after search ' Input parameters: WebDriver,String,int ' Return value:
	 * String ' Created By: Adnan Ghaffar ' Created On: 11-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public String getGuestNameAfterSearch(WebDriver driver, int index) throws InterruptedException {

		String path = "(//a[contains(@data-bind,'text: GuestName')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String guestName = element.getAttribute("title");
		return guestName;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getReservationNumberAfterSearch ' Description: get
	 * reservation number from search table ' Input parameters: Webdriver,int '
	 * Return value: String ' Created By: Adnan Ghaffar ' Created On: 11-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public String getReservationNumberAfterSearch(WebDriver driver, int index) throws InterruptedException {

		String path = "(//span[contains(@data-bind,'text: ConfirmationNumber')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String reservationNumber = element.getText();
		return reservationNumber;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getAdultsAfterSearch ' Description: get Adults from search
	 * table ' Input parameters: Webdriver,int ' Return value: String ' Created
	 * By: Adnan Ghaffar ' Created On: 11-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public String getAdultsAfterSearch(WebDriver driver, int index) throws InterruptedException {

		String path = "(//span[contains(@data-bind,'text: NumberOfAdults')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String adults = element.getText();
		return adults;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * <<<<<<< HEAD ' Method Name: <CalculateDatesForMRCheckInCheckOut> '
	 * Description: <This method will return Dates for MR Reservations CheckIn
	 * and CheckOut> ' Input parameters: <int days> ' Return value: <String> '
	 * Created By: <Jamal Nasir> ' Created On: <05/18/2020> ======= ' Method
	 * Name: getChildrenAfterSearch ' Description: get children from search
	 * table ' Input parameters: Webdriver,int ' Return value: String ' Created
	 * By: Adnan Ghaffar ' Created On: 11-05-2020 >>>>>>>
	 * b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public String getChildrenAfterSearch(WebDriver driver, int index) throws InterruptedException {

		String path = "(//span[contains(@data-bind,'text: NumberOfChildren')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String children = element.getText();
		return children;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * <<<<<<< HEAD ' Method Name: <getMRBRoomNumber> ' Description: <Return
	 * room numbers based on index for MRB Reservations> ' Input parameters:
	 * <WebDriver driver, String IsAssign, int roomIndex> ' Return value:
	 * <String> ' Created By: <Jamal Nasir> ' Created On: <05/18/2020> ======= '
	 * Method Name: getRoomAfterSearch ' Description: get room from search table
	 * ' Input parameters: Webdriver,int ' Return value: String ' Created By:
	 * Adnan Ghaffar ' Created On: 11-05-2020 >>>>>>>
	 * b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public String getRoomAfterSearch(WebDriver driver, int index) throws InterruptedException {

		String path = "(//span[contains(@data-bind,'text: RoomClassName')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String room = element.getText();
		return room;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getArrivalDateAfterSearch ' Description: get arrival date
	 * from search table ' Input parameters: Webdriver,int ' Return value:
	 * String ' Created By: Adnan Ghaffar ' Created On: 11-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public String getArrivalDateAfterSearch(WebDriver driver, int index) throws InterruptedException {

		String path = "(//span[contains(@data-bind,'text: DateStart')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String arrivalDate = element.getText();
		return arrivalDate;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getDepartDateAfterSearch ' Description: get departure date
	 * from search table ' Input parameters: Webdriver,int ' Return value:
	 * String ' Created By: Adnan Ghaffar ' Created On: 11-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public String getDepartDateAfterSearch(WebDriver driver, int index) throws InterruptedException {

		String path = "(//span[contains(@data-bind,'text: DateEnd')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String departDate = element.getText();
		return departDate;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getNightsAfterSearch ' Description: get nights from search
	 * table ' Input parameters: Webdriver,int ' Return value: String ' Created
	 * By: Adnan Ghaffar ' Created On: 11-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public String getNightsAfterSearch(WebDriver driver, int index) throws InterruptedException {

		String path = "(//span[contains(@data-bind,'text: NoOfNights')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String nights = element.getText();
		return nights;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * Method Name: getReservationStatusAfterSearch Description: getreservation
	 * status from search table Input parameters: Webdriver,int Return value:
	 * String Created By: Adnan Ghaffar Created On: 11-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public String getReservationStatusAfterSearch(WebDriver driver, int index) {
		String path = "(//span[contains(@data-bind,'StatusName.replace')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String status = element.getText();
		return status;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getSecondReservationRoomNumber> ' Description: <get the
	 * RoomNumber from Second reservation> ' Input parameters: < > ' Return
	 * value: <String> ' Created By: <Reddy Ponnolu> ' Created On: <08/05/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getSecondReservationRoomNumber(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.secondRoomNumberInReservation), driver);
		String secondRoomNumberInReservation = res.secondRoomNumberInReservation.getText();
		test_steps.add("Second RoomNumber InReservation ::" + secondRoomNumberInReservation);
		reslogger.info("Second RoomNumber InReservation ::" + secondRoomNumberInReservation);
		return secondRoomNumberInReservation;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getFristReservationRoomCharge> ' Description: <get the
	 * RoomCharge from frist reservation> ' Input parameters: < > ' Return
	 * value: <String> ' Created By: <Reddy Ponnolu> ' Created On: <08/05/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getFristReservationRoomCharge(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.fristRoomChageInReservation), driver);
		String fristRoomChageInReservation = res.fristRoomChageInReservation.getText();
		test_steps.add("frist RoomChage Amount ::" + fristRoomChageInReservation);
		reslogger.info("frist RoomChage amount ::" + fristRoomChageInReservation);
		return fristRoomChageInReservation;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getSecondReservationRoomCharge> ' Description: <get the
	 * RoomCharge from second reservation> ' Input parameters: < > ' Return
	 * value: <String> ' Created By: <Reddy Ponnolu> ' Created On: <08/05/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getSecondReservationRoomCharge(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.SecondRoomChageInReservation), driver);
		String SecondRoomChageInReservation = res.SecondRoomChageInReservation.getText();
		test_steps.add("second RoomChage Amount ::" + SecondRoomChageInReservation);
		reslogger.info("second RoomChage amount ::" + SecondRoomChageInReservation);
		return SecondRoomChageInReservation;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: <getRoomSelectedFromTapeChart> ' Description: <Get the
	 * reservation Room number which is created from the tape chart> ' Input
	 * parameters: <WebDriver , ArrayList> ' Return value: <String> ' Created
	 * By: <Adhnan Ghaffar> ' Created On: <05/11/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getRoomSelectedFromTapeChart(WebDriver driver, ArrayList test_steps) {
		String room = "//div[contains(@data-bind,'roomClass.name')]";
		Wait.WaitForElement(driver, room);
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(room)), driver);
		room = driver.findElement(By.xpath(room)).getText();
		return room;
	}

	public void uncheckCreateGuestProfile(WebDriver driver, ArrayList<String> test_steps, String IsGuesProfile) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CreateGuestProfile);
		if (IsGuesProfile.contentEquals("Yes")) {
			if (!res.CP_NewReservation_CreateGuestProfile.isSelected()) {
				driver.findElement(By.xpath("//span[contains(text(),'Create Guest Profile')]/..")).click();
				test_steps.add("Create Guest Profile selected");
				reslogger.info("Create Guest Profile selected");
			} else {
				test_steps.add("Create Guest Profile selected");
				reslogger.info("Create Guest Profile selected");
			}
		} else {
			if (res.CP_NewReservation_CreateGuestProfile.isSelected()) {
				driver.findElement(By.xpath("//span[contains(text(),'Create Guest Profile')]/..")).click();
				test_steps.add("Create Guest Profile unselected");
				reslogger.info("Create Guest Profile unselected");
			} else {
				test_steps.add("Create Guest Profile unselected");
				reslogger.info("Create Guest Profile unselected");
			}
		}
	}

	public ArrayList<String> enterEmail(WebDriver driver, ArrayList<String> test_steps, String Email) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Email);
		res.CP_NewReservation_Email.clear();
		res.CP_NewReservation_Email.sendKeys(Email);
		test_steps.add("Enter Email : " + Email);
		reslogger.info("Enter Email : " + Email);
		return test_steps;
	}

	public ArrayList<String> SelectReferral(WebDriver driver, String Referral) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Referral);
		Wait.explicit_wait_visibilityof_webelement(element.CP_NewReservation_Referral, driver);
		Wait.explicit_wait_elementToBeClickable(element.CP_NewReservation_Referral, driver);
		Utility.ScrollToElement(element.CP_NewReservation_Referral, driver);
		element.CP_NewReservation_Referral.click();

		String pathReferral = "(//label[text()='Referral']/preceding-sibling::div//ul/li//span[contains(text(),'"
				+ Referral.trim() + "')])[2]";
		reslogger.info(pathReferral);
		Wait.WaitForElement(driver, pathReferral);
		WebElement elementReferral = driver.findElement(By.xpath(pathReferral));
		Wait.explicit_wait_visibilityof_webelement(elementReferral, driver);
		elementReferral.click();
		reslogger.info("Selected Referral as : " + Referral);
		test_steps.add("Selected Referral as : " + Referral);
		return test_steps;
	}

	public ArrayList<String> getReservationEmail(WebDriver driver, String Email) {
		ArrayList<String> test_steps = new ArrayList<>();
		Email = Email.substring(0, 10);
		reslogger.info("Email : " + Email);
		String EmailPath = "//div[contains(text(), 'Any scheduled emails will be sent to " + Email + "')]";
		Wait.WaitForElement(driver, EmailPath);
		assertTrue(driver.findElement(By.xpath(EmailPath)).isDisplayed(), "Failed: Email verifications");
		test_steps.add("Verified Email in Reservation Save Popup");
		reslogger.info("Verified Email in Reservation Save Popup");

		return test_steps;
	}

	public String getReservationStatus(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ReservationStatus);
		String status = res.CP_NewReservation_ReservationStatus.getText();
		test_steps.add("Reservation Status : " + status);
		reslogger.info("Reservation Status : " + status);
		return status;
	}

	public String getRoomNumber(WebDriver driver, ArrayList test_steps, String IsAssign) {
		String room = "//span[text()='ROOM:']/following-sibling::span";
		Wait.WaitForElement(driver, room);
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(room)), driver);
		room = driver.findElement(By.xpath(room)).getText();

		if (IsAssign.equalsIgnoreCase("No")) {
			if (room.equalsIgnoreCase("Unassigned")) {
				test_steps.add("Room Number is : Unassigned");
				reslogger.info("Room Number is : Unassigned");
			}
		} else {
			test_steps.add("Room Number is : " + room);
			reslogger.info("Room Number is : " + room);
		}
		return room;
	}

	public String getRoomClassResDetail(WebDriver driver) {
		String path = "//div[contains(@class,'roomInfo')]//span[contains(@data-bind,'roomClassName')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public void closeFirstOpenedReservation(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		String close = "//ul[@class='sec_nav']//li[5]//i";
		try {
			// Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(close)),
			// driver);
			Wait.WaitForElement(driver, close);
			Wait.wait2Second();
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Closed the reservation");
			reslogger.info("Closed the reservation");
		} catch (Exception e) {
			Wait.WaitForElement(driver, close);
			Wait.wait2Second();
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Closed the reservation");
			reslogger.info("Closed the reservation");
		}
	}

	public String checkPDF(String folder) throws IOException {
		File getFile = Utility.getLatestFilefromDir(System.getProperty("user.dir") + File.separator + "externalFiles"
				+ File.separator + "downloadFiles" + File.separator + folder + File.separator);
		reslogger.info(getFile.getAbsolutePath());
		reslogger.info(getFile.getName());
		PDDocument document = PDDocument.load(getFile);
		document.getClass();
		String pdfFileInText = null;
		if (!document.isEncrypted()) {
			PDFTextStripperByArea stripper = new PDFTextStripperByArea();
			stripper.setSortByPosition(true);
			PDFTextStripper tStripper = new PDFTextStripper();
			pdfFileInText = tStripper.getText(document);
			document.close();

			if (getFile.delete()) {
				reslogger.info("File deleted successfully");
			} else {
				reslogger.info("Failed to delete the file");
			}
		}
		return pdfFileInText;
	}

	public void Click_CheckInButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement_120(res.CP_Reservation_CheckInButton, driver);
		Utility.ScrollToElement(res.CP_Reservation_CheckInButton, driver);
		res.CP_Reservation_CheckInButton.click();
		test_steps.add("Click Check In  Button");
		reslogger.info("Click Check In  Button");

	}

	public void createTaxExempt(WebDriver driver, String taxExcemptId, ArrayList<String> test_steps)
			throws InterruptedException {
		clickTaxExcemptCheckbox(driver, test_steps);
		enterTaxExceptId(driver, taxExcemptId, test_steps);
	}

	public void enterTaxExceptId(WebDriver driver, String taxExcemptId, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_10sec(res.enterTaxExcemptId, driver);
		if (res.enterTaxExcemptId.isEnabled()) {
			res.enterTaxExcemptId.sendKeys(taxExcemptId);
			test_steps.add("Enter taxExempt Id: " + "<b>" + taxExcemptId + "</b>");
		}
	}

	public void clickTaxExcemptCheckbox(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_10sec(res.clickTaxExcemptCheckBox, driver);
		Wait.explicit_wait_elementToBeClickable(res.clickTaxExcemptCheckBox, driver);
		res.clickTaxExcemptCheckBox.click();
		Utility.ScrollToElement(res.clickTaxExcemptCheckBox, driver);
		test_steps.add("Click at taxExempt checkBox");
	}

	public boolean isTaxPresentAfterTaxExempt(WebDriver driver, ArrayList<String> test_steps, String taxLedgeraccount,
			String TaxDescriptions) throws InterruptedException {
		boolean isTaxExist = true;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		int roomChargesFolioCount = getRoomChargeFolioItemCountInRes(driver);
		for (int i = 1; i <= roomChargesFolioCount; i++) {
			String xpath = "(//tbody[starts-with(@data-bind,'getElement: ComputedFolioItemsElement')]/tr/td/span[text()='"
					+ taxLedgeraccount + "']/../following-sibling::td/a)[" + i + "]";
			// clickroomChargeFolioItems
			Wait.waitUntilPresenceOfElementLocated(xpath, driver);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(xpath)), driver);
			driver.findElement(By.xpath(xpath)).click();
			test_steps.add("Click at folio line item: " + i + " of" + " " + taxLedgeraccount);
			Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);

			String xpath1 = "(//a[text()='" + TaxDescriptions + "'])[1]/ancestor::td/following-sibling::td/span";

			isTaxExist = verifySizeOfChildLineItems(driver, xpath1);
			test_steps.add(
					"Get if the created tax is present under folio after tax exempt: " + "<b>" + isTaxExist + "</b>");
			clickFolioPopupCancel(driver);
			test_steps.add("Close folio popup");
		}

		return isTaxExist;

	}

	public boolean verifySizeOfChildLineItems(WebDriver driver, String xpath) throws InterruptedException {
		boolean ChildLineItems = false;
		Wait.wait5Second();
		try {
			// String xpath1 = "//table[@class='table table-bordered
			// table-striped table-hover
			// table-condensed']/tbody/tr/td/span[text()='Laundry']";
			ChildLineItems = driver.findElements(By.xpath(xpath)).size() != 0;
		} catch (Exception e) {
			reslogger.info(e);
			ChildLineItems = false;
		}
		return ChildLineItems;
	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <CalculateDatesForMRCheckInCheckOut> ' Description: <This
	 * method will return Dates for MR Reservations CheckIn and CheckOut> '
	 * Input parameters: <int days> ' Return value: <String> ' Created By:
	 * <Jamal Nasir> ' Created On: <05/18/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String CalculateDatesForMRCheckInCheckOut(int days) throws InterruptedException, ParseException {
		String firstDate = ESTTimeZone.DateFormateForCheckInCheckOut(days);
		String secondDate = ESTTimeZone.DateFormateForCheckInCheckOut(days + 1);
		String resDate = firstDate + "|" + secondDate;
		reslogger.info(resDate);
		return resDate;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getMRBRoomNumber> ' Description: <Return room numbers
	 * based on index for MRB Reservations> ' Input parameters: <WebDriver
	 * driver, String IsAssign, int roomIndex> ' Return value: <String> '
	 * Created By: <Jamal Nasir> ' Created On: <05/18/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getMRBRoomNumber(WebDriver driver, String IsAssign, int roomIndex) {
		String room = "(//span[text()='ROOM:']/following-sibling::span)[" + roomIndex + "]";
		Wait.WaitForElement(driver, room);
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(room)), driver);
		room = driver.findElement(By.xpath(room)).getText();
		if (IsAssign.equalsIgnoreCase("No")) {
			if (room.equalsIgnoreCase("Unassigned")) {
				reslogger.info("Room Number is : Unassigned");
			}
		} else {
			reslogger.info("Room Number is : " + room);
		}
		return room;
	}

	public boolean verifyCheckINPaymentWindow(WebDriver driver) {
		boolean value = Utility.isElementPresent(driver,
				By.xpath("//h4[contains(@data-bind,'PaymentPopupHeaderText()')][contains(text(),'Check In Payment')]"));
		return value;
	}

	public String getDepositDueAmount(WebDriver driver) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.getDepositDueCharge, driver);
		Wait.explicit_wait_visibilityof_webelement(res.getDepositDueCharge, driver);
		String depositAmount = res.getDepositDueCharge.getText().replace("$", "").trim();
		return depositAmount;

	}

	public void selectGuestFolioItemWithIndexInRes(WebDriver driver, int index) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_FolioDetailDropDownBox);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_FolioDetailDropDownBox, driver);
		String xpath = "(//ul[@class='dropdown-menu inner']/li/a/span[starts-with(.,'Guest Folio For')])[" + index
				+ "]";
		driver.findElement(By.xpath(xpath)).click();
	}

	public int getTotalGuestFolioItem(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_FolioDetailDropDownBox);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_FolioDetailDropDownBox, driver);
		int guestFolioItems = res.getTotalGuestFolioItemInRes.size();
		test_steps.add("Guest folio Count in Folio details dropdown: " + "<b>" + guestFolioItems + "</b>");
		return guestFolioItems;
	}

	public void enterAdultsChildren(WebDriver driver, String AdultsChildrens, String Value, int RoomIndex)
			throws InterruptedException {
		String elementxpath = "(//label[text()='" + AdultsChildrens + "']/preceding-sibling::input)[" + RoomIndex + "]";
		Wait.explicit_wait_xpath(elementxpath, driver);
		WebElement ElementInput = driver.findElement(By.xpath(elementxpath));
		Wait.explicit_wait_visibilityof_webelement(ElementInput, driver);
		Utility.ScrollToElement(ElementInput, driver);
		ElementInput.sendKeys(Keys.chord(Keys.CONTROL, "a"), Value);
		assertEquals(ElementInput.getAttribute("value"), Value, "Failed: Entered Date missmatched");
	}

	public ArrayList<String> selectRateplan(WebDriver driver, String Rateplan, String PromoCode, int RoomIndex)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		String elementxpath = "(" + OR_Reservation.CP_NewReservation_Rateplan + ")[" + RoomIndex + "]";
		Wait.explicit_wait_xpath(elementxpath, driver);
		WebElement Element = driver.findElement(By.xpath(elementxpath));
		Wait.explicit_wait_visibilityof_webelement(Element, driver);
		Wait.explicit_wait_elementToBeClickable(Element, driver);
		Utility.ScrollToElement(Element, driver);
		Element.click();
		String rate = "(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div)[" + RoomIndex
				+ "]//span[contains(text(),'" + Rateplan + "')]/..";
		reslogger.info(rate);
		Wait.WaitForElement(driver, rate);
		driver.findElement(By.xpath(rate)).click();
		reslogger.info("Selecting the rateplan : " + Rateplan);
		testSteps.add("Selecting the rateplan : " + Rateplan);
		if (Rateplan.contains("Promo")) {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PromoCode);
			res.CP_NewReservation_PromoCode.clear();
			res.CP_NewReservation_PromoCode.sendKeys(PromoCode);
			reslogger.info("Enter promocode : " + PromoCode);
			testSteps.add("Enter promocode : " + PromoCode);
		}
		return testSteps;
	}

	public void selectRoom(WebDriver driver, String RoomClass, int RoomNumber, int RoomIndex, ArrayList<String> steps)
			throws InterruptedException {
		Elements_CPReservation reservationPage = new Elements_CPReservation(driver);
		steps.add("Selecting  Room number '" + RoomIndex + "'");
		String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//..//following-sibling::div//div/select//following-sibling::div";
		verifySpinerLoading(driver);
		reslogger.info(expand);
		Wait.WaitForElement(driver, expand);
		Wait.waitForElementToBeVisibile(By.xpath(expand), driver);
		Wait.waitForElementToBeClickable(By.xpath(expand), driver);
		WebElement Expand = driver.findElement(By.xpath(expand));
		Utility.ScrollToElement(Expand, driver);
		Wait.wait3Second();
		try {
			Utility.app_logs.info("in try");
			Expand.click();

		} catch (Exception e) {
			Utility.app_logs.info("in catch");

			expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]//..//..//..//following-sibling::div//div/select//following-sibling::div//button";
			verifySpinerLoading(driver);
			reslogger.info(expand);

			Expand = driver.findElement(By.xpath(expand));
			Expand.click();

		}
		String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ RoomClass + "')]//..//..//..//following-sibling::div//div/select//following-sibling::div//ul/li["
				+ RoomNumber + "]//a//span";
		Wait.WaitForElement(driver, roomNumber);
		driver.findElement(By.xpath(roomNumber)).click();
		String Selectxpath = "//section[@class='ir-roomClassDetails manual-override']//span[text()='" + RoomClass
				+ "']//ancestor::div[contains(@data-bind,'expandRoomClassRateInfo')]//span[contains(@data-bind,'SELECT')]";
		Wait.WaitForElement(driver, Selectxpath);
		WebElement Select = driver.findElement(By.xpath(Selectxpath));
		Utility.ScrollToElement(Select, driver);
		Select.click();
		steps.add("Click Select button");
		reslogger.info("Click Select button");
		String RoomNO = driver.findElement(By.xpath(expand)).getAttribute("title");
		steps.add("Selected Room as '" + RoomClass + " : " + RoomNO + "'");
		reslogger.info("Selected Room as '" + RoomClass + " : " + RoomNO + "'");

	}

	public void addPrimaryRoom(WebDriver driver, ArrayList test_steps, ArrayList al) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String primaryArrow = "//span[text()='Primary Room']//..//..//following-sibling::div//button";
		Wait.WaitForElement(driver, primaryArrow);
		Wait.waitForElementToBeVisibile(By.xpath(primaryArrow), driver);
		Wait.waitForElementToBeClickable(By.xpath(primaryArrow), driver);
		Wait.wait2Second();
		driver.findElement(By.xpath(primaryArrow)).click();
		String primaryRoom = "//span[text()='Primary Room']//..//..//following-sibling::div//li[2]//span";
		primary = driver.findElement(By.xpath(primaryRoom)).getText();
		Wait.WaitForElement(driver, primaryRoom);
		driver.findElement(By.xpath(primaryRoom)).click();
		test_steps.add("Selected Primary Room as : " + primary);
		reslogger.info("Selected Primary Room as : " + primary);
		al.add(primary);
	}

	public void addAdditionalRoom(WebDriver driver, ArrayList test_steps, ArrayList al) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		String additional = "(//span[text()='Additional Room'])";
		int count = driver.findElements(By.xpath(additional)).size();
		for (int i = 1; i <= count; i++) {
			String additionalArrow = "(//span[text()='Additional Room'])[" + i
					+ "]/../../following-sibling::div//button";
			Wait.WaitForElement(driver, additionalArrow);
			driver.findElement(By.xpath(additionalArrow)).click();
			String additionalRoom = "(//span[text()='Additional Room'])[" + i + "]//..//..//following-sibling::div//li["
					+ (i + 2) + "]//span";
			additionalRoomNo = driver.findElement(By.xpath(additionalRoom)).getText();
			Wait.WaitForElement(driver, additionalRoom);
			driver.findElement(By.xpath(additionalRoom)).click();
			test_steps.add("Selected Addtinal  Room as : " + additionalRoomNo);
			reslogger.info("Selected Addtinal Room as : " + additionalRoomNo);
			al.add(additionalRoomNo);
		}
	}

	// Created by adhnan
	public void AddNotes(WebDriver driver, ArrayList test_steps, String RoomName, String NoteType, String Subject,
			String Description) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddNotes);
		test_steps.add("======ADD NOTES=====");
		reslogger.info("======ADD NOTES=====");
		res.CP_AddNotes.click();
		test_steps.add("Click on Add Notes");
		reslogger.info("Click on Add Notes");

		String RoomArrow = "//div[contains(@data-bind,'addNewNote')]//button[@title='--Select Room--']";
		Wait.WaitForElement(driver, RoomArrow);
		driver.findElement(By.xpath(RoomArrow)).click();

		String Room = "//div[contains(@data-bind,'addNewNote')]//button[@title='--Select Room--']//..//button//..//div//li//a//span[text()='"
				+ RoomName.trim() + "']";
		Wait.WaitForElement(driver, Room);
		driver.findElement(By.xpath(Room)).click();
		test_steps.add("Select Room : " + RoomName);
		reslogger.info("Select Room : " + RoomName);

		String noteTypeArrow = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Type']//..//button";
		Wait.WaitForElement(driver, noteTypeArrow);
		driver.findElement(By.xpath(noteTypeArrow)).click();

		String noteType = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Type']//..//button/..//div//li/a/span[text()='"
				+ NoteType.trim() + "']";
		Wait.WaitForElement(driver, noteType);
		driver.findElement(By.xpath(noteType)).click();
		test_steps.add("Select Note Type : " + NoteType);
		reslogger.info("Select Note Type : " + NoteType);

		String subject = "//h4[text()='Add Notes']//..//..//div/div//div//label[text()='Subject']//..//input";
		Wait.WaitForElement(driver, subject);
		driver.findElement(By.xpath(subject)).sendKeys(Subject);
		test_steps.add("Enter subject : " + Subject);
		reslogger.info("Enter subject : " + Subject);

		String description = "//h4[text()='Add Notes']//..//..//div/div//div//label[text()='Description']//preceding-sibling::textarea";
		Wait.WaitForElement(driver, description);
		driver.findElement(By.xpath(description)).sendKeys(Description);
		test_steps.add("Enter Description : " + Description);
		reslogger.info("Enter Description : " + Description);

		String user = "//input[starts-with(@data-bind,'value: updatedBy')]";

		JavascriptExecutor js = (JavascriptExecutor) driver;
		user = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(user)));

		String add = "//h4[text()='Add Notes']//..//..//button[text()='Add']";
		Wait.WaitForElement(driver, add);
		driver.findElement(By.xpath(add)).click();
		test_steps.add("Click on Add");
		reslogger.info("Click on Add");

		String noteverify = "//td[text()='" + NoteType.trim() + "']";
		Wait.WaitForElement(driver, noteverify);
		test_steps.add("Sucessfully added Note : " + Subject);
		reslogger.info("Sucessfully added Note : " + Subject);

	}

	public void verifyNotesExist(WebDriver driver, String NoteType, String Room, String Subject, String Description,
			String UpdatedOn, boolean exist) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.NotesTypes.get(0), driver);
		int Size = res.NotesTypes.size();
		reslogger.info("Added Notes Size : " + Size);
		int lineNumber = Size - 1;
		reslogger.info("Expected Type : " + NoteType);
		reslogger.info("Expected Room : " + Room);
		reslogger.info("Expected Subject : " + Subject);
		reslogger.info("Expected Description : " + Description);
		reslogger.info("Expected Updated On Date : " + UpdatedOn);
		boolean found = false;
		for (lineNumber = Size - 1; lineNumber >= 0; lineNumber--) {
			reslogger.info("LineNumber : " + lineNumber);
			reslogger.info("Note Type : " + res.NotesTypes.get(lineNumber).getText());
			reslogger.info("Room : " + res.NotesRoom.get(lineNumber).getText());
			reslogger.info("Subject : " + res.NotesSubject.get(lineNumber).getText());
			reslogger.info("Description : " + res.NotesDescription.get(lineNumber).getText());
			reslogger.info("Updated On Date : " + res.NotesUpdatedOn.get(lineNumber).getText());
			if (res.NotesTypes.get(lineNumber).getText().equals(NoteType)
					&& res.NotesRoom.get(lineNumber).getText().equals(Room)
					&& res.NotesSubject.get(lineNumber).getText().contains(Subject)
					&& res.NotesDescription.get(lineNumber).getText().equals(Description)
					&& res.NotesUpdatedOn.get(lineNumber).getText().contains(UpdatedOn)) {
				found = true;
				break;
			}
		}
		assertEquals(found, exist, "Failed: Note having Subject : " + Subject + " Not in Required visibility form");

	}

	public void selectAccount(WebDriver driver, ArrayList<String> test_steps, String Account, String isAssign)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Account);
		String accountdisplay = "//label[contains(text(),'Account')]//..//i[starts-with(@class,'rightIcon demo-icon icon-pencil')]";
		WebElement ele = driver.findElement(By.xpath(accountdisplay));
		if (!ele.isDisplayed()) {
			if (Account.equalsIgnoreCase("") || Account.isEmpty()) {
				reslogger.info("No Account");
			} else {
				res.CP_NewReservation_Account.sendKeys(Account);
				test_steps.add("Enter Account : " + Account);
				reslogger.info("Enter Account : " + Account);
				Wait.wait2Second();
				String account = "//b[contains(text(),'" + Account.trim() + "')]//..//..//..";
				Wait.WaitForElement(driver, account);
				driver.findElement(By.xpath(account)).click();
                if(!isAssign.equalsIgnoreCase("No")) {
                    String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]//following-sibling::div//button[contains(text(),'Yes')]";
                    Wait.WaitForElement(driver, dataYes);
                    driver.findElement(By.xpath(dataYes)).click();
                    test_steps.add("Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
                    reslogger.info("Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
                    Wait.wait2Second();
                } else {
                    String dataNo = "//div[contains(text(),'Do you want to replace the guest info')]//following-sibling::div//button[contains(text(),'No')]";
                    Wait.WaitForElement(driver, dataNo);
                    driver.findElement(By.xpath(dataNo)).click();
                    test_steps.add("Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
                    reslogger.info("Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
                    Wait.wait2Second();
                }



				try {
				    if(!isAssign.equalsIgnoreCase("No")) {
                        String policyYes = "//div[contains(text(),'Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?')]/following-sibling::div//button[contains(text(),'Yes')]";
                        Wait.wait2Second();
                        driver.findElement(By.xpath(policyYes)).click();
                        test_steps.add("Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes");
                        reslogger.info("Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes");
                    } else {
                        String policyNo = "//div[contains(text(),'Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?')]/following-sibling::div//button[contains(text(),'No')]";
                        Wait.wait2Second();
                        driver.findElement(By.xpath(policyNo)).click();
                        test_steps.add("Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : No");
                        reslogger.info("Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : No");
                    }
				} catch (Exception e) {
					// TODO: handle exception
				}

			}
		} else {
			test_steps.add("Account Aleady exists");
			reslogger.info("Account Aleady exists");
		}
	}

	/*
	 * public void clickOnPrintIcon(WebDriver driver) throws
	 * InterruptedException, IOException { Elements_CPReservation
	 * reservationPage = new Elements_CPReservation(driver);
	 * Wait.WaitForElement(driver, OR.PrintIcon);
	 * Wait.waitForElementToBeVisibile(By.xpath(OR.PrintIcon), driver);
	 * Wait.waitForElementToBeClickable(By.xpath(OR.PrintIcon), driver);
	 * reservationPage.printIcon.click();
	 * 
	 * }
	 */
	public void clickOnDetailedReservationList(WebDriver driver) throws InterruptedException {
		Wait.wait3Second();
		Elements_CPReservation reservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR.CheckboxDetailedReservationList);
		Wait.waitForElementToBeVisibile(By.xpath(OR.CheckboxDetailedReservationList), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR.CheckboxDetailedReservationList), driver);
		reservationPage.checkboxDetailedReservationList.click();

	}

	public double getCheckInAmount(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		// Get Amount
		String amount = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		double checkinAmount = Double.valueOf(Amount);
		reslogger.info(checkinAmount);
		return checkinAmount;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verificationSuccessfullWindow ' Description: Verification
	 * of Check In Success Window and Check Out Success Window ' Input
	 * parameters: String ' Created By: Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public void verificationSuccessfullWindow(WebDriver driver, ArrayList<String> test_steps, String NoShowSuccess,
			String Status, String PaymentMethod, String Notes, String Balance, String Type, String TotalNoFee,
			String PaymentType, String dateValue) throws InterruptedException, ParseException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowSuccess_ModelHeader);
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.CP_Reservation_NoShowSuccess, driver);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShowSuccess, driver);

		// Verified Success -Message
		assertEquals(CPReservationPage.CP_Reservation_NoShowSuccess.getText().toLowerCase().trim(),
				(NoShowSuccess.toLowerCase().trim()), "Failed: To verify Success Header");
		test_steps.add("  Verified Message: <b>" + NoShowSuccess + "</b>");
		reslogger.info("  Verified Message:" + NoShowSuccess);

		if (PaymentType.equals("Check Out")) {
			// Verified Success-Date
			Date date = null;
			String Date = CPReservationPage.NoShowSuccess_Date.getText();
			DateFormat dateFormat = new SimpleDateFormat("MM/dd/yy");
			dateFormat.setTimeZone(TimeZone.getTimeZone("EST"));
			Date myDate = dateFormat.parse(dateValue);
			String CurrentDate = dateFormat.format(myDate);

			// date = formatter.parse(Date);
			assertEquals(CPReservationPage.NoShowSuccess_Date.getText(), (CurrentDate),
					"Failed: To verify  Success Page Date");
			test_steps.add("  Verified Date: <b>" + dateValue + "</b>");
			reslogger.info("  Verified Date: " + dateValue);
		} else {

			assertEquals(CPReservationPage.NoShowSuccess_Date.getText(), (dateValue),
					"Failed: To verify  Success Page Date");

			test_steps.add("  Verified Date: <b>" + dateValue + "</b>");
			reslogger.info("  Verified Date: " + dateValue);
		}

		// Verified Success-Balance
		String balance = CPReservationPage.NoShowSuccess_Balance.getText().replace("$ ", "");

		reslogger.info(balance);
		if (PaymentType.equals("Check Out")) {
			/*
			 * double tripAmount = Double.valueOf(balance); int amt = (int)
			 * tripAmount; String BalanceCheckOut = String.valueOf(amt);
			 */
			String BalanceCheckOut = balance.trim();
			assertEquals(BalanceCheckOut.trim(), (Balance), "Failed: To verify Success Page Balance");
			test_steps.add(" Verified Balance: <b>" + Balance + "</b>");
			reslogger.info("  Verified Balance: " + Balance);
		} else {
			assertEquals(balance.trim(), (Balance), "Failed: To verify Success Page Balance");
			test_steps.add(" Verified Balance: <b>" + Balance + "</b>");
			reslogger.info("  Verified Balance: " + Balance);

		}
		// Verified Success-Amount

		System.out.print("Amount: " + TotalNoFee);
		String path = "//span[contains(@data-bind,'noShow.PaymentAmount')][contains(text(),'$ " + TotalNoFee
				+ "')]|//span[contains(@data-bind,'cancel.PaymentAmount')][contains(text(),'$ " + TotalNoFee
				+ "')]|//span[contains(@data-bind,'checkInDetail.PaymentAmount')][contains(text(),'$ " + TotalNoFee
				+ "')]|//span[contains(@data-bind,'checkOutDetail.PaymentAmount')][contains(text(),'$ " + TotalNoFee
				+ "')]";
		WebElement AmountElement = driver.findElement(By.xpath(path));
		assertTrue(AmountElement.isDisplayed(), "Failed: To verify  Success Page Amount: " + TotalNoFee);
		test_steps.add("  Verified Amount: <b>" + TotalNoFee + "</b>");
		reslogger.info("  Verified Amount: " + TotalNoFee);

		// Verified Success-Type
		Utility.app_logs.info(type);
		assertEquals(CPReservationPage.NoShowSuccess_Type.getText().toLowerCase().trim(), (Type.toLowerCase().trim()),
				"Failed: To verify  Success Page Type");
		test_steps.add("  Verified Type: <b>" + Type + "</b>");
		reslogger.info(" Verified Type: " + Type);

		// Verified Success-Payment Method
		assertTrue(CPReservationPage.CP_Reservation_NoShowSuccessPaymentMethod.getText().toLowerCase().trim()
				.contains(PaymentMethod.toLowerCase().trim()), "Failed: To verify Success Page Payment Method");
		test_steps.add("  Verified Payment Method: <b>" + PaymentMethod + "</b>");
		reslogger.info("  Verified Payment Method: " + PaymentMethod);

		// Verified Success -Status
		assertEquals(CPReservationPage.CP_Reservation_NoShowSuccessStatus.getText().toLowerCase().trim(),
				(Status.toLowerCase().trim()), "Failed: To verify  Success Page Status ");
		test_steps.add("  Verified Status:<b> " + Status + "</b>");
		reslogger.info(" Verified Status: " + Status);

		// Verified Success Notes
		if (Utility.validateString(Notes)) {
			assertEquals(CPReservationPage.CP_Reservation_NoShowSuccessNotes.getText().toLowerCase().trim(),
					(Notes.toLowerCase().trim()), "Failed: To verify  Success Page Notes ");
			test_steps.add(" Verified  Notes: <b>" + Notes + "</b>");
			reslogger.info(" Verified  Notes: " + Notes);
		}
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyHistoryDescForNoShowCancel ' Description:
	 * Verification of Made a no show payment and Made a cancellation payment '
	 * Input parameters: String ' Created By: Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public void verifyHistoryDescForNoShowCancel(WebDriver driver, ArrayList<String> test_steps, String amount,
			String Status, String PaymentMethod) {
		String desc = "Made a no show payment of $" + amount.trim() + " using " + PaymentMethod;
		String CancelDesc = "Made a cancellation payment of $" + amount.trim() + " using " + PaymentMethod;
		String path = "//span[contains(text(),'" + desc + "')]|//span[contains(text(),'" + CancelDesc + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Description");
		if (Status.equals("No Show")) {
			test_steps.add("'History Tab' Verified Description: <b>" + desc + "</b>");
			reslogger.info("'History Tab' Verified Description : " + desc);
		} else if (Status.equals("Cancel")) {
			test_steps.add("'History Tab' Verified Description: <b>" + CancelDesc + "</b>");
			reslogger.info("'History Tab' Verified Description : " + CancelDesc);

		}
	}

	public ArrayList<String> selectReportTyeAsPDF(WebDriver driver) throws InterruptedException {

		Elements_CPReservation reservationPage = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();

		Wait.WaitForElement(driver, OR.ClickOnReport);
		Wait.waitForElementToBeVisibile(By.xpath(OR.ClickOnReport), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR.ClickOnReport), driver);
		reservationPage.clickOnReport.click();
		testSteps.add("Click on Reports");

		Wait.WaitForElement(driver, OR.ClickOnReportAsPDF);
		Wait.waitForElementToBeVisibile(By.xpath(OR.ClickOnReportAsPDF), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR.ClickOnReportAsPDF), driver);
		Utility.ScrollToElement_NoWait(reservationPage.clickOnReport, driver);

		reservationPage.clickOnReportAsPDF.click();
		testSteps.add("Select report type as PDF");
		reslogger.info("Click on PDF Report");
		Wait.wait10Second();

		return testSteps;

	}
	/*
	 * public void downloadPDFReport(WebDriver driver) throws
	 * InterruptedException, IOException { Elements_CPReservation
	 * reservationPage = new Elements_CPReservation(driver);
	 * reservationPage.ClickOnPrint.click(); Wait.wait5Second();
	 * Wait.waitForElementToBeGone(driver, reservationPage.ModuleLoading,
	 * 10000); ArrayList<String> tabs2 = new
	 * ArrayList<String>(driver.getWindowHandles());
	 * driver.switchTo().window(tabs2.get(1)); Wait.wait2Second();
	 * 
	 * new Select(driver.findElement(By.xpath("//*[@id='drpReportType']"))).
	 * selectByVisibleText("Download As Pdf");
	 * reservationPage.DownloadButton.click(); Wait.wait3Second();
	 * driver.close(); driver.switchTo().window(tabs2.get(0));
	 * 
	 * }
	 */

	public void clickOnCloseReservationReports(WebDriver driver) throws InterruptedException {
		Elements_CPReservation reservationPage = new Elements_CPReservation(driver);

		try {
			/*
			 * Wait.WaitForElement(driver, OR.ClickOnCloseReportsPopup);
			 * Wait.waitForElementToBeVisibile(By.xpath(OR.
			 * ClickOnCloseReportsPopup), driver);
			 * Wait.waitForElementToBeClickable(By.xpath(OR.
			 * ClickOnCloseReportsPopup), driver);
			 */
			reservationPage.ClickOnCloseReportsPopup.click();
		} catch (Exception e) {
			// TODO: handle exception
		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyCheckInButtonDisability ' Description: Verification
	 * of Check In button disable ' Input parameters: String ' Created By:
	 * Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public void verifyCheckInButtonDisability(WebDriver driver, ArrayList<String> test_steps, String errorMessage)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckInButton);
		assertTrue(!res.CP_Reservation_CheckInButton.isEnabled(), errorMessage);
		test_steps.add(" Check In Button is Disabled");
		reslogger.info(" Check In Button is Disabled");

	}

	public void createTaskWithVerification(WebDriver driver, ArrayList test_steps, boolean isAddDueOn,
			boolean isAddAssignee, String TaskCategory, String TaskType, String TaskDetails, String TaskRemarks,
			String TaskDueon, String TaskAssignee, String TaskStatus) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddTask);
		test_steps.add("******************* Adding Task **********************");
		reslogger.info("******************* Adding Task **********************");
		res.CP_AddTask.click();
		test_steps.add("Click on Add Task");
		reslogger.info("Click on Add Task");

		String taskCategoryArrow = "//label[text()='Category']/..//button";
		Wait.WaitForElement(driver, taskCategoryArrow);
		driver.findElement(By.xpath(taskCategoryArrow)).click();

		String taskCategory = "//label[text()='Category']/..//div/ul//span[text()='" + TaskCategory.trim() + "']";
		Wait.WaitForElement(driver, taskCategory);
		driver.findElement(By.xpath(taskCategory)).click();
		test_steps.add("Select Task Category : " + TaskCategory);
		reslogger.info("Select Task Category : " + TaskCategory);

		String taskType = "//label[text()='Type']/..//button";
		Wait.WaitForElement(driver, taskType);
		driver.findElement(By.xpath(taskType)).click();
		Wait.wait2Second();
		taskType = "//label[text()='Type']/..//div/ul//span[text()='" + TaskType.trim() + "']";
		Wait.WaitForElement(driver, taskType);
		driver.findElement(By.xpath(taskType)).click();
		test_steps.add("Select Task Type : " + TaskType);
		reslogger.info("Select Task Type : " + TaskType);

		String taskDetails = "//label[text()='Details']/preceding-sibling::textarea";
		Wait.WaitForElement(driver, taskDetails);
		driver.findElement(By.xpath(taskDetails)).sendKeys(TaskDetails);
		test_steps.add("Select Task Details : " + TaskDetails);
		reslogger.info("Select Task Details : " + TaskDetails);

		String taskRemarks = "//label[text()='Remarks']/preceding-sibling::textarea";
		Wait.WaitForElement(driver, taskRemarks);
		driver.findElement(By.xpath(taskRemarks)).sendKeys(TaskRemarks);
		test_steps.add("Enter Task Remarks : " + TaskRemarks);
		reslogger.info("Enter Task Remarks : " + TaskRemarks);
		if (isAddDueOn) {
			String dueCalender = "//label[text()='Due On']/..//i";
			Wait.WaitForElement(driver, dueCalender);
			driver.findElement(By.xpath(dueCalender)).click();
			String monthYear = Utility.get_MonthYear(TaskDueon);
			String day = Utility.getDay(TaskDueon);
			reslogger.info(monthYear);
			String header = null, headerText = null, next = null, date;
			for (int i = 1; i <= 12; i++) {
				header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
				headerText = driver.findElement(By.xpath(header)).getText();
				if (headerText.equalsIgnoreCase(monthYear)) {
					date = "//td[contains(@class,'day') and text()='" + day + "']";
					Wait.WaitForElement(driver, date);
					int size = driver.findElements(By.xpath(date)).size();
					for (int k = 1; k <= size; k++) {
						date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + k + "]";
						String classText = driver.findElement(By.xpath(date)).getAttribute("class");
						if (!classText.contains("old")) {
							driver.findElement(By.xpath(date)).click();
							test_steps.add("Selecting due on date : " + TaskDueon);
							reslogger.info("Selecting due on date : " + TaskDueon);
							break;
						}
					}
					break;
				} else {
					next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
					Wait.WaitForElement(driver, next);
					driver.findElement(By.xpath(next)).click();
					Wait.wait2Second();
				}
			}
		}
		if (isAddAssignee) {
			String taskAssignee = "//label[text()='Assignee']/..//input";
			Wait.WaitForElement(driver, taskAssignee);
			driver.findElement(By.xpath(taskAssignee)).sendKeys(TaskAssignee);
			Wait.wait2Second();
			String taskassgin = "//label[text()='Assignee']/..//div/ul/li/div";
			Wait.WaitForElement(driver, taskassgin);
			driver.findElement(By.xpath(taskassgin)).click();
			test_steps.add("Enter Task Assignee : " + TaskAssignee);
			reslogger.info("Enter Task Assignee : " + TaskAssignee);
		}
		String taskStatus = "(//label[text()='Status']/..//button)[2]";
		Wait.WaitForElement(driver, taskStatus);
		driver.findElement(By.xpath(taskStatus)).click();
		String status = "//label[text()='Status']/..//button/following-sibling::div//li//span[text()='"
				+ TaskStatus.trim() + "']";
		Wait.WaitForElement(driver, status);
		driver.findElement(By.xpath(status)).click();
		test_steps.add("Select Task Status : " + TaskStatus);
		reslogger.info("Select Task Status : " + TaskStatus);

		String save = "//h4[text()='Add Task']/../..//button[text()='Save']";
		Wait.WaitForElement(driver, save);
		driver.findElement(By.xpath(save)).click();
		test_steps.add("Click on Save");
		reslogger.info("Click on Save");

		String taskVerify = "//span[text()='Tasks ']/../..//td//span[text()='" + TaskType.trim() + "']";
		Wait.WaitForElement(driver, taskVerify);
		test_steps.add("Sucessfully added Task : " + TaskType);
		reslogger.info("Sucessfully added Task : " + TaskType);

		test_steps.add("Verified Task Type : " + TaskType);
		reslogger.info("Verified Task Type : " + TaskType);

		test_steps.add("Verified Task Type : " + TaskType);
		reslogger.info("Verified Task Type : " + TaskType);

		taskDetails = "//span[text()='Tasks ']/../..//td[text()='" + TaskDetails.trim() + "']";
		Wait.WaitForElement(driver, taskDetails);
		test_steps.add("Verified Task details : " + TaskDetails);
		reslogger.info("Verified Task details : " + TaskDetails);
		if (isAddDueOn) {
			String[] taskdue = TaskDueon.split("/");
			String due = "//span[text()='Tasks ']/../..//td[contains(text(),'" + taskdue[1] + "/" + taskdue[0] + "')]";
			Wait.WaitForElement(driver, due);
			test_steps.add("Verified Task due on : " + TaskDueon);
			reslogger.info("Verified Task due on : " + TaskDueon);
		}

		String stat = "//span[text()='Tasks ']/../..//td[contains(text(),'" + TaskStatus.trim() + "')]";
		Wait.WaitForElement(driver, stat);
		test_steps.add("Verified Tsak Status : " + TaskStatus);
		reslogger.info("Verified Task Status : " + TaskStatus);

	}

	public void Click_CheckInAllButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait3Second();
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_CheckInAllButton, driver);
		Utility.ScrollToElement(res.CP_Reservation_CheckInAllButton, driver);
		res.CP_Reservation_CheckInAllButton.click();
		test_steps.add("Click Check In All Button");
		reslogger.info("Click Check In All Button");

	}

	public ArrayList<String> clickOnDirtyPopUp(WebDriver driver, ArrayList<String> test_sreps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		try {
			Wait.wait2Second();
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.dirtyRoomPopUp), driver);
			reservation.dirtyRoomPopUp.click();
			test_sreps.add("click on popup dirty button");
			reslogger.info("click on popup dirty button");

		} catch (Exception e) {
			test_sreps.add("dirty room popup not  displyed");
			reslogger.info("dirty room popup not  displyed");
		}

		return test_sreps;

	}

	public ArrayList<String> clickonPaymentMetod(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {

		String selectPaymentDropDown = " (//div[contains(@class,'payment-method')]/button)";// div[contains(@class,'payment-method
																							// dropup')]/button";
		Wait.waitForElementToBeVisibile(By.xpath(selectPaymentDropDown), driver);
		// Wait.wait3Second();
		driver.findElement(By.xpath(selectPaymentDropDown)).click();
		test_steps.add("click on Payment method successfully");
		reslogger.info("click on Payment method successfully");

		return test_steps;

	}

	public ArrayList<String> selectPaymentMethod(WebDriver driver, String AccountName, ArrayList<String> test_steps)
			throws InterruptedException {

		String paymentType = "//div[contains(@class,'payment-method')]/button/..//a/span[contains(text(),'"
				+ AccountName + "')]";
		Wait.waitForElementToBeVisibile(By.xpath(paymentType), driver);
		Utility.ScrollToElement(driver.findElement(By.xpath(paymentType)), driver);
		Wait.wait3Second();
		driver.findElement(By.xpath(paymentType)).click();

		return test_steps;

	}

	public void verifyCheckInPaymentPopupIsAppeared(WebDriver driver, String paymentMethod,
			ArrayList<String> test_steps) throws Exception {
		try {

			Wait.waitForElementToBeVisibile(
					By.xpath(OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggle), driver);
			if (driver.findElement(By.xpath(OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggle))
					.isDisplayed()) {
				disableGenerateGuestReportToggle(driver, test_steps);
				clickOnProceedToCheckInPaymentButton(driver, test_steps);
				clickOnDirtyPopUp(driver, test_steps);
				clickonPaymentMetod(driver, test_steps);
				selectPaymentMethod(driver, paymentMethod, test_steps);
				clickOnPayButtonOnPaymentPopup(driver, test_steps);
				checkInPaymentSuccessPopupClose(driver, test_steps);
			} else {
				test_steps.add("checkin pop not avilable");
				reslogger.info("checkin pop not avilable");

			}
		} catch (Exception e) {
			test_steps.add("checkin pop not avilable");
			reslogger.info("checkin pop not avilable");
		}
		Wait.wait3Second();

	}

	public void Click_CheckOutAllButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait5Second();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_Reservation_ReservationStatusCheckOutAllButton),
				driver);
		// Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ReservationStatusCheckOutAllButton,
		// driver);
		// Utility.ScrollToElement(res.CP_Reservation_ReservationStatusCheckOutAllButton,
		// driver);
		res.CP_Reservation_ReservationStatusCheckOutAllButton.click();
		test_steps.add("Click Check Out All  Button");
		reslogger.info("Click Check Out All Button");

	}

	public ArrayList<String> clickOnCheckOutPopUp(WebDriver driver, ArrayList<String> test_sreps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		try {
			// Wait.wait3Second();
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkOutPopUp), driver);
			reservation.checkOutPopUp.click();
			test_sreps.add("click on popup yes button");
			reslogger.info("click on popup yes button");

		} catch (Exception e) {
			test_sreps.add("checkOut popup not  displyed");
			reslogger.info("checkOut popup not  displyed");

		}

		return test_sreps;

	}

	public void verifyAccountDetails(WebDriver driver, ArrayList<String> test_steps) {
		try {
			String checkOutAccountDetails = "//label[contains(text(),'ACCOUNT DETAILS')]/../span[contains(text(),'Account')]";
			Wait.waitForElementToBeVisibile(By.xpath(checkOutAccountDetails), driver);
			String account = driver.findElement(By.xpath(checkOutAccountDetails)).getText();
			// assertEquals(accountDetails, checkOutAccountDetails, "Failed: To
			// verify Account Details");
			test_steps.add(" Verified Account details:" + account);
			reslogger.info(" Verified Account details:" + account);

		} catch (Exception e) {
			Utility.app_logs.info(e);

		}
	}

	public ArrayList<String> paymentCheckOutPopUpVerify(WebDriver driver, String title, String paymentMethod,
			String type, String accountDetails, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> details = new ArrayList<>();
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle), driver);
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);

		String titleDisplayed = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText();
		reslogger.info(" Verified Payment Page Title : " + titleDisplayed);
		assertEquals(titleDisplayed, title, "Failed: To verify Payment Page Title");
		test_steps.add(" Verified Payment Page Title :<b> " + title + "</b>");

		String currentdate = Utility.getCurrentDate("MM/dd/yyyy");
		String date = "(//input[contains(@data-bind,'value:PaymentDate')])[2]";
		Wait.waitForElementToBeVisibile(By.xpath(date), driver);
		String checkOutDate = driver.findElement(By.xpath(date)).getAttribute("value");
		test_steps.add(" Verified checkOutDate: " + checkOutDate);
		reslogger.info(" Verified checkOutDate :" + checkOutDate);
		assertEquals(checkOutDate, currentdate, "Failed: To verify Account Details");

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.folioBalance), driver);
		String folioBalence = res.folioBalance.getText().replace("$", "").trim();
		test_steps.add(" Verified folio Balence<b> " + folioBalence + "</b> ");
		reslogger.info(" Verifiedfolio Balence: " + folioBalence);

		clickonPaymentMetod(driver, test_steps);
		selectPaymentMethod(driver, paymentMethod, test_steps);
		verifyAccountDetails(driver, test_steps);
		String paymentTypeDisplayed = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.getText().trim();
		test_steps.add(" Verified payment Type:<b> " + paymentTypeDisplayed + "</b>");
		reslogger.info(" Verified payment Type:");
		assertEquals(paymentTypeDisplayed, type, "Failed: To verify Payment Type");
		String amountDisplayed = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText().trim();
		test_steps.add(" Verified displayed  Amount:<b> " + paymentTypeDisplayed + "</b>");
		reslogger.info(" Verified displayed  Amount:");
		String balanceDisplayed = null;
		String buttonExp = null;
		String buttonDisplayed = res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().trim();
		buttonDisplayed = buttonDisplayed.replace("$", "").replace("PAY", "").trim();
		test_steps.add(" Verified button displayed  Amount:<b> " + buttonDisplayed + "</b>");
		reslogger.info(" Verified button displayed  Amount:<b> " + buttonDisplayed + "</b>");
		assertEquals(buttonDisplayed, folioBalence, "Failed: To verify Payment Type");

		res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.click();
		test_steps.add(" Click on pament button");
		reslogger.info("  Click on pament button");

		return test_steps;

	}

    public ArrayList<String> proceedToBookingPayment(WebDriver driver, ArrayList<String> test_steps)
            throws InterruptedException {
        Elements_CPReservation res = new Elements_CPReservation(driver);
        Utility.ScrollToElement(res.CP_NewReservation_ProceedToBookingPayment_Button, driver);
        Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ProceedToBookingPayment_Button);
        Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_ProceedToBookingPayment_Button), driver);
        res.CP_NewReservation_ProceedToBookingPayment_Button.getText();
        res.CP_NewReservation_ProceedToBookingPayment_Button.click();
        test_steps.add("Clicking on  Proceed to Check-Out Payment Button");
        reslogger.info("Clicking on Proceed to Check-Out Payment Button");
        verifySpinerLoading(driver);
        return test_steps;
    }

	public ArrayList<String> proceedToCheckOutPayment(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckOut_Button, driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_ConfirmCheckOut_Button);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_Reservation_ConfirmCheckOut_Button), driver);
		res.CP_Reservation_ConfirmCheckOut_Button.getText();
		res.CP_Reservation_ConfirmCheckOut_Button.click();
		test_steps.add("Clicking on  Proceed to Check-Out Payment Button");
		reslogger.info("Clicking on Proceed to Check-Out Payment Button");
		return test_steps;
	}

    public void clickOnCheckOutPay(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException{
	    verifySpinerLoading(driver);
        Elements_CPReservation element = new Elements_CPReservation(driver);
        Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOut_Pay_Button);
        Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_Reservation_CheckOut_Pay_Button), driver);
        Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_Reservation_CheckOut_Pay_Button), driver);
        element.CP_Reservation_CheckOut_Pay_Button.click();
        test_steps.add("Clicking on Check-Out Pay Button");
        reslogger.info("Clicking on Check-Out Pay Button");
    }

    public void clickOnCheckOutSuccessfulCloseButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException{
	    verifySpinerLoading(driver);
        verifySpinerLoading(driver);
        verifySpinerLoading(driver);
        Elements_CPReservation element = new Elements_CPReservation(driver);
        Wait.WaitForElement(driver, OR_Reservation.checkOutButtonClose);
        Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkOutButtonClose), driver);
        Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.checkOutButtonClose), driver);
        element.checkOutButtonClose.click();
        test_steps.add("Clicking on Check-Out Successful Close Button");
        reslogger.info("Clicking on Check-Out Successful Close Button");
    }

	public ArrayList<String> verifycheckOutPaymentSuccessPopupVerify(WebDriver driver, String Authorizationtype,
			String checkOutSuccess, String Status, String checkOutPaymentMethod, ArrayList<String> test_steps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkOutPaymentDate), driver);
		String checkOutPopUpDate = reservation.checkOutPaymentDate.getText();

		String date = Utility.getCurrentDate("MM/dd/yy");

		assertEquals(checkOutPopUpDate, date, "Failed: To verify  Success Page Date");
		test_steps.add("  Verified Date of checkout : <b>" + date + "</b>");
		reslogger.info("  Verified Date of checkout : " + date);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkOutFolioBalence), driver);
		String checkOutFolioBalence = reservation.checkOutFolioBalence.getText();
		test_steps.add(" checkOut FolioBalence :" + checkOutFolioBalence);
		reslogger.info(" checkOut FolioBalence :" + checkOutFolioBalence);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkOutPaymentAmount), driver);
		String checkOutPaymentAmount = reservation.checkOutPaymentAmount.getText();
		test_steps.add(" checkOut PaymentAmount :" + checkOutPaymentAmount);
		reslogger.info(" checkOut PaymentAmount :" + checkOutPaymentAmount);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkOutPaymentType), driver);
		String checkOutPaymentType = reservation.checkOutPaymentType.getText();
		test_steps.add(" checkOut PaymentType :" + checkOutPaymentType);
		reslogger.info(" checkOut PaymentType :" + checkOutPaymentType);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkoutPaymentStatus), driver);
		String checkoutPaymentStatus = reservation.checkoutPaymentStatus.getText();
		test_steps.add(" checkOut PaymentStatus :" + checkoutPaymentStatus);
		reslogger.info(" checkOut PaymentStatus :" + checkoutPaymentStatus);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkOutPaymentMethod), driver);
		String checkOutPaymentmethod = reservation.checkOutPaymentMethod.getText();
		test_steps.add(" checkOut Paymentmethod :" + checkOutPaymentmethod);
		reslogger.info(" checkOut Paymentmethod :" + checkOutPaymentmethod);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkOutButtonClose), driver);
		reservation.checkOutButtonClose.click();
		test_steps.add("click on cancel button");
		reslogger.info("click on cancel button");

		return test_steps;

	}

	public void verifyCheckOutPopIsAppear(WebDriver driver, String AccountName, String Authorizationtype,
			String accountDetails, ArrayList<String> test_steps) throws Exception {

		try {
			boolean popupDisplayed = driver.findElements(By.xpath(OR_Reservation.NoShowPaymentPopupTitle)).size() > 0;
			// Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle),
			// driver);
			if (popupDisplayed) {
				/*
				 * String accountDetails = "Account -" + AccountName + " " +
				 * (AccountNumber); Utility.app_logs.info("accountDetails:" +
				 * accountDetails);
				 */
				paymentCheckOutPopUpVerify(driver, "Check Out Payment", AccountName, Authorizationtype, accountDetails,
						test_steps);

				verifycheckOutPaymentSuccessPopupVerify(driver, Authorizationtype, "Check Out Payment", "Approved",
						accountDetails, test_steps);

			} else {
				test_steps.add("CheckOutPayment Method Not avilable");
				reslogger.info("CheckOutPayment Method Not avilable");
			}

		} catch (Exception e) {
			test_steps.add("CheckOutPayment Method Not avilable");
			reslogger.info("CheckOutPayment Method Not avilable");
		}

	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getAccountName ' Description: get attached account name
	 * after creation of new reservation ' Input parameters: Webdriver ' Return
	 * value: String ' Created By: Adnan Ghaffar ' Created On: 11-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public String getAccountName(WebDriver driver) throws InterruptedException {
		Elements_CPReservation element = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR.VERIFY_ACCOUNT_NAME);
		Wait.waitForElementToBeVisibile(By.xpath(OR.VERIFY_ACCOUNT_NAME), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR.VERIFY_ACCOUNT_NAME), driver);
		Utility.ScrollToElement_NoWait(element.verifyAccountName, driver);
		String accountName = element.verifyAccountName.getText();
		return accountName;
	}

	public void clickFolio(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
	    verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Utility.ScrollToElement(res.CP_NewReservation_Folio, driver);
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Folio);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Folio), driver);
            Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_Folio), driver);
			res.CP_NewReservation_Folio.click();
		} catch (Exception e) {
			Utility.ScrollToElement(res.COPY_CP_NewReservation_Folio, driver);
            Wait.WaitForElement(driver, OR_Reservation.COPY_CP_NewReservation_Folio);
            Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.COPY_CP_NewReservation_Folio), driver);
            Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.COPY_CP_NewReservation_Folio), driver);
			res.COPY_CP_NewReservation_Folio.click();
		}
		test_steps.add("Click on Folio");
		reslogger.info("Click on Folio");
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: secondayGuestCheckInButtonClick ' Description: Checkin
	 * Button Click, Verification of Tab,With Option Available With/Without
	 * Guest Statement, Confirm Button Click ' Input parameters: WebDriver ,
	 * String, boolean ' Return value: ArrayList<String> ' Created By: Aqsa
	 * Manzoor ' Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> secondayGuestCheckoutButtonClick(WebDriver driver, String RoomClassName, String RoomNumber)
			throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();

		String checkoutConfirmationMessage = "Do you wish to settle all charges in the folio for " + RoomClassName
				+ ", room " + RoomNumber + "? If not, payment will be taken when the primary guest checks out.";
		Wait.WaitForElement(driver, OR_Reservation.CP_SECONDARYGUEST_CHECKOUTBUTTON);
		Utility.ScrollToElement(element.CP_SECONDARYGUEST_CHECKOUTBUTTON, driver);
		element.CP_SECONDARYGUEST_CHECKOUTBUTTON.click();
		test_steps.add("Secondary Guest Checkout Button Clicked");
		reslogger.info("Secondary Guest Checkout Button Clicked ");
		Wait.WaitForElement(driver, OR_Reservation.CP_SECONDARYGUEST_CHECKOUT_CONFIRMATIONPOPUP);
		assertEquals(element.CP_SECONDARYGUEST_CHECKOUT_CONFIRMATIONPOPUP.getText(), checkoutConfirmationMessage);
		test_steps.add("Secondary Guest Checkout Confirmation Message: " + checkoutConfirmationMessage + " Verified");
		reslogger.info("Secondary Guest Checkout Confirmation Message:: " + checkoutConfirmationMessage + " Verified");
		element.CP_CHECKOUT_CONFIRMATIONTAB_NOBUTTON.click();
		test_steps.add("Clicked No Button Checkout Confirmation Message");
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: secondayGuestCheckoutConfirm ' Description: In Checkut tab
	 * ->Checkout Confirm Button Click With Option Available With/Without Guest
	 * Statement ' Input parameters: WebDriver , String, boolean ' Return value:
	 * ArrayList<String> ' Created By: Aqsa Manzoor ' Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> secondayGuestCheckoutConfirm(WebDriver driver, String SecondaryGuestName,
			boolean generateGuestStatement) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.CP_SECONDARYGUEST_CHECKIN_CHECKOUTTAB_TITLENAME);
		assertEquals(element.CP_SECONDARYGUEST_CHECKIN_CHECKOUTTAB_TITLENAME.getText().replaceAll(" ", ""),
				SecondaryGuestName.replaceAll(" ", ""));
		test_steps.add("Secondary Guest Name: " + SecondaryGuestName + " Verified");
		reslogger.info("Secondary Guest Name: " + SecondaryGuestName + " Verified");
		if (!generateGuestStatement) {
			element.CP_CHECKOUT_GENERATEGUESTSTATEMENT_TOGGLE.click();
			test_steps.add("Generate guest Statement Toggle: "
					+ element.CP_CHECKOUT_GENERATEGUESTSTATEMENT_TOGGLE.isSelected());
			reslogger.info("Generate guest Statement Toggle: "
					+ element.CP_CHECKOUT_GENERATEGUESTSTATEMENT_TOGGLE.isSelected());
		}
		Wait.WaitForElement(driver, OR_Reservation.CP_CHECKOUT_CONFIRMCHECKOUT_BUTTON);
		Wait.explicit_wait_visibilityof_webelement(element.CP_CHECKOUT_CONFIRMCHECKOUT_BUTTON, driver);
		Wait.explicit_wait_elementToBeClickable(element.CP_CHECKOUT_CONFIRMCHECKOUT_BUTTON, driver);
		element.CP_CHECKOUT_CONFIRMCHECKOUT_BUTTON.click();
		test_steps.add("Click on checkout confrim buttton");
		return test_steps;

	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: getSecondaryGuestRoomNumber ' Description: Get the Room
	 * Number of Secondary Guest in Details pages ' Input parameters: WebDriver
	 * , ArrayList<String> , String ' Return value: String ' Created By: Aqsa
	 * Manzoor ' Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getSecondaryGuestRoomNumber(WebDriver driver, ArrayList test_steps, String IsAssign) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_SECONDARYGUEST_ROOMNUMBER);
		Wait.explicit_wait_visibilityof_webelement(element.CP_SECONDARYGUEST_ROOMNUMBER, driver);
		String roomNumber = element.CP_SECONDARYGUEST_ROOMNUMBER.getText();

		if (IsAssign.equalsIgnoreCase("No")) {
			if (roomNumber.equalsIgnoreCase("Unassigned")) {
				test_steps.add("Room Number is : Unassigned");
				reslogger.info("Room Number is : Unassigned");
			}
		} else {
			test_steps.add("Room Number is : " + roomNumber);
			reslogger.info("Room Number is : " + roomNumber);
		}
		return roomNumber;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyHistoryTabForPaymentDetail ' Description:
	 * Verification of History Tab Payment Line/Details With MC and updated to
	 * Cash ' Input parameters: WebDriver , ArrayList<String> , String , String
	 * , boolean , String , String , String , String ' Return value:
	 * ArryaList<String> ' Created By: Aqsa Manzoor ' Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> verifyHistoryTabForPaymentDetail(WebDriver driver, ArrayList<String> test_steps,
			String Date, String amount, boolean isPaymentMethodChanged, String PreviousPaymentMethod,
			String PaymentMethod, String CardNumber, String ExpDate) {
		String paymentHistoryDate = "//tbody[contains(@data-bind,'foreach:historyList')]//span[text()='Payment']/ancestor::tr/td/span[contains(@data-bind,'text:$parent.formatDate($data.logDate)')]";
		WebElement paymentHistoryDateElement = driver.findElement(By.xpath(paymentHistoryDate));

		String paymentHistoryDescription = null;
		WebElement paymentHistoryDescriptionElement;

		assertEquals(paymentHistoryDateElement.getText(), Date);
		reslogger.info("History Tab: Payment Date Verified: " + paymentHistoryDateElement.getText());
		test_steps.add("History Tab: Payment Date Verified: " + paymentHistoryDateElement.getText());
		String desc = null;
		if (PaymentMethod.equals("MC")) {
			paymentHistoryDescription = "//tbody[contains(@data-bind,'foreach:historyList')]//span[text()='Payment']/ancestor::tr/td/span[contains(@data-bind,'text:$data.description')]";
			paymentHistoryDescriptionElement = driver.findElement(By.xpath(paymentHistoryDescription));

			desc = "Made a deposit payment of $" + amount + " using " + PaymentMethod + " XXXX" + CardNumber + " ("
					+ ExpDate + ")";
			reslogger.info(desc);
			assertEquals(desc, paymentHistoryDescriptionElement.getText());
			reslogger.info("History Tab: Payment Description Verified: " + paymentHistoryDescriptionElement.getText());
			test_steps.add("History Tab: Payment Description Verified: <b>" + paymentHistoryDescriptionElement.getText()
					+ "</b>");
		}
		if (isPaymentMethodChanged) {
			if (PaymentMethod.equals("Cash")) {
				desc = "Changed payment method from " + PreviousPaymentMethod + " to " + PaymentMethod;
				paymentHistoryDescription = "(//tbody[contains(@data-bind,'foreach:historyList')]//span[text()='Payment']/ancestor::tr)[1]/td/span[contains(@data-bind,'text:$data.description')]";
				paymentHistoryDescriptionElement = driver.findElement(By.xpath(paymentHistoryDescription));
				assertEquals(desc, paymentHistoryDescriptionElement.getText());
				reslogger.info(
						"History Tab: Payment Description Verified: " + paymentHistoryDescriptionElement.getText());
				test_steps.add("History Tab: Payment Description Verified: <b>"
						+ paymentHistoryDescriptionElement.getText() + "</b>");
			}
		}
		return test_steps;
	}

	public void verify_DepositAmountTripSummary(WebDriver driver, ArrayList test_steps, String CheckInDate,
			String CheckOutDate, String Value, Double DepositAmount) throws ParseException, InterruptedException {
		SimpleDateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");
		Date dateObj1 = format1.parse(CheckInDate);
		Date dateObj2 = format1.parse(CheckOutDate);
		long diff = dateObj2.getTime() - dateObj1.getTime();
		int Nights = (int) (diff / (24 * 60 * 60 * 1000));
		reslogger.info("difference between days: " + Nights);
		Wait.wait3Second();
		String roomCharge = get_TripSummaryRoomChargesWithoutCurrency(driver, test_steps);
		Double d = Double.parseDouble(roomCharge);
		Double d1 = d / Nights;
		reslogger.info(d1);

		// String payments=DepositAmount;
		Double d2 = DepositAmount;
		reslogger.info(d2);

		if (Double.compare(d1, d2) == 0) {
			test_steps.add("Deposit policy for " + Value + " Night Room Charges is validated : " + d1);
			reslogger.info("Deposit policy for " + Value + " Night Room Charges is validated : " + d1);
		} else {
			test_steps.add("Deposit policy for " + Value + " Night Room Charges is not validated : " + d1);
			reslogger.info("Deposit policy for " + Value + " Night Room Charges is not validated : " + d1);
		}
	}

	public ArrayList<String> Verify_ReservationStatus_Status(WebDriver driver, ArrayList<String> test_steps,
			String Status) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_Reservation_StatusPanel_Status, driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_StatusPanel_Status, driver);

		// Verified History Tab No Show Entry
		reslogger.info("Status is: " + res.CP_Reservation_StatusPanel_Status.getText());
		reslogger.info("Matched Status is: " + Status);
		assertTrue(res.CP_Reservation_StatusPanel_Status.getText().toLowerCase().trim()
				.equals(Status.toLowerCase().trim()), "Failed: To verify Status");
		test_steps.add("  Verified Reservation Status: <b>" + Status + "</b>");
		reslogger.info("Verified Reservation Status: " + Status);

		return test_steps;

	}

	public void verifyUnassignedMsg(WebDriver driver, ArrayList<String> testSteps, String msg)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.RollBackPopupMsg);
		Wait.explicit_wait_visibilityof_webelement(res.RollBackMsg, driver);
		Utility.ScrollToElement(res.RollBackMsg, driver);
		String uassignedMsg = res.RollBackMsg.getText().replace("<br>", "").replaceAll("[\r\n]+", "");
		assertEquals(uassignedMsg.toLowerCase().trim(), (msg.toLowerCase().trim()),
				"Failed : Verify Unassigned Message");
		testSteps.add("Verified  Msg : <b>" + msg + "</b>");
		reslogger.info("Verified  :" + msg);
	}

	public String calculationOfDeposiAmountToBePaid(ArrayList<String> baseAmounts, String attr, String attrValue,
			String taxes, String totalRoomCharges) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountToBePaid = null;
		double paidAmount = 0.00;
		double taxesToAdd = 0.00;
		double taxesPerc = 0.00;
		if (!(taxes.equalsIgnoreCase("0")) && !(taxes.equalsIgnoreCase("0.0")) && !(taxes.equalsIgnoreCase("0.00"))) {
			double abc = (Double.parseDouble(taxes)) * 100;
			taxesPerc = abc / Double.parseDouble(totalRoomCharges);
		}
		if (attr.equalsIgnoreCase("First Night")) {
			for (String string : baseAmounts) {
				double amount = (Double.parseDouble(string)) * (Double.parseDouble(attrValue));
				paidAmount = paidAmount + amount;
			}
			if ((taxesPerc != 0) && (taxesPerc != 0.0) && (taxesPerc != 0.00)) {
				double abc = paidAmount * taxesPerc;
				taxesToAdd = abc / 100;
				paidAmount = paidAmount + taxesToAdd;
			}
		} else if (attr.equalsIgnoreCase("Fixed Amount")) {
			double rooms = Double.valueOf(baseAmounts.size());
			paidAmount = Double.parseDouble(attrValue) * rooms;
		} else if (attr.equalsIgnoreCase("Room Charges")) {
			double roomsCharges = Double.parseDouble(totalRoomCharges);
			paidAmount = (Double.parseDouble(attrValue) * roomsCharges) / 100;
		}

		amountToBePaid = df.format(paidAmount);
		return amountToBePaid;
	}

	public String calculationOfDeposiAmountToBePaid(String tripTotalCharges, String totalNights) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountToBePaid = null;
		double paidAmount = (Double.parseDouble(tripTotalCharges)) / (Double.parseDouble(totalNights));
		amountToBePaid = df.format(paidAmount);
		return amountToBePaid;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyPaymentMethodWithReservationInFolio ' Description:
	 * Verify the TakePayment Popup, Payment Method(Reservation) and Reservation
	 * Attached in Folio Pay' Input parameters: <WebDriver, ArrayList<String>
	 * ,String, String> ' Return value: <ArrayList<String>> ' Created By: <Aqsa
	 * Manzoor> ' Created On: <20/05/2020> *
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> verifyPaymentMethodWithReservationInFolio(WebDriver driver, ArrayList<String> test_steps,
			String PaymentMethod, String ReservationNumber) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String selectedPaymentMethod = "((//div[contains(@class,'payment-method')])[2]//span)[1]";
		Wait.WaitForElement(driver, selectedPaymentMethod);
		WebElement selectedPaymentMethodElement = driver.findElement(By.xpath(selectedPaymentMethod));
		Utility.ScrollToElement(selectedPaymentMethodElement, driver);
		Wait.wait2Second();
		System.out.print(" attached:" + PaymentMethod.contains(selectedPaymentMethodElement.getText()));

		assertEquals(PaymentMethod.contains(selectedPaymentMethodElement.getText()), true);

		reslogger.info("Selected Payment Method : " + PaymentMethod);
		test_steps.add("Selected Payment Method : " + PaymentMethod);

		String reservationFoundAttched = driver
				.findElement(By.xpath("//input[contains(@data-bind,'value:$parent.SelectedReservation')]"))
				.getAttribute("value");
		System.out.print(" Value attached:" + reservationFoundAttched);
		String reservationExpectecd = "Reservation - " + ReservationNumber;
		assertEquals(reservationFoundAttched, reservationExpectecd);
		reslogger.info("Reservation Attached Verified : " + reservationFoundAttched);
		test_steps.add("Reservation Attached Verified : " + reservationFoundAttched);

		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: payButtonClickInTakePayment ' DescriptionClick Pay Button
	 * In TakePayment Popup, selects Payment Method as Main on booelan and
	 * closes in on boolean in Folio Pay' Input parameters: <WebDriver,
	 * ArrayList<String> ,String, boolean,boolean> ' Return value:
	 * <ArrayList<String>> ' Created By: <Aqsa Manzoor> ' Created On:
	 * <20/05/2020> *
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> payButtonClickInTakePayment(WebDriver driver, ArrayList<String> test_steps, String amount,
			boolean isSetMainPaymentMethod, boolean isClose) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		String setAsMainPaymentMethod = "//span[text()='Set As Main Payment Method']/../input";
		JavascriptExecutor jse = (JavascriptExecutor) driver;

		if (isSetMainPaymentMethod) {
			if (!driver.findElement(By.xpath(setAsMainPaymentMethod)).isSelected()) {
				jse.executeScript("arguments[0].click(true);", driver.findElement(By.xpath(setAsMainPaymentMethod)));
				test_steps.add("Select set As Main Payment Method");
				reslogger.info("Select set As Main Payment Method");
			} else {
				test_steps.add("Already Selected set As Main Payment Method");
				reslogger.info("Already Selected set As Main Payment Method");
			}
		}
		String button = "//h4[text()='Take Payment']/../..//button[contains(text(),'" + amount + "')]";
		Wait.WaitForElement(driver, button);
		System.out.print("Amount:" + amount);
		WebElement payButtonElement = driver.findElement(By.xpath(button));
		Wait.waitForElementToBeClickable(By.xpath(button), driver);
		Utility.ScrollToElement(payButtonElement, driver);
		System.out.print("Text is :" + payButtonElement.getText());
		payButtonElement.click();
		test_steps.add("Click on Pay");
		reslogger.info("Click on Pay");
		String paymentSuccessfulTab = "//h4[contains(text(),'Successful')]";
		Wait.WaitForElement(driver, paymentSuccessfulTab);
		WebElement paymentSuccessfulTabElement = driver.findElement(By.xpath(paymentSuccessfulTab));
		System.out.print("Tab is:" + paymentSuccessfulTabElement.isDisplayed());
		assertEquals(paymentSuccessfulTabElement.isDisplayed(), true);
		test_steps.add("Payment Successul Tab Displayed");
		reslogger.info("Payment Successul Tab Displayed");

		if (isClose) {
			String close = "//h4[contains(text(),'Successful')]/../..//button[text()='Close']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Click on Close");
			reslogger.info("Click on Close");
		}
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickEditPaymentMethodInfo ' Description: Click Edit
	 * Button To Change Payment Method In Details Tab of Reservation ' Input
	 * parameters: WebDriver , ArrayList<String> ' Return value:
	 * ArrayList<String> ' Created By: Aqsa Manzoor ' Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> clickEditPaymentMethodInfo(WebDriver driver, ArrayList<String> steps)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(element.PAYMENTMETHOD_EDITBUTTON, driver);
		Wait.explicit_wait_elementToBeClickable(element.PAYMENTMETHOD_EDITBUTTON, driver);
		Utility.ScrollToElement(element.PAYMENTMETHOD_EDITBUTTON, driver);
		element.PAYMENTMETHOD_EDITBUTTON.click();
		reslogger.info("Click Payment Method Edit button");
		steps.add("Click Payment Method Edit button");
		return steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickSaveButtonAfterEditPaymentMethod ' Description: Click
	 * Save Button After Editing Payment Method ' Input parameters: WebDriver ,
	 * ArrayList<String> ' Return value: ArrayList<String> ' Created By: Aqsa
	 * Manzoor ' Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickSaveButtonAfterEditPaymentMethod(WebDriver driver, ArrayList<String> steps)
			throws InterruptedException {
		// Click Save Button
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.PAYMENTMETHOD_SAVEBUTTON);
		Utility.ScrollToElement(res.PAYMENTMETHOD_SAVEBUTTON, driver);
		res.PAYMENTMETHOD_SAVEBUTTON.click();
		reslogger.info("Clicked Save Button After Updating Payment Method");
		test_steps.add("Clicked Save Button After Updating Payment Method");
		assertEquals(res.Toaster_Message.getText(), "payment Information successfully saved");
		reslogger.info("Toaster Message: " + res.Toaster_Message.getText());
		test_steps.add("Toaster Message: " + res.Toaster_Message.getText());
		return steps;
	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: removeAttachedReservationInPayments ' Description: Click
	 * Cancel Button Icon In Payments TO Remove Attached Reservation as Payment
	 * Method ' Input parameters: WebDriver , ArrayList<String> ' Return value:
	 * ArrayList<String> ' Created By: Aqsa Manzoor ' Created On: 1-06-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> removeAttachedReservationInPayments(WebDriver driver, ArrayList<String> steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String cancelIcon = "//input[contains(@data-bind,'alue:$parent.SelectedReservatio')]/following-sibling::span//button";
		Wait.WaitForElement(driver, cancelIcon);
		WebElement cancelIconElement = driver.findElement(By.xpath(cancelIcon));
		Wait.waitForElementToBeClickable(By.xpath(cancelIcon), driver);
		cancelIconElement.click();
		reslogger.info("Reservation Attached Removed");
		test_steps.add("Reservation Attached Removed");
		Wait.wait10Second();
		return steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: enterAmountTakePayment ' Description: Enter Amount in Take
	 * Payment Popup Method ' Input parameters: WebDriver , ArrayList<String>,
	 * SString,String, ' Return value: ArrayList<String> ' Created By: Aqsa
	 * Manzoor ' Created On: 01-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> enterAmountTakePayment(WebDriver driver, ArrayList test_steps, String IsChangeInPayAmount,
			String ChangedAmountValue) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_Amount);
		String amount = res.CP_Reservation_Folio_TakePayment_Amount.getText().trim();
		Utility.app_logs.info("amount : " + amount);
		test_steps.add("Amount before Pay : " + amount);
		reslogger.info("Amount before Pay : " + amount);

		if (IsChangeInPayAmount.equalsIgnoreCase("Yes")) {
			test_steps.add("Change the pay amount value : Yes");
			reslogger.info("Change the pay amount value : Yes");
			res.CP_Reservation_Folio_TakePayment_Amount.clear();
			res.CP_Reservation_Folio_TakePayment_Amount.sendKeys(Keys.chord(Keys.CONTROL, "a"));
			res.CP_Reservation_Folio_TakePayment_Amount.sendKeys(ChangedAmountValue);
			test_steps.add("Enter the Change Amount Value : " + ChangedAmountValue);
			reslogger.info("Enter the Change Amount Value : " + ChangedAmountValue);
			amount = ChangedAmountValue;
		} else {
			test_steps.add("paying the amount : " + amount);
			reslogger.info("paying the amount : " + amount);
		}

		return test_steps;
	}

	public String getReservationConfirmationNumberFromBanner(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		String confirmationNumber = "//span[contains(@data-bind,'text:confirmationNumber')]";
		Wait.WaitForElement(driver, confirmationNumber);
		WebElement confirmationNumberElement = driver.findElement(By.xpath(confirmationNumber));
		Wait.wait5Second();
		String confirmation = confirmationNumberElement.getText();
		test_steps.add("Confirmation Number : <b>" + confirmation + "</b>");
		reslogger.info("Confirmation Number : <b>" + confirmation + "</b>");
		return confirmation;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verificationPaymentWindow ' Description: Verification of
	 * Check In Payment Window and Check Out Payment Window ' Input parameters:
	 * String ' Return Amount as String ' Created By: Gangotri ' Created On:
	 * June 3 2020 ' Get Amount, Balance and Type in Array List called
	 * "ArrayList<String> amount= new ArrayList<String>();"
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> verificationPaymentWindow(WebDriver driver, ArrayList<String> test_steps, String title,
			String expiryDate, String nameOnCard, String cardNo, String PaymentType, String Type, String totalFee,
			String tripTax, String Percentage, String PolicyType, String TripPaid) throws InterruptedException {

		// getting amount,balance and type in ArrayList
		ArrayList<String> amount = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopupTitle);
		Utility.ScrollToElement(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle, driver);
		// Verified No Show Payment Page Title
		assertEquals(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText().toLowerCase().trim(),
				(title.toLowerCase().trim()), "Failed: To verify  Payment Page Title");
		test_steps.add(" Verified Header:<b> " + title + "</b>");
		reslogger.info(" Verified Header: " + title);
		String path = "//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + PaymentType + "']";
		WebElement paymentElement = driver.findElement(By.xpath(path));

		// Get Amount
		String getAmount = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		reslogger.info(getAmount);
		amount.add(getAmount.trim());

		// Get Balance
		String balance = null;
		if (PolicyType.equals("No Show") || PolicyType.equals("Cancel")) {
			balance = res.NoShowCancelPaymentPopup_Balance.getText().replace("$", "");
			amount.add(balance);
		} else if (PolicyType.equals("Check In")) {
			balance = res.CheckInPaymentPopup_Balance.getText().replace("$", "");
			amount.add(balance.trim());
		}

		assertEquals(getAmount.trim(), totalFee.trim(), "Failed: To verify Payment Page Amount: " + totalFee);
		test_steps.add("Verified Amount : <b> " + totalFee + "</b>");
		reslogger.info(" Verified Amount: " + totalFee);
		assertEquals(balance.trim(), totalFee.trim(), "Failed: To verify Payment Page Balance: " + totalFee);
		test_steps.add("Verified Balance : <b> " + totalFee + "</b>");
		reslogger.info(" Verified Balance: " + totalFee);
		// Verified Type

		String type = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.getText().toLowerCase().trim();
		amount.add(type.trim());
		reslogger.info(amount);
		assertEquals(type, (Type.toLowerCase().trim()), "Failed: To verify  Page Type: " + Type);
		test_steps.add(" Verified Type : <b> " + Type + "</b>");
		reslogger.info(" Verified Type: " + Type);

		if (PaymentType.equals("MC")) {
			// Verified No Show Payment Page Payment Method
			assertTrue(paymentElement.isDisplayed(), "Failed: To verify Payment Method");
			test_steps.add(" Verified Payment Method:<b> " + PaymentType + "</b> ");
			reslogger.info(" Verified Payment Method: " + PaymentType);

			// Verified No Show Payment Page Card No
			JavascriptExecutor executor = (JavascriptExecutor) driver;
			String CardNo = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_CardNumber);
			reslogger.info(CardNo);
			// Verify Card Number
			assertTrue(CardNo.contains(cardNo), "Failed: To verify Card Number");
			test_steps.add(" Verified Card Number: <b>" + CardNo + "</b>");
			reslogger.info(" Verified Card Number");
			String NameOnCard = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_NameOnCard);
			reslogger.info(NameOnCard);

			// Verify Name on Card Number
			assertEquals(NameOnCard.toLowerCase().trim(), (nameOnCard.toLowerCase().trim()),
					"Failed: To verify Name on Card ");
			test_steps.add("Verified Name on Card:<b>  " + nameOnCard + "</b>");
			reslogger.info(" Verified Name on Card");

			String ExpiryDate = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_Expiry);
			reslogger.info(ExpiryDate);

			// Verify Expiry Date
			assertEquals(ExpiryDate, (expiryDate), "Failed: To verify Expiry Date ");
			test_steps.add(" Verified Expiry Date:<b> " + ExpiryDate + "</b>");
			reslogger.info(" Verified Expiry Date");
		}
		if (PolicyType.equals("No Show") || PolicyType.equals("Cancel")) {
			// Verified Log as External Payment
			boolean isExistLogAsExternal = res.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox.isEnabled();
			if (isExistLogAsExternal) {
				if (!res.NoShowPaymentPopup_Date.isEnabled()) {
					test_steps.add(" Verified  Date Field Disabled ");
					reslogger.info(" Verified  Date Field Disabled ");
				}
				if (!res.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox.isSelected()) {
					res.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox.click();
					reslogger.info("Click  Log as External Payment Check Box");
					// Verified No Show Payment Log Button
					assertTrue(res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.isDisplayed(),
							"Failed: To verify Payment Page Log Button");
					test_steps.add(" Verified  Log/Pay Button ");
					reslogger.info("' Verified  Log/Pay Button ");
					assertTrue(res.NoShowPaymentPopup_Date.isEnabled(), "Failed: To verify Payment Page Date Field");
					test_steps.add(" Verified  Date Field  Enabled");
					reslogger.info(" Verified  Date Field  Enabled ");
				}

			}
		}
		if (PolicyType.equals("Check In")) {
			// Verified Override Check-In Amount
			res.CP_OverrideCheckInAmountCheckBox.click();
			test_steps.add(" Checked Override Check-In Amount Check Box");
			reslogger.info(" Checked Override Check-In Amount Check Box");
			boolean isAmountEnabled = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.isEnabled();
			assertEquals(isAmountEnabled, true, "Failed : to verify Amount field Enabled");
			test_steps.add(" Amount Field  Enabled");
			reslogger.info(" Amount Field  Enabled");
			boolean isTypeEnabled = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.isEnabled();
			assertEquals(isTypeEnabled, true, "Failed : to verify Type field Enabled");
			test_steps.add(" Type Field  Enabled");
			reslogger.info(" Type Field  Enabled");
			res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
			test_steps.add(" Click on Type Drop Down Box");
			reslogger.info(" Click on Type Drop Down Box");
			String[] types = { "Authorization Only", "Capture" };
			for (int i = 0; i < res.CP_CheckInTypeOptions.size(); i++) {
				assertEquals(res.CP_CheckInTypeOptions.get(i).getText().toLowerCase().trim(),
						(types[i].toLowerCase().trim()), "Failed: To verify Type Field");
				test_steps.add(" Verified  Type Option: <b>" + res.CP_CheckInTypeOptions.get(i).getText() + "</b>");
				reslogger.info(" Verified  Date Field  Enabled " + res.CP_CheckInTypeOptions.get(i).getText());
			}

			res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
			test_steps.add(" Click on Type Drop Down Box");
			reslogger.info(" Click on Type Drop Down Box");

			boolean iExist = res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.isDisplayed();
			assertEquals(iExist, true, "Failed : to verify Authrozied Button");
			test_steps.add(" Authrozied Button  Enabled");
			reslogger.info(" Authrozied Button  Enabled");
		}
		return amount;

	}

	public void verifyPolicyDetailsOnPaymentPopup(WebDriver driver, ArrayList<String> test_steps, String policyType,
			String policyName, String policyText) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.cancelResPopupPolicyName), driver);
			String policyNameDisplayed = res.cancelResPopupPolicyName.getText();
			Actions act = new Actions(driver);
			act.moveToElement(res.cancelResPopupPolicyName).perform();
			String policyNameAtToolTip = res.cancelResPopupPolicyToolTipName.getText();
			String policyTextAtToolTip = res.cancelResPopupPolicyToolTipText.getText();

			assertEquals(policyNameDisplayed, policyName, "Failed - Verify policy name on payments popup");
			test_steps.add("Successfully verified policy name on payments popup as <b>" + policyNameDisplayed + "</b>");
			if (policyType.equalsIgnoreCase("Cancellation")) {
				assertEquals(policyNameAtToolTip, policyName, "Failed - Verify policy name on payments popup");
				test_steps.add("Successfully verified policy name on payments popup tool tip as <b>"
						+ policyNameAtToolTip + "</b>");
			}
			assertEquals(policyTextAtToolTip, policyText, "Failed - Verify policy name on payments popup");
			test_steps.add("Successfully verified policy text on payments popup tool tip as <b>" + policyTextAtToolTip
					+ "</b>");

		} catch (Exception e) {
			Utility.app_logs.info(e);
		}
	}

	public boolean verifyTextExistsFromListOfRecords(List<WebElement> elements, String textExp) {
		boolean textFound = false;
		for (WebElement webElement : elements) {
			String textDisplayed = webElement.getText();
			if (textDisplayed.equalsIgnoreCase(textExp)) {
				textFound = true;
				break;
			}
		}
		return textFound;
	}

	public void verifyPaymentDescriptionAtGuestHistory(WebDriver driver, ArrayList<String> test_steps,
			String categoryExp, String descExp) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.folioHistoryTabSearchBox), driver);
		boolean category = verifyTextExistsFromListOfRecords(reservation.guestHistoryCategories, categoryExp);
		boolean description = verifyTextExistsFromListOfRecords(reservation.guestHistoryDescriptions, descExp);

		assertEquals(category, true, "Failed to verify payment description");
		test_steps.add("Successfully verified payment category as : <b>" + categoryExp + "</b>");

		assertEquals(description, true, "Failed to verify payment description");
		test_steps.add("Successfully verified payment category as : <b>" + descExp + "</b>");

	}

	public void verifyBalanceAmountAtFolio(WebDriver driver, ArrayList<String> test_steps, String balanceAmount) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		balanceAmount = df.format(Double.parseDouble(balanceAmount));

		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			String balanceAmountDisplayed = get_Balance(driver, test_steps);
			assertEquals(balanceAmountDisplayed, balanceAmount, "Failed - Verify paid amount at summary");
			test_steps.add(
					"Successfully verified balance amount displayed at folio as <b>" + balanceAmountDisplayed + "</b>");
			reslogger.info("Successfully verified balance amount displayed at folio as " + balanceAmountDisplayed);

		} catch (Exception e) {

		}
	}

	public int getFolioLineItemTRSize(WebDriver driver, ArrayList<String> test_steps) {
		int trSize = 0;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		trSize = res.folioLineItemTableTrSize.size();
		test_steps.add("Total Folio Line Item Table Row Is: <b>" + trSize + "</b>");
		reslogger.info("Total Folio Line Item Table Row Is: " + trSize);
		return trSize;

	}

	public void verifyFolioLineItemTRSize(WebDriver driver, ArrayList<String> test_steps, int size) {
		int trSize = 0;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		trSize = res.folioLineItemTableTrSize.size();
		assertEquals(trSize, size, "Failed - Verify Folio Line Item Table Size");
		test_steps.add("Successfully verified Folio Line Item Table Size <b>" + trSize + "</b>");
		reslogger.info("Successfully verified Folio Line Item Table Size " + trSize);

	}

	public void clickCheckoutWithoutPaymentButton(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkoutWithoutPayment);
		Wait.explicit_wait_visibilityof_webelement(res.checkoutWithoutPayment, driver);
		res.checkoutWithoutPayment.click();
		String buttonName = res.checkoutWithoutPayment.getText().split(" ")[0];
		test_steps.add("Clicking on " + buttonName + " Button ");
		reslogger.info("Clicking on " + buttonName + " Button ");
	}

	public void clickOnAddTask(WebDriver driver) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddTask);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_AddTask), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_AddTask), driver);
		Utility.ScrollToElement_NoWait(res.CP_AddTask, driver);
	}

	public void enterMailingAddressWithEmail(WebDriver driver, ArrayList<String> test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String PhoneNumber, String AltenativePhone, String Email,
			String Account, String AccountType, String Address1, String Address2, String Address3, String City,
			String Country, String State, String PostalCode, String IsGuesProfile) throws InterruptedException {
		enter_GuestName(driver, test_steps, Salutation, GuestFirstName, GuestLastName);
		uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
		enter_Phone(driver, test_steps, PhoneNumber, AltenativePhone);
		// enter_Phone(driver, test_steps, PhoneNumber, AltenativePhone);
		enter_Email(driver, test_steps, Email);
		enter_Address(driver, test_steps, Address1, Address2, Address3);
		enter_City(driver, test_steps, City);
		select_Country(driver, test_steps, Country);
		select_State(driver, test_steps, State);
		enter_PostalCode(driver, test_steps, PostalCode);
		enter_Account(driver, test_steps, Account, AccountType);
		enter_Account(driver, test_steps, Account, AccountType);
	}

	public void manualEmail(WebDriver driver, String to, String subject, String attachment, String body, String contentFields, String content) throws InterruptedException {
	    verifySpinerLoading(driver);
        Elements_Reservation ReservationPage = new Elements_Reservation(driver);
        Wait.explicit_wait_visibilityof_webelement(ReservationPage.Click_Email_icon, driver);
        Utility.ScrollToElement(ReservationPage.Click_Email_icon, driver);
        ReservationPage.Click_Email_icon.click();
        Utility.app_logs.info("Click Mail Icon");
        Wait.explicit_wait_xpath(OR.Verify_Send_Email_Popup, driver);
        Wait.explicit_wait_absenceofelement(OR.Verify_loading_popup_mailContentPopUp, driver);
        Wait.wait3Second();
        ReservationPage.Get_email_Id.clear();
        ReservationPage.Get_email_Id.sendKeys(to);

        if(attachment != null && !attachment.equals("")) {
            ReservationPage.clickAttachmentDropDown.click();
            By attachmentSelector = By.xpath(String.format("(//span[contains(text(),'%s')])[3]", attachment));
            Wait.waitForElementToBeClickable(attachmentSelector, driver);
            driver.findElement(attachmentSelector).click();
        }

        if(subject != null && !subject.equals("")) {
            ReservationPage.subjectTextField.clear();
            ReservationPage.subjectTextField.sendKeys(subject);
        }

        if(body != null && !body.equals("")) {
            ReservationPage.bodyText.click();
            By bodySelector = By.xpath(String.format("//label[contains(text(),'Body')]/following-sibling::div//span[contains(text(),'%s')]", body));
            Wait.waitForElementToBeClickable(bodySelector, driver);
            driver.findElement(bodySelector).click();
        }

        if(contentFields != null && !contentFields.equals("")) {
            String[] customFieldArray = contentFields.split("\\|");
            for(String customField : customFieldArray) {
                ReservationPage.customFieldButton.click();
                By fieldSelector = By.xpath(String.format("//label[contains(text(),'Custom Fields')]//following-sibling::div//span[text()='%s']", customField));
                Wait.waitForElementToBeClickable(fieldSelector, driver);
                driver.findElement(fieldSelector).click();
            }
        }

        if(content != null && !content.equals("")) {
            driver.switchTo().frame(driver.findElement(By.xpath("//iframe[contains(@title,'Rich Text Editor')]")));
            try {
                String locator = "//body/div[last()]|//body/p[last()]";
                Wait.WaitForElement(driver, locator);
                WebElement element = driver.findElement(By.xpath(locator));
                JavascriptExecutor executor = (JavascriptExecutor) driver;
                executor.executeScript("arguments[0].innerHTML = arguments[1]", element, content);
            } catch (Exception e) {

            }
            driver.switchTo().defaultContent();
        }

        Wait.wait5Second();
        ReservationPage.Click_Send_Email.click();
        Utility.app_logs.info("Click Send Email ");
    }

	public void manualEmail(WebDriver driver, String Email, String Attachment) throws InterruptedException {

		Elements_Reservation ReservationPage = new Elements_Reservation(driver);
		Wait.explicit_wait_visibilityof_webelement(ReservationPage.Click_Email_icon, driver);
		Utility.ScrollToElement(ReservationPage.Click_Email_icon, driver);

		ReservationPage.Click_Email_icon.click();
		Utility.app_logs.info("Click Mail Icon");
		Wait.explicit_wait_xpath(OR.Verify_Send_Email_Popup, driver);
		Wait.explicit_wait_absenceofelement(OR.Verify_loading_popup_mailContentPopUp, driver);
		Wait.wait3Second();
		String GetEmailid = ReservationPage.Get_email_Id.getText();
		reslogger.info(GetEmailid + "" + GetEmailid);
		Wait.wait3Second();
		ReservationPage.Get_email_Id.clear();
		Wait.wait3Second();
		ReservationPage.Get_email_Id.sendKeys(Email);
		reslogger.info(GetEmailid + "" + GetEmailid);

		if (Attachment.equalsIgnoreCase("") || Attachment.equals(null)) {
			Utility.app_logs.info("No Attachment");
		} else {
			ReservationPage.clickAttachmentDropDown.click();
			reslogger.info("clicked on drop down successfully");
			/*
			 * selectGuestRegistration customFieldButton bodyText
			 */
			ReservationPage.selectGuestRegistration.click();
			// ReservationPage.customFieldButton.click();
			String bodyText = ReservationPage.bodyText.getText();
			reslogger.info(bodyText + "" + bodyText);

			// new
			// Select(ReservationPage.Select_Attachment).selectByVisibleText(Attachment);
		}
		Wait.wait5Second();
		ReservationPage.Click_Send_Email.click();
		Utility.app_logs.info("Click Send Email ");
		Wait.wait10Second();
	}

	public void clickOnDropDownIcon(WebDriver driver, ArrayList test_steps) throws Exception {
		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.reportsIcon), driver);
			Wait.wait2Second();
			res.reportsIcon.click();
			test_steps.add("Click on reservation Report");
			reslogger.info("Click on reservation Report");

		} catch (Exception e) {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.reportsIcon), driver);
			Wait.wait2Second();
			res.reportsIcon.click();
			test_steps.add("Click on reservation Report");
			reslogger.info("Click on reservation Report");
		}

	}

	public void selectGuestStatements(WebDriver driver, ArrayList test_steps) throws Exception {
		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.guestStatements), driver);
			Wait.wait2Second();
			res.guestStatements.click();
			Wait.wait3Second();
			res.allRooms.click();
			test_steps.add("Click on guestStatements In Report dropdown");
			reslogger.info("Click on guestStatements Report dropdown");
			// Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.allRooms),
			// driver);
			Wait.wait2Second();

		} catch (Exception e) {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.guestStatements), driver);
			Wait.wait2Second();
			res.guestStatements.click();
			Wait.wait3Second();
			res.allRooms.click();
			test_steps.add("Click on guestStatements In Report dropdown");
			reslogger.info("Click on guestStatements Report dropdown");
			// Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.allRooms),
			// driver);
			Wait.wait2Second();
		}

	}

	public void selectAllRoom(WebDriver driver, ArrayList test_steps) throws Exception {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		String pdfFileInText = null;
		List<String> ReportContant = new ArrayList<String>();
		String dataPath = null;
		File theNewestFile = null;
		File getFile = null;
		// res.guestStatements.click();
		// Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.allRooms),
		// driver);
		Wait.wait3Second();
		// res.allRooms.click();
		test_steps.add("Click on AllRooms In Report dropdown");
		reslogger.info("Click on AllRooms Report dropdown");

		String loading = "(//div[@class='ir-loader-in'])";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");

		Utility.app_logs.info(driver.findElements(By.xpath("//a[@class='logo_des']/img")).size());
		if (driver.findElements(By.xpath("//a[@class='logo_des']/img")).size() > 0) {
			String loc = "//div//embed[@id='embdreportViewer']";
			try {
				ArrayList<String> alltabs = new ArrayList<>(driver.getWindowHandles());
				driver.switchTo().window(alltabs.get(alltabs.size() - 1));

				String src = driver.findElement(By.xpath(loc)).getAttribute("src");
				Utility.app_logs.info(src);
				driver.get(src);
				driver.findElement(By.xpath(loc)).click();

			} catch (Exception e) {
				Utility.app_logs.info(e);
			}
		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: clickReservationReports ' Description: <This method will
	 * click on the reservation Report in new reservation Page> ' Input
	 * parameters:(WebDriver ) ' Return value: ArrayList<String> ' Created By:
	 * <Adhnan Ghaffar> ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickReservationReports(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.reservationReports);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.reservationReports), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.reservationReports), driver);
		res.reservationReports.click();
		test_steps.add("Click on reports");
		reslogger.info("Click on reports");
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: clickGuestRegistrationOption ' Description: This method
	 * will click on the guest Registration Option in Reports Dropdown in new
	 * reservation Page ' Input parameters:(WebDriver,) ' Return value:
	 * ArrayList<String> ' Created By: <Adhnan Ghaffar> ' Created On:
	 * <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickGuestRegistrationOption(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.guestRegistration);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.guestRegistration), driver);
		res.guestRegistration.click();

		test_steps.add("Click on Guest Registration Report button");
		reslogger.info("Click on Guest Registration Report button");

		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: dirtyRoomCheckInPopUpVerification ' Description: This
	 * method will wait for the Dirty room popup during check In ' Input
	 * parameters:(WebDriver, ArrayList<String> ) ' Return value:
	 * ArrayList<String> ' Created By: Adhnan Ghaffar ' Created On: 06/16/2020
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> dirtyRoomCheckInPopUpVerification(WebDriver driver, ArrayList<String> teststeps)
			throws InterruptedException {
		boolean isRoomDirty = Utility.isElementPresent(driver,
				By.xpath(OR_Reservation.CPRESERVATION_CHECKIN_DIRTYROOMMODALPOPUP));

		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);

		if (isRoomDirty) {
			return clickConfirmButtonOfDirtyPopupModel(driver, teststeps, isRoomDirty);
		} else {
			test_steps.add("No Dirty Room Popup Appear");
			reslogger.info("No Dirty Room Popup Appear");
		}
		return teststeps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: clickConfirmButtonOfDirtyPopupModel ' Description: This
	 * method will click on the confirm button of Dirty Room Popup ' Input
	 * parameters:(WebDriver, ArrayList<String> ) ' Return value:
	 * ArrayList<String> ' Created By: <Adhnan Ghaffar> ' Created On:
	 * <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickConfirmButtonOfDirtyPopupModel(WebDriver driver, ArrayList<String> test_steps,
			boolean isPresent) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		if (isPresent) {

			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckIn_ModelPopConfirmButton);
			Utility.ScrollToElement(res.CP_Reservation_CheckIn_ModelPopConfirmButton, driver);
			test_steps.add("One or more of the selected room(s) is Dirty");
			reslogger.info("One or more of the selected room(s) is Dirty");
			res.CP_Reservation_CheckIn_ModelPopConfirmButton.click();
			test_steps.add("Click Confirm Button");
			reslogger.info("Click Confirm Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
			reslogger.info("Loading Done");
		} else {
			test_steps.add("One or more of the selected room(s) is Not Dirty ");
			reslogger.info("One or more of the selected room(s) is Not Dirty ");
		}
		return test_steps;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <clickCancelDepositPaymentPopupButton> ' Description:
	 * <This method will click Cancel button in deposit payment poppup> ' Input
	 * parameters: <WebDriver driver> ' Return value: <ArrayList<String>> '
	 * Created By: <Farhan Ghaffar> ' Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickCancelDepositPaymentPopupButton(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.cancelDepositPaymentPopupButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.cancelDepositPaymentPopupButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.cancelDepositPaymentPopupButton), driver);
		Utility.ScrollToElement_NoWait(res.cancelDepositPaymentPopupButton, driver);
		res.cancelDepositPaymentPopupButton.click();
		testSteps.add("Clicking on Cancel Deposit Payment Button");
		reslogger.info("Clicking on Cancel Deposit Payment Button");
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <clickDepositPaymentPopupPaymentButton> ' Description:
	 * <This method will click pyment button in deposit payment poppup> ' Input
	 * parameters: <WebDriver driver> ' Return value: <ArrayList<String>> '
	 * Created By: <Farhan Ghaffar> ' Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickDepositPaymentPopupPaymentButton(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.depositPaymentPopupPaymentButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.depositPaymentPopupPaymentButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.depositPaymentPopupPaymentButton), driver);
		Utility.ScrollToElement_NoWait(res.depositPaymentPopupPaymentButton, driver);
		res.depositPaymentPopupPaymentButton.click();
		testSteps.add("Clicking on Cancel Deposit Payment Button");
		reslogger.info("Clicking on Cancel Deposit Payment Button");
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getDepositPaymentPopupTransactionDecline> ' Description:
	 * <This method will check if transaction decline message is displaying in
	 * deposit payment poppup or not> ' Input parameters: <WebDriver driver> '
	 * Return value: <ArrayList<String>> ' Created By: <Farhan Ghaffar> '
	 * Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> getDepositPaymentPopupTransactionDecline(WebDriver driver) throws InterruptedException {
		ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.depositPaymentPopupTransactionDecline);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.depositPaymentPopupTransactionDecline), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.depositPaymentPopupTransactionDecline), driver);
		Utility.ScrollToElement_NoWait(res.depositPaymentPopupTransactionDecline, driver);
		Boolean isDisplayed = res.depositPaymentPopupTransactionDecline.isDisplayed();
		reslogger.info("isDisplayed : " + isDisplayed);
		if (isDisplayed) {
			testSteps.add("Deposit payment transaction decline message dislaying");
			reslogger.info("Deposit payment transaction decline message dislaying");

		} else {
			testSteps.add("Deposit payment transaction decline message is not dislaying");
			reslogger.info("Deposit payment transaction decline message is not dislaying");

		}
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getDepositPaymentPopupHeading> ' Description: <This
	 * method will return heading diplay messagein deposit payment poppup> '
	 * Input parameters: <WebDriver driver> ' Return value: <ArrayList<String>>
	 * ' Created By: <Farhan Ghaffar> ' Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getDepositPaymentPopupBalance(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.depositPaymentPopupBalance);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.depositPaymentPopupBalance), driver);
		Utility.ScrollToElement_NoWait(res.depositPaymentPopupBalance, driver);
		String balance = res.depositPaymentPopupBalance.getText();
		reslogger.info("balance : " + balance);
		return balance;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getDepositPaymentPopupPolicy> ' Description: <This method
	 * will return deposit policy in deposit payment poppup> ' Input parameters:
	 * <WebDriver driver> ' Return value: <String> ' Created By: <Farhan
	 * Ghaffar> ' Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getDepositPaymentPopupPolicy(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.depositPaymentPopupPolicy);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.depositPaymentPopupPolicy), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.depositPaymentPopupPolicy), driver);
		Utility.ScrollToElement_NoWait(res.depositPaymentPopupPolicy, driver);
		String policy = res.depositPaymentPopupPolicy.getText();
		reslogger.info("policy : " + policy);
		return policy;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getDepositPaymentPopupAmount> ' Description: <This method
	 * will return deposit amount in deposit payment poppup> ' Input parameters:
	 * <WebDriver driver> ' Return value: <String> ' Created By: <Farhan
	 * Ghaffar> ' Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getDepositPaymentPopupAmount(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement_ID(driver, OR_Reservation.depositPaymentPopupAmount);
		Wait.waitForElementToBeVisibile(By.id(OR_Reservation.depositPaymentPopupAmount), driver);
		Utility.ScrollToElement_NoWait(res.depositPaymentPopupAmount, driver);
		String amount = res.depositPaymentPopupAmount.getText();
		reslogger.info("amount : " + amount);
		return amount;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <clickSaveAsQuoteButton> ' Description: <This method will
	 * click save as quote button in deposit payment poppup> ' Input parameters:
	 * <WebDriver driver> ' Return value: <ArrayList<String>> ' Created By:
	 * <Farhan Ghaffar> ' Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickSaveAsQuoteButton(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.saveAsQuoteButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.saveAsQuoteButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.saveAsQuoteButton), driver);
		Utility.ScrollToElement_NoWait(res.saveAsQuoteButton, driver);
		res.saveAsQuoteButton.click();
		testSteps.add("Clicking on Save As Quote Button");
		reslogger.info("Clicking on Save As Quote Button");
		verifySpinerLoading(driver);
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getReservationStatusOnDetailSection> ' Description: <This
	 * method will return reservation status in details section> ' Input
	 * parameters: <WebDriver driver> ' Return value: String>> ' Created By:
	 * <Farhan Ghaffar> ' Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getReservationStatusOnDetailSection(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.reservationStatusOnDetailSection);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.reservationStatusOnDetailSection), driver);
		String status = res.reservationStatusOnDetailSection.getText();
		reslogger.info("status : " + status);
		return status;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getReservationNumberOnDetailSection> ' Description: <This
	 * method will return reservation number in details section> ' Input
	 * parameters: <WebDriver driver> ' Return value: String>> ' Created By:
	 * <Farhan Ghaffar> ' Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getReservationNumberOnDetailSection(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.reservationNumberOnDetailSection);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.reservationNumberOnDetailSection), driver);
		String reservationNumber = res.reservationNumberOnDetailSection.getText();
		reslogger.info("reservationNumber : " + reservationNumber);
		return reservationNumber;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <updateCCNumberNumber> ' Description: <This method will
	 * update credit card number in detail section> ' Input parameters:
	 * <WebDriver driver, String newCCNumber> ' Return value:
	 * <ArrayList<String>> ' Created By: <Farhan Ghaffar> ' Created On:
	 * <06/17/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> updateCCNumberNumber(WebDriver driver, String cardNumber)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> testStep = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.editPaymentInfoButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.editPaymentInfoButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.editPaymentInfoButton), driver);
		Utility.ScrollToElement_NoWait(element.editPaymentInfoButton, driver);
		element.editPaymentInfoButton.click();
		testStep.add("Click on edit payment info");
		reslogger.info("Click on edit payment info");

		Wait.WaitForElement(driver, OR_Reservation.decryptLink);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.decryptLink), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.decryptLink), driver);
		Utility.ScrollToElement_NoWait(element.decryptLink, driver);
		element.decryptLink.click();
		testStep.add("Click on decrypt cc number button");
		reslogger.info("Click on decrypt cc number button");

		Wait.WaitForElement(driver, OR_Reservation.ccNumberInput);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ccNumberInput), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ccNumberInput), driver);
		Utility.ScrollToElement_NoWait(element.ccNumberInput, driver);
		element.ccNumberInput.clear();
		element.ccNumberInput.sendKeys(cardNumber);
		testStep.add("Entered card Number : " + cardNumber);
		reslogger.info("Entered card Number : " + cardNumber);

		Wait.WaitForElement(driver, OR_Reservation.updateGuestProfileInput);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.updateGuestProfileInput), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.updateGuestProfileInput), driver);
		Utility.ScrollToElement_NoWait(element.updateGuestProfileInput, driver);
		element.updateGuestProfileInput.click();
		testStep.add("Click on update guest profile button");
		reslogger.info("Click on update guest profile button");

		Wait.WaitForElement(driver, OR_Reservation.paymentInfoSaveButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.paymentInfoSaveButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.paymentInfoSaveButton), driver);
		element.paymentInfoSaveButton.click();
		testStep.add("Click on payment info save button");
		reslogger.info("Click on payment info save button");

		return testStep;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getDepositDue> ' Description: <This method will return
	 * deposit due amount> ' Input parameters: <WebDriver driver> ' Return
	 * value: <String> ' Created By: <Farhan Ghaffar> ' Created On: <06/17/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getDepositDue(WebDriver driver) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> testStep = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.depositDue);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.depositDue), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.depositDue), driver);
		Utility.ScrollToElement_NoWait(element.depositDue, driver);

		String depositDue = element.depositDue.getText();
		reslogger.info("depositDue : " + depositDue);

		return depositDue;

	}

	public ArrayList<String> verifyReservationTask(WebDriver driver, String taskName, String detail, String dueOn,
			String status, ArrayList<String> test_steps) throws InterruptedException {
		Elements_Reservation reservationPage = new Elements_Reservation(driver);
		Wait.wait5Second();
		String path = "//task-info//span[contains(text(),'" + taskName
				+ "')]/..//ancestor::td/..//following-sibling::td[contains(text(),'" + detail
				+ "')]/following-sibling::td[contains(text(),'" + dueOn + "')]/following-sibling::td[(text()='" + status
				+ "')]";
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		// Verified No Show Fee line item
		assertTrue(element.isDisplayed(), "Failed: To Verify Reservation Task");
		test_steps.add(" Verified TASK TYPE:<b>  " + taskName + "</b>");
		reslogger.info("Verified  TASK TYPE: " + taskName);
		test_steps.add(" Verified  DETAILS:<b>  " + detail + "</b>");
		reslogger.info(" Verified  DETAILS: " + detail);
		test_steps.add("Verified  DUE ON:<b>  " + dueOn + "</b>");
		reslogger.info(" Verified DUE ON: " + dueOn);
		test_steps.add(" Verified STATUS:<b>  " + status + "</b>");
		reslogger.info(" Verified  STATUS: " + status);
		return test_steps;

	}

	public void dirtyPopupModelClickConfirmButton(WebDriver driver, ArrayList test_steps, boolean isPresent)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		if (isPresent) {
			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckIn_ModelPopConfirmButton);
			Utility.ScrollToElement(res.CP_Reservation_CheckIn_ModelPopConfirmButton, driver);
			test_steps.add("The room status is dirty");
			reslogger.info("The room status is dirty");
			res.CP_Reservation_CheckIn_ModelPopConfirmButton.click();
			test_steps.add("Click Confirm Button");
			reslogger.info("Click Confirm Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
			reslogger.info("Loading Done");
		} else {
			test_steps.add("The room status is not  dirty");
			reslogger.info("The room status is not dirty");
		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: checkLogasExternalPayment ' Description: This method will
	 * check Log as External Payment in Check In Popup during CheckIn. ' Input
	 * parameters: (driver, String , String) ' Return value: void ' Created By:
	 * Adhnan Ghaffar ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void checkLogasExternalPayment(WebDriver driver, ArrayList test_steps, boolean isCheck)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		if (!res.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox.isSelected()) {
			if (isCheck) {

				res.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox.click();
				for (int i = 0; i < 5; i++) {
					reslogger.info(res.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox.isSelected());
					reslogger.info(driver.findElement(By.xpath(
							OR_Reservation.NoShowPaymentPopup_ExternalPaymentCheckBox + "//preceding-sibling::input"))
							.isSelected());
					if (driver.findElement(By.xpath(
							OR_Reservation.NoShowPaymentPopup_ExternalPaymentCheckBox + "//preceding-sibling::input"))
							.isSelected()) {
						break;
					}
				}
				assertEquals(driver.findElement(By.xpath(
						OR_Reservation.NoShowPaymentPopup_ExternalPaymentCheckBox + "//preceding-sibling::input"))
						.isSelected(), true);
			}
			test_steps.add("Log as External Payment: " + driver
					.findElement(By.xpath(
							OR_Reservation.NoShowPaymentPopup_ExternalPaymentCheckBox + "//preceding-sibling::input"))
					.isSelected());
			reslogger.info("Log as External Payment: " + driver
					.findElement(By.xpath(
							OR_Reservation.NoShowPaymentPopup_ExternalPaymentCheckBox + "//preceding-sibling::input"))
					.isSelected());
		}
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: clickGuestStatementOption ' Description: This method will
	 * click on Guest Statement Option form the report dropdown in reservation.
	 * ' Input parameters: (driver) ' Return value: ArrayList<String> ' Created
	 * By: Adhnan Ghaffar ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickGuestStatementOption(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.guestStatement);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.guestStatement), driver);
		res.guestStatement.click();

		test_steps.add("Click on Guest Statement Report button");
		reslogger.info("Click on Guest Statement Report button");

		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: reportDisplayed ' Description: This method will check that
	 * the report is displayed or not. ' Input parameters: (driver) ' Return
	 * value: ArrayList<String> ' Created By: Adhnan Ghaffar ' Created On:
	 * <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public boolean reportDisplayed(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {

		boolean isExist = Utility.isElementPresent(driver, By.id("embdreportViewer"));
		System.out.print(" is Exist:" + isExist);
		if (isExist) {
			testSteps.add("PDF Report is Displayed");
			Utility.app_logs.info("PDF Report is Displayed");
		} else {
			testSteps.add("PDF Report is Not Displayed");
			Utility.app_logs.info("PDF Report is Not Displayed");
		}
		return isExist;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: downloadReport ' Description: This method will download
	 * the report. ' Input parameters: (driver) ' Return value: void ' Created
	 * By: Adhnan Ghaffar ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void downloadReport(WebDriver driver) throws InterruptedException {

		String dataPath = driver.findElement(By.id("embdreportViewer")).getAttribute("src");
		driver.get(dataPath);
		String fileName = Utility.download_status(driver);
		System.out.print("File Name:" + fileName);

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: verifyDataExistInReport ' Description: This method will
	 * verify data exist in single line in the given array of lines. ' Input
	 * parameters: (driver, String[], String, boolean) ' Return value: String '
	 * Created By: Adhnan Ghaffar ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String verifyDataExistInReport(WebDriver driver, String[] lines, String data, boolean equals)
			throws InterruptedException {

		boolean found = false;
		int i = 0;
		for (String line : lines) {
			// Utility.app_logs.info("line : " + i + " " + line);
			// Utility.app_logs.info("'" +line.trim() + "'" );
			// Utility.app_logs.info("'" +data + "'" );
			if (!equals) {
				if (line.trim().contains(data)) {
					Utility.app_logs.info("line : " + i + " " + line);
					found = true;
					return line;
				}
			} else {
				if (line.trim().equals(data)) {
					Utility.app_logs.info("line : " + i + " " + line);
					found = true;
					return line;
				}
			}
			i++;
		}
		assertTrue(found, "Failed: Required Data (" + data + ") not found");
		return null;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: verifyDataExistInTwoLinesInReport ' Description: This
	 * method will verify the required data exist in any two lines of given list
	 * of lines. ' Input parameters: (driver,String[], String, String, boolean)
	 * ' Return value: String ' Created By: Adhnan Ghaffar ' Created On:
	 * <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String verifyDataExistInTwoLinesInReport(WebDriver driver, String[] lines, String searchData, String data,
			boolean equals) throws InterruptedException {

		boolean found = false;
		int i = 0;
		String dataLine = null;
		for (String line : lines) {
			// Utility.app_logs.info("line : " + i + " " + line);
			// Utility.app_logs.info("'" + line.trim() + "'");
			// Utility.app_logs.info("'" + data + "'");
			if (line.trim().contains(searchData)) {
				dataLine = line + lines[i + 1];
				Utility.app_logs.info("'" + dataLine + "'");
				if (!equals) {
					if (dataLine.trim().contains(data)) {
						found = true;
						return line;
					}
				} else {
					if (dataLine.trim().equals(data)) {
						Utility.app_logs.info("line : " + i + " " + line);
						found = true;
						return line;
					}
				}
			}

			i++;
		}
		assertTrue(found, "Failed: Required Data (" + data + ") not found");
		return null;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: waitTillNumberOfTabsExist ' Description: This method will
	 * wait untill the specific number of tabs exit (usually wait for report's
	 * tab) ' Input parameters: (driver, int) ' Return value: void ' Created By:
	 * Adhnan Ghaffar ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void waitTillNumberOfTabsExist(WebDriver driver, int size) throws InterruptedException {
		ArrayList<String> tabs2 = new ArrayList<String>(driver.getWindowHandles());
		int i = 0;
		while (tabs2.size() < size && i < 10) {
			Wait.wait2Second();
			tabs2 = new ArrayList<String>(driver.getWindowHandles());
		}
		assertTrue(tabs2.size() >= size, "Failed: Number of tabs are not " + size);

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: <getBalance> ' Description: <This method will get the
	 * balance of the label> ' Input parameters:(WebDriver, String ) ' Return
	 * value: String ' Created By: <Adhnan Ghaffar> ' Created On: <06/02/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getBalance(WebDriver driver, String label) throws InterruptedException {
		String xpath = "//label[text()='" + label + "']//parent::div//span[@class='pamt']";
		Wait.WaitForElement(driver, xpath);
		WebElement amount = driver.findElement(By.xpath(xpath));
		Wait.explicit_wait_visibilityof_webelement(amount, driver);
		Utility.ScrollToElement(amount, driver);
		return amount.getText().trim();
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: clickFolioOptions ' Description: <This method will clcik
	 * on Folio Options Tab> ' Input parameters:(WebDriver) ' Return value:
	 * ArrayList<String> ' Created By: <Adhnan Ghaffar> ' Created On:
	 * <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickFolioOptions(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.FOLIO_OPTIONS_TAB);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.FOLIO_OPTIONS_TAB), driver);
		res.FOLIO_OPTIONS_TAB.click();

		testSteps.add("Click 'Folio Options' Tab");
		reslogger.info("Click 'Folio Options' Tab");
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: clickFolioDetails ' Description: <This method will clcik
	 * on Folio Details Tab> ' Input parameters:(WebDriver) ' Return value:
	 * ArrayList<String> ' Created By: <Adhnan Ghaffar> ' Created On:
	 * <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickFolioDetails(WebDriver driver) {

		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.FOLIO_DETAILS_TAB);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.FOLIO_DETAILS_TAB), driver);
		reservation.FOLIO_DETAILS_TAB.click();

		testSteps.add("Click 'Folio Details' Tab");
		reslogger.info("Click 'Folio Details' Tab");
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: suppressAccountFolioPrintingCheckBox ' Description: <This
	 * method will Click 'Suppress Account Folio Printing' CheckBox> ' Input
	 * parameters:(WebDriver, boolean ) ' Return value: ArrayList<String> '
	 * Created By: <Adhnan Ghaffar> ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> suppressAccountFolioPrintingCheckBox(WebDriver driver, boolean check)
			throws InterruptedException {

		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.SUPPRESS_ACCOUNT_FOLIO_PRINTING_CHECKBOX);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.SUPPRESS_ACCOUNT_FOLIO_PRINTING_CHECKBOX), driver);
		Utility.ScrollToElement(reservation.SUPPRESS_ACCOUNT_FOLIO_PRINTING_CHECKBOX, driver);
		String status = "Checked";
		if (check) {
			if (!reservation.SUPPRESS_ACCOUNT_FOLIO_PRINTING_CHECKBOX.isSelected()) {
				reservation.SUPPRESS_ACCOUNT_FOLIO_PRINTING_CHECKBOX.click();
				testSteps.add("Click 'Suppress Account Folio Printing' CheckBox");
				reslogger.info("Click 'Suppress Account Folio Printing' CheckBox");
				Folio folio = new Folio();
				testSteps.addAll(folio.ClickSaveFolioItemsButton(driver));
			}
		} else if (reservation.SUPPRESS_ACCOUNT_FOLIO_PRINTING_CHECKBOX.isSelected()) {
			status = "Unchecked";
			reservation.SUPPRESS_ACCOUNT_FOLIO_PRINTING_CHECKBOX.click();
			testSteps.add("Click 'Suppress Account Folio Printing' CheckBox");
			reslogger.info("Click 'Suppress Account Folio Printing' CheckBox");
			Folio folio = new Folio();
			test_steps.addAll(folio.ClickSaveFolioItemsButton(driver));
		}
		assertEquals(check, reservation.SUPPRESS_ACCOUNT_FOLIO_PRINTING_CHECKBOX.isSelected(),
				"Failed : .SUPPRESS ACCOUNT FOLIO PRINTING CHECKBOX is not in Required State");
		testSteps.add("'Suppress Account Folio Printing' CheckBox is '" + status + "'");
		reslogger.info("'Suppress Account Folio Printing' CheckBox is '" + status + "'");
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: selectAccount ' Description: This method will associate
	 * account to the reservation. ' Input parameters: (driver, ArrayList<String
	 * , String, String, String) ' Return value: void ' Created By: Adhnan
	 * Ghaffar ' Created On: <06/12/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void selectAccount(WebDriver driver, ArrayList<String> testSteps, String accountName, String accountNumber,
			String accountType) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Account);
		String accountdisplay = "//label[contains(text(),'Account')]//..//i[starts-with(@class,'rightIcon demo-icon icon-pencil')]";
		WebElement ele = driver.findElement(By.xpath(accountdisplay));
		if (!ele.isDisplayed()) {
			if (accountName.equalsIgnoreCase("") || accountName.isEmpty()) {
				Utility.app_logs.info("No Account");
			} else {
				res.CP_NewReservation_Account.sendKeys(accountName);
				testSteps.add("Enter Account : " + accountName);
				reslogger.info("Enter Account : " + accountName);
				Wait.wait2Second();
				String account = "//span[text()='" + accountNumber.trim() + "']//parent::div";
				// "//b[text()='" + Account.trim() + "']//..//..//..";

				Wait.WaitForElement(driver, account);
				driver.findElement(By.xpath(account)).click();
				String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]//following-sibling::div//button[contains(text(),'Yes')]";
				Wait.WaitForElement(driver, dataYes);
				driver.findElement(By.xpath(dataYes)).click();
				testSteps.add(
						"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
				reslogger.info(
						"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
				Wait.wait2Second();
				String policyYes = "//div[contains(text(),'Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?')]/following-sibling::div//button[contains(text(),'Yes')]";

				try {
					// Wait.WaitForElement(driver, policyYes);
					Wait.wait2Second();
					driver.findElement(By.xpath(policyYes)).click();
					testSteps.add(
							"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes");
					reslogger.info(
							"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes");

				} catch (Exception e) {
					// TODO: handle exception
				}

			}
		} else {
			testSteps.add("Account Aleady exists");
			reslogger.info("Account Aleady exists");
		}
	}

	private void roomOccupiedWithOtherReservation(WebDriver driver, boolean isRoomBooked) throws InterruptedException {
		int count = 0;
		List<String> OccupiedRooms = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'checked in to this room')]";
		isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
		while (isRoomBooked) {
			reslogger.info("Occupied: " + path);
			res.CP_Reservation_CheckInOkButton.click();
			reslogger.info("Click Ok Button");
			String dropDownBoxPath = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//button";
			Wait.WaitForElement(driver, dropDownBoxPath);
			WebElement dropdownElement = driver.findElement(By.xpath(dropDownBoxPath));
			Utility.ScrollToElement(dropdownElement, driver);
			dropdownElement.click();
			reslogger.info("Click Drop Down Box");
			String dropDownSize = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li";
			Wait.WaitForElement(driver, dropDownSize);
			int count1 = driver.findElements(By.xpath(dropDownSize)).size();
			reslogger.info("Count is: " + count1);
			Random random = new Random();
			randomNumber = random.nextInt(count1 - 1) + 1;
			reslogger.info("count : " + count1);
			reslogger.info("randomNumber : " + randomNumber);
			String roomNumber = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li["
					+ randomNumber + "]/a/span";
			reslogger.info(roomNumber);
			Wait.waitUntilPresenceOfElementLocated(roomNumber, driver);
			Utility.ScrollToElement(driver.findElement(By.xpath(roomNumber)), driver);
			driver.findElement(By.xpath(roomNumber)).click();
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			reslogger.info("Click Confirm CheckIn Button");
			isRoomBooked = Utility.isElementDisplayed(driver, By.xpath(path));
			boolean isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.cP_ReservationDirtyMsg));
			if (!isRoomBooked) {
				reslogger.info("Not Occuied");
				break;
			} else if (isRoomDirty) {
				dirtyPopupModelClickConfirmButton(driver, test_steps, isRoomDirty);
			}

		}

	}

	private void roomUnAssigned(WebDriver driver, boolean isExist) throws InterruptedException {
		// int count = 0;

		List<String> OccupiedRooms = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		while (isExist) {
			isRoomUnAssigned = true;
			Wait.wait5Second();
			Utility.ScrollToElement(res.cP_Reservation_CheckINUassigned, driver);
			res.cP_Reservation_CheckINUassigned.click();
			reslogger.info("Click UnAssigned Drop Down Box");
			String path = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li";
			List<WebElement> ele = driver.findElements(By.xpath(path));
			int count1 = ele.size();
			reslogger.info("Count is: " + count1);
			Random random = new Random();
			randomNumber = random.nextInt(count1 - 1) + 1;
			reslogger.info("count : " + count1);
			reslogger.info("randomNumber : " + randomNumber);
			String roomNumber = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li["
					+ randomNumber + "]/a/span";
			Wait.WaitForElement(driver, roomNumber);
			Utility.ScrollToElement(driver.findElement(By.xpath(roomNumber)), driver);
			driver.findElement(By.xpath(roomNumber)).click();
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			reslogger.info("Click Confirm CheckIn Button");
			isExist = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
			reslogger.info("UnAssigned Exist or Not: " + isExist);
			boolean isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.cP_ReservationDirtyMsg));

			if (!isExist) {
				break;
			} else if (isRoomDirty) {
				dirtyPopupModelClickConfirmButton(driver, test_steps, isRoomDirty);
			}
		}
		int count2 = 0;
		String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'checked in to this room')]";
		Wait.wait5Second();
		boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));

		while (isRoomBooked) {
			reslogger.info("Occupied: " + path);
			res.CP_Reservation_CheckInOkButton.click();
			reslogger.info("Click Ok Button");
			String dropDownBoxPath = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//button";
			Wait.WaitForElement(driver, dropDownBoxPath);
			WebElement dropdownElement = driver.findElement(By.xpath(dropDownBoxPath));
			Utility.ScrollToElement(dropdownElement, driver);
			dropdownElement.click();
			reslogger.info("Room is Dirty");
			String dropDownSize = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li";
			Wait.WaitForElement(driver, dropDownSize);
			int count1 = driver.findElements(By.xpath(dropDownSize)).size();
			reslogger.info("Count is: " + count1);
			Random random = new Random();
			randomNumber = random.nextInt(count1 - 1) + 1;
			reslogger.info("count : " + count1);
			reslogger.info("randomNumber : " + randomNumber);
			String roomNumber = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li["
					+ randomNumber + "]/a/span";
			Wait.WaitForElement(driver, roomNumber);
			Utility.ScrollToElement(driver.findElement(By.xpath(roomNumber)), driver);
			driver.findElement(By.xpath(roomNumber)).click();
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			isRoomBooked = Utility.isElementDisplayed(driver, By.xpath(path));
			reslogger.info("Room is Again Dirty or Not: " + isRoomBooked);
			boolean isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.cP_ReservationDirtyMsg));

			if (!isRoomBooked) {

				break;
			} else if (isRoomDirty) {
				dirtyPopupModelClickConfirmButton(driver, test_steps, isRoomDirty);
			}
		}

	}

	public String completeCheckInProcessSingleRev(WebDriver driver, ArrayList test_steps) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		String buttonName = null;
		if (res.CP_Reservation_ConfirmCheckIn_Button.isEnabled()) {
			confirmCheckIn = true;
			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckIn_Button, driver);
			buttonName = res.CP_Reservation_ConfirmCheckIn_Button.getText();
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			test_steps.add("Clicking on  Confirm Check-In Button");
			reslogger.info("Clicking on Confirm  Check-In Button");
			boolean isUnassigned = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
			reslogger.info("IsUnassigned:" + isUnassigned);
			String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'checked in to this room')]";
			boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
			reslogger.info("isRoomBooked:" + isRoomBooked);
			if (isUnassigned) {
				roomUnAssigned(driver, isUnassigned);
			}
			if (isRoomBooked) {
				roomOccupiedWithOtherReservation(driver, isRoomBooked);

			}
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);

			isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.cP_ReservationDirtyMsg));
			reslogger.info("isRoomDirty:" + isRoomDirty);

			if (isRoomDirty) {
				dirtyPopupModelClickConfirmButton(driver, test_steps, isRoomDirty);
			}

		} else if (res.CP_Reservation_ConfirmCheckInPayment_Button.isEnabled()) {
			confirmCheckInWithPayment = true;

			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckInPayment_Button, driver);
			buttonName = res.CP_Reservation_ConfirmCheckInPayment_Button.getText();
			res.CP_Reservation_ConfirmCheckInPayment_Button.click();
			test_steps.add("Clicking on  Proceed to Check-In Payment Button");
			reslogger.info("Clicking on Proceed to Check-In Payment Button");

			boolean isUnassigned = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
			reslogger.info("isUnassigned:" + isUnassigned);
			String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'checked in to this room')]";
			boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
			reslogger.info("isRoomBooked:" + isRoomBooked);
			if (isUnassigned) {
				roomUnAssigned(driver, isUnassigned);
			}
			if (isRoomBooked) {
				roomOccupiedWithOtherReservation(driver, isRoomBooked);

			}
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
			isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.cP_ReservationDirtyMsg));
			reslogger.info("isRoomDirty:" + isRoomDirty);
			if (isRoomDirty) {
				dirtyPopupModelClickConfirmButton(driver, test_steps, isRoomDirty);
			}
		}

		return buttonName;
	}


	public void verifyDepositDueAmount(WebDriver driver, ArrayList<String> test_steps, String depositAmount) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		depositAmount = df.format(Double.parseDouble(depositAmount));
		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			String deposiDueAmountDisplayed = getDepositDueAmount(driver);
			deposiDueAmountDisplayed.trim();
			reslogger.info("Captured Deposit Due Amount: " + deposiDueAmountDisplayed);
			assertEquals(deposiDueAmountDisplayed, depositAmount, "Failed - Verify deposit due amount at summary");
			test_steps.add("Successfully verified deposit due amount displayed at trip summary as <b>"
					+ deposiDueAmountDisplayed + "</b>");
			reslogger.info("Successfully verified deposit due amount displayed at trip summary as <b>"
					+ deposiDueAmountDisplayed + "</b>");

		} catch (Exception e) {

		}
	}

	public void verifySpinerLoading(WebDriver driver) throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Wait.wait1Second();
		int count = 0;

		try {
			reslogger.info("in try");
			while (count < 20) {
				reslogger.info(count);
				if (!reservation.SpinerLoading.isDisplayed()) {
					break;
				}
				count = count + 1;
				Wait.wait2Second();
			}
		} catch (Exception e) {
			reslogger.info("in cathc");
		}
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: secondayGuestCheckInButtonClick ' Description: Checkin
	 * Button Click, Verification of Tab,With Option Available With/Without
	 * Guest Statement, Confirm Button Click ' Input parameters: WebDriver ,
	 * String, boolean ' Return value: ArrayList<String> ' Created By: Aqsa
	 * Manzoor ' Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> enterSecondaryGuestInfo(WebDriver driver, ArrayList<String> test_steps, String Salutation,
			String GuestFirstName, String GuestLastName) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_SECONDARYGUEST_SALUTATION);
		Wait.explicit_wait_visibilityof_webelement(res.CP_SECONDARYGUEST_SALUTATION, driver);
		Wait.explicit_wait_elementToBeClickable(res.CP_SECONDARYGUEST_SALUTATION, driver);
		Utility.ScrollToElement(res.CP_SECONDARYGUEST_SALUTATION, driver);
		res.CP_SECONDARYGUEST_SALUTATION.click();
		String sal = "((//button[contains(@title,'Select')]//span[text()='Select'])[1]/parent::button/following-sibling::div//span[contains(text(),'"
				+ Salutation + "')]/../..)[1]";
		Wait.WaitForElement(driver, sal);
		driver.findElement(By.xpath(sal)).click();

		Wait.WaitForElement(driver, OR_Reservation.CP_SECONDARYGUEST_FIRSTNAME);
		res.CP_SECONDARYGUEST_FIRSTNAME.sendKeys(GuestFirstName);
		test_steps.add("Secondary Guest First Name : <b>" + GuestFirstName + "</b>");
		reslogger.info("Secondary Guest First Name : <b>" + GuestFirstName + "</b>");

		Wait.WaitForElement(driver, OR_Reservation.CP_SECONDARYGUEST_LASTNAME);
		try {
			res.CP_SECONDARYGUEST_LASTNAME.sendKeys(GuestLastName);
			test_steps.add("Secondary Guest Last Name : <b>" + GuestLastName + "</b>");
			reslogger.info("Secondary Guest Last Name : <b>" + GuestLastName + "</b>");
		} catch (Exception e) {
			test_steps.add("Secondary Guest Last Name : Element Not Interactable");
			reslogger.info("Secondary Guest Last Name : Element Not Interactable");

		}
		return test_steps;
	}

	public String reservationStatus(WebDriver driver) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GetReservationStatus);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GetReservationStatus), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GetReservationStatus), driver);
		String status = reservation.GetReservationStatus.getText();
		return status;
	}

	public void switchTab(WebDriver driver) throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Wait.wait10Second();
		ArrayList<String> tabs2 = new ArrayList<String>(driver.getWindowHandles());
		driver.switchTo().window(tabs2.get(1));
		driver.close();
		driver.switchTo().window(tabs2.get(0));
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: secondayGuestCheckoutButtonClick ' Description: Checkout
	 * Button Click & Verification of Confirmation Message ' Input parameters:
	 * WebDriver , String, String ' Return value: ArrayList<String> ' Created
	 * By: Aqsa Manzoor ' Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickOnConfirmCheckInButton(WebDriver driver) throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckInConfirmButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CheckInConfirmButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CheckInConfirmButton), driver);
		Utility.ScrollToElement(reservation.CheckInConfirmButton, driver);
		reservation.CheckInConfirmButton.click();
		testSteps.add("Click on confirm checkin button");
		reslogger.info("Click on confirm checkin button");
		try {
			System.err.println();
			Wait.wait2Second();
			if (reservation.checkInDirtyRoomPopup.isDisplayed()) {
				reslogger.info("diryt room popup is showing");
			}
			reservation.checkInDirtyRoomPopup.click();
		} catch (Exception isDirtyRoomException) {
			reslogger.info("Reservation checked in catch block");

		}
		return testSteps;
	}

	public ArrayList<String> clickOnCheckInButton(WebDriver driver, boolean isClick, boolean isEnabled)
			throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckInButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CheckInButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CheckInButton), driver);
		Utility.ScrollToElement_NoWait(reservation.CheckInButton, driver);
		assertEquals(reservation.CheckInButton.isEnabled(), isEnabled, "Faile: checkin button is disabled");
		testSteps.add("Is checkin button isEnabled? " + isEnabled);
		if (isClick) {
			reservation.CheckInButton.click();
			testSteps.add("Click on check in button");
		}
		return testSteps;
	}

	public String getRoomChargesInTripSummaryBeforeCreateReservation(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GetRoomChargesInTripSummaryBeforeCreateReservation);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GetRoomChargesInTripSummaryBeforeCreateReservation),
				driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GetRoomChargesInTripSummaryBeforeCreateReservation),
				driver);
		return element.GetRoomChargesInTripSummaryBeforeCreateReservation.getText();
	}

	public void takePaymentAuthorization(WebDriver driver, ArrayList<String> test_steps, String title, String policyFor,
			String amount, String folioName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		DecimalFormat df = new DecimalFormat("0.00");
		String typeDisplayed = null, buttonDisplayed = null, buttonExp = null, balanceDisplayed = null,
				folioNames = null;
		folioNames = "//h4[text()='Take Payment']/../..//span[@class='filter-option pull-left'][(text()='" + folioName
				+ "')]";
		WebElement element = driver.findElement(By.xpath(folioNames));
		reslogger.info("Folio Name is: " + folioName);
		if (title.contains("Take Payment")) {
			if (policyFor.equalsIgnoreCase("Authorization Only")) {
				String authorized = "Authorize";
				reslogger.info(authorized.toUpperCase());
				double amount2 = Double.parseDouble(amount);
				reslogger.info(df.format(amount2));
				buttonExp = authorized.toUpperCase() + " $ " + df.format(amount2);
				reslogger.info("Button Name is: " + buttonExp);
			}

			String path = "//ul[@class='dropdown-menu inner']//span[contains(text(),'" + policyFor + "')]";
			res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
			driver.findElement(By.xpath(path)).click();
			typeDisplayed = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.getText().trim();
			buttonDisplayed = res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().trim();
			assertEquals(typeDisplayed, policyFor, "Failed: To verify  type");
			test_steps.add(" Verified Take Payment type is :<b> " + policyFor + "</b>");
			reslogger.info(" Verified Take Payment type is : " + policyFor);

			assertEquals(buttonDisplayed, buttonExp, "Failed: To verify Button for " + buttonDisplayed);
			test_steps.add(" Verified button text as :<b> " + buttonDisplayed + "</b>");
			reslogger.info(" Verified button text as :<b> " + buttonDisplayed + "</b>");

			assertTrue(element.isDisplayed(), "Failed: To verify folio name " + folioName);
			test_steps.add(" Verified Folio Name as :<b> " + folioName + "</b>");
			reslogger.info(" Verified Folio Name as :<b> " + folioName + "</b>");

		}
	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: getSecondaryGuestRoomNumber ' Description: Get the Room
	 * Number of Secondary Guest in Details pages ' Input parameters: WebDriver
	 * , ArrayList<String> , String ' Return value: String ' Created By: Aqsa
	 * Manzoor ' Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public void authorizedSuccessVerification(WebDriver driver, ArrayList<String> test_steps, String title, String date,
			String folio, String balance, String amount, String type, String paymentMethod, String lastFourDigit,
			String nameOnCard, String expiryDate, String status, String note) throws InterruptedException {
		Wait.wait10Second();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopupTitle);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle), driver);
		try {

			String titleDisplayed = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText();
			assertEquals(titleDisplayed, title, "Failed: To verify Payment Page Title");
			test_steps.add(" Verified Authorization  Page Title :<b> " + title + "</b>");
			reslogger.info(" Verified Authorization  Page Title : " + titleDisplayed);

			reslogger.info(res.authorizationSuccess_Date.getText());
			reslogger.info(date);
			assertEquals(res.authorizationSuccess_Date.getText(), (date), "Failed: To verify  Success Page Date");
			test_steps.add("  Verified Date: <b>" + date + "</b>");
			reslogger.info("  Verified Date: " + date);

			assertEquals(res.authorizationSuccess_Folio.getText().trim(), folio.trim(),
					"Failed: To verify Success Page Balance");
			test_steps.add(" Verified Folio: <b>" + folio + "</b>");
			reslogger.info("  Verified Folio: " + folio);

			String balanceAmount = "$ " + balance + "";
			assertEquals(res.authorizationSuccess_Balance.getText().trim(), balanceAmount.trim(),
					"Failed: To verify Success Page Balance");
			test_steps.add(" Verified Balance: <b>" + balance + "</b>");
			reslogger.info("  Verified Balance: " + balance);

			String amt = "$ " + amount + "";
			reslogger.info("Amount is: " + amt.trim());
			reslogger.info(res.authorizationSuccess_Amount.getText().trim());
			assertEquals(res.authorizationSuccess_Amount.getText().trim(), amt.trim(),
					"Failed: To verify  Success Page Amount: " + amount);
			test_steps.add("  Verified Amount: <b>" + amt + "</b>");
			reslogger.info("  Verified Amount: " + amt);

			assertEquals(res.authorizationSuccess_Type.getText().toLowerCase().trim(), type.toLowerCase().trim(),
					"Failed: To verify  Success Page Type");
			test_steps.add("  Verified Type: <b>" + type + "</b>");
			reslogger.info(" Verified Type: " + type);

			String paymentMethods = "" + paymentMethod + " - XXXX" + lastFourDigit + " (" + nameOnCard + ") (Exp. "
					+ expiryDate + ")";
			assertEquals(res.authorizationSuccess_PaymentMethod.getText().toLowerCase().trim(),
					paymentMethods.toLowerCase().trim(), "Failed: To verify Success Page Payment Method");
			test_steps.add("  Verified Payment Method: <b>" + paymentMethods + "</b>");
			reslogger.info("  Verified Payment Method: " + paymentMethods);

			assertEquals(res.authorizationSuccess_Status.getText().toLowerCase().trim(), status.toLowerCase().trim(),
					"Failed: To verify  Success Page Status ");
			test_steps.add("  Verified Status:<b> " + status + "</b>");
			reslogger.info(" Verified Status: " + status);

			assertEquals(res.authorizationSuccess_Note.getText().toLowerCase().trim(), (note.toLowerCase().trim()),
					"Failed: To verify  Success Page Notes ");
			test_steps.add(" Verified  Notes: <b>" + note + "</b>");
			reslogger.info(" Verified  Notes: " + note);

		} catch (Exception e) {
			reslogger.info(e);
		}

	}

	public void clickCloseButtonOfAuthorizedSuccess(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.authorizationSuccess_CloseButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.authorizationSuccess_CloseButton), driver, 10);
		// res.CP_Reservation_NoShowSuccessCloseButton.click();
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", res.authorizationSuccess_CloseButton);
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
	}

	public ArrayList<String> verifyHistoryTabForAuthorizedPayment(WebDriver driver, ArrayList<String> test_steps,
			String date, String amount, boolean isPaymentMethodChanged, String previousPaymentMethod,
			String paymentMethod, String cardNumber, String expDate, String room) {
		String paymentHistoryDate = "//tbody[contains(@data-bind,'foreach:historyList')]//span[text()='Payment']/ancestor::tr/td/span[contains(@data-bind,'text:$parent.formatDate($data.logDate)')]";
		WebElement paymentHistoryDateElement = driver.findElement(By.xpath(paymentHistoryDate));

		String paymentHistoryDescription = null;
		WebElement paymentHistoryDescriptionElement;

		assertEquals(paymentHistoryDateElement.getText(), date);
		reslogger.info("History Tab: Date Verified: " + paymentHistoryDateElement.getText());
		test_steps.add("History Tab: Date Verified: <b>" + paymentHistoryDateElement.getText() + "</b>");
		String desc = null;
		if (paymentMethod.equals("MC")) {
			paymentHistoryDescription = "//tbody[contains(@data-bind,'foreach:historyList')]//span[text()='Payment']/ancestor::tr/td/span[contains(@data-bind,'text:$data.description')]";
			paymentHistoryDescriptionElement = driver.findElement(By.xpath(paymentHistoryDescription));

			desc = "Authorized payment for $" + amount + " using (" + paymentMethod + "-XXXX" + cardNumber + " "
					+ expDate + ")";
			reslogger.info(desc);
			reslogger.info(paymentHistoryDescriptionElement.getText());
			assertEquals(desc, paymentHistoryDescriptionElement.getText());
			reslogger.info("History Tab: Description Verified: " + paymentHistoryDescriptionElement.getText());
			test_steps.add(
					"History Tab: Description Verified: <b>" + paymentHistoryDescriptionElement.getText() + "</b>");
		}

		String roomNo = "//tbody[contains(@data-bind,'foreach:historyList')]//span[text()='Payment']/ancestor::tr/td/span[contains(@data-bind,'text:$data.room')]";
		WebElement roomNoElement = driver.findElement(By.xpath(roomNo));
		reslogger.info(roomNoElement.getText());
		assertEquals(roomNoElement.getText(), room);
		reslogger.info("History Tab: Room Verified: " + roomNoElement.getText());
		test_steps.add("History Tab: Room Verified: <b>" + roomNoElement.getText() + "</b>");
		return test_steps;
	}

	public void saveReservation(WebDriver driver, ArrayList<String> test_steps) {
		// Click Save Button
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.WaitForElement(driver, OR_Reservation.reservation_Save);
			Wait.explicit_wait_visibilityof_webelement(res.reservation_Save, driver);
			Utility.ScrollToElement(res.reservation_Save, driver);
			res.reservation_Save.click();
			reslogger.info("Clicking Save Button");
			test_steps.add("Clicking Save Button");
			String loading = "(//div[@class='ir-loader-in'])";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 40) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("loading done");
		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			reslogger.info("Fail to Click on Save Button");
		}
	}

	public void verifyCheckoutPaymentForAuthorization(WebDriver driver, ArrayList<String> test_steps, String title,
			String type, String amount) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait10Second();
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopupTitle);
		Utility.ScrollToElement(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle, driver);

		assertEquals(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText().toLowerCase().trim(),
				title.toLowerCase().trim(), "Failed: To verify  Payment Page Title");
		test_steps.add(" Verified Checkout Payment Title:<b> " + title + "</b>");
		reslogger.info(" Verified Checkout Payment Title: " + title);

		String checkOutAmount = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		reslogger.info(checkOutAmount.trim());
		String balance = res.NoShowCancelPaymentPopup_Balance.getText().replace("$", "");
		reslogger.info(balance.trim());
		assertEquals(checkOutAmount.trim(), amount.trim(), "Failed: To verify Payment Page Amount: " + amount);
		test_steps.add("Verified Amount : <b> " + amount + "</b>");
		reslogger.info(" Verified Amount: " + amount);
		assertEquals(balance.trim(), amount.trim(), "Failed: To verify Payment Page Balance: " + amount);
		test_steps.add("Verified Balance : <b> " + amount + "</b>");
		reslogger.info(" Verified Balance: " + amount);

		reslogger.info(" Verified Type: " + type.toLowerCase().trim());
		String type1 = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.getText().toLowerCase().trim();
		reslogger.info(type1.toLowerCase().trim());
		assertEquals(type1.toLowerCase().trim(), type.toLowerCase().trim(), "Failed: To verify  Page Type: " + type);
		test_steps.add(" Verified Type : <b> " + type + "</b>");
		reslogger.info(" Verified Type: " + type);

	}

	public void clickCrossIcon(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.checkout_Close, driver);
		Utility.ScrollToElement(res.checkout_Close, driver);
		res.checkout_Close.click();
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
	}

	public void verify_DepositPaymentInHistoryTab(WebDriver driver, ArrayList test_steps, Double deosit) {
		String deposit = "//span[contains(text(),'payment') and contains(text(),'" + deosit + "')]";
		if (driver.findElement(By.xpath(deposit)).isDisplayed()) {
			test_steps.add("Deposit payment verified in History Tab");
			reslogger.info("Deposit payment verified in History Tab");
		} else {
			test_steps.add("Deposit payment not found  in History Tab");
			reslogger.info("Deposit payment not found  in History Tab");
		}
	}

	public void verify_AddedLineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String LineItemCategoryAmount) {
		test_steps.add("******************* Verifying Added Line Item to folio**********************");
		reslogger.info("******************* Verifying Added Line Item to folio**********************");

		String includeTax = "//span[text()='Include Taxes in Line Items']/preceding-sibling::input";
		Wait.WaitForElement(driver, includeTax);
		if (driver.findElement(By.xpath(includeTax)).isSelected()) {
			driver.findElement(By.xpath(includeTax)).click();
		}

		String line = "//td[@class='lineitem-category']/span";

		int count = driver.findElements(By.xpath(line)).size();
		String text = null;

		String[] item = LineItemCategory.split("\\|");
		String[] amt = LineItemCategoryAmount.split("\\|");
		for (int i = 0; i < item.length; i++) {

			line = "(//td[@class='lineitem-category']/span[text()='" + item[i] + "'])";
			Wait.WaitForElement(driver, line);
			test_steps.add("Line item category verified in folio : " + item[i]);
			reslogger.info("Line item category verified in folio : " + item[i]);

			line = "(//td[@class='lineitem-category']/span[text()='" + item[i]
					+ "'])/../following-sibling::td[contains(@class,'amount')]/span[contains(text(),'" + amt[i] + "')]";
			Wait.WaitForElement(driver, line);
			test_steps.add("Line item category amount verified in folio : " + amt[i]);
			reslogger.info("Line item category amount verified in folio : " + amt[i]);
		}
	}

	public void verify_VoidedIteminHistory(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String timeZone) {
		test_steps.add("******************* Verifying voided line item in history tab **********************");
		reslogger.info("******************* Verifying voided line item in history tab **********************");

		String line = "//span[text()='Removed " + LineItemCategory + " item " + LineItemCategory
				+ " from Guest Folio']";

		Wait.WaitForElement(driver, line);
		if (!driver.findElement(By.xpath(line)).isDisplayed()) {
			driver.findElement(By.xpath(line)).click();
			test_steps.add("line Item Voided in history : " + "Removed " + LineItemCategory + " item "
					+ LineItemCategory + " from Guest Folio");
			reslogger.info("line Item Voided in history : " + "Removed " + LineItemCategory + " item "
					+ LineItemCategory + " from Guest Folio");
		}

		String payment = "//span[text()='Removed " + LineItemCategory + " item " + LineItemCategory
				+ " from Guest Folio']/../preceding-sibling::td//span";
		String room = driver.findElement(By.xpath(payment)).getText();
		if (room.equalsIgnoreCase("Folio")) {
			test_steps.add("Line item Category category verified for the void");
			reslogger.info("Line item Category category verified for the void");
		} else {
			test_steps.add("Line item Category category not verified for the void");
			reslogger.info("Line item Category category not verified for the void");
		}

		Date date = new Date();
		DateFormat df = new SimpleDateFormat("MM/dd/yy");

		// Use Madrid's time zone to format the date in
		df.setTimeZone(TimeZone.getTimeZone(timeZone));

		String d = df.format(date);

		String payline = "(//span[text()='Removed " + LineItemCategory + " item " + LineItemCategory
				+ " from Guest Folio']/../preceding-sibling::td//span)[2]";
		room = driver.findElement(By.xpath(payline)).getText();
		if (room.equalsIgnoreCase(d)) {
			test_steps.add("voided line item  Date verified in history : " + room);
			reslogger.info("voided line item  Date verified in history : " + room);
		} else {
			test_steps.add("voided line item  Date not verified in history : " + room);
			reslogger.info("voided line item  Date not verified in history : " + room);
		}
	}

	public void clickYesButtonOfCheckOutAllConfirmationMsg(WebDriver driver, ArrayList test_steps, String Msg,
			String CheckOutStatus, String RoomNo, String RoomClassName) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutAllButton_ConfirmationMsg);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg, driver);
		Utility.ScrollToElement(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg, driver);
		if (CheckOutStatus.equals("CheckOutAll")) {
			assertTrue(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg.getText().toLowerCase().trim()
					.equals(Msg.toLowerCase().trim()), "Failed: To verify Message");
			test_steps.add("Verified Message : <b>" + Msg + "</b>");

			reslogger.info("Verified Message : " + Msg);

		} else if (CheckOutStatus.equals("CheckOutRoom")) {
			Msg = "Do you wish to settle all charges in the folio for " + RoomClassName + ", room " + RoomNo
					+ "? If not, payment will be taken when the primary guest checks out.";
			assertTrue(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg.getText().toLowerCase().trim()
					.equals(Msg.toLowerCase().trim()), "Failed: To verify Message");
			test_steps.add("Verified Message : <b>" + Msg + "</b>");
			reslogger.info("Verified Message : " + Msg);

		}
		res.CP_Reservation_CheckOutAllButton_ConfirmationMsgYesButton.click();
		test_steps.add("Clicking on Yes Button of Check-Out All Confirmation Message ");
		reslogger.info("Clicking on Yes Button of Check-Out All Confirmation Message ");
	}

	public void verifyMessageOfCheckOutWindow(WebDriver driver, ArrayList test_steps, String Msg)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_Reservation_CheckOut_Message, driver);
		/*
		 * assertTrue(res.CP_Reservation_CheckOut_Message.getText().toLowerCase(
		 * ).trim().equals(Msg.toLowerCase().trim()));
		 */
		assertEquals(res.CP_Reservation_CheckOut_Message.getText().toLowerCase().trim(), Msg.toLowerCase().trim(),
				"Failed to verify message ");
		test_steps.add("Verified Message : <b>" + Msg + "</b>");
		reslogger.info("Verified Message : " + Msg);

	}

	public void checkedOverRideCheckInAmountCheckBox(WebDriver driver, ArrayList test_steps, String IsOverRideCheckIN) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_OverrideCheckInAmountCheckBox);
		if (IsOverRideCheckIN.contentEquals("Yes")) {
			if (!res.CP_OverrideCheckInAmountCheckBox.isSelected()) {
				res.CP_OverrideCheckInAmountCheckBox.click();
				test_steps.add("Click Over Ride CheckIn Amount Check Box");
				reslogger.info("Click Over Ride CheckIn Amount Check Box");
			} else {
				test_steps.add("Click Over Ride CheckIn Amount Check Box");
				reslogger.info("Click Over Ride CheckIn Amount Check Box");
			}
		} else {
			if (res.CP_OverrideCheckInAmountCheckBox.isSelected()) {
				res.CP_OverrideCheckInAmountCheckBox.click();
				test_steps.add("Click Over Ride CheckIn Amount Check Box");
				reslogger.info("Click Over Ride CheckIn Amount Check Box");
			} else {
				test_steps.add("Click Over Ride CheckIn Amount Check Box");
				reslogger.info("Click Over Ride CheckIn Amount Check Box");
			}
		}
	}

	public void verifyCancellationPolicy(WebDriver driver, ArrayList<String> test_steps, String policyName,
			String policyText) throws ParseException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.cancelPolicyCollapseInDetailsTab), driver, 20);
		res.cancelPolicyCollapseInDetailsTab.click();

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.cancelPolicyNameInDetailsTab), driver);
		String cancelPolicyName = res.cancelPolicyNameInDetailsTab.getText();
		assertEquals(cancelPolicyName, policyName, "Failed - Associated policy is not matched with created one");
		test_steps
				.add("Successfully verified associated cancellation policy name as : <b>" + cancelPolicyName + "</b>");
		if(Utility.validateString(policyText)){
		String cancelPolicyText = res.cancelPolicyTextInDetailsTab.getText();
		assertEquals(cancelPolicyText, policyText, "Failed - Associated policy text is not matched with created one");
		test_steps
				.add("Successfully verified associated cancellation policy text as : <b>" + cancelPolicyText + "</b>");
		}

	}

	public void postLineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String LineItemCategoryAmount) throws InterruptedException {
		test_steps.add("******************* Post Line Item to folio**********************");
		reslogger.info("******************* Post Line Item to folio**********************");

		Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
		String line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])";

		String input = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../preceding-sibling::td//img[contains(@data-bind,'PendingToPosted')]";
		Wait.WaitForElement(driver, input);

		String src = driver.findElement(By.xpath(input)).getAttribute("src");
		Utility.app_logs.info(src);
		if (src.contains("/Folio_Images/1.gif")) {
			test_steps.add("LineitemCategory " + LineItemCategory + " folio line item status PendingToPosted");
			reslogger.info("LineitemCategory " + LineItemCategory + " folio line item status PendingToPosted");
		}

		driver.findElement(By.xpath(input)).click();
		test_steps.add("Click the post line item for " + LineItemCategory);
		reslogger.info("Click the post line item for " + LineItemCategory);

		String saveFolio = "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		Wait.wait2Second();
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save Folio");
		reslogger.info("Click on Save Folio");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: enterPaymentDetailsWithReservationPaymentMethod '
	 * Description: Select the Payment Method(Reservation) in TakePayment Popup,
	 * and Attached 'Reservation With Reservation Number in Details
	 * PaymentMethod Input parameters: <WebDriver, ArrayList<String> ,String,
	 * String> ' Return value: <ArrayList<String>> ' Created By: <Aqsa Manzoor>
	 * ' Created On: <20/05/2020> *
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> enterPaymentDetailsWithReservationPaymentMethod(WebDriver driver,
			ArrayList<String> test_steps, String PaymentType, String reservationNumber) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
		res.CP_NewReservation_PaymentMethod.click();
		String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'"
				+ PaymentType.trim() + "')]";
		Wait.WaitForElement(driver, paymentMethod);
		driver.findElement(By.xpath(paymentMethod)).click();
		test_steps.add("Selected PaymentType : " + PaymentType);
		reslogger.info("Selected PaymentType : " + PaymentType);
		if (PaymentType.equalsIgnoreCase("Reservation")) {

			String searchReservatinTab = "//input[contains(@data-bind,'value: selectedReservationValue')]";
			Wait.WaitForElement(driver, searchReservatinTab);
			WebElement searchReservatinTabElement = driver.findElement(By.xpath(searchReservatinTab));
			searchReservatinTabElement.sendKeys(reservationNumber);
			test_steps.add("Reservation Searched : " + reservationNumber);
			reslogger.info("Reservation Searched : " + reservationNumber);
			Wait.wait3Second();
			WebElement searchResult = driver
					.findElement(By.xpath("//*[contains (text(), '" + reservationNumber + "')]"));
			Wait.wait2Second();
			Wait.explicit_wait_visibilityof_webelement(searchResult, driver);
			searchResult.click();

			test_steps.add("Reservation Attached : " + reservationNumber + " as Payment Method");
			reslogger.info("Reservation Attached : " + reservationNumber + " as Payment Method");
		}
		return test_steps;
	}

	public void verify_FolioBalance(WebDriver driver, ArrayList test_steps, String bal, String bal1, String amout) {
		bal = bal.trim();
		bal = bal.substring(1, bal.length());
		bal = bal.trim();

		bal1 = bal1.trim();
		bal1 = bal1.substring(1, bal1.length());
		bal1 = bal1.trim();

		Double d = Double.parseDouble(bal);
		Double d1 = Double.parseDouble(bal1);
		Double amt = Double.parseDouble(amout);
		Assert.assertEquals((d - amt), d1);
		if (Double.compare((d - amt), d1) == 0) {
			test_steps.add("Folio Balance verified : " + d1);
			reslogger.info("Folio Balance verified : " + d1);
		} else {
			test_steps.add("Folio Balance not verified");
			reslogger.info("Folio Balance not verified");
		}

	}

	public void rollBackLineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String LineItemCategoryAmount) throws InterruptedException {

		test_steps.add("******************* Post Line Item to folio**********************");
		reslogger.info("******************* Post Line Item to folio**********************");

		Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
		String line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])";

		String includeTax = "//span[text()='Include Taxes in Line Items']/preceding-sibling::input";
		Wait.WaitForElement(driver, includeTax);
		if (driver.findElement(By.xpath(includeTax)).isSelected()) {
			driver.findElement(By.xpath(includeTax)).click();
		}

		line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])/../following-sibling::td//a";
		driver.findElement(By.xpath(line)).click();
		test_steps.add("Clicking on line item description : " + LineItemCategory);
		reslogger.info("Clicking on line item description : " + LineItemCategory);

		String lineItem = "//h4[text()='Item Detail']/../../..//span[text()='" + LineItemCategory + "']";
		Wait.WaitForElement(driver, lineItem);
		test_steps.add("Line item catrgory displayed in Item Detail screen : " + LineItemCategory);
		reslogger.info("Line item catrgory displayed in Item Detail screen : " + LineItemCategory);

		lineItem = "//h4[text()='Item Detail']/../../..//span[contains(text(),'$ " + LineItemCategoryAmount + "')]";
		Wait.WaitForElement(driver, lineItem);
		test_steps.add("Line item catrgory amount displayed in Item Detail screen : " + LineItemCategoryAmount);
		reslogger.info("Line item catrgory amount displayed in Item Detail screen : " + LineItemCategoryAmount);

		lineItem = "//h4[text()='Item Detail']/../../..//button[contains(@data-bind,'RollbackPostedItems')]";
		Wait.WaitForElement(driver, lineItem);
		driver.findElement(By.xpath(lineItem)).click();
		test_steps.add("Clicking on RollBack line item : " + LineItemCategory);
		reslogger.info("Clicking on RollBack line item : " + LineItemCategory);

		String continueLineItem = "//h4[text()='Item Detail']/../../..//button[contains(text(),'Continue')]";
		Wait.WaitForElement(driver, continueLineItem);
		driver.findElement(By.xpath(continueLineItem)).click();
		test_steps.add("Clicking on Continue");
		reslogger.info("Clicking on Continue");

		String saveFolio = "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save Folio");
		reslogger.info("Click on Save Folio");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");

		String input = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../preceding-sibling::td//img[contains(@data-bind,'PendingToPosted')]";
		Wait.WaitForElement(driver, input);

		String src = driver.findElement(By.xpath(input)).getAttribute("src");
		if (src.equalsIgnoreCase("./Folio_Images/1.gif")) {
			test_steps.add("LineitemCategory " + LineItemCategory + " folio line item status PendingToPosted");
			reslogger.info("LineitemCategory " + LineItemCategory + " folio line item status PendingToPosted");
		}

	}

	public String get_LineItemAmount(WebDriver driver, ArrayList test_steps, String LineItemCategory) {

		Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
		String line = "//span[text()='" + LineItemCategory.trim()
				+ "']/../following-sibling::td[@class='lineitem-amount']/span";

		String includeTax = "//span[text()='Include Taxes in Line Items']/preceding-sibling::input";
		Wait.WaitForElement(driver, includeTax);
		if (!driver.findElement(By.xpath(includeTax)).isSelected()) {
			driver.findElement(By.xpath(includeTax)).click();
		}

		String amount = driver.findElement(By.xpath(line)).getText();

		amount = amount.trim();
		amount = amount.substring(1, amount.length());
		amount = amount.trim();
		return amount;

	}

	public void Input_CheckIn_CheckOut_Amount(WebDriver driver, ArrayList test_step, String Amount) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.click();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.clear();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.click();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.clear();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Amount);
		test_steps.add("Input Amount: <b>" + Amount + "</b>");
		reslogger.info("Input Amount: " + Amount);
	}

	public void inputAmountWhileCheckINAndCheckOut(WebDriver driver, ArrayList test_step, String Amount)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_Amount);
		Utility.ScrollToElement(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount, driver);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.click();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.clear();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.click();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.clear();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Amount);
		test_step.add("Input Amount: <b>" + Amount + "</b>");
		reslogger.info("Input Amount: " + Amount);
	}

	public ArrayList<String> getAmountDetailsDisplayedOnTop(WebDriver driver, ArrayList<String> test_steps) {
		ArrayList<String> amountDetails = new ArrayList<>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String total = res.tripTotalAmountAtTop.getText().split(" ")[1];
		test_steps.add("Total amount displayed at top is :: " + total);
		String balance = res.tripBalanceAmountAtTop.getText().split(" ")[1];
		test_steps.add("Balance amount displayed at top is :: " + balance);
		amountDetails.add(total);
		amountDetails.add(balance);
		return amountDetails;
	}

	public ArrayList<String> verifyReport(String checkInDate, String checkOutDate) throws Exception {
		ArrayList<String> datesToReturn = new ArrayList<>();
		String checkInDateConvert = Utility.parseDate(checkInDate, "dd/MM/yyyy", "EE, MMM dd, yyyy");
		String nights = Utility.differenceBetweenDates(checkInDate, checkOutDate);
		String nightsCalc = "";
		if (Integer.parseInt(nights) > 1) {
			nightsCalc = "Night(s)";
		} else {
			nightsCalc = "Night";
		}
		String checkOutDateConvert = Utility.parseDate(checkOutDate, "dd/MM/yyyy", "EE, MMM dd, yyyy");
		String checkInDateToValidate = "Arrival : " + checkInDateConvert + " - " + nights + " " + nightsCalc;
		String checkOutDateToValidate = "Departure : " + checkOutDateConvert;
		datesToReturn.add(checkInDateToValidate);
		datesToReturn.add(checkOutDateToValidate);
		return datesToReturn;
	}

	public ArrayList<String> getPropertyDetails(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.seclectProperty), driver);
		reservation.seclectProperty.click();
		test_steps.add("select property successfully");
		reslogger.info("select property successfully");

		return test_steps;

	}

	public String contactName(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Utility.ScrollToElement(reservation.propertyDetailscontactName, driver);
		// Wait.waitForElementToBeVisibile(By.linkText(OR_Reservation.propertyDetailscontactName),
		// driver);
		String propertyDetailscontactName = reservation.propertyDetailscontactName.getAttribute("value");
		Wait.wait2Second();
		test_steps.add("propertyDetailsPhoneNumber:  " + propertyDetailscontactName);
		reslogger.info("propertyDetailsPhoneNumber:  " + propertyDetailscontactName);
		return propertyDetailscontactName;
	}

	public String propertyEmail(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Utility.ScrollToElement(reservation.propertyDetailsinputEmail, driver);
		String propertyDetailsinputEmail = reservation.propertyDetailsinputEmail.getAttribute("value");
		Wait.wait2Second();
		test_steps.add("propertyDetailsinputEmail:  " + propertyDetailsinputEmail);
		reslogger.info("propertyDetailsinputEmail:  " + propertyDetailsinputEmail);
		return propertyDetailsinputEmail;
	}

	public String propertyDetailsPhoneNumber(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Utility.ScrollToElement(reservation.propertyDetailsPhoneNumber, driver);
		String propertyDetailsPhoneNumber = reservation.propertyDetailsPhoneNumber.getAttribute("value");
		Wait.wait2Second();
		test_steps.add("propertyDetailsPhoneNumber :" + propertyDetailsPhoneNumber);
		reslogger.info("propertyDetailsPhoneNumber :" + propertyDetailsPhoneNumber);
		return propertyDetailsPhoneNumber;
	}

	public String propertyDetailsAddress(WebDriver driver, ArrayList<String> test_steps) throws Exception {

		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Utility.ScrollToElement(reservation.propertyDetailsAddress1, driver);
		String propertyDetailsAddress1 = reservation.propertyDetailsAddress1.getAttribute("value");
		Wait.wait2Second();
		test_steps.add("propertyDetailsAddress :" + propertyDetailsAddress1);
		reslogger.info("propertyDetailsAddress :" + propertyDetailsAddress1);
		return propertyDetailsAddress1;
	}

	public String propertyDetailsCity(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Utility.ScrollToElement(reservation.propertyDetailsCity, driver);
		String propertyDetailsCity = reservation.propertyDetailsCity.getAttribute("value");
		Wait.wait2Second();
		test_steps.add("propertyDetailsCity :" + propertyDetailsCity);
		reslogger.info("propertyDetailsCity  :" + propertyDetailsCity);
		return propertyDetailsCity;
	}

	public String propertyDetailsCountry(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		String country = "//select[@id='MainContent_drpMailing_countryID']";
		Utility.ScrollToElement(reservation.propertyDetailsCountry, driver);
		Select select = new Select(driver.findElement(By.xpath(country)));
		WebElement country1 = select.getFirstSelectedOption();
		String propertyDetailsCountry = country1.getText();
		test_steps.add("propertyDetailsCountry: " + propertyDetailsCountry);
		reslogger.info("propertyDetailsCountry: " + propertyDetailsCountry);
		return propertyDetailsCountry;
	}

	public String propertyDetailsState(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		String state = "//select[@id='MainContent_drpMailing_territoryID']";
		Utility.ScrollToElement(reservation.propertyDetailsCountry, driver);
		Select select = new Select(driver.findElement(By.xpath(state)));
		WebElement state1 = select.getFirstSelectedOption();
		String propertyDetailsCountry = state1.getText();
		test_steps.add("propertyDetailsState: " + propertyDetailsCountry);
		reslogger.info("propertyDetails State: " + propertyDetailsCountry);
		return propertyDetailsCountry;
	}

	public String propertyDetailsPostalCode(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Utility.ScrollToElement(reservation.propertyDetailsPostalCode, driver);
		Wait.wait2Second();
		String propertyDetailsPostalCode = reservation.propertyDetailsPostalCode.getAttribute("value");
		test_steps.add("propertyDetailsPostalCode" + propertyDetailsPostalCode);
		reslogger.info("propertyDetailsPostalCode : " + propertyDetailsPostalCode);
		return propertyDetailsPostalCode;
	}

	// Added By adhnan/6/17/2020
	public ArrayList<String> selectReportTypeButton(WebDriver driver, String reportType, String inputType,
			boolean check, ArrayList<String> steps) throws InterruptedException {
		String reportTypexpath = "(//span[text()='" + reportType + "']//..//input[@type='" + inputType + "'])[1]";
		Wait.WaitForElement(driver, reportTypexpath);
		Wait.waitForElementToBeVisibile(By.xpath(reportTypexpath), driver);
		Wait.waitForElementToBeClickable(By.xpath(reportTypexpath), driver);
		WebElement reportTyperRadioButton = driver.findElement(By.xpath(reportTypexpath));
		Utility.ScrollToElement(reportTyperRadioButton, driver);
		if (inputType.equals("checkbox")) {
			if (check) {
				if (!reportTyperRadioButton.isSelected()) {
					reportTyperRadioButton.click();
				}
				steps.add("Check '" + reportType + "' CheckBox");
				reslogger.info("Check '" + reportType + "' CheckBox");
			} else {
				if (reportTyperRadioButton.isSelected()) {
					reportTyperRadioButton.click();

				}
				steps.add("UnCheck '" + reportType + "' CheckBox");
				reslogger.info("UnCheck '" + reportType + "' CheckBox");
			}
			assertEquals(check, reportTyperRadioButton.isSelected(),
					"Failed : '" + reportType + "' CheckBox is not in Required State");
		} else {
			reportTyperRadioButton.click();
			steps.add("Select report Type '" + reportType + "'");
			reslogger.info("Select report Type '" + reportType + "'");
			assertEquals(check, reportTyperRadioButton.isSelected(),
					"Failed : '" + reportType + "' raido is not selected");
		}
		return steps;
	}

	// Added By Adhnan/6/17/2020
	public void clickPrintReservationReports(WebDriver driver) throws InterruptedException, IOException {
		Elements_CPReservation reservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR.PRINT_RESERVATION_REPORTS);
		Wait.waitForElementToBeVisibile(By.xpath(OR.PRINT_RESERVATION_REPORTS), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR.PRINT_RESERVATION_REPORTS), driver);
		reservationPage.PRINT_RESERVATION_REPORTS.click();

	}

	// Added By Adhnan/6/17/2020
	public boolean reportDisplayed(WebDriver driver, String reportId, ArrayList<String> testSteps)
			throws InterruptedException {

		boolean isExist = Utility.isElementPresent(driver, By.id(reportId));
		System.out.print(" is Exist:" + isExist);
		if (isExist) {
			testSteps.add("PDF Report is Displayed");
			Utility.app_logs.info("PDF Report is Displayed");
		} else {
			testSteps.add("PDF Report is Not Displayed");
			Utility.app_logs.info("PDF Report is Not Displayed");
		}
		return isExist;

	}

	// Added By Adhnan/6/17/2020
	public String downloadReport(WebDriver driver, String reportSource, String reportId) throws InterruptedException {

		String dataPath = driver.findElement(By.id(reportId)).getAttribute(reportSource);
		driver.get(dataPath);
		String fileName = Utility.download_status(driver);
		System.out.print("File Name:" + fileName);
		return fileName;

	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * Method Name: getRoomNumberInMRB Description: getreservation status from
	 * search table Input parameters: Webdriver,String Return value: String
	 * Created By: Adnan Ghaffar Created On: 09-06-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public String getRoomNumberAdvacedSearchInMRB(WebDriver driver, String guestName) {
		String path = "//a[@title='" + guestName
				+ "']//..//..//..//following-sibling::td//span[contains(@data-bind,'text: RoomClassName')]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String roomNumber = element.getText();
		return roomNumber;

	}

	public ArrayList<String> closeBulkCheckoutActionPopUp(WebDriver driver) throws Exception {
		ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation elementsReservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CLOSE_BULK_CHECKOUT_POPUP);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CLOSE_BULK_CHECKOUT_POPUP), driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CLOSE_BULK_CHECKOUT_POPUP), driver);
		elementsReservation.closeBulkCheckoutPopUp.click();
		test_steps.add("Bulk Action PopUp Closed Successfully");
		reslogger.info("Bulk Action PopUp Closed Successfully");
		return testSteps;

	}

	public String getTextFromRollBackChangesPopUp(WebDriver driver) {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ROLL_BACK_POPUP_TEXT);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ROLL_BACK_POPUP_TEXT), driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ROLL_BACK_POPUP_TEXT), driver);
		String popUpMessege = element.rollBackPopUpText.getText();

		return popUpMessege;

	}

	public ArrayList<String> acceptRollBackChange(WebDriver driver) {
		ArrayList<String> testSteps = new ArrayList<String>();
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ACCEPT_ROLL_BACK_CHANGE);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ACCEPT_ROLL_BACK_CHANGE), driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ACCEPT_ROLL_BACK_CHANGE), driver);
		element.acceptRollBackChange.click();
		testSteps.add("Roll back changes accepted");

		return testSteps;

	}

	public String replaceString(String str) {
		str = str.replace("$", "");
		str = str.trim();
		Utility.app_logs.info(str);
		return str;

	}

	public String getReservationSearchDetails(WebDriver driver, int parentInex, int index) {

		String Path = "((//a[contains(@data-bind,'text: GuestName')])[" + parentInex
				+ "]//..//..//..//following-sibling::td//span)[" + index + "]";
		WebElement element = driver.findElement(By.xpath(Path));
		return element.getText();
	}

	// 5PM
	public String getReservationSearchGuestName(WebDriver driver, int index) {

		String Path = "(//a[contains(@data-bind,'text: GuestName')])[" + index + "]";
		WebElement element = driver.findElement(By.xpath(Path));
		Wait.WaitForElement(driver, Path);
		Wait.waitForElementToBeVisibile(By.xpath(Path), driver);
		Wait.waitForElementToBeClickable(By.xpath(Path), driver);

		return element.getText();
	}

	public String getReservationSearchStatus(WebDriver driver, int index) {

		String Path = "(//a[contains(@data-bind,'text: GuestName')])[" + index
				+ "]//parent::div//parent::td//following-sibling::td//span[contains(@data-bind, 'StatusName.replace')]";
		Wait.WaitForElement(driver, Path);
		Wait.waitForElementToBeVisibile(By.xpath(Path), driver);
		WebElement element = driver.findElement(By.xpath(Path));
		String getStatus = element.getText();
		return getStatus;
	}

	public String getGuestNameInChekoutPopup(WebDriver driver, String guestName, int index) {

		String Path = "(//span[@title='" + guestName + "'])[" + index + "]";
		WebElement element = driver.findElement(By.xpath(Path));
		return element.getText();
	}

	public String verifyChekoutPopup(WebDriver driver, String guestName, int parentIndex, int index) {

		String Path = "(//span[@title='" + guestName + "'])[" + parentIndex + "]//parent::td//following-sibling::td["
				+ index + "]//span";
		WebElement element = driver.findElement(By.xpath(Path));
		return element.getText();
	}

	public String getChargesInChekoutPopup(WebDriver driver, String guestName, int index) {

		String Path = "(//span[@title='" + guestName + "'])[" + index
				+ "]//parent::td//following-sibling::td//span[contains(@data-bind, 'Amount')]";
		WebElement element = driver.findElement(By.xpath(Path));
		return element.getText();

	}

	public String getGuestNameInChekoutSuccessPopup(WebDriver driver, String guestName, int index)
			throws InterruptedException {

		String Path = "(//tr[contains(@data-bind, 'ShowTransactionUpdatingMessage ')]//span[@title='" + guestName
				+ "'])[" + index + "]";
		WebElement element = driver.findElement(By.xpath(Path));
		Wait.wait5Second();
		Wait.WaitForElement(driver, Path);
		Wait.waitForElementToBeVisibile(By.xpath(Path), driver);

		return element.getText();

	}

	public String getChargesInChekoutSuccessPopup(WebDriver driver, String guestName, int index) {

		String Path = "(//tr[contains(@data-bind, 'ShowTransactionUpdatingMessage ')]//span[@title='" + guestName
				+ "'])[" + index + "]//parent::td//following-sibling::td//span[contains(@data-bind, 'Amount')]";
		WebElement element = driver.findElement(By.xpath(Path));
		return element.getText();

	}

	public String getReservationStatusInDetailsSection(WebDriver driver) {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.reservationStatusInDetailSection);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.reservationStatusInDetailSection), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.reservationStatusInDetailSection), driver);

		return element.reservationStatusInDetailSection.getText();

	}

	public ArrayList<String> verifyBulkCheckOutSuccessHeadng(WebDriver driver) {

		ArrayList<String> testSteps = new ArrayList<String>();
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.bulkCheckOutSuccessHeading);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.bulkCheckOutSuccessHeading), driver);

		assertTrue(element.bulkCheckOutSuccessHeading.isDisplayed(), "Checkout Popup succes is not displaying");
		testSteps.add("Bulk Checkout success heading verified");
		reslogger.info("Bulk Checkout success heading verified");
		return testSteps;

	}

	public String getReservationCountCheckoutSuccessPopup(WebDriver driver) {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.bulkCheckOutSuccessReservationCount);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.bulkCheckOutSuccessReservationCount), driver);

		return element.bulkCheckOutSuccessReservationCount.getText();

	}

	public void verify_PostLineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String LineItemCategoryAmount) throws InterruptedException {
		test_steps.add("******************* Verify Post Line Item to folio**********************");
		reslogger.info("******************* Verify Post Line Item to folio**********************");

		Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
		String line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])";

		String includeTax = "//span[text()='Include Taxes in Line Items']/preceding-sibling::input";
		Wait.WaitForElement(driver, includeTax);
		if (driver.findElement(By.xpath(includeTax)).isSelected()) {
			driver.findElement(By.xpath(includeTax)).click();
		}

		String input = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../preceding-sibling::td//img[contains(@data-bind,'PendingToPosted')]";
		Wait.WaitForElement(driver, input);

		String src = driver.findElement(By.xpath(input)).getAttribute("src");
		Utility.app_logs.info(src);
		if (src.contains("/Folio_Images/2.gif")) {
			test_steps.add("LineitemCategory " + LineItemCategory + " folio line item status Posted");
			reslogger.info("LineitemCategory " + LineItemCategory + " folio line item status Posted");
		}

		line = "((//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../following-sibling::td//span[contains(text(),'" + LineItemCategoryAmount + "')])";
		int count = driver.findElements(By.xpath(line)).size();
		if (count > 0) {
			test_steps.add("Successfully verified posted line item amount : " + LineItemCategoryAmount);
			reslogger.info("Successfully verified posted line item amount : " + LineItemCategoryAmount);
		} else {
			test_steps.add("Voided line item amount validation failed");
			reslogger.info("Voided line item amount validation failed");
		}
	}

	public boolean checkedDisplayVoidItem(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_DisplayVoidItemCheckBox, driver);
		boolean isChecked = res.CP_Reservation_DisplayVoidItemCheckBox.isSelected();
		if (!isChecked) {
			Utility.ScrollToElement(res.CP_Reservation_DisplayVoidItemCheckBox, driver);
			res.CP_Reservation_DisplayVoidItemCheckBox.click();
			test_steps.add("Checked Display Void Item Check Box ");
			reslogger.info("Checked Display Void Item Check Box ");
		} else {
			test_steps.add("Display Void Item Check Box is Already Checked ");
			reslogger.info("Display Void Item Check Box is Already Checked ");
		}
		return isChecked;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: secondayGuestCheckInButtonClick ' Description: Checkin
	 * Button Click, Verification of Tab,With Option Available With/Without
	 * Guest Statement, Confirm Button Click ' Input parameters: WebDriver ,
	 * String, boolean ' Return value: ArrayList<String> ' Created By: Aqsa
	 * Manzoor ' Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> secondayGuestCheckInButtonClick(WebDriver driver, String secondaryGuestName,
			boolean generateGuestStatement) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		element.CP_SECONDARYGUEST_CHECKINBUTTON.click();
		test_steps.add("Secondary Guest CheckIn Button Clicked");
		reslogger.info("Secondary Guest CheckIn Button Clicked ");
		Wait.WaitForElement(driver, OR_Reservation.CP_SECONDARYGUEST_CHECKIN_CHECKOUTTAB_TITLENAME);
		assertEquals(element.CP_SECONDARYGUEST_CHECKIN_CHECKOUTTAB_TITLENAME.getText().replaceAll(" ", ""),
				secondaryGuestName.replaceAll(" ", ""));
		test_steps.add("Secondary Guest Name: " + secondaryGuestName + " Verified");
		reslogger.info("Secondary Guest Name: " + secondaryGuestName + " Verified");
		if (!generateGuestStatement) {
			element.CP_CHECKIN_GENERATEGUESTSTATEMENT_TOGGLE.click();
			test_steps.add("Generate guest Statement Toggle: "
					+ element.CP_CHECKIN_GENERATEGUESTSTATEMENT_TOGGLE.isSelected());
			reslogger.info("sGenerate guest Statement Toggle: "
					+ element.CP_CHECKIN_GENERATEGUESTSTATEMENT_TOGGLE.isSelected());
		}
		Wait.WaitForElement(driver, OR_Reservation.CheckinConfirmButton);
		Wait.explicit_wait_visibilityof_webelement(element.CheckinConfirmButton, driver);
		Wait.explicit_wait_elementToBeClickable(element.CheckinConfirmButton, driver);
		element.CheckinConfirmButton.click();
		test_steps.add("Click on checkin confrim buttton");

		return test_steps;
	}

	/*
	 * *
	 * #########################################################################
	 * #########################################################################
	 * ######################## ' Method Name:
	 * selectPaymentMethodWithReservationInFolio ' Description: Select the
	 * Payment Method(Reservation) in TakePayment Popup, and Attached
	 * 'Reservation With Reservation Number in folio Pay Input parameters:
	 * <WebDriver, ArrayList<String> ,String, String> ' Return value:
	 * <ArrayList<String>> ' Created By: <Aqsa Manzoor> ' Created On:
	 * <20/05/2020> *
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> selectPaymentMethodWithReservationInFolio(WebDriver driver, ArrayList<String> test_steps,
			String PaymentMethod, String ReservationNumber) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_PaymentButton);
		res.CP_Reservation_Folio_TakePayment_PaymentButton.click();
		String payment = "//h4[text()='Take Payment']/../..//label[text()='PAYMENT METHOD']/..//div/div//span[text()='"
				+ PaymentMethod.trim() + "']";
		Wait.WaitForElement(driver, payment);
		driver.findElement(By.xpath(payment)).click();
		test_steps.add("Select Payment Type as : " + PaymentMethod);
		reslogger.info("Select Payment Type as : " + PaymentMethod);

		if (PaymentMethod.equalsIgnoreCase("Reservation")) {
			String searchReservatinTab = "//input[contains(@data-bind,'alue:$parent.SelectedReservatio')]";
			Wait.WaitForElement(driver, searchReservatinTab);
			WebElement searchReservatinTabElement = driver.findElement(By.xpath(searchReservatinTab));
			searchReservatinTabElement.clear();
			searchReservatinTabElement.sendKeys(ReservationNumber);
			Wait.wait3Second();
			WebElement searchResult = driver
					.findElement(By.xpath("//*[contains (text(), '" + ReservationNumber + "')]"));
			Wait.wait5Second();
			Wait.explicit_wait_visibilityof_webelement(searchResult, driver);
			searchResult.click();
			reslogger.info("Reservation Attached Verified : " + searchResult.getText());
			test_steps.add("Reservation Attached Verified : " + searchResult.getText());

		}

		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getDepositPaymentPopupHeading> ' Description: <This
	 * method will return heading diplay messagein deposit payment poppup> '
	 * Input parameters: <WebDriver driver> ' Return value: <ArrayList<String>>
	 * ' Created By: <Farhan Ghaffar> ' Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> getDepositPaymentPopupHeading(WebDriver driver) throws InterruptedException {
		ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.depositPaymentPopupHeading);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.depositPaymentPopupHeading), driver);
		Boolean isDisplayed = res.depositPaymentPopupHeading.isDisplayed();
		reslogger.info("isDisplayed : " + isDisplayed);
		if (isDisplayed) {
			testSteps.add("Deposit payment heading dislaying");
			reslogger.info("Deposit payment heading dislaying");

		} else {
			testSteps.add("Deposit payment heading is not dislaying");
			reslogger.info("Deposit payment heading is not dislaying");

		}
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <calculateDepositePercenatge> ' Description: <This method
	 * will calculate Deposit amount based on policy percentage> ' Input
	 * parameters: <String tripTotal, String depositAmount> ' Return value:
	 * <Double> ' Created By: <Farhan Ghaffar> ' Created On: <06/10/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String calculateDepositePercenatge(String tripTotal, String depositAmount) {
		Double tripTotalInDouble = Double.parseDouble(tripTotal);
		Double depositAmountInDouble = Double.parseDouble(depositAmount);

		Double getAmount = tripTotalInDouble * depositAmountInDouble;
		getAmount = getAmount / 100;
		String amount = String.format("%.2f", getAmount);
		return amount;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getCheckInPolicy> ' Description: <This method will return
	 * checkin policy from checkin popup> ' Input parameters: <WebDriver driver>
	 * ' Return value: <String> ' Created By: <Farhan Ghaffar> ' Created On:
	 * <06/10/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getCheckInPolicy(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkInPolicy);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkInPolicy), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.checkInPolicy), driver);

		String checkInPolicy = res.checkInPolicy.getText();
		reslogger.info("checkInPolicy : " + checkInPolicy);
		return checkInPolicy;
	}

	public String getNoShowPaymentAmount(WebDriver driver) {

		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle), driver);
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);

		String amountDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText()
				.trim();
		amountDisplayed = replaceCurrency(amountDisplayed);
		return amountDisplayed;
	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getTripSummaryRoomChargesWithCurrency> ' Description:
	 * <This method will return Room Charges from room selection in reservation
	 * creation> ' Input parameters: <WebDriver driver, ArrayList test_steps> '
	 * Return value: <String> ' Created By: <Farhan Ghaffar> ' Created On:
	 * <06/15/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getTripSummaryRoomChargesWithCurrency(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);

		String Balance = reservation.tripSummaryRoomCharges.getText();

		test_steps.add("TripSummary Room Charges : " + Balance);
		reslogger.info("TripSummary Room Charges : " + Balance);
		return Balance;
	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getTripSummaryTaxesWithCurrency> ' Description: <This
	 * method will return Tax & Services from room selection in reservation
	 * creation> ' Input parameters: <WebDriver driver, ArrayList test_steps> '
	 * Return value: <String> ' Created By: <Farhan Ghaffar> ' Created On:
	 * <06/15/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getTripSummaryTaxesWithCurrency(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);

		String Balance = reservation.tripSummaryTaxAndServices.getText();

		test_steps.add("TripSummary Tax & Services : " + Balance);
		reslogger.info("TripSummary Tax & Services : " + Balance);
		return Balance;
	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getTripSummaryTripTotalWithCurrency> ' Description: <This
	 * method will return Trip Total Charges from room selection in reservation
	 * creation> ' Input parameters: <WebDriver driver, ArrayList test_steps> '
	 * Return value: <String> ' Created By: <Farhan Ghaffar> ' Created On:
	 * <06/15/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getTripSummaryTripTotal(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);

		String Balance = reservation.tripSummaryTotal.getText();

		test_steps.add("TripSummary Trip Total Charges : " + Balance);
		reslogger.info("TripSummary Trip Total Charges : " + Balance);
		return Balance;
	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getTripSummaryPaidWithCurrency> ' Description: <This
	 * method will return Paid amount from room selection in reservation
	 * creation> ' Input parameters: <WebDriver driver, ArrayList test_steps> '
	 * Return value: <String> ' Created By: <Farhan Ghaffar> ' Created On:
	 * <06/15/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getTripSummaryPaidWithCurrency(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);

		String Balance = reservation.tripSummaryDepositPaid.getText();

		test_steps.add("TripSummary Paid amount : " + Balance);
		reslogger.info("TripSummary Paid amount : " + Balance);
		return Balance;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getCancelationAmount> ' Description: <This method will
	 * return Cancellation amount from room selection in reservation creation> '
	 * Input parameters: <WebDriver driver> ' Return value: <String> ' Created
	 * By: <Farhan Ghaffar> ' Created On: <06/15/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getCancelationAmount(WebDriver driver) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_Amount);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopup_Amount), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowPaymentPopup_Amount), driver);
		String getAmountToPay = reservation.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText().trim();
		reslogger.info("Cancellation amount : " + getAmountToPay);
		return getAmountToPay;
	}

	public String getCheckInAmount(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_Amount);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopup_Amount), driver);
		Amount = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		return Amount;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ######################## 'Method Name: verifyLongStayCheckbox '
	 * Description: verify long stay text and check box Input parameters: web
	 * driver Return value: array list ' Created By: <Frahan Ghaffar> ' Created
	 * On: <22/06/2020> *
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> verifyLongStayCheckbox(WebDriver driver) throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.LongStayText);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.LongStayText), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.LongStayText), driver);
		Utility.ScrollToElement_NoWait(reservation.LongStayText, driver);
		assertEquals(reservation.LongStayText.getText(), "Long Stay", "Failed: log stay text is mismatching!");
		Utility.app_logs.info("class:" + reservation.LongStayCheckbox.getAttribute("class"));
		assertTrue(reservation.LongStayCheckbox.getAttribute("class").contains("ng-color-green"),
				"Failed: long stay checkbox is not checked");
		testSteps.add("Verified long stay checkbox is checked after set tax exempt");

		return testSteps;

	}

	public void verifyGenerateGuestReportToggle(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CheckInGuestRegirstrationReportToggle);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CheckInGuestRegirstrationReportToggle), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CheckInGuestRegirstrationReportToggle), driver);
		res.CheckInGuestRegirstrationReportToggle.click();

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getReservationPolicy> ' Description: <This method will
	 * expand required policy in detail sections of new reservation> ' Input
	 * parameters: <WebDriver driver,String PolicyType,String percentage> '
	 * Return value: <ArrayList<String>> ' Created By: <Farhan Ghaffar> '
	 * Created On: <06/05/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> clickPolicyCollapseIcon(WebDriver driver, String PolicyType, String percentage)
			throws InterruptedException

	{
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		if (PolicyType.equals("noShow")) {
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel, driver);
			boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("No Show Policy Alread Expanded");
				reslogger.info("No Show Policy Alread Expanded ");
			} else {
				res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyCollapse.click();
				test_steps.add("No Show Policy  Expanded");
				reslogger.info("No Show Policy  Expanded ");
			}
		} else if (PolicyType.equals("checkIn")) {
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel, driver);
			boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("Check In Policy Alread Expanded");
				reslogger.info("Check In Policy Alread Expanded ");
			} else {
				res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyCollapse.click();
				test_steps.add("Check In Policy  Expanded");
				reslogger.info("Check In Policy  Expanded ");
			}
		} else if (PolicyType.equals("cancel")) {
			String path = "//div[text()='Policies And Disclaimers']/..//span[contains(text(),'Cancellation "
					+ percentage + "%')]";
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CancellationPolicyLabel, driver);
			boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_CancellationPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("Cancellation Policy Alread Expanded");
				reslogger.info("Cancellation Policy Alread Expanded ");
			} else {
				WebElement element = driver.findElement(By.xpath(path));
				Utility.ScrollToElement(element, driver);
				element.click();
				test_steps.add("Cancellation Policy Expanded");
				reslogger.info("Cancellation Policy Expanded ");
			}

		} else if (PolicyType.equals("deposit")) {
			Utility.ScrollToElement(res.depositPolicyLabel, driver);
			boolean isEclicked = res.depositPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("Deposit Policy Alread Expanded");
				reslogger.info("Deposit Policy Alread Expanded ");
			} else {
				res.depositPolicyCollapse.click();
				test_steps.add("Deposit Policy  Expanded");
				reslogger.info("Deposit Policy  Expanded ");
			}

		}
		return test_steps;

	}

	public void closePolicyCollapseIcon(WebDriver driver, int parentIndex, int ChildIndexindex)
			throws InterruptedException

	{
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String path = "((//div[@id='accordion'])[" + parentIndex + "]//a[@data-parent='#accordion'])[" + ChildIndexindex
				+ "]";
		driver.findElement(By.xpath(path)).click();

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getReservationPolicy> ' Description: <This method will
	 * get policy> ' Input parameters: <WebDriver driver> ' Return value:
	 * <String> ' Created By: <Farhan Ghaffar> ' Created On: <06/05/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getReservationPolicy(WebDriver driver) throws InterruptedException

	{
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.reservationPolicy), driver);
		Utility.ScrollToElement(res.reservationPolicy, driver);
		String getPolicy = res.reservationPolicy.getText();
		reslogger.info("Policy : " + getPolicy);

		return getPolicy;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <clickNewReservationInGroups> ' Description: <This method
	 * will click new reservation groups> ' Input parameters: <WebDriver driver>
	 * ' Return value: <ArrayList<String>> ' Created By: <Farhan Ghaffar> '
	 * Created On: <06/05/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickNewReservationInGroups(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.newGroupReservationInput), driver);
		res.newGroupReservationInput.click();
		test_steps.add("Clicking on New Reservation");
		reslogger.info("Clicking on New Reservation");
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <selectRoomWithPolicyUpdation> ' Description: <This method
	 * will click on No in case there is policy updation> ' Input parameters:
	 * <WebDriver driver, ArrayList<String> test_steps, String RoomClass, String
	 * IsAssign, String Account> ' Return value: <ArrayList<String>> ' Created
	 * By: <Farhan Ghaffar> ' Created On: <06/08/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> selectRoomWithPolicyUpdation(WebDriver driver, String RoomClass, String IsAssign,
			String Account) throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";

		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		Utility.app_logs.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/following-sibling::span";
			Utility.app_logs.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else if (IsAssign.equalsIgnoreCase("Yes")) {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				// updated code :aqsa ( previous script was selecting unassigned
				// when isAssign=true)
				int maxNumber = driver.findElements(By.xpath(roomnum)).size();
				int minNumber = 2;
				Random random = new Random();
				int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
				System.out.print(" Random Number is :" + randomNumber);
				Utility.app_logs.info("count : " + maxNumber);
				Utility.app_logs.info("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			} else {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				driver.findElement(By.xpath(expand)).click();

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				test_steps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait1Second();
				}
			}

			try {

				if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
					String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='No']";
					/*
					 * Wait.WaitForElement(driver, policy);
					 * Wait.waitForElementToBeVisibile(By.xpath(policy),
					 * driver);
					 * Wait.waitForElementToBeClickable(By.xpath(policy),
					 * driver);
					 */
					Wait.wait2Second();
					driver.findElement(By.xpath(policy)).click();
					test_steps.add("Based on the changes made, new policies are applicable.? : No");
					reslogger.info("Based on the changes made, new policies are applicable.? : No");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						Utility.app_logs.info("in while");
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 10) {
							break;
						} else {
							counter++;
							Wait.wait1Second();
						}
					}
				}
			} catch (Exception e) {
				// TODO: handle exception
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
		return test_steps;
	}

	public void enter_GuestDetailsForMRB(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String Email, String PhoneNumber, String AltenativePhone,
			String IsSplit, String IsAddMoreGuestInfo) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		String[] salu = Salutation.split("\\|");
		String[] guestFName = GuestFirstName.split("\\|");
		String[] guestLName = GuestLastName.split("\\|");
		// String[] mail = Email.split("\\|");
		String[] phone = PhoneNumber.split("\\|");

		int size = salu.length;

		for (int i = 1; i <= size; i++) {
			if (i == 1) {
				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
				res.CP_NewReservation_GuestSalutation.click();
				String sal = "//span[contains(text(),'" + salu[i - 1] + "')]/../..";
				Wait.WaitForElement(driver, sal);
				driver.findElement(By.xpath(sal)).click();

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
				res.CP_NewReservation_GuestFirstName.clear();

				Random random = new Random();
				int randomNumber = random.nextInt(900);
				reslogger.info("randomNumber : " + randomNumber);

				String FirstName = guestFName[i - 1] + randomNumber;
				Utility.guestFirstName = FirstName;
				res.CP_NewReservation_GuestFirstName.sendKeys(FirstName);
				test_steps.add("Guest First Name : " + FirstName);
				reslogger.info("Guest First Name : " + FirstName);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);
				res.CP_NewReservation_GuestLastName.clear();

				String LastName = guestLName[i - 1] + randomNumber;
				Utility.guestLastName = LastName;
				res.CP_NewReservation_GuestLastName.sendKeys(LastName);
				test_steps.add("Guest Last Name : " + LastName);
				reslogger.info("Guest Last Name : " + LastName);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Phone);
				res.CP_NewReservation_Phone.clear();
				res.CP_NewReservation_Phone.sendKeys(phone[i - 1]);
				test_steps.add("Enter Phone Number : " + phone[i - 1]);
				reslogger.info("Enter Phone Number : " + phone[i - 1]);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AltenativePhone);
				res.CP_NewReservation_AltenativePhone.clear();
				res.CP_NewReservation_AltenativePhone.sendKeys(AltenativePhone);
				test_steps.add("Enter AltenativePhone Number : " + AltenativePhone);
				reslogger.info("Enter AltenativePhone Number : " + AltenativePhone);

				/*
				 * Wait.WaitForElement(driver,
				 * OR_Reservation.CP_NewReservation_Email);
				 * res.CP_NewReservation_Email.clear();
				 * res.CP_NewReservation_Email.sendKeys(mail[i - 1]);
				 * test_steps.add("Enter Email : " + mail[i - 1]);
				 * reslogger.info("Enter Email : " + mail[i - 1]);
				 */
			} else {

				String additional = "(//span[text()='Additional Room'])";
				int count = driver.findElements(By.xpath(additional)).size();

				String saluta = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//span[text()='Select']/..";
				String slaut = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//span[text()='Select']/../following-sibling::div//li//span[text()='"
						+ salu[i - 1] + "']";
				Wait.WaitForElement(driver, saluta);
				driver.findElement(By.xpath(saluta)).click();
				reslogger.info(slaut);
				Wait.WaitForElement(driver, slaut);
				driver.findElement(By.xpath(slaut)).click();

				count = driver.findElements(By.xpath("//label[text()='Guest ']/../input")).size();
				String fname = "(//label[text()='Guest ']/../input)[" + i + "]";
				Wait.WaitForElement(driver, fname);
				driver.findElement(By.xpath(fname)).clear();
				driver.findElement(By.xpath(fname)).sendKeys(guestFName[i - 1]);
				test_steps.add("Guest First Name : " + guestFName[i - 1]);
				reslogger.info("Guest First Name : " + guestFName[i - 1]);

				count = driver
						.findElements(By
								.xpath("(//span[text()='Additional Room'])/../../../../../..//label[text()='Last Name']/../input"))
						.size();
				String lname = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//label[text()='Last Name']/../input";
				Wait.WaitForElement(driver, lname);
				driver.findElement(By.xpath(lname)).clear();
				driver.findElement(By.xpath(lname)).sendKeys(guestLName[i - 1]);
				test_steps.add("Guest Last Name : " + guestLName[i - 1]);
				reslogger.info("Guest Last Name : " + guestLName[i - 1]);

				count = driver.findElements(By.xpath("(//label[text()='Phone']/preceding-sibling::input)")).size();
				String ph = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//label[text()='Phone']/preceding-sibling::input";
				driver.findElement(By.xpath(ph)).clear();
				driver.findElement(By.xpath(ph)).sendKeys(phone[i - 1]);
				test_steps.add("Enter Phone Number : " + phone[i - 1]);
				reslogger.info("Enter Phone Number : " + phone[i - 1]);

				count = driver.findElements(By.xpath("(//label[text()='E-mail']/preceding-sibling::input)")).size();
				String email = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//label[text()='E-mail']/preceding-sibling::input";
				driver.findElement(By.xpath(email)).clear();

				/*
				 * driver.findElement(By.xpath(email)).sendKeys(mail[i - 1]);
				 * test_steps.add("Enter Altenative Email : " + mail[i - 1]);
				 * reslogger.info("Enter Altenative Email : " + mail[i - 1]);
				 */

			}
			if (!(i == size) && IsAddMoreGuestInfo.equalsIgnoreCase("Yes") && IsSplit.equalsIgnoreCase("Yes")) {
				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddMoreGuestInfo);
				res.CP_NewReservation_AddMoreGuestInfo.click();
				test_steps.add("Clicking on Add More Guest Info");
				reslogger.info("Clicking on Add More Guest Info");
			}
		}

	}

	public void enter_MRB_MailingAddressForMRB(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String IsGuesProfile, ArrayList al)
			throws InterruptedException {
		Add_PrimaryRoom(driver, test_steps, al);
		Add_AdditionalRoom(driver, test_steps, al);
		enter_GuestDetailsForMRB(driver, test_steps, Salutation, GuestFirstName, GuestLastName);
		uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);

	}

	public void clickStayInfoCheckIn(WebDriver driver, ArrayList<String> test_steps, String roomNO)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		/*
		 * int i=Integer.parseInt(roomNO) - 1; String
		 * path="(//div[contains(@class,'ir-stayInfo-details')]//button[contains(text(),'Check In')])["
		 * +i+"]"; Wait.WaitForElement(driver,
		 * OR_Reservation.CP_Reservation_StayInfo_CheckInButton);
		 * Utility.ScrollToElement(res.CP_Reservation_StayInfo_CheckInButton.get
		 * (Integer.parseInt(roomNO) - 1), driver);
		 * res.CP_Reservation_StayInfo_CheckInButton.get(Integer.parseInt(
		 * roomNO) - 1).click();
		 */

		String path = "//div[contains(@data-bind,'ReservationStatusLookup')]/div//div[contains(@class,'ir-roomInfo')]//span[contains(text(),'"
				+ roomNO + "')]"
				+ "/ancestor::div/div[contains(@class,'detailsbox')]/following-sibling::div//button[contains(text(),'Check In')]";
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		element.click();

		test_steps.add("Room <b>" + roomNO + "</b> in the MRB Reservation Click CheckIn Button");
		reslogger.info("Room " + roomNO + " in the MRB Reservation Click CheckIn Button");

	}

	public void enter_GuestDetailsForMRB(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		String[] salu = Salutation.split("\\|");
		String[] guestFName = GuestFirstName.split("\\|");
		String[] guestLName = GuestLastName.split("\\|");
		// String[] mail = Email.split("\\|");
		// String[] phone = PhoneNumber.split("\\|");

		int size = salu.length;
		Random random = new Random();
		int randomNumber =0;
		for (int i = 1; i <= size; i++) {
			if (i == 1) {
				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
				res.CP_NewReservation_GuestSalutation.click();
				String sal = "//span[contains(text(),'" + salu[i - 1] + "')]/../..";
				Wait.WaitForElement(driver, sal);
				driver.findElement(By.xpath(sal)).click();

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
				res.CP_NewReservation_GuestFirstName.clear();

			   randomNumber = random.nextInt(900);
				reslogger.info("randomNumber : " + randomNumber);

				String FirstName = guestFName[i - 1] + randomNumber;
				Utility.guestFirstName = FirstName;
				res.CP_NewReservation_GuestFirstName.sendKeys(FirstName);
				test_steps.add("Guest First Name : " + FirstName);
				reslogger.info("Guest First Name : " + FirstName);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);
				res.CP_NewReservation_GuestLastName.clear();

				String LastName = guestLName[i - 1] + randomNumber;
				Utility.guestLastName = LastName;
				res.CP_NewReservation_GuestLastName.sendKeys(LastName);
				test_steps.add("Guest Last Name : " + LastName);
				reslogger.info("Guest Last Name : " + LastName);

				/*
				 * Wait.WaitForElement(driver,
				 * OR_Reservation.CP_NewReservation_Phone);
				 * res.CP_NewReservation_Phone.clear();
				 * res.CP_NewReservation_Phone.sendKeys(phone[i - 1]);
				 * test_steps.add("Enter Phone Number : " + phone[i - 1]);
				 * reslogger.info("Enter Phone Number : " + phone[i - 1]);
				 * 
				 * Wait.WaitForElement(driver,
				 * OR_Reservation.CP_NewReservation_AltenativePhone);
				 * res.CP_NewReservation_AltenativePhone.clear();
				 * res.CP_NewReservation_AltenativePhone.sendKeys(
				 * AltenativePhone);
				 * test_steps.add("Enter AltenativePhone Number : " +
				 * AltenativePhone);
				 * reslogger.info("Enter AltenativePhone Number : " +
				 * AltenativePhone);
				 */

				/*
				 * Wait.WaitForElement(driver,
				 * OR_Reservation.CP_NewReservation_Email);
				 * res.CP_NewReservation_Email.clear();
				 * res.CP_NewReservation_Email.sendKeys(mail[i - 1]);
				 * test_steps.add("Enter Email : " + mail[i - 1]);
				 * reslogger.info("Enter Email : " + mail[i - 1]);
				 */
			} else {

				String additional = "(//span[text()='Additional Room'])";
				int count = driver.findElements(By.xpath(additional)).size();

				String saluta = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//span[text()='Select']/..";
				String slaut = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//span[text()='Select']/../following-sibling::div//li//span[text()='"
						+ salu[i - 1] + "']";
				Wait.WaitForElement(driver, saluta);
				driver.findElement(By.xpath(saluta)).click();
				reslogger.info(slaut);
				Wait.WaitForElement(driver, slaut);
				driver.findElement(By.xpath(slaut)).click();

				count = driver.findElements(By.xpath("//label[text()='Guest ']/../input")).size();
				String fname = "(//label[text()='Guest ']/../input)[" + i + "]";
				Wait.WaitForElement(driver, fname);
				driver.findElement(By.xpath(fname)).clear();
				String fName=guestFName[i - 1]+randomNumber;
				driver.findElement(By.xpath(fname)).sendKeys(fName);
				test_steps.add("Guest First Name : " + fName);
				reslogger.info("Guest First Name : " + fName);

				count = driver
						.findElements(By
								.xpath("(//span[text()='Additional Room'])/../../../../../..//label[text()='Last Name']/../input"))
						.size();
				String lname = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//label[text()='Last Name']/../input";
				Wait.WaitForElement(driver, lname);
				driver.findElement(By.xpath(lname)).clear();
				String lName=guestLName[i - 1]+randomNumber;
				driver.findElement(By.xpath(lname)).sendKeys(lName);
				test_steps.add("Guest Last Name : " + lName);
				reslogger.info("Guest Last Name : " + lName);

				/*
				 * count = driver.findElements(By.xpath(
				 * "(//label[text()='Phone']/preceding-sibling::input)")).size()
				 * ; String ph = "(//span[text()='Additional Room'])[" + (i - 1)
				 * +
				 * "]/../../../../../..//label[text()='Phone']/preceding-sibling::input";
				 * driver.findElement(By.xpath(ph)).clear();
				 * driver.findElement(By.xpath(ph)).sendKeys(phone[i - 1]);
				 * test_steps.add("Enter Phone Number : " + phone[i - 1]);
				 * reslogger.info("Enter Phone Number : " + phone[i - 1]);
				 */

				/*
				 * count = driver.findElements(By.xpath(
				 * "(//label[text()='E-mail']/preceding-sibling::input)")).size(
				 * ); String email = "(//span[text()='Additional Room'])[" + (i
				 * - 1) +
				 * "]/../../../../../..//label[text()='E-mail']/preceding-sibling::input";
				 * driver.findElement(By.xpath(email)).clear();
				 * 
				 * driver.findElement(By.xpath(email)).sendKeys(mail[i - 1]);
				 * test_steps.add("Enter Altenative Email : " + mail[i - 1]);
				 * reslogger.info("Enter Altenative Email : " + mail[i - 1]);
				 */

			}
			/*
			 * if (!(i == size) && IsAddMoreGuestInfo.equalsIgnoreCase("Yes") &&
			 * IsSplit.equalsIgnoreCase("Yes")) { Wait.WaitForElement(driver,
			 * OR_Reservation.CP_NewReservation_AddMoreGuestInfo);
			 * res.CP_NewReservation_AddMoreGuestInfo.click();
			 * test_steps.add("Clicking on Add More Guest Info");
			 * reslogger.info("Clicking on Add More Guest Info"); }
			 */
		}

	}

	public void clickStayInfoCheckOutRoom(WebDriver driver, ArrayList<String> test_steps, String roomNO)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		String path = "//div[contains(@data-bind,'ReservationStatusLookup')]/div//div[contains(@class,'ir-roomInfo')]//span[contains(text(),'"
				+ roomNO + "')]"
				+ "/ancestor::div/div[contains(@class,'detailsbox')]/following-sibling::div//button[contains(text(),'Check Out')]";
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		element.click();

		/*
		 * Wait.WaitForElement(driver,
		 * OR_Reservation.CP_Reservation_StayInfo_CheckOutButton);
		 * Utility.ScrollToElement(res.
		 * CP_Reservation_StayInfo_CheckOutButtonList.get(Integer.parseInt(
		 * roomNO) - 1), driver);
		 * res.CP_Reservation_StayInfo_CheckOutButtonList.get(Integer.parseInt(
		 * roomNO) - 1).click();
		 */
		test_steps.add("Room <b>" + roomNO + "</b> in the MRB Reservation Click Check-Out Button");
		reslogger.info("Room " + roomNO + " in the MRB Reservation Click Check-Out Button");

	}

	public void clickCheckoutProceedButton(WebDriver driver, ArrayList<String> test_steps, String buttonName)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkout_ProceedButton);
		Utility.ScrollToElement(res.checkout_ProceedButton, driver);
		String text = res.checkout_ProceedButton.getText();
		reslogger.info(text);
		assertEquals(text.toLowerCase().trim(), buttonName.toLowerCase().trim(), "Failed to verify Proceed Button");
		test_steps.add("Verified Proceed button");
		reslogger.info("Verified Proceed button");
		res.checkout_ProceedButton.click();
		test_steps.add("Click Proceed button");
		reslogger.info("Click Proceed button");
	}

	public void verifyCheckoutProceedMessage(WebDriver driver, ArrayList<String> test_steps, String message)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkout_ProceedMessage);
		Utility.ScrollToElement(res.checkout_ProceedMessage, driver);
		String text = res.checkout_ProceedMessage.getText();
		reslogger.info(text);
		assertEquals(text.toLowerCase().trim(), message.toLowerCase().trim(), "Failed to verify Proceed Message");
		test_steps.add("Verified Message: <b>" + text + "</b>");
		reslogger.info("Verified Message: " + text);
	}

	public void verifyConfirmCheckoutWithoutRefundButton(WebDriver driver, ArrayList<String> test_steps, String message)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkoutWithoutRefund);
		Utility.ScrollToElement(res.checkoutWithoutRefund, driver);
		String text = res.checkoutWithoutRefund.getText();
		reslogger.info(text);
		assertEquals(text.toLowerCase().trim(), message.toLowerCase().trim(),
				"Failed to verify confirm checkout without refund");
		test_steps.add("Verified Button: <b>" + text + "</b>");
		reslogger.info("Verified Button: " + text);
	}

	public void verifytakeMeToFolioButton(WebDriver driver, ArrayList<String> test_steps, String message)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkoutTakemeToFolio);
		Utility.ScrollToElement(res.checkoutTakemeToFolio, driver);
		String text = res.checkoutTakemeToFolio.getText();
		reslogger.info(text);
		assertEquals(text.toLowerCase().trim(), message.toLowerCase().trim(), "Failed to verify take me to folio");
		test_steps.add("Verified Button: <b>" + text + "</b>");
		reslogger.info("Verified Button: " + text);
	}

	public void clicktakeMeToFolioButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkoutTakemeToFolio);
		Utility.ScrollToElement(res.checkoutTakemeToFolio, driver);
		res.checkoutTakemeToFolio.click();
		test_steps.add("Click <b>" + res.checkoutTakemeToFolio.getText() + " Button</b>");
		reslogger.info("Click  " + res.checkoutTakemeToFolio.getText() + " Button");
		Wait.waitTillElementDisplayed(driver, OR_Reservation.loading);
		reslogger.info("Loading Done  ");
	}

	public void clickConfirmCheckoutWithoutRefundButton(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkoutWithoutRefund);
		Utility.ScrollToElement(res.checkoutWithoutRefund, driver);
		res.checkoutWithoutRefund.click();
		test_steps.add("Click <b>" + res.checkoutWithoutRefund.getText() + " Button</b>");
		reslogger.info("Click  " + res.checkoutWithoutRefund.getText() + " Button");
		Wait.waitTillElementDisplayed(driver, OR_Reservation.loading);
		reslogger.info("Loading Done  ");
	}

	public void verifytakeMeToFolio(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.folioDetailTab);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.folioDetailTab), driver);
		assertTrue(driver.findElement(By.xpath(OR_Reservation.folioDetailTab)).isDisplayed(),
				"Failed: to Displayed Folio Detail");
		test_steps.add("Moved to Folio");
		reslogger.info("Moved to Folio");

	}

	public void verifyFoiloRefund(WebDriver driver, ArrayList<String> test_steps, String balanceAmount) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		balanceAmount = df.format(Double.parseDouble(balanceAmount));
		balanceAmount = "(" + balanceAmount + ")";
		reslogger.info(balanceAmount);

		try {
			String balanceAmountDisplayed = get_Balance(driver, test_steps);
			reslogger.info(balanceAmountDisplayed);
			assertEquals(balanceAmountDisplayed.trim(), balanceAmount.trim(), "Failed - Verify Refund at Folio");
			test_steps.add(
					"Successfully verified Refund amount displayed at folio as <b>" + balanceAmountDisplayed + "</b>");
			reslogger.info("Successfully verified Refund amount displayed at folio as " + balanceAmountDisplayed);
		} catch (Exception e) {
			reslogger.info(e);
		}
	}

	public void verifytakemeToDetail(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.detailTab);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.detailTab), driver);
		assertTrue(driver.findElement(By.xpath(OR_Reservation.detailTab)).isDisplayed(), "Failed: to Displayed Detail");
		test_steps.add("Moved to Detail Page");
		reslogger.info("Moved to Detail Page");
	}

	public void verifyRefundOnDetail(WebDriver driver, ArrayList<String> test_steps, String balanceAmount) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		balanceAmount = df.format(Double.parseDouble(balanceAmount));
		balanceAmount = "(" + balanceAmount + ")";
		reslogger.info(balanceAmount);

		try {
			String balanceAmountDisplayed = get_TripSummaryBalance_Amount(driver, test_steps);
			reslogger.info(balanceAmountDisplayed);
			assertEquals(balanceAmountDisplayed.trim(), balanceAmount.trim(), "Failed - Verify Refund at Detail");
			test_steps.add(
					"Successfully verified Refund amount displayed at detail as <b>" + balanceAmountDisplayed + "</b>");
			reslogger.info("Successfully verified Refund amount displayed at detail as " + balanceAmountDisplayed);
		} catch (Exception e) {
			reslogger.info(e);
		}
	}

	public void verifyStayInfoCheckOutButton(WebDriver driver, ArrayList<String> test_steps, String roomNO)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_StayInfo_CheckOutButton);
		int x = Integer.parseInt(roomNO) - 1;
		Utility.ScrollToElement(res.CP_Reservation_StayInfo_CheckOutButtonList.get(Integer.parseInt(roomNO) - 1),
				driver);
		assertTrue(res.CP_Reservation_StayInfo_CheckOutButtonList.get(Integer.parseInt(roomNO) - 1).isDisplayed(),
				"Failed: to Displayed Detail");
		test_steps.add("Room <b>" + (Integer.parseInt(roomNO)) + "</b> in the MRB Reservation Verify Check-Out Button");
		reslogger.info("Room " + (Integer.parseInt(roomNO)) + " in the MRB Reservation Verify Check-Out Button");
	}

	public void verifySettlementMsg(WebDriver driver, ArrayList test_steps, String RoomNo, String RoomClassName)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutAllButton_ConfirmationMsg);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg, driver);
		Utility.ScrollToElement(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg, driver);
		String Msg = "Do you wish to settle all charges in the folio for " + RoomClassName + ", room " + RoomNo
				+ "? If not, payment will be taken when the primary guest checks out.";
		reslogger.info(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg.getText());
		assertEquals(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg.getText().toLowerCase().trim(),
				Msg.toLowerCase().trim(), "Failed: To verify Message");
		test_steps.add("Verified Message : <b>" + Msg + "</b>");
		reslogger.info("Verified Message : " + Msg);

	}

	public void clickSettlementYesButton(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutAllButton_ConfirmationMsgYesButton);
		Utility.ScrollToElement(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg, driver);
		res.CP_Reservation_CheckOutAllButton_ConfirmationMsgYesButton.click();
		test_steps.add("Clicking on Yes Button");
		reslogger.info("Clicking on Yes Button");
	}

	public void clickSettlementNoButton(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutAllButton_ConfirmationMsgNoButton);
		Utility.ScrollToElement(res.CP_Reservation_CheckOutAllButton_ConfirmationMsgNoButton, driver);
		res.CP_Reservation_CheckOutAllButton_ConfirmationMsgNoButton.click();
		test_steps.add("Clicking on No Button");
		reslogger.info("Clicking on No Button");
	}

	public ArrayList<String> checkOutPayment(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckOut_Button, driver);
		res.CP_Reservation_ConfirmCheckOut_Button.getText();
		res.CP_Reservation_ConfirmCheckOut_Button.click();
		return test_steps;
	}

	public ArrayList<String> clickOnPayButtonOnPaymentPopup1(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_LogANDPayButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowPaymentPopup_LogANDPayButton), driver);
		Utility.ScrollToElement_NoWait(res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton, driver);
		String buttonName = res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().split(" ")[0];

		JavascriptExecutor js = (JavascriptExecutor) driver;
		js.executeScript("arguments[0].click();", res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton);
		test_steps.add("Clicking on " + buttonName + " Button ");
		reslogger.info("Clicking on " + buttonName + " Button ");
		try {
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowSuccess_ModelHeader), driver);
		} catch (Exception e) {
			try {
				js.executeScript("arguments[0].click();", res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton);
				test_steps.add("Clicking on " + buttonName + " Button ");
				reslogger.info("Clicking on " + buttonName + " Button ");
				Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowSuccess_ModelHeader), driver);

			} catch (Exception e2) {
				test_steps
						.add("Existing issue in CP: Posted room charges do not move to account when charge routing is set"
								+ "<br/><a href='https://innroad.atlassian.net/browse/NG-10512' target='_blank'>"
								+ "Verified :NG-10512</a><br/>");
				reslogger
						.info("Existing issue in CP: Posted room charges do not move to account when charge routing is set"
								+ "<br/><a href='https://innroad.atlassian.net/browse/NG-10512' target='_blank'>"
								+ "Verified :NG-10512</a><br/>");
			}
		}
		return test_steps;
	}

	public boolean verifyEmailIconEnabled(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_Reservation ReservationPage = new Elements_Reservation(driver);
		boolean emailIconFound = false;
		if (ReservationPage.emailIconsInGuestDetailsTab.size() > 0) {
			emailIconFound = true;
		}
		return emailIconFound;
	}

	public void verifyEmailIconEnabled(WebDriver driver, ArrayList<String> test_steps, boolean expValue)
			throws InterruptedException {
		boolean actValue = verifyEmailIconEnabled(driver, test_steps);
		assertEquals(actValue, expValue, "Failed to verify email icon displayed in guest details tab");
		if (expValue) {
			test_steps.add("Successfully verified email icon displayed in guest details tab");
		} else {
			test_steps.add("Successfully verified email icon is not displayed in guest details tab");
		}
	}

	public void Search_ResNumber_And_Click(WebDriver driver, String resNumber) throws InterruptedException {
		// String str = null;

		Elements_Reservation_SearchPage resservationSearch = new Elements_Reservation_SearchPage(driver);
		Wait.WaitForElement(driver, OR.Basic_Res_Number);
		resservationSearch.Basic_Res_Number.clear();
		resservationSearch.Basic_Res_Number.sendKeys(resNumber);
		resservationSearch.Click_BasicSearch.click();
		Wait.WaitForElement(driver, OR.Get_Res_Number);
		String resLocator = "//span[contains(text(),'" + resNumber.trim() + "')]/../../td[4]/div/a";
		WebElement ReservationFound = driver.findElement(By.xpath(resLocator));
		ReservationFound.click();
		Wait.wait3Second();
		// driver.navigate().refresh();
	}

	public void clickOnCashPaymentTypeDescription(WebDriver driver) throws InterruptedException {
		test_steps.add("Click on Cash payment description in folio tab");
		reslogger.info("Click on Cash payment description in folio tab");
		Elements_CPReservation res = new Elements_CPReservation(driver);
		res.cashPaymentDescription.click();
		verifyUpdatedByInItemDetailPopUp(driver);
	}

	public ArrayList<String> enterGuestName(WebDriver driver, ArrayList<String> test_steps, String GuestFirstName,

			String GuestLastName) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
		res.CP_NewReservation_GuestFirstName.sendKeys(GuestFirstName);
		test_steps.add("Guest First Name : <b>" + GuestFirstName + "</b>");
		reslogger.info("Guest First Name : <b>" + GuestFirstName + "</b>");

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);
		res.CP_NewReservation_GuestLastName.sendKeys(GuestLastName);
		test_steps.add("Guest Last Name : <b>" + GuestLastName + "</b>");
		reslogger.info("Guest Last Name : <b>" + GuestLastName + "</b>");
		return test_steps;
	}

	public void selectPaymentMethodType(WebDriver driver, ArrayList<String> test_steps, String paymentType,
			String cardNumber, String nameOnCard, String cardExpiryDate, String reservationNumber, String amount)
			throws InterruptedException {
		click_Pay(driver, test_steps);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CreateReservationPaymentMethod);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CreateReservationPaymentMethod), driver);
		test_steps.add("Clicking on Payment Method");
		reslogger.info("Clicking on Payment Method");
		try {
			Utility.ScrollToElement(res.createReservationPaymentMethod, driver);
			res.createReservationPaymentMethod.click();
		} catch (Exception e) {
			Wait.WaitForElement(driver, OR_Reservation.CreateReservationPaymentMethod);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CreateReservationPaymentMethod), driver);
			test_steps.add("Again Clicking on Payment Method");
			reslogger.info("Again Clicking on Payment Method");
			Utility.ScrollToElement(res.createReservationPaymentMethod, driver);
			res.createReservationPaymentMethod.click();
		}
		if (paymentType.trim().equalsIgnoreCase("MC")) {
			String paymentMethodMc = "(//label[text()='PAYMENT METHOD'])[2]//..//div//button//following-sibling::div//ul//li//span[text()='MC']";
			Wait.WaitForElement(driver, paymentMethodMc);
			test_steps.add("Clicking on Payment Method MC");
			reslogger.info("Clicking on Payment Method MC");
			driver.findElement(By.xpath(paymentMethodMc)).click();
			enterMcCardInfo(driver, test_steps, cardNumber, nameOnCard, cardExpiryDate);
			clickFolioName(driver);
			clickPayButton(driver);
			closePaymentSuccessfullModal(driver);
			click_Folio(driver, test_steps);
		} else if (paymentType.trim().equalsIgnoreCase("Reservation")) {
			String paymentMethodReservation = "(//label[text()='PAYMENT METHOD'])[2]//..//div//button//following-sibling::div//ul//li//span[text()='Reservation']";
			Wait.WaitForElement(driver, paymentMethodReservation);
			test_steps.add("Clicking on Payment Method Reservation");
			reslogger.info("Clicking on Payment Method Reservation");
			driver.findElement(By.xpath(paymentMethodReservation)).click();
			enterReservationNumber(driver, reservationNumber);
			// selectReservation(driver);
			clickFolioName(driver);
			clickPayButton(driver);
			closePaymentSuccessfullModal(driver);
		} else if (paymentType.trim().equalsIgnoreCase("Check")) {
			String paymentMethodCheck = "(//label[text()='PAYMENT METHOD'])[2]//..//div//button//following-sibling::div//ul//li//span[text()='Check']";
			Wait.WaitForElement(driver, paymentMethodCheck);
			test_steps.add("Select Payment Method : Check");
			reslogger.info("Select Payment Method : Check");
			driver.findElement(By.xpath(paymentMethodCheck)).click();
			enterAmount(driver, amount);
			test_steps.add("Enter Amount : " + amount);
			reslogger.info("Enter Amount : " + amount);
			clickFolioName(driver);
			clickPayButton(driver);
			test_steps.addAll(closePaymentSuccessfullModal(driver));
			click_Folio(driver, test_steps);
		}
	}

	private void enterMcCardInfo(WebDriver driver, ArrayList<String> test_steps, String cardNumber, String nameOnCard,
			String cardExpDate) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		res.CP_NewReservation_CardNumber.sendKeys(cardNumber);
		test_steps.add("Enter CardNumber : " + cardNumber);
		reslogger.info("Enter CardNumber : " + cardNumber);
		res.CP_NewReservation_NameOnCard.sendKeys(nameOnCard);
		test_steps.add("Enter Name On Card : " + nameOnCard);
		reslogger.info("Enter Name On Card : " + nameOnCard);
		res.CP_NewReservation_CardExpDate.sendKeys(cardExpDate);
		test_steps.add("Enter Card ExpDate : " + cardExpDate);
		reslogger.info("Enter Card ExpDate : " + cardExpDate);

	}

	private void enterReservationNumber(WebDriver driver, String reservationNumber) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		res.enterReservationNumber.sendKeys(reservationNumber);
		Wait.WaitForElement(driver, OR_Reservation.EnterReservationNumber);
		selectReservation(driver);
		test_steps.add("Enter Reservation Number");
		reslogger.info("Enter Reservation Number");
	}

	private void clickPayButton(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		res.clickPayButton.click();
		test_steps.add("Clicking on Pay Button");
		reslogger.info("Clicking on Pay Button");
	}

	public ArrayList<String> closePaymentSuccessfullModal(WebDriver driver) {
		ArrayList<String> steps = new ArrayList<>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ClosePaymentSuccessfulModal);
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ClosePaymentSuccessfulModal, driver);
		res.closePaymentSuccessfulModal.click();
		steps.add("Clicking on Close Payment Successfull modal");
		reslogger.info("Clicking on Close Payment Successfull modal");
		return steps;
	}

	public void verifyUpdatedByInItemDetailPopUp(WebDriver driver) throws InterruptedException {
		Wait.wait10Second();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String updatedByUserName = res.updatedByUser.getText();
		assertTrue(updatedByUserName.contains("autouser"));
		test_steps.add("Verify Updated By is displayed");
		reslogger.info("Verify Updated By is displayed");
	}

	public void clickSavePaymentButton(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ClickSavePaymentButton);
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ClickSavePaymentButton, driver);
		res.clickSavePaymentButton.click();
		Wait.wait15Second();
	}

	private void enterAmount(WebDriver driver, String amount) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterAmount), driver);
		Utility.ScrollToElement(res.enterAmount, driver);
		res.enterAmount.clear();
		res.enterAmount.sendKeys(Keys.chord(Keys.CONTROL, "a"));
		res.enterAmount.sendKeys(amount);
	}

	public String getReservationNumber(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		return res.reservationNumber.getText();
	}

	private void clickFolioName(WebDriver driver) {
		driver.findElement(By
				.xpath("//*[@id=\"bpjscontainer_29\"]/div[2]/div/div[2]/form/div[5]/div/div[2]/div[2]/div/div/button"))
				.click();

	}

	public void verifyTripTotalPercentage(WebDriver driver) throws InterruptedException {
		String tripTotal = (driver.findElement(By
				.xpath("//div[@class='row ir-pb-10 ir-pt-10 fw-700 ir-fontSize-18 ir-bt-1']//div[@class='col-md-7 col-lg-7 col-xs-7 col-sm-7 text-right']")))
						.getText();
		float expectedPercentage = 0;
		String valueWithOutDollar = tripTotal.replace("$", "").trim();
		Float floatVal = Float.valueOf(valueWithOutDollar).floatValue();
		expectedPercentage = ((10 * floatVal) / 100);
		String expectedPercentageInStringFormat = String.valueOf(expectedPercentage);
		String expectedPercentageWithDollar = "$ " + expectedPercentageInStringFormat;
		boolean actualPercentage = (driver
				.findElement(By.xpath("//div[@class='ir-fontSize-18 fw-700 ir-color-green pull-right']")).getText())
						.contains(expectedPercentageWithDollar);
		test_steps.add(" Verify Deposit Due Percentage as : <b>" + expectedPercentage + " </b>");
		reslogger.info(" Verify Deposit Due Percentage as : <b>" + expectedPercentage + " </b>");
		assertTrue(actualPercentage);

	}

	private void selectReservation(WebDriver driver) {
		test_steps.add("Select Reservation");
		reslogger.info("Select Reservation");
		String element = "//*[@id=\"bpjscontainer_29\"]/div[2]/div/div[2]/form/div[6]/fieldset/paymentmethod/div/div/div[1]/div/div[3]/div[1]/div/div/ul/li[1]";
		Wait.waitForElementToBeClickable(By.xpath(element), driver);
		driver.findElement(By.xpath(element)).click();

	}

	public ArrayList<String> verifyUpdatedByInItemDetailPopUp(WebDriver driver, String user,
			ArrayList<String> testSteps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.UpdatedByUser), driver);
		Utility.ScrollToElement(res.updatedByUser, driver);
		String updatedByUserName = res.updatedByUser.getText();
		testSteps.add("Verify Updated By is displayed");
		reslogger.info("Verify Updated By is displayed");
		assertTrue(updatedByUserName.contains(user));
		testSteps.add("Verify User '" + user + "'");
		reslogger.info("Verify User '" + user + "'");
		return testSteps;
	}

	// Added By Adhnan6/23/2020
	public void makePayment(WebDriver driver, ArrayList<String> test_steps, String amount) throws InterruptedException {
		click_Pay(driver, test_steps);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CreateReservationPaymentMethod);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CreateReservationPaymentMethod), driver);

		enterAmount(driver, amount);
		test_steps.add("Enter Amount : " + amount);
		reslogger.info("Enter Amount : " + amount);
		clickFolioName(driver);
		clickPayButton(driver);
		test_steps.add("Click Pay");
		reslogger.info("Click Pay");
		test_steps.addAll(closePaymentSuccessfullModal(driver));
		click_Folio(driver, test_steps);

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <calculateDepositePercenatge> ' Description: <This method
	 * will calculate Deposit amount based on policy percentage> ' Input
	 * parameters: <String tripTotal, String depositAmount> ' Return value:
	 * <Double> ' Created By: <Farhan Ghaffar> ' Created On: <06/10/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public Double calculationDepositePercenatge(String tripTotal, String depositAmount) {
		Double tripTotalInDouble = Double.parseDouble(tripTotal);
		Double depositAmountInDouble = Double.parseDouble(depositAmount);

		Double getAmount = tripTotalInDouble * depositAmountInDouble;
		getAmount = getAmount / 100;
		String amount = String.format("%.2f", getAmount);
		depositAmountInDouble = Double.parseDouble(amount);
		return depositAmountInDouble;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: attachTravelAgentMarketSegmentDetails ' Description:
	 * Search Travel Agent Account and Popup Show to override All Information
	 * ,Clicks Yes. ' Input parameters: (driver,String[], String ) ' Return
	 * value: void ' Created By: Aqsa ' Created On: <06/22/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public void attachTravelAgentMarketSegmentDetails(WebDriver driver, ArrayList test_steps, String TravelAgent)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_TravelAgent);

		if (!(TravelAgent.equalsIgnoreCase("") || TravelAgent.isEmpty())) {
			res.CP_NewReservation_TravelAgent.clear();
			Wait.wait1Second();
			res.CP_NewReservation_TravelAgent.sendKeys(TravelAgent);
			Wait.wait2Second();
			String account = "//b[contains(text(),'" + TravelAgent.trim() + "')]/../../..";
			Wait.WaitForElement(driver, account);
			driver.findElement(By.xpath(account)).click();
			String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]/following-sibling::div//button[contains(text(),'Yes')]";
			Wait.WaitForElement(driver, dataYes);
			driver.findElement(By.xpath(dataYes)).click();
			test_steps.add(
					"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
			reslogger.info(
					"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
			Wait.wait5Second();
		}
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: verifyMarketInfo ' Description: Verifies the Information
	 * is same as attached from Travel Agent or Any other Account. ' Input
	 * parameters: (driver,String, String ) ' Return value: String<> ' Created
	 * By: Aqsa ' Created On: <06/22/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> verifyMarketingInformation(WebDriver driver, String Market, String Referral)
			throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		String marketValue = "(//label[text()='Market']/preceding-sibling::div/button)[1]//span[text()='" + Market
				+ "']";
		String referralValue = "(//label[text()='Referral']/preceding-sibling::div/button)[2]//span[text()='" + Referral
				+ "']";

		WebElement MarketEle = driver.findElement(By.xpath(marketValue));
		WebElement ReferraltEle = driver.findElement(By.xpath(referralValue));

		assertEquals(Market, MarketEle.getText());
		reslogger.info("Marketing Info Market: " + Market + " :Verified");
		test_steps.add("Marketing Info Market: " + Market + " :Verified");
		reslogger.info("Valueee:" + ReferraltEle.getText());

		assertEquals(Referral, ReferraltEle.getText());
		reslogger.info("Marketing Info Referral: " + Referral + " :Verified");
		test_steps.add("Marketing Info Referral: " + Referral + " :Verified");
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: verifyTravelAgentAttachedAndClick ' Description: Verifies
	 * the Attached Travel Agent Name and check if it is clickable and opens it
	 * on condtion. ' Input parameters: (driver,String, boolean ) ' Return
	 * value: String<> ' Created By: Aqsa ' Created On: <06/23/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> verifyTravelAgentAttachedAndClick(WebDriver driver, String travelAgentAtatched,
			boolean isClick) throws Exception {
		ArrayList<String> test_steps = new ArrayList<String>();

		Elements_CPReservation res = new Elements_CPReservation(driver);
		WebElement attachedTravelAgent = driver.findElement(By.xpath("//a[contains(@data-bind,'text:travelAgent')]"));
		Utility.ScrollToElement(attachedTravelAgent, driver);
		String foundTravelAgent = attachedTravelAgent.getText();
		assertEquals(foundTravelAgent, travelAgentAtatched, "Failed:Travel Agent Attached Mismatched");
		reslogger.info("Travel Agent Attached: " + foundTravelAgent + " :Verified");
		test_steps.add("Travel Agent Attached: " + foundTravelAgent + " :Verified");
		assertEquals(attachedTravelAgent.getTagName(), "a", "Failed:Travel Agent Attached Not Clickable");
		reslogger.info(
				"Travel Agent Attached is Clickable: Have Tag: " + attachedTravelAgent.getTagName() + " :Verified");
		test_steps.add(
				"Travel Agent Attached is Clickable:  Have Tag:" + attachedTravelAgent.getTagName() + " :Verified");
		if (isClick) {
			attachedTravelAgent.click();
			reslogger.info("Travel Agent Attached Clicked");
			test_steps.add("Travel Agent Attached Clicked");
		}
		return test_steps;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: verifyContactInformation ' Description: Verifies Contacts
	 * Information if Account is Attached To Reservation . ' Input parameters:
	 * (driver,String, String,String,String,String,String ) ' Return value:
	 * String<> ' Created By: Aqsa ' Created On: <06/23/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> verifyContactInformation(WebDriver driver, String Salutation, String FirstName,
			String LastName, String Email, String Phone, String AlternativePhone) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		assertEquals(FirstName, cpelements.CP_NewReservation_ContactFirstName.getAttribute("value"));
		reslogger.info("Contact Info FirstName: " + FirstName + " :Verified");
		test_steps.add("Contact Info FirstName: " + FirstName + " :Verified");

		assertEquals(LastName, cpelements.CP_NewReservation_ContactLastName.getAttribute("value"));
		reslogger.info("Contact Info LastName: " + LastName + " :Verified");
		test_steps.add("Contact Info LastName: " + LastName + " :Verified");

		assertEquals(Email, cpelements.CP_NewReservation_Email.getAttribute("value"));
		reslogger.info("Contact Info Email: " + Email + " :Verified");
		test_steps.add("Contact Info Email: " + Email + " :Verified");

		assertEquals(Phone, cpelements.CP_NewReservation_Phone.getAttribute("value").replaceAll("-", "")
				.replaceAll(" ", "").replaceAll("\\)", "").replaceAll("\\(", ""));
		reslogger.info("Contact Info PhoneNumber: " + Phone + " :Verified");
		test_steps.add("Contact Info PhoneNumber: " + Phone + " :Verified");

		assertEquals(AlternativePhone, cpelements.CP_NewReservation_AltenativePhone.getAttribute("value")
				.replaceAll("-", "").replaceAll(" ", "").replaceAll("\\)", "").replaceAll("\\(", ""));
		reslogger.info("Contact Info AlternativePhon: " + AlternativePhone + " :Verified");
		test_steps.add("Contact Info AlternativePhon: " + AlternativePhone + " :Verified");

		return test_steps;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: verifyMailingInformation ' Description: Verifies Mailing
	 * Information if Account is Attached To Reservation . ' Input parameters:
	 * (driver,String, String,String,String,String,String ) ' Return value:
	 * String<> ' Created By: Aqsa ' Created On: <06/23/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> verifyMailingInformation(WebDriver driver, String Address1, String Address2,
			String Address3, String City, String Country, String State, String PostalCode) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		assertEquals(Address1, cpelements.CP_NewReservation_Address1.getAttribute("value"));
		reslogger.info("Mailing Info Address1: " + Address1 + " :Verified");
		test_steps.add("Mailing Info Address1: " + Address1 + " :Verified");
		assertEquals(Address2, cpelements.CP_NewReservation_Address2.getAttribute("value"));
		reslogger.info("Mailing Info Address2: " + Address2 + " :Verified");
		test_steps.add("Mailing Info Address2: " + Address2 + " :Verified");
		assertEquals(Address3, cpelements.CP_NewReservation_Address3.getAttribute("value"));
		reslogger.info("Mailing Info Address3: " + Address3 + " :Verified");
		test_steps.add("Mailing Info Address3: " + Address3 + " :Verified");
		assertEquals(City, cpelements.CP_NewReservation_City.getAttribute("value"));
		reslogger.info("Mailing Info City: " + City + " :Verified");
		test_steps.add("Mailing Info City: " + City + " :Verified");
		assertEquals(Country, cpelements.CP_NewReservation_COUNTRY.getText());
		reslogger.info("Mailing Info Country: " + Country + " :Verified");
		test_steps.add("Mailing Info Country: " + Country + " :Verified");
		assertEquals(State, cpelements.CP_NewReservation_STATE.getText());
		reslogger.info("Mailing Info State: " + State + " :Verified");
		test_steps.add("Mailing Info State: " + State + " :Verified");
		assertEquals(PostalCode, cpelements.CP_NewReservation_POSTALCODE.getAttribute("value"));
		reslogger.info("Mailing Info PostalCode: " + PostalCode + " :Verified");
		test_steps.add("Mailing Info PostalCode: " + PostalCode + " :Verified");

		return test_steps;

	}

	public String getCheckInPolicyName(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(
				By.xpath(OR_Reservation.CP_Reservation_POLICIESANDDISCLAIMERS_CheckINPolicyCollapse), driver);
		Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyCollapse, driver);
		res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyCollapse.click();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkInPolicyName), driver);
		Utility.ScrollToElement(res.checkInPolicyName, driver);
		return res.checkInPolicyName.getText();
	}

	public List<String>[] getAllDetailsOfAvailableRoomDetailsAgainstRatePlan(WebDriver driver, String ratePlan)
			throws InterruptedException {
		List<String>[] allTheList = new List[4];
		ArrayList<String> allRoomClassName = new ArrayList<String>();
		ArrayList<String> allRoomRates = new ArrayList<String>();
		ArrayList<String> allRoomDescription = new ArrayList<String>();
		ArrayList<String> errorMessage = new ArrayList<String>();
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Rateplan);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Rateplan), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_Rateplan), driver);
		// Selecting Rate Plan
		element.CP_NewReservation_Rateplan.click();
		String rate = "//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[contains(text(),'"
				+ ratePlan + "')]/..";
		reslogger.info(rate);
		Wait.WaitForElement(driver, rate);
		driver.findElement(By.xpath(rate)).click();
		test_steps.add("Selecting the rateplan : " + ratePlan);
		reslogger.info("Selecting the rateplan : " + ratePlan);
		// Click on Find Room
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_FindRooms);
		element.CP_NewReservation_FindRooms.click();
		test_steps.add("Clicking on FindRooms");
		reslogger.info("Clicking on FindRooms");

		// geting details of All Available Room Classes against Rate Plans
		int size = 0;

		size = element.getAllRoomClassName.size();

		if (size == 0) {

			String error = element.getErrorMessage.get(size).getText();
			errorMessage.add(error);
			reslogger.info("Error Messeage is = " + error);
		} else {

			for (int i = 0; i < size; i++) {

				Utility.ScrollToElement(element.getAllRoomClassName.get(i), driver);
				String roomName = element.getAllRoomClassName.get(i).getText();
				allRoomClassName.add(roomName);
				reslogger.info("Room Class Name " + i + " = " + roomName);

				Utility.ScrollToElement(element.getAllRoomClassDescription.get(i), driver);
				String roomRates = element.getAllRoomrates.get(i).getText();
				allRoomRates.add(roomRates);
				reslogger.info("Room Rate Name " + i + " = " + roomRates);

				Utility.ScrollToElement(element.getAllRoomrates.get(i), driver);
				String roomDescription = element.getAllRoomClassDescription.get(i).getText();
				allRoomDescription.add(roomDescription);
				reslogger.info("Room Class Name Description " + i + " = " + roomDescription);

			}
		}
		// add all arrayList in to list of list Array
		allTheList[0] = allRoomClassName;

		allTheList[1] = allRoomRates;

		allTheList[2] = allRoomDescription;

		allTheList[3] = errorMessage;

		return allTheList;
	}

	public HashMap<String, String> getRatesOfAvailableRoomAgainstRatePlan(WebDriver driver, String ratePlan)
			throws InterruptedException {
		HashMap<String, String> ratesAgainstRoomClasses = new HashMap<String, String>();
		ArrayList<String> errorMessage = new ArrayList<String>();
		Elements_CPReservation element = new Elements_CPReservation(driver);

		// geting details of All Available Room Classes against Rate Plans
		int size = 0;

		size = element.getAllRoomClassName.size();

		if (size == 0) {

			String error = element.getErrorMessage.get(size).getText();
			errorMessage.add(error);
			reslogger.info("Error Messeage is = " + error);
		} else {

			for (int i = 0; i < size; i++) {

				Utility.ScrollToElement(element.getAllRoomClassName.get(i), driver);
				String roomName = element.getAllRoomClassName.get(i).getText();
				Utility.ScrollToElement(element.getAllRoomrates.get(i), driver);
				String roomRates = Utility.convertDollarToNormalAmount(driver,
						element.getAllRoomrates.get(i).getText());
				roomRates = roomRates.split("\\.")[0];
				reslogger.info("Room Class Name " + i + " = " + roomName);
				ratesAgainstRoomClasses.put(roomName, roomRates);
				reslogger.info("Room Rate Name " + i + " = " + roomRates);

			}
		}
		// return HasTable of Rates
		System.out.print(" Hash of Rates:" + ratesAgainstRoomClasses);

		return ratesAgainstRoomClasses;
	}

	public ArrayList<String> verifyRateUpdate(WebDriver driver, int numberofDays, String rateFound, String nightlyRate,
			String updateRatesType, String rateChangeValue, String rateCurrencyType,
			ArrayList<String> beforeUpdateRateValues) {
		ArrayList<String> testSteps = new ArrayList<String>();
		int rateExpected = 0;
		for (int i = 0; i < numberofDays; i++) {
			if (rateFound.contains("\\.")) {
				rateFound = rateFound.split("\\.")[0];
			}
			reslogger.info("Nighlty Rate Plan Found In Reservation Find Rooms:" + rateFound);
			testSteps.add("Nighlty Rate Plan Found In Reservation Find Rooms:" + rateFound);

			if (updateRatesType.equalsIgnoreCase("EnterNewRate")) {
				reslogger.info("Nighlty Rate Plan Expected In Reservation Find Rooms:" + nightlyRate);
				testSteps.add("Nighlty Rate Plan Expected In Reservation Find Rooms:" + nightlyRate);

				assertEquals(rateFound, nightlyRate, "Failed: RatePlan didn't Updated");
			}
			// Increase/Decrease Verification

			else if (updateRatesType.equalsIgnoreCase("Increase")) {

				if (rateCurrencyType.equals(Utility.clientCurrency)) {
					// Parse and the add the rateChangeValue
					rateExpected = Integer.parseInt(beforeUpdateRateValues.get(i)) + Integer.parseInt(rateChangeValue);
					reslogger.info("Nighlty Rate Plan Expected In Reservation Find Rooms:" + rateExpected);
					testSteps.add(
							"Nighlty Rate Plan Expected In Reservation Find Rooms:" + beforeUpdateRateValues.get(i));
					// Need to remove dollar sign here
					assertEquals(rateFound.equals(Integer.toString(rateExpected)), true,
							"Failed: Nightly Rate didn't update");
				}
				// Increase is in Percentage
				else {

					// Parse and the add the rateChangeValue
					double percentageIncrease = (Integer.parseInt(beforeUpdateRateValues.get(i))
							* Integer.parseInt(rateChangeValue)) / 100;
					percentageIncrease = Math.ceil(percentageIncrease);
					rateExpected = Integer.parseInt(beforeUpdateRateValues.get(i)) + ((int) percentageIncrease);
					reslogger.info("Nighlty Rate Plan Expected In Reservation Find Rooms:" + rateExpected);
					testSteps.add("Nighlty Rate Plan Expected In Reservation Find Rooms:" + rateExpected);
					assertEquals(rateFound.equals(Integer.toString(rateExpected)), true,
							"Failed: Nightly Rate didn't update");

				}
			}

			else if (updateRatesType.equalsIgnoreCase("Decrease")) {

				if (rateCurrencyType.equals(Utility.clientCurrency)) {

					// Parse and the subtract the
					// rateChangeValue

					rateExpected = Integer.parseInt(beforeUpdateRateValues.get(i)) - Integer.parseInt(rateChangeValue);

					reslogger.info("Nighlty Rate Plan Expected In Reservation Find Rooms:" + rateExpected);
					testSteps.add(
							"Nighlty Rate Plan Expected In Reservation Find Rooms:" + beforeUpdateRateValues.get(i));
					// Need to remove dollar sign here
					assertEquals(rateFound.equals(Integer.toString(rateExpected)), true,
							"Failed: Nightly Rate didn't update");
				}

				// Decrease is in Percentage
				else {

					// Parse and the subtract the
					// rateChangeValue
					double percentageDecrease = (Integer.parseInt(beforeUpdateRateValues.get(i))
							* Integer.parseInt(rateChangeValue)) / 100;
					percentageDecrease = Math.ceil(percentageDecrease);
					rateExpected = Integer.parseInt(beforeUpdateRateValues.get(i)) - (int) percentageDecrease;
					reslogger.info("Nighlty Rate Plan Expected In Reservation Find Rooms:" + rateExpected);
					testSteps.add("Nighlty Rate Plan Expected In Reservation Find Rooms:" + rateExpected);

					assertEquals(rateFound.equals(Integer.toString(rateExpected)), true,
							"Failed: Nightly Rate didn't update");

				}

			}

			else {

				reslogger.info("Nighlty Rate Plan Expected In Reservation Find Rooms:" + beforeUpdateRateValues.get(i));
				testSteps.add("Nighlty Rate Plan Expected In Reservation Find Rooms:" + beforeUpdateRateValues.get(i));
				// Need to remove dollar sign here
				assertEquals(rateFound.equals(beforeUpdateRateValues.get(i)), true,
						"Failed: Nightly Rate didn't update");

			}
		}
		reslogger.info("Verified");
		testSteps.add("Verified");

		return testSteps;

	}

	public String getRoomClassName(WebDriver driver) {
		String roomClass = "";
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GET_ALL_ROOM_CLASS_NAME);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GET_ALL_ROOM_CLASS_NAME), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GET_ALL_ROOM_CLASS_NAME), driver);
		roomClass = element.getRoomClassName.getText();

		return roomClass;
	}

	public String getRoomClassRateWithCurrency(WebDriver driver) {
		String roomClassRate = "";
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GET_RATE_ROOM_CLASS_WITH_CURENCY);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GET_RATE_ROOM_CLASS_WITH_CURENCY), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GET_RATE_ROOM_CLASS_WITH_CURENCY), driver);
		roomClassRate = element.getRateRoomClassWithCurrency.getText();

		return roomClassRate;
	}

	public void clickYesInPolicyPopUp(WebDriver driver) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.YES_POLICY_POPUP), driver);
		try {
			element.yesPolicyPopUp.click();
		} catch (Exception e) {
			JavascriptExecutor js = (JavascriptExecutor)driver;
			js.executeScript("arguments[0].click()", element.yesPolicyPopUp);
		}
	}

	// Added By Adhnan 7/17/2020
	public ArrayList<String> verifyRoomNumberAvailable(WebDriver driver, ArrayList<String> test_steps, String RoomClass,
			String roomNumber, boolean exist) throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//div[2]//span";

		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div/button";
		Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
		Wait.waitForElementToBeClickable(By.xpath(expand), driver);
		WebElement elementExpand = driver.findElement(By.xpath(expand));
		Utility.ScrollToElement_NoWait(elementExpand, driver);
		elementExpand.click();

		String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
		reslogger.info(roomnum);
		List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));

		boolean found = false;
		for (int i = 0; i < getRoomNumber.size(); i++) {
			String tempRN = getRoomNumber.get(i).getText();
			// test_steps.add("Room Number Options : " + tempRN);
			reslogger.info("Room Number Options : " + tempRN);
			if (tempRN.equals(roomNumber)) {
				found = true;
			}
		}
		assertEquals(found, exist, "Failed: room Number existance missmatched");
		return test_steps;
	}

	public ArrayList<String> enterCheckInDate(WebDriver driver, String date) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckInInput);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CheckInInput), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CheckInInput), driver);
		Utility.ScrollToElement(res.CheckInInput, driver);
		res.CheckInInput.clear();
		res.CheckInInput.sendKeys(date);
		testSteps.add("Entered checkin date : " + date);
		reslogger.info("Entered checkin date : " + date);

		return testSteps;
	}

	public void cancelReservation(WebDriver driver, ArrayList test_steps, String CancelReason)
			throws InterruptedException {
		String dropDown = "//i[contains(@data-bind,'ReservationUpdate')]";
		Wait.WaitForElement(driver, dropDown);
		driver.findElement(By.xpath(dropDown)).click();
		Wait.wait2Second();
		String cancel = "(//li//span[text()='Cancel'])[2]";
		Wait.WaitForElement(driver, cancel);
		driver.findElement(By.xpath(cancel)).click();
		reslogger.info("Clicking on cancel");
		test_steps.add("Clicking on cancel");

		String reason = "(//textarea[contains(@data-bind,'cancelreason')])[2]";
		Wait.WaitForElement(driver, reason);
		driver.findElement(By.xpath(reason)).sendKeys(CancelReason);

		String confirm = "//button[contains(text(),'CONFIRM CANCELLATION ')]";
		Wait.WaitForElement(driver, confirm);
		driver.findElement(By.xpath(confirm)).click();
		reslogger.info("Clicking on confirm");
		test_steps.add("Clicking on confirm");

		String rollback = "//button[contains(text(),'Roll Back')]";
		Wait.WaitForElement(driver, rollback);
	}

	public void changeReservationDates(WebDriver driver, ArrayList test_steps, String checkinDate, String checkoutDate,
			String roomClass) throws InterruptedException {
		String edit = "//button[contains(@data-bind,'ReservationUpdate')]/i";
		Wait.WaitForElement(driver, edit);
		driver.findElement(By.xpath(edit)).click();
		reslogger.info("Clicking on edit");
		test_steps.add("Clicking on edit");

		String changeStayDetails = "//li[text()='Change Stay Details']";
		Wait.WaitForElement(driver, changeStayDetails);
		driver.findElement(By.xpath(changeStayDetails)).click();
		reslogger.info("Clicking on changeStayDetails");
		test_steps.add("Clicking on changeStayDetails");

		select_CheckInDate(driver, test_steps, checkinDate);
		select_CheckoutDate(driver, test_steps, checkoutDate);

		clickOnFindRooms(driver, test_steps);
		select_RoomWhileChnageDates(driver, test_steps, roomClass, "Yes", "");

		String save = "//button[text()='Save']";
		Wait.WaitForElement(driver, save);
		driver.findElement(By.xpath(save)).click();
		reslogger.info("Clicking on save");
		test_steps.add("Clicking on save");

		String yes = "//div[contains(text(),'Are you sure you wish to change the total cost of the stay from')]/..//button[text()='Yes']";
		Wait.WaitForElement(driver, yes);
		driver.findElement(By.xpath(yes)).click();
	}

	public void select_RoomWhileChnageDates(WebDriver driver, ArrayList test_steps, String RoomClass, String IsAssign,
			String Account) throws InterruptedException {
		reslogger.info(RoomClass);
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";
		reslogger.info(room);
		Wait.WaitForElement(driver, room);

		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				reslogger.info(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				Random random = new Random();
				int randomNumber = random.nextInt(count1 - 1) + 1;
				reslogger.info("count : " + count1);
				reslogger.info("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			}

			/*
			 * String select =
			 * "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
			 * + RoomClass +
			 * "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			 * Wait.WaitForElement(driver, select);
			 * driver.findElement(By.xpath(select)).click();
			 */

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}
			if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
				String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
				Wait.WaitForElement(driver, policy);
				driver.findElement(By.xpath(policy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");

				loading = "(//div[@class='ir-loader-in'])[2]";
				counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
	}

	public void clickBookQuote(WebDriver driver, ArrayList test_steps) {
		String book = "//button[text()='Book']";
		Wait.WaitForElement(driver, book);
		driver.findElement(By.xpath(book)).click();
		reslogger.info("Clicking on book");
		test_steps.add("Clicking on book");

		String confirm = "//button[contains(text(),'CONFIRM BOOKING')]";
		Wait.WaitForElement(driver, confirm);
		driver.findElement(By.xpath(confirm)).click();
		reslogger.info("Clicking on confirm");
		test_steps.add("Clicking on confirm");

		String close = "(//button[contains(text(),'CLOSE')])[2]";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		reslogger.info("Clicking on close");
		test_steps.add("Clicking on close");
	}

	public void verifyStayInfoDetailsForBERes(WebDriver driver, ArrayList test_steps, String CheckInDate,
			String CheckOutDate, String Adults, String Children, String RoomClass, String RoomCharges,
			ArrayList roomCost, String IsAssign, String RatePlan, String Nights) throws Exception {
		test_steps.add("******************* MRB Stay info fields verification **********************");
		reslogger.info("******************* MRB Stay info fields verification **********************");

		for (int i = 0; i < 2; i++) {

			String checkInDay = "//div[contains(text(),'Stay')]/..//div[@class='checkin']/span[text()='" + CheckInDate
					+ "']";
			if (driver.findElement(By.xpath(checkInDay)).isDisplayed()) {
				test_steps.add("Reservation Stay Info checkin date verified : " + CheckInDate);
				reslogger.info("Reservation Stay Info checkin date verified : " + CheckInDate);
			} else {
				test_steps.add("Reservation Stay Info checkin date not found : " + CheckInDate);
				reslogger.info("Reservation Stay Info checkin date not found : " + CheckInDate);
			}

			String checkoutDay = "//div[contains(text(),'Stay')]/..//div[@class='checkout']/span[text()='"
					+ CheckOutDate + "']";
			if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
				test_steps.add("Reservation Stay Info checkout date verified : " + CheckOutDate);
				reslogger.info("Reservation Stay Info checkout date verified : " + CheckOutDate);
			} else {
				test_steps.add("Reservation Stay Info checkout date not found : " + CheckOutDate);
				reslogger.info("Reservation Stay Info checkout date not found : " + CheckOutDate);
			}

			String nights = "//div[contains(text(),'Stay')]/..//div[@class='noofnights']/span[text()='" + Nights
					+ "N']";
			if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
				test_steps.add("Reservation Stay Info Nights verified : " + Nights + "N");
				reslogger.info("Reservation Stay Info Nights verified : " + Nights + "N");
			} else {
				test_steps.add("Reservation Stay Info Nights not found : " + Nights + "N");
				reslogger.info("Reservation Stay Info Nights not found : " + Nights + "N");
			}

			String adults = "(//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'numberOfAdults')])["
					+ (i + 1) + "]";
			adults = driver.findElement(By.xpath(adults)).getText().trim();
			if (adults.equalsIgnoreCase(adults.trim())) {
				test_steps.add("Reservation Stay Info Adults verified : " + adults);
				reslogger.info("Reservation Stay Info Adults verified : " + adults);
			} else {
				test_steps.add("Reservation Stay Info Adults not found : " + adults);
				reslogger.info("Reservation Stay Info Adults not found : " + adults);
			}

			String children = "(//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'numberOfChildren')])["
					+ (i + 1) + "]";
			children = driver.findElement(By.xpath(children)).getText().trim();
			if (children.equalsIgnoreCase(children.trim())) {
				test_steps.add("Reservation Stay Info Children verified : " + children);
				reslogger.info("Reservation Stay Info Children verified : " + children);
			} else {
				test_steps.add("Reservation Stay Info Children not found : " + children);
				reslogger.info("Reservation Stay Info Children not found : " + children);
			}

			String roomClass = "(//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'roomClassName')])["
					+ (i + 1) + "]";
			roomClass = driver.findElement(By.xpath(roomClass)).getText().trim();
			if (roomClass.contains(RoomClass.trim())) {
				test_steps.add("Reservation Stay Info RoomClass verified : " + RoomClass);
				reslogger.info("Reservation Stay Info RoomClass verified : " + RoomClass);
			} else {
				test_steps.add("Reservation Stay Info RoomClass not found : " + RoomClass);
				reslogger.info("Reservation Stay Info RoomClass not found : " + RoomClass);
			}

			String roomCharge = "(//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'roomClassName')])["
					+ (i + 1) + "]/following-sibling::span";
			roomCharge = driver.findElement(By.xpath(roomCharge)).getText().trim();
			roomCharge = roomCharge.trim();
			roomCharge = roomCharge.substring(1, roomCharge.length());
			roomCharge = roomCharge.trim();
			if (roomCharge.equalsIgnoreCase(roomCost.get(i).toString().trim())) {
				test_steps.add(
						"Reservation Stay Info RoomCharges verified for line item : " + (i + 1) + " " + roomCharge);
				reslogger.info(
						"Reservation Stay Info RoomCharges verified for line item : " + (i + 1) + " " + roomCharge);
			} else {
				test_steps.add(
						"Reservation Stay Info RoomCharges not found for line item : " + (i + 1) + " " + roomCharge);
				reslogger.info(
						"Reservation Stay Info RoomCharges not found for line item : " + (i + 1) + " " + roomCharge);
			}

			String rateplan = "(//div[contains(text(),'Stay')]/..//div//span[contains(text(),'RATE PLAN:')])[" + (i + 1)
					+ "]/following-sibling::span";
			rateplan = driver.findElement(By.xpath(rateplan)).getText().trim();
			if (rateplan.equalsIgnoreCase(RatePlan)) {
				test_steps.add("Reservation Stay Info rateplan verified for line item : " + (i + 1) + " " + rateplan);
				reslogger.info("Reservation Stay Info rateplan verified for line item : " + (i + 1) + " " + rateplan);
			} else {
				test_steps.add("Reservation Stay Info rateplan not found for line item : " + (i + 1) + " " + rateplan);
				reslogger.info("Reservation Stay Info rateplan not found for line item : " + (i + 1) + " " + rateplan);
			}

		}
	}

	public void verify_Refferal(WebDriver driver, ArrayList test_step, String Refferal) {
		if (Refferal.equalsIgnoreCase("GDS")) {
			test_steps.add("Reservation Refferal verified : " + Refferal);
			reslogger.info("Reservation Refferal verified : " + Refferal);
		} else {
			test_steps.add("Reservation Refferal not verified : " + Refferal);
			reslogger.info("Reservation Refferal not verified : " + Refferal);
		}
	}

	public String get_RatePlan(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_RatePlan);
		String ratePlan = res.CP_Reservation_RatePlan.getText();
		test_steps.add("Getting the reservation Rate Plan  : " + ratePlan);
		reslogger.info("Getting the reservation Rate Plan  : " + ratePlan);

		return ratePlan;
	}

	public String get_RatePlanMRB(WebDriver driver, int indexOfRatePlan, ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_RatePlan);
		String ratePlan = res.cpResRatePlanListMRB.get(indexOfRatePlan).getText();
		test_steps.add("Getting the reservation Rate Plan  : " + ratePlan);
		reslogger.info("Getting the reservation Rate Plan  : " + ratePlan);

		return ratePlan;
	}

	public ArrayList<String> verifyPhoneNoBanner(WebDriver driver, String phoneNo) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.explicit_wait_visibilityof_webelement_120(res.HeaderPhoneNo_AfterReservation, driver);
		String foundNo = res.HeaderPhoneNo_AfterReservation.getText();
		foundNo = foundNo.replace("-", "").trim();
		foundNo = foundNo.replace("(", "");
		foundNo = foundNo.replace(")", "");
		assertEquals(foundNo, phoneNo, "Failed to verify Phone No");
		test_steps.add("Successfully Verified Phone No : " + foundNo);

		reslogger.info("Successfully Verified Phone No : " + foundNo);

		return test_steps;

	}

	public String get_AttachedAccountNameHeader(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.HeaderAccountName_AfterReservation);
		String account = res.HeaderAccountName_AfterReservation.getText();
		test_steps.add("Associated Account Name Header : " + account);
		reslogger.info("Associated Account Name Header  : " + account);

		return account;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * Method Name: selectRoomWithoutRuleHandling ' Description: This method
	 * will select room without handing rules broken popup in new reservation
	 * creation ' Input parameters: WebDriver driver,String RoomClass, String
	 * IsAssign, String Account Return value: ArrayList<String> ' Created By:
	 * Farhan Ghaffar ' Created On: 07-24-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public ArrayList<String> selectRoomInStayInfoSection(WebDriver driver, String RoomClass, String IsAssign)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//div[2]//span";
		Utility.app_logs.info("IsAssign: " + IsAssign);
		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]//..//..//..//following-sibling::div//div//select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"

					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);

			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			testSteps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				testSteps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else if (IsAssign.equalsIgnoreCase("Yes")) {

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div/button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				Wait.waitForElementToBeClickable(By.xpath(expand), driver);
				WebElement elementExpand = driver.findElement(By.xpath(expand));
				Utility.ScrollToElement_NoWait(elementExpand, driver);
				elementExpand.click();

				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
                reslogger.info(roomnum);
				Wait.WaitForElement(driver, roomnum);
				List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
				Wait.wait2Second();
				Utility.app_logs.info(getRoomNumber.size());
				String getMinimumNumber = getRoomNumber.get(1).getText();
				Utility.app_logs.info("getMinimumNumber: " + getMinimumNumber);

				String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
				Utility.app_logs.info("getMaxmumNumber: " + getMaxmumNumber);
				getMaxmumNumber = getMaxmumNumber.trim();
				int maxNumber = Integer.parseInt(getMaxmumNumber);
				int minNumber = Integer.parseInt(getMinimumNumber);

				Utility.app_logs.info("maxNumber : " + maxNumber);
				Utility.app_logs.info("maxNumber : " + maxNumber);

				Random random = new Random();
				int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
				IsAssign = String.valueOf(randomNumber);
				boolean isBreak = false;
				for (int j = 0; j < 5; j++) {
					Utility.app_logs.info("randomNumber: " + randomNumber);
					for (int i = 1; i < getRoomNumber.size(); i++) {
						// Utility.app_logs.info("in loop " + i);
						String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
						getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
						if (getRoomNumberFromOptions.equals(IsAssign)) {
							isBreak = true;
							break;
						}

					}
					if (isBreak == false) {
						random = new Random();
						randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
						IsAssign = String.valueOf(randomNumber);
					}
					if (isBreak) {
						break;
					}

				}
				System.out.print(" Random Number is :" + randomNumber);

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				testSteps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");

			} else {

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				Wait.waitForElementToBeClickable(By.xpath(expand), driver);
				WebElement elementExpand = driver.findElement(By.xpath(expand));
				Utility.ScrollToElement_NoWait(elementExpand, driver);
				elementExpand.click();

				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
				Utility.app_logs.info(roomnum);
				List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
				Utility.app_logs.info(getRoomNumber.size());
				String getMinimumNumber = getRoomNumber.get(1).getText();
				Utility.app_logs.info("getMinimumNumber: " + getMinimumNumber);

				String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
				Utility.app_logs.info("getMaxmumNumber: " + getMaxmumNumber);
				getMaxmumNumber = getMaxmumNumber.trim();
				int maxNumber = Integer.parseInt(getMaxmumNumber);
				int minNumber = Integer.parseInt(getMinimumNumber);

				Utility.app_logs.info("maxNumber : " + maxNumber);
				Utility.app_logs.info("maxNumber : " + maxNumber);

				Random random = new Random();
				int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
				IsAssign = String.valueOf(randomNumber);
				boolean isBreak = false;
				for (int j = 0; j < 5; j++) {
					Utility.app_logs.info("randomNumber: " + randomNumber);
					for (int i = 1; i < getRoomNumber.size(); i++) {
						Utility.app_logs.info("in loop " + i);
						String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
						getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
						if (getRoomNumberFromOptions.equals(IsAssign)) {
							isBreak = true;
							break;
						}

					}
					if (isBreak == false) {
						random = new Random();
						randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
						IsAssign = String.valueOf(randomNumber);
					}
					if (isBreak) {
						break;
					}

				}
				System.out.print(" Random Number is :" + randomNumber);

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				testSteps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
			}
			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass
					+ "')]//..//..//..//following-sibling::div//span[contains(@data-bind,'text: ( isSelected()')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}

			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
		} else {
			testSteps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");

		}

		return testSteps;
	}

	/*
	 * public ArrayList<String> editMRBReservationChangeStayDetails(WebDriver
	 * driver, int index, int changeStayDetailIndex) throws InterruptedException
	 * { ArrayList<String> testSteps = new ArrayList<>();
	 * 
	 * String editIconPath =
	 * "(//button[text()='Check In']//following-sibling::button)[" + index +
	 * "]"; WebElement editIcon = driver.findElement(By.xpath(editIconPath));
	 * Wait.WaitForElement(driver, editIconPath);
	 * Wait.waitForElementToBeVisibile(By.xpath(editIconPath), driver);
	 * Wait.waitForElementToBeClickable(By.xpath(editIconPath), driver);
	 * Utility.ScrollToElement(editIcon, driver); editIcon.click();
	 * testSteps.add("click edit icon"); reslogger.info("click edit icon");
	 * 
	 * // use 2 for first and 3 for second String changeStayDetailsPath =
	 * "(//li[text()='Assign  room Number']//following-sibling::li[text()='Change Stay Details'])["
	 * + changeStayDetailIndex + "]"; WebElement changeStayDetails =
	 * driver.findElement(By.xpath(changeStayDetailsPath));
	 * Wait.WaitForElement(driver, changeStayDetailsPath);
	 * Wait.waitForElementToBeVisibile(By.xpath(changeStayDetailsPath), driver);
	 * Wait.waitForElementToBeClickable(By.xpath(changeStayDetailsPath),
	 * driver); Utility.ScrollToElement(changeStayDetails, driver);
	 * changeStayDetails.click(); testSteps.add("click change stay details");
	 * reslogger.info("click change stay details");
	 * 
	 * return testSteps; }
	 */
	public ArrayList<String> clickSaveAfterEditStayInfoInMRB(WebDriver driver) throws InterruptedException {
        verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.MrbStayInfoSaveButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.MrbStayInfoSaveButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.MrbStayInfoSaveButton), driver);
		Utility.ScrollToElement(res.MrbStayInfoSaveButton, driver);
		res.MrbStayInfoSaveButton.click();
		testSteps.add("click save");
		reslogger.info("click save");

		try {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.AmountChangeConfirmationPopup), driver);
			Utility.ScrollToElement_NoWait(res.AmountChangeConfirmationPopup, driver);
			res.AmountChangeConfirmationPopup.click();
			testSteps.add("Click yes button of Amount Change popup");
			reslogger.info("Click yes button of Amount Change popup");
		} catch (Exception e) {
			reslogger.info("Amount Change popup didn't display");

		}
        verifySpinerLoading(driver);
		return testSteps;
	}

	public int brokenRulesPopupSize(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();

		List<WebElement> rulesPopupList = driver.findElements(By.xpath(OR_Reservation.RulesPopupHeadingText));
		reslogger.info(rulesPopupList.size());
		return rulesPopupList.size();
	}

	public ArrayList<String> selectRoomNumber(WebDriver driver, String RoomClass, String RoomNumber)
			throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//div[2]//span";

		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();

		test_steps.add("Selected room class : " + RoomClass);
		reslogger.info("Selected room class : " + RoomClass);

		String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div/button";
		Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
		Wait.waitForElementToBeClickable(By.xpath(expand), driver);
		WebElement elementExpand = driver.findElement(By.xpath(expand));
		Utility.ScrollToElement_NoWait(elementExpand, driver);
		elementExpand.click();

		String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ RoomClass
				+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
				+ RoomNumber + "'])";
		Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
		driver.findElement(By.xpath(assignRoomNo)).click();

		String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//..//following-sibling::div//span[contains(text(),'SELECT')]";
		Wait.WaitForElement(driver, select);
		driver.findElement(By.xpath(select)).click();

		String loading = "(//div[@class='ir-loader-in'])[2]";
		int counter = 0;

		return test_steps;

	}

	// Inncenter Reservation Verification

	/*
	 * public String get_Reservationsource(WebDriver driver, ArrayList
	 * test_step) { Elements_CPReservation res = new
	 * Elements_CPReservation(driver); Wait.WaitForElement(driver,
	 * OR_Reservation.CP_Reservation_Source); String source =
	 * res.CP_Reservation_Source.getText();
	 * test_steps.add("Getting the reservation source : " + source);
	 * reslogger.info("Getting the reservation source : " + source);
	 * 
	 * return source; }
	 * 
	 * public String get_MarketSegemnt(WebDriver driver, ArrayList test_steps) {
	 * 
	 * Elements_CPReservation res = new Elements_CPReservation(driver);
	 * 
	 * Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_MarketSegmant);
	 * String MarketSegmant = res.CP_Reservation_MarketSegmant.getText();
	 * test_steps.add("Getting the reservation MarketSegmant  : " +
	 * MarketSegmant);
	 * reslogger.info("Getting the reservation MarketSegmant  : " +
	 * MarketSegmant);
	 * 
	 * return MarketSegmant; }
	 */
	public void verify_MarketSegmant(WebDriver driver, ArrayList test_step, String MarketSegmant) {
		if (MarketSegmant.equalsIgnoreCase("GDS")) {
			test_steps.add("Reservation MarketSegmant verified : " + MarketSegmant);
			reslogger.info("Reservation MarketSegmant verified : " + MarketSegmant);
		} else {
			test_steps.add("Reservation MarketSegmant not verified : " + MarketSegmant);
			reslogger.info("Reservation MarketSegmant not verified : " + MarketSegmant);
		}
	}

	public String get_Refferal(WebDriver driver, ArrayList test_steps) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Refferal);
		String Refferal = res.CP_Reservation_Refferal.getText();
		test_steps.add("Getting the reservation Refferal  : " + Refferal);
		reslogger.info("Getting the reservation Refferal  : " + Refferal);

		return Refferal;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * Method Name: selectMRBRoomsAndVerifyRulesPopup ' Description: This method
	 * will select room with handling rules broken popup verification and
	 * closing in new mrb reservation creation ' Input parameters: WebDriver
	 * driver,String RoomClass, String IsAssign, String Account, int days,String
	 * minimumStayValue,String noCheckIn, String noCheckOut, String buttonText
	 * Return value: ArrayList<String> ' Created By: Farhan Ghaffar ' Created
	 * On: 07-24-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public ArrayList<String> selectMRBRoomsAndVerifyRulesPopup(WebDriver driver, String RoomClass, String IsAssign,
			String Account, String isMinimumStayOn, String minimumStayValue, String isNoCheckInChecked,
			String isNoCheckOutChecked, String buttonText) throws InterruptedException {
		ArrayList testSteps = new ArrayList<>();
		String[] roomclass = RoomClass.split("\\|");

		int size = roomclass.length;

		ArrayList al = new ArrayList();
		for (int i = 1; i <= size; i++) {
			String Applypolicy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
			if (driver.findElements(By.xpath(Applypolicy)).size() > 0) {
				Wait.WaitForElement(driver, Applypolicy);
				Wait.wait3Second();
				driver.findElement(By.xpath(Applypolicy)).click();
				testSteps.add("Based on the changes made, new policies are applicable.? : yes");

				reslogger.info("Based on the changes made, new policies are applicable.? : yes");
			}
			Wait.wait5Second();
			String rm = "//span[text()='Room " + i + " of " + size + "']";
			if (driver.findElement(By.xpath(rm)).isDisplayed()) {
				testSteps.add("Room " + i + " of " + size + " is displayed");

				reslogger.info("Room " + i + " of " + size + " is displayed");
			} else {
				String clickOnPopUpYesBut = "(//div[@class='row']//button[contains(text(),'Yes')])[3]";
				driver.findElement(By.xpath(clickOnPopUpYesBut)).click();

			}
			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1].trim() + "')]/following-sibling::span";
			Wait.WaitForElement(driver, rulessize);
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();

			String room = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../div[2]/span)";
			reslogger.info(room);
			Wait.WaitForElement(driver, room);
			Wait.wait2Second();
			String rooms = driver.findElement(By.xpath(room)).getText();
			reslogger.info(rooms);
			String[] roomsCount = rooms.split(" ");
			int count = Integer.parseInt(roomsCount[0].trim());

			String cost = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/span)";

			Utility.ScrollToElement(driver.findElement(By.xpath(room)), driver);

			cost = driver.findElement(By.xpath(cost)).getText();
			cost = cost.trim();
			cost = cost.substring(1, cost.length());
			reslogger.info("cost : " + cost);
			al.add(cost);
			if (count > 0) {
				testSteps.add("Selecting room class : " + roomclass[i - 1]);

				reslogger.info("Selecting room class : " + roomclass[i - 1]);
				String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select";
				WebElement ele = driver.findElement(By.xpath(sel));
				if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
					Wait.WaitForElement(driver, unAssign);
					driver.findElement(By.xpath(unAssign)).click();
					testSteps.add("Selected room number : Unassigned");
					reslogger.info("Selected room number : Unassigned");

				} else {
					String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select/option";
					reslogger.info(roomnum);
					int count1 = driver.findElements(By.xpath(roomnum)).size();
					Random random = new Random();
					randomNumber = random.nextInt(count1 - 1) + 1;
					reslogger.info("count : " + count1);
					reslogger.info("randomNumber : " + randomNumber);
					Wait.WaitForElement(driver, sel);

					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.wait2Second();
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
							+ randomNumber + "]/a/span";
					Wait.WaitForElement(driver, roomNumber);
					driver.findElement(By.xpath(roomNumber)).click();
				}

				String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();

				String loading = "(//div[@class='ir-loader-in'])[2]";
				int counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
				reslogger.info("Waited to loading symbol");

				reslogger.info("Rule Count : " + ruleCount);
				if (ruleCount > 1) {

					String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";
					counter = 0;
					Wait.wait3Second();
					if (driver.findElements(By.xpath(rules)).size() > 0) {
						driver.findElement(By.xpath(rules)).click();
						test_steps.add(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
						reslogger.info(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

						loading = "(//div[@class='ir-loader-in'])[2]";
						counter = 0;
						while (true) {
							if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
								break;
							} else if (counter == 3) {
								break;
							} else {
								counter++;
								Wait.wait3Second();
							}
						}
					}
				}
				if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
					if (i == 1) {
						String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
						if (driver.findElements(By.xpath(policy)).size() > 0) {
							Wait.WaitForElement(driver, policy);
							driver.findElement(By.xpath(policy)).click();
							testSteps.add("Based on the changes made, new policies are applicable.? : yes");

							reslogger.info("Based on the changes made, new policies are applicable.? : yes");

							loading = "(//div[@class='ir-loader-in'])[2]";
							counter = 0;
							while (true) {
								if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
									break;
								} else if (counter == 3) {
									break;
								} else {
									counter++;
									Wait.wait2Second();
								}
							}
						}
					}
				}
			} else {
				testSteps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
				reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
			}
		}
		return al;
	}

	public ArrayList getMRBFolioBalance(WebDriver driver, ArrayList test_steps, ArrayList RoomAbbri, String IsAssign,
			ArrayList Rooms) throws InterruptedException {
		test_steps.add("******************* MRB Folio Creation verification **********************");
		reslogger.info("******************* MRB Folio Creation verification **********************");
		String abb = null;
		String roomnumber = null;

		ArrayList al = new ArrayList<>();
		reslogger.info(RoomAbbri.size());
		for (int i = 0; i < RoomAbbri.size(); i++) {
			abb = RoomAbbri.get(i).toString();
			roomnumber = Rooms.get(i).toString();
			String[] abbrivation = abb.split(":");
			String[] rooomno = roomnumber.split(":");
			roomnumber = roomnumber.toString();
			String folio = null;
			Utility.app_logs.info("rooomnoddd : " + rooomno[i]);
			Utility.app_logs.info("roomnumber : " + roomnumber);
			String folioSize = "//button[contains(@title,'Guest')]";
			Wait.WaitForElement(driver, folioSize);
			driver.findElement(By.xpath(folioSize)).click();
			Wait.wait2Second();

			if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps
							.add("Folio is present : " + "Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]);
					reslogger
							.info("Folio is present : " + "Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]);

					driver.findElement(By.xpath(folio)).click();
					String roomCahrge = "//span[text()='Room Charge']";
					al.add(get_RoomCharge(driver, test_steps));
				}
			} else {
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim()
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps.add(
							"Folio is present : " + "Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim());
					reslogger.info(
							"Folio is present : " + "Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim());

					driver.findElement(By.xpath(folio)).click();
					al.add(get_RoomCharge(driver, test_steps));

				}
			}
		}
		return al;
	}

	public void rollBackAll(WebDriver driver, ArrayList test_steps) {
		String rollBack = "//button[text()='Roll Back All']";
		Wait.WaitForElement(driver, rollBack);
		driver.findElement(By.xpath(rollBack)).click();
		reslogger.info("Clicking on rollBackAll");
		test_steps.add("Clicking on rollBackAll");

		String reOpen = "//div[text()='Are you sure you want to re-open this reservation?']/../..//button[text()='Yes']";
		Wait.WaitForElement(driver, reOpen);
		driver.findElement(By.xpath(reOpen)).click();
		reslogger.info("Clicking on Are you sure you want to re-open this reservation? Yes");
		test_steps.add("Clicking on Are you sure you want to re-open this reservation? Yes");
		String checkinAll = "//button[contains(text(),'Check In All')]";
		Wait.WaitForElement(driver, checkinAll);
	}

	public void noShowReservation(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		String dropDown = "//i[contains(@data-bind,'ReservationUpdate')]";
		Wait.WaitForElement(driver, dropDown);
		driver.findElement(By.xpath(dropDown)).click();
		Wait.wait2Second();
		String noShow = "(//ul[contains(@data-bind,'ResStatuses')]/li//span[text()='No Show'])";
		Wait.WaitForElement(driver, noShow);
		driver.findElement(By.xpath(noShow)).click();
		reslogger.info("Clicking on noShow");
		test_steps.add("Clicking on noShow");
		try {
			String confirm = "//button[contains(text(),'CONFIRM NO SHOW')]";
			if(driver.findElement(By.xpath(confirm)).isDisplayed()) {
				Wait.WaitForElement(driver, confirm);
				driver.findElement(By.xpath(confirm)).click();
				reslogger.info("Clicking on confirm");
				test_steps.add("Clicking on confirm");
			}else {
				confirm = "//button[contains(text(),'PROCEED TO NO SHOW PAYMENT')]";
				Wait.WaitForElement(driver, confirm);
				driver.findElement(By.xpath(confirm)).click();
				reslogger.info("Clicking on proceed to payment");
				test_steps.add("Clicking on proceed to payment");
				String pay="//h4[text()='No Show Payment']/../../..//button[contains(text(),'Pay')]";
				Wait.WaitForElement(driver, pay);
				driver.findElement(By.xpath(pay)).click();
				reslogger.info("Clicking on pay");
				test_steps.add("Clicking on pay");
			}
		}catch(Exception e) {
			String confirm = "//button[contains(text(),'PROCEED TO NO SHOW PAYMENT')]";
			Wait.WaitForElement(driver, confirm);
			driver.findElement(By.xpath(confirm)).click();
			reslogger.info("Clicking on proceed to payment");
			test_steps.add("Clicking on proceed to payment");
			String pay="//h4[text()='No Show Payment']/../../..//button[contains(text(),'Pay')]";
			Wait.WaitForElement(driver, pay);
			driver.findElement(By.xpath(pay)).click();
			reslogger.info("Clicking on pay");
			test_steps.add("Clicking on pay");
		}


		String close = "";

		 close = "//h4[contains(text(),'No Show Successful')]/../..//button[text()='Close']";
		 if(!(driver.findElements(By.xpath(close)).size()>0)) {
			 close = "//h4[contains(text(),'No Show Successful')]/../..//button[text()='CLOSE']";
		}
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		reslogger.info("Clicking on close");
		test_steps.add("Clicking on close");

		String rollback = "//button[contains(text(),'Roll Back')]";
		Wait.WaitForElement(driver, rollback);
		reslogger.info("Reservation status is No Show");
		test_steps.add("Reservation status is No Show");
	}

	public void rollBack(WebDriver driver, ArrayList test_steps) {
		String rollBack = "//button[text()='Roll Back']";
		Wait.WaitForElement(driver, rollBack);
		driver.findElement(By.xpath(rollBack)).click();
		reslogger.info("Clicking on rollBack");
		test_steps.add("Clicking on rollBack");

		String reOpen = "//p[text()='Are you sure you want to re-open this reservation?']/../..//button[text()='Yes']";
		Wait.WaitForElement(driver, reOpen);
		driver.findElement(By.xpath(reOpen)).click();
		reslogger.info("Clicking on Are you sure you want to re-open this reservation? Yes");
		test_steps.add("Clicking on Are you sure you want to re-open this reservation? Yes");
	}

	public void voidAllFolioLineItems(WebDriver driver, ArrayList test_steps, String voidNotes) {
		String allLineItems = "//input[contains(@data-bind,'click: selectAllLineItems')]";
		Wait.WaitForElement(driver, allLineItems);
		driver.findElement(By.xpath(allLineItems)).click();
		reslogger.info("Selecting on allLineItems");
		test_steps.add("Selecting on allLineItems");

		String voidLineItems = "//button[text()='Void']";
		Wait.WaitForElement(driver, voidLineItems);
		driver.findElement(By.xpath(voidLineItems)).click();
		reslogger.info("Clicking on voidLineItems");
		test_steps.add("Clicking on voidLineItems");

		String notes = "//textarea[contains(@data-bind,'notesPopUpNote')]";
		Wait.WaitForElement(driver, notes);
		driver.findElement(By.xpath(notes)).sendKeys(voidNotes);
		reslogger.info("Enter notes as : " + voidNotes);
		test_steps.add("Enter notes as : " + voidNotes);

		String btnVoid = "//h4[text()='Notes']/../..//button[text()='Void']";
		Wait.WaitForElement(driver, btnVoid);
		driver.findElement(By.xpath(btnVoid)).click();
		reslogger.info("Clicking on void");
		test_steps.add("Clicking on void");

		String save = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.WaitForElement(driver, save);
		driver.findElement(By.xpath(save)).click();
		reslogger.info("Clicking on save");
		test_steps.add("Clicking on save");
	}

	public void SearchWithRes(WebDriver driver, String reservation) throws InterruptedException {
		// String str = null;
		Elements_Reservation_SearchPage resservationSearch = new Elements_Reservation_SearchPage(driver);
		Wait.WaitForElement(driver, OR.Basic_Res_Number);
		resservationSearch.Basic_Res_Number.clear();
		resservationSearch.Basic_Res_Number.sendKeys(reservation);
		resservationSearch.Click_BasicSearch.click();
		Wait.WaitForElement(driver, OR.Get_Res_Number);
	}

	public void deleteReservation(WebDriver driver, ArrayList test_steps) {
		String selectAll = "//input[contains(@data-bind,'SelectAllReservations')]";
		Wait.WaitForElement(driver, selectAll);
		driver.findElement(By.xpath(selectAll)).click();
		reslogger.info("Clicking on selectAll");
		test_steps.add("Clicking on selectAll");

		String drpdw = "//span[text()='Bulk Action']/../..//i";
		Wait.WaitForElement(driver, drpdw);
		driver.findElement(By.xpath(drpdw)).click();

		String delete = "//span[text()='Delete']/..";
		Wait.WaitForElement(driver, delete);
		driver.findElement(By.xpath(delete)).click();
		reslogger.info("Clicking on delete");
		test_steps.add("Clicking on delete");

		String process = "//h4[text()='Bulk Delete']/../..//button[text()='Process']";
		Wait.WaitForElement(driver, process);
		driver.findElement(By.xpath(process)).click();
		reslogger.info("Clicking on process");
		test_steps.add("Clicking on process");

		String close = "//h4[text()='Bulk Delete Completed']/../..//button[text()='Close']";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		reslogger.info("Clicking on close");
		test_steps.add("Clicking on close");
	}

	public void SearchDeletedRes(WebDriver driver, ArrayList test_steps, String reservation)
			throws InterruptedException {
		// String str = null;
		Elements_Reservation_SearchPage resservationSearch = new Elements_Reservation_SearchPage(driver);
		Wait.WaitForElement(driver, OR.Basic_Res_Number);
		resservationSearch.Basic_Res_Number.clear();
		resservationSearch.Basic_Res_Number.sendKeys(reservation);
		resservationSearch.Click_BasicSearch.click();
		reslogger.info("Search reservation : " + reservation);
		test_steps.add("Search reservation : " + reservation);

		String noRecords = "//div[contains(text(),'No records meet your criteria. Please change your criteria and search again.')]";
		Wait.WaitForElement(driver, noRecords);
		reslogger.info("No records meet your criteria. Please change your criteria and search again.");
		test_steps.add("No records meet your criteria. Please change your criteria and search again.");
	}

	public void checkinReservation(WebDriver driver, ArrayList test_steps) {
		String checkin = "//button[text()='Check In']";
		Wait.WaitForElement(driver, checkin);
		driver.findElement(By.xpath(checkin)).click();
		reslogger.info("click on check In");
		test_steps.add("click on check In");

		String pay = "//h4[text()='Check In Payment']/../..//button[contains(text(),'Pay')]";
		if (driver.findElements(By.xpath(pay)).size() > 0) {
			driver.findElement(By.xpath(pay)).click();
			reslogger.info("click on pay");
			test_steps.add("click on pay");

			String close = "//h4[text()='Check-In Successful']/../..//button[text()='CLOSE']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			reslogger.info("click on close");
			test_steps.add("click on close");
		} else {
			String confirm = "//button[contains(text(),'CONFIRM CHECK IN')]";
			Wait.WaitForElement(driver, confirm);
			driver.findElement(By.xpath(confirm)).click();
			reslogger.info("click on confirm check In");
			test_steps.add("click on confirm check In");
		}
		String checkout = "//button[text()='Check Out']";
		Wait.WaitForElement(driver, checkout);
	}

	public void checkoutReservation(WebDriver driver, ArrayList test_steps) {
		String checkout = "//button[text()='Check Out']";
		Wait.WaitForElement(driver, checkout);
		driver.findElement(By.xpath(checkout)).click();
		reslogger.info("click on check out");
		test_steps.add("click on check out");

		String ProceedToCheckout = "(//h4[text()='Check Out']/../..//button)[2]";
		Wait.WaitForElement(driver, ProceedToCheckout);
		driver.findElement(By.xpath(ProceedToCheckout)).click();
		reslogger.info("click on ProceedToCheckout");
		test_steps.add("click on ProceedToCheckout");

		String pay = "//h4[text()='Check Out Payment']/../..//button[contains(text(),'Pay')]";
		if (driver.findElements(By.xpath(pay)).size() > 0) {
			driver.findElement(By.xpath(pay)).click();
			reslogger.info("click on pay");
			test_steps.add("click on pay");
			String close = "//h4[text()='Check out Successful']/../..//button[text()='CLOSE']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			reslogger.info("click on close");
			test_steps.add("click on close");
		} else {
			String confirm = "(//h4[text()='Check Out']//../..//button)[2]";
			Wait.WaitForElement(driver, confirm);
			driver.findElement(By.xpath(confirm)).click();
			reslogger.info("click on confirm check out");
			test_steps.add("click on confirm check out");
		}
		String rollBack = "//button[text()='Roll Back']";
		Wait.WaitForElement(driver, rollBack);

	}

	public void bulkcancelReservation(WebDriver driver, ArrayList test_steps, String TestReason) {
		String selectAll = "//input[contains(@data-bind,'SelectAllReservations')]";
		Wait.WaitForElement(driver, selectAll);
		driver.findElement(By.xpath(selectAll)).click();
		reslogger.info("Clicking on selectAll");
		test_steps.add("Clicking on selectAll");

		String drpdw = "//span[text()='Bulk Action']/../..//i";
		Wait.WaitForElement(driver, drpdw);
		driver.findElement(By.xpath(drpdw)).click();

		String cancel = "//span[text()='Cancel']/..";
		Wait.WaitForElement(driver, cancel);
		driver.findElement(By.xpath(cancel)).click();
		reslogger.info("Clicking on cancel");
		test_steps.add("Clicking on cancel");

		String reason = "(//h4[text()='Bulk Cancel']/../..//textarea)[2]";
		Wait.WaitForElement(driver, reason);
		driver.findElement(By.xpath(reason)).sendKeys(TestReason);
		reslogger.info("Cancel reason : " + TestReason);
		test_steps.add("Cancel reason : " + TestReason);

		String process = "//h4[text()='Bulk Cancel']/../..//button[text()='Process']";
		Wait.WaitForElement(driver, process);
		driver.findElement(By.xpath(process)).click();
		reslogger.info("Clicking on process");
		test_steps.add("Clicking on process");

		String close = "//h4[text()='Bulk Cancel Completed']/../..//button[text()='Close']";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		reslogger.info("Clicking on close");
		test_steps.add("Clicking on close");
	}

	public void bulkNoShowReservation(WebDriver driver, ArrayList test_steps) {
		String selectAll = "//input[contains(@data-bind,'SelectAllReservations')]";
		Wait.WaitForElement(driver, selectAll);
		driver.findElement(By.xpath(selectAll)).click();
		reslogger.info("Clicking on selectAll");
		test_steps.add("Clicking on selectAll");

		String drpdw = "//span[text()='Bulk Action']/../..//i";
		Wait.WaitForElement(driver, drpdw);
		driver.findElement(By.xpath(drpdw)).click();

		String noShow = "(//span[text()='No Show']/..)[2]";
		Wait.WaitForElement(driver, noShow);
		driver.findElement(By.xpath(noShow)).click();
		reslogger.info("Clicking on noShow");
		test_steps.add("Clicking on noShow");

		String process = "//h4[text()='Bulk No-Show']/../..//button[text()='Process']";
		Wait.WaitForElement(driver, process);
		driver.findElement(By.xpath(process)).click();
		reslogger.info("Clicking on process");
		test_steps.add("Clicking on process");

		String close = "//h4[text()='Bulk No-Show Completed']/../..//button[text()='Close']";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		reslogger.info("Clicking on close");
		test_steps.add("Clicking on close");
	}

	public void select_DatesForRatePlan(WebDriver driver, ArrayList test_steps, String CheckInDate, String CheckoutDate,
			String Adults, String Children, String RatePlan, String PromoCode, String IsSplitRes)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.app_logs.info(Adults);
		String loading = "(//div[@class='ir-loader-in'])[2]";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");

		String[] checkin = CheckInDate.split("\\|");
		String[] checkout = CheckoutDate.split("\\|");
		String[] adu = Adults.split("\\|");
		String[] child = Children.split("\\|");
		String[] rate = RatePlan.split("\\|");
		String[] promoCode = PromoCode.split("\\|");
		Boolean flag = false;
		reslogger.info(CheckInDate);
		int size = adu.length;

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddRoom);
		reslogger.info("MRB size : " + size);
		if (size > 1) {
			for (int i = 1; i <= size; i++) {
				String checkInCal = "(//label[text()='Check In']/following-sibling::i)[" + i + "]";
				reslogger.info(checkInCal);
				Wait.WaitForElement(driver, checkInCal);
				driver.findElement(By.xpath(checkInCal)).click();

				String monthYear = Utility.get_MonthYear(CheckInDate);
				String day = Utility.getDay(CheckInDate);
				reslogger.info(monthYear);
				String header = null, headerText = null, next = null, date;
				for (int k = 1; k <= 12; k++) {
					header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
					headerText = driver.findElement(By.xpath(header)).getText();
					if (headerText.equalsIgnoreCase(monthYear)) {
						date = "//td[contains(@class,'day') and text()='" + day + "']";
						Wait.WaitForElement(driver, date);

						int size1 = driver.findElements(By.xpath(date)).size();
						for (int l = 1; l <= size; l++) {
							date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + l + "]";
							String classText = driver.findElement(By.xpath(date)).getAttribute("class");
							if (!classText.contains("old")) {
								driver.findElement(By.xpath(date)).click();
								test_steps.add("Selecting checkin date : " + CheckInDate);
								reslogger.info("Selecting checkin date : " + CheckInDate);
								break;
							}
						}

						break;
					} else {
						next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
						Wait.WaitForElement(driver, next);
						driver.findElement(By.xpath(next)).click();
						Wait.wait2Second();
					}
				}

				String checkOutCal = "(//label[text()='Check Out']/following-sibling::i)[" + i + "]";
				reslogger.info(checkOutCal);
				Wait.WaitForElement(driver, checkOutCal);
				driver.findElement(By.xpath(checkOutCal)).click();
				monthYear = Utility.get_MonthYear(CheckoutDate);
				day = Utility.getDay(CheckoutDate);
				reslogger.info(monthYear);
				for (int k = 1; k <= 12; k++) {
					header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
					headerText = driver.findElement(By.xpath(header)).getText();
					if (headerText.equalsIgnoreCase(monthYear)) {
						date = "//td[contains(@class,'day') and text()='" + day + "']";
						Wait.WaitForElement(driver, date);

						int size1 = driver.findElements(By.xpath(date)).size();
						for (int l = 1; l <= size; l++) {
							date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + l + "]";
							String classText = driver.findElement(By.xpath(date)).getAttribute("class");
							if (!classText.contains("old")) {
								driver.findElement(By.xpath(date)).click();
								test_steps.add("Selecting checkout date : " + CheckoutDate);
								reslogger.info("Selecting checkout date : " + CheckoutDate);
								break;
							}
						}
						break;
					} else {
						next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
						Wait.WaitForElement(driver, next);
						driver.findElement(By.xpath(next)).click();
						Wait.wait2Second();
					}
				}
				if (!IsSplitRes.equalsIgnoreCase("Yes")) {

					String adults = "(//label[text()='Adults']/preceding-sibling::input)[" + i + "]";
					Wait.WaitForElement(driver, adults);
					driver.findElement(By.xpath(adults)).clear();
					driver.findElement(By.xpath(adults)).sendKeys(adu[i - 1]);
					test_steps.add("Enter Number of Adults : " + adu[(i - 1)]);
					reslogger.info("Enter Number of Adults : " + adu[(i - 1)]);

					String children = "(//label[text()='Children']/preceding-sibling::input)[" + i + "]";
					Wait.WaitForElement(driver, children);
					driver.findElement(By.xpath(children)).clear();
					driver.findElement(By.xpath(children)).sendKeys(child[i - 1]);
					test_steps.add("Enter Number of Children : " + child[(i - 1)]);
					reslogger.info("Enter Number of Children : " + child[(i - 1)]);

					// res.CP_NewReservation_Rateplan.click();
					String ratebutton = "(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div/button)["
							+ i + "]";
					Wait.WaitForElement(driver, ratebutton);
					driver.findElement(By.xpath(ratebutton)).click();

					int rateCount = driver.findElements(By
							.xpath("(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[contains(text(),'"
									+ RatePlan.trim() + "')]/..)"))
							.size();
					String rateLoc = "(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[contains(text(),'"
							+ RatePlan.trim() + "')]/..)[" + rateCount + "]";
					reslogger.info(rateLoc);
					Wait.WaitForElement(driver, rateLoc);
					driver.findElement(By.xpath(rateLoc)).click();
					test_steps.add("Selecting the rateplan : " + RatePlan);
					reslogger.info("Selecting the rateplan : " + RatePlan);
					if (RatePlan.contains("Promo")) {
						String promo = "(//label[contains(text(),'Enter Code')]/preceding-sibling::input)[" + i + "]";
						Wait.WaitForElement(driver, promo);
						res.CP_NewReservation_PromoCode.clear();
						res.CP_NewReservation_PromoCode.sendKeys(promoCode[i - 1]);
						test_steps.add("Enter promocode : " + promoCode[i]);
						reslogger.info("Enter promocode : " + promoCode[i]);
					}
				}
				if (!(i == size)) {
					clickOnAddARoomButton(driver, test_steps);
					reslogger.info("Clicking on add room");
					if (IsSplitRes.equalsIgnoreCase("Yes") && !flag) {
						res.CP_NewReservation_SplitReservation.click();
						test_steps.add("Clicking on split reservation");
						reslogger.info("Clicking on split reservation");
					}
					flag = true;
				}
			}
		} else {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CheckinCal);
			res.CP_NewReservation_CheckinCal.click();
			String monthYear = Utility.get_MonthYear(CheckInDate);
			String day = Utility.getDay(CheckInDate);
			reslogger.info(monthYear);
			String header = null, headerText = null, next = null, date;
			for (int i = 1; i <= 12; i++) {
				header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
				headerText = driver.findElement(By.xpath(header)).getText();
				if (headerText.equalsIgnoreCase(monthYear)) {
					date = "//td[contains(@class,'day') and text()='" + day + "']";
					Wait.WaitForElement(driver, date);
					driver.findElement(By.xpath(date)).click();
					test_steps.add("Selecting checkin date : " + CheckInDate);
					reslogger.info("Selecting checkin date : " + CheckInDate);
					break;
				} else {
					next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
					Wait.WaitForElement(driver, next);
					driver.findElement(By.xpath(next)).click();
					Wait.wait2Second();
				}
			}
		}
	}

	public void selectcheckInAndCheckoutInTapeCharts(WebDriver driver, String checkinDate, String checkoutDate,
			String timeZone, ArrayList<String> test_steps) throws InterruptedException, ParseException {
		Elements_TapeChart TapeChart = new Elements_TapeChart(driver);
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		boolean isCheckinPassed = false;
		String checkinDay = checkinDate;
		// ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR.Select_Arrival_Date);
		Wait.explicit_wait_visibilityof_webelement(TapeChart.Select_Arrival_Date, driver);
		Wait.explicit_wait_elementToBeClickable(TapeChart.Select_Arrival_Date, driver);
		TapeChart.Select_Arrival_Date.click();
		test_steps.add("Click on checkin Calander on tape chart");
		TapeChart.checkinTapeChart.clear();
		// String checkInDate = ESTTimeZone.DateFormateForLineItem(Days);
		if (!checkinDate.equalsIgnoreCase("NA")) {
			isCheckinPassed = Utility.isGivenDatePassed(checkinDate, timeZone);
			checkinDate = Utility.parseDate(checkinDate, "dd/MM/yyyy", "MM/dd/yyyy");
		}

		if (checkinDate.equalsIgnoreCase("NA") || isCheckinPassed == true || checkoutDate.equalsIgnoreCase("NA")) {
			checkinDate = Utility.getNextDate(0, "MM/dd/yyyy", timeZone);
		}

		TapeChart.checkinTapeChart.sendKeys(checkinDate);
		test_steps.add("CheckIn date: " + checkinDate);

		Wait.WaitForElement(driver, NewTapeChart.ClickCalanderDepartDate);
		Wait.explicit_wait_visibilityof_webelement(TapeChart.clickCalanderDepartDate, driver);
		Wait.explicit_wait_elementToBeClickable(TapeChart.clickCalanderDepartDate, driver);
		TapeChart.clickCalanderDepartDate.click();
		test_steps.add("Click on checkout Calander on tape chart");
		TapeChart.checkOutTapeChart.clear();
		if (!checkoutDate.equalsIgnoreCase("NA") && !checkinDay.equalsIgnoreCase("NA")) {
			checkoutDate = Utility.parseDate(checkoutDate, "dd/MM/yyyy", "MM/dd/yyyy");
		}

		if (checkinDay.equalsIgnoreCase("NA") || isCheckinPassed == true || checkoutDate.equalsIgnoreCase("NA")) {
			checkoutDate = Utility.getNextDate(2, "MM/dd/yyyy", timeZone);
		}
		TapeChart.checkOutTapeChart.sendKeys(checkoutDate);
		test_steps.add("Checkout date: " + checkoutDate);
	}

	public ArrayList<String> clickEditReservation(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EditReservationButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EditReservationButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.EditReservationButton), driver);
		Utility.ScrollToElement(res.EditReservationButton, driver);
		res.EditReservationButton.click();
		testSteps.add("click edit icon");
		reslogger.info("click edit icon");

		return testSteps;
	}

	public ArrayList<String> clickChangeStayDetails(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.ChangeStayDetails);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ChangeStayDetails), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ChangeStayDetails), driver);
		Utility.ScrollToElement(res.ChangeStayDetails, driver);
		res.ChangeStayDetails.click();
		testSteps.add("click Change Stay Details");
		reslogger.info("click Change Stay Details");
        verifySpinerLoading(driver);
		return testSteps;
	}
	
	public ArrayList<String> clickSplitRooms(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_SplitReservation);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_SplitReservation), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_SplitReservation), driver);
		Utility.ScrollToElement(res.CP_NewReservation_SplitReservation, driver);
		res.CP_NewReservation_SplitReservation.click();
		testSteps.add("click Split rooms button");
		reslogger.info("click Split rooms button");
        verifySpinerLoading(driver);
		return testSteps;
	}
	
	

	public ArrayList<String> clickFindRooms(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.FindRoomButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.FindRoomButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.FindRoomButton), driver);
		Utility.ScrollToElement(res.FindRoomButton, driver);
		res.FindRoomButton.click();
		testSteps.add("click find rooms");
		reslogger.info("click find rooms");
        verifySpinerLoading(driver);
		return testSteps;
	}

	public ArrayList<String> enterCheckOutDate(WebDriver driver, String date) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckOutInput);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CheckOutInput), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CheckOutInput), driver);
		Utility.ScrollToElement(res.CheckOutInput, driver);
		res.CheckOutInput.clear();
		res.CheckOutInput.sendKeys(date);
		testSteps.add("Entered checkout date : " + date);
		reslogger.info("Entered checkout date : " + date);

		return testSteps;
	}

	public ArrayList<String> clickSaveAfterEditStayInfo(WebDriver driver) throws InterruptedException {
        verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.SaveButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.SaveButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.SaveButton), driver);
		Utility.ScrollToElement(res.SaveButton, driver);
		res.SaveButton.click();
		testSteps.add("click save");
		reslogger.info("click save");

		try {

			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.AmountChangeConfirmationPopup), driver);
			Utility.ScrollToElement(res.AmountChangeConfirmationPopup, driver);
			res.AmountChangeConfirmationPopup.click();
			testSteps.add("Click yes button of Amount Change popup");
			reslogger.info("Click yes button of Amount Change popup");
		} catch (Exception e) {
			testSteps.add("Amount Change popup didn't display");
			reslogger.info("Amount Change popup didn't display");

		}
        verifySpinerLoading(driver);
		return testSteps;
	}

	public ArrayList<String> editMRBReservationChangeStayDetails(WebDriver driver, int index, int changeStayDetailIndex)
			throws InterruptedException {
	    verifySpinerLoading(driver);
		ArrayList<String> testSteps = new ArrayList<>();

		String editIconPath = "(//button[text()='Check In']//following-sibling::button)[" + index + "]";
		WebElement editIcon = driver.findElement(By.xpath(editIconPath));
		Wait.WaitForElement(driver, editIconPath);
		Wait.waitForElementToBeVisibile(By.xpath(editIconPath), driver);
		Wait.waitForElementToBeClickable(By.xpath(editIconPath), driver);
		Utility.ScrollToElement(editIcon, driver);
		editIcon.click();
		testSteps.add("click edit icon");
		reslogger.info("click edit icon");

		// use 2 for first and 3 for second
		String changeStayDetailsPath = "(//li[text()='Assign  room Number']//following-sibling::li[text()='Change Stay Details'])["
				+ changeStayDetailIndex + "]";
		WebElement changeStayDetails = driver.findElement(By.xpath(changeStayDetailsPath));
		Wait.WaitForElement(driver, changeStayDetailsPath);
		Wait.waitForElementToBeVisibile(By.xpath(changeStayDetailsPath), driver);
		Wait.waitForElementToBeClickable(By.xpath(changeStayDetailsPath), driver);
		Utility.ScrollToElement(changeStayDetails, driver);
		changeStayDetails.click();
		testSteps.add("click change stay details");
		reslogger.info("click change stay details");
        verifySpinerLoading(driver);
		return testSteps;
	}

	public boolean getRoomNumberAvailability(WebDriver driver, ArrayList<String> test_steps, String RoomClass,
			String roomNumber) throws InterruptedException {
		String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div/button";
		Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
		Wait.waitForElementToBeClickable(By.xpath(expand), driver);
		WebElement elementExpand = driver.findElement(By.xpath(expand));
		Utility.ScrollToElement_NoWait(elementExpand, driver);
		elementExpand.click();

		String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
		reslogger.info(roomnum);
		List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));

		boolean found = false;
		for (int i = 0; i < getRoomNumber.size(); i++) {
			String tempRN = getRoomNumber.get(i).getText();
			reslogger.info("Room Number Options : " + tempRN);
			if (tempRN.equals(roomNumber)) {
				found = true;
				break;
			}
		}
		return found;
	}

	public ArrayList<String> selectRoomNumber(WebDriver driver, ArrayList<String> test_steps, String RoomClass,
			String roomName, boolean assignRoomName) throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//div[2]//span";

		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]//..//..//..//following-sibling::div//div//select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"

					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);

			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (assignRoomName) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ roomName + "'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : " + roomName);
				reslogger.info("Selected room number : " + roomName);
			} else {

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div/button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				Wait.waitForElementToBeClickable(By.xpath(expand), driver);
				WebElement elementExpand = driver.findElement(By.xpath(expand));
				Utility.ScrollToElement_NoWait(elementExpand, driver);
				elementExpand.click();

				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
				reslogger.info(roomnum);
				List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
				Utility.app_logs.info(getRoomNumber.size());
				String tempRoomNumber = null;
				for (int j = 0; j < getRoomNumber.size(); j++) {
					tempRoomNumber = getRoomNumber.get(j).getText().trim();
					if (!(tempRoomNumber.equals("Unassigned") || tempRoomNumber.equals(roomName))) {
						break;
					}
				}
				System.out.print(" Room Number is :" + tempRoomNumber);

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ tempRoomNumber + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				test_steps.add("Selecting room <b>" + tempRoomNumber + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + tempRoomNumber + "</b> from <b>" + RoomClass + "</b> room class");

			}
			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]//..//..//..//following-sibling::div//span[contains(text(),'SELECT')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}

			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);

			// Utility.app_logs.info("Waited to loading symbol");

			// Utility.app_logs.info("Rule Count : " + ruleCount);

			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
		return test_steps;
	}

	public ArrayList<String> clickCloseReservation(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ClosePopUp);
		Utility.ScrollToElement(res.CP_NewReservation_ClosePopUp, driver);
		Wait.explicit_wait_elementToBeClickable(res.CP_NewReservation_ClosePopUp, driver);
		res.CP_NewReservation_ClosePopUp.click();
		test_steps.add("Clicking on Close");
		reslogger.info("Clicking on Close");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait1Second();
			}
		}

		reslogger.info("Waited to loading symbol");

		return test_steps;
	}

	/*
	 * public ArrayList<String> clickEditReservation(WebDriver driver) throws
	 * InterruptedException { Elements_CPReservation res = new
	 * Elements_CPReservation(driver); ArrayList<String> testSteps = new
	 * ArrayList<>(); Wait.WaitForElement(driver,
	 * OR_Reservation.EditReservationButton);
	 * Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.
	 * EditReservationButton), driver);
	 * Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.
	 * EditReservationButton), driver);
	 * Utility.ScrollToElement(res.EditReservationButton, driver);
	 * res.EditReservationButton.click(); testSteps.add("click edit icon");
	 * reslogger.info("click edit icon");
	 * 
	 * return testSteps; }
	 */

	public String get_Reservationsource(WebDriver driver, ArrayList test_step) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Source);
		String source = res.CP_Reservation_Source.getText();
		test_steps.add("Getting the reservation source : " + source);
		reslogger.info("Getting the reservation source : " + source);

		return source;
	}

	public String get_MarketSegemnt(WebDriver driver, ArrayList test_steps) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_MarketSegmant);
		String MarketSegmant = res.CP_Reservation_MarketSegmant.getText();
		test_steps.add("Getting the reservation MarketSegmant  : " + MarketSegmant);
		reslogger.info("Getting the reservation MarketSegmant  : " + MarketSegmant);

		return MarketSegmant;
	}

	public int verifyRoomClassVisibility(WebDriver driver, String roomClassName) throws InterruptedException {
		String roomClassPath = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ roomClassName + "')]";
		List<WebElement> roomClass = driver.findElements(By.xpath(roomClassPath));
		int size = roomClass.size();
		reslogger.info("size : " + size);
		return size;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: verifyRoomClassSectionVisibility ' Description: This
	 * method will check whether a room class section exist after clicking find
	 * rooms in reservation creation ' Input parameters: WebDriver driver,
	 * String roomClassName ' Return value: int ' Created By: Farhan Ghaffar '
	 * Created On: 21-07-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public int verifyRoomClassSectionVisibility(WebDriver driver) throws InterruptedException {
		String roomClassPath = "//section[@class='ir-roomClassDetails manual-override']";
		List<WebElement> roomClass = driver.findElements(By.xpath(roomClassPath));
		int size = roomClass.size();
		reslogger.info("size : " + size);
		return size;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getRulesText ' Description: This method will return text
	 * of rules for specific room class after clicking find rooms in reservation
	 * creation ' Input parameters: WebDriver driver, String roomClassName '
	 * Return value: String ' Created By: Farhan Ghaffar ' Created On:
	 * 17-07-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public String getRulesText(WebDriver driver, String roomClassName) throws InterruptedException {
		String roomClassPath = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ roomClassName + "')]//following-sibling::span[contains(@data-bind,'text: rules.broken.join')]";
		WebElement roomClass = driver.findElement(By.xpath(roomClassPath));
		Wait.WaitForElement(driver, roomClassPath);
		Wait.waitForElementToBeVisibile(By.xpath(roomClassPath), driver);
		String getText = roomClass.getText();
		reslogger.info("getText : " + getText);
		return getText;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getRulesSize ' Description: This method will return size
	 * of rules list for specific room class after clicking find rooms in
	 * reservation creation ' Input parameters: WebDriver driver, String
	 * roomClassName ' Return value: int ' Created By: Farhan Ghaffar ' Created
	 * On: 17-07-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public int getRulesSize(WebDriver driver, String roomClassName) throws InterruptedException {
		String roomClassPath = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ roomClassName + "')]//following-sibling::span[contains(@data-bind,'text: rules.broken.join')]";
		List<WebElement> roomClass = driver.findElements(By.xpath(roomClassPath));
		reslogger.info("Rules Size : " + String.valueOf(roomClass.size()));
		return roomClass.size();
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getRulesNightsText ' Description: This method will return
	 * text of rules nigths for specific room class after clicking find rooms in
	 * reservation creation ' Input parameters: WebDriver driver, String
	 * roomClassName ' Return value: String ' Created By: Farhan Ghaffar '
	 * Created On: 17-07-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public String getRulesNightsText(WebDriver driver, String roomClassName) throws InterruptedException {
		String roomClassPath = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ roomClassName + "')]//following-sibling::span[contains(@data-bind,'text: rules.statisfied.join')]";
		WebElement roomClass = driver.findElement(By.xpath(roomClassPath));
		Wait.WaitForElement(driver, roomClassPath);
		Wait.waitForElementToBeVisibile(By.xpath(roomClassPath), driver);
		String getText = roomClass.getText();
		reslogger.info("getText : " + getText);
		return getText;
	}

public ArrayList<String> checkInDate(WebDriver driver, String date) throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckinDate);
		Wait.explicit_wait_visibilityof_webelement(elements.EnterCheckinDate, driver);
		Wait.explicit_wait_elementToBeClickable(elements.EnterCheckinDate, driver);
		elements.EnterCheckinDate.click();
		elements.EnterCheckinDate.clear();

		elements.EnterCheckinDate.sendKeys(date);
		testSteps.add("CheckIn: " + date);
		testSteps.add("CheckIn date: " + date);
		return testSteps;
	}

	public ArrayList<String> checkOutDate(WebDriver driver, String date) throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckout);
		Wait.explicit_wait_visibilityof_webelement(elements.EnterCheckout, driver);
		Wait.explicit_wait_elementToBeClickable(elements.EnterCheckout, driver);
		elements.EnterCheckout.click();
		elements.EnterCheckout.clear();
		elements.EnterCheckout.sendKeys(date);
		testSteps.add("CheckOut: " + date);
		return testSteps;

	}

	public ArrayList<String> checkInDates(WebDriver driver, String date, int index)
			throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckinDate);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterCheckinDate), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.EnterCheckinDate), driver);
		elements.listEnterCheckinDate.get(index).click();
		elements.listEnterCheckinDate.get(index).clear();
		elements.listEnterCheckinDate.get(index).sendKeys(date);
		test_steps.add("CheckIn date: " + date);
		return test_steps;
	}

	public ArrayList<String> checkOutDates(WebDriver driver, String date, int index)
			throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckout);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterCheckout), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.EnterCheckout), driver);
		elements.listEnterCheckout.get(index).click();
		elements.listEnterCheckout.get(index).clear();
		elements.listEnterCheckout.get(index).sendKeys(date);
		test_steps.add("CheckOut date: " + date);
		return test_steps;

	}

	public void verifyBookingWindowOnReservation(WebDriver driver, ArrayList<String> test_steps, String roomClassName,
			String adults, String children, String ratePlanName, String ratePerNight, String moreThanDaysCount,
			String withInDaysCount, boolean validationMsg) throws Exception {
		Navigation navigation = new Navigation();
		ArrayList<String> verifyDates = new ArrayList<>();
		navigation.Reservation_Backward_3(driver);
		click_NewReservation(driver, test_steps);
		String currentDay = Utility.getCurrentDate("dd/MM/yyyy");
		if ((Utility.validateString(moreThanDaysCount)) && !(Utility.validateString(withInDaysCount))) {
			String moreThanDaysCountToVerify = Utility.addDays(currentDay, Integer.parseInt(moreThanDaysCount));
			verifyDates = Utility.getAllDatesBetweenCheckInOutDates(currentDay, moreThanDaysCountToVerify);
			if (validationMsg) {
				for (String date : verifyDates) {
					// selectDatesAndClickOnFindRooms(driver, test_steps, date,
					// "", adults, children, ratePlanName);
					// verifyValidationMessageForNoRatePlanFound(driver,
					// test_steps, date, moreThanDaysCount, true);
				}
			} else {
				String nextDayToValidate = Utility.addDays(verifyDates.get(verifyDates.size() - 1), 1);
				// selectDatesAndClickOnFindRooms(driver, test_steps,
				// nextDayToValidate, "", adults, children, ratePlanName);
				verifyRateAmountPerNight(driver, test_steps, roomClassName, ratePerNight, nextDayToValidate);
			}
		} else if (!(Utility.validateString(moreThanDaysCount)) && (Utility.validateString(withInDaysCount))) {
			int lastDayToValidate = Integer.parseInt(withInDaysCount) + 1;
			String moreThanDaysCountToVerify = Utility.addDays(currentDay, lastDayToValidate);
			verifyDates = Utility.getAllDatesBetweenCheckInOutDates(currentDay, moreThanDaysCountToVerify);
			if (validationMsg) {
				String nextDayToValidate = Utility.addDays(verifyDates.get(verifyDates.size() - 1), 1);
				// selectDatesAndClickOnFindRooms(driver, test_steps,
				// nextDayToValidate, "", adults, children, ratePlanName);
				// verifyValidationMessageForNoRatePlanFound(driver, test_steps,
				// nextDayToValidate, withInDaysCount, true);
			} else {
				for (String date : verifyDates) {
					// selectDatesAndClickOnFindRooms(driver, test_steps, date,
					// "", adults, children, ratePlanName);
					verifyRateAmountPerNight(driver, test_steps, roomClassName, ratePerNight, date);
				}
			}
		} else if ((Utility.validateString(moreThanDaysCount)) && (Utility.validateString(withInDaysCount))) {
			int a = Integer.parseInt(moreThanDaysCount);
			int b = Integer.parseInt(withInDaysCount);
			if (a > b) {
				test_steps.add("This is not a valid option to select from booking window restrictions");
			} else {
				currentDay = Utility.addDays(Utility.getCurrentDate("dd/MM/yyyy"), 1);
				String lastDay = Utility.addDays(currentDay, Integer.parseInt(withInDaysCount));
				verifyDates = Utility.getAllDatesBetweenCheckInOutDates(currentDay, lastDay);
				if (validationMsg) {
					String nextDayToValidate = Utility.addDays(verifyDates.get(verifyDates.size() - 1), 1);
					// selectDatesAndClickOnFindRooms(driver, test_steps,
					// nextDayToValidate, "", adults, children, ratePlanName);
					// verifyValidationMessageForNoRatePlanFound(driver,
					// test_steps, nextDayToValidate, withInDaysCount, true);
				} else {
					for (String date : verifyDates) {
						// selectDatesAndClickOnFindRooms(driver, test_steps,
						// date, "", adults, children, ratePlanName);
						verifyRateAmountPerNight(driver, test_steps, roomClassName, ratePerNight, date);
					}
				}
			}
		}
	}

	public void verifyValidationMessageForNoRatePlanFound(WebDriver driver, ArrayList<String> test_steps, String date,
			String moreThanDaysCount, boolean withInAdvance, String reservationType) throws Exception {
		String validationXpath = null;
		String actValidation = null;
		ArrayList<String> dates = new ArrayList<>();
		if (date.split("\\|").length > 1) {
			for (int i = 0; i < date.split("\\|").length; i++) {
				dates.add(date.split("\\|")[i]);
			}
		} else {
			dates.add(date);
		}
		if (reservationType.equalsIgnoreCase("group")) {
			Wait.wait10Second();
			String QGRAmount = driver.findElement(By.xpath("//span[@id='summaryRoomQrg']")).getText();
			String totalAmount = driver.findElement(By.xpath("//span[@id='summaryTotalAmount']")).getText();
			test_steps.add("<b>QGR</b> and <b>Total</b> amounts are displaying as ::" + QGRAmount + "," + totalAmount);
			double QGRAmountValue = Double.parseDouble(QGRAmount);
			double totalAmountValue = Double.parseDouble(totalAmount);
			if ((QGRAmountValue == 0.00) && (totalAmountValue == 0.00)) {
				if (withInAdvance) {
					test_steps
							.add("Successfully verified <b>QGR</b> and <b>Total</b> amounts are displaying as <b>0.00</b> for "
									+ "date <b>" + dates + "</b> with More than <b>" + moreThanDaysCount
									+ "</b> days in advance of " + "check-in date from <b>" + currentDay + "</b>");
				} else {
					test_steps
							.add("Successfully verified <b>QGR</b> and <b>Total</b> amounts are displaying as <b>0.00</b> for "
									+ "date <b>" + dates + "</b> with Within <b>" + moreThanDaysCount
									+ "</b> days of check-in date from <b>" + currentDay + "</b>");
				}
			} else {
				throw new SkipException("Failed to verify <b>QGR</b> and <b>Total</b> amounts");
			}
		} else {
			if (reservationType.contains("tapechart")) {
				validationXpath = "//div[@class='toast-message']";
				actValidation = "No results match your criteria. Please change your search and try again.";
			} else {
				validationXpath = "//div[contains(@data-bind,'text: roomSearch.editStayInfoError')]";
				actValidation = "No rate combination can be found!";
				if (date.split("\\|").length > 1) {
					actValidation = "No rooms are available for Room Search #1,#2. Please change the search criteria and try again.";
				}
			}
			Wait.waitForElementToBeVisibile(By.xpath(validationXpath), driver);
			String expValidation = driver.findElement(By.xpath(validationXpath)).getText();
			String currentDay = Utility.getCurrentDate("dd/MM/yyyy");
			if (withInAdvance) {
				assertEquals(actValidation, expValidation,
						"Failed to validate restriction for In advance of check-in date");
				test_steps.add("Successfully verified validation message as <b>" + expValidation + "</b> for "
						+ "date <b>" + dates + "</b> with More than <b>" + moreThanDaysCount
						+ "</b> days in advance of " + "check-in date from <b>" + currentDay + "</b>");
			} else {
				assertEquals(actValidation, expValidation,
						"Failed to validate restriction for with in days of check-in");
				test_steps.add("Successfully verified validation message as <b>" + expValidation + "</b> for "
						+ "date <b>" + dates + "</b> with Within <b>" + moreThanDaysCount
						+ "</b> days of check-in date from <b>" + currentDay + "</b>");
			}
		}
	}

	public void verifyRateAmountPerNight(WebDriver driver, ArrayList<String> test_steps, String roomClassName,
			String ratePerNight, String date) {
		String rateDisplayedXpath = "//span[contains(@data-bind,'text: roomClass.name') and " + "text()='"
				+ roomClassName + "']/..//span[contains(@data-bind,'Avg per night')]";
		Wait.waitForElementToBeVisibile(By.xpath(rateDisplayedXpath), driver);
		String rateDisplayed = driver.findElement(By.xpath(rateDisplayedXpath)).getText();
		String avgPerNightMsg = "Avg per night $" + ratePerNight;
		assertEquals(rateDisplayed, avgPerNightMsg, "Failed to verify rate room class is displayed");
		test_steps.add("Successfully verified rate plan amount displayed for <b>" + roomClassName + "</b> "
				+ "for the date <b>" + date + "</b>");
	}

	private void selectDatesAndClickOnFindRooms(WebDriver driver, ArrayList<String> test_steps, String checkInDate,
			String checkOutDate, String adults, String children, String ratePlanName, String reservationType,
			String roomClassName) throws Exception {
		if (reservationType.contains("tapechart")) {
			Tapechart tapeChart = new Tapechart();
			tapeChart.selectDatesAndClickOnSearch(driver, test_steps, checkInDate, checkOutDate, adults, children,
					ratePlanName);
		} else if (reservationType.equalsIgnoreCase("group")) {
			Groups groups = new Groups();
			if (!Utility.validateString(checkOutDate)) {
				checkOutDate = Utility.addDays(checkInDate, 1);
			}
			groups.SelectArrivalDepartureDates(driver, checkInDate, checkOutDate);
			groups.SelectRatePlan(driver, ratePlanName);
			groups.EnterNights(driver, "1");
			groups.ClickSearchGroup(driver);
			String roomClassMaxBlock = "//span[contains(@data-bind,'RoomClassName') and text()='" + roomClassName
					+ "']/../..//input[contains(@data-bind,'RoomClassAvailability.A1_block')]";
			driver.findElement(By.xpath(roomClassMaxBlock)).clear();
			driver.findElement(By.xpath(roomClassMaxBlock)).sendKeys("01");
			driver.findElement(By.xpath(roomClassMaxBlock)).sendKeys(Keys.TAB);
			List<WebElement> maxBlockInput = driver
					.findElements(By.xpath("//td//input[contains(@data-bind," + "'RoomClassAvailability.A1_block')]"));
			for (int i = 0; i < maxBlockInput.size(); i++) {
				int j = i + 1;
				JavascriptExecutor js = (JavascriptExecutor) driver;
				String maxBlockValue = (String) js.executeScript("return arguments[0].value", maxBlockInput.get(i));
				int displayedMaxBlock = Integer.parseInt(maxBlockValue);
				String roomNameXpath = "(//input[contains(@data-bind,'RoomClassAvailability.A1_block')]/../.."
						+ "//span[contains(@data-bind,'RoomClassName')])[" + j + "]";
				String roomName = driver.findElement(By.xpath(roomNameXpath)).getText();
				if (!roomName.equalsIgnoreCase(roomClassName)) {
					if (displayedMaxBlock > 0) {
						maxBlockInput.get(i).clear();
						maxBlockInput.get(i).sendKeys("0");
						maxBlockInput.get(i).sendKeys(Keys.TAB);
					}
				}
			}
		} else {
			int count = checkInDate.split("\\|").length;
			if (count > 1) {
				ArrayList<String> checkOutDates = new ArrayList<>();
				for (int i = 0; i < count; i++) {
					if (!Utility.validateString(checkOutDate)) {
						String date = Utility.addDays(checkInDate.split("\\|")[i], 1);
						checkOutDates.add(date);
					}
				}
				if (!Utility.validateString(checkOutDate)) {
					checkOutDate = Utility.addInputDataToStringWithSeperator(checkOutDates);
				}
				select_Dates(driver, test_steps, checkInDate, checkOutDate, adults, children, ratePlanName, "", "");
			} else {
				select_CheckInDate(driver, test_steps, checkInDate);
				if (Utility.validateString(checkOutDate)) {
					select_CheckoutDate(driver, test_steps, checkOutDate);
				}
				enter_Adults(driver, test_steps, adults);
				enter_Children(driver, test_steps, children);
				select_Rateplan(driver, test_steps, ratePlanName, "");
			}
			clickOnFindRooms(driver, test_steps);
		}
	}

	public void verifyRoomClassIsDisplayedInSearch(WebDriver driver, ArrayList<String> test_steps, String roomClassName,
			String date, String reservationType, String roomClassAbb) throws Exception {
		boolean roomClassFound = false;
		ArrayList<String> dates = new ArrayList<>();
		if (date.split("\\|").length > 1) {
			for (int i = 0; i < date.split("\\|").length; i++) {
				dates.add(date.split("\\|")[i]);
			}
		} else {
			dates.add(date);
		}
		if (reservationType.equalsIgnoreCase("group")) {
			Wait.wait10Second();
			String QGRAmount = driver.findElement(By.xpath("//span[@id='summaryRoomQrg']")).getText();
			String totalAmount = driver.findElement(By.xpath("//span[@id='summaryTotalAmount']")).getText();
			test_steps.add("<b>QGR</b> and <b>Total</b> amounts are displaying as ::" + QGRAmount + "," + totalAmount);
			double QGRAmountValue = Double.parseDouble(QGRAmount);
			double totalAmountValue = Double.parseDouble(totalAmount);
			if ((QGRAmountValue > 0.00) && (totalAmountValue > 0.00)) {
				test_steps.add("Successfully verified <b>QGR</b> and <b>Total</b> amounts are "
						+ "displaying as more than <b>0.00</b> as <b>" + QGRAmount + "</b> for room class <b>"
						+ roomClassName + "</b> date <b>" + dates + "</b>");
			} else {
				throw new SkipException("Failed to verify <b>QGR</b> and <b>Total</b> amounts");
			}
		} else if (reservationType.contains("tapechart")) {
			String CellPath = "//div[contains(text(),'" + roomClassAbb
					+ "')  and contains(@class,'roomclassname')]//parent::*//following-sibling::"
					+ "div//following-sibling::div[contains(@class,'DatesContainer')]//ancestor::"
					+ "div[contains(@class,'tapechartdatecell Available')]";
			String availCount = driver
					.findElement(By.xpath("(//div[contains(@class,'roomclassname') and text()='" + roomClassAbb
							+ "']/../..//following-sibling::div[@class='row availpercentrow']//div[@class='ir-tc-absoluteCenter'])[2]"))
					.getText();
			if (Integer.parseInt(availCount) > 0) {
				if (driver.findElements(By.xpath(CellPath)).size() > 0) {
					roomClassFound = true;
					test_steps.add("Successfully verified <b>" + roomClassName
							+ "</b> room class displayed for the date <b>" + dates + "</b>");
				}
			} else {
				roomClassFound = true;
				test_steps.add(
						"<b>" + roomClassName + "</b> room class is not available for the date <b>" + dates + "</b>");
			}
		} else {
			String roomClassNameXpath = "//span[@data-bind='text: roomClass.name, attr:{title: roomClass.id}']";
			List<WebElement> roomClassNames = driver.findElements(By.xpath(roomClassNameXpath));
			for (WebElement roomClass : roomClassNames) {
				String roomClassNameDisplayed = roomClass.getText();
				if (roomClassNameDisplayed.equalsIgnoreCase(roomClassName)) {
					test_steps.add("Successfully verified <b>" + roomClassName
							+ "</b> room class displayed for the date <b>" + dates + "</b>");
					roomClassFound = true;
					break;
				}
			}
			assertEquals(roomClassFound, true, "Failed to verify rate room class is displayed");
		}
	}

	public void navigateToNewReservationScreen(WebDriver driver, ArrayList<String> test_steps, String reservationType,
			String accountName, String accountType) throws Exception {
		Navigation navigation = new Navigation();
		if (reservationType.contains("account")) {
			Account accounts = new Account();
			accounts.searchForAnAccountAndOpen(driver, test_steps, accountName, accountType);
			accounts.clickOnNewReservationButton(driver, test_steps);
		} else if (reservationType.contains("tapechart")) {
			navigation.Reservation_Backward_3(driver);
			navigation.navigateToTapeChartFromReservations(driver);
			test_steps.add("Clicked on tape chart sub-menu option");
		} else if (reservationType.contains("group")) {
			Groups groups = new Groups();
			navigation.Reservation_Backward_3(driver);
			navigation.Groups(driver);
			test_steps.add("Clicked on groups sub-menu option");
			groups.openGroup(driver, test_steps, "");
			groups.navigateRoomBlock(driver);
			test_steps.add("Clicked on rooms block option on top");
			groups.ClickNewBlock(driver);
			test_steps.add("Clicked on new block button");
			String randomNum = Utility.GenerateRandomNumber();
			String blockName = "Test" + randomNum;
			groups.EnterBlockName(driver, blockName);
			test_steps.add("Entering block name as : <b>" + blockName + "</b>");
			groups.ClickOkay_CreateNewBlock(driver);
			test_steps.add("Click ok button on create new block popup");
		} else {
			navigation.Reservation_Backward_3(driver);
			click_NewReservation(driver, test_steps);
		}
	}

	public void navigateToNewReservationScreen(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Navigation navigation = new Navigation();
		navigation.Reservation_Backward_3(driver);
		click_NewReservation(driver, test_steps);
	}

	public void verifyBookingWindowOnReservation(WebDriver driver, ArrayList<String> test_steps, String roomClassName,
			String checkInDate, String checkOutDate, String adults, String children, String ratePlanName,
			HashMap<String, String> bookingWindow, String reservationType, String roomClassAbb) throws Exception {
		String moreThanDaysCount = bookingWindow.get("More than");
		String withInDaysCount = bookingWindow.get("Within");
		String currentDay = Utility.getCurrentDate("dd/MM/yyyy");
		ArrayList<String> checkInDates = Utility.splitInputData(checkInDate);
		ArrayList<String> checkOutDates = Utility.splitInputData(checkOutDate);
		if ((Utility.validateString(moreThanDaysCount)) && !(Utility.validateString(withInDaysCount))) {
			String moreThanDaysCountToVerify = Utility.addDays(currentDay, Integer.parseInt(moreThanDaysCount));
			if (!(Utility.checkFirstDateIsGreaterOrEqualDayToSecond(checkInDate, moreThanDaysCountToVerify))) {
				selectDatesAndClickOnFindRooms(driver, test_steps, checkInDate, checkOutDate, adults, children,
						ratePlanName, reservationType, roomClassName);
				verifyValidationMessageForNoRatePlanFound(driver, test_steps, checkInDate, moreThanDaysCount, true,
						reservationType);
			} else {
				selectDatesAndClickOnFindRooms(driver, test_steps, checkInDate, checkOutDate, adults, children,
						ratePlanName, reservationType, roomClassName);
				verifyRoomClassIsDisplayedInSearch(driver, test_steps, roomClassName, checkInDate, reservationType,
						roomClassAbb);
			}
		} else if (!(Utility.validateString(moreThanDaysCount)) && (Utility.validateString(withInDaysCount))) {
			int withInDays = Integer.parseInt(withInDaysCount) + 1;
			String withInDaysCountToVerify = Utility.addDays(currentDay, withInDays);
			if (Utility.checkFirstDateIsGreaterOrEqualDayToSecond(withInDaysCountToVerify, checkInDate)) {
				selectDatesAndClickOnFindRooms(driver, test_steps, checkInDate, checkOutDate, adults, children,
						ratePlanName, reservationType, roomClassName);
				verifyRoomClassIsDisplayedInSearch(driver, test_steps, roomClassName, checkInDate, reservationType,
						roomClassAbb);
			} else {
				selectDatesAndClickOnFindRooms(driver, test_steps, checkInDate, checkOutDate, adults, children,
						ratePlanName, reservationType, roomClassName);
				verifyValidationMessageForNoRatePlanFound(driver, test_steps, checkInDate, withInDaysCount, true,
						reservationType);
			}
		} else if ((Utility.validateString(moreThanDaysCount)) && (Utility.validateString(withInDaysCount))) {
			String moreThanDaysCountToVerify = Utility.addDays(currentDay, Integer.parseInt(moreThanDaysCount));
			int withInDays = Integer.parseInt(withInDaysCount) + 1;
			String withInDaysCountToVerify = Utility.addDays(currentDay, withInDays);
			if (Utility.checkFirstDateIsGreaterOrEqualDayToSecond(withInDaysCountToVerify, moreThanDaysCountToVerify)) {
				if ((Utility.checkFirstDateIsGreaterOrEqualDayToSecond(checkInDate, moreThanDaysCountToVerify))
						&& Utility.checkFirstDateIsGreaterOrEqualDayToSecond(withInDaysCountToVerify, checkInDate)) {
					selectDatesAndClickOnFindRooms(driver, test_steps, checkInDate, checkOutDate, adults, children,
							ratePlanName, reservationType, roomClassName);
					verifyRoomClassIsDisplayedInSearch(driver, test_steps, roomClassName, checkInDate, reservationType,
							roomClassAbb);
				} else {
					selectDatesAndClickOnFindRooms(driver, test_steps, checkInDate, checkOutDate, adults, children,
							ratePlanName, reservationType, roomClassName);
					verifyValidationMessageForNoRatePlanFound(driver, test_steps, checkInDate, withInDaysCount, true,
							reservationType);
				}
			}
		}
	}

	public boolean clickRoomClassInSearchResultFindRoom(WebDriver driver, String roomclass,
			ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean roomClassPresent = false;
		// int resultCounts = res.resultCount.size();
		String roomclassLink = roomclassLink = "(//span[text()='" + roomclass + "' and @title] )";
		try {
			if (driver.findElements(By.xpath(roomclassLink)).size() > 0) {
				roomClassPresent = true;

				Wait.waitUntilPresenceOfElementLocated(roomclassLink, driver);
				Utility.ScrollToElement(driver.findElement(By.xpath(roomclassLink)), driver);
				Wait.waitForElementToBeClickable(By.xpath(roomclassLink), driver);

				driver.findElement(By.xpath(roomclassLink)).click();
				test_steps.add("Click at Room class available link: " + roomclass);
				reslogger.info("Click at Room class available link: " + roomclass);
			}
		} catch (Exception e) {
			test_steps.add("Room class not available " + roomclass + " for specified date");
			reslogger.info("Room class not available " + roomclass + " for specified date");
		}
		return roomClassPresent;
	}

	public void verifySearchedRoomClassRateDetails(WebDriver driver, String roomClass, String checkindate,
			String checkoutdate, HashMap<String, String> rate, String folioDisplayName, ArrayList<String> test_steps)
			throws ParseException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		RatesGrid ratesGrid = new RatesGrid();
		String getRateOnSearchPage = "";
		String stay = Utility.differenceBetweenDates(checkindate, checkoutdate);
		int stayDifference = Integer.parseInt(stay);
		DecimalFormat df = new DecimalFormat("#.00");

		ArrayList<String> day = new ArrayList<String>();
		ArrayList<String> amount = new ArrayList<String>();
		int count = 1;
		ArrayList<String> rateName = new ArrayList<String>();
		// j get each day records //k to get each record of perticular day - 3
		// records
		// (day, rate name, amount)
		for (int j = 1; j <= stayDifference; j++) {
			for (int k = 1; k <= 3; k++) {
				String find = "(//div[@class='ir-rc-table']/table/thead/following::tbody)[1]/tr[" + j + "]/td[" + k
						+ "]";
				Wait.waitUntilPresenceOfElementLocated(find, driver);
				Wait.waitForElementToBeVisibile(By.xpath(find), driver);
				String record = driver.findElement(By.xpath(find)).getText();
				if (k == 1) {
					DateFormat outputFormatter = new SimpleDateFormat("dd/MM/yyyy");
					Date date = new Date(record);
					String findDate = outputFormatter.format(date);
					day.add(findDate);
				} else if (k == 2) {
					rateName.add(record);
				} else {
					amount.add(record);
				}
			}
		}
		// verify records now

		reslogger.info("dates: " + day);
		reslogger.info("rateName: " + rateName);
		reslogger.info("amount: " + amount);

		ArrayList<String> foundRate = ratesGrid.getRate(rate, driver, checkindate, checkoutdate, test_steps);

		// verify rateFolioName
		for (int p = 0; p < rateName.size(); p++) {
			Assert.assertEquals(rateName.get(p), folioDisplayName);
		}
		test_steps.add("Verified folioDisplayName: " + folioDisplayName);
		reslogger.info("Verified folioDisplayName: " + folioDisplayName);
		// verify rate grid
		for (int i = 0; i < foundRate.size(); i++) {
			getRateOnSearchPage = amount.get(i).replace("$", "").trim();
			String getRateOnRateGrid = df.format(Double.parseDouble(foundRate.get(i)));
			Assert.assertEquals(getRateOnSearchPage, getRateOnRateGrid);
		}
		test_steps.add("Rate verified: " + getRateOnSearchPage);
		reslogger.info("Rate verified: " + getRateOnSearchPage);
	}

	/*
	 * public void verifyNoRateFoundInSearch(WebDriver driver, String message,
	 * ArrayList<String> test_steps) { Elements_CPReservation res = new
	 * Elements_CPReservation(driver); int resultCounts =
	 * res.resultCount.size(); if (!(resultCounts > 0)) {
	 * Wait.waitUntilPresenceOfElementLocated(OR_Reservation.
	 * NorateCombinationInSearch, driver); String getNoRateComBinationMessage =
	 * res.norateCombinationInSearch.getText();
	 * Assert.assertEquals(getNoRateComBinationMessage.trim(), message,
	 * "Failed to verify message"); test_steps.add("Verify message: " +
	 * message); reslogger.info("Verify message: " + message); } else {
	 * test_steps.
	 * add("No rate combination message not displayed as Other room class comes in search result "
	 * ); reslogger.
	 * info("No rate combination message not displayed as Other room class comes in search result "
	 * ); }
	 * 
	 * }
	 * 
	 */
	public ArrayList<String> verifyBrokenRulesPopup(WebDriver driver, String isMinimumStayOn, String minimumStayValue,
			String isNoCheckInChecked, String isNoCheckOutChecked) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.RulesPopupHeadingText);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.RulesPopupHeadingText), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RulesPopupHeadingText), driver);
		Utility.ScrollToElement(res.RulesPopupHeadingText, driver);
		Assert.assertTrue(res.RulesPopupHeadingText.isDisplayed(), "Faield to verify rules popup heading text");
		testSteps.add(
				"Verified heading ( Selecting this room will violate the following rules ) is displaying in broken rules popup");
		reslogger.info(
				"Verified heading ( Selecting this room will violate the following rules ) is displaying in broken rules popup");

		testSteps.add("Verifying rules in rule broken popup");
		reslogger.info("Verifying rules in rule broken popup");
		String expectedRulesStatement = "";
		if (isMinimumStayOn.equalsIgnoreCase("Yes") && isNoCheckInChecked.equalsIgnoreCase("Yes")
				&& isNoCheckOutChecked.equalsIgnoreCase("Yes")) {
			String minimumStay = minimumStayValue + " Nights (override)<br>";
			String noCheckIn = "No Check In (override)<br>";
			String noCheckOut = "No Check out (override)";
			expectedRulesStatement = minimumStay + noCheckIn + noCheckOut;

		} else if (isMinimumStayOn.equalsIgnoreCase("Yes") && isNoCheckInChecked.equalsIgnoreCase("No")
				&& isNoCheckOutChecked.equalsIgnoreCase("No")) {
			String minimumStay = minimumStayValue + " Nights (override)";
			String noCheckIn = "";
			String noCheckOut = "";
			expectedRulesStatement = minimumStay + noCheckIn + noCheckOut;

		} else if (isMinimumStayOn.equalsIgnoreCase("Yes") && isNoCheckInChecked.equalsIgnoreCase("Yes")
				&& isNoCheckOutChecked.equalsIgnoreCase("No")) {
			String minimumStay = minimumStayValue + " Nights (override)<br>";
			String noCheckIn = "No Check In (override)";
			String noCheckOut = "";
			expectedRulesStatement = minimumStay + noCheckIn + noCheckOut;

		} else if (isMinimumStayOn.equalsIgnoreCase("Yes") && isNoCheckInChecked.equalsIgnoreCase("No")
				&& isNoCheckOutChecked.equalsIgnoreCase("Yes")) {
			String minimumStay = minimumStayValue + " Nights (override)<br>";
			String noCheckIn = "";
			String noCheckOut = "No Check out (override)";
			expectedRulesStatement = minimumStay + noCheckIn + noCheckOut;

		} else if (isMinimumStayOn.equalsIgnoreCase("No") && isNoCheckInChecked.equalsIgnoreCase("Yes")
				&& isNoCheckOutChecked.equalsIgnoreCase("Yes")) {
			String minimumStay = "";
			String noCheckIn = "No Check In (override)<br>";
			String noCheckOut = "No Check out (override)";
			expectedRulesStatement = minimumStay + noCheckIn + noCheckOut;

		} else if (isMinimumStayOn.equalsIgnoreCase("No") && isNoCheckInChecked.equalsIgnoreCase("Yes")
				&& isNoCheckOutChecked.equalsIgnoreCase("No")) {
			String minimumStay = "";
			String noCheckIn = "No Check In (override)";
			String noCheckOut = "";
			expectedRulesStatement = minimumStay + noCheckIn + noCheckOut;

		} else if (isMinimumStayOn.equalsIgnoreCase("No") && isNoCheckInChecked.equalsIgnoreCase("No")
				&& isNoCheckOutChecked.equalsIgnoreCase("Yes")) {
			String minimumStay = "";
			String noCheckIn = "";
			String noCheckOut = "No Check out (override)";
			expectedRulesStatement = minimumStay + noCheckIn + noCheckOut;

		} else if (isMinimumStayOn.equalsIgnoreCase("No") && isNoCheckInChecked.equalsIgnoreCase("No")
				&& isNoCheckOutChecked.equalsIgnoreCase("No")) {
			String minimumStay = "";
			String noCheckIn = "";
			String noCheckOut = "";
			expectedRulesStatement = minimumStay + noCheckIn + noCheckOut;

		}

		testSteps.add("Expected  : " + expectedRulesStatement);
		reslogger.info("Expected  : " + expectedRulesStatement);

		Wait.WaitForElement(driver, OR_Reservation.RulesOverrideText);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.RulesOverrideText), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RulesOverrideText), driver);
		Utility.ScrollToElement(res.RulesOverrideText, driver);
		String getText = res.RulesOverrideText.getAttribute("innerHTML");
		testSteps.add("Found  : " + getText);
		reslogger.info("Found  : " + getText);
		Assert.assertEquals(getText, expectedRulesStatement, "Failed to verify rules");
		testSteps.add("Verified rules in rule broken popup");
		reslogger.info("Verified rules in rule broken popup");

		Wait.WaitForElement(driver, OR_Reservation.RulesPopupText);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.RulesPopupText), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RulesPopupText), driver);
		Utility.ScrollToElement(res.RulesPopupText, driver);
		Assert.assertTrue(res.RulesPopupText.isDisplayed(), "Faield to verify rules popup text");
		testSteps.add("Verified text ( Are you sure you want to proceed? ) is displaying in broken rules popup");
		reslogger.info("Verified text ( Are you sure you want to proceed? ) is displaying in broken rules popup");

		return testSteps;
	}

	public ArrayList<String> selectRoomWithoutRulePopupHandling(WebDriver driver, String RoomClass, String IsAssign,
			String Account) throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//div[2]//span";
		Utility.app_logs.info("IsAssign: " + IsAssign);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]//..//..//..//following-sibling::div//div//select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"

					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);

			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			testSteps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				testSteps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else if (IsAssign.equalsIgnoreCase("Yes")) {

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div/button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				Wait.waitForElementToBeClickable(By.xpath(expand), driver);
				WebElement elementExpand = driver.findElement(By.xpath(expand));
				Utility.ScrollToElement_NoWait(elementExpand, driver);
				elementExpand.click();

				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
				reslogger.info(roomnum);
				Wait.WaitForElement(driver, roomnum);
				List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
				Wait.wait2Second();
				Utility.app_logs.info(getRoomNumber.size());
				String getMinimumNumber = getRoomNumber.get(1).getText();
				Utility.app_logs.info("getMinimumNumber: " + getMinimumNumber);

				String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
				Utility.app_logs.info("getMaxmumNumber: " + getMaxmumNumber);
				getMaxmumNumber = getMaxmumNumber.trim();
				int maxNumber = Integer.parseInt(getMaxmumNumber);
				int minNumber = Integer.parseInt(getMinimumNumber);

				Utility.app_logs.info("maxNumber : " + maxNumber);
				Utility.app_logs.info("maxNumber : " + maxNumber);

				Random random = new Random();
				int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
				IsAssign = String.valueOf(randomNumber);
				boolean isBreak = false;
				for (int j = 0; j < 5; j++) {
					Utility.app_logs.info("randomNumber: " + randomNumber);
					for (int i = 1; i < getRoomNumber.size(); i++) {
						// Utility.app_logs.info("in loop " + i);
						String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
						getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
						if (getRoomNumberFromOptions.equals(IsAssign)) {
							isBreak = true;
							break;
						}

					}
					if (isBreak == false) {
						random = new Random();
						randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
						IsAssign = String.valueOf(randomNumber);
					}
					if (isBreak) {
						break;
					}

				}
				System.out.print(" Random Number is :" + randomNumber);

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				testSteps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");

			} else {

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				Wait.waitForElementToBeClickable(By.xpath(expand), driver);
				WebElement elementExpand = driver.findElement(By.xpath(expand));
				Utility.ScrollToElement_NoWait(elementExpand, driver);
				elementExpand.click();

				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
				Utility.app_logs.info(roomnum);
				List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
				Utility.app_logs.info(getRoomNumber.size());
				String getMinimumNumber = getRoomNumber.get(1).getText();
				Utility.app_logs.info("getMinimumNumber: " + getMinimumNumber);

				String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
				Utility.app_logs.info("getMaxmumNumber: " + getMaxmumNumber);
				getMaxmumNumber = getMaxmumNumber.trim();
				int maxNumber = Integer.parseInt(getMaxmumNumber);
				int minNumber = Integer.parseInt(getMinimumNumber);

				Utility.app_logs.info("maxNumber : " + maxNumber);
				Utility.app_logs.info("maxNumber : " + maxNumber);

				Random random = new Random();
				int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
				IsAssign = String.valueOf(randomNumber);
				boolean isBreak = false;
				for (int j = 0; j < 5; j++) {
					Utility.app_logs.info("randomNumber: " + randomNumber);
					for (int i = 1; i < getRoomNumber.size(); i++) {
						Utility.app_logs.info("in loop " + i);
						String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
						getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
						if (getRoomNumberFromOptions.equals(IsAssign)) {
							isBreak = true;
							break;
						}

					}
					if (isBreak == false) {
						random = new Random();
						randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
						IsAssign = String.valueOf(randomNumber);
					}
					if (isBreak) {
						break;
					}

				}
				System.out.print(" Random Number is :" + randomNumber);

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				testSteps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass
					+ "')]//..//..//..//following-sibling::div//span[contains(@data-bind,'text: ( isSelected()')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}

			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
		} else {
			testSteps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");

		}

		return testSteps;
	}

	public ArrayList<String> clickRulesPopup(WebDriver driver, String buttonText) throws InterruptedException {

		ArrayList<String> testSteps = new ArrayList<>();

		String rulesPopupButton = "//p[text()='Are you sure you want to proceed?']//parent::div//following::div//button[text()='"
				+ buttonText + "']";
		Wait.WaitForElement(driver, rulesPopupButton);
		Wait.waitForElementToBeVisibile(By.xpath(rulesPopupButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(rulesPopupButton), driver);
		WebElement rulesButton = driver.findElement(By.xpath(rulesPopupButton));
		Utility.ScrollToElement(rulesButton, driver);
		rulesButton.click();
		testSteps.add(buttonText + " button clicked");
		reslogger.info(buttonText + " button clicked");

		return testSteps;
	}

	public ArrayList<String> enterMRBDates(WebDriver driver, String CheckInDate, String CheckoutDate, String Adults,
			String Children, String RatePlan, String PromoCode, String IsSplitRes) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		String loading = "(//div[@class='ir-loader-in'])[2]";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");

		String[] checkin = CheckInDate.split("\\|");
		String[] checkout = CheckoutDate.split("\\|");
		String[] adu = Adults.split("\\|");
		String[] child = Children.split("\\|");
		String[] rate = RatePlan.split("\\|");
		String[] promoCode = PromoCode.split("\\|");
		Boolean flag = false;
		reslogger.info(CheckInDate);
		int size = checkin.length;

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddRoom);
		reslogger.info("MRB size : " + size);
		if (size > 1) {
			for (int i = 1; i <= size; i++) {
				String checkInCal = "(//label[text()='Check In']//..//..//div//input)[" + i + "]";
				reslogger.info(checkInCal);
				Wait.WaitForElement(driver, checkInCal);
				WebElement checkInDate = driver.findElement(By.xpath(checkInCal));
				checkInDate.clear();
				checkInDate.sendKeys(checkin[i - 1]);

				String checkOutCal = "(//label[text()='Check Out']//..//..//div//input)[" + i + "]";
				reslogger.info(checkOutCal);
				Wait.WaitForElement(driver, checkOutCal);
				WebElement checkOutDate = driver.findElement(By.xpath(checkOutCal));
				checkOutDate.clear();
				checkOutDate.sendKeys(checkout[i - 1]);

				if (!IsSplitRes.equalsIgnoreCase("Yes")) {

					String adults = "(//label[text()='Adults']/preceding-sibling::input)[" + i + "]";
					Wait.WaitForElement(driver, adults);
					driver.findElement(By.xpath(adults)).clear();
					driver.findElement(By.xpath(adults)).sendKeys(adu[i - 1]);
					testSteps.add("Enter Number of Adults : " + adu[(i - 1)]);
					reslogger.info("Enter Number of Adults : " + adu[(i - 1)]);

					String children = "(//label[text()='Children']/preceding-sibling::input)[" + i + "]";
					Wait.WaitForElement(driver, children);
					driver.findElement(By.xpath(children)).clear();
					driver.findElement(By.xpath(children)).sendKeys(child[i - 1]);
					testSteps.add("Enter Number of Children : " + child[(i - 1)]);
					reslogger.info("Enter Number of Children : " + child[(i - 1)]);

					// res.CP_NewReservation_Rateplan.click();
					String ratebutton = "(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div/button)["
							+ i + "]";
					Wait.WaitForElement(driver, ratebutton);
					driver.findElement(By.xpath(ratebutton)).click();

					int rateCount = driver.findElements(By
							.xpath("(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[contains(text(),'"
									+ rate[i - 1].trim() + "')]/..)"))
							.size();
					String rateLoc = "(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[contains(text(),'"
							+ rate[i - 1].trim() + "')]/..)[" + rateCount + "]";
					reslogger.info(rateLoc);
					Wait.WaitForElement(driver, rateLoc);
					driver.findElement(By.xpath(rateLoc)).click();
					testSteps.add("Selecting the rateplan : " + rate[i - 1]);
					reslogger.info("Selecting the rateplan : " + rate[i - 1]);
					if (RatePlan.contains("Promo")) {
						String promo = "(//label[contains(text(),'Enter Code')]/preceding-sibling::input)[" + i + "]";
						Wait.WaitForElement(driver, promo);
						res.CP_NewReservation_PromoCode.clear();
						res.CP_NewReservation_PromoCode.sendKeys(promoCode[i - 1]);
						testSteps.add("Enter promocode : " + promoCode[i]);
						reslogger.info("Enter promocode : " + promoCode[i]);
					}
				}
				if (!(i == size)) {
					clickOnAddARoomButton(driver, testSteps);
					reslogger.info("Clicking on add room");
					if (IsSplitRes.equalsIgnoreCase("Yes") && !flag) {
						res.CP_NewReservation_SplitReservation.click();
						testSteps.add("Clicking on split reservation");
						reslogger.info("Clicking on split reservation");
					}
					flag = true;
				}
			}
		} else {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CheckinCal);
			res.CP_NewReservation_CheckinCal.click();
			String monthYear = Utility.get_MonthYear(CheckInDate);
			String day = Utility.getDay(CheckInDate);
			reslogger.info(monthYear);
			String header = null, headerText = null, next = null, date;
			for (int i = 1; i <= 12; i++) {
				header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
				headerText = driver.findElement(By.xpath(header)).getText();
				if (headerText.equalsIgnoreCase(monthYear)) {
					date = "//td[contains(@class,'day') and text()='" + day + "']";
					Wait.WaitForElement(driver, date);
					driver.findElement(By.xpath(date)).click();
					testSteps.add("Selecting checkin date : " + CheckInDate);
					reslogger.info("Selecting checkin date : " + CheckInDate);
					break;
				} else {
					next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
					Wait.WaitForElement(driver, next);
					driver.findElement(By.xpath(next)).click();
					Wait.wait2Second();
				}
			}
		}
		return testSteps;
	}

	public void verifyNewPolicesApplicablePopup(WebDriver driver, boolean isDisplayed, ArrayList<String> test_steps) {
		String path = "//*[contains(text(),'Based on the changes made, new policies are applicable.')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		assertEquals(driver.findElement(By.xpath(path)).isDisplayed(), isDisplayed,
				"Failed To Verify New Polices Are Applicable Popup");
		test_steps.add("Successfully Verified New Polices are applicable Based On the Changes Made Displayed : "
				+ isDisplayed);
		reslogger.info("Successfully Verified New Polices are applicable Based On the Changes Made Displayed : "
				+ isDisplayed);
	}

	public void clickNewPolicesApplicablePopupYesNo(WebDriver driver, boolean isYesClick, ArrayList<String> test_steps)
			throws InterruptedException {

		if (isYesClick) {
			String path = "//*[contains(text(),'Based on the changes made, new policies are applicable.')]/../following-sibling::div//button[contains(text(),'Yes')]";
			Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
			driver.findElement(By.xpath(path)).click();
			test_steps.add("Based on the changed made, new Polices are applicable : Yes Clicked");
			reslogger.info("Based on the changed made, new Polices are applicable : Yes Clicked");
		} else {
			String path = "//*[contains(text(),'Based on the changes made, new policies are applicable.')]/../following-sibling::div//button[contains(text(),'No')]";
			Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
			driver.findElement(By.xpath(path)).click();
			test_steps.add("Based on the changed made, new Polices are applicable : No Clicked");
			reslogger.info("Based on the changed made, new Polices are applicable : No Clicked");
		}
		try {
			Wait.waitForElementToBeGone(driver,
					driver.findElement(By
							.xpath("//*[contains(text(),'Based on the changes made, new policies are applicable.')]")),
					15);
		} catch (Exception e) {
			System.err.println("already gone");
		}
		Wait.wait2Second();

		String loading = "(//div[@class='ir-loader-in'])[2]";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 10) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}

		reslogger.info("Waited to loading symbol");
	}

	public HashMap<String, String> getCancellationClauseValue(String delim, String typeOfFees,
			String guestsWillIncurAFee) {
		HashMap<String, String> valuesAgainstClauses = new HashMap<String, String>();

		ArrayList<String> typeOfFeesList = Utility.convertTokenToArrayList(typeOfFees, delim);
		ArrayList<String> percentageList = Utility.convertTokenToArrayList(guestsWillIncurAFee, delim);
		int index = 0;
		for (String type : typeOfFeesList) {
			if (type.equalsIgnoreCase("flat fee")) {
				valuesAgainstClauses.put("flat fee", "$" + percentageList.get(index));
			} else if (type.equalsIgnoreCase("number of nights")) {
				valuesAgainstClauses.put("number of nights", percentageList.get(index) + " Night(s)");
			} else if (type.equalsIgnoreCase("percent of stay")) {
				valuesAgainstClauses.put("percent of stay", percentageList.get(index));
			}

			index++;
		}
		return valuesAgainstClauses;
	}

	public void clickPolicyCollapseIcon(WebDriver driver, String PolicyType, String cancellationClause,
			ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		if (PolicyType.equals("No Show")) {
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel, driver);
			boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("No Show Policy Alread Expanded");
				reslogger.info("No Show Policy Alread Expanded ");
			} else {
				res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyCollapse.click();
				test_steps.add("No Show Policy  Expanded");
				reslogger.info("No Show Policy  Expanded ");
			}
		} else if (PolicyType.equals("Check-in")) {
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel, driver);
			boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("Check In Policy Alread Expanded");
				reslogger.info("Check In Policy Alread Expanded ");
			} else {
				res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyCollapse.click();
				test_steps.add("Check In Policy  Expanded");
				reslogger.info("Check In Policy  Expanded ");
			}
		} else if (PolicyType.equals("Cancellation")) {
			String path = "//div[text()='Policies And Disclaimers']/..//span[contains(text(),'Cancellation "
					+ cancellationClause + "')]";
			try{Utility.ScrollToElement(
					driver.findElement(By.xpath(path )), driver);}catch (Exception e) {
						// TODO: handle exception
					}
			boolean isEclicked = driver
					.findElement(By.xpath(path + "/../../../..//label[text()='Cancellation Policy']")).isDisplayed();
			if (isEclicked) {
				test_steps.add("Cancellation Policy Alread Expanded");
				reslogger.info("Cancellation Policy Alread Expanded ");
			} else {
				WebElement element = driver.findElement(By.xpath(path));
				Utility.ScrollToElement(element, driver);
				assertTrue(driver.findElement(By.xpath(path)).isDisplayed(),
						"Failed to Verify Cancellation Policy Associated Claues Heading");
				test_steps.add("Successfully Verified Cancellation Policy Associated Claue Heading : Displayed");
				reslogger.info("Successfully Verified Cancellation Policy Associated Claue Heading :  Displayed");
				assertEquals(driver.findElement(By.xpath(path)).getText(), "Cancellation " + cancellationClause,
						"Failed to Verify Cancellation Policy Associated Claues Heading");
				test_steps.add("Successfully Verified Cancellation Policy Associated Claue Heading : Cancellation "
						+ cancellationClause);
				reslogger.info("Successfully Verified Cancellation Policy Associated Claue Heading : Cancellation "
						+ cancellationClause);
				element.click();
				test_steps.add("Cancellation Policy Expanded");
				reslogger.info("Cancellation Policy Expanded ");
			}

		} else if (type.equalsIgnoreCase("Deposit")) {

		}

	}

	public void verifyAssociatedCancellationPolicy(WebDriver driver, String delim, String PolicyTypes,
			String PolicyName, ArrayList<String> clauseNamesList, HashMap<String, String> cancellationClauseValues,
			ArrayList<String> test_steps) throws InterruptedException {
		ArrayList<String> typeList = Utility.convertTokenToArrayList(PolicyTypes, delim);
		ArrayList<String> policyNamesList = Utility.convertTokenToArrayList(PolicyName, delim);

		int index = 0;
		int clauseIndex = 1;
		for (String type : typeList) {
			if (type.equalsIgnoreCase("Cancellation")) {
				Utility.app_logs.info(clauseNamesList.size());
				for (String clause : clauseNamesList) {
					clickPolicyCollapseIcon(driver, type, cancellationClauseValues.get(clause), test_steps);
					String foundName = getPolicyfromDetailTab(driver, test_steps);
					String expectedName = policyNamesList.get(index);
					if (clauseIndex != 1) {
						expectedName = expectedName + "-Clause " + clauseIndex;
					}
					assertTrue(foundName.contains(expectedName), "Failed to verify Cancellation Policy Name");
					test_steps.add("Successfully Verified Cancellation Policy Name : " + foundName);
					reslogger.info("Successfully Verified Cancellation Policy Name : " + foundName);
					clauseIndex++;
				}
			} else if (type.equalsIgnoreCase("Deposit")) {
				clickPolicyCollapseIcon(driver, type, "", test_steps);
				String foundName = getPolicyfromDetailTab(driver, test_steps);
				assertEquals(foundName, policyNamesList.get(index), "Failed to verify Deposit Policy Name");
				test_steps.add("Successfully Verified Deposit Policy Name : " + foundName);
				reslogger.info("Successfully Verified Deposit Policy Name : " + foundName);
			} else if (type.equalsIgnoreCase("Check-in")) {
				clickPolicyCollapseIcon(driver, type, "", test_steps);
				String foundName = getPolicyfromDetailTab(driver, test_steps);
				assertEquals(foundName, policyNamesList.get(index), "Failed to verify Check-in Policy Name");
				test_steps.add("Successfully Verified Check-in Policy Name : " + foundName);
				reslogger.info("Successfully Verified Check-in Policy Name : " + foundName);
			} else if (type.equalsIgnoreCase("No Show")) {
				clickPolicyCollapseIcon(driver, type, "", test_steps);
				String foundName = getPolicyfromDetailTab(driver, test_steps);
				assertEquals(foundName, policyNamesList.get(index), "Failed to verify No Show Policy Name");
				test_steps.add("Successfully Verified No Show Policy Name : " + foundName);
				reslogger.info("Successfully Verified No Show Policy Name : " + foundName);
			}
			index++;
		}
	}

	public void verifyNoCancellationPolicyAssociated(WebDriver driver, ArrayList<String> test_steps) {
		String path = "//div[text()='Policies And Disclaimers']/..//span[contains(text(),'Cancellation')]";
		assertEquals(driver.findElement(By.xpath(path)).isDisplayed(), false, "Failled Policy Associated");
		test_steps.add("Successfully Verified Cancellation Policy Not Associated");
		reslogger.info("Successfully Verified Cancellation Policy Not Associated ");
	}

	public void verifyGuestInfoAssociatedAccount(WebDriver driver, String expectedAccount, boolean isExpected,
			ArrayList<String> test_steps) {
		String foundAcc = getAccount_ResDetail(driver);

		if (isExpected) {
			assertEquals(foundAcc, expectedAccount, "Failed to Verify Associalted Account");
			test_steps.add("Successfully Verified Associated Account : " + foundAcc);
			reslogger.info("Successfully Verified Associated Account : " + foundAcc);
		} else {
			assertNotEquals(foundAcc, expectedAccount, "Failed to Verify Associalted Account");
			test_steps.add("Successfully Verified there Is No Associated Account with this name : " + foundAcc);
			reslogger.info("Successfully Verified there Is No Associated Account with this name : " + foundAcc);
		}
	}

	public void verifyAppliedPolicyAmount(WebDriver driver, String PolicyType, String amount, String type)
			throws InterruptedException {
		DecimalFormat df = new DecimalFormat("0.00");
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopupTitle);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle, driver);
		// Verified No Show Payment Page Title
		assertEquals(CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText().toLowerCase()
				.trim(), "Cancellation Payment".toLowerCase(), "Failed: To verify  Payment Page Title");
		test_steps.add(" Verified Title:<b> Cancellation Payment</b>");
		reslogger.info(" Verified Title: Cancellation Payment");
		// Get Amount
		String foundAmount = CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		foundAmount = foundAmount.replace("$", "").trim();
		assertEquals(Float.parseFloat(foundAmount), Float.parseFloat(amount), "Failed to verify Cancellation Amount");
		test_steps.add("Successfully Verified Cancellation Popup Amount : " + foundAmount);
		reslogger.info("Successfully Verified Cancellation Popup Amount : " + foundAmount);
		String balance = "";
		if (PolicyType.equals("No Show") || PolicyType.equals("Cancellation")) {
			balance = CPReservationPage.NoShowCancelPaymentPopup_Balance.getText().replace("$", "").replace("(", "").replace(")", "");

		} else if (PolicyType.equals("Check In")) {
			balance = CPReservationPage.CheckInPaymentPopup_Balance.getText().replace("$", "").replace("(", "").replace(")", "");

		}

		assertEquals(Float.parseFloat(balance), Float.parseFloat(amount), "Failed to verify Cancellation Balance");
		test_steps.add("Successfully Verified Cancellation Popup Balance : " + balance);
		reslogger.info("Successfully Verified Cancellation Popup Balance : " + balance);

	}

	public void verifyCancellationSuccessuful(WebDriver driver, ArrayList<String> test_steps, String balance,
			String amount, String type, String status) throws InterruptedException, ParseException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowSuccess_ModelHeader);
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.CP_Reservation_NoShowSuccess, driver);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShowSuccess, driver);

		// Verified Success -Message
		assertEquals(CPReservationPage.CP_Reservation_NoShowSuccess.getText().toLowerCase().trim(),
				"Cancellation Successful".toLowerCase(), "Failed: To verify Success Header");
		test_steps.add("  Verified Message: <b>Cancellation Successful</b>");
		reslogger.info("  Verified Message: Cancellation Successful");

		// Verified Success-Balance
		String foundBalance = CPReservationPage.NoShowSuccess_Balance.getText().replace("$ ", "");

		assertEquals(Float.parseFloat(foundBalance), Float.parseFloat(balance),
				"Failed: To verify Success Page Balance");
		test_steps.add(" Verified Balance: <b>" + foundBalance + "</b>");
		reslogger.info("  Verified Balance: " + foundBalance);

		// Verified Success-Amount

		String path = "//span[contains(@data-bind,'noShow.PaymentAmount')][contains(text(),'" + amount
				+ "')]|//span[contains(@data-bind,'cancel.PaymentAmount')][contains(text(),'" + amount
				+ "')]|//span[contains(@data-bind,'checkInDetail.PaymentAmount')][contains(text(),'" + amount
				+ "')]|//span[contains(@data-bind,'checkOutDetail.PaymentAmount')][contains(text(),'" + amount
				+ "')]";
		WebElement AmountElement = driver.findElement(By.xpath(path));
		assertTrue(AmountElement.isDisplayed(), "Failed: To verify  Success Page Amount: " + amount);
		test_steps.add("  Verified Amount: <b>" + amount + "</b>");
		reslogger.info("  Verified Amount: " + amount);

		// Verified Success-Type

		assertEquals(CPReservationPage.NoShowSuccess_Type.getText().toLowerCase().trim(), (type.toLowerCase().trim()),
				"Failed: To verify  Success Page Type");
		test_steps.add("  Verified Type: <b>" + type + "</b>");
		reslogger.info(" Verified Type: " + type);

		// Verified Success Notes

		assertEquals(CPReservationPage.CP_Reservation_NoShowSuccessStatus.getText().toLowerCase().trim(),
				(status.toLowerCase().trim()), "Failed: To verify  Success Page Notes ");
		test_steps.add(" Verified  Status : <b>" + status + "</b>");
		reslogger.info(" Verified  Status : " + status);

	}

	public ArrayList<String> verifyAssociatedAccount_ReservationHeader(WebDriver driver, String accountName) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<String>();

		String foundName = reservation.HeaderAccountName_BeforeReservation.getText();
		assertEquals(foundName.trim(), accountName, "Failed to verify Account No");
		testSteps.add("Successfully Verified Assoicated Account Name : " + accountName);
		reslogger.info("Successfully Verified Assoicated Account Name : " + accountName);
		assertEquals(reservation.GroupSign.isDisplayed(), true, "Failed: Group tic sign is not showing");
		testSteps.add("Verified group tick sign in reservation page");
		reslogger.info("Verified group tick sign in reservation page");
		return testSteps;
	}

	/*
	 * public void verifySearchedRoomClassRateDetails(WebDriver driver, String
	 * roomClass, String checkindate, String checkoutdate, HashMap<String,
	 * String> rate, String folioDisplayName, ArrayList<String>test_steps)
	 * throws ParseException { Elements_CPReservation res = new
	 * Elements_CPReservation(driver); RatesGrid ratesGrid = new RatesGrid();
	 * String getRateOnSearchPage = ""; String stay =
	 * Utility.differenceBetweenDates(checkindate, checkoutdate); int
	 * stayDifference = Integer.parseInt(stay); DecimalFormat df = new
	 * DecimalFormat("#.00");
	 * 
	 * ArrayList<String> day = new ArrayList<String>(); ArrayList<String> amount
	 * = new ArrayList<String>(); int count = 1; ArrayList<String> rateName =
	 * new ArrayList<String>(); // j get each day records //k to get each record
	 * of perticular day - 3 records // (day, rate name, amount) for (int j = 1;
	 * j <= stayDifference; j++) { for (int k = 1; k <= 3; k++) { String find =
	 * "(//div[@class='ir-rc-table']/table/thead/following::tbody)[1]/tr[" + j +
	 * "]/td[" + k + "]"; Wait.waitUntilPresenceOfElementLocated(find, driver);
	 * Wait.waitForElementToBeVisibile(By.xpath(find), driver); String record =
	 * driver.findElement(By.xpath(find)).getText(); if (k == 1) { DateFormat
	 * outputFormatter = new SimpleDateFormat("dd/MM/yyyy"); Date date = new
	 * Date(record); String findDate = outputFormatter.format(date);
	 * day.add(findDate); } else if (k == 2) { rateName.add(record); } else {
	 * amount.add(record); ======= >>>>>>> develop } } else {
	 * test_steps.add("Rooms Count <=0 for " + RoomClass +
	 * " for specified date"); reslogger.info("Rooms Count <=0 for " + RoomClass
	 * + " for specified date"); } <<<<<<< HEAD }
	 */
	// verify records now

	/*
	 * public void verifySearchedRoomClassRateDetails(WebDriver driver, String
	 * roomClass, String checkindate, String checkoutdate, HashMap<String,
	 * String> rate, String folioDisplayName, ArrayList<String>test_steps)
	 * throws ParseException { Elements_CPReservation res = new
	 * Elements_CPReservation(driver); RatesGrid ratesGrid = new RatesGrid();
	 * String getRateOnSearchPage = ""; String stay =
	 * Utility.differenceBetweenDates(checkindate, checkoutdate); int
	 * stayDifference = Integer.parseInt(stay); DecimalFormat df = new
	 * DecimalFormat("#.00");
	 * 
	 * ArrayList<String> day = new ArrayList<String>(); ArrayList<String> amount
	 * = new ArrayList<String>(); int count = 1; ArrayList<String> rateName =
	 * new ArrayList<String>(); // j get each day records //k to get each record
	 * of perticular day - 3 records // (day, rate name, amount) for (int j = 1;
	 * j <= stayDifference; j++) { for (int k = 1; k <= 3; k++) { String find =
	 * "(//div[@class='ir-rc-table']/table/thead/following::tbody)[1]/tr[" + j +
	 * "]/td[" + k + "]"; Wait.waitUntilPresenceOfElementLocated(find, driver);
	 * Wait.waitForElementToBeVisibile(By.xpath(find), driver); String record =
	 * driver.findElement(By.xpath(find)).getText(); if (k == 1) { DateFormat
	 * outputFormatter = new SimpleDateFormat("dd/MM/yyyy"); Date date = new
	 * Date(record); String findDate = outputFormatter.format(date);
	 * day.add(findDate); } else if (k == 2) { rateName.add(record); } else {
	 * amount.add(record); } } } // verify records now
	 * 
	 * reslogger.info("dates: " + day); reslogger.info("rateName: " + rateName);
	 * reslogger.info("amount: " + amount);
	 * 
	 * ArrayList<String> foundRate = ratesGrid.getRate(rate, driver,
	 * checkindate, checkoutdate, test_steps);
	 * 
	 * // verify rateFolioName for (int p = 0; p < rateName.size(); p++) {
	 * Assert.assertEquals(rateName.get(p), folioDisplayName); }
	 * test_steps.add("Verified folioDisplayName: " + folioDisplayName);
	 * reslogger.info("Verified folioDisplayName: " + folioDisplayName); //
	 * verify rate grid for (int i = 0; i < foundRate.size(); i++) {
	 * getRateOnSearchPage = amount.get(i).replace("$", "").trim(); String
	 * getRateOnRateGrid = df.format(Double.parseDouble(foundRate.get(i)));
	 * Assert.assertEquals(getRateOnSearchPage, getRateOnRateGrid); }
	 * test_steps.add("Rate verified: " + getRateOnSearchPage);
	 * reslogger.info("Rate verified: " + getRateOnSearchPage); }
	 */
	/*
	 * public boolean clickRoomClassInSearchResultFindRoom(WebDriver driver,
	 * String roomclass, ArrayList<String> test_steps) { Elements_CPReservation
	 * res = new Elements_CPReservation(driver); boolean roomClassPresent =
	 * false; // int resultCounts = res.resultCount.size(); String roomclassLink
	 * = roomclassLink = "(//span[text()='" + roomclass + "' and @title] )"; try
	 * { if (driver.findElements(By.xpath(roomclassLink)).size() > 0) {
	 * roomClassPresent = true;
	 * 
	 * Wait.waitUntilPresenceOfElementLocated(roomclassLink, driver);
	 * Utility.ScrollToElement(driver.findElement(By.xpath(roomclassLink)),
	 * driver); Wait.waitForElementToBeClickable(By.xpath(roomclassLink),
	 * driver);
	 * 
	 * driver.findElement(By.xpath(roomclassLink)).click();
	 * test_steps.add("Click at Room class available link: " + roomclass);
	 * reslogger.info("Click at Room class available link: " + roomclass); } }
	 * catch (Exception e) { test_steps.add("Room class not available " +
	 * roomclass + " for specified date");
	 * reslogger.info("Room class not available " + roomclass +
	 * " for specified date"); } return roomClassPresent; }
	 */

	/*
	 * public void verifyNoRateFoundInSearch(WebDriver driver, String message,
	 * ArrayList<String> test_steps) { Elements_CPReservation res = new
	 * Elements_CPReservation(driver); int resultCounts =
	 * res.resultCount.size(); if (!(resultCounts > 0)) {
	 * Wait.waitUntilPresenceOfElementLocated(OR_Reservation.
	 * NorateCombinationInSearch, driver); String getNoRateComBinationMessage =
	 * res.norateCombinationInSearch.getText();
	 * Assert.assertEquals(getNoRateComBinationMessage.trim(), message,
	 * "Failed to verify message"); test_steps.add("Verify message: " +
	 * message); reslogger.info("Verify message: " + message); } else {
	 * test_steps.
	 * add("No rate combination message not displayed as Other room class comes in search result "
	 * ); reslogger.
	 * info("No rate combination message not displayed as Other room class comes in search result "
	 * ); }
	 * 
	 * } ======= reslogger.info("dates: " + day); reslogger.info("rateName: " +
	 * rateName); reslogger.info("amount: " + amount);
	 * 
	 * ArrayList<String> foundRate = ratesGrid.getRate(rate, driver,
	 * checkindate, checkoutdate, test_steps);
	 * 
	 * // verify rateFolioName for (int p = 0; p < rateName.size(); p++) {
	 * Assert.assertEquals(rateName.get(p), folioDisplayName); }
	 * test_steps.add("Verified folioDisplayName: " + folioDisplayName);
	 * reslogger.info("Verified folioDisplayName: " + folioDisplayName); //
	 * verify rate grid for (int i = 0; i < foundRate.size(); i++) {
	 * getRateOnSearchPage = amount.get(i).replace("$", "").trim(); String
	 * getRateOnRateGrid = df.format(Double.parseDouble(foundRate.get(i)));
	 * Assert.assertEquals(getRateOnSearchPage, getRateOnRateGrid); }
	 * test_steps.add("Rate verified: " + getRateOnSearchPage);
	 * reslogger.info("Rate verified: " + getRateOnSearchPage); }
	 */
	public void verifyNoRateFoundInSearch(WebDriver driver, String message, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		int resultCounts = res.resultCount.size();
		if (!(resultCounts > 0)) {
			Wait.waitUntilPresenceOfElementLocated(OR_Reservation.NorateCombinationInSearch, driver);
			String getNoRateComBinationMessage = res.norateCombinationInSearch.getText();
			Assert.assertEquals(getNoRateComBinationMessage.trim(), message, "Failed to verify message");
			test_steps.add("Verify message: " + message);
			reslogger.info("Verify message: " + message);
		} else {
			test_steps.add("No rate combination message not displayed as Other room class comes in search result ");
			reslogger.info("No rate combination message not displayed as Other room class comes in search result ");
		}

	}

	public ArrayList select_MRBRoomsRatePlan(WebDriver driver, ArrayList test_steps, String RoomClass, String IsAssign,
			String Account, String Adults) throws InterruptedException {

		String[] roomclass = RoomClass.split("\\|");
		String[] adults = Adults.split("\\|");
		int size = adults.length;
		ArrayList al = new ArrayList();
		for (int i = 1; i <= size; i++) {
			String Applypolicy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
			if (driver.findElements(By.xpath(Applypolicy)).size() > 0) {
				Wait.WaitForElement(driver, Applypolicy);
				Wait.wait3Second();
				driver.findElement(By.xpath(Applypolicy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");
			}
			Wait.wait5Second();
			String rm = "//span[text()='Room " + i + " of " + size + "']";
			if (driver.findElement(By.xpath(rm)).isDisplayed()) {
				test_steps.add("Room " + i + " of " + size + " is displayed");
				reslogger.info("Room " + i + " of " + size + " is displayed");
			} else {
				String clickOnPopUpYesBut = "(//div[@class='row']//button[contains(text(),'Yes')])[3]";
				driver.findElement(By.xpath(clickOnPopUpYesBut)).click();
			}
			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1].trim() + "')]/following-sibling::span";
			Wait.WaitForElement(driver, rulessize);
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();

			String room = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../div[2]/span)";
			reslogger.info(room);
			Wait.WaitForElement(driver, room);
			Wait.wait2Second();
			String rooms = driver.findElement(By.xpath(room)).getText();
			reslogger.info(rooms);
			String[] roomsCount = rooms.split(" ");
			int count = Integer.parseInt(roomsCount[0].trim());

			String cost = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/span)";

			Utility.ScrollToElement(driver.findElement(By.xpath(room)), driver);

			cost = driver.findElement(By.xpath(cost)).getText();
			cost = cost.trim();
			cost = cost.substring(1, cost.length());
			reslogger.info("cost : " + cost);
			al.add(cost);
			if (count > 0) {
				test_steps.add("Selecting room class : " + roomclass[i - 1]);
				reslogger.info("Selecting room class : " + roomclass[i - 1]);
				String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select";
				WebElement ele = driver.findElement(By.xpath(sel));
				if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
					Wait.WaitForElement(driver, unAssign);
					driver.findElement(By.xpath(unAssign)).click();
					test_steps.add("Selected room number : Unassigned");
					reslogger.info("Selected room number : Unassigned");

				} else {
					String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select/option";
					reslogger.info(roomnum);
					int count1 = driver.findElements(By.xpath(roomnum)).size();
					Random random = new Random();
					randomNumber = random.nextInt(count1 - 1) + 1;
					reslogger.info("count : " + count1);
					reslogger.info("randomNumber : " + randomNumber);
					Wait.WaitForElement(driver, sel);

					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.wait2Second();
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
							+ randomNumber + "]/a/span";
					Wait.WaitForElement(driver, roomNumber);
					driver.findElement(By.xpath(roomNumber)).click();
				}

				String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();


				String loading = "(//div[@class='ir-loader-in'])[2]";
				int counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
				reslogger.info("Waited to loading symbol");

				reslogger.info("Rule Count : " + ruleCount);
				if (ruleCount > 1) {

					String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";
					counter = 0;
					Wait.wait3Second();
					if (driver.findElements(By.xpath(rules)).size() > 0) {


						driver.findElement(By.xpath(rules)).click();
						test_steps.add(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
						reslogger.info(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

						loading = "(//div[@class='ir-loader-in'])[2]";
						counter = 0;
						while (true) {
							if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
								break;
							} else if (counter == 3) {
								break;
							} else {
								counter++;
								Wait.wait3Second();
							}
						}
					}
				}
				if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
					if (i == 1) {
						String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
						if (driver.findElements(By.xpath(policy)).size() > 0) {
							Wait.WaitForElement(driver, policy);
							driver.findElement(By.xpath(policy)).click();
							test_steps.add("Based on the changes made, new policies are applicable.? : yes");
							reslogger.info("Based on the changes made, new policies are applicable.? : yes");

							loading = "(//div[@class='ir-loader-in'])[2]";
							counter = 0;
							while (true) {
								if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
									break;
								} else if (counter == 3) {
									break;
								} else {
									counter++;
									Wait.wait2Second();
								}
							}
						}
					}
				}
			} else {
				test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
				reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
			}
		}
		return al;
	}

	public void selectGroupAccount(WebDriver driver, ArrayList<String> test_steps, String Account,
			boolean isReplaceGuestInfo, boolean isPolicyApplied) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Account);
		String accountdisplay = "//label[contains(text(),'Account')]//..//i[starts-with(@class,'rightIcon demo-icon icon-pencil')]";
		WebElement ele = driver.findElement(By.xpath(accountdisplay));
		if (!ele.isDisplayed()) {
			if (Account.equalsIgnoreCase("") || Account.isEmpty()) {
				reslogger.info("No Account");
			} else {
				res.CP_NewReservation_Account.sendKeys(Account);
				test_steps.add("Enter Account : " + Account);
				reslogger.info("Enter Account : " + Account);
				Wait.wait2Second();
				String account = "//b[contains(text(),'" + Account.trim() + "')]//..//..//..";
				Wait.WaitForElement(driver, account);
				driver.findElement(By.xpath(account)).click();
				String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]//following-sibling::div//button[contains(text(),'Yes')]";
				String dataNo = "//div[contains(text(),'Do you want to replace the guest info')]//following-sibling::div//button[contains(text(),'No')]";
				Wait.WaitForElement(driver, dataYes);

				assertTrue(
						driver.findElement(By.xpath("//div[contains(text(),'Do you want to replace the guest info')]"))
								.isDisplayed(),
						"Failed To Verify Do you want to replace the guest info popup not displayed");
				test_steps.add(
						"Successfully Verified Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Popup Displayed");
				reslogger.info(
						"Successfully Verified Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Popup Displayed");

				if (isReplaceGuestInfo) {
					driver.findElement(By.xpath(dataYes)).click();

					test_steps.add(
							"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
					reslogger.info(
							"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
					Wait.wait5Second();
					assertTrue(
							driver.findElement(By
									.xpath("//div[contains(text(),'Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?')]"))
									.isDisplayed(),
							"Failed To Verify Based on the account chosen, new policies are applicable popup not displayed");
					test_steps.add(
							"Successfully Verified Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Popup Displayed");
					reslogger.info(
							"Successfully Verified Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Popup Displayed");
					if (isPolicyApplied) {
						String policyYes = "//div[contains(text(),'Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?')]/following-sibling::div//button[contains(text(),'Yes')]";

						// Wait.WaitForElement(driver, policyYes);
						Wait.wait2Second();
						driver.findElement(By.xpath(policyYes)).click();
						test_steps.add(
								"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes");
						reslogger.info(
								"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes");

					} else {
						String policyNo = "//div[contains(text(),'Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?')]/following-sibling::div//button[contains(text(),'No')]";
						// Wait.WaitForElement(driver, policyYes);
						Wait.wait2Second();
						driver.findElement(By.xpath(policyNo)).click();
						test_steps.add(
								"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : No");
						reslogger.info(
								"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : No");
					}
				} else {
					driver.findElement(By.xpath(dataNo)).click();

					test_steps.add(
							"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
					reslogger.info(
							"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
				}
				Wait.wait2Second();

			}
		} else {
			test_steps.add("Account Aleady exists");
			reslogger.info("Account Aleady exists");
		}
	}

	public void verify_errorMessage(WebDriver driver, ArrayList<String> testSteps, String message)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GET_ERROR_MESSAGE);
		Utility.ScrollToViewElementINMiddle(driver, res.getErrorMessage.get(0));
		assertEquals(res.getErrorMessage.get(0).getText().toLowerCase().trim(), message.toLowerCase().trim(),
				"Failed to verified Message");
		testSteps.add("Verified Message <b>" + res.getErrorMessage.get(0).getText() + "</b>");
		reslogger.info("Verified Message " + res.getErrorMessage.get(0).getText());

	}

	public void verifyRoomClassCurrency(WebDriver driver, ArrayList<String> testSteps, String roomClass, String amount)
			throws InterruptedException {
		String path = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + roomClass
				+ "')]" + "//..//..//..//following-sibling::div//div/span[contains(@data-bind,'total')]";
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToViewElementINMiddle(driver, element);
		assertThat(element.getText().trim(), CoreMatchers.containsString(amount.trim()));
		testSteps.add("Verified Amount For Room Class <b>"+roomClass + "--"+element.getText()+"</b>");
		reslogger.info("Verified Amount For Room Class "+roomClass+"--"+element.getText());

	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <calculateRatesAsPerAdultsAndChildCapacity> ' Description:
	 * <This method will calculate rate as per extra adult and child > ' Input
	 * parameters: <WebDriver driver,String ratePerNight, String ratePlanAdult,
	 * String ratePlanChild,String addAdultPerNight, String addChildPerNight,
	 * String roomClassCapacity , String reservationAdult, String
	 * reservationChild> ' Return value:<String> ' Created By: <Gangotri
	 * Sikheria> ' Created On: <12/0/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	private ArrayList<Double> calculationDateWise(HashMap<String, String> ratePerNight,
			HashMap<String, String> addAdultPerNight, HashMap<String, String> addChildPerNight, List<Date> dates,
			int index, String format) throws NumberFormatException, ParseException {
		ArrayList<Double> rateAdultChild = new ArrayList<Double>();
		double ratePerNights = 0.00, adultPerNight = 0.00, childPerNight = 0.00;
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		if (StringUtils.isNumericSpace(ratePerNight.get(Utility.convertDateFormattoString(format, dates.get(index))))) {
			double a = Double
					.parseDouble(ratePerNight.get(Utility.convertDateFormattoString(format, dates.get(index))));
			String doubleValue = df.format(a);
			ratePerNights = Double.parseDouble(doubleValue);
			rateAdultChild.add(ratePerNights);
		} else if (!(StringUtils
				.isNumericSpace(ratePerNight.get(Utility.convertDateFormattoString(format, dates.get(index)))))) {
			ratePerNights = Double
					.parseDouble(ratePerNight.get(Utility.convertDateFormattoString(format, dates.get(index))));
			rateAdultChild.add(ratePerNights);
		}
		if (StringUtils
				.isNumericSpace(addAdultPerNight.get(Utility.convertDateFormattoString(format, dates.get(index))))) {
			double a = Double
					.parseDouble(addAdultPerNight.get(Utility.convertDateFormattoString(format, dates.get(index))));
			String doubleValue = df.format(a);
			adultPerNight = Double.parseDouble(doubleValue);
			rateAdultChild.add(adultPerNight);
		} else if (!(StringUtils
				.isNumericSpace(addAdultPerNight.get(Utility.convertDateFormattoString(format, dates.get(index)))))) {
			adultPerNight = Double
					.parseDouble(addAdultPerNight.get(Utility.convertDateFormattoString(format, dates.get(index))));
			rateAdultChild.add(adultPerNight);
		}
		if (StringUtils
				.isNumericSpace(addChildPerNight.get(Utility.convertDateFormattoString(format, dates.get(index))))) {
			double a = Double
					.parseDouble(addChildPerNight.get(Utility.convertDateFormattoString(format, dates.get(index))));
			String doubleValue = df.format(a);
			childPerNight = Double.parseDouble(doubleValue);
			rateAdultChild.add(childPerNight);
		} else if (!(StringUtils
				.isNumericSpace(addChildPerNight.get(Utility.convertDateFormattoString(format, dates.get(index)))))) {
			childPerNight = Double
					.parseDouble(addChildPerNight.get(Utility.convertDateFormattoString(format, dates.get(index))));
			rateAdultChild.add(childPerNight);
		}

		return rateAdultChild;
	}

	public String calculateRatesAsPerAdultsAndChildCapacity(WebDriver driver, HashMap<String, String> ratePerNight,
			String ratePlanAdult, String ratePlanChild, HashMap<String, String> addAdultPerNight,
			HashMap<String, String> addChildPerNight, String roomClassPersons, String roomClassAdult,
			String reservationAdult, String reservationChild, ArrayList<String> testSteps, String message,
			String roomClass, List<Date> dates, String format)
			throws InterruptedException, NumberFormatException, ParseException {

		double sum = 0.00;
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		ArrayList<Double> rateAdultChild = new ArrayList<Double>();
		String rate = null;
		int reservationTotalAdultAndChild = Integer.parseInt(reservationAdult) + Integer.parseInt(reservationChild);
		if (!reservationAdult.equals("0") && !reservationChild.equals("0")) {
			if (reservationTotalAdultAndChild == Integer.parseInt(roomClassPersons)
					|| reservationTotalAdultAndChild < Integer.parseInt(roomClassPersons)) {
				if (Integer.parseInt(reservationAdult) == Integer.parseInt(ratePlanAdult)
						|| Integer.parseInt(reservationAdult) < Integer.parseInt(ratePlanAdult)) {

					for (int i = 0; i < dates.size() - 1; i++) {
						reslogger.info(ratePerNight);
						rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
								format);
						
						reslogger.info(rateAdultChild);
						int childs = reservationTotalAdultAndChild - Integer.parseInt(ratePlanChild);
						if(childs<=0) {
							childs=0;
						}
						reslogger.info(childs);
						double child = rateAdultChild.get(0) + (childs * rateAdultChild.get(2));
						reslogger.info(child);
						sum = sum + child;
						reslogger.info(sum);
						rate = df.format(sum);

					}
					reslogger.info(rate);
					verifyRoomClassCurrency(driver, testSteps, roomClass, rate);

				} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(ratePlanAdult)
						&& !(Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult))) {
					for (int i = 0; i < dates.size() - 1; i++) {
						reslogger.info(ratePerNight);
						reslogger.info(addAdultPerNight);
						reslogger.info(addChildPerNight);
						reslogger.info(dates);
						rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
								format);
						reslogger.info(rateAdultChild);
						int couldBeChildOrAdult = reservationTotalAdultAndChild - Integer.parseInt(ratePlanChild);
						reslogger.info(couldBeChildOrAdult);
						int adult = Integer.parseInt(reservationAdult) - Integer.parseInt(ratePlanAdult);
						reslogger.info(adult);
						int child = couldBeChildOrAdult - adult;
						reslogger.info(child);
						double totalRate = rateAdultChild.get(0)
								+ ((adult * rateAdultChild.get(1)) + (child * rateAdultChild.get(2)));
						reslogger.info(totalRate);
						sum = sum + totalRate;
						reslogger.info(sum);
						rate = df.format(sum);

					}
					reslogger.info(rate);
					verifyRoomClassCurrency(driver, testSteps, roomClass, rate);

				} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult)) {
					verify_errorMessage(driver, testSteps, message);
				}
			} else if (reservationTotalAdultAndChild > Integer.parseInt(roomClassPersons)) {
				verify_errorMessage(driver, testSteps, message);
			}

		} else if (reservationAdult.equals("0") && Integer.parseInt(reservationChild) > Integer.parseInt(ratePlanChild)
				&& !(Integer.parseInt(reservationChild) > Integer.parseInt(roomClassPersons))) {
			for (int i = 0; i < dates.size() - 1; i++) {
				rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
						format);
				int alwaysChild = Integer.parseInt(reservationChild) - Integer.parseInt(ratePlanChild);
				double child = rateAdultChild.get(0) + (alwaysChild * rateAdultChild.get(2));
				sum = sum + child;
				rate = df.format(sum);

			}
			reslogger.info(rate);
			verifyRoomClassCurrency(driver, testSteps, roomClass, rate);
		} else if (reservationChild.equals("0") && Integer.parseInt(reservationAdult) > Integer.parseInt(ratePlanAdult)
				&& !(Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult))) {
			for (int i = 0; i < dates.size() - 1; i++) {
				rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
						format);
				int alwaysAdult = Integer.parseInt(reservationAdult) - Integer.parseInt(ratePlanAdult);
				double child = rateAdultChild.get(0) + (alwaysAdult * rateAdultChild.get(1));
				sum = sum + child;
				rate = df.format(sum);
			}

			reslogger.info(rate);
			verifyRoomClassCurrency(driver, testSteps, roomClass, rate);
		} else if (reservationAdult.equals("0")
				&& Integer.parseInt(reservationChild) > Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver, testSteps, message);
		} else if (reservationChild.equals("0")
				&& Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult)) {
			verify_errorMessage(driver, testSteps, message);
		}

		else if (reservationAdult.equals("0") && reservationChild.equals("0")) {
			verify_errorMessage(driver, testSteps, message);
		} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult)
				&& Integer.parseInt(reservationChild) > Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver, testSteps, message);
		} else if (reservationAdult.equals("0")
				&& Integer.parseInt(reservationChild) <= Integer.parseInt(ratePlanChild)) {
			for (int i = 0; i < dates.size() - 1; i++) {
				rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
						format);
				sum = sum + rateAdultChild.get(0);
				rate = df.format(sum);
			}
			reslogger.info(rate);
			verifyRoomClassCurrency(driver, testSteps, roomClass, rate);
		} else if (reservationChild.equals("0")
				&& Integer.parseInt(reservationAdult) <= Integer.parseInt(ratePlanAdult)) {
			for (int i = 0; i < dates.size() - 1; i++) {
				rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
						format);
				sum = sum + rateAdultChild.get(0);
				rate = df.format(sum);
			}
			reslogger.info(rate);
			verifyRoomClassCurrency(driver, testSteps, roomClass, rate);
		} else if (Integer.parseInt(reservationAdult) < Integer.parseInt(ratePlanAdult)
				&& Integer.parseInt(reservationChild) < Integer.parseInt(ratePlanChild)) {
			for (int i = 0; i < dates.size() - 1; i++) {
				rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
						format);
				sum = sum + rateAdultChild.get(0);
				rate = df.format(sum);
			}
			reslogger.info(rate);
			verifyRoomClassCurrency(driver, testSteps, roomClass, rate);
		}

		return rate;

	}
public String get_TripSummaryRoomChargesWithoutCurrencyForTapeChart(WebDriver driver, ArrayList<String> test_steps) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.trimSummaryTapeChartReservation);
		String balance = res.trimSummaryTapeChartReservation.getText().replace("$ ", "");
		;
		test_steps.add("TripSummary Room Charges : <b>" + balance + "</b>");
		reslogger.info("TripSummary Room Charges : " + balance);
		return balance;
	}

	public void verifyTripSummaryRoomChargesAfterCreateReservationFromTapeChart(WebDriver driver,
			ArrayList<String> test_steps, String RoomCharges) {
		String getRoomCharges = get_TripSummaryRoomChargesWithoutCurrencyForTapeChart(driver, test_steps);
		try {
		assertEquals(getRoomCharges.trim(), (RoomCharges), "Failed : to Verify Trip Summary Room Changes");
		test_steps.add("Verified TripSummary Room Changes : <b>" + getRoomCharges + "</b>");
		reslogger.info("Verified TripSummary Room Changes : " + getRoomCharges);
		}catch(Error e
				) {
			test_steps.add("<p style=\"color:#00F000\";>Expected Room Charges : "+RoomCharges+" but found "+getRoomCharges+"</p>");
			reslogger.info("Expected Room Charges : "+RoomCharges+" but found "+getRoomCharges);
		}
	}

	/*public HashMap<String, String> getRoomChargesFromFolioBasedOnDates(WebDriver driver, ArrayList<String> test_steps,
            String checkInDate, String checkOutDate, boolean value) throws Exception {
        HashMap<String, String> roomCharges = new HashMap<>();
        includeTaxesinLineItems( driver,  test_steps, value);
        ArrayList<String> dates = Utility.getAllDatesBetweenCheckInOutDates(checkInDate, checkOutDate);
        for (String date : dates) {
         //   String convertedDate = Utility.parseDate(date, "dd/MM/yyyy", "EE MMM dd, yyyy");
          //  String  convertedDate=Utility.parseDate(date, "dd/MM/yyyy", "EE dd MMM yyyy");
          //  String roomChargeXpath = "//span[text()='"+convertedDate+"']/../..//span[text()='Room Charge']/../..//td[@class='lineitem-amount']";
        	String  convertedDate=Utility.parseDate(date, "dd/MM/yyyy", "dd");
        	String roomChargeXpath = "//span[contains(text(),'"+convertedDate+"')]/../..//span[text()='Room Charge']/../..//td[@class='lineitem-amount']";
            String roomCharge = driver.findElement(By.xpath(roomChargeXpath)).getText();
            roomCharge = roomCharge.replace("$ ", "");
            roomCharges.put(date, roomCharge);
        }
        return roomCharges;
    }*/



	public ArrayList<String> checkInCheckOutRuleStatusVerfication(WebDriver driver, String checkInDate,
			String checkOutDate, String adults, String child, String ratePlan, String roomClass,
			ArrayList<String> datesCheckInRuleApplied, ArrayList<String> datesCheckOutRuleApplied)
			throws InterruptedException, ParseException {

		ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		WebElement rulePathStatisfiedElement = null;
		WebElement rulePathBrokenElement = null;

		String rulePathStatisfied = "";
		String rulePathBroken = "";
		String redColor = "rgba(208, 68, 55, 1)";
		String greenColor = "rgba(104, 160, 28, 1)";

		boolean isNoCheckIn = false;
		boolean isNoCheckOut = false;
		boolean isNoCheckInBetweenDates = false;
		boolean isNoCheckOutBetweenDates = false;

		checkInDate(driver, ESTTimeZone.parseDate(checkInDate, "dd/MM/yyyy", "MM/dd/yyyy"));
		checkOutDate(driver, ESTTimeZone.parseDate(checkOutDate, "dd/MM/yyyy", "MM/dd/yyyy"));

		enter_Adults(driver, testSteps, adults);
		enter_Children(driver, testSteps, child);
		select_Rateplan(driver, testSteps, ratePlan, "");
		clickOnFindRooms(driver, testSteps);
		String foundCheckInMonth = "";
		String foundCheckOutMonth = "";
		String foundCheckInDay = "";
		String foundCheckOutDay = "";
		String checkInMonth = "";
		String checkOutMonth = "";
		String checkInDay = "";
		String checkOutDay = "";

		checkInMonth = Utility.parseDate(checkInDate, "dd/MM/yyyy", "MM");
		reslogger.info("Parsed CheckIn Month : " + checkInMonth);

		checkInDay = Utility.parseDate(checkInDate, "dd/MM/yyyy", "dd");
		reslogger.info("Parsed  CheckIn Day : " + checkInDay);

		checkOutMonth = Utility.parseDate(checkOutDate, "dd/MM/yyyy", "MM");
		reslogger.info("Parsed CheckOut Month : " + checkOutMonth);

		checkOutDay = Utility.parseDate(checkOutDate, "dd/MM/yyyy", "dd");
		reslogger.info("Parsed  CheckOut Day : " + checkOutDay);

		for (int i = 0; i < datesCheckInRuleApplied.size(); i++) {

			if (datesCheckInRuleApplied.get(i).equals(checkInDate)) {
				isNoCheckIn = true;
				reslogger.info("isNoCheckIn Rule Applied:" + isNoCheckIn);
				testSteps.add("isNoCheckIn Rule Applied:" + isNoCheckIn);
			}
			if (!isNoCheckIn) {
				// Check In Parsing

				foundCheckInMonth = Utility.parseDate(datesCheckInRuleApplied.get(i), "dd/MM/yyyy", "MM");
				reslogger.info("Parsed CheckIn Month Found : " + foundCheckInMonth);

				foundCheckInDay = Utility.parseDate(datesCheckInRuleApplied.get(i), "dd/MM/yyyy", "dd");
				reslogger.info("Parsed CheckIn Day Found : " + foundCheckInDay);

				if (checkInMonth.equals(foundCheckInMonth)) {

					if (Integer.parseInt(foundCheckInDay) > Integer.parseInt(checkInDay)) {
						isNoCheckInBetweenDates = true;
						reslogger.info("isNoCheckInBetweenDates:" + isNoCheckInBetweenDates);
						testSteps.add("isNoCheckInBetweenDates:" + isNoCheckInBetweenDates);
					}

				}

			}
		}
		for (int j = 0; j < datesCheckOutRuleApplied.size(); j++) {
			if (datesCheckOutRuleApplied.get(j).equals(checkOutDate)) {
				isNoCheckOut = true;
				reslogger.info("isNoCheckOut Rule Applied:" + isNoCheckOut);
				testSteps.add("isNoCheckOut Rule Applied:" + isNoCheckOut);
			}

			if (!isNoCheckOut) {
				// Check Out Parsing

				foundCheckOutMonth = Utility.parseDate(datesCheckOutRuleApplied.get(j), "dd/MM/yyyy", "MM");
				reslogger.info("Parsed CheckOut Month Found : " + foundCheckOutMonth);

				foundCheckOutDay = Utility.parseDate(datesCheckOutRuleApplied.get(j), "dd/MM/yyyy", "dd");
				reslogger.info("Parsed CheckOut Day Found : " + foundCheckOutDay);

				if (checkOutMonth.equals(foundCheckOutMonth)) {

					if (Integer.parseInt(foundCheckOutDay) < Integer.parseInt(checkOutDay) && !isNoCheckOut
							&& Integer.parseInt(foundCheckOutDay) > Integer.parseInt(checkInDay)) {

						isNoCheckOutBetweenDates = true;
						reslogger.info("isNoCheckOutBetweenDates:" + isNoCheckOutBetweenDates);
						testSteps.add("isNoCheckOutBetweenDates:" + isNoCheckOutBetweenDates);
					}
				}
			}
		}

		// Utility.app_logs.info("isNoCheckOut:" + isNoCheckOut);
		// Utility.app_logs.info("isNoCheckIn:" + isNoCheckIn);
		// Utility.app_logs.info("isNoCheckInBetweenDay:" +
		// isNoCheckInBetweenDates);
		// Utility.app_logs.info("isNoCheckOutBetweenDay:" +
		// isNoCheckOutBetweenDates);

		rulePathStatisfied = "(//span[text()='" + roomClass
				+ "'])[2]/following-sibling::span[contains(@data-bind,'text: rules.statisfied')]";
		rulePathBroken = "(//span[text()='" + roomClass
				+ "'])[2]/following-sibling::span[contains(@data-bind,'text: rules.broken')]";

		if ((isNoCheckIn && isNoCheckOut) || (isNoCheckIn && !isNoCheckOut && !isNoCheckOutBetweenDates)
				|| (isNoCheckOut && !isNoCheckIn && !isNoCheckInBetweenDates)) {
			// Check Both Are In Red Color & Both Rule Applied So Just One
			// Path Red->Broken
			try {
				rulePathBrokenElement = driver.findElement(By.xpath(rulePathBroken));
			} catch (Exception e) {
				rulePathBroken = "(//span[text()='" + roomClass
						+ "'])[3]/following-sibling::span[contains(@data-bind,'text: rules.broken')]";
				rulePathBrokenElement = driver.findElement(By.xpath(rulePathBroken));

			}
		}
		// The || Condition for Empty State
		if ((!isNoCheckIn && !isNoCheckOut && isNoCheckOutBetweenDates)
				|| (!isNoCheckIn && !isNoCheckOut && isNoCheckInBetweenDates)
				|| (!isNoCheckIn && isNoCheckInBetweenDates && !isNoCheckOut && !isNoCheckOutBetweenDates)
				|| (!isNoCheckOut && isNoCheckOutBetweenDates && !isNoCheckIn && !isNoCheckInBetweenDates)) {
			// Check Both Are In Green Color & Both Rule Applied So Just One
			// Path Green->Satisfied
			try {
				rulePathStatisfiedElement = driver.findElement(By.xpath(rulePathStatisfied));
			} catch (Exception e) {
				rulePathStatisfied = "(//span[text()='" + roomClass
						+ "'])[3]/following-sibling::span[contains(@data-bind,'text: rules.statisfied')]";
				rulePathStatisfiedElement = driver.findElement(By.xpath(rulePathStatisfied));

			}
		}

		if (isNoCheckIn) {

			if (rulePathBrokenElement != null) {
				assertEquals(rulePathBrokenElement.getCssValue("color"), redColor, "Failed: Color didn't match");
				assertEquals(rulePathBrokenElement.getText().contains("No check-in"), true,
						"Failed: Color didn't match");
				reslogger.info("isNoCheckIn Rule Applied:" + redColor + " Red Color Verified");
				testSteps.add("isNoCheckIn Rule Applied:" + redColor + " Red Color Verified");

			} else if (isNoCheckInBetweenDates) {

				assertEquals(rulePathStatisfiedElement.getCssValue("color"), redColor, "Failed: Color didn't match");
				assertEquals(rulePathStatisfiedElement.getText().contains("No check-in"), true,
						"Failed: Color didn't match");
				reslogger.info("isNoCheckIn Rule Applied:" + redColor + " Red Color Verified");
				testSteps.add("isNoCheckIn Rule Applied:" + redColor + " Red Color Verified");
			}

		} else {

			if (rulePathBrokenElement != null && !isNoCheckOut) {

				assertEquals(rulePathBrokenElement.getCssValue("color"), greenColor, "Failed: Color didn't match");
				assertEquals(rulePathBrokenElement.getText().contains("No check-in"), true,
						"Failed: Color didn't match");
				reslogger.info("isNoCheckIn Rule Applied:" + greenColor + " Green Color Verified");
				testSteps.add("isNoCheckIn Rule Applied:" + greenColor + " Green Color Verified");

			} else if (isNoCheckInBetweenDates) {

				rulePathStatisfiedElement = driver.findElement(By.xpath(rulePathStatisfied));
				assertEquals(rulePathStatisfiedElement.getCssValue("color"), greenColor, "Failed: Color didn't match");
				assertEquals(rulePathStatisfiedElement.getText().contains("No check-in"), true,
						"Failed: Color didn't match");
				reslogger.info("isNoCheckIn Rule Applied:" + greenColor + " Green Color Verified");
				testSteps.add("isNoCheckIn Rule Applied:" + greenColor + " Green Color Verified");
			}

			else if (!isNoCheckInBetweenDates && !isNoCheckIn) {

				reslogger.info("No CheckIn Rule Applied Verified");
				testSteps.add("No CheckIn Rule Applied  Verified");
			}
		}

		if (isNoCheckOut) {

			if (rulePathBrokenElement != null) {
				assertEquals(rulePathBrokenElement.getCssValue("color"), redColor, "Failed: Color didn't match");
				assertEquals(rulePathBrokenElement.getText().contains("No check-out"), true,
						"Failed: Color didn't match");

				reslogger.info("isNoCheckOut Rule Applied:" + redColor + " Red Color Verified");
				testSteps.add("isNoCheckOut Rule Applied:" + redColor + " Red Color Verified");

			} else if (isNoCheckOutBetweenDates) {

				assertEquals(rulePathStatisfiedElement.getCssValue("color"), redColor, "Failed: Color didn't match");
				assertEquals(rulePathStatisfiedElement.getText().contains("No check-out"), true,
						"Failed: Color didn't match");

				reslogger.info("isNoCheckOut Rule Applied:" + redColor + " Red Color Verified");
				testSteps.add("isNoCheckOut Rule Applied:" + redColor + " Red Color Verified");
			}

		} else {

			if (rulePathBrokenElement != null && !isNoCheckIn) {

				assertEquals(rulePathBrokenElement.getCssValue("color"), greenColor, "Failed: Color didn't match");
				assertEquals(rulePathBrokenElement.getText().contains("No check-out"), true,
						"Failed: Color didn't match");
				reslogger.info("isNoCheckOut Rule Applied:" + greenColor + " Green Color Verified");
				testSteps.add("isNoCheckOut Rule Applied:" + greenColor + " Green Color Verified");

			} else if (isNoCheckOutBetweenDates) {

				rulePathStatisfiedElement = driver.findElement(By.xpath(rulePathStatisfied));
				assertEquals(rulePathStatisfiedElement.getCssValue("color"), greenColor, "Failed: Color didn't match");
				assertEquals(rulePathStatisfiedElement.getText().contains("No check-out"), true,
						"Failed: Color didn't match");
				reslogger.info("isNoCheckOut Rule Applied:" + greenColor + " Green Color Verified");
				testSteps.add("isNoCheckOut Rule Applied:" + greenColor + " Green Color Verified");
			}

			else if (!isNoCheckOutBetweenDates && !isNoCheckOut) {
				reslogger.info("No CheckOut Rule Applied Verified");
				testSteps.add("No CheckOut Rule Applied  Verified");
			}

		}
		// Now Select The RoomClass
		String roomClassSelectButton = "(//span[text()='" + roomClass
				+ "'])[2]/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div[2]/div/a[contains(@class,'select-btn')]";

		WebElement selectButton = driver.findElement(By.xpath(roomClassSelectButton));
		selectButton.click();
		if (isNoCheckIn || isNoCheckOut) {
			Wait.WaitForElement(driver, OR_Reservation.RulesPopupHeadingText);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.RulesPopupHeadingText), driver);
			assertEquals(elements.RulesPopupHeadingText.isDisplayed(), true, "Failed:Rule Popup didn't display");

			reslogger.info("Rule Applied PopUp Verified");
			testSteps.add("Rule Applied PopUp Verified");
			if (isNoCheckOut) {
				assertEquals(elements.RulesOverrideText.isDisplayed(), true, "Failed:Rule Popup didn't display");
				assertEquals(elements.RulesOverrideText.getText().contains("No check-out"), true,
						"Failed:Rule Popup didn't display");

			}
			if (isNoCheckIn) {
				assertEquals(elements.RulesOverrideText.isDisplayed(), true, "Failed:Rule Popup didn't display");
				assertEquals(elements.RulesOverrideText.getText().contains("No check-in"), true,
						"Failed:Rule Popup didn't display");

			}
			reslogger.info("Rule Applied PopUp:" + elements.RulesOverrideText.getText() + " Verified");
			testSteps.add("Rule Applied PopUp:" + elements.RulesOverrideText.getText() + " Verified");
			roomClassSelectButton = "(//span[text()='" + roomClass
					+ "'])[2]/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div[2]/div/a[contains(@class,'select-btn')]/span";

		} else {

			roomClassSelectButton = "(//span[text()='" + roomClass
					+ "'])[2]/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div[2]/div/a[contains(@class,'select-btn')]/span";

			Wait.WaitForElement(driver, roomClassSelectButton);
			selectButton = driver.findElement(By.xpath(roomClassSelectButton));
			assertEquals(selectButton.getAttribute("class"), "text selected",
					"Failed: Room class didn't selected/Rule popup shouldn't display");

			reslogger.info("Rule PopUp  didn't appear Verified");
			testSteps.add("Rule PopUp didn't appear Verified");

		}
		return testSteps;

	}		
		public ArrayList<String> verifyRoomClassAvailability(WebDriver driver, String roomClassName){
			
			String path = "//div[@data-bind='foreach: rateDetails']//span[text()='"+roomClassName+"']";
			Wait.WaitForElement(driver, path);
			Wait.waitForElementToBeVisibile(By.xpath(path), driver);
			Wait.waitForElementToBeClickable(By.xpath(path), driver);
			WebElement element = driver.findElement(By.xpath(path));
			
			assertEquals(element.isDisplayed(), true,"Failed: Room class is not showing");
			
			ArrayList<String> testStep =  new ArrayList<>();
			testStep.add("Verified room class "+roomClassName+" is available in new reservation");
			return testStep;
			
		}
		
		public ArrayList<String> verifyNorateCombinationMessage(WebDriver driver) throws InterruptedException {

			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.WaitForElement(driver, OR_Reservation.NoRateCombinationFound);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoRateCombinationFound), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoRateCombinationFound), driver);
			assertEquals(res.NoRateCombinationFound.isDisplayed(), true,"Failed: No rate combination found message is not displaying");
			ArrayList<String> testSteps = new ArrayList<>();
			testSteps.add("Verified message 'No rate combination found! was displaying'");
			return testSteps;

		}
		
	public ArrayList<String> verfyMinStayRuleValue(WebDriver driver, String roomClassName,String minStayRule){
			
			String path = "//div[@data-bind='foreach: rateDetails']//span[text()='"+roomClassName+"']//following-sibling::span[contains(@data-bind,'text: rules')]";
			Wait.WaitForElement(driver, path);
			Wait.waitForElementToBeVisibile(By.xpath(path), driver);
			Wait.waitForElementToBeClickable(By.xpath(path), driver);
			WebElement element = driver.findElement(By.xpath(path));
			ArrayList<String> testStep =  new ArrayList<>();
			
			testStep.add("Expectd min stay rule value: "+minStayRule);
			
			String getValu = element.getText().split(" ")[0].trim();
			testStep.add("Found: "+getValu);
			
			assertEquals(getValu,minStayRule,"Failed: Min stay rule is mismatching");
			testStep.add("Verified Min stay rule in room class "+roomClassName);
			return testStep;
			
		}
	
	public ArrayList<String> isMinStayRule(WebDriver driver, String roomClassName,boolean isMinStaySatisfy){
		
		String path = "//div[@data-bind='foreach: rateDetails']//span[text()='"+roomClassName+"']//following-sibling::span[contains(@data-bind,'text: rules')]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		ArrayList<String> testStep =  new ArrayList<>();
		if (isMinStaySatisfy) {
			assertTrue(element.getAttribute("class").contains("color-green"),"Failed: min stay rule broken");
			testStep.add("Verified min stay rule is satisfied");
		}
		else{
			assertTrue(element.getAttribute("class").contains("color-red"),"Failed: min stay rule is satisfy");
			testStep.add("Verified min stay rule is borken");
		}
		return testStep;
		
	}
	public ArrayList<String> enterAdultsIndex(WebDriver driver, String Adults, int index) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Adults);
		res.listOfAdults.get(index).clear();
		res.listOfAdults.get(index).sendKeys(Adults);
		test_steps.add("Enter No of adults : " + Adults);
		reslogger.info("Enter No of adults : " + Adults);
		return test_steps;
	}


	public ArrayList<String> enterChildrenIndex(WebDriver driver, String Children,int index) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Children);
		res.listOfChildren.get(index).clear();
		res.listOfChildren.get(index).sendKeys(Children);
		test_steps.add("Enter No of Children : " + Children);
		reslogger.info("Enter No of Children : " + Children);
		return test_steps;

	}

	public ArrayList<String> selectRateplanIndex(WebDriver driver, String Rateplan,
			String PromoCode,int index,int index1) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Rateplan);
		res.SelectRateplanName.get(index).click();
		String rate = "//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[contains(text(),'"
				+ Rateplan + "')]/..";
		reslogger.info(rate);
		
		List<WebElement> rates = driver.findElements(By.xpath(rate));
		reslogger.info("rates: "+rates.size());
		Wait.WaitForElement(driver, rate);
	//	driver.findElement(By.xpath(rate)).click();
		test_steps.add("Selecting the rateplan : " + Rateplan);
		reslogger.info("Selecting the rateplan : " + Rateplan);
		rates.get(index1).click();
		if (Rateplan.contains("Promo")) {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PromoCode);
			res.ListOfPromoCode.get(index).clear();
			res.ListOfPromoCode.get(index).sendKeys(PromoCode);
			test_steps.add("Enter promocode : " + PromoCode);
			reslogger.info("Enter promocode : " + PromoCode);
		}
		return test_steps;
	}
	
	public ArrayList<String> noRoomFound(WebDriver driver, String message) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoRoomCombinationFind), driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoRoomCombinationFind), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoRoomCombinationFind), driver);
		
		String text = 		res.NoRoomCombinationFind.getText();
		reslogger.info("text: "+text);
		assertEquals(text, message,"Failed: No rooms are available for Room Search");
		ArrayList<String> testSteps = new ArrayList<>();
		testSteps.add("Verified  message"+text);		
		return testSteps;
		
		
	
	}
	
	
	public void SelectButton(WebDriver driver,String roomClassName){
		
		String path  = "//span[contains(text(),'"+roomClassName+"')]//ancestor::div[@id='rcDtails']//a//span[text()='SELECT']";
		Wait.WaitForElement(driver, path);
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		driver.findElement(By.xpath(path)).click();
	}
	
	public ArrayList<String> ruleViolatePopHeading(WebDriver driver, String night, boolean isVerify,String message) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		
		Wait.wait2Second();
		reslogger.info("pop up size: "+res.listRuleViolatePopUpText.size());
		boolean isSize = res.listRuleViolatePopUpText.size()>0;
		if (isSize) {
			if (isVerify) {
				testSteps.add("Expected message: "+message);
				testSteps.add("Found: "+res.numberOfNights.getText());
				assertEquals(res.numberOfNights.getText(), message,"Failed to verify rule violating popup");
				testSteps.add("Verified number of nights in rule violating popup");
				
			}
			
			res.ruleViolatingYesButton.click();
			testSteps.add("Click on yes button");

			
		}
		return testSteps;
		
		
	
	}




	public HashMap<String, String> getAllChargesFromFolio(WebDriver driver, ArrayList<String> test_steps,
			String checkInDate, String checkOutDate, boolean value) throws Exception {
		HashMap<String, String> charges = getRoomChargesFromFolioBasedOnDates(driver, test_steps, checkInDate, checkOutDate, value);
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String totalCharges = get_TotalCharges(driver, test_steps);
		String payments = get_Payments(driver, test_steps);
		charges.put("TotalCharges", totalCharges);
		charges.put("Payments", payments);
		return charges;
	}

	public void createReservations(WebDriver driver, ArrayList<String> test_steps, String sourceOfRes,
			String accountFirstName, String accountLastName, String checkInDate,
			String checkOutDate, String adultsForRes, String childrenForRes, String ratePlan, String promoCode,
			String roomClass, String isAssign, String isaccount,String accountName, String salutation, String guestFirstName, String guestLastName,
			String phoneNumber, String altenativePhone, String email, String accountType, String address1, String address2,
			String address3, String city, String country, String state, String postalCode, String isGuesProfile,
			String travelAgent,	String marketSegment, String referral, String paymentMethod, String cardNumber,
			String nameOnCard, String cardExpMonthAndYear, ArrayList<String> policyName, ArrayList<String> policyType,
			String isAccountPolicyApplicable, HashMap<String, String> policyNameSelected,String isPolicyCreated, HashMap<String, String> confirmationNOAndStatus,ArrayList<String> roomNumber ) throws Exception {

			Account account = new Account();
			if ( !(Utility.validateString(sourceOfRes)) ) {
				navigateToReservationPage(driver);
				click_NewReservation(driver, test_steps);
			}else if (sourceOfRes.equalsIgnoreCase("accountReservation")) {
				account.clickNewReservationFromAccounts(driver, test_steps, accountType, accountName,
						marketSegment, referral, accountFirstName, accountLastName, phoneNumber, altenativePhone,
						address1, address2, address3, email, city, state, postalCode, policyName,policyType, policyNameSelected, isPolicyCreated);

			}else if (sourceOfRes.equalsIgnoreCase("associateAccount")) {
				navigateToReservationPage(driver);
				click_NewReservation(driver, test_steps);

			}
<<<<<<< HEAD
			
=======
			/*createNormalReservation(driver, test_steps, checkInDate, checkOutDate, adultsForRes, childrenForRes, ratePlan,
					promoCode, roomClass, accountName, salutation, guestFirstName, guestLastName, phoneNumber, altenativePhone,
					email, accountType, address1, address2, address3, city, country, state, postalCode, isGuesProfile,
					referral, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear, isAccountPolicyApplicable, sourceOfRes);		*/
>>>>>>> develop
			if (guestFirstName.split("\\|").length>1) {
				createMRBReservations(driver, test_steps, checkInDate, checkOutDate, adultsForRes, childrenForRes, ratePlan, promoCode,
						roomClass,isAssign,  isaccount, accountName, salutation, guestFirstName, guestLastName, phoneNumber, altenativePhone, email, accountType,
						address1, address2, address3, city, country, state, postalCode, isGuesProfile, referral, paymentMethod, cardNumber,
						nameOnCard, cardExpMonthAndYear, isAccountPolicyApplicable, sourceOfRes, roomNumber );
			} else {
				createNormalReservation(driver, test_steps, checkInDate, checkOutDate, adultsForRes, childrenForRes, ratePlan,
						promoCode, roomClass, accountName, salutation, guestFirstName, guestLastName, phoneNumber, altenativePhone,
						email, accountType, address1, address2, address3, city, country, state, postalCode, isGuesProfile,
						referral, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear, isAccountPolicyApplicable, sourceOfRes);

			}

			click_BookNow(driver, test_steps);
			confirmationNOAndStatus.put("ConfirmationNo", get_ReservationConfirmationNumber(driver, test_steps));
			confirmationNOAndStatus.put("ReservationStatus", get_ReservationStatus(driver, test_steps));
			clickCloseReservationSavePopup(driver, test_steps);
		}



	public boolean verifylenthOfStayRestrictions(WebDriver driver, ArrayList test_steps,boolean verifyLenthOfStayChecked,boolean verifyMinStayCondidtion,boolean verifyMaxStayCondition,HashMap<String, String> addStayofLength,int days) {
		boolean flag=false;
		if(verifyLenthOfStayChecked) {
			if((verifyMinStayCondidtion&&Integer.parseInt(addStayofLength.get("Min").trim())<=days&&!verifyMaxStayCondition)||(!verifyMinStayCondidtion&&verifyMaxStayCondition&&Integer.parseInt(addStayofLength.get("Max").trim())>=days)||(verifyMinStayCondidtion&&verifyMaxStayCondition&&Integer.parseInt(addStayofLength.get("Min").trim())<=days&&verifyMaxStayCondition&&Integer.parseInt(addStayofLength.get("Max").trim())>=days)) {
				flag=true;
			}else {
				flag=false;
			}
		}else {
			flag=true;
		}
		return flag;
	}

	public void navigateToReservationPage(WebDriver driver) throws Exception {
				Navigation navigation = new Navigation();
				try {try {
					navigation.Reservation_Backward_3(driver);
				} catch (Exception e) {
					navigation.Reservation_Backward_1(driver);
				}
				}catch (Exception e) {
					navigation.reservation(driver);
				}
				closeAllOpenedReservations(driver);
			}

	public ArrayList<String> verifyFolioPaymentLine(WebDriver driver, String date, String PayCat, String PaymentDetail,
			String amount, int lineNo) {
		ArrayList<String> test_steps = new ArrayList<String>();
		Elements_Reservation ReservationFolio = new Elements_Reservation(driver);

		String tablePath = "//div[@id='ReservationDetail']//tr[@data-bind='if: $parent.ShouldShowThisItem($data)']["
				+ lineNo + "]";
		String iconPath = tablePath + "/td[@class='text-center lineitems-changestatus']/img";
		String datePath = tablePath + "/td[@class='lineitem-date']/span";
		String categoryPath = tablePath + "/td[@class='lineitem-category']/span";
		String detailPath = tablePath + "/td[@class='lineitem-description']/a";
		String amountPath = tablePath + "/td[@class='lineitem-amount']/span";

		Wait.WaitForElement(driver, tablePath);
		// assertTrue(driver.findElement(By.xpath(tablePath)).isDisplayed(), "MC
		// line didn't added in folio page");

		String GetMCCard = driver.findElement(By.xpath(detailPath)).getText();
		assertTrue(GetMCCard.equalsIgnoreCase(PaymentDetail), "Failed: Payment Detail not matched");
		Utility.app_logs.info("Successfully Verified Folio Line Detail : " + GetMCCard);
		test_steps.add("Successfully Verified Folio Line Detail : " + GetMCCard);

		String cat = driver.findElement(By.xpath(categoryPath)).getText();
		assertTrue(cat.equalsIgnoreCase(PayCat), "Failed: Payment Category not matched");
		Utility.app_logs.info("Successfully Verified Folio Line Category : " + cat);
		test_steps.add("Successfully Verified Folio Line Category : " + cat);

		String payAmount = driver.findElement(By.xpath(amountPath)).getText();
		payAmount = Utility.convertDollarToNormalAmount(driver, payAmount).trim();
		assertEquals(Float.parseFloat(payAmount), Float.parseFloat(amount),
				"Failed: Amount Not Matched in Payment Detail");
		Utility.app_logs.info("Successfully Verified Folio Line amount : " + payAmount);
		test_steps.add("Successfully Verified Folio Line amount : " + payAmount);

		String Date = driver.findElement(By.xpath(datePath)).getText();
		assertEquals(Utility.parseDate(Date, "EEE MMM dd, yyyy", "EEE MMM dd, yyyy"),
				Utility.parseDate(date, "EEE MMM dd, yyyy", "EEE MMM dd, yyyy"), "Failed: Payment Date not matched");
		Utility.app_logs.info("Successfully Verified Folio Line Date : " + Date);
		test_steps.add("Successfully Verified Folio Line Date : " + Date);

		return test_steps;
	}

	public ArrayList<String> verifyFolioPayment(WebDriver driver,String date, String PayCat, String PaymentDetail, String Amount, int days){
		ArrayList<String> test_steps = new ArrayList<String>();
		for(int i=1; i<days; i++) {
			test_steps = verifyFolioPaymentLine(driver, date, PayCat, PaymentDetail, Amount, i);
		}

		return  test_steps;
	}

	public boolean verifyBookingWindowRestrictions(WebDriver driver, ArrayList test_steps,boolean isBookinWindow,String checkInDate,String checkOutDate,HashMap<String, String> bookingWindowRestrictions) throws Exception, ParseException, Exception {
		boolean flag=false;

		if(isBookinWindow) {
		String moreThanDaysCount = bookingWindowRestrictions.get("More than");
		String withInDaysCount = bookingWindowRestrictions.get("Within");
		String currentDay = Utility.getCurrentDate("dd/MM/yyyy");

		ArrayList<String> checkInDates = Utility.splitInputData(checkInDate);
		ArrayList<String> checkOutDates = Utility.splitInputData(checkOutDate);
		if ((Utility.validateString(moreThanDaysCount)) && !(Utility.validateString(withInDaysCount))) {
			String moreThanDaysCountToVerify = Utility.addDays(currentDay, Integer.parseInt(moreThanDaysCount));
			if (!(Utility.checkFirstDateIsGreaterOrEqualDayToSecond(checkInDate, moreThanDaysCountToVerify))) {
				 flag=false;
			} else {
				 flag=true;
			}
		} else if (!(Utility.validateString(moreThanDaysCount)) && (Utility.validateString(withInDaysCount))) {
			int withInDays = Integer.parseInt(withInDaysCount) + 1;
			String withInDaysCountToVerify = Utility.addDays(currentDay, withInDays);
			if (Utility.checkFirstDateIsGreaterOrEqualDayToSecond(withInDaysCountToVerify, checkInDate)) {
				flag=true;
			} else {
				flag=false;
			}
		} else if ((Utility.validateString(moreThanDaysCount)) && (Utility.validateString(withInDaysCount))) {
			String moreThanDaysCountToVerify = Utility.addDays(currentDay, Integer.parseInt(moreThanDaysCount));
			int withInDays = Integer.parseInt(withInDaysCount) + 1;
			String withInDaysCountToVerify = Utility.addDays(currentDay, withInDays);
			if (Utility.checkFirstDateIsGreaterOrEqualDayToSecond(withInDaysCountToVerify, moreThanDaysCountToVerify)) {
				if ((Utility.checkFirstDateIsGreaterOrEqualDayToSecond(checkInDate, moreThanDaysCountToVerify))
						&& Utility.checkFirstDateIsGreaterOrEqualDayToSecond(withInDaysCountToVerify, checkInDate)) {
					flag=true;
				} else {
					flag=false;
				}
			}
		}
		}else {
			flag=true;

		}
		return flag;
	}



	public boolean verifyMinStayPopupComeOrNot(WebDriver driver, ArrayList test_steps,int MinStayRuleValue,int days) {
		boolean minStay=false;
		if(days>=MinStayRuleValue) {
			minStay=true;
		}
		Utility.app_logs.info(days+" "+MinStayRuleValue);
		test_steps.add("Min Stay Pop up should come? " +minStay);
		reslogger.info("Min Stay Pop up should come? " +minStay);
		return minStay;
	}




	public String verifyNoCheckInPopupComeOrNot(WebDriver driver, ArrayList test_steps,ArrayList noCheckInRule,String checkin,String checkout) {

		String noCheckIncolor="";

		if(noCheckInRule.get(0).toString().equalsIgnoreCase("Yes")) {
			noCheckIncolor="Red";
			return noCheckIncolor;
		}

		for(int i=1;i<noCheckInRule.size();i++) {
			if(noCheckInRule.get(i).toString().equalsIgnoreCase("Yes")) {
				noCheckIncolor="Green";
				return noCheckIncolor;
			}
		}

		boolean flag=false;
		for(int i=1;i<noCheckInRule.size();i++) {
			if(noCheckInRule.get(i).toString().equalsIgnoreCase("Yes")) {
				flag=true;
				break;
			}
		}

		if(!flag) {
			noCheckIncolor="No Color";;
		}

		return noCheckIncolor;

	}


	public String verifyNoCheckOutPopupComeOrNot(WebDriver driver, ArrayList test_steps,ArrayList noCheckOutRule,String checkin,String checkout) {

		String noCheckOutcolor="";

		if(noCheckOutRule.get((noCheckOutRule.size())-1).toString().equalsIgnoreCase("Yes")) {
			noCheckOutcolor="Red";
			return noCheckOutcolor;
		}

		for(int i=0;i<(noCheckOutRule.size()-1);i++) {
			if(noCheckOutRule.get(i).toString().equalsIgnoreCase("Yes")) {
				noCheckOutcolor="Green";
				return noCheckOutcolor;
			}
		}

		boolean flag=false;
		for(int i=0;i<(noCheckOutRule.size()-1);i++) {
			if(noCheckOutRule.get(i).toString().equalsIgnoreCase("Yes")) {
				flag=true;
				break;
			}
		}

		if(!flag) {
			noCheckOutcolor="No Color";;
		}

		return noCheckOutcolor;

	}


	public void verifyNoRateCombinationMsg(WebDriver driver,ArrayList<String> test_steps) {

		if(driver.findElements(By.xpath("//div[@class='col-md-12 alert alert-danger ir-alert']")).size()>0) {
			String msg="//div[contains(text(),'No rate combination can be found!')]";
			if(driver.findElements(By.xpath(msg)).size()>0) {
			reslogger.info("Error message Found: No rate combination can be found!");
			test_steps.add("Error message Found: No rate combination can be found!");
			}else {
				System.out.println("NAgi : "+driver.findElement(By.xpath("//div[@class='col-md-12 alert alert-danger ir-alert']")).getText());
				reslogger.info("Error message Found: No rooms are available for Room Search");
				test_steps.add("Error message Found: No rooms are available for Room Search");
			}
		}
	}


	public String verifyMinStayLabel(WebDriver driver,ArrayList<String> test_steps,String RoomClass,int minStayValue) {
		String min="//span[text()='"+RoomClass+"']/../span[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'"+minStayValue+" NIGHT')]";
		Wait.WaitForElement(driver, min);
		reslogger.info("Verified Min Stay Rule label for : "+RoomClass +" as number of days as : "+minStayValue);
		test_steps.add("Verified Min Stay Rule label for : "+RoomClass +" as number of days as : "+minStayValue);
		String color =driver.findElement(By.xpath(min)).getAttribute("class");
		Utility.app_logs.info("Min Stay Rule color : "+color);
		if(color.contains("red")) {
			color="Red";
		}else if(color.contains("green")) {
			color="Green";
		}else{
			color="No Color";
		}
		Utility.app_logs.info("Min Stay Rule color : "+color);
		return color;
	}


	public void select_RoomWithRatePlanRulesValidation(WebDriver driver, ArrayList test_steps, String RoomClass, String IsAssign, String Account,String checkinColor,String checkoutColor,String minStaycolor,int minNights)
			throws InterruptedException {
		reslogger.info(RoomClass);
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";
		reslogger.info(room);
		Wait.WaitForElement(driver, room);

		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				reslogger.info(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				Random random = new Random();
				int randomNumber = random.nextInt(count1 - 1) + 1;
				reslogger.info("count : " + count1);
				reslogger.info("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[text()='"
					+ RoomClass + "']/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			if(driver.findElements(By.xpath(select)).size()>0) {
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();
			}else {
				String selected="//section[@class='ir-roomClassDetails manual-override']//span[text()='"+RoomClass+"']/../../../following-sibling::div/div//span[contains(@data-bind,'SELECT')]/..";
				Wait.WaitForElement(driver, selected);
				driver.findElement(By.xpath(selected)).click();
			}

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 10) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if(minStaycolor.equalsIgnoreCase("Red")) {
					String min="//p[text()='Selecting this room will violate the following rules']/..//div[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'"+minNights+" NIGHT')]";
					Wait.WaitForElement(driver, min);
					test_steps.add("Verified min stay rule in the rules broken pop up as : "+minNights+" night");
					reslogger.info("Verified min stay rule in the rules broken pop up as : "+minNights+" night");
				}

				if(checkinColor.equalsIgnoreCase("Red")) {
					String min="//p[text()='Selecting this room will violate the following rules']/..//div";
					Wait.WaitForElement(driver, min);
					String nocheckin=driver.findElement(By.xpath(min)).getText();
					if(nocheckin.contains("No Check In")) {
					test_steps.add("Verified no check in rule in the rules broken pop up");
					reslogger.info("Verified no check in rule in the rules broken pop up");
					}
				}

				if(checkoutColor.equalsIgnoreCase("Red")) {
					String min="//p[text()='Selecting this room will violate the following rules']/..//div";
					Wait.WaitForElement(driver, min);
					String nocheckin=driver.findElement(By.xpath(min)).getText();
					if(nocheckin.contains("No Check out")) {
					test_steps.add("Verified no check in rule in the rules broken pop up");
					reslogger.info("Verified no check in rule in the rules broken pop up");
					}
				}

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add("Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}
			if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
				try {
				String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
				Wait.WaitForElement(driver, policy);
				driver.findElement(By.xpath(policy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");
				}catch (Exception e) {
					test_steps.add("No Popup Appers with Based on the changes made, new policies are applicable.? : yes");
					reslogger.info("No Popup Appers with Based on the changes made, new policies are applicable.? : yes");
				}
				loading = "(//div[@class='ir-loader-in'])[2]";
				counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
	}

	public String verifyNoCheckinLabel(WebDriver driver, ArrayList<String> test_steps, String roomClass) {
		String noCheckIn = "//span[text()='" + roomClass + "']/../span[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'NO CHECK-IN')]";
		String color="";
		if (driver.findElements(By.xpath(noCheckIn)).size() > 0) {
			Wait.WaitForElement(driver, noCheckIn);
			reslogger.info("Verified noCheckIn label for : " + roomClass);
			test_steps.add("Verified noCheckIn Rule label for : " + roomClass);
			color = driver.findElement(By.xpath(noCheckIn)).getAttribute("class");
			Utility.app_logs.info("noCheckin Rule color : " + color);
			if (color.contains("red")) {
				color = "Red";
			} else if (color.contains("green")) {
				color = "Green";
			} else {
				color = "No Color";
			}
		}else {
			color = "No Color";
		}
		Utility.app_logs.info("noCheckin Rule color : " + color);
		return color;
	}

	public String verifyNoCheckoutLabel(WebDriver driver, ArrayList<String> test_steps, String roomClass) {
		String noCheckOut = "//span[text()='" + roomClass + "']/../span[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'NO CHECK-OUT')]";
		String color="";
		if (driver.findElements(By.xpath(noCheckOut)).size() > 0) {
			Wait.WaitForElement(driver, noCheckOut);
			reslogger.info("Verified noCheckOut label for : " + roomClass);
			test_steps.add("Verified noCheckOut Rule label for : " + roomClass);
			color = driver.findElement(By.xpath(noCheckOut)).getAttribute("class");
			Utility.app_logs.info("noCheckOut Rule color : " + color);
			if (color.contains("red")) {
				color = "Red";
			} else if (color.contains("green")) {
				color = "Green";
			} else {
				color = "No Color";
			}
		}else {
			color = "No Color";
		}
		Utility.app_logs.info("noCheckOut Rule color : " + color);
		return color;
	}


	public ArrayList select_MRBRoomsRatePlanValidation(WebDriver driver, ArrayList test_steps, String RoomClass, String IsAssign,
			String Account, String Adults,ArrayList<String> minStayColorMRB,ArrayList minStayRuleValueMRB,ArrayList<String> nocheckinColorMRB,ArrayList<String> nocheckoutColorMRB) throws InterruptedException {

		String[] roomclass = RoomClass.split("\\|");
		String[] adults = Adults.split("\\|");
		int size = adults.length;
		ArrayList al = new ArrayList();
		for (int i = 1; i <= size; i++) {
			String Applypolicy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
			if (driver.findElements(By.xpath(Applypolicy)).size() > 0) {
				Wait.WaitForElement(driver, Applypolicy);
				Wait.wait3Second();
				driver.findElement(By.xpath(Applypolicy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");
			}
			Wait.wait5Second();
			String rm = "//span[text()='Room " + i + " of " + size + "']";
			if (driver.findElement(By.xpath(rm)).isDisplayed()) {
				test_steps.add("Room " + i + " of " + size + " is displayed");
				reslogger.info("Room " + i + " of " + size + " is displayed");
			} else {
				String clickOnPopUpYesBut = "(//div[@class='row']//button[contains(text(),'Yes')])[3]";
				driver.findElement(By.xpath(clickOnPopUpYesBut)).click();
			}
			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1].trim() + "')]/following-sibling::span";
			Wait.WaitForElement(driver, rulessize);
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();

			String room = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../div[2]/span)";
			reslogger.info(room);
			Wait.WaitForElement(driver, room);
			Wait.wait2Second();
			String rooms = driver.findElement(By.xpath(room)).getText();
			reslogger.info(rooms);
			String[] roomsCount = rooms.split(" ");
			int count = Integer.parseInt(roomsCount[0].trim());

			String cost = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/span)";

			Utility.ScrollToElement(driver.findElement(By.xpath(room)), driver);

			cost = driver.findElement(By.xpath(cost)).getText();
			cost = cost.trim();
			cost = cost.substring(1, cost.length());
			reslogger.info("cost : " + cost);
			al.add(cost);
			if (count > 0) {
				test_steps.add("Selecting room class : " + roomclass[i - 1]);
				reslogger.info("Selecting room class : " + roomclass[i - 1]);
				String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select";
				WebElement ele = driver.findElement(By.xpath(sel));
				if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
					Wait.WaitForElement(driver, unAssign);
					driver.findElement(By.xpath(unAssign)).click();
					test_steps.add("Selected room number : Unassigned");
					reslogger.info("Selected room number : Unassigned");

				} else {
					String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select/option";
					reslogger.info(roomnum);
					int count1 = driver.findElements(By.xpath(roomnum)).size();
					Random random = new Random();
					randomNumber = random.nextInt(count1 - 1) + 1;
					reslogger.info("count : " + count1);
					reslogger.info("randomNumber : " + randomNumber);
					Wait.WaitForElement(driver, sel);

					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.wait2Second();
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
							+ randomNumber + "]/a/span";
					Wait.WaitForElement(driver, roomNumber);
					driver.findElement(By.xpath(roomNumber)).click();
				}

				String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();


				String loading = "(//div[@class='ir-loader-in'])[2]";
				int counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
				reslogger.info("Waited to loading symbol");

				reslogger.info("Rule Count : " + ruleCount);
				if (ruleCount > 1) {

					String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";
					counter = 0;
					Wait.wait3Second();
					if (driver.findElements(By.xpath(rules)).size() > 0) {

						
						Utility.app_logs.info("minStayRuleMRB.get(i-1) : "+minStayColorMRB.get(i-1));
						

						if(minStayColorMRB.get(i-1).equalsIgnoreCase("Red")) {
							String min="//p[text()='Selecting this room will violate the following rules']/..//div[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'"+minStayRuleValueMRB.get(i-1)+" NIGHT')]";
							Wait.WaitForElement(driver, min);
							test_steps.add("Verified min stay rule in the rules broken pop up as : "+minStayRuleValueMRB.get(i-1)+" night");
							reslogger.info("Verified min stay rule in the rules broken pop up as : "+minStayRuleValueMRB.get(i-1)+" night");
						}

						if(nocheckinColorMRB.get(i-1).equalsIgnoreCase("Red")) {
							String min="//p[text()='Selecting this room will violate the following rules']/..//div";
							Wait.WaitForElement(driver, min);
							String nocheckin=driver.findElement(By.xpath(min)).getText();
							if(nocheckin.contains("No Check In")) {
							test_steps.add("Verified no check in rule in the rules broken pop up");
							reslogger.info("Verified no check in rule in the rules broken pop up");
							}
						}

						if(nocheckoutColorMRB.get(i-1).equalsIgnoreCase("Red")) {
							String min="//p[text()='Selecting this room will violate the following rules']/..//div";
							Wait.WaitForElement(driver, min);
							String nocheckin=driver.findElement(By.xpath(min)).getText();
							if(nocheckin.contains("No Check out")) {
							test_steps.add("Verified no check in rule in the rules broken pop up");
							reslogger.info("Verified no check in rule in the rules broken pop up");
							}


						}

						driver.findElement(By.xpath(rules)).click();
						test_steps.add(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
						reslogger.info(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

						loading = "(//div[@class='ir-loader-in'])[2]";
						counter = 0;
						while (true) {
							if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
								break;
							} else if (counter == 3) {
								break;
							} else {
								counter++;
								Wait.wait3Second();
							}
						}
					}
				}

				if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
					if (i == 1) {
						String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
						if (driver.findElements(By.xpath(policy)).size() > 0) {
							Wait.WaitForElement(driver, policy);
							driver.findElement(By.xpath(policy)).click();
							test_steps.add("Based on the changes made, new policies are applicable.? : yes");
							reslogger.info("Based on the changes made, new policies are applicable.? : yes");

							loading = "(//div[@class='ir-loader-in'])[2]";
							counter = 0;
							while (true) {
								if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
									break;
								} else if (counter == 3) {
									break;
								} else {
									counter++;
									Wait.wait2Second();
								}
							}
						}
					}
				}
			} else {
				test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
				reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
			}
		}
		return al;
	}

	public ArrayList<String> verifyRatePlanForMRB(WebDriver driver,ArrayList<String> test_steps,String Rateplan) {
		String[] rate=Rateplan.split("\\|");
		String rateplan="//span[contains(text(),'RATE PLAN: ')]/following-sibling::span";
		ArrayList<String> al = new ArrayList<String>();
		for(int i=0;i<rate.length;i++) {
			rateplan="(//span[contains(text(),'RATE PLAN: ')]/following-sibling::span)["+(i+1)+"]";
			al.add(driver.findElement(By.xpath(rateplan)).getText());

		}
		return al;
	}


	public String verifyRatePlan(WebDriver driver,ArrayList<String> test_steps,String RateplanName) {
		String rateplan="//span[contains(text(),'RATE PLAN:')]/following-sibling::span";
		String ratePlan=driver.findElement(By.xpath(rateplan)).getText();
		return ratePlan;
	}

	public boolean verifyFolioName(WebDriver driver,ArrayList<String> test_steps,String FolioName) {
		String folioName="//a[text()='"+FolioName+"']";
		Utility.app_logs.info(folioName);
		boolean flag=false;
		if(driver.findElements(By.xpath(folioName)).size()>0) {
			flag=true;
		}
		return flag;
	}


	public double calculateRatesAsPerAdultsAndChildCapacityMRB(WebDriver driver,HashMap<String, String> ratePerNight, String ratePlanAdult, String ratePlanChild,HashMap<String, String> addAdultPerNight, HashMap<String, String> addChildPerNight, String roomClassPersons , String roomClassAdult,String reservationAdult, String reservationChild,
			ArrayList<String> testSteps, String message,String roomClass, List<Date> dates, String format) throws InterruptedException, NumberFormatException, ParseException
	{

		double sumValue=0.00;
		 DecimalFormat df = new DecimalFormat("0.00");
		 df.setMaximumFractionDigits(2);
		ArrayList<Double> rateAdultChild= new ArrayList<Double>();
		double rate=0.00;
		int reservationTotalAdultAndChild= Integer.parseInt(reservationAdult)+ Integer.parseInt(reservationChild);

		if(!reservationAdult.equals("0") && !reservationChild.equals("0")){
		  if(Integer.parseInt(reservationAdult)<=Integer.parseInt(ratePlanAdult) &&  reservationTotalAdultAndChild<=Integer.parseInt(ratePlanChild)) {
			  for(int i=0;i<dates.size()-1;i++)
				{
					rateAdultChild= calculationDateWise(ratePerNight,addAdultPerNight,addChildPerNight, dates, i,format);
					sumValue=sumValue+rateAdultChild.get(0);
					rate=sumValue;
				}
				reslogger.info(rate);
				//verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));

		  }
		  else if(Integer.parseInt(reservationAdult)<=Integer.parseInt(ratePlanAdult) && reservationTotalAdultAndChild>Integer.parseInt(ratePlanChild) && !(reservationTotalAdultAndChild>Integer.parseInt(roomClassPersons))) {
			  int child=reservationTotalAdultAndChild-Integer.parseInt(ratePlanChild);
			  for(int i=0;i<dates.size()-1;i++)
				{
					rateAdultChild= calculationDateWise(ratePerNight,addAdultPerNight,addChildPerNight, dates, i,format);
					double  alwaysChild=rateAdultChild.get(0)+(child*rateAdultChild.get(2));
					 sumValue=sumValue+alwaysChild;
					   	rate=sumValue;
				}
				reslogger.info(rate);
				//verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));
		  }
			  else if(Integer.parseInt(reservationAdult)>Integer.parseInt(ratePlanAdult)&& Integer.parseInt(reservationChild)<=Integer.parseInt(ratePlanAdult) &&!(Integer.parseInt(reservationAdult)>Integer.parseInt(roomClassAdult))){
			  int adult= Integer.parseInt(reservationAdult)-Integer.parseInt(ratePlanAdult);
			  for(int i=0;i<dates.size()-1;i++){
				  rateAdultChild= calculationDateWise(ratePerNight,addAdultPerNight,addChildPerNight, dates, i,format);
				  double  alwaysAdult=rateAdultChild.get(0)+(adult*rateAdultChild.get(1));
				  sumValue=sumValue+alwaysAdult;
				   	rate=sumValue;
			  }
			  reslogger.info(rate);
			 //verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));
		  }else if(Integer.parseInt(reservationAdult)>Integer.parseInt(ratePlanAdult) && reservationTotalAdultAndChild<=Integer.parseInt(ratePlanChild) &&!(Integer.parseInt(reservationAdult)>Integer.parseInt(roomClassAdult))) {
			  int adult= Integer.parseInt(reservationAdult)-Integer.parseInt(ratePlanAdult);
			  for(int i=0;i<dates.size()-1;i++){
				  rateAdultChild= calculationDateWise(ratePerNight,addAdultPerNight,addChildPerNight, dates, i,format);
				  double  alwaysAdult=rateAdultChild.get(0)+(adult*rateAdultChild.get(1));
				  sumValue=sumValue+alwaysAdult;
				   	rate=sumValue;
			  }
			  reslogger.info(rate);
			// verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));
		  }
		  else if(Integer.parseInt(reservationAdult)>Integer.parseInt(ratePlanAdult) && reservationTotalAdultAndChild>Integer.parseInt(ratePlanChild) && !(Integer.parseInt(reservationAdult)>Integer.parseInt(roomClassAdult)) && !(reservationTotalAdultAndChild>Integer.parseInt(roomClassPersons) )) {
			  int adult= Integer.parseInt(reservationAdult)-Integer.parseInt(ratePlanAdult);
			  int child=reservationTotalAdultAndChild-Integer.parseInt(ratePlanChild);
			  if(adult==child) {
				  for(int i=0;i<dates.size()-1;i++){
					  rateAdultChild= calculationDateWise(ratePerNight,addAdultPerNight,addChildPerNight, dates, i,format);
					  double  alwaysAdult=rateAdultChild.get(0)+(adult*rateAdultChild.get(1));
					  sumValue=sumValue+alwaysAdult;
					   	rate=sumValue;
				  }
			  }else if(child>adult) {
				  int newChild=child-adult;
				  for(int i=0;i<dates.size()-1;i++){
					  rateAdultChild= calculationDateWise(ratePerNight,addAdultPerNight,addChildPerNight, dates, i,format);
					  double  couldBeChildAndAdult=rateAdultChild.get(0)+(adult*rateAdultChild.get(1))+(newChild*rateAdultChild.get(2));
					  sumValue=sumValue+couldBeChildAndAdult;
					   	rate=sumValue;
				  }
			  }

			  reslogger.info(rate);
			// verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));
		  }else if(Integer.parseInt(reservationAdult)==Integer.parseInt(ratePlanAdult) && reservationTotalAdultAndChild>Integer.parseInt(ratePlanChild) && !(reservationTotalAdultAndChild>Integer.parseInt(roomClassPersons) )) {
			  int child=reservationTotalAdultAndChild-Integer.parseInt(ratePlanChild);
			  for(int i=0;i<dates.size()-1;i++){
				  rateAdultChild= calculationDateWise(ratePerNight,addAdultPerNight,addChildPerNight, dates, i,format);
				  double  alwaysChild=rateAdultChild.get(0)+(child*rateAdultChild.get(2));
				  sumValue=sumValue+alwaysChild;
				   	rate=sumValue;
			  }
			  reslogger.info(rate);
			//verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));
		  }
		}else if(reservationAdult.equals("0") && reservationChild.equals("0")){
			verify_errorMessage(driver,testSteps,message);
		}else if(reservationAdult.equals("0") && Integer.parseInt(reservationChild)>Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver,testSteps,message);
		}else if(Integer.parseInt(reservationAdult)>Integer.parseInt(roomClassAdult) &&  reservationChild.equals("0")) {
			verify_errorMessage(driver,testSteps,message);
		}else if(Integer.parseInt(reservationAdult)>Integer.parseInt(roomClassAdult) &&  Integer.parseInt(reservationChild)>Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver,testSteps,message);
		}else if(Integer.parseInt(reservationAdult)<Integer.parseInt(roomClassAdult) &&  Integer.parseInt(reservationChild)>Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver,testSteps,message);
		}else if(Integer.parseInt(reservationAdult)>Integer.parseInt(roomClassAdult) &&  Integer.parseInt(reservationChild)<Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver,testSteps,message);
		}
		return rate;

	}


	public ArrayList<String> getAllFolioRoomChargeDates(WebDriver driver, String returnFormat){
		ArrayList<String> dates = new ArrayList<String>();

		for(WebElement el : driver.findElements(By.xpath("//td[@class='lineitem-category']/span[contains(text(),'Room Charge')]/../preceding-sibling::td[@class='lineitem-date']//span"))) {
			dates.add(Utility.parseDate(el.getText(), "EEE MMM dd, yyyy", returnFormat));
		}

		return dates;
	}

	public HashMap<String, ArrayList<String>> getRoomClassFolioWiseRoomChargeDates(WebDriver driver, ArrayList test_steps,ArrayList<String> roomClassList, ArrayList RoomAbbri, String IsAssign,
			ArrayList Rooms, String returnFormat) throws InterruptedException {
		test_steps.add("*******************  Folio ROOM CHARGES DATES **********************");
		reslogger.info("*******************  Folio ROOM CHARGES DATES **********************");
		String abb = null;
		String roomnumber = null;
		HashMap<String, ArrayList<String>> map = new HashMap<String, ArrayList<String>>();
		reslogger.info(RoomAbbri.size());
		for (int i = 0; i < RoomAbbri.size(); i++) {
			abb = RoomAbbri.get(i).toString();

			String[] abbrivation = abb.split(":");
			
//			roomnumber = roomnumber.toString();
			String folio = null;
		//	Utility.app_logs.info("rooomnoddd : " + rooomno[i]);
//			Utility.app_logs.info("roomnumber : " + roomnumber);
			String folioSize = "//button[contains(@title,'Guest')]";
			Wait.WaitForElement(driver, folioSize);
			driver.findElement(By.xpath(folioSize)).click();
			Wait.wait2Second();

			if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps
							.add("Folio is present : " + "Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]);
					reslogger
							.info("Folio is present : " + "Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]);

					driver.findElement(By.xpath(folio)).click();
					String roomCahrge = "//span[text()='Room Charge']";

				}
			} else if(Rooms.size()>0) {
				roomnumber = Rooms.get(i).toString();
				String[] rooomno = roomnumber.split(":");
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim()
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps.add(
							"Folio is present : " + "Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim());
					reslogger.info(
							"Folio is present : " + "Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim());

					driver.findElement(By.xpath(folio)).click();


				}
			}
			map.put(roomClassList.get(i), getAllFolioRoomChargeDates(driver, returnFormat));
		}
		return map;
	}

//	public HashMap<String, ArrayList<String>> getRoomClassFolioWiseRoomChargeDates(WebDriver driver,ArrayList<String> roomClassList,ArrayList RoomAbbri, String returnFormat) throws InterruptedException{
//		HashMap<String, ArrayList<String>> map = new HashMap<String, ArrayList<String>>();
//
//		for(String roomClass : roomClassList) {
//
//			for (int i = 0; i < RoomAbbri.size(); i++) {
//				String abb = RoomAbbri.get(i).toString();
//
//				String[] abbrivation = abb.split(":");
//
//				String folio = null;
//
//				String folioSize = "//button[contains(@title,'Guest')]";
//				Wait.WaitForElement(driver, folioSize);
//				driver.findElement(By.xpath(folioSize)).click();
//				Wait.wait2Second();
//
//				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]
//						+ "')]";
//				reslogger.info(folio);
//				if (driver.findElements(By.xpath(folio)).size() > 0) {
//					test_steps
//							.add("Folio is present : " + "Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]);
//					reslogger
//							.info("Folio is present : " + "Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]);
//
//					driver.findElement(By.xpath(folio)).click();
//
//				}
//			}
//
//			map.put(roomClass, getAllFolioRoomChargeDates(driver, returnFormat));
//		}
//
//		return map;
//	}

	public String getFolioLineItemRoomCharge(WebDriver driver, String date, String format){
		String path = "//td[@class='lineitem-category']/span[contains(text(),'Room Charge')]/../preceding-sibling::td[@class='lineitem-date']//span[text()='"+Utility.parseDate(date, format, "EEE MMM dd, yyyy")+"']/../following-sibling::td[@class='lineitem-amount']/span";
		return driver.findElement(By.xpath(path)).getText();

	}

	public HashMap<String ,HashMap<String ,String> > getRoomClassWiseFolioRoomChargeBasedOnDates(WebDriver driver, ArrayList<String> roomClasses, HashMap<String, ArrayList<String>> dates, String dateFormat, ArrayList RoomAbbri, String IsAssign,
			ArrayList Rooms) throws InterruptedException{
		HashMap<String ,HashMap<String ,String> > roomCharges = new HashMap<String, HashMap<String,String>>();
		String abb = null;
		String roomnumber = null;
		int i = 0;
		for(String roomClass : roomClasses) {
			ArrayList<String> datesList = dates.get(roomClass);
			HashMap<String ,String> dateWiseCharges = new HashMap<String, String>();
			abb = RoomAbbri.get(i).toString();
			//roomnumber = Rooms.get(i).toString();
			String[] abbrivation = abb.split(":");
//			String[] rooomno = roomnumber.split(":");
//			roomnumber = roomnumber.toString();
			String folio = null;
//			Utility.app_logs.info("rooomnoddd : " + rooomno[i]);
//			Utility.app_logs.info("roomnumber : " + roomnumber);
			String folioSize = "//button[contains(@title,'Guest')]";
			Wait.WaitForElement(driver, folioSize);
			driver.findElement(By.xpath(folioSize)).click();
			Wait.wait2Second();

			if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps
							.add("Folio is present : " + "Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]);
					reslogger
							.info("Folio is present : " + "Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]);

					driver.findElement(By.xpath(folio)).click();
					String roomCahrge = "//span[text()='Room Charge']";

				}
			} else if(Rooms.size()>0) {
				roomnumber = Rooms.get(i).toString();
				String[] rooomno = roomnumber.split(":");
				Utility.app_logs.info("rooomnoddd : " + rooomno[i]);
				Utility.app_logs.info("roomnumber : " + roomnumber);
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim()
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps.add(
							"Folio is present : " + "Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim());
					reslogger.info(
							"Folio is present : " + "Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim());

					driver.findElement(By.xpath(folio)).click();


				}

			} i++;
			for(String date : datesList) {
				String foundRoomCharge = Utility.removeDollarBracketsAndSpaces(getFolioLineItemRoomCharge(driver, date, dateFormat));

				test_steps.add("Found Room Charge : " + foundRoomCharge + " Where Date is : " + date + " and RoomClass is : "+ roomClass);
				reslogger.info("Found Room Charge : " + foundRoomCharge + " Where Date is : " + date + " and RoomClass is : "+ roomClass);
				dateWiseCharges.put(date, foundRoomCharge);
			}
			roomCharges.put(roomClass, dateWiseCharges);
		}


		return roomCharges;
	}
	public String[] calculateCancellationFee(String payments, String roomCharge) {

		DecimalFormat df = new DecimalFormat("0.00"); df.setMaximumFractionDigits(2);

		float paid = Float.parseFloat(payments);
		float charge = Float.parseFloat(roomCharge);

		String [] decision = new String [2];
		
		if(paid==charge) {
			decision [0] = "alreadyPaid";
		}else if(paid>charge) {
			decision [0] = "Refund";
			decision[1] = df.format(paid - charge);
		}else if(paid<charge) {
			decision [0] = "Capture";
			decision[1] = df.format(charge - paid);
		}

		return decision;

	}

	public void createReservation(WebDriver driver, ArrayList<String> test_steps, String sourceOfRes,
		String accountFirstName, String accountLastName, String checkInDate,
		String checkOutDate, String adultsForRes, String childrenForRes, String ratePlan, String promoCode,
		String roomClass, String accountName, String salutation, String guestFirstName, String guestLastName,
		String phoneNumber, String altenativePhone, String email, String accountType, String address1, String address2,
		String address3, String city, String country, String state, String postalCode, String isGuesProfile,
		String travelAgent,	String marketSegment, String referral, String paymentMethod, String cardNumber,
		String nameOnCard, String cardExpMonthAndYear, String policyToValidate,
		String isAccountPolicyApplicable) throws Exception {

		Account account = new Account();
		if ( !(Utility.validateString(sourceOfRes)) ) {
			navigateToReservationPage(driver);
			click_NewReservation(driver, test_steps);
		}else if (sourceOfRes.equalsIgnoreCase("accountReservation")) {
			account.clickNewReservationFromAccount(driver, test_steps, accountType, accountName,
					marketSegment, referral, accountFirstName, accountLastName, phoneNumber, altenativePhone,
					address1, address2, address3, email, city, state, postalCode, policyToValidate);

		}else if (sourceOfRes.equalsIgnoreCase("associateAccount")) {
			navigateToReservationPage(driver);
			click_NewReservation(driver, test_steps);

		}
		if (guestFirstName.split("\\|").length>1) {
			createMRBReservation(driver, test_steps, checkInDate, checkOutDate, adultsForRes, childrenForRes, ratePlan, promoCode,
					roomClass, accountName, salutation, guestFirstName, guestLastName, phoneNumber, altenativePhone, email, accountType,
					address1, address2, address3, city, country, state, postalCode, isGuesProfile, referral, paymentMethod, cardNumber,
					nameOnCard, cardExpMonthAndYear, isAccountPolicyApplicable, sourceOfRes);
		} else {
			createNormalReservation(driver, test_steps, checkInDate, checkOutDate, adultsForRes, childrenForRes, ratePlan,
					promoCode, roomClass, accountName, salutation, guestFirstName, guestLastName, phoneNumber, altenativePhone,
					email, accountType, address1, address2, address3, city, country, state, postalCode, isGuesProfile,
					referral, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear, isAccountPolicyApplicable, sourceOfRes);

		}

		click_BookNow(driver, test_steps);
		get_ReservationConfirmationNumber(driver, test_steps);
		get_ReservationStatus(driver, test_steps);
		clickCloseReservationSavePopup(driver, test_steps);
		}



	public void closeAllOpenedReservations(WebDriver driver) throws InterruptedException {
		String close = "//ul[@class='sec_nav']//li[5]//i";
		int size = driver.findElements(By.xpath(close)).size();
		if (size>0) {
			do {
				try {
				
				//Wait.waitForElementToBeClickable(By.xpath(close), driver);
				Utility.ScrollToElement(driver.findElement(By.xpath(close)), driver);
				driver.findElement(By.xpath(close)).click();
				size = driver.findElements(By.xpath(close)).size();
				}catch(Exception e) {
					close = "(//ul[@class='sec_nav']//li[5]//i)[2]";	
					Utility.ScrollToElement(driver.findElement(By.xpath(close)), driver);
					driver.findElement(By.xpath(close)).click();
					size = driver.findElements(By.xpath(close)).size();
				}
			} while (size>0);			

		}
	}

	private void createNormalReservation(WebDriver driver, ArrayList<String> test_steps, String checkInDate,
			String checkOutDate, String adultsForRes, String childrenForRes, String ratePlan, String promoCode,
			String roomClass, String account, String salutation, String guestFirstName, String guestLastName,
			String phoneNumber, String altenativePhone, String email, String accountType, String address1,
			String address2, String address3, String city, String country, String state, String postalCode,
			String isGuesProfile, String referral, String paymentMethod, String cardNumber, String nameOnCard,
			String cardExpMonthAndYear, String isAccountPolicyApplicable, String sourceOfRes) throws Exception {
		test_steps.add("============== Creating a new reservation ==============");
		select_CheckInDate(driver, test_steps, checkInDate);
		select_CheckoutDate(driver, test_steps, checkOutDate);
		enter_Adults(driver, test_steps, adultsForRes);
		enter_Children(driver, test_steps, childrenForRes);
		select_Rateplan(driver, test_steps, ratePlan, promoCode);
		click_FindRooms(driver, test_steps);
		ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass);
		selectRoomToReserve(driver, test_steps, roomClass, rooms.get(0));
		if (Utility.validateString(account)) {
			if (sourceOfRes.equalsIgnoreCase("accountReservation")) {
				clickYesOrNoOnPolicyChangePopup(driver, test_steps, isAccountPolicyApplicable);
				click_Next(driver, test_steps);
				enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
				if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
					enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
				}
			}else if (sourceOfRes.equalsIgnoreCase("associateAccount")) {
				click_Next(driver, test_steps);
			if ( (accountType.equalsIgnoreCase("Corporate/Member Accounts"))
					|| (accountType.equalsIgnoreCase("Unit Owners"))) {
				clickYesOrNoOnPolicyChangePopup(driver, test_steps, isAccountPolicyApplicable);
				enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
				if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
					enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
				}
			}else if ( (accountType.equalsIgnoreCase("Travel Agent")) ) {
				enter_MarketSegmentDetails(driver, test_steps, account, "", referral);
				enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
				if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
					enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
				}
			}else if ( (accountType.equalsIgnoreCase("House Account")) ) {
				select_HouseAccoutAsPayment(driver, test_steps, account);
				enter_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName,
						phoneNumber, altenativePhone, email, "", accountType, address1, address2, address3, city,
						country, state, postalCode, isGuesProfile);
				if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
					enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
				}
			}else if ( (accountType.equalsIgnoreCase("Gift Certificate")) ) {
//					select_HouseAccoutAsPayment(driver, test_steps, account);
				}
			}
		}else {
			click_Next(driver, test_steps);
			enter_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName,
					phoneNumber, altenativePhone, email, account, accountType, address1, address2, address3, city,
					country, state, postalCode, isGuesProfile);
					if (Utility.validateString(paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
					}
					enter_MarketSegmentDetails(driver, test_steps, "", "", referral);
				}
	}

	private void createMRBReservation(WebDriver driver, ArrayList<String> test_steps, String checkInDate,
			String checkOutDate, String adultsForRes, String childrenForRes, String ratePlan, String promoCode,
			String roomClass, String account, String salutation, String guestFirstName, String guestLastName,
			String phoneNumber, String altenativePhone, String email, String accountType, String address1,
			String address2, String address3, String city, String country, String state, String postalCode,
			String isGuesProfile, String referral, String paymentMethod, String cardNumber, String nameOnCard,
			String cardExpMonthAndYear, String isAccountPolicyApplicable, String sourceOfRes) throws Exception {
		test_steps.add("============== Creating an MRB reservation ==============");
		select_Dates(driver, test_steps, checkInDate, checkOutDate, adultsForRes, childrenForRes, ratePlan, "","");
		clickOnFindRooms(driver, test_steps);
		if (Utility.validateString(account)) {
			if (sourceOfRes.equalsIgnoreCase("accountReservation")) {
				ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[0]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
				clickYesOrNoOnPolicyChangePopup(driver, test_steps, isAccountPolicyApplicable);
				rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
				click_Next(driver, test_steps);
				enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
				if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
					enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
				}
			}else if (sourceOfRes.equalsIgnoreCase("associateAccount")) {
				ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[0]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
				rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
				click_Next(driver, test_steps);

				if ( (accountType.equalsIgnoreCase("Corporate/Member Accounts"))
						|| (accountType.equalsIgnoreCase("Unit Owners"))) {
					associateAccountInReservation(driver, test_steps, account, accountType);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
					}
				}else if ( (accountType.equalsIgnoreCase("Travel Agent")) ) {
					enter_MarketSegmentDetails(driver, test_steps, account, "", referral);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
					}
				}else if ( (accountType.equalsIgnoreCase("House Account")) ) {
					select_HouseAccoutAsPayment(driver, test_steps, account);
					enter_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName,
							phoneNumber, altenativePhone, email, "", accountType, address1, address2, address3, city,
							country, state, postalCode, isGuesProfile);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
					}
				}else if ( (accountType.equalsIgnoreCase("Gift Certificate")) ) {
//					select_HouseAccoutAsPayment(driver, test_steps, account);
				}
			}
		}else {
			ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[0]);
			selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
			rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
			selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
			click_Next(driver, test_steps);
			ArrayList<String> roomNumber = new ArrayList<>();
			enter_MRB_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, "", accountType, address1, address2, address3, city, country, state, postalCode,
					isGuesProfile, "", "",roomNumber);
			if((account.equalsIgnoreCase("")||account.isEmpty())) {
				enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
			}
			enter_MarketSegmentDetails(driver, test_steps, "", "", referral);
		}
	}

	private void clickYesOrNoOnPolicyChangePopup(WebDriver driver, ArrayList<String> test_steps,
			String isAccountPolicyApplicable) {
		if (isAccountPolicyApplicable.equalsIgnoreCase("Yes")) {
			clickNoInPolicyPopUp(driver);
			test_steps.add("Clicking No button from policy changes popup");
			reslogger.info("Clicking No button from policy changes popup");	
		}else if (isAccountPolicyApplicable.equalsIgnoreCase("No")) {
			clickYesInPolicyPopUp(driver);
			test_steps.add("Clicking Yes button from policy changes popup");
			reslogger.info("Clicking Yes button from policy changes popup");	
		}
	}

	public void selectRoomToReserve(WebDriver driver, ArrayList<String> test_steps, String RoomClass,
			String roomNumber) throws InterruptedException {
		String availability = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";

		Wait.waitForElementToBeVisibile(By.xpath(availability), driver);
		int availableRooms = Integer.parseInt(driver.findElement(By.xpath(availability)).getText().split(" ")[0].trim());
		if (availableRooms > 0) {
			String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
			Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
			driver.findElement(By.xpath(expand)).click();

			String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass
					+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='"
					+ roomNumber + "'])";
			Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
			driver.findElement(By.xpath(assignRoomNo)).click();
			test_steps.add("Selecting room <b>" + roomNumber + "</b> from <b>" + RoomClass + "</b> room class");
			reslogger.info("Selecting room " + roomNumber + " from " + RoomClass + " room class");


			String selectButton = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			List<WebElement> selectButtons = driver.findElements(By.xpath(selectButton));
			if (selectButtons.size() == 1) {
				driver.findElement(By.xpath(selectButton)).click();
			}
		}else {
			test_steps.add("Rooms are not available to select for <b>"+RoomClass+"</b>");
		}
//			Wait.waitForElementToBeInvisibile(By.xpath("(//div[@class='ir-loader-in'])[2]"), driver);
	}

		public void associateAccountInReservation(WebDriver driver, ArrayList<String> test_steps, String accountName,
			String accountType)	throws Exception {
		try {
			Elements_CPReservation reservationPage = new Elements_CPReservation(driver);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Account), driver);
			reservationPage.CP_NewReservation_Account.clear();
			reservationPage.CP_NewReservation_Account.sendKeys(accountName);
			test_steps.add("Entering Account name : <b>" + accountName + "</b>");
			reslogger.info("Entering Account name : <b>" + accountName + "</b>");
			String account = "//b[contains(text(),'" + accountName.trim() + "')]/../../..";
			Wait.waitForElementToBeVisibile(By.xpath(account), driver);
			driver.findElement(By.xpath(account)).click();
			String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]"
					+ "/following-sibling::div//button[contains(text(),'Yes')]";
			Wait.waitForElementToBeVisibile(By.xpath(dataYes), driver);
			driver.findElement(By.xpath(dataYes)).click();
			test_steps.add("Do you want to replace the guest info, payment method, marketing info and notes"
					+ " in this reservation with the information from the account? Clicking yes will save all "
					+ "the account info to the reservation. : Yes");
			reslogger.info("Do you want to replace the guest info, payment method, marketing info and notes"
					+ " in this reservation with the information from the account? Clicking yes will save all "
					+ "the account info to the reservation. : Yes");

		} catch (Exception e) {

			Utility.app_logs.info(e);
		}		
	}

	public ArrayList<String> getAllRoomNumbersFromRoomClassDropDown(WebDriver driver, ArrayList<String> test_steps,
			String roomClass) throws InterruptedException {
		ArrayList<String> returnNumbers = new ArrayList<>();
		String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ roomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
		Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
		WebElement element= driver.findElement(By.xpath(expand));
		Utility.ScrollToElement(element, driver);
		Utility.clickThroughJavaScript(driver, element);
		//driver.findElement(By.xpath(expand)).click();
		String list = "//span[contains(text(),'"+roomClass+"')]/../../../following-sibling::div/div"
				+ "/select/following-sibling::div//ul//span[@class='text']";
		List<WebElement> roomNumbers = driver.findElements(By.xpath(list));
		for (WebElement webElement : roomNumbers) {
			String roomNumber = webElement.getText();
			if ( !(roomNumber.equalsIgnoreCase("Unassigned")) ) {
				returnNumbers.add(roomNumber);
			}else if (roomNumber.equalsIgnoreCase("VirtualRoom")) {
				returnNumbers.add(roomNumber);
			}
		}
		driver.findElement(By.xpath(expand)).click();
		return returnNumbers;

	}



//	public void verify_FolioPayment(WebDriver driver, ArrayList<String> testSteps,String expectedAmount) throws InterruptedException
//	{
//
//		String path="//label[contains(text(),'Payments')]/following-sibling::span[@class='pamt']/span[@class='pamt' and contains(text(),'$ "+expectedAmount+"')]";
//		WebElement element= driver.findElement(By.xpath(path));
//		assertTrue(element.isDisplayed(), "Failed to verify payment");
//		testSteps.add("Verified Payment On Folio Tab: <b>" +expectedAmount+"</b>" );
//		reslogger.info("Verified Payment On Folio Tab: " +expectedAmount);
//	}
//
//	public void verifyDepositAtHistoryTab(WebDriver driver, ArrayList<String> testSteps, String payment, String paymentType) {
//
//		String depositText = "Made a deposit payment of $"+payment+" using "+paymentType+"";
//		String path = "//span[contains(text(),'"+depositText+"')]";
//		WebElement element= driver.findElement(By.xpath(path));
//		assertTrue(element.isDisplayed(), "Failed to verify deposit amopunt on History Screen");
//		testSteps.add("Verified Payment On Folio Tab: <b>" +element.getText()+"</b>" );
//		reslogger.info("Verified Payment On Folio Tab: " +element.getText());
//
//	}
//
//	public void verifyNoPaymentAtFolioLineItem(WebDriver driver, ArrayList<String> testSteps, String checkInDate,String paymentType)
//	{
//		String convertedDate = Utility.parseDate(checkInDate, "dd/MM/yyyy", "EE MMM dd, yyyy");
//		String path="//span[text()='"+convertedDate+"']/../..//span[text()='"+paymentType+"']/../..//td[@class='lineitem-amount']";
//		if(!(Utility.isElementPresent(driver, By.xpath(path)))){
//			testSteps.add("No Payment Aplied");
//			reslogger.info("No Payment Aplied");
//				}
//	}
//
//	public void clickOnConfirmCheckInButton(WebDriver driver,ArrayList<String> testSteps) throws InterruptedException {
//		Elements_CPReservation reservation = new Elements_CPReservation(driver);
//		Wait.WaitForElement(driver, OR_Reservation.CheckInConfirmButton);
//		Utility.ScrollToElement(reservation.CheckInConfirmButton, driver);
//		reservation.CheckInConfirmButton.click();
//		testSteps.add("Click on confirm checkin button");
//		reslogger.info("Click on confirm checkin button");
//	}
//
//
//
//	public void verifyRoomUnassignedOrAlreadyBookedOrDirty(WebDriver driver) throws InterruptedException
//	{
//		boolean isUnassigned = Utility.isElementPresent(driver,
//				By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
//		reslogger.info("isUnassigned:" + isUnassigned);
//		//String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'checked in to this room')]";
//		String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'occupying')]";
//		boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
//		reslogger.info("isRoomBooked:" + isRoomBooked);
//		boolean isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.cP_ReservationDirtyMsg));
//		reslogger.info("isRoomDirty:" + isRoomDirty);
//		if (isUnassigned) {
//			roomUnAssigned(driver, isUnassigned);
//		}
//		if (isRoomBooked) {
//			roomOccupiedWithOtherReservation(driver, isRoomBooked);
//		}
//		if (isRoomDirty) {
//			dirtyPopupModelClickConfirmButton(driver, test_steps, isRoomDirty);
//		}
//		Wait.waitUntilPageLoadNotCompleted(driver, 40);
//	}
//
//
//	public void verifyChekInReservationOnHistoryTab(WebDriver driver, ArrayList<String> testSteps)
//	{
//		Elements_CPReservation elements = new Elements_CPReservation(driver);
//		Wait.WaitForElement(driver, OR_Reservation.checkInReservation);
//		assertTrue(elements.checkInReservation.isDisplayed(),"Failed to verify checkin reservation on history");
//		testSteps.add("Verified Checked in this reservation displayed on history");
//		reslogger.info("Verified Checked in this reservation displayed on history");
//
//	}
//
// public String calculationOfCheckInAmountToBePaidForRateV2(String balance, String attrValue)
// {
//	 	DecimalFormat df = new DecimalFormat("0.00");
//		df.setMaximumFractionDigits(2);
//		String amountToBePaid = null;
//		double paidAmount = 0.00;
//		double totalRoomCharges=0.00;
//		paidAmount = (Double.parseDouble(attrValue) * Double.parseDouble(balance)) / 100;
//		amountToBePaid = df.format(paidAmount);
//		return amountToBePaid;
// }
//
// public String getAmountFromPaymentScreen(WebDriver driver) throws InterruptedException {
//		String amount = null;
//		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
//		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_Amount);
//		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount, driver);
//		// Get Amount
//		amount = CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
//		reslogger.info("Get Amount from Payment Page Is : " + amount);
//		return amount;
//
//	}
//
// public void verifyAmountOnPaymentScreen(WebDriver driver, String amountToBePaid, ArrayList<String> testSteps) throws InterruptedException
// {
//	 DecimalFormat df = new DecimalFormat("0.00");
//	 df.setMaximumFractionDigits(2);
//	 String amount=getAmountFromPaymentScreen(driver);
//	 amount = df.format(Double.parseDouble(amount));
//	 assertEquals(amount,amountToBePaid, "Failed to verify checkin Amount");
//	 testSteps.add("Verified chekecin amount paid : <b>" + amountToBePaid+ "</b>");
//	 reslogger.info("Verified chekecin amount paid : " + amountToBePaid);
// }
//
// public void verifyFolioLineItemAmoutPaid(WebDriver driver,String paymentType, String amountToBePaid, ArrayList<String> testSteps) {
//	 DecimalFormat df = new DecimalFormat("0.00");
//	 df.setMaximumFractionDigits(2);
//	 String path="//span[contains(text(), '"+paymentType+"')]/../..//td[@class='lineitem-amount']/span[(text()='$ "+amountToBePaid+"')]";
//	 Wait.WaitForElement(driver, path);
//	 WebElement element= driver.findElement(By.xpath(path));
//	 assertTrue(element.isDisplayed(), "Failed to verify amount on folio line item");
//	 testSteps.add("Verified Folio Line Item amount  : <b>" + element.getText()+ "</b>");
//	 reslogger.info("Verified Folio Line Item amount  :" + element.getText());
// }
//
// public void verifyHistoryWithCapturedPayment(WebDriver driver, ArrayList<String> test_steps, String amount,String paymentType, String paymentMethod) {
//	 String str=null;
//	 if(paymentMethod.equalsIgnoreCase("MC")) {
//		 str = "Captured payment for $"+amount+" using ("+paymentType+")";
//	 }else if(paymentMethod.equalsIgnoreCase("Cash")) {
//		 str = "Made a payment $"+amount+" using "+paymentType+"";
//	 }
//	 String path = "//span[contains(text(),'" + str + "')]";
//	 WebElement element = driver.findElement(By.xpath(path));
//	 assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Description");
//	 test_steps.add("'History Tab' Verified Description: <b>" + element.getText() + "</b>");
//	 reslogger.info("'History Tab' Verified Description : " + element.getText());
// }

 public double calculattionRatesAsPerAdultsAndChildCapacityMRB(WebDriver driver,HashMap<String, String> ratePerNight, String ratePlanAdult, String ratePlanChild,HashMap<String, String> addAdultPerNight, HashMap<String, String> addChildPerNight, String roomClassPersons , String roomClassAdult,String reservationAdult, String reservationChild,
			ArrayList<String> testSteps, String message,String roomClass, List<Date> dates, String format) throws InterruptedException, NumberFormatException, ParseException
	{

		double sumValue=0.00;
		 DecimalFormat df = new DecimalFormat("0.00");
		 df.setMaximumFractionDigits(2);
		ArrayList<Double> rateAdultChild= new ArrayList<Double>();
		double rate=0.00;
		int reservationTotalAdultAndChild= Integer.parseInt(reservationAdult)+ Integer.parseInt(reservationChild);

		if(!reservationAdult.equals("0") && !reservationChild.equals("0")){
		  if(Integer.parseInt(reservationAdult)<=Integer.parseInt(ratePlanAdult) &&  reservationTotalAdultAndChild<=Integer.parseInt(ratePlanChild)) {
			  for(int i=0;i<dates.size()-1;i++)
				{
					rateAdultChild= calculationDateWise(ratePerNight,addAdultPerNight,addChildPerNight, dates, i,format);
					sumValue=sumValue+rateAdultChild.get(0);
					rate=sumValue;
				}
				reslogger.info(rate);
				verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));

		  }
		  else if(Integer.parseInt(reservationAdult)<=Integer.parseInt(ratePlanAdult) && reservationTotalAdultAndChild>Integer.parseInt(ratePlanChild) && !(reservationTotalAdultAndChild>Integer.parseInt(roomClassPersons))) {
			  int child=reservationTotalAdultAndChild-Integer.parseInt(ratePlanChild);
			  for(int i=0;i<dates.size()-1;i++)
				{
					rateAdultChild= calculationDateWise(ratePerNight,addAdultPerNight,addChildPerNight, dates, i,format);
					double  alwaysChild=rateAdultChild.get(0)+(child*rateAdultChild.get(2));
					 sumValue=sumValue+alwaysChild;
					   	rate=sumValue;
				}
				reslogger.info(rate);
				verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));
		  }
			  else if(Integer.parseInt(reservationAdult)>Integer.parseInt(ratePlanAdult)&& Integer.parseInt(reservationChild)<=Integer.parseInt(ratePlanAdult) &&!(Integer.parseInt(reservationAdult)>Integer.parseInt(roomClassAdult))){
			  int adult= Integer.parseInt(reservationAdult)-Integer.parseInt(ratePlanAdult);
			  for(int i=0;i<dates.size()-1;i++){
				  rateAdultChild= calculationDateWise(ratePerNight,addAdultPerNight,addChildPerNight, dates, i,format);
				  double  alwaysAdult=rateAdultChild.get(0)+(adult*rateAdultChild.get(1));
				  sumValue=sumValue+alwaysAdult;
				   	rate=sumValue;
			  }
			  reslogger.info(rate);
			 verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));
		  }else if(Integer.parseInt(reservationAdult)>Integer.parseInt(ratePlanAdult) && reservationTotalAdultAndChild<=Integer.parseInt(ratePlanChild) &&!(Integer.parseInt(reservationAdult)>Integer.parseInt(roomClassAdult))) {
			  int adult= Integer.parseInt(reservationAdult)-Integer.parseInt(ratePlanAdult);
			  for(int i=0;i<dates.size()-1;i++){
				  rateAdultChild= calculationDateWise(ratePerNight,addAdultPerNight,addChildPerNight, dates, i,format);
				  double  alwaysAdult=rateAdultChild.get(0)+(adult*rateAdultChild.get(1));
				  sumValue=sumValue+alwaysAdult;
				   	rate=sumValue;
			  }
			  reslogger.info(rate);
			 verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));
		  }
		  else if(Integer.parseInt(reservationAdult)>Integer.parseInt(ratePlanAdult) && reservationTotalAdultAndChild>Integer.parseInt(ratePlanChild) && !(Integer.parseInt(reservationAdult)>Integer.parseInt(roomClassAdult)) && !(reservationTotalAdultAndChild>Integer.parseInt(roomClassPersons) )) {
			  int adult= Integer.parseInt(reservationAdult)-Integer.parseInt(ratePlanAdult);
			  int child=reservationTotalAdultAndChild-Integer.parseInt(ratePlanChild);
			  if(adult==child) {
				  for(int i=0;i<dates.size()-1;i++){
					  rateAdultChild= calculationDateWise(ratePerNight,addAdultPerNight,addChildPerNight, dates, i,format);
					  double  alwaysAdult=rateAdultChild.get(0)+(adult*rateAdultChild.get(1));
					  sumValue=sumValue+alwaysAdult;
					   	rate=sumValue;
				  }
			  }else if(child>adult) {
				  int newChild=child-adult;
				  for(int i=0;i<dates.size()-1;i++){
					  rateAdultChild= calculationDateWise(ratePerNight,addAdultPerNight,addChildPerNight, dates, i,format);
					  double  couldBeChildAndAdult=rateAdultChild.get(0)+(adult*rateAdultChild.get(1))+(newChild*rateAdultChild.get(2));
					  sumValue=sumValue+couldBeChildAndAdult;
					   	rate=sumValue;
				  }
			  }

			  reslogger.info(rate);
			 verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));
		  }else if(Integer.parseInt(reservationAdult)==Integer.parseInt(ratePlanAdult) && reservationTotalAdultAndChild>Integer.parseInt(ratePlanChild) && !(reservationTotalAdultAndChild>Integer.parseInt(roomClassPersons) )) {
			  int child=reservationTotalAdultAndChild-Integer.parseInt(ratePlanChild);
			  for(int i=0;i<dates.size()-1;i++){
				  rateAdultChild= calculationDateWise(ratePerNight,addAdultPerNight,addChildPerNight, dates, i,format);
				  double  alwaysChild=rateAdultChild.get(0)+(child*rateAdultChild.get(2));
				  sumValue=sumValue+alwaysChild;
				   	rate=sumValue;
			  }
			  reslogger.info(rate);
			verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));
		  }
		}else if(reservationAdult.equals("0") && reservationChild.equals("0")){
			verify_errorMessage(driver,testSteps,message);
		}else if(reservationAdult.equals("0") && Integer.parseInt(reservationChild)>Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver,testSteps,message);
		}else if(Integer.parseInt(reservationAdult)>Integer.parseInt(roomClassAdult) &&  reservationChild.equals("0")) {
			verify_errorMessage(driver,testSteps,message);
		}else if(Integer.parseInt(reservationAdult)>Integer.parseInt(roomClassAdult) &&  Integer.parseInt(reservationChild)>Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver,testSteps,message);
		}else if(Integer.parseInt(reservationAdult)<Integer.parseInt(roomClassAdult) &&  Integer.parseInt(reservationChild)>Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver,testSteps,message);
		}else if(Integer.parseInt(reservationAdult)>Integer.parseInt(roomClassAdult) &&  Integer.parseInt(reservationChild)<Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver,testSteps,message);
		}
		return rate;

	}


	public HashMap<String, String> getRoomChargesFromFolioBasedOnDates(WebDriver driver, ArrayList<String> test_steps,
			String checkInDate, String checkOutDate) throws Exception {
		HashMap<String, String> roomCharges = new HashMap<>();
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		ArrayList<String> dates = Utility.getAllDatesBetweenCheckInOutDates(checkInDate, checkOutDate);
		for (String date : dates) {
			String convertedDate = Utility.parseDate(date, "dd/MM/yyyy", "EE MMM dd, yyyy");
			String roomChargeXpath = "//span[text()='"+convertedDate+"']/../..//span[text()='Room Charge']/../.."
					+ "//td[@class='lineitem-amount']";
			String roomCharge = driver.findElement(By.xpath(roomChargeXpath)).getText();
			roomCharge = roomCharge.replace("$ ", "");
			test_steps.add("Room charge for the day <b>"+date+"</b> is captured as <b>"+roomCharge+"</b>");
			roomCharges.put(date, roomCharge);
		}
		return roomCharges;
	}
	public void makeReservationNoShowWithPaymentProcess(WebDriver driver, ArrayList<String> test_steps,
			String policyType, String payments, String noShowAmount) throws Exception {
		try {
			makeReservationNoShow(driver, test_steps);
			if (verifyPaymentsIsGreaterThanNoShowAmount(payments, noShowAmount)) {
				clickConfirmCancelButton(driver, test_steps);
				clickOnRefundButtonOnNoShowPopup(driver, test_steps);
			} else {
				clickProceedToNoShowPaymentButton(driver, test_steps);
				clickLogORPayAuthorizedButton(driver, test_steps);
				checkInPaymentSuccessPopupClose(driver, test_steps);
			}
			test_steps.add("===================== Verifying Reservation status after No Show =====================");
			verifyReservationStatusStatus(driver, test_steps, policyType);
		} catch (Exception e) {
			Utility.app_logs.info(e);
		}
	}

	public void clickOnRefundButtonOnNoShowPopup(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		List<WebElement> refundButton = driver.findElements(By.xpath(OR_Reservation.ConfirmDialog_YesButton));
		if (refundButton.size()>0) {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ConfirmDialog_YesButton), driver);
			try {
				res.CP_Reservation_ConfirmNoShowYesButton.click();
				Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_Reservation_PanelNoShowStatus), driver);
			} catch (Exception e) {
				JavascriptExecutor js = (JavascriptExecutor) driver;
				js.executeScript("arguments[0].click()", res.CP_Reservation_ConfirmNoShowYesButton);
				test_steps.add("Clicking on <b>Yes, Confirm no show & refund later</b> button");
				Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_Reservation_PanelNoShowStatus), driver);
			}
		}else {
			driver.findElement(By.xpath("//button[@data-bind='visible:noShow.isFinalStep']")).click();
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_Reservation_PanelNoShowStatus), driver);
		}
	}

	public void verifyNoShowAmountAtFolio(WebDriver driver, ArrayList<String> test_steps,
			ArrayList<String> noShowAmounts) throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Folio folio = new Folio();
		folio.disableIncludeTaxesInLineItems(driver, test_steps);
		int j =0;
		if (!noShowAmounts.isEmpty()) {
			for (String noShowAmount : noShowAmounts) {
				String noShowAmountDisplayed = null;
				List<WebElement> rooms = res.guestFolioAllGuestsFromDropDown;
				for (int i = 0; i < rooms.size(); i++) {
					j = i+1;
					res.guestFolioGuestDropDown.click();
					Wait.wait1Second();
					rooms.get(i).click();
					noShowAmountDisplayed = driver.findElement(By.xpath(OR_Reservation.noShowLineItemXpath)).getText();
					noShowAmountDisplayed = noShowAmountDisplayed.replace("$ ", "");
					if (noShowAmountDisplayed.equalsIgnoreCase(noShowAmount)) {
						break;
					}
				}
				try {
					assertEquals(noShowAmountDisplayed, noShowAmount, "Failed to verify no show amount at folio line item");
					test_steps.add("Successfully verified no show amount in folio line items displayed as "
							+ "<b>"+noShowAmountDisplayed+"</b> for guest "+j);
				} catch (Exception e) {
					test_steps.add(e.toString());
				}catch (Error e) {
					test_steps.add(e.toString());
				}
			}
		}else {
			List<WebElement> rooms = res.guestFolioAllGuestsFromDropDown;
			for (int i = 0; i < rooms.size(); i++) {
				j=i+1;
				res.guestFolioGuestDropDown.click();
				Wait.wait1Second();
				rooms.get(i).click();
				List<WebElement> noShowLineItems = driver.findElements(By.xpath(OR_Reservation.noShowLineItemXpath));
				try {
					assertEquals(noShowLineItems.size(), 0, "Failed to verify no show folio line item is not displayed");
					test_steps.add("Successfully verified no show folio line item is not displayed at folio for guest "+j);
				} catch (Exception e) {
					test_steps.add(e.toString());
				}catch (Error e) {
					test_steps.add(e.toString());
				}
			}
		}
	}

	public boolean verifyPaymentsIsGreaterThanNoShowAmount(String payments, String noShowAmount) {
		boolean paymentsIsGreater = false;
		if (Double.parseDouble(payments)>Double.parseDouble(noShowAmount)) {
			paymentsIsGreater = true;
		}
		return paymentsIsGreater;
	}

	public void guestDetailsTabClick(WebDriver driver, ArrayList<String> test_steps) {
		String detailsTabXpath = "//a[contains(@data-bind,'ResDetails') and text()='Details']";
		Wait.waitForElementToBeClickable(By.xpath(detailsTabXpath), driver);
		driver.findElement(By.xpath(detailsTabXpath)).click();
		test_steps.add("Clicked on guest details tab");
	}

	public void clickNoInPolicyPopUp(WebDriver driver) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.noPolicyPopup), driver);
		try {
			element.noPolicyPopup.click();
		} catch (Exception e) {
			Utility.app_logs.info(e);
			JavascriptExecutor js = (JavascriptExecutor)driver;
			js.executeScript("arguments[0].click()", element.noPolicyPopup);
		}
	}

	public boolean checkPaymentMethodIsAvailableInReservationPage(WebDriver driver, String paymentMethod) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		boolean paymentMethodIsAvail = false;
		String paymentMethodSelected = driver.findElement(By.
				xpath("//div[@data-bind='with: PaymentDetail']//button[@class='btn dropdown-toggle btn-default']")).getAttribute("title");
		if (paymentMethod.equalsIgnoreCase(paymentMethodSelected)) {
			paymentMethodIsAvail = true;
		}
		return paymentMethodIsAvail;
	}



	/*public String calculationOfDepositAmountToBePaidForRateV2(ArrayList<String> roomCharges, String type,
			String attrValue, String roomClassSize) throws Exception{
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountToBePaid = null;
		double paidAmount = 0.00;
		double noOfNightCharges = 0.00;
		double totalRoomCharges=0.00;
		if (type.equalsIgnoreCase("number of nights")) {
			if(Integer.parseInt(attrValue)<roomCharges.size()) {
				for (int i=0;i<=Integer.parseInt(attrValue)-1;i++) {
					noOfNightCharges=noOfNightCharges+Double.valueOf(roomCharges.toArray()[i].toString());
					paidAmount = noOfNightCharges;
				}
			} else if(Integer.parseInt(attrValue)>roomCharges.size()) {
				for(String str: roomCharges) {
					totalRoomCharges=totalRoomCharges+Double.parseDouble(str);
				}
				paidAmount=totalRoomCharges;
			}
		} else if (type.equalsIgnoreCase("flat fee")) {
			paidAmount = Double.parseDouble(attrValue) *Double.valueOf(roomClassSize);
		} else if (type.equalsIgnoreCase("percent of stay")) {
			for(String str: roomCharges) {
				totalRoomCharges=totalRoomCharges+Double.parseDouble(str);
			}
			paidAmount = (Double.parseDouble(attrValue) * totalRoomCharges) / 100;
		}
		amountToBePaid = df.format(paidAmount);
		return amountToBePaid;
	}

	public String calculationOfDepositAmountToBePaidForRateV2(HashMap<String, String> roomCharges, String type,
			String attrValue) throws Exception{
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountToBePaid = null;
		double paidAmount = 0.00;
		double noOfNightCharges = 0.00;
		double totalRoomCharges=0.00;
		if (type.equalsIgnoreCase("number of nights")) {
			if(Integer.parseInt(attrValue)<roomCharges.size()) {
				for (int i=0;i<=Integer.parseInt(attrValue)-1;i++) {
					noOfNightCharges=noOfNightCharges+Double.valueOf(roomCharges.values().toArray()[i].toString());
					paidAmount = noOfNightCharges;
				}
			} else if(Integer.parseInt(attrValue)>roomCharges.size()) {
				for(String str: roomCharges.values()) {
					totalRoomCharges=totalRoomCharges+Double.parseDouble(str);
				}
				paidAmount=totalRoomCharges;
			}
		} else if (type.equalsIgnoreCase("flat fee")) {
			paidAmount = Double.parseDouble(attrValue);
		} else if (type.equalsIgnoreCase("percent of stay")) {
			for(String str: roomCharges.values()) {
				totalRoomCharges=totalRoomCharges+Double.parseDouble(str);
			}
			paidAmount = (Double.parseDouble(attrValue) * totalRoomCharges) / 100;
		}
		amountToBePaid = df.format(paidAmount);
		return amountToBePaid;
	}
	*/
	/*public void includeTaxesinLineItems(WebDriver driver, ArrayList<String> test_steps, boolean value) throws InterruptedException {
=======




	public void includeTaxesinLineItems(WebDriver driver, ArrayList<String> test_steps, boolean value) throws InterruptedException {
>>>>>>> AUTOMATION-1809
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver,OR_Reservation.cP_Reservation_IncludeTaxCheckBox);
		if(value==true) {
		boolean isChecked = res.cP_Reservation_IncludeTaxCheckBox.isSelected();
		if (!isChecked) {
			Utility.ScrollToViewElementINMiddle(driver, res.cP_Reservation_IncludeTaxCheckBox);
			res.cP_Reservation_IncludeTaxCheckBox.click();
			test_steps.add("Checked Include Taxes in Line Items Check Box ");
			reslogger.info("Checked Include Taxes in Line Items Check Box ");
		} else {
			test_steps.add("Include Taxes in Line Items Check Box is Already Checked ");
			reslogger.info("Include Taxes in Line Items Check Box is Already Checked ");
		}}else if(value==false) {
			boolean isChecked = res.cP_Reservation_IncludeTaxCheckBox.isSelected();
			if (isChecked) {
				Utility.ScrollToViewElementINMiddle(driver, res.cP_Reservation_IncludeTaxCheckBox);
				res.cP_Reservation_IncludeTaxCheckBox.click();
				test_steps.add("UnChecked Include Taxes in Line Items Check Box ");
				reslogger.info("UnChecked Include Taxes in Line Items Check Box ");
			} else {
				test_steps.add("Include Taxes in Line Items Check Box is Already UnChecked ");
				reslogger.info("Include Taxes in Line Items Check Box is Already UnChecked ");
			}

		}

	}*/

	private void createMRBReservation(WebDriver driver, ArrayList<String> test_steps, String checkInDate,
			String checkOutDate, String adultsForRes, String childrenForRes, String ratePlan, String promoCode,
			String roomClass, String account, String salutation, String guestFirstName, String guestLastName,
			String phoneNumber, String altenativePhone, String email, String accountType, String address1,
			String address2, String address3, String city, String country, String state, String postalCode,
			String isGuesProfile, String referral, String paymentMethod, String cardNumber, String nameOnCard,
			String cardExpMonthAndYear, String isAccountPolicyApplicable, String sourceOfRes,ArrayList<String> roomNumber ) throws Exception {
		test_steps.add("============== Creating an MRB reservation ==============");
		select_Dates(driver, test_steps, checkInDate, checkOutDate, adultsForRes, childrenForRes, ratePlan, "","");
		clickOnFindRooms(driver, test_steps);
		if (Utility.validateString(account)) {
			if (sourceOfRes.equalsIgnoreCase("accountReservation")) {
				ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[0]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
				clickYesOrNoOnPolicyChangePopup(driver, test_steps, isAccountPolicyApplicable);
				rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
				click_Next(driver, test_steps);
				enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
				if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
					enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
				}
			}else if (sourceOfRes.equalsIgnoreCase("associateAccount")) {
				ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[0]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
				rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
				click_Next(driver, test_steps);

				if ( (accountType.equalsIgnoreCase("Corporate/Member Accounts"))
						|| (accountType.equalsIgnoreCase("Unit Owners"))) {
					associateAccountInReservation(driver, test_steps, account, accountType);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
					}
				}else if ( (accountType.equalsIgnoreCase("Travel Agent")) ) {
					enter_MarketSegmentDetails(driver, test_steps, account, "", referral);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
					}
				}else if ( (accountType.equalsIgnoreCase("House Account")) ) {
					select_HouseAccoutAsPayment(driver, test_steps, account);
					enter_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName,
							phoneNumber, altenativePhone, email, "", accountType, address1, address2, address3, city,
							country, state, postalCode, isGuesProfile);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
					}
				}else if ( (accountType.equalsIgnoreCase("Gift Certificate")) ) {
//					select_HouseAccoutAsPayment(driver, test_steps, account);
				}
			}
		}else {
			ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[0]);
			selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
			rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
			selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
			click_Next(driver, test_steps);

			enter_MRB_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, "", accountType, address1, address2, address3, city, country, state, postalCode,
					isGuesProfile, "", "",roomNumber);
			if((account.equalsIgnoreCase("")||account.isEmpty())) {
				enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
			}
			enter_MarketSegmentDetails(driver, test_steps, "", "", referral);
		}
	}

	public HashMap<String, String> getHighestAmountOfPolicy(WebDriver driver, ArrayList<String> test_steps, HashMap<String,
			ArrayList<String>> allPoliciesDetails, ArrayList<String> checkInDates, ArrayList<String> checkOutDates) throws Exception {
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		int index = 0;
		double highestPolicyAmount = 0;
		double paymentsFromFolio = 0;
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		HashMap<String, String> policyToValidate = new HashMap<>();
		ArrayList<String> policyAttrs = allPoliciesDetails.get("Attributes");
		ArrayList<String> policyAttrValues = allPoliciesDetails.get("AttributeValues");
		ArrayList<String> policyDescs = allPoliciesDetails.get("Descriptions");
		ArrayList<String> policyNamesGet = allPoliciesDetails.get("Names");
		ArrayList<String> allAmounts = new ArrayList<>();
		List<WebElement> rooms = elements.guestFolioAllGuestsFromDropDown;
		for (int i = 0; i < policyAttrs.size(); i++) {
			elements.guestFolioGuestDropDown.click();
			Wait.wait1Second();
			rooms.get(i).click();
			HashMap<String, String> roomCharges = getRoomChargesFromFolioBasedOnDates(driver, test_steps, checkInDates.get(i), checkOutDates.get(i));
			allAmounts.add(calculationOfDepositAmountToBePaidForRateV2(roomCharges, policyAttrs.get(i), policyAttrValues.get(i)));
			paymentsFromFolio = paymentsFromFolio+Double.parseDouble(get_Payments(driver, test_steps));
		}
		for (int i = 0; i < allAmounts.size(); i++) {
			if (highestPolicyAmount < Double.parseDouble(allAmounts.get(i))) {
				index = i;
			}
		}
		String payments = df.format(paymentsFromFolio);
		test_steps.add("Total payments from multiple folio guest charges is captured as <b>"+payments+"</b>");
		test_steps.add("Highest amount of no show policy name is captured as <b>"+policyNamesGet.get(index)+"</b>");
		test_steps.add("Highest amount of no show policy attribute is captured as <b>"+policyAttrs.get(index)+"</b>");
		test_steps.add("Highest amount of no show policy attribute value is captured as <b>"+policyAttrValues.get(index)+"</b>");
		test_steps.add("Highest amount of no show policy description is captured as <b>"+policyDescs.get(index)+"</b>");

		policyToValidate.put("Name", policyNamesGet.get(index));
		policyToValidate.put("Attribute", policyAttrs.get(index));
		policyToValidate.put("AttributeValue", policyAttrValues.get(index));
		policyToValidate.put("Description", policyDescs.get(index));
		policyToValidate.put("Payments", payments);
		return policyToValidate;
	}

	public ArrayList<String> getNoShowPaymentsForAllGuests(WebDriver driver, ArrayList<String> test_steps,
			ArrayList<String> checkInDates, ArrayList<String> checkOutDates, String attr, String attrValue) throws Exception {
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> allAmounts = new ArrayList<>();
		List<WebElement> rooms = elements.guestFolioAllGuestsFromDropDown;
		for (int i = 0; i < rooms.size(); i++) {
			int j = i+1;
			elements.guestFolioGuestDropDown.click();
			Wait.wait1Second();
			rooms.get(i).click();
			HashMap<String, String> roomCharges = getRoomChargesFromFolioBasedOnDates(driver, test_steps,
					checkInDates.get(i), checkOutDates.get(i));
			String noShowPayment = calculationOfDepositAmountToBePaidForRateV2(roomCharges, attr, attrValue);
			test_steps.add("No Show payment is calculated for Guest"+j+" is <b>"+noShowPayment+"</b>");
			allAmounts.add(noShowPayment);
		}
		return allAmounts;
	}

	public String getTotalOfNoShowAmounts(ArrayList<String> noShowAmounts) throws Exception {
		String totalAmount = null;
		double amount = 0.00;
		for (String string : noShowAmounts) {
			amount = amount+Double.parseDouble(string);
		}
		totalAmount = Double.toString(amount);
		return totalAmount;
	}
	
	public void selectReservationPaymentType(WebDriver driver, String resNumber, ArrayList<String> test_steps) throws Exception {
		
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
		res.CP_NewReservation_PaymentMethod.click();
		
		String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'Reservation')]";
		
		Wait.WaitForElement(driver, paymentMethod);
		driver.findElement(By.xpath(paymentMethod)).click();

		String strResNumber = "//label[text()='Reservation']/preceding-sibling::input";
		Wait.WaitForElement(driver, strResNumber);
		driver.findElement(By.xpath(strResNumber)).sendKeys(resNumber);
		test_steps.add("Enter Reservation Number : " + resNumber);
		reslogger.info("Enter Reservation Number : " + resNumber);
		Wait.wait2Second();
		String acc = "//b[text()='" + resNumber.trim() + "']";
		Wait.WaitForElement(driver, acc);
		driver.findElement(By.xpath(acc)).click();
	
	}
	
	public void mrbChangeFolio(WebDriver driver, int i, ArrayList<String> test_steps) throws Exception {
		String folio = "//button[contains(@title,'Guest Folio For')]";
		String strFolios = "//span[contains(text(),'Guest Folio For')]";
		
		driver.findElement(By.xpath(folio)).click();
		Wait.wait1Second();
		List<WebElement> folios = driver.findElements(By.xpath(strFolios));
		reslogger.info("Folios size: "+folios.size());
		
		try {
			folios.get(i).click();
		}catch(Exception e) {
			reslogger.info("There are no multiple folios available");
		}
		
		
	}
	
	
	//For ReportsV2
	public void confirmReservation(WebDriver driver) throws InterruptedException {
        Elements_Reservation elementReservation = new Elements_Reservation(driver);
        Wait.wait1Second();
        Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
        Wait.wait1Second();
        elementReservation.ReservationStatusConfirmed.click();
        Wait.wait5Second();
        String s1 = elementReservation.ReservationCurrentStatus.getText();
        if (s1.equals("Confirmed")) {
            System.out.println("Successfully changed Reservation status to confirmed");
        } else {
            System.out.println("Unable to change Reservation status to confirmed");
        }
    }

 

    public void guaranteeReservation(WebDriver driver) throws InterruptedException {
        Elements_Reservation elementReservation = new Elements_Reservation(driver);
        Wait.wait1Second();
        Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
        Wait.wait1Second();
        elementReservation.ReservationStatusGuaranteed.click();
        Wait.wait5Second();
        String s2 = elementReservation.ReservationCurrentStatus.getText();
        if (s2.equals("Guaranteed")) {
            System.out.println("Successfully changed Reservation status to Guaranteed");
        } else {
            System.out.println("Unable to change Reservation status to Guaranteed");
        }

 

    }

 

    public void onHoldReservation(WebDriver driver) throws InterruptedException {
        Elements_Reservation elementReservation = new Elements_Reservation(driver);
        Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
        elementReservation.ReservationStatusOnHold.click();
        Wait.wait5Second();
        String s3 = elementReservation.ReservationCurrentStatus.getText();
        if (s3.equals("ON HOLD")) {
            System.out.println("Successfully changed Reservation status to On Hold");
        } else {
            System.out.println("Unable to change Reservation status to On Hold");
        }

 

    }
    
    
    public void cancelReservation(WebDriver driver) throws InterruptedException {
        Elements_Reservation elementReservation = new Elements_Reservation(driver);
        Wait.wait1Second();
        Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
        elementReservation.ReservationStatusCancel.click();
        elementReservation.CancellationReason.sendKeys("Cancel");
        elementReservation.ProceedToCancellationPayment.click();
        elementReservation.Log.click();
        elementReservation.CancelledClose.click();
        Wait.wait5Second();
        String s4 = elementReservation.ReservationCurrentStatus.getText();
        if(s4.equals("Cancelled")) {
            System.out.println("Successfully changed Reservation status to Cancelled");
        }else {
            System.out.println("Unable to change Reservation status to Cancelled");
        }

 

    }
    
    
    public void noShowReservation(WebDriver driver) throws InterruptedException {
    Elements_Reservation elementReservation = new Elements_Reservation(driver);
    Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
    elementReservation.ReservationStatusNoShow.click();
    Utility.clickThroughJavaScript(driver, elementReservation.ConfirmNoShow);
    Utility.clickThroughJavaScript(driver, elementReservation.NoShowClose);
    //elementReservation.ConfirmNoShow.click();
    //elementReservation.NoShowClose.click();
    Wait.wait5Second();
    String s5 = elementReservation.ReservationCurrentStatus.getText();
    if(s5.equals("NO SHOW")) {
        System.out.println("Successfully changed Reservation status to No Show");
    }else {
        System.out.println("Unable to change Reservation status to No Show");
    }
}
    
    
    
    public void inHouseReservation(WebDriver driver) throws InterruptedException {
        Elements_Reservation elementReservation = new Elements_Reservation(driver);
        Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
        elementReservation.ReservationStatusCheckin.click();
        Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusConfirmCheckin)));
        if(Utility.isElementDisplayed(driver, By.xpath(OR_Reservation.roomStatusDirtyMessage))) {
            elementReservation.confirmCheckInAtDirtyMessage.click();
        }
        //Wait.wait5Second();
        Wait.waitForNewWindow(driver, 10000);
        Utility.switchTab(driver, 1);
        driver.close();
        Utility.switchTab(driver, 0);
        String s6 = elementReservation.ReservationCurrentStatus.getText();
        System.out.println("s6="+s6);
        if(s6.equals("In-House")) {
            System.out.println("Successfully changed Reservation status to In-House");
        }else {
            System.out.println("Unable to change Reservation status to In-House");
        }
}
    
    
    
    public void departedReservation(WebDriver driver) throws InterruptedException {
        Elements_Reservation elementReservation = new Elements_Reservation(driver);
        //Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
        Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusCheckin)));

 

        //elementReservation.ReservationStatusCheckin.click();
        Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusConfirmCheckin)));
        
        if(Utility.isElementDisplayed(driver, By.xpath(OR_Reservation.roomStatusDirtyMessage))) {
            elementReservation.confirmCheckInAtDirtyMessage.click();
        }
        
        Wait.waitForNewWindow(driver, 10000);
        Utility.switchTab(driver, 1);
        driver.close();
        Utility.switchTab(driver, 0);
        elementReservation.CheckOut.click();
        Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(OR_Reservation.ProceedToCheckOutPayment)));
        
        //elementReservation.Log.click();
        Wait.waitForNewWindow(driver, 10000);
        Utility.switchTab(driver, 1);
        driver.close();
        Utility.switchTab(driver, 0);
        //elementReservation.checkOutButtonClose.click();
        
        String s7 = elementReservation.ReservationCurrentStatus.getText();
        if(s7.equals("DEPARTED")) {
            System.out.println("Successfully changed Reservation status to DEPARTED");
        }else {
            System.out.println("Unable to change Reservation status to DEPARTED");
        }
    }
	

	private void createMRBReservations(WebDriver driver, ArrayList<String> test_steps, String checkInDate,
			String checkOutDate, String adultsForRes, String childrenForRes, String ratePlan, String promoCode,
			String roomClass,  String isAssign, String isaccount,String account, String salutation, String guestFirstName, String guestLastName,
			String phoneNumber, String altenativePhone, String email, String accountType, String address1,
			String address2, String address3, String city, String country, String state, String postalCode,
			String isGuesProfile, String referral, String paymentMethod, String cardNumber, String nameOnCard,
			String cardExpMonthAndYear, String isAccountPolicyApplicable, String sourceOfRes,ArrayList<String> roomNumber ) throws Exception {
		test_steps.add("============== Creating an MRB reservation ==============");
		select_Dates(driver, test_steps, checkInDate, checkOutDate, adultsForRes, childrenForRes, ratePlan, "","");
		clickOnFindRooms(driver, test_steps);
		if (Utility.validateString(account)) {
			if (sourceOfRes.equalsIgnoreCase("accountReservation")) {
				ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[0]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
				clickYesOrNoOnPolicyChangePopup(driver, test_steps, isAccountPolicyApplicable);
				rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
				click_Next(driver, test_steps);
				enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
				if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
					enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
				}
			}else if (sourceOfRes.equalsIgnoreCase("associateAccount")) {
				ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[0]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
				rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
				click_Next(driver, test_steps);

				if ( (accountType.equalsIgnoreCase("Corporate/Member Accounts"))
						|| (accountType.equalsIgnoreCase("Unit Owners"))) {
					associateAccountInReservation(driver, test_steps, account, accountType);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
					}
				}else if ( (accountType.equalsIgnoreCase("Travel Agent")) ) {
					enter_MarketSegmentDetails(driver, test_steps, account, "", referral);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
					}
				}else if ( (accountType.equalsIgnoreCase("House Account")) ) {
					select_HouseAccoutAsPayment(driver, test_steps, account);
					enter_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName,
							phoneNumber, altenativePhone, email, "", accountType, address1, address2, address3, city,
							country, state, postalCode, isGuesProfile);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
					}
				}else if ( (accountType.equalsIgnoreCase("Gift Certificate")) ) {
//					select_HouseAccoutAsPayment(driver, test_steps, account);
				}
			}
		}else {
<<<<<<< HEAD
				select_MRBRooms(driver, test_steps, roomClass, isAssign, isaccount);
			click_Next(driver, test_steps);
=======
			/*ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[0]);
			selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
			rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
			selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));*/

			select_MRBRooms(driver, test_steps, roomClass, isAssign, isaccount);
			click_Next(driver, test_steps);

		/*	enter_MRB_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, "", accountType, address1, address2, address3, city, country, state, postalCode,
					isGuesProfile, "", "",roomNumber);*/
>>>>>>> develop
			enter_MRB_MailingAddressForMRB(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, "", accountType, address1, address2, address3, city, country, state, postalCode,
					isGuesProfile, "", "",roomNumber);
			if((account.equalsIgnoreCase("")||account.isEmpty())) {
				enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
			}
			enter_MarketSegmentDetails(driver, test_steps, "", "", referral);
		}

	}
	

	public String getReservationNoShowPolicy(WebDriver driver) {
		String noShow="//a[contains(@data-bind,'click:cancelNoShow')]/..";
		Wait.WaitForElement(driver, noShow);
		driver.findElement(By.xpath(noShow)).click();

		String noShowPolicy="//a[contains(@data-bind,'click:cancelNoShow')]/../../..//label/../div/button/span";
		Wait.WaitForElement(driver, noShowPolicy);
		return driver.findElement(By.xpath(noShowPolicy)).getText();

	}


	public String getReservationDepositPolicy(WebDriver driver) {
		String deposit="//div[@id='accordion']/div";
		Wait.WaitForElement(driver, deposit);
		driver.findElement(By.xpath(deposit)).click();

		String depositPolicy="//div[@id='accordion']/div/div//label[text()='Deposit Policy']/following-sibling::div/button/span";
		Wait.WaitForElement(driver, depositPolicy);
		return driver.findElement(By.xpath(depositPolicy)).getText();

	}


	public ArrayList select_MRBRoomsRatePlanValidation1(WebDriver driver, ArrayList test_steps, String RoomClass, String IsAssign,
			String Account, String Adults,ArrayList<Boolean> isMinStayRuleMRB,ArrayList<Boolean> isMinStayRuleBrokenPopComeOrNotMRB,ArrayList<Integer> minStayRuleValueMRB,ArrayList<String> checkInColorMRB,ArrayList<String> checkOutColorMRB) throws InterruptedException {

		reslogger.info("isMinStayRuleMRB : "+isMinStayRuleMRB);
		reslogger.info("isMinStayRuleBrokenPopComeOrNotMRB : "+isMinStayRuleBrokenPopComeOrNotMRB);
		reslogger.info("minStayRuleValueMRB : "+minStayRuleValueMRB);
		reslogger.info("checkInColorMRB : "+checkInColorMRB);
		reslogger.info("checkOutColorMRB : "+checkOutColorMRB);
		ArrayList<String> minStayColorMRB = new ArrayList<String>();
		ArrayList<String> nocheckinColorMRB = new ArrayList<String>();
		ArrayList<String> nocheckoutColorMRB = new ArrayList<String>();

		String[] roomclass = RoomClass.split("\\|");
		String[] adults = Adults.split("\\|");
		int size = adults.length;
		ArrayList al = new ArrayList();
		for (int i = 1; i <= size; i++) {
			String Applypolicy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
			if (driver.findElements(By.xpath(Applypolicy)).size() > 0) {
				Wait.WaitForElement(driver, Applypolicy);
				Wait.wait3Second();
				driver.findElement(By.xpath(Applypolicy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");
			}
			Wait.wait5Second();
			String rm = "//span[text()='Room " + i + " of " + size + "']";
			if (driver.findElement(By.xpath(rm)).isDisplayed()) {
				test_steps.add("Room " + i + " of " + size + " is displayed");
				reslogger.info("Room " + i + " of " + size + " is displayed");
			} else {
				String clickOnPopUpYesBut = "(//div[@class='row']//button[contains(text(),'Yes')])[3]";
				driver.findElement(By.xpath(clickOnPopUpYesBut)).click();
			}
			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1].trim() + "')]/following-sibling::span";
			Wait.WaitForElement(driver, rulessize);
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();

			String room = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../div[2]/span)";
			reslogger.info(room);
			Wait.WaitForElement(driver, room);
			Wait.wait2Second();
			String rooms = driver.findElement(By.xpath(room)).getText();
			reslogger.info(rooms);
			String[] roomsCount = rooms.split(" ");
			int count = Integer.parseInt(roomsCount[0].trim());

			String cost = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/span)";

			Utility.ScrollToElement(driver.findElement(By.xpath(room)), driver);

			cost = driver.findElement(By.xpath(cost)).getText();
			cost = cost.trim();
			cost = cost.substring(1, cost.length());
			reslogger.info("cost : " + cost);

			al.add(cost);
			if (count > 0) {
				test_steps.add("Selecting room class : " + roomclass[i - 1]);
				reslogger.info("Selecting room class : " + roomclass[i - 1]);
				String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select";
				WebElement ele = driver.findElement(By.xpath(sel));

				String minStayColor="";

						Utility.app_logs.info("isMinStayRuleMRB.get(i) : " + isMinStayRuleMRB.get(i-1));

						if (isMinStayRuleMRB.get(i-1) ) {
							Utility.app_logs.info("!isMinStayRuleBrokenPopComeOrNotMRB.get(i-1) : "+ !isMinStayRuleBrokenPopComeOrNotMRB.get(i-1));
							if (!isMinStayRuleBrokenPopComeOrNotMRB.get(i-1)) {
								minStayColor = verifyMinStayLabel(driver, test_steps, roomclass[i-1],minStayRuleValueMRB.get(i-1));
								Utility.app_logs.info("minStayColor : " + minStayColor);
								try {
									assertTrue(minStayColor.equalsIgnoreCase("Red"),
											"Red color lable for minstay rule is not found for the room Class : "
													+ roomclass[i-1]);
									reslogger.info(
											"Succesfully veried the red color lable for min stay rule for the room class : "
													+ roomclass[i-1]);
									test_steps.add(
											"Succesfully veried the red color lable for min stay rule for the room class : "
													+ roomclass[i-1]);
								} catch (Error e) {
									test_steps.add(e.toString());
								} catch (Exception e) {
									test_steps.add(e.toString());
								}
							} else {
								minStayColor = verifyMinStayLabel(driver, test_steps, roomclass[i-1],minStayRuleValueMRB.get(i-1));
								try {
									assertTrue(minStayColor.equalsIgnoreCase("green"),
											"green color lable for minstay rule is not found for the room class : "
													+ roomclass[i-1]);
									reslogger.info(
											"Succesfully veried the green color lable for min stay rule for the room class : "
													+ roomclass[i-1]);
									test_steps.add(
											"Succesfully veried the green color lable for min stay rule for the room class : "
													+ roomclass[i-1]);
								} catch (Error e) {
									test_steps.add(e.toString());
								} catch (Exception e) {
									test_steps.add(e.toString());
								}
							}

						}

						minStayColorMRB.add(minStayColor);
						String noCheckinColor = "";
						if (checkInColorMRB.get(i-1).equalsIgnoreCase("Red")) {
							try {
								noCheckinColor = verifyNoCheckinLabel(driver, test_steps,roomclass[i-1]);
								Utility.app_logs.info("noCheckinColor");
								assertTrue(noCheckinColor.equalsIgnoreCase("Red"),
										"red color lable for no check in rule is not found for the room class : "+ roomclass[i-1]);
								reslogger.info(
										"Succesfully verified the red color lable for no check in rule for the room class : "
												+ roomclass[i-1]);
								test_steps.add(
										"Succesfully verified the red color lable for no check in rule for the room class : "
												+ roomclass[i-1]);
							} catch (Error e) {
								test_steps.add(e.toString());
							} catch (Exception e) {
								test_steps.add(e.toString());
							}
						} else if (checkInColorMRB.get(i-1).equalsIgnoreCase("Green")) {
							try {
								noCheckinColor = verifyNoCheckinLabel(driver, test_steps,roomclass[i-1]);
								assertTrue(noCheckinColor.equalsIgnoreCase("green"),
										"green color lable for no check in rule is not found for the room class : "
												+ roomclass[i-1]);
								reslogger.info(
										"Succesfully verified the green color lable for no check in rule for the room class : "
												+ roomclass[i-1]);
								test_steps.add(
										"Succesfully verified the green color lable for no check in rule for the room class : "
												+ roomclass[i-1]);
							} catch (Error e) {
								test_steps.add(e.toString());
							} catch (Exception e) {
								test_steps.add(e.toString());
							}
						} else {
							try {
								noCheckinColor = verifyNoCheckinLabel(driver, test_steps,roomclass[i-1]);
								assertTrue(noCheckinColor.equalsIgnoreCase("no color"),
										"no check in rule label is displayed for the room class : " + roomclass[i-1]);
								reslogger.info(
										"Succesfully verified the no check in rule label not displayed for the room class : "
												+ roomclass[i-1]);
								test_steps.add(
										"Succesfully verified the no check in rule label not displayed for the room class : "
												+ roomclass[i-1]);
							} catch (Error e) {
								test_steps.add(e.toString());
							} catch (Exception e) {
								test_steps.add(e.toString());
							}
						}

						nocheckinColorMRB.add(noCheckinColor);

						String noCheckoutColor = "";
						if (checkOutColorMRB.get(i-1).equalsIgnoreCase("Red")) {
							try {
								noCheckoutColor = verifyNoCheckoutLabel(driver, test_steps,roomclass[i-1]);
								assertTrue(noCheckoutColor.equalsIgnoreCase("Red"),
										"red color lable for no check out rule is not found for the room class : "
												+ roomclass[i-1]);
								reslogger.info(
										"Succesfully verified the red color lable for no check out rule for the room class : "
												+ roomclass[i-1]);
								test_steps.add(
										"Succesfully verified the red color lable for no check out rule for the room class : "
												+ roomclass[i-1]);
							} catch (Error e) {
								test_steps.add(e.toString());
							} catch (Exception e) {
								test_steps.add(e.toString());
							}
						} else if (checkOutColorMRB.get(i-1).equalsIgnoreCase("Green")) {
							try {
								noCheckoutColor = verifyNoCheckoutLabel(driver, test_steps,
										roomclass[i-1]);
								assertTrue(noCheckoutColor.equalsIgnoreCase("green"),
										"green color lable for no check out rule is not found for the room class : "
												+ roomclass[i-1]);
								reslogger.info(
										"Succesfully verified the green color lable for no check out rule for the room class : "
												+ roomclass[i-1]);
								test_steps.add(
										"Succesfully verified the green color lable for no check out rule for the room class : "
												+ roomclass[i-1]);
							} catch (Error e) {
								test_steps.add(e.toString());
							} catch (Exception e) {
								test_steps.add(e.toString());
							}
						} else {
							try {
								noCheckoutColor = verifyNoCheckoutLabel(driver, test_steps,
										roomclass[i-1]);
								assertTrue(noCheckoutColor.equalsIgnoreCase("no color"),
										"no check out rule label is displayed for the room class : "
												+ roomclass[i-1]);
								reslogger.info(
										"Succesfully verified the no check out rule label not displayed for the room class : "
												+ roomclass[i-1]);
								test_steps.add(
										"Succesfully verified the no check out rule label not displayed for the room class : "
												+ roomclass[i-1]);
							} catch (Error e) {
								test_steps.add(e.toString());
							} catch (Exception e) {
								test_steps.add(e.toString());
							}
						}
						nocheckoutColorMRB.add(noCheckoutColor);

				if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
					Wait.WaitForElement(driver, unAssign);
					driver.findElement(By.xpath(unAssign)).click();
					test_steps.add("Selected room number : Unassigned");
					reslogger.info("Selected room number : Unassigned");

				} else {
					String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select/option";
					reslogger.info(roomnum);
					int count1 = driver.findElements(By.xpath(roomnum)).size();
					Random random = new Random();
					randomNumber = random.nextInt(count1 - 1) + 1;
					reslogger.info("count : " + count1);
					reslogger.info("randomNumber : " + randomNumber);
					Wait.WaitForElement(driver, sel);

					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.wait2Second();
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
							+ randomNumber + "]/a/span";
					Wait.WaitForElement(driver, roomNumber);
					driver.findElement(By.xpath(roomNumber)).click();
				}

				String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();


				String loading = "(//div[@class='ir-loader-in'])[2]";
				int counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
				reslogger.info("Waited to loading symbol");

				reslogger.info("Rule Count : " + ruleCount);
				if (ruleCount > 1) {

					String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";
					counter = 0;
					Wait.wait3Second();
					if (driver.findElements(By.xpath(rules)).size() > 0) {

						
						Utility.app_logs.info("minStayRuleMRB.get(i-1) : "+minStayColorMRB.get(i-1));

						if(minStayColorMRB.get(i-1).equalsIgnoreCase("Red")) {
							String min="//p[text()='Selecting this room will violate the following rules']/..//div[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'"+minStayRuleValueMRB.get(i-1)+" NIGHT')]";
							Wait.WaitForElement(driver, min);
							test_steps.add("Verified min stay rule in the rules broken pop up as : "+minStayRuleValueMRB.get(i-1)+" night");
							reslogger.info("Verified min stay rule in the rules broken pop up as : "+minStayRuleValueMRB.get(i-1)+" night");
						}

						if(nocheckinColorMRB.get(i-1).equalsIgnoreCase("Red")) {
							String min="//p[text()='Selecting this room will violate the following rules']/..//div";
							Wait.WaitForElement(driver, min);
							String nocheckin=driver.findElement(By.xpath(min)).getText();
							if(nocheckin.contains("No Check In")) {
							test_steps.add("Verified no check in rule in the rules broken pop up");
							reslogger.info("Verified no check in rule in the rules broken pop up");
							}
						}

						if(nocheckoutColorMRB.get(i-1).equalsIgnoreCase("Red")) {
							String min="//p[text()='Selecting this room will violate the following rules']/..//div";
							Wait.WaitForElement(driver, min);
							String nocheckin=driver.findElement(By.xpath(min)).getText();
							if(nocheckin.contains("No Check out")) {
							test_steps.add("Verified no check in rule in the rules broken pop up");
							reslogger.info("Verified no check in rule in the rules broken pop up");
							}

						}

						driver.findElement(By.xpath(rules)).click();
						test_steps.add(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
						reslogger.info(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

						loading = "(//div[@class='ir-loader-in'])[2]";
						counter = 0;
						while (true) {
							if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
								break;
							} else if (counter == 3) {
								break;
							} else {
								counter++;
								Wait.wait3Second();
							}
						}
					}
				}

				if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
					if (i == 1) {
						String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
						if (driver.findElements(By.xpath(policy)).size() > 0) {
							Wait.WaitForElement(driver, policy);
							driver.findElement(By.xpath(policy)).click();
							test_steps.add("Based on the changes made, new policies are applicable.? : yes");
							reslogger.info("Based on the changes made, new policies are applicable.? : yes");

							loading = "(//div[@class='ir-loader-in'])[2]";
							counter = 0;
							while (true) {
								if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
									break;
								} else if (counter == 3) {
									break;
								} else {
									counter++;
									Wait.wait2Second();
								}
							}
						}
					}
				}
			} else {
				test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
				reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
			}
		}
		return al;
	}


	public ArrayList<String> selectReservation(WebDriver driver, String reservationNumber) throws InterruptedException {
		ArrayList<String> testSteps = new ArrayList<>();
		String checkBoxPath = "//span[text()='"+ reservationNumber +"']//..//..//td[contains(@class,'bulkActionCheckbox')]//child::div[@data-bind='css: { checked: DeleteReservation }']";
		Wait.WaitForElement(driver, checkBoxPath);
		Wait.waitForElementToBeVisibile(By.xpath(checkBoxPath), driver);
		Wait.waitForElementToBeClickable(By.xpath(checkBoxPath), driver);
		WebElement checkElement = driver.findElement(By.xpath(checkBoxPath));
		Utility.ScrollToElement(checkElement, driver);
		checkElement.click();
		testSteps.add("Selected reservation with number (" + reservationNumber+ ")");
		reslogger.info("Searched reservation with number (" + reservationNumber+ ")");

		return testSteps;
	}


	public String calculationOfDepositAmountToBePaidForRateV2(HashMap<String, String> roomCharges, String type,
			String attrValue) throws Exception{
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountToBePaid = null;
		double paidAmount = 0.00;
		double noOfNightCharges = 0.00;
		double totalRoomCharges=0.00;
		if (type.equalsIgnoreCase("number of nights")) {
			if(Integer.parseInt(attrValue)<roomCharges.size()) {
				for (int i=0;i<=Integer.parseInt(attrValue)-1;i++) {
					noOfNightCharges=noOfNightCharges+Double.valueOf(roomCharges.values().toArray()[i].toString());
					paidAmount = noOfNightCharges;
				}
			} else if(Integer.parseInt(attrValue)>roomCharges.size()) {
				for(String str: roomCharges.values()) {
					totalRoomCharges=totalRoomCharges+Double.parseDouble(str);
				}
				paidAmount=totalRoomCharges;
			}
		} else if (type.equalsIgnoreCase("flat fee")) {
			paidAmount = Double.parseDouble(attrValue);
		} else if (type.equalsIgnoreCase("percent of stay")) {
			for(String str: roomCharges.values()) {
				totalRoomCharges=totalRoomCharges+Double.parseDouble(str);
			}
			paidAmount = (Double.parseDouble(attrValue) * totalRoomCharges) / 100;
		}
		amountToBePaid = df.format(paidAmount);
		return amountToBePaid;
	}



	/*private void createMRBReservations(WebDriver driver, ArrayList<String> test_steps, String checkInDate,
			String checkOutDate, String adultsForRes, String childrenForRes, String ratePlan, String promoCode,
			String roomClass,  String isAssign, String isaccount,String account, String salutation, String guestFirstName, String guestLastName,
			String phoneNumber, String altenativePhone, String email, String accountType, String address1,
			String address2, String address3, String city, String country, String state, String postalCode,
			String isGuesProfile, String referral, String paymentMethod, String cardNumber, String nameOnCard,
			String cardExpMonthAndYear, String isAccountPolicyApplicable, String sourceOfRes,ArrayList<String> roomNumber ) throws Exception {
		test_steps.add("============== Creating an MRB reservation ==============");
		select_Dates(driver, test_steps, checkInDate, checkOutDate, adultsForRes, childrenForRes, ratePlan, "","");
		clickOnFindRooms(driver, test_steps);
		if (Utility.validateString(account)) {
			if (sourceOfRes.equalsIgnoreCase("accountReservation")) {
				ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[0]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
				clickYesOrNoOnPolicyChangePopup(driver, test_steps, isAccountPolicyApplicable);
				rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
				click_Next(driver, test_steps);
				enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
				if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
					enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
				}
			}else if (sourceOfRes.equalsIgnoreCase("associateAccount")) {
				ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[0]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
				rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
				click_Next(driver, test_steps);

				if ( (accountType.equalsIgnoreCase("Corporate/Member Accounts"))
						|| (accountType.equalsIgnoreCase("Unit Owners"))) {
					associateAccountInReservation(driver, test_steps, account, accountType);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
					}
				}else if ( (accountType.equalsIgnoreCase("Travel Agent")) ) {
					enter_MarketSegmentDetails(driver, test_steps, account, "", referral);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
					}
				}else if ( (accountType.equalsIgnoreCase("House Account")) ) {
					select_HouseAccoutAsPayment(driver, test_steps, account);
					enter_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName,
							phoneNumber, altenativePhone, email, "", accountType, address1, address2, address3, city,
							country, state, postalCode, isGuesProfile);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
					}
				}else if ( (accountType.equalsIgnoreCase("Gift Certificate")) ) {
//					select_HouseAccoutAsPayment(driver, test_steps, account);
				}
			}
		}else {
			ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[0]);
			selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
			rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
			selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));

			select_MRBRooms(driver, test_steps, roomClass, isAssign, isaccount);
			click_Next(driver, test_steps);

			enter_MRB_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, "", accountType, address1, address2, address3, city, country, state, postalCode,
					isGuesProfile, "", "",roomNumber);
			enter_MRB_MailingAddressForMRB(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, "", accountType, address1, address2, address3, city, country, state, postalCode,
					isGuesProfile, "", "",roomNumber);
			if((account.equalsIgnoreCase("")||account.isEmpty())) {
				enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
			}
			enter_MarketSegmentDetails(driver, test_steps, "", "", referral);
		}
	}*/

	public HashMap<String, String> getRoomChargesFromFolioBasedOnDates(WebDriver driver, ArrayList<String> test_steps,
            String checkInDate, String checkOutDate, boolean value) throws Exception {
        HashMap<String, String> roomCharges = new HashMap<>();
        includeTaxesinLineItems( driver,  test_steps, value);
        ArrayList<String> dates = Utility.getAllDatesBetweenCheckInOutDates(checkInDate, checkOutDate);
        for (String date : dates) {
         //   String convertedDate = Utility.parseDate(date, "dd/MM/yyyy", "EE MMM dd, yyyy");
          //  String  convertedDate=Utility.parseDate(date, "dd/MM/yyyy", "EE dd MMM yyyy");
          //  String roomChargeXpath = "//span[text()='"+convertedDate+"']/../..//span[text()='Room Charge']/../..//td[@class='lineitem-amount']";
        	String  convertedDate=Utility.parseDate(date, "dd/MM/yyyy", "dd");
        	String roomChargeXpath = "//span[contains(text(),'"+convertedDate+"')]/../..//span[text()='Room Charge']/../..//td[@class='lineitem-amount']";
            String roomCharge = driver.findElement(By.xpath(roomChargeXpath)).getText();
            roomCharge = roomCharge.replace("$ ", "");
            roomCharges.put(date, roomCharge);
        }
        return roomCharges;
    }

	public void includeTaxesinLineItems(WebDriver driver, ArrayList<String> test_steps, boolean value) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver,OR_Reservation.cP_Reservation_IncludeTaxCheckBox);
		if(value==true) {
		boolean isChecked = res.cP_Reservation_IncludeTaxCheckBox.isSelected();
		if (!isChecked) {
			Utility.ScrollToViewElementINMiddle(driver, res.cP_Reservation_IncludeTaxCheckBox);
			res.cP_Reservation_IncludeTaxCheckBox.click();
			test_steps.add("Checked Include Taxes in Line Items Check Box ");
			reslogger.info("Checked Include Taxes in Line Items Check Box ");
		} else {
			test_steps.add("Include Taxes in Line Items Check Box is Already Checked ");
			reslogger.info("Include Taxes in Line Items Check Box is Already Checked ");
		}}else if(value==false) {
			boolean isChecked = res.cP_Reservation_IncludeTaxCheckBox.isSelected();
			if (isChecked) {
				Utility.ScrollToViewElementINMiddle(driver, res.cP_Reservation_IncludeTaxCheckBox);
				res.cP_Reservation_IncludeTaxCheckBox.click();
				test_steps.add("UnChecked Include Taxes in Line Items Check Box ");
				reslogger.info("UnChecked Include Taxes in Line Items Check Box ");
			} else {
				test_steps.add("Include Taxes in Line Items Check Box is Already UnChecked ");
				reslogger.info("Include Taxes in Line Items Check Box is Already UnChecked ");
			}

		}

	}


	public boolean waitForReservationStatusToChangeTo(WebDriver driver, String status) throws InterruptedException{
        verifySpinerLoading(driver);
		try {
			String selector = "//span[@data-bind='text:confirmationNumber']//..//span[text()='" + status + "']";
			Wait.WaitForElement(driver, selector);
			Wait.waitForElementToBeVisibile(By.xpath(selector), driver);
			return  true;
		} catch (Exception e) {
			return  false;
		}
	}

	public boolean verifyIfDocumentIsAvailableOnReservationPage(WebDriver driver, ArrayList<String> test_steps,
                                                                     String documentName) throws InterruptedException {
        verifySpinerLoading(driver);
        try {
            String path = "//a[contains(text(), 'Reports')]";
            Wait.WaitForElement(driver, path);
            Wait.waitForElementToBeVisibile(By.xpath(path), driver);
            Wait.waitForElementToBeClickable(By.xpath(path), driver);
            WebElement element =  driver.findElement(By.xpath(path));
            Utility.ScrollToElement(element, driver);
            element.click();
            String letterSelector = String.format("//a[contains(text(), 'Reports')]/parent::div//li/span[contains(text(),'%s')]", documentName);
            boolean isExist = Utility.isElementPresent(driver,By.xpath(letterSelector));
            element.click();
            return isExist;
        } catch (Exception e) {
            return false;
        }
    }

    public ArrayList<String> selectRoomInStayInfoSectionUpdated(WebDriver driver, String RoomClass, String IsAssign)
            throws InterruptedException {
        Elements_CPReservation res = new Elements_CPReservation(driver);
        ArrayList<String> testSteps = new ArrayList<>();
        String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
                + "')]//..//..//div[2]//span";
        System.out.println("IsAssign: " + IsAssign);
        Wait.WaitForElement(driver, room);
        String rooms = driver.findElement(By.xpath(room)).getText();
        reslogger.info(rooms);
        String[] roomsCount = rooms.split(" ");
        int count = Integer.parseInt(roomsCount[0].trim());
        if (count > 0) {
            String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
                    + "')]//..//..//..//following-sibling::div//div//select";

            String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"

                    + RoomClass.trim() + "')]/following-sibling::span";
            reslogger.info(rulessize);

            int ruleCount = driver.findElements(By.xpath(rulessize)).size();
            WebElement ele = driver.findElement(By.xpath(sel));
            testSteps.add("Selected room class : " + RoomClass);
            reslogger.info("Selected room class : " + RoomClass);
            if (IsAssign.equalsIgnoreCase("No")) {
                String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
                        + RoomClass
                        + "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
                Wait.WaitForElement(driver, expand);
                driver.findElement(By.xpath(expand)).click();

                String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
                        + RoomClass
                        + "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='Unassigned'])";
                Wait.WaitForElement(driver, unAssign);
                driver.findElement(By.xpath(unAssign)).click();
                testSteps.add("Selected room number : Unassigned");
                reslogger.info("Selected room number : Unassigned");
            } else if (IsAssign.equalsIgnoreCase("Yes")) {

                String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
                        + RoomClass
                        + "')]//..//..//..//following-sibling::div//div//select//following-sibling::div/button";
                Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
                Wait.waitForElementToBeClickable(By.xpath(expand), driver);
                WebElement elementExpand = driver.findElement(By.xpath(expand));
                Utility.ScrollToElement_NoWait(elementExpand, driver);
                elementExpand.click();

//				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
//						+ RoomClass
//						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
                String roomnum = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass + "')]" +
                        "//..//..//..//following-sibling::div//div//select)[1]//following-sibling::div//ul//li//span[@class='text']";
                reslogger.info(roomnum);
                Wait.WaitForElement(driver, roomnum);
                List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
                Wait.wait2Second();
                System.out.println(getRoomNumber.size());
                String getMinimumNumber = getRoomNumber.get(1).getText();
                System.out.println("getMinimumNumber: " + getMinimumNumber);

                String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
                System.out.println("getMaxmumNumber: " + getMaxmumNumber);
                getMaxmumNumber = getMaxmumNumber.trim();
                int maxNumber = Integer.parseInt(getMaxmumNumber);
                int minNumber = Integer.parseInt(getMinimumNumber);

                System.out.println("maxNumber : " + maxNumber);
                System.out.println("maxNumber : " + maxNumber);

                Random random = new Random();
                int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
                IsAssign = String.valueOf(randomNumber);
                boolean isBreak = false;
                for (int j = 0; j < 5; j++) {
                    System.out.println("randomNumber: " + randomNumber);
                    for (int i = 1; i < getRoomNumber.size(); i++) {
                        // System.out.println("in loop " + i);
                        String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
                        getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
                        if (getRoomNumberFromOptions.equals(IsAssign)) {
                            isBreak = true;
                            break;
                        }

                    }
                    if (isBreak == false) {
                        random = new Random();
                        randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
                        IsAssign = String.valueOf(randomNumber);
                    }
                    if (isBreak) {
                        break;
                    }

                }
                System.out.print(" Random Number is :" + randomNumber);

                String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
                        + RoomClass
                        + "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
                        + IsAssign + "'])";
                Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
                driver.findElement(By.xpath(assignRoomNo)).click();
                testSteps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
                reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");

            } else {

                String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
                        + RoomClass
                        + "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
                Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
                Wait.waitForElementToBeClickable(By.xpath(expand), driver);
                WebElement elementExpand = driver.findElement(By.xpath(expand));
                Utility.ScrollToElement_NoWait(elementExpand, driver);
                elementExpand.click();

                String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
                        + RoomClass
                        + "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
                System.out.println(roomnum);
                List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
                System.out.println(getRoomNumber.size());
                String getMinimumNumber = getRoomNumber.get(1).getText();
                System.out.println("getMinimumNumber: " + getMinimumNumber);

                String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
                System.out.println("getMaxmumNumber: " + getMaxmumNumber);
                getMaxmumNumber = getMaxmumNumber.trim();
                int maxNumber = Integer.parseInt(getMaxmumNumber);
                int minNumber = Integer.parseInt(getMinimumNumber);

                System.out.println("maxNumber : " + maxNumber);
                System.out.println("maxNumber : " + maxNumber);

                Random random = new Random();
                int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
                IsAssign = String.valueOf(randomNumber);
                boolean isBreak = false;
                for (int j = 0; j < 5; j++) {
                    System.out.println("randomNumber: " + randomNumber);
                    for (int i = 1; i < getRoomNumber.size(); i++) {
                        System.out.println("in loop " + i);
                        String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
                        getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
                        if (getRoomNumberFromOptions.equals(IsAssign)) {
                            isBreak = true;
                            break;
                        }

                    }
                    if (isBreak == false) {
                        random = new Random();
                        randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
                        IsAssign = String.valueOf(randomNumber);
                    }
                    if (isBreak) {
                        break;
                    }

                }
                System.out.print(" Random Number is :" + randomNumber);

                String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
                        + RoomClass
                        + "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
                        + IsAssign + "'])";
                Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
                driver.findElement(By.xpath(assignRoomNo)).click();
                testSteps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
                reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
            }
            String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
                    + RoomClass
                    + "')]//..//..//..//following-sibling::div//span[contains(@data-bind,'text: ( isSelected()')]";
            Wait.WaitForElement(driver, select);
            driver.findElement(By.xpath(select)).click();

            String loading = "(//div[@class='ir-loader-in'])[2]";
            int counter = 0;
            while (true) {
                if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
                    break;
                } else if (counter == 50) {
                    break;
                } else {
                    counter++;
                    Wait.wait2Second();
                }
            }

            reslogger.info("Waited to loading symbol");

            reslogger.info("Rule Count : " + ruleCount);
        } else {
            testSteps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
            reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");

        }

        return testSteps;
    }	
	
	public String calculationOfDepositAmountToBePaidForRateV2(ArrayList<String> roomCharges, String type,
			String attrValue, String roomClassSize) throws Exception{
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountToBePaid = null;
		double paidAmount = 0.00;
		double noOfNightCharges = 0.00;
		double totalRoomCharges=0.00;
		if (type.equalsIgnoreCase("number of nights")) {
			if(Integer.parseInt(attrValue)<roomCharges.size()) {
				for (int i=0;i<=Integer.parseInt(attrValue)-1;i++) {
					noOfNightCharges=noOfNightCharges+Double.valueOf(roomCharges.toArray()[i].toString());
					paidAmount = noOfNightCharges;
				}	
			} else if(Integer.parseInt(attrValue)>roomCharges.size()) {
				for(String str: roomCharges) {					
					totalRoomCharges=totalRoomCharges+Double.parseDouble(str);
				}	
				paidAmount=totalRoomCharges;
			}
		} else if (type.equalsIgnoreCase("flat fee")) {
			paidAmount = Double.parseDouble(attrValue) *Double.valueOf(roomClassSize);
		} else if (type.equalsIgnoreCase("percent of stay")) {
			for(String str: roomCharges) {
				totalRoomCharges=totalRoomCharges+Double.parseDouble(str);
			}			
			paidAmount = (Double.parseDouble(attrValue) * totalRoomCharges) / 100;
		}
		amountToBePaid = df.format(paidAmount);
		return amountToBePaid;
	}
	
	
	public String getReservationCheckInPolicy(WebDriver driver) {
		String checkIn="//a[contains(@data-bind,'click:cancelCheckin')]/..";
		Wait.WaitForElement(driver, checkIn);
		driver.findElement(By.xpath(checkIn)).click();
		
		String checkInPolicy="//div[@id='accordion']/div/div//label[text()='Check-in Policy']/following-sibling::div/button/span";
		Wait.WaitForElement(driver, checkInPolicy);
		return driver.findElement(By.xpath(checkInPolicy)).getText();
		
	}
	
	

	public void clickFolioDetailOptions(WebDriver driver, ArrayList<String> test_steps, String accountName)
			throws InterruptedException {
		
		String path = "//a/span[@class='text'and contains(text(),'"+accountName+"')]";
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));		
		Utility.ScrollToElement(element, driver);
		element.click();	
		test_steps.add("Select Account: <b>" + accountName  + "</b>");
		reslogger.info("Select Account: " + accountName);
	}

	
	public void verifyFolioDetailOptions(WebDriver driver, ArrayList<String> test_steps, String accountName)
			throws InterruptedException {
		
		String path = "//a/span[@class='text'and contains(text(),'"+accountName+"')]";
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));		
		Utility.ScrollToElement(element, driver);
		assertTrue(element.isDisplayed(), "Failed tom verify folio option");
		test_steps.add("Verify folio option <b>" + accountName  + "</b>");
		reslogger.info("Verify folio option " + accountName);
	}

	public ArrayList<String> takePayment(WebDriver driver, String paymentMethod,String amount, String takePaymentType) throws InterruptedException, ParseException {
		ArrayList<String> test_steps = new ArrayList<String>();

		Elements_Reservation ReservationFolio = new Elements_Reservation(driver);
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		//
		try {
			Wait.explicit_wait_visibilityof_webelement(ReservationFolio.Click_Pay_Button, driver);
			Utility.ScrollToElement(ReservationFolio.Click_Pay_Button, driver);
			Wait.explicit_wait_elementToBeClickable(ReservationFolio.Click_Pay_Button, driver);
			ReservationFolio.Click_Pay_Button.click();
		} catch (Exception e) {
			WebDriverWait wait = new WebDriverWait(driver, 30);
			wait.until(ExpectedConditions
					.elementToBeClickable(By.xpath("//*[@id='bpjscontainer_102']//button[contains(text(),'Pay')]")))
					.click();
		}
		Wait.explicit_wait_xpath(OR.Verify_Payment_Details_poup, driver);
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount, driver);
			CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.clear();
			reslogger.info("Clear Amount Field");
		CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Keys.chord(Keys.CONTROL, "a"), amount);
		test_steps.add("Entered Amount :" + amount);
		reslogger.info("Entered Amount :" + amount);
		
		 if(Utility.validateString(takePaymentType)) {
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_TypeButton);
		CPReservationPage.CP_Reservation_Folio_TakePayment_TypeButton.click();      
		String type = "//h4[text()='Take Payment']/../..//label[text()='TYPE']/..//div/div//span[text()='"
				+ takePaymentType.trim() + "']";
		Wait.WaitForElement(driver, type);
		driver.findElement(By.xpath(type)).click();
		test_steps.add("Select Take Payment Type : " + takePaymentType);
		reslogger.info("Select Take Payment Type : " + takePaymentType);
        }
		String path = "(//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@class='btn dropdown-toggle btn-default']/span)[2]";
		Wait.WaitForElement(driver, path);
		WebElement PaymentMethodElement = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(PaymentMethodElement, driver);
		Utility.clickThroughJavaScript(driver, PaymentMethodElement);
	//	PaymentMethodElement.click();
	//	PaymentMethodElement.click();
		test_steps.add("Click Payment Method");
		reslogger.info("Click CPayment Method");
		
		String options = "//paymentmethod//div[contains(@class,'open')]/ul//li/a//span[@class='text'][contains(text(),'"
				+ paymentMethod + "')]";
		Wait.WaitForElement(driver, options);
		WebElement PaymentMethodOptions = driver.findElement(By.xpath(options));
		Utility.ScrollToElement(PaymentMethodOptions, driver);
		Utility.clickThroughJavaScript(driver, PaymentMethodOptions);
		//PaymentMethodOptions.click();
		
		String buttonName = CPReservationPage.PayButton.getText().split(" ")[0];	
	
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.PayButton), driver);
		Utility.ScrollToElement(CPReservationPage.PayButton, driver);
		Utility.clickThroughJavaScript(driver, CPReservationPage.PayButton);
		test_steps.add("Clicking on " + buttonName + " Button ");
		reslogger.info("Clicking on " + buttonName + " Button ");
		Wait.waitUntilPageLoadNotCompleted(driver, 20);
		Wait.WaitForElement(driver, OR_Reservation.NoShowSuccess_CloseButton);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", CPReservationPage.CP_Reservation_NoShowSuccessCloseButton);
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
		
		Wait.waitUntilPageLoadNotCompleted(driver, 30);
			return test_steps;
	}
	
	public void verifyFolioLineItemAmoutPaidAsperDescription(WebDriver driver,String paymentType, String amountToBePaid, ArrayList<String> testSteps) {
		 DecimalFormat df = new DecimalFormat("0.00");
		 df.setMaximumFractionDigits(2);
		 String path="//a[contains(text(), '"+paymentType+"')]/../..//td[@class='lineitem-amount']/span[(text()='$ "+amountToBePaid+"')]";
		 Wait.WaitForElement(driver, path);
		 WebElement element= driver.findElement(By.xpath(path));
		 assertTrue(element.isDisplayed(), "Failed to verify amount on folio line item");
		 testSteps.add("Verified Folio Line Item amount  : <b>" + element.getText()+ "</b>");
		 reslogger.info("Verified Folio Line Item amount  :" + element.getText());
	 }
	
	
	public void verifyFolioLineItem(WebDriver driver, String date, String category,
			String desc, String amount,ArrayList<String> test_steps) throws InterruptedException {
		reslogger.info("******************* Verify Folio Details **********************");
		
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		amount=df.format(Double.parseDouble(amount));
		reslogger.info(amount);
		String  convertedDate=Utility.parseDate(date, "dd/MM/yyyy", "dd");
		reslogger.info(convertedDate);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String LineItemSetMainPaymentPath = "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-date']/span[contains(text(),'"
				+ convertedDate + "')]" + "/../following-sibling::td[@class='lineitem-category']/span[contains(text(),'"
				+ category + "')]" + "/../following-sibling::td[@class='lineitem-description']//a[contains(text(),'"
				+ desc + "')]" + "/../following-sibling::td[@class='lineitem-amount']/span[contains(text(),'" + amount
				+ "')]";
		Wait.WaitForElement(driver, LineItemSetMainPaymentPath);
		WebElement SetLineItemElement = driver.findElement(By.xpath(LineItemSetMainPaymentPath));
		// Verified No Show Fee line item
		assertTrue(SetLineItemElement.isDisplayed(), "Failed: To Verify Line Item");
		test_steps.add(" Verified Date:<b>  " + date + "</b>");
		reslogger.info("Verified  Date: " + date);
		test_steps.add(" Verified  Category:<b>  " + category + "</b>");
		reslogger.info(" Verified  Category: " + category);
		test_steps.add("Verified  Description:<b>  " + desc + "</b>");
		reslogger.info(" Verified Description: " + desc);
		test_steps.add(" Verified Amount:<b>  " + amount + "</b>");
		reslogger.info(" Verified  Amount: " + amount);

	}
	
	public void verifyArivalDepartDate(WebDriver driver, String arivalDate, String departDate,
			ArrayList<String> test_step) {
		Elements_CPReservation res= new Elements_CPReservation(driver);
		JavascriptExecutor js = (JavascriptExecutor) driver;
		 
		
		String ariveFound = (String) js.executeScript("return arguments[0].value",res.CP_NewReservation_CheckinTextBox);
		String departFound = (String) js.executeScript("return arguments[0].value",res.CP_NewReservation_CheckoutTextBox);
		reslogger.info("Arrival Date Found : " + ariveFound);
		reslogger.info("Departure Date Found : " + departFound);
		assertEquals(Utility.parseDate(ariveFound, "MM/dd/yyyy", "MMM dd, yyyy"),
				Utility.parseDate(arivalDate, "EE, MMMM dd, yyyy", "MMM dd, yyyy"));
		test_step.add("Successfully Verified Arival Date : " + ariveFound);
		reslogger.info("Successfully Verified Arival Date : " + ariveFound);
		assertEquals(Utility.parseDate(departFound, "MM/dd/yyyy", "MMM dd, yyyy"),
				Utility.parseDate(departDate, "EE, MMMM dd, yyyy", "MMM dd, yyyy"));
		test_step.add("Successfully Verified Depart Date : " + departFound);
		reslogger.info("Successfully Verified Depart Date : " + departFound);
		
		}

	
	public String verifyRatePerNight(WebDriver driver, String checkInDate, String checkoutDate,HashMap<String,String> rates) throws ParseException {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String rateIs=null;
		double amount=0.00;
		ArrayList<String> dates= new ArrayList<String>();
		ArrayList<String> rate= new ArrayList<String>();
		dates=Utility.getAllDatesBetweenCheckInOutDates(checkInDate, checkoutDate);
		reslogger.info(dates);
		/*for (Map.Entry<String, String> entry : rates.entrySet()) {
			rateDates.add( entry.getKey());
		}
		reslogger.info(rateDates);*/
		for (Map.Entry<String, String> entry : rates.entrySet()) {
		for(int i=0;i<dates.size();i++) {
			if(entry.getKey().equals(dates.get(i)))
				rate.add(entry.getValue());
			
			}
		}
		reslogger.info(rate);
		for(int i=0;i<dates.size();i++) {
			
			double value=Double.parseDouble(rate.get(i));
			reslogger.info(value);
			 amount=amount+Double.parseDouble(rate.get(i));
			 
		}
		rateIs=df.format(amount);
		reslogger.info(rateIs);
		return rateIs;
	}

	
	public void createGroupReservation(WebDriver driver, ArrayList<String> test_steps,
			String roomClass,  String isAssign,String account,String salutation, String guestFirstName, String guestLastName, String isGuesProfile,
			String paymentMethod, String cardNumber, String nameOnCard,
			String cardExpMonthAndYear, String isGroupPolicyApplicable, String reservationType,ArrayList<String> roomNumber , String reservationNo) throws Exception {			
		if(reservationType.equalsIgnoreCase("Single")) {
			test_steps.add("============== Creating a new reservation ==============");
			click_FindRooms(driver, test_steps);
			 select_Room(driver, test_steps, roomClass,isAssign,account); 
			clickYesOrNoOnPolicyChangePopup(driver, test_steps, isGroupPolicyApplicable);
		click_Next(driver, test_steps);
		enter_MailingAddress_OnUnchecked_CreateGuestProfile( driver, test_steps,
				salutation, guestFirstName, guestLastName, isGuesProfile);
		if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
			enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
		}
		}
		else if(reservationType.equalsIgnoreCase("MRB")) {
		test_steps.add("============== Creating an MRB reservation ==============");
		clickOnAddARoomButton(driver, test_steps);
		reslogger.info("Clicking on add room");
		clickOnFindRooms(driver, test_steps);		
		
			   ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[0]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
				clickYesOrNoOnPolicyChangePopup(driver, test_steps, isGroupPolicyApplicable);
				Wait.wait15Second();
				rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
				click_Next(driver, test_steps);
				enter_MRB_MailingAddressForMRB(driver,test_steps,salutation,guestFirstName, guestLastName,isGuesProfile, roomNumber);				
				if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
					enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
				}			
		}
		
		clickBookNow(driver, test_steps);
		reservationNo=get_ReservationConfirmationNumber(driver, test_steps);
		clickCloseReservationSavePopup(driver, test_steps);			
		
	}
	
	

	public void verifyTaxExempt(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException{
		Elements_CPReservation res= new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CPTaxExempt, driver);
		boolean isExist=res.CPTaxExempt.isDisplayed();
		assertEquals(isExist,true, "Failed to verify tax Exempt");
		testSteps.add("Tax Exempt is Selected");
		reslogger.info("Tax Exempt is Selected");
		
		
	}
	
	public void clickCloseButtonOfCheckInSuccessfully(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkin_CloseButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.checkin_CloseButton), driver, 10);
		// res.CP_Reservation_NoShowSuccessCloseButton.click();
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", res.checkin_CloseButton);
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
	}
	
	public String calculationOfCancelletionAmountToBePaidForRateV2(ArrayList<String> roomCharges, String type,
			String attrValue, String roomClassSize, String paymentAmount) throws Exception{
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountToBePaid = null;
		double paidAmount = 0.00;
		double noOfNightCharges = 0.00;
		double totalRoomCharges=0.00;
		if (type.equalsIgnoreCase("number of nights")) {
			if(Integer.parseInt(attrValue)<roomCharges.size()) {
				for (int i=0;i<=Integer.parseInt(attrValue)-1;i++) {
					noOfNightCharges=noOfNightCharges+Double.valueOf(roomCharges.toArray()[i].toString());
					paidAmount = noOfNightCharges;
				}	
			} else if(Integer.parseInt(attrValue)>roomCharges.size()) {
				for(String str: roomCharges) {					
					totalRoomCharges=totalRoomCharges+Double.parseDouble(str);
				}	
				paidAmount=totalRoomCharges;
			}
			
			if(Double.parseDouble(paymentAmount)<paidAmount) {
				paidAmount=paidAmount-Double.parseDouble(paymentAmount);
			}else if(Double.parseDouble(paymentAmount)>paidAmount) {
				paidAmount=Double.parseDouble(paymentAmount)-paidAmount;
			}
		} else if (type.equalsIgnoreCase("flat fee")) {
			paidAmount = Double.parseDouble(attrValue) *Double.valueOf(roomClassSize);
			if(Double.parseDouble(paymentAmount)<paidAmount) {
				paidAmount=paidAmount-Double.parseDouble(paymentAmount);
			}else if(Double.parseDouble(paymentAmount)>paidAmount) {
				paidAmount=Double.parseDouble(paymentAmount)-paidAmount;
			}
		} else if (type.equalsIgnoreCase("percent of stay")) {
			for(String str: roomCharges) {
				totalRoomCharges=totalRoomCharges+Double.parseDouble(str);
			}			
			paidAmount = (Double.parseDouble(attrValue) * totalRoomCharges) / 100;
			if(Double.parseDouble(paymentAmount)<paidAmount) {
				paidAmount=paidAmount-Double.parseDouble(paymentAmount);
			}else if(Double.parseDouble(paymentAmount)>paidAmount) {
				paidAmount=Double.parseDouble(paymentAmount)-paidAmount;
			}
		}
		amountToBePaid = df.format(paidAmount);
		return amountToBePaid;

	}
	
	
	
	public void proceesToCancellationPayment(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.wait10Second();
			Wait.WaitForElement(driver, OR_Reservation.ProceedToPaymentButton);
			Utility.ScrollToElement(res.ProceedToPaymentButton, driver);
			Utility.clickThroughJavaScript(driver, res.ProceedToPaymentButton);
			test_steps.add("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
			reslogger.info("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);

	}

<<<<<<< HEAD
	public void confirmCancellation(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.WaitForElement(driver, OR_Reservation.ConfirmedNoShowButton);
			Utility.ScrollToElement(res.CP_Reservation_ConfirmButton, driver);
			Utility.clickThroughJavaScript(driver, res.CP_Reservation_ConfirmButton);
			test_steps.add("Clicking on  CONFIRM CANCELLATION Button");
			reslogger.info("Clicking on CONFIRM  CANCELLATION  Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);	
	}
   
	public void clickPaybutton(WebDriver driver, ArrayList test_steps, String amount) throws InterruptedException {
		String path="//button[contains(text(),'Pay $ "+amount+"')]";
		Wait.WaitForElement(driver, path);
		WebElement element=driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);		
		element.click();
		test_steps.add("Clicking on "+element.getText());
		reslogger.info("Clicking on " +element.getText());
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);	
		
	}
	
	public void clickRefundbutton(WebDriver driver, ArrayList test_steps, String amount) throws InterruptedException {
		String path="//button[contains(text(),'Refund $ "+amount+"')]";
		Wait.WaitForElement(driver, path);
		WebElement element=driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);		
		//Utility.clickThroughJavaScript(driver, element);
		element.click();
		test_steps.add("Clicking on "+element.getText());
		reslogger.info("Clicking on " +element.getText());
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);	
		
	}
	
	public void clickCloseButtonOfCancellationSuccessfully(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.cancellation_CloseButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.cancellation_CloseButton), driver, 10);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", res.cancellation_CloseButton);
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
	}
	
	public void verifyCancellationReservationOnHistoryTab(WebDriver driver, ArrayList<String> testSteps)
	{
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.cancellationReservation);
		assertTrue(elements.cancellationReservation.isDisplayed(),"Failed to verify checkin reservation on history");
		testSteps.add("Verified Cancelled this reservation displayed on history");
		reslogger.info("Verified Cancelled this reservation displayed on history");
		
	}
	
	
	public void verifyHistoryWithCancellationPayment(WebDriver driver, ArrayList<String> test_steps, String amount,String paymentType, String paymentMethod,String type) {
		 String str=null;
		
		 if(paymentMethod.equalsIgnoreCase("MC")) {
			 if(type.equalsIgnoreCase("Refund")) {
			 str="Made a cancellation refund of $"+amount+" using "+paymentType+"";}
			 else if(type.equalsIgnoreCase("Pay")) {
				 str="Made a cancellation payment of $"+amount+" using "+paymentType+"";
			 }
		 }
		 String path = "//span[contains(text(),'" + str + "')]";
		 WebElement element = driver.findElement(By.xpath(path));
		 assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Description");
		 test_steps.add("'History Tab' Verified Description: <b>" + element.getText() + "</b>");
		 reslogger.info("'History Tab' Verified Description : " + element.getText());
	 }
	 
=======
	
	public String calculationOfCheckInAmountToBePaidForRateV2(String balance, String attrValue)
	 {
	         DecimalFormat df = new DecimalFormat("0.00");
	        df.setMaximumFractionDigits(2);
	        String amountToBePaid = null;
	        double paidAmount = 0.00;
	        double totalRoomCharges=0.00;
	        paidAmount = (Double.parseDouble(attrValue) * Double.parseDouble(balance)) / 100;
	        amountToBePaid = df.format(paidAmount);
	        return amountToBePaid;       
	 }
	
	
	public void verifyRoomUnassignedOrAlreadyBookedOrDirty(WebDriver driver) throws InterruptedException
    {
        boolean isUnassigned = Utility.isElementPresent(driver,
                By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
        reslogger.info("isUnassigned:" + isUnassigned);
        //String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'checked in to this room')]";
        String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'occupying')]";
        boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
        reslogger.info("isRoomBooked:" + isRoomBooked);
        boolean isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.cP_ReservationDirtyMsg));
        reslogger.info("isRoomDirty:" + isRoomDirty);
        if (isUnassigned) {
            roomUnAssigned(driver, isUnassigned);
        }
        if (isRoomBooked) {
            roomOccupiedWithOtherReservation(driver, isRoomBooked);
        }   
        if (isRoomDirty) {
            dirtyPopupModelClickConfirmButton(driver, test_steps, isRoomDirty);
        }
        Wait.waitUntilPageLoadNotCompleted(driver, 40);   
    }
	
	public void verifyAmountOnPaymentScreen(WebDriver driver, String amountToBePaid, ArrayList<String> testSteps) throws InterruptedException
	 {
	     DecimalFormat df = new DecimalFormat("0.00");
	     df.setMaximumFractionDigits(2);
	     String amount=getAmountFromPaymentScreen(driver);
	     amount = df.format(Double.parseDouble(amount));
	     assertEquals(amount,amountToBePaid, "Failed to verify checkin Amount");
	     testSteps.add("Verified chekecin amount paid : <b>" + amountToBePaid+ "</b>");
	     reslogger.info("Verified chekecin amount paid : " + amountToBePaid);
	 }
	
	public void clickOnConfirmCheckInButton(WebDriver driver,ArrayList<String> testSteps) throws InterruptedException {
        Elements_CPReservation reservation = new Elements_CPReservation(driver);
        Wait.WaitForElement(driver, OR_Reservation.CheckInConfirmButton);
        Utility.ScrollToElement(reservation.CheckInConfirmButton, driver);
        reservation.CheckInConfirmButton.click();
        testSteps.add("Click on confirm checkin button");
        reslogger.info("Click on confirm checkin button");
    }
	
	public String getAmountFromPaymentScreen(WebDriver driver) throws InterruptedException {
        String amount = null;
        Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
        Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_Amount);
        Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount, driver);
        // Get Amount
        amount = CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
        reslogger.info("Get Amount from Payment Page Is : " + amount);
        return amount;

 

    }
	
	 public void verifyFolioLineItemAmoutPaid(WebDriver driver,String paymentType, String amountToBePaid, ArrayList<String> testSteps) {
	     DecimalFormat df = new DecimalFormat("0.00");
	     df.setMaximumFractionDigits(2);
	     String path="//span[contains(text(), '"+paymentType+"')]/../..//td[@class='lineitem-amount']/span[(text()='$ "+amountToBePaid+"')]";
	     Wait.WaitForElement(driver, path);
	     WebElement element= driver.findElement(By.xpath(path));
	     assertTrue(element.isDisplayed(), "Failed to verify amount on folio line item");
	     testSteps.add("Verified Folio Line Item amount  : <b>" + element.getText()+ "</b>");
	     reslogger.info("Verified Folio Line Item amount  :" + element.getText());
	 }
	 
	 public void verify_FolioPayment(WebDriver driver, ArrayList<String> testSteps,String expectedAmount) throws InterruptedException
	    {
	       
	        String path="//label[contains(text(),'Payments')]/following-sibling::span[@class='pamt']/span[@class='pamt' and contains(text(),'$ "+expectedAmount+"')]";       
	        WebElement element= driver.findElement(By.xpath(path));
	        assertTrue(element.isDisplayed(), "Failed to verify payment");
	        testSteps.add("Verified Payment On Folio Tab: <b>" +expectedAmount+"</b>" );
	        reslogger.info("Verified Payment On Folio Tab: " +expectedAmount);
	    }
	 public void verifyChekInReservationOnHistoryTab(WebDriver driver, ArrayList<String> testSteps)
	    {
	        Elements_CPReservation elements = new Elements_CPReservation(driver);
	        Wait.WaitForElement(driver, OR_Reservation.checkInReservation);
	        assertTrue(elements.checkInReservation.isDisplayed(),"Failed to verify checkin reservation on history");
	        testSteps.add("Verified Checked in this reservation displayed on history");
	        reslogger.info("Verified Checked in this reservation displayed on history");
	       
	    }
	 
	 public void verifyHistoryWithCapturedPayment(WebDriver driver, ArrayList<String> test_steps, String amount,String paymentType, String paymentMethod) {
	     String str=null;
	     if(paymentMethod.equalsIgnoreCase("MC")) {
	         str = "Captured payment for $"+amount+" using ("+paymentType+")";
	     }else if(paymentMethod.equalsIgnoreCase("Cash")) {
	         str = "Made a payment $"+amount+" using "+paymentType+"";
	     }
	     String path = "//span[contains(text(),'" + str + "')]";
	     WebElement element = driver.findElement(By.xpath(path));
	     assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Description");
	     test_steps.add("'History Tab' Verified Description: <b>" + element.getText() + "</b>");
	     reslogger.info("'History Tab' Verified Description : " + element.getText());
	 }
	
	 public void verifyNoPaymentAtFolioLineItem(WebDriver driver, ArrayList<String> testSteps, String checkInDate,String paymentType)
	    {
	        String convertedDate = Utility.parseDate(checkInDate, "dd/MM/yyyy", "EE MMM dd, yyyy");
	        String path="//span[text()='"+convertedDate+"']/../..//span[text()='"+paymentType+"']/../..//td[@class='lineitem-amount']";
	        if(!(Utility.isElementPresent(driver, By.xpath(path)))){
	            testSteps.add("No Payment Aplied");
	            reslogger.info("No Payment Aplied");
	                }
	    }
	 
	 public void verifyDepositAtHistoryTab(WebDriver driver, ArrayList<String> testSteps, String payment, String paymentType) {
	       
	        String depositText = "Made a deposit payment of $"+payment+" using "+paymentType+"";
	        String path = "//span[contains(text(),'"+depositText+"')]";
	        WebElement element= driver.findElement(By.xpath(path));
	        assertTrue(element.isDisplayed(), "Failed to verify deposit amopunt on History Screen");
	        testSteps.add("Verified Payment On Folio Tab: <b>" +element.getText()+"</b>" );
	        reslogger.info("Verified Payment On Folio Tab: " +element.getText());
	       
	 }
	 
	 public ArrayList<String> verifyPopupChangeInCost1(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		 Elements_CPReservation res = new Elements_CPReservation(driver);
		 reslogger.info("Verifying Popup Appear for Change In Cost");
		 if(driver.findElements(By.xpath(OR_Reservation.CP_VerifyChangeCostPopup)).size()>0) {
			 Wait.wait2Second();
			 Wait.explicit_wait_visibilityof_webelement(res.CP_VerifyChangeCostPopup, driver);
			 Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_VerifyChangeCostPopup), driver);
			 String text = res.CP_VerifyChangeCostPopup.getText();
			 Utility.app_logs.info(text);
			 String[] parts = text.split("from");
			 String message = parts[0];
			 assertEquals(message, "Are you sure you wish to change the total cost of the stay ",
					 "Failed : to verify amount change popup message");
			 test_steps.add("Verified pop up displayed for Change in Total Cost");
			 // Click on Yes Button
			 //Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutAllButton_ConfirmationMsg);
			 String xpath="//div[contains(text(),'Are you sure you wish to change the total cost of the stay from')]/..//button[text()='Yes']";
			 if(driver.findElements(By.xpath(xpath)).size()>0) {
				 Wait.waitForElementToBeClickable(By.xpath(xpath), driver);
				 driver.findElement(By.xpath(xpath)).click();
				 test_steps.add("Click on Yes");
				 Wait.waitForElementToBeInvisibile(By.xpath(OR.Toaster_Message_Xpath), driver);
			 }
		 }
		 return test_steps;
	 }
	 
	 public void VerifyFoliocalculateRate(WebDriver driver, ArrayList<String> test_steps, String folioOption
	            ) throws Exception {
	        Elements_CPReservation res = new Elements_CPReservation(driver);
	        WebDriverWait wait = new WebDriverWait(driver, 25);
	        Wait.wait2Second();

	        try {
	            if(folioOption.equalsIgnoreCase("Recalculate Rate"))
	            {
	                driver.findElement(By.xpath("//*[contains(@name,'folio-option-radio-btn')]/..")).click();
	            }
	            else {
	                reslogger.info("Recalculate Rate radio button is not selected");
	            }
	            if(folioOption.equalsIgnoreCase("Change only for added/removed dates"))
	            {
	                driver.findElement(By.xpath("(//*[contains(@name,'folio-option-radio-btn')])[2]/..")).click();
	            }
	            else {
	                reslogger.info("Change only for added/removed dates radio button is not selected");
	            }
	            if(folioOption.equalsIgnoreCase("No Rate Change"))
	            {
	                driver.findElement(By.xpath("(//*[contains(@name,'folio-option-radio-btn')])[3]/..")).click();
	            }
	            else {
	                reslogger.info("No Rate Change radio button is not selected");
	            }
	            
	            // Click Save Button
	            reslogger.info("Clicking Save Button");
	            Wait.explicit_wait_visibilityof_webelement(res.CP_SaveRoomNo, driver);
	            Utility.ScrollToElement(res.CP_SaveRoomNo, driver);
	            res.CP_SaveRoomNo.click();
	            test_steps.add("Click on Save Room Number Button");

	 

	        } catch (InterruptedException e) {
	            // TODO Auto-generated catch block
	            e.printStackTrace();
	        }
	    }
		public ArrayList<String> ClickEditStayInfoMRBLastLineItem(WebDriver driver, ArrayList<String> steps)
				throws InterruptedException, ParseException {
			String chnageStayDetailsButton="//button[text()='Check In']/../button/span";
			Wait.WaitForElement(driver, chnageStayDetailsButton);
			int count =driver.findElements(By.xpath(chnageStayDetailsButton)).size();
			chnageStayDetailsButton="(//button[text()='Check In']/../button/span)["+count+"]";
			driver.findElement(By.xpath(chnageStayDetailsButton)).click();
			String chnageStayDetails="//button[text()='Check In']/../button/span/../..//li[contains(text(),'Change Stay Details')]";
			count =driver.findElements(By.xpath(chnageStayDetails)).size();
			chnageStayDetails="(//button[text()='Check In']/../button/span/../..//li[contains(text(),'Change Stay Details')])["+count+"]";
			driver.findElement(By.xpath(chnageStayDetails)).click();
			reslogger.info("Click Stay Info Edit button");
			steps.add("Click Stay Info Edit button");
			return steps;
		}
		
		 public void checkFolioLineItemsWithDates(WebDriver driver, ArrayList<String> test_steps,
		            String checkInDate, String checkOutDate) throws Exception {
		        ArrayList<String> dates = Utility.getAllDatesBetweenCheckInOutDates(checkInDate, checkOutDate);
		        for (String string : dates) {
		            String convertDate = Utility.parseDate(string, "dd/MM/yyyy", "EE MMM dd, yyyy");
		            String lineItemXpath = "//td[@class='lineitem-date']/span[text()='"+convertDate
		                    +"']/../../td[@class='lineitem-category']/span[text()='Room Charge']";
		            List<WebElement> lineItems = driver.findElements(By.xpath(lineItemXpath));
		            if (lineItems.size()>0) {
		                test_steps.add("<b>Room Charge</b> folio line item is displayed for the date <b>"+string+"</b>");
		            } else {
		                test_steps.add("<b>Room Charge</b> folio line item is not displayed for the date <b>"+string+"</b>");
		            }
		        }
		    }
		 
		 public void selectMRBLastFolio(WebDriver driver, ArrayList<String> test_steps) {
			 String folio=" //span[contains(text(),'Guest Folio For ')]/..";

			String lastFolio="//span[contains(text(),'Guest Folio For ')]/../..";
			Wait.WaitForElement(driver, folio);
			driver.findElement(By.xpath(folio)).click();
			Wait.WaitForElement(driver, lastFolio);
			int count =driver.findElements(By.xpath(lastFolio)).size();
			lastFolio="(//span[contains(text(),'Guest Folio For ')]/../..)["+count+"]";
			driver.findElement(By.xpath(lastFolio)).click();
		 }
	 

		 public void select_RoomWithRatePlanRulesValidationAccount(WebDriver driver, ArrayList test_steps, String RoomClass, String IsAssign, String Account,String isAccountPolicyApplicable,String checkinColor,String checkoutColor,String minStaycolor,int minNights)
					throws InterruptedException {
				reslogger.info(RoomClass);
				String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
						+ "')]/../../div[2]/span";
				reslogger.info(room);
				Wait.WaitForElement(driver, room);

				String rooms = driver.findElement(By.xpath(room)).getText();
				reslogger.info(rooms);
				String[] roomsCount = rooms.split(" ");
				int count = Integer.parseInt(roomsCount[0].trim());
				if (count > 0) {
					String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
							+ "')]/../../../following-sibling::div/div/select";

					String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ RoomClass.trim() + "')]/following-sibling::span";
					reslogger.info(rulessize);
					int ruleCount = driver.findElements(By.xpath(rulessize)).size();
					WebElement ele = driver.findElement(By.xpath(sel));
					test_steps.add("Selected room class : " + RoomClass);
					reslogger.info("Selected room class : " + RoomClass);
					if (IsAssign.equalsIgnoreCase("No")) {
						String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
								+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
						Wait.WaitForElement(driver, expand);
						driver.findElement(By.xpath(expand)).click();

						String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
								+ RoomClass
								+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
						Wait.WaitForElement(driver, unAssign);
						driver.findElement(By.xpath(unAssign)).click();
						test_steps.add("Selected room number : Unassigned");
						reslogger.info("Selected room number : Unassigned");
					} else {
						String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
								+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
						reslogger.info(roomnum);
						int count1 = driver.findElements(By.xpath(roomnum)).size();
						Random random = new Random();
						int randomNumber = random.nextInt(count1 - 1) + 1;
						reslogger.info("count : " + count1);
						reslogger.info("randomNumber : " + randomNumber);
						Wait.WaitForElement(driver, sel);

						String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
								+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
						Wait.WaitForElement(driver, expand);
						driver.findElement(By.xpath(expand)).click();

						String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
								+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
								+ randomNumber + "]/a/span";
						Wait.WaitForElement(driver, roomNumber);
						driver.findElement(By.xpath(roomNumber)).click();
					}

					String select = "//section[@class='ir-roomClassDetails manual-override']//span[text()='"
							+ RoomClass + "']/../../../following-sibling::div//span[contains(text(),'SELECT')]";
					if(driver.findElements(By.xpath(select)).size()>0) {
					Wait.WaitForElement(driver, select);
					driver.findElement(By.xpath(select)).click();
					}else {
						String selected="//section[@class='ir-roomClassDetails manual-override']//span[text()='"+RoomClass+"']/../../../following-sibling::div/div//span[contains(@data-bind,'SELECT')]/..";
						Wait.WaitForElement(driver, selected);
						driver.findElement(By.xpath(selected)).click();
					}

					String loading = "(//div[@class='ir-loader-in'])[2]";
					int counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 10) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
					reslogger.info("Waited to loading symbol");

					reslogger.info("Rule Count : " + ruleCount);
					if (ruleCount > 1) {
						Wait.wait5Second();
						String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";
						
						if(minStaycolor.equalsIgnoreCase("Red")) {
							String min="//p[text()='Selecting this room will violate the following rules']/..//div[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'"+minNights+" NIGHT')]";
							Wait.WaitForElement(driver, min);
							test_steps.add("Verified min stay rule in the rules broken pop up as : "+minNights+" night");
							reslogger.info("Verified min stay rule in the rules broken pop up as : "+minNights+" night");
						}
						
						if(checkinColor.equalsIgnoreCase("Red")) {
							String min="//p[text()='Selecting this room will violate the following rules']/..//div";
							Wait.WaitForElement(driver, min);
							String nocheckin=driver.findElement(By.xpath(min)).getText();
							if(nocheckin.contains("No Check In")) {
							test_steps.add("Verified no check in rule in the rules broken pop up");
							reslogger.info("Verified no check in rule in the rules broken pop up");
							}
						}
						
						if(checkoutColor.equalsIgnoreCase("Red")) {
							String min="//p[text()='Selecting this room will violate the following rules']/..//div";
							Wait.WaitForElement(driver, min);
							String nocheckin=driver.findElement(By.xpath(min)).getText();
							if(nocheckin.contains("No Check out")) {
							test_steps.add("Verified no check in rule in the rules broken pop up");
							reslogger.info("Verified no check in rule in the rules broken pop up");
							}
						}
						
						if (driver.findElements(By.xpath(rules)).size() > 0) {
							Wait.wait2Second();
							driver.findElement(By.xpath(rules)).click();
							test_steps.add("Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
							reslogger.info(
									"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

							loading = "(//div[@class='ir-loader-in'])[2]";
							counter = 0;
							while (true) {
								if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
									break;
								} else if (counter == 4) {
									break;
								} else {
									counter++;
									Wait.wait2Second();
								}
							}
						}
					}
					if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
						String policy ="";						
						if(isAccountPolicyApplicable.equalsIgnoreCase("yes")) {
						policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
						}else{
							policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='No']";
						}
						Wait.WaitForElement(driver, policy);
						driver.findElement(By.xpath(policy)).click();
						test_steps.add("Based on the changes made, new policies are applicable.? : yes");
						reslogger.info("Based on the changes made, new policies are applicable.? : yes");

						loading = "(//div[@class='ir-loader-in'])[2]";
						counter = 0;
						while (true) {
							if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
								break;
							} else if (counter == 3) {
								break;
							} else {
								counter++;
								Wait.wait2Second();
							}
						}
					}

				} else {
					test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
					reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
				}
			}
		 
		 public void createGroupReservation(WebDriver driver, ArrayList<String> test_steps,
                 String roomClass,  String isAssign,String account,String salutation, String guestFirstName, String guestLastName, String isGuesProfile,
                 String paymentMethod, String cardNumber, String nameOnCard,
                 String cardExpMonthAndYear, String isGroupPolicyApplicable, String reservationType,ArrayList<String> roomNumber , String reservationNo) throws Exception {           
             if(reservationType.equalsIgnoreCase("Single")) {
                 test_steps.add("============== Creating a new reservation ==============");
                 click_FindRooms(driver, test_steps);
                  select_Room(driver, test_steps, roomClass,isAssign,account);
                 clickYesOrNoOnPolicyChangePopup(driver, test_steps, isGroupPolicyApplicable);
             click_Next(driver, test_steps);
             enter_MailingAddress_OnUnchecked_CreateGuestProfile( driver, test_steps,
                     salutation, guestFirstName, guestLastName, isGuesProfile);
             if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
                 enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
             }
             }
             else if(reservationType.equalsIgnoreCase("MRB")) {
             test_steps.add("============== Creating an MRB reservation ==============");
             clickOnAddARoomButton(driver, test_steps);
             reslogger.info("Clicking on add room");
             clickOnFindRooms(driver, test_steps);       
            
                    ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[0]);
                     selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
                     clickYesOrNoOnPolicyChangePopup(driver, test_steps, isGroupPolicyApplicable);
                     Wait.wait15Second();
                     rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
                     selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
                     click_Next(driver, test_steps);
                     enter_MRB_MailingAddressForMRB(driver,test_steps,salutation,guestFirstName, guestLastName,isGuesProfile, roomNumber);               
                     if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
                         enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
                     }           
             }
            
             clickBookNow(driver, test_steps);
             reservationNo=get_ReservationConfirmationNumber(driver, test_steps);
             clickCloseReservationSavePopup(driver, test_steps);           
            
         }
		 
			public String verifyStayInfoPromoCodeIsDisplayed(WebDriver driver, ArrayList<String> test_steps,boolean isDisplayed) {
				
				String path = "//div[@id='stayinfo']//span[contains(@data-bind,'text: promoCode')]";
				Wait.explicit_wait_xpath(path, driver);
				Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
				String promoCode = driver.findElement(By.xpath(path)).getText();
				assertEquals(!promoCode.isEmpty(), isDisplayed, "Failed PromoCode Not Displayed");
				reslogger.info("Successfully Verified Promo Code is Displayed : " + promoCode);
				test_steps.add("Successfully Verified Promo Code is Displayed : " + promoCode);
				return promoCode;

				
			}

>>>>>>> develop
}
