package com.innroad.inncenter.pageobjects;

import static org.testng.Assert.assertEquals;
import static org.testng.Assert.assertFalse;
import static org.testng.Assert.assertNotEquals;
import static org.testng.Assert.assertTrue;

import java.io.BufferedInputStream;
import java.io.File;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.text.DateFormat;
import java.text.DecimalFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Random;
import java.util.TimeZone;

import org.apache.commons.lang3.StringUtils;
import org.apache.log4j.Logger;
import org.apache.pdfbox.cos.COSDocument;
import org.apache.pdfbox.pdfparser.PDFParser;
import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.util.PDFTextStripper;
import org.apache.pdfbox.util.PDFTextStripperByArea;
import org.eclipse.jetty.websocket.api.SuspendToken;
import org.apache.tools.ant.taskdefs.condition.Or;
import org.hamcrest.CoreMatchers;
import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.Keys;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.interactions.Actions;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.Select;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.testng.Assert;
import org.testng.SkipException;

import com.innroad.inncenter.pages.NewTapeChart;
import com.innroad.inncenter.properties.OR;
import com.innroad.inncenter.properties.OR_Reservation;
import com.innroad.inncenter.testcore.TestCore;
import com.innroad.inncenter.utils.ESTTimeZone;
import com.innroad.inncenter.utils.Utility;
import com.innroad.inncenter.waits.Wait;
import com.innroad.inncenter.webelements.Elements_CPReservation;
import com.innroad.inncenter.webelements.Elements_GuestHistory;
import com.innroad.inncenter.webelements.Elements_Reservation;
import com.innroad.inncenter.webelements.Elements_Reservation_SearchPage;
import com.innroad.inncenter.webelements.Elements_TapeChart;
import com.innroad.inncenter.webelements.WebElements_TaskList;
import bsh.util.Util;

import com.innroad.inncenter.webelements.WebElements_header_Panel_Elements;

public class CPReservationPage {
	ArrayList<String> test_steps = new ArrayList<>();
	public static Logger reslogger = Logger.getLogger("CPReservationPage");

	public void verifyCheckOutPopup(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		test_steps.add("Verify CheckOut PopUp is Display or not");
		String checkOutPopup = "//h4[text()='Check Out']";
		Wait.wait3Second();
		WebElement checkOutElement = driver.findElement(By.xpath(checkOutPopup));

		if (checkOutElement.isDisplayed()) {
			test_steps.add("Verified CheckOut PopUp is Display");
		}
	}

	public void verifyCheckoutRoomNo(WebDriver driver, ArrayList<String> testSteps, ArrayList<String> roomNos)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String room = "//span[contains(text(),'Checked out ')]/../following-sibling::td//span";
		List<WebElement> element = driver.findElements(By.xpath(room));
		for (int i = 0; i < element.size(); i++) {
			String value = element.get(i).getText();
			if (value.contains(roomNos.get(0))) {
				testSteps.add("History for the guest who has checked out with roomNo is Updated " + roomNos.get(0));
			} else if (value.contains(roomNos.get(1))) {
				testSteps.add("History for the guest who has checked out with roomNo is Updated " + roomNos.get(1));
			} else {
				testSteps.add("History for the guest who has checked out with roomNo is not Updated " + roomNos.get(0)
						+ "or" + roomNos.get(1));
			}
		}

	}

	public ArrayList<String> verifyReservationDropDown(WebDriver driver, String[] value) throws InterruptedException {
		ArrayList<String> testSteps = new ArrayList<>();
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Wait.wait3Second();
		// Utility.clickThroughAction(driver,
		// driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ReservationStatusDropDown), driver);
		elementReservation.ReservationStatusDropDown.click();
		testSteps.add("Cick on Reservation Status Drop Down Button");
		Wait.wait1Second();
		int test = elementReservation.reservationStatusField.size();
		for (int i = 0; i < test; i++) {
			String value1 = elementReservation.reservationStatusField.get(i).getText();
			// assertEquals(value1,value[i]);
			if (value1.equals(value[i])) {
				testSteps.add("Successfully Verify Drop Down List Contain " + value[i]);
			} else {
				testSteps.add("Failed to verify Drop Down List Contain " + value[i]);

			}
		}

		return testSteps;
	}

	public ArrayList<String> click_NewReservation(WebDriver driver, ArrayList<String> test_steps)

			throws InterruptedException {
		Wait.wait5Second();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation), driver);
		try {
			res.CP_NewReservation.click();
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_FindRooms);
		} catch (Exception e) {
			e.printStackTrace();
			Utility.clickThroughJavaScript(driver, res.CP_NewReservation);
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_FindRooms);
		}
		test_steps.add("Clicking on New Reservation");
		reslogger.info("Clicking on New Reservation");
//		try {
//			Wait.waitForElementToBeGone(driver, res.CP_NewReservation, 50);
//			// Wait.explicit_wait_visibilityof_webelement(res.CP_NewReservation,
//			// driver);
//		} catch (Exception e) {
//			Wait.explicit_wait_visibilityof_webelement(res.CP_NewReservation, driver);
//			res.CP_NewReservation.click();
//			reslogger.info("Again Click on New Reservation button");
//			Wait.waitForElementToBeGone(driver, res.CP_NewReservation, 50);
//		}
		return test_steps;
	}

	public void select_CheckInDate(WebDriver driver, ArrayList<String> test_steps, String CheckInDate)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

//		String loading = "(//div[@class='ir-loader-in'])[2]";
//		int counter = 0;
//		while (true) {
//			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
//				break;
//			} else if (counter == 40) {
//				break;
//			} else {
//				counter++;
//				Wait.wait2Second();
//			}
//		}

		// ReservationV2 reservationV2 = new ReservationV2();
		// reservationV2.waitForLoadingSymbol(driver);
		/*
		 * String loading = "(//div[@class='ir-loader-in'])[2]"; int counter = 0; while
		 * (true) { if (!driver.findElement(By.xpath(loading)).isDisplayed()) { break; }
		 * else if (counter == 40) { break; } else { counter++; Wait.wait2Second(); } }
		 */

		reslogger.info("Waited to loading symbol");
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CheckinCal);
		Utility.ScrollToElement(res.CP_NewReservation_CheckinCal, driver);
		res.CP_NewReservation_CheckinCal.click();
		String monthYear = Utility.get_MonthYear(CheckInDate);
		String day = Utility.getDay(CheckInDate);
		reslogger.info(monthYear);
		String header = null, headerText = null, next = null, date;
		for (int i = 1; i <= 12; i++) {
			header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
			headerText = driver.findElement(By.xpath(header)).getText();
			if (headerText.equalsIgnoreCase(monthYear)) {
				date = "//td[contains(@class,'day') and text()='" + day + "']";
				Wait.WaitForElement(driver, date);
				int size = driver.findElements(By.xpath(date)).size();
				for (int k = 1; k <= size; k++) {
					date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + k + "]";
					String classText = driver.findElement(By.xpath(date)).getAttribute("class");
					if (!classText.contains("old")) {
						driver.findElement(By.xpath(date)).click();
						test_steps.add("Selecting checkin date : " + CheckInDate);
						reslogger.info("Selecting checkin date : " + CheckInDate);
						break;
					}
				}
				break;
			} else {
				next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
				Wait.WaitForElement(driver, next);
				driver.findElement(By.xpath(next)).click();
				Wait.wait2Second();
			}
		}
	}

	public void select_CheckoutDate(WebDriver driver, ArrayList test_steps, String CheckoutDate)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CheckoutCal);
		Utility.ScrollToElement(res.CP_NewReservation_CheckoutCal, driver);
		res.CP_NewReservation_CheckoutCal.click();
		String monthYear = Utility.get_MonthYear(CheckoutDate);
		String day = Utility.getDay(CheckoutDate);
		reslogger.info(monthYear);
		String header = null, headerText = null, next = null, date;
		for (int i = 1; i <= 12; i++) {
			header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
			headerText = driver.findElement(By.xpath(header)).getText();
			if (headerText.equalsIgnoreCase(monthYear)) {
				date = "//td[contains(@class,'day') and text()='" + day + "']";
				Wait.WaitForElement(driver, date);
				int size = driver.findElements(By.xpath(date)).size();
				for (int k = 1; k <= size; k++) {
					date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + k + "]";
					String classText = driver.findElement(By.xpath(date)).getAttribute("class");
					if (!classText.contains("old")) {
						driver.findElement(By.xpath(date)).click();
						test_steps.add("Selecting checkout date : " + CheckoutDate);
						reslogger.info("Selecting checkout date : " + CheckoutDate);
						break;
					}
				}

				break;
			} else {
				next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
				Wait.WaitForElement(driver, next);
				driver.findElement(By.xpath(next)).click();
				Wait.wait2Second();
			}
		}
	}

	public ArrayList<String> enter_Adults(WebDriver driver, ArrayList<String> test_steps, String Adults) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Adults), driver);
		res.CP_NewReservation_Adults.clear();
		res.CP_NewReservation_Adults.sendKeys(Adults);
		test_steps.add("Enter No of adults : " + Adults);
		reslogger.info("Enter No of adults : " + Adults);
		return test_steps;
	}

	public ArrayList<String> enter_Children(WebDriver driver, ArrayList<String> test_steps, String Children) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Children), driver);
		res.CP_NewReservation_Children.clear();
		res.CP_NewReservation_Children.sendKeys(Children);
		test_steps.add("Enter No of Children : " + Children);
		reslogger.info("Enter No of Children : " + Children);
		return test_steps;

	}

	public ArrayList<String> select_Rateplan(WebDriver driver, ArrayList<String> test_steps, String Rateplan,
			String PromoCode) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Rateplan);
		res.CP_NewReservation_Rateplan.click();
		String rate = "//label[contains(text(),'Rate Plan / Promo')]//..//preceding-sibling::div//span[contains(text(),'"
				+ Rateplan + "')]/..";
		reslogger.info(rate);
		Wait.WaitForElement(driver, rate);
		Wait.wait2Second();
		driver.findElement(By.xpath(rate)).click();
		test_steps.add("Selecting the rateplan : " + Rateplan);
		reslogger.info("Selecting the rateplan : " + Rateplan);
		if (Rateplan.contains("Promo")) {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PromoCode);
			res.CP_NewReservation_PromoCode.clear();
			res.CP_NewReservation_PromoCode.sendKeys(PromoCode);
			test_steps.add("Enter promocode : " + PromoCode);
			reslogger.info("Enter promocode : " + PromoCode);
		}
		return test_steps;
	}

	public ArrayList<String> Enter_RateAmount(WebDriver driver, ArrayList<String> test_steps, String Rateamount)
			throws InterruptedException {
		String Amountinput = "//label[contains(text(),'Rate Amount')]/preceding-sibling::input[@data-bind = 'value: adhocRateAmount']";
		Wait.WaitForElement(driver, Amountinput);
		driver.findElement(By.xpath(Amountinput)).sendKeys(Rateamount);
		test_steps.add("Entering the rateAmount : " + Rateamount);
		reslogger.info("Entering the rateAmount : " + Rateamount);
		return test_steps;
	}

	public ArrayList<String> clickOnFindRooms(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		try {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_FindRooms);
			res.CP_NewReservation_FindRooms.click();
//			executor.executeScript("arguments[0].click();", res.CP_NewReservation_FindRooms);
		} catch (Exception e) {

			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_FindRooms1);
			executor.executeScript("arguments[0].click();", res.CP_NewReservation_FindRooms1);
		}

		test_steps.add("Clicking on FindRooms");
		reslogger.info("Clicking on FindRooms");
		/*
		 * int count = 0; while (true) { if (driver.findElement(By.
		 * xpath("//section[@class='ir-roomClassDetails manual-override']")).
		 * isDisplayed()) { break; } else if (count == 20) { break; } else { count++;
		 * Wait.wait1Second(); } } reslogger.info("Waited to loading symbol");
		 */return test_steps;
	}

	public void DepositOverrideToggle(WebDriver driver) {
		Wait.WaitForElement(driver, OR.DepositOverrideToggle);
		Wait.waitForElementToBeClickable(By.xpath(OR.DepositOverrideToggle), driver);
		driver.findElement(By.xpath(OR.DepositOverrideToggle)).click();
	}

	// updated by farhan
	public ArrayList<String> selectRoom(WebDriver driver, ArrayList<String> test_steps, String RoomClass,
			String IsAssign, String Account) throws InterruptedException {

		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//div[2]//span[1]";
		Utility.app_logs.info("IsAssign: " + IsAssign);
		reslogger.info(room);
		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		Utility.app_logs.info("Rooms: " + rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		Utility.app_logs.info("Rooms count: " + count);
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]//..//..//..//following-sibling::div//div//select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"

					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);

			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else if (IsAssign.equalsIgnoreCase("Yes")) {

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div/button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				Wait.waitForElementToBeClickable(By.xpath(expand), driver);
				WebElement elementExpand = driver.findElement(By.xpath(expand));
				Utility.ScrollToElement_NoWait(elementExpand, driver);
				elementExpand.click();

				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
				reslogger.info(roomnum);
				List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
				Utility.app_logs.info(getRoomNumber.size());
				String getMinimumNumber = getRoomNumber.get(1).getText();
				Utility.app_logs.info("getMinimumNumber: " + getMinimumNumber);

				String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
				Utility.app_logs.info("getMaxmumNumber: " + getMaxmumNumber);
				getMaxmumNumber = getMaxmumNumber.trim();
				int maxNumber = Integer.parseInt(getMaxmumNumber);
				int minNumber = Integer.parseInt(getMinimumNumber);

				Utility.app_logs.info("maxNumber : " + maxNumber);
				Utility.app_logs.info("maxNumber : " + maxNumber);

				Random random = new Random();
				int randomNumber;
				try {
					randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
				} catch (Exception e) {
					randomNumber = maxNumber;
				} catch (Error e) {
					randomNumber = maxNumber;
				}
				IsAssign = String.valueOf(randomNumber);
				boolean isBreak = false;
				for (int j = 0; j < 5; j++) {
					Utility.app_logs.info("randomNumber: " + randomNumber);
					for (int i = 1; i < getRoomNumber.size(); i++) {
						// Utility.app_logs.info("in loop " + i);
						String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
						getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
						if (getRoomNumberFromOptions.equals(IsAssign)) {
							isBreak = true;
							break;
						}

					}
					if (isBreak == false) {
						random = new Random();
						randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
						IsAssign = String.valueOf(randomNumber);
					}
					if (isBreak) {
						break;
					}

				}
				System.out.print(" Random Number is :" + randomNumber);

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				test_steps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");

			} else {

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				Wait.waitForElementToBeClickable(By.xpath(expand), driver);
				WebElement elementExpand = driver.findElement(By.xpath(expand));
				Utility.ScrollToElement_NoWait(elementExpand, driver);
				elementExpand.click();

				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
				Utility.app_logs.info(roomnum);
				List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
				Utility.app_logs.info(getRoomNumber.size());
				String getMinimumNumber = getRoomNumber.get(1).getText();
				Utility.app_logs.info("getMinimumNumber: " + getMinimumNumber);

				String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
				Utility.app_logs.info("getMaxmumNumber: " + getMaxmumNumber);
				getMaxmumNumber = getMaxmumNumber.trim();
				int maxNumber = Integer.parseInt(getMaxmumNumber);
				int minNumber = Integer.parseInt(getMinimumNumber);

				Utility.app_logs.info("maxNumber : " + maxNumber);
				Utility.app_logs.info("maxNumber : " + maxNumber);

				Random random = new Random();
				int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
				IsAssign = String.valueOf(randomNumber);
				boolean isBreak = false;
				for (int j = 0; j < 5; j++) {
					Utility.app_logs.info("randomNumber: " + randomNumber);
					for (int i = 1; i < getRoomNumber.size(); i++) {
						Utility.app_logs.info("in loop " + i);
						String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
						getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
						if (getRoomNumberFromOptions.equals(IsAssign)) {
							isBreak = true;
							break;
						}

					}
					if (isBreak == false) {
						random = new Random();
						randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
						IsAssign = String.valueOf(randomNumber);
					}
					if (isBreak) {
						break;
					}

				}
				System.out.print(" Random Number is :" + randomNumber);

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				test_steps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
			}

//			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
//					+ RoomClass + "')]//..//..//..//following-sibling::div//span[contains(text(),'SELECT')]";
			String select = "//span[contains(@data-bind,'roomClass.name')][text()='" + RoomClass
					+ "']/../../../..//div[contains(@data-bind,'click: onSelect')]/a/span";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 10) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}

			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);

			// Utility.app_logs.info("Waited to loading symbol");

			// Utility.app_logs.info("Rule Count : " + ruleCount);

			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}
			if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
				String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
				if (driver.findElements(By.xpath(policy)).size() > 0) {
					Wait.WaitForElement(driver, policy);
					driver.findElement(By.xpath(policy)).click();
					test_steps.add("Based on the changes made, new policies are applicable.? : yes");
					reslogger.info("Based on the changes made, new policies are applicable.? : yes");
				}

				loading = "(//div[@class='ir-loader-in'])[2]";
				counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
		return test_steps;
	}

	public ArrayList<String> selectRoom1(WebDriver driver, ArrayList<String> test_steps, String RoomClass,
			String IsAssign, String Account) throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";

		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		/*
		 * if(rooms.isEmpty()||rooms.equalsIgnoreCase("")) { room =
		 * "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
		 * + RoomClass + "')]/../../div[2]/span)[3]"; Wait.WaitForElement(driver, room);
		 * rooms = driver.findElement(By.xpath(room)).getText(); reslogger.info(rooms);
		 * }
		 */
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else if (IsAssign.equalsIgnoreCase("Yes")) {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				reslogger.info(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				Random random = new Random();
				int randomNumber = random.nextInt(count1 - 1) + 1;
				if (randomNumber == 1) {
					randomNumber = 2;
				}
				reslogger.info("count : " + count1);
				reslogger.info("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			} else {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				driver.findElement(By.xpath(expand)).click();

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				test_steps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}
			if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
				String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
				Wait.WaitForElement(driver, policy);
				driver.findElement(By.xpath(policy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");

				loading = "(//div[@class='ir-loader-in'])[2]";
				counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
		return test_steps;
	}

	public ArrayList<String> verifyCreateNewReservationFieldUI(WebDriver driver, ArrayList<String> test_steps,
			String accountType, String accountName, String marketSegment, String referral, String accountFirstName,
			String accountLastName, String phoneNumber, String alternativeNumber, String address1, String address2,
			String address3, String email, String city, String state, String postalCode) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ACCOUNT);
		String accountname = res.CP_NewReservation_ACCOUNT.getAttribute("value");
		assertEquals(accountname, accountName);
		test_steps.add("Successfully Verify Account Name : " + accountName);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ContactFirstName);
		String firstName = res.CP_NewReservation_ContactFirstName.getAttribute("value");
		assertEquals(firstName, accountFirstName);
		test_steps.add("Successfully Verify Contact First Name : " + accountFirstName);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ContactLastName);
		String lastName = res.CP_NewReservation_ContactLastName.getAttribute("value");
		assertEquals(lastName, accountLastName);
		test_steps.add("Successfully Verify Contact Last Name : " + accountLastName);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Phone);
		String phoneNo = res.CP_NewReservation_Phone.getAttribute("value");
		phoneNo = Utility.removeBracketsAndMinusSign(phoneNo);
		assertEquals(phoneNo, phoneNumber);
		test_steps.add("Successfully Verify Phone : " + phoneNumber);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Email);
		String email1 = res.CP_NewReservation_Email.getAttribute("value");
		assertEquals(email1, email);
		test_steps.add("Successfully Verify Email : " + email);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PostalCode);
		String code = res.CP_NewReservation_PostalCode.getAttribute("value");
		assertEquals(code, postalCode);
		test_steps.add("Successfully Verify Postal Code : " + postalCode);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Referral);
		String ref = res.CP_NewReservation_Referral.getAttribute("title");
		assertEquals(ref, referral);
		test_steps.add("Successfully Verify referral : " + referral);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Market);
		String mar = res.CP_NewReservation_Market.getAttribute("title");
		assertEquals(mar, marketSegment);
		test_steps.add("Successfully Verify Market Segment : " + marketSegment);

		return test_steps;
	}

	public String RoomNO;

	public void select_SpecificRoom(WebDriver driver, ArrayList test_steps, String RoomClass, String IsAssign,
			String Account) throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";

		Wait.WaitForElement(driver, room);

		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				reslogger.info(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				/*
				 * <<<<<<< HEAD Random random = new Random(); int randomNumber =
				 * random.nextInt(count1 - 1) + 1; Utility.app_logs.info("count : " + count1);
				 * Utility.app_logs.info("randomNumber : " + randomNumber); ======= Random
				 * random = new Random(); int randomNumber = random.nextInt(count1 - 1) + 1;
				 * reslogger.info("count : " + count1); reslogger.info("randomNumber : " +
				 * randomNumber); >>>>>>> b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
				 */

				int randomNumber = count1;
				reslogger.info("count : " + count1);
				reslogger.info("randomNumber : " + randomNumber);

				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				RoomNO = driver.findElement(By.xpath(expand)).getText();
				reslogger.info("Room No Is : " + RoomNO);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}
			if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
				String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
				Wait.WaitForElement(driver, policy);
				driver.findElement(By.xpath(policy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");

				loading = "(//div[@class='ir-loader-in'])[2]";
				counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
	}

	public Double deposit(WebDriver driver, ArrayList test_steps, String IsDepositOverride,
			String DepositOverrideAmount) throws InterruptedException {
		// Wait.wait5Second();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_DepositAmount);
		String deposit = res.CP_NewReservation_DepositAmount.getText();
		test_steps.add("Deposit amount is : " + deposit);
		reslogger.info("Deposit amount is : " + deposit);
		deposit = deposit.trim();
		char ch = deposit.charAt(0);
		deposit = deposit.replace("$", "");
		deposit = deposit.trim();
		Double d = Double.parseDouble(deposit);

		if (IsDepositOverride.equalsIgnoreCase("Yes") && d > 0) {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_OverrideDeposit);
			res.CP_NewReservation_OverrideDeposit.click();
			test_steps.add("Clicking on override deposit amount");
			reslogger.info("Clicking on override deposit amount");
			Wait.wait2Second();
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_OverrideDepositAmoount);
			res.CP_NewReservation_OverrideDepositAmoount.sendKeys(DepositOverrideAmount);
			test_steps.add("Override deposit amount is : " + ch + " " + DepositOverrideAmount);
			reslogger.info("Override deposit amount is : " + ch + " " + DepositOverrideAmount);
			d = Double.parseDouble(DepositOverrideAmount.trim());
		}
		return d;
	}

	public void InputdepositDue(WebDriver driver, ArrayList<String> test_steps, String DepositOverrideAmount)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_OverrideDeposit);
		Utility.ScrollToElement(res.CP_NewReservation_OverrideDeposit, driver);
		Wait.wait2Second();
		res.CP_NewReservation_OverrideDeposit.click();
		test_steps.add("Clicking on override deposit amount");
		reslogger.info("Clicking on override deposit amount");
		Wait.wait2Second();
		Utility.ScrollToElement(res.CP_NewReservation_OverrideDepositAmoount, driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_OverrideDepositAmoount);
		res.CP_NewReservation_OverrideDepositAmoount.sendKeys(DepositOverrideAmount);
		test_steps.add("Override deposit amount is : " + DepositOverrideAmount);
		reslogger.info("Override deposit amount is : " + DepositOverrideAmount);

	}

	public void ClickOnOverrideDepositAmount(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_OverrideDeposit);
		Utility.ScrollToElement(res.CP_NewReservation_OverrideDeposit, driver);
		res.CP_NewReservation_OverrideDeposit.click();
		test_steps.add("Clicking on override deposit Due");
		reslogger.info("Clicking on override deposit Due");

	}

	public String getOverrideDepositAmount(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		Utility.ScrollToElement(res.CP_NewReservation_OverrideDepositAmoount, driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_OverrideDepositAmoount);
		String val = res.CP_NewReservation_OverrideDepositAmoount.getAttribute("value");
		test_steps.add("Override deposit amount is : " + val);
		reslogger.info("Override deposit amount is : " + val);
		return val;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <clickNext> ' Description: <click on next button> ' Input
	 * parameters: < String array list> ' Return value: <array list> ' Created By: '
	 * Modified By | Description of Modification:
	 * ------------------------------------------ Developer name:<Farhan>: 1.Step
	 * modified 2.Step modified
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickNext(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {

		Elements_CPReservation elementReservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Next);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Next), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_Next), driver);
		Utility.ScrollToElement(elementReservation.CP_NewReservation_Next, driver);
		Wait.wait5Second();
		try {
			elementReservation.CP_NewReservation_Next.click();
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, elementReservation.CP_NewReservation_Next);
		}

		testSteps.add("Clicking on next button");
		reslogger.info("Clicking on next button");
		int count = 0;
		while (true) {
			if (driver.findElement(By.xpath("//span[contains(text(),'Contact Info')]")).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
		return testSteps;
	}

	public ArrayList<String> enter_GuestName(WebDriver driver, ArrayList<String> test_steps, String Salutation,
			String GuestFirstName,

			String GuestLastName) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		verifySpinerLoading(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_GuestSalutation), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_GuestSalutation), driver);
		Utility.ScrollToElement(res.CP_NewReservation_GuestSalutation, driver);
		res.CP_NewReservation_GuestSalutation.click();
		String sal = "//span[contains(text(),'" + Salutation + "')]/../..";
		Utility.app_logs.info("sal: " + sal);
		Wait.WaitForElement(driver, sal);
		driver.findElement(By.xpath(sal)).click();

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
		res.CP_NewReservation_GuestFirstName.clear();
		res.CP_NewReservation_GuestFirstName.sendKeys(GuestFirstName);
		test_steps.add("Guest First Name : <b>" + GuestFirstName + "</b>");
		reslogger.info("Guest First Name : <b>" + GuestFirstName + "</b>");

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);
		res.CP_NewReservation_GuestLastName.clear();
		res.CP_NewReservation_GuestLastName.sendKeys(GuestLastName);
		test_steps.add("Guest Last Name : <b>" + GuestLastName + "</b>");
		reslogger.info("Guest Last Name : <b>" + GuestLastName + "</b>");
		res.CP_NewReservation_GuestLastName.sendKeys(Keys.TAB);
		return test_steps;
	}

	public ArrayList<String> enter_GuestName(WebDriver driver, String GuestFirstName, String GuestLastName)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		verifySpinerLoading(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
		res.CP_NewReservation_GuestFirstName.clear();
		res.CP_NewReservation_GuestFirstName.sendKeys(GuestFirstName);
		test_steps.add("Guest First Name : <b>" + GuestFirstName + "</b>");
		reslogger.info("Guest First Name : <b>" + GuestFirstName + "</b>");

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);
		res.CP_NewReservation_GuestLastName.clear();
		res.CP_NewReservation_GuestLastName.sendKeys(GuestLastName);
		test_steps.add("Guest Last Name : <b>" + GuestLastName + "</b>");
		reslogger.info("Guest Last Name : <b>" + GuestLastName + "</b>");
		return test_steps;
	}

	public void enterGuestNameWhileCopy(WebDriver driver, ArrayList<String> test_steps, String GuestName) {
		String guest = "(//label[text()='Guest ']/preceding-sibling::input)[2]";
		Wait.WaitForElement(driver, guest);
		driver.findElement(By.xpath(guest)).sendKeys(GuestName);
		test_steps.add("Guest First Name : <b>" + GuestName + "</b>");
		reslogger.info("Guest First Name : <b>" + GuestName + "</b>");
	}

	public void enterGuestLastNameWhileCopy(WebDriver driver, ArrayList<String> test_steps, String GuestName) {
		String guest = "(//label[text()='Last Name']//preceding-sibling::input)[4]";
		Wait.WaitForElement(driver, guest);
		driver.findElement(By.xpath(guest)).sendKeys(GuestName);
		test_steps.add("Guest First Name : <b>" + GuestName + "</b>");
		reslogger.info("Guest First Name : <b>" + GuestName + "</b>");
	}

	public void enter_ContactName(WebDriver driver, ArrayList<String> test_steps, String Salutation,
			String ContactFirstName, String ContactLastName) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		if (!Salutation.isEmpty()) {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
			Wait.explicit_wait_visibilityof_webelement(res.CP_NewReservation_GuestSalutation, driver);
			Wait.explicit_wait_elementToBeClickable(res.CP_NewReservation_GuestSalutation, driver);
			Utility.ScrollToElement(res.CP_NewReservation_GuestSalutation, driver);
			res.clickContactSalutation.click();
			String sal = "(//span[text()='" + Salutation + "']/../..)[2]";

			Wait.WaitForElement(driver, sal);
			driver.findElement(By.xpath(sal)).click();
		}
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ContactFirstName);
		res.CP_NewReservation_ContactFirstName.clear();
		res.CP_NewReservation_ContactFirstName.sendKeys(ContactFirstName);
		test_steps.add("Contact First Name : " + ContactFirstName);
		reslogger.info("Contact First Name : " + ContactFirstName);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ContactLastName);
		res.CP_NewReservation_ContactLastName.clear();
		res.CP_NewReservation_ContactLastName.sendKeys(ContactLastName);
		test_steps.add("Contact Last Name : " + ContactLastName);
		reslogger.info("Contact Last Name : " + ContactLastName);
		res.CP_NewReservation_ContactLastName.sendKeys(Keys.TAB);
	}

	public void enter_Phone(WebDriver driver, ArrayList<String> test_steps, String PhoneNumber,
			String AltenativePhone) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Phone);
		res.CP_NewReservation_Phone.clear();
		res.CP_NewReservation_Phone.sendKeys(PhoneNumber);
		test_steps.add("Enter Phone Number : " + PhoneNumber);
		reslogger.info("Enter Phone Number : " + PhoneNumber);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AltenativePhone);
		res.CP_NewReservation_AltenativePhone.clear();
		res.CP_NewReservation_AltenativePhone.sendKeys(AltenativePhone);
		test_steps.add("Enter AltenativePhone Number : " + AltenativePhone);
		reslogger.info("Enter AltenativePhone Number : " + AltenativePhone);
	}

	public void enterPhoneNumber(WebDriver driver, ArrayList<String> test_steps, String PhoneNumber) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Phone);
		res.CP_NewReservation_Phone.clear();
		res.CP_NewReservation_Phone.sendKeys(PhoneNumber);
		test_steps.add("Enter Phone Number : " + PhoneNumber);
		reslogger.info("Enter Phone Number : " + PhoneNumber);
	}

	public void enterPhoneCode(WebDriver driver, ArrayList<String> test_steps, String phoneNumberCode) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Phone);
		res.enterPhoneCode.clear();
		res.enterPhoneCode.sendKeys(phoneNumberCode);
		test_steps.add("Enter Phone Number Code : " + phoneNumberCode);
		reslogger.info("Enter Phone Number Code: " + phoneNumberCode);
	}

	public void enter_Email(WebDriver driver, ArrayList<String> test_steps, String Email) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Email);
		res.CP_NewReservation_Email.clear();
		res.CP_NewReservation_Email.sendKeys(Email);
		test_steps.add("Enter Email : " + Email);
		reslogger.info("Enter Email : " + Email);
	}

	public void enter_Account(WebDriver driver, ArrayList<String> test_steps, String Account, String AccountType)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Account);
			String accountdisplay = "//label[contains(text(),'Account')]/..//i[starts-with(@class,'rightIcon demo-icon icon-pencil')]";
			WebElement ele = driver.findElement(By.xpath(accountdisplay));
			if (!ele.isDisplayed()) {
				if (Account.equalsIgnoreCase("") || Account.isEmpty()) {
					reslogger.info("No Account");
				} else {
					res.CP_NewReservation_Account.sendKeys(Account);
					test_steps.add("Enter Account : " + Account);
					reslogger.info("Enter Account : " + Account);
					Wait.wait2Second();
					String account = "//b[contains(text(),'" + Account.trim() + "')]/../../..";
					Wait.WaitForElement(driver, account);
					driver.findElement(By.xpath(account)).click();
					String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]/following-sibling::div//button[contains(text(),'Yes')]";
					Wait.WaitForElement(driver, dataYes);
					driver.findElement(By.xpath(dataYes)).click();
					test_steps.add(
							"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
					reslogger.info(
							"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
					Wait.wait2Second();
					String policyYes = "//div[contains(text(),'Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?')]/following-sibling::div//button[contains(text(),'Yes')]";
					if (driver.findElements(By.xpath(policyYes)).size() > 0) {
						Wait.WaitForElement(driver, policyYes);
						driver.findElement(By.xpath(policyYes)).click();
						test_steps.add(
								"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes");
						reslogger.info(
								"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes");
					}
					Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
					res.CP_NewReservation_PaymentMethod.click();
					String type = null;

					if (AccountType.contentEquals("Corp") || AccountType.contains("corp")
							|| AccountType.contains("Corp")) {
						type = "Account (Corp/Member)";
					}

					if (AccountType.contentEquals("Unit Owners") || AccountType.contains("unit")
							|| AccountType.contains("Unit")) {
						type = "Account (Unit Owner)";
					}

					if (AccountType.contentEquals("Group") || AccountType.contains("group")
							|| AccountType.contains("GROUP")) {
						type = "Account (Group)";
					}

					String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'"
							+ type + "')]";

					System.out.println(paymentMethod);
					Wait.WaitForElement(driver, paymentMethod);
					driver.findElement(By.xpath(paymentMethod)).click();
					String acc = "//label[text()='Account Name ']/preceding-sibling::input";
					Wait.WaitForElement(driver, acc);
					String accName = driver.findElement(By.xpath(acc)).getText();
					if (accName.contains(Account)) {
						test_steps.add("Account successfully associated : " + Account);
						reslogger.info("Account successfully associated : " + Account);
					}
				}
			} else {
				test_steps.add("Account Aleady exists");
				reslogger.info("Account Aleady exists");

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
				res.CP_NewReservation_PaymentMethod.click();
				String type = null;

				if (AccountType.contentEquals("Corp") || AccountType.contains("corp") || AccountType.contains("Corp")) {
					type = "Account (Corp/Member)";
				}

				if (AccountType.contentEquals("Unit Owner") || AccountType.contains("Unit")
						|| AccountType.contains("unit owner")) {
					type = "Account (Unit Owner)";
				}

				if (AccountType.contentEquals("Group") || AccountType.contains("group")
						|| AccountType.contains("GROUP")) {
					type = "Account (Group)";
				}

				String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'"
						+ type + "')]";
				Wait.WaitForElement(driver, paymentMethod);
				driver.findElement(By.xpath(paymentMethod)).click();
				String acc = "(//label[text()='Account Name '])[1]/preceding-sibling::input";
				Wait.wait2Second();
				Wait.WaitForElement(driver, acc);
				String accName = driver.findElement(By.xpath(acc)).getText();
				if (accName.contains(Account)) {
					test_steps.add("Account successfully associated : " + Account);
					reslogger.info("Account successfully associated : " + Account);
				}
			}
		} catch (Exception e) {

			test_steps.add(" Account exist");
			reslogger.info(" Account exist");
		}
	}

	public void enter_Address(WebDriver driver, ArrayList<String> test_steps, String Address1, String Address2,
			String Address3) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Address1);
		res.CP_NewReservation_Address1.clear();
		res.CP_NewReservation_Address1.sendKeys(Address1);
		test_steps.add("Enter Address1 : " + Address1);
		reslogger.info("Enter Address1 : " + Address1);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Address2);
		res.CP_NewReservation_Address2.clear();
		res.CP_NewReservation_Address2.sendKeys(Address2);
		test_steps.add("Enter Address2 : " + Address2);
		reslogger.info("Enter Address1 : " + Address2);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Address3);
		res.CP_NewReservation_Address3.clear();
		res.CP_NewReservation_Address3.sendKeys(Address3);
		test_steps.add("Enter Address3 : " + Address3);
		reslogger.info("Enter Address3 : " + Address3);
	}

	public void enterAddress1(WebDriver driver, ArrayList<String> test_steps, String Address1) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Address1);
		res.CP_NewReservation_Address1.clear();
		res.CP_NewReservation_Address1.sendKeys(Address1);
		test_steps.add("Enter Address1 : " + Address1);
		reslogger.info("Enter Address1 : " + Address1);
	}

	public void enterAddress2(WebDriver driver, ArrayList<String> test_steps, String Address2) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Address2);
		res.CP_NewReservation_Address2.clear();
		res.CP_NewReservation_Address2.sendKeys(Address2);
		test_steps.add("Enter Address2 : " + Address2);
		reslogger.info("Enter Address1 : " + Address2);
	}

	public void enterAddress3(WebDriver driver, ArrayList<String> test_steps, String Address3) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Address3);
		res.CP_NewReservation_Address3.clear();
		res.CP_NewReservation_Address3.sendKeys(Address3);
		test_steps.add("Enter Address3 : " + Address3);
		reslogger.info("Enter Address3 : " + Address3);
	}

	public void enter_City(WebDriver driver, ArrayList<String> test_steps, String City) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_City);
		res.CP_NewReservation_City.clear();
		res.CP_NewReservation_City.sendKeys(City);
		test_steps.add("Enter City : " + City);
		reslogger.info("Enter City : " + City);
	}

	public void select_Country(WebDriver driver, ArrayList<String> test_steps, String Country) {
		String button = "//select[@name='country']/following-sibling::div/button";
		Wait.WaitForElement(driver, button);
		driver.findElement(By.xpath(button)).click();

		String cntry = "//select[@name='country']/following-sibling::div//ul/li//span[contains(text(),'"
				+ Country.trim() + "')]";
		Wait.WaitForElement(driver, cntry);
		driver.findElement(By.xpath(cntry)).click();
		test_steps.add("Selected Country : " + Country);
		reslogger.info("Selected Country : " + Country);
	}

	public void select_State(WebDriver driver, ArrayList<String> test_steps, String State) {
		String button = "//select[@name='state']/following-sibling::div";
		Wait.WaitForElement(driver, button);

		if (driver.findElements(By.xpath("(//select[@name='state'])[1]/option")).size() > 1) {
			button = "//select[@name='state']/following-sibling::div/button";
			driver.findElement(By.xpath(button)).click();
			String cntry = "//select[@name='state']/following-sibling::div//ul/li//span[contains(text(),'"
					+ State.trim() + "')]";
			Wait.WaitForElement(driver, cntry);
			driver.findElement(By.xpath(cntry)).click();
			test_steps.add("Selected City : " + State);
			reslogger.info("Selected City : " + State);
		} else {
			test_steps.add("State field disabled");
			reslogger.info("State field disabled");
		}
	}

	public void enter_PostalCode(WebDriver driver, ArrayList<String> test_steps, String PostalCode) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PostalCode);
		res.CP_NewReservation_PostalCode.sendKeys(PostalCode);
		test_steps.add("Enter PostalCode : " + PostalCode);
		reslogger.info("Enter PostalCode : " + PostalCode);
	}

	public void uncheck_CreateGuestProfile(WebDriver driver, ArrayList<String> test_steps, String IsGuesProfile) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CreateGuestProfile);

		if (IsGuesProfile.equalsIgnoreCase("Yes")) {
			if (!res.CP_NewReservation_CreateGuestProfile.isSelected()) {
				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CreateGuestProfile);
				res.CP_NewReservation_CreateGuestProfile.click();
				test_steps.add("Create Guest Profile selected");
				reslogger.info("Create Guest Profile selected");
			} else {
				test_steps.add("Create Guest Profile selected");
				reslogger.info("Create Guest Profile selected");
			}
		} else {
			if (res.CP_NewReservation_CreateGuestProfile.isSelected()) {
				driver.findElement(By.xpath("//span[contains(text(),'Create Guest Profile')]/..")).click();
				test_steps.add("Create Guest Profile unselected");
				reslogger.info("Create Guest Profile unselected");
			} else {
				test_steps.add("Create Guest Profile unselected");
				reslogger.info("Create Guest Profile unselected");
			}
		}
	}

	public ArrayList<String> enter_MailingAddress(WebDriver driver, ArrayList<String> test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String PhoneNumber, String AltenativePhone, String Email,
			String Account, String AccountType, String Address1, String Address2, String Address3, String City,
			String Country, String State, String PostalCode, String IsGuesProfile) throws InterruptedException {
		enter_GuestName(driver, test_steps, Salutation, GuestFirstName, GuestLastName);
		uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
		enter_Phone(driver, test_steps, PhoneNumber, AltenativePhone);
		// enter_Phone(driver, test_steps, PhoneNumber, AltenativePhone);
		enter_Email(driver, test_steps, Email);
		enter_Address(driver, test_steps, Address1, Address2, Address3);
		enter_City(driver, test_steps, City);
		select_Country(driver, test_steps, Country);
		select_State(driver, test_steps, State);
		enter_PostalCode(driver, test_steps, PostalCode);
		enter_Account(driver, test_steps, Account, AccountType);
		// enter_Account(driver, test_steps, Account, AccountType);
		return test_steps;
	}

	public ArrayList<String> enter_MailingAddressWithoutAccpayment(WebDriver driver, ArrayList<String> test_steps,
			String Salutation, String GuestFirstName, String GuestLastName, String PhoneNumber, String AltenativePhone,
			String Email, String Account, String AccountType, String Address1, String Address2, String Address3,
			String City, String Country, String State, String PostalCode, String IsGuesProfile)
			throws InterruptedException {
		enter_GuestName(driver, test_steps, Salutation, GuestFirstName, GuestLastName);
		uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
		enter_Phone(driver, test_steps, PhoneNumber, AltenativePhone);
		// enter_Phone(driver, test_steps, PhoneNumber, AltenativePhone);
		enter_Email(driver, test_steps, Email);
		enter_Address(driver, test_steps, Address1, Address2, Address3);
		enter_City(driver, test_steps, City);
		select_Country(driver, test_steps, Country);
		select_State(driver, test_steps, State);
		enter_PostalCode(driver, test_steps, PostalCode);
		return test_steps;
	}

	public void enter_MailingAddress_OnUnchecked_CreateGuestProfile(WebDriver driver, ArrayList<String> test_steps,
			String Salutation, String GuestFirstName, String GuestLastName, String IsGuesProfile)
			throws InterruptedException {
		enter_GuestName(driver, test_steps, Salutation, GuestFirstName, GuestLastName);
		uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
	}

	public ArrayList<String> enter_PaymentDetails(WebDriver driver, ArrayList<String> test_steps, String PaymentType,
			String CardNumber, String NameOnCard, String CardExpDate) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
		try {
			res.CP_NewReservation_PaymentMethod.click();
		} catch (Exception e) {
			driver.findElement(By.xpath(OR_Reservation.CP_NewReservation_PaymentMethod1)).click();
		}

		if (PaymentType.equalsIgnoreCase("Swipe")) {
			String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'MC')]";
			Wait.WaitForElement(driver, paymentMethod);
			driver.findElement(By.xpath(paymentMethod)).click();
			res.CP_NewReservation_Swipe.click();
			test_steps.add("Clicking in Swipe");
			reslogger.info("Clicking in Swipe");
			Wait.wait1Second();
			String CC = "(//label[text()='Credit Card Number']/preceding-sibling::input)[2]";
			Wait.WaitForElement(driver, CC);
			driver.findElement(By.xpath(CC)).sendKeys(CardNumber);
			test_steps.add("Enter CardNumber : " + CardNumber);
			reslogger.info("Enter CardNumber : " + CardNumber);
			res.CP_NewReservation_CardNumber.sendKeys(Keys.TAB);
			Wait.wait2Second();
		} else {
			String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'"
					+ PaymentType.trim() + "')]";
			Wait.WaitForElement(driver, paymentMethod);
			// driver.findElement(By.xpath(paymentMethod)).click();
			JavascriptExecutor jse = (JavascriptExecutor) driver;
			jse.executeScript("arguments[0].click();", driver.findElement(By.xpath(paymentMethod)));
			test_steps.add("Selected PaymentType : " + PaymentType);
			reslogger.info("Selected PaymentType : " + PaymentType);
			if (PaymentType.trim().equalsIgnoreCase("MC") || PaymentType.trim().equalsIgnoreCase("Visa")
					|| PaymentType.trim().equalsIgnoreCase("Amex") || PaymentType.trim().equalsIgnoreCase("Discover")) {
				res.CP_NewReservation_CardNumber.clear();
				res.CP_NewReservation_CardNumber.sendKeys(CardNumber);
				test_steps.add("Enter CardNumber : " + CardNumber);
				reslogger.info("Enter CardNumber : " + CardNumber);
				res.CP_NewReservation_NameOnCard.clear();
				res.CP_NewReservation_NameOnCard.sendKeys(NameOnCard);
				test_steps.add("Enter Name On Card : " + NameOnCard);
				reslogger.info("Enter Name On Card : " + NameOnCard);
				res.CP_NewReservation_CardExpDate.clear();
				res.CP_NewReservation_CardExpDate.sendKeys(CardExpDate);
				test_steps.add("Enter Card ExpDate : " + CardExpDate);
				reslogger.info("Enter Card ExpDate : " + CardExpDate);
			}
		}
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CreateGuestProfile);
		if (!driver.findElement(By.xpath("//small[contains(text(),'Address')]/../../following-sibling::div//input"))
				.isSelected()) {
			driver.findElement(By.xpath("//small[contains(text(),'Address')]/../../following-sibling::div/label"))
					.click();
		}
		return test_steps;
	}

	public ArrayList<String> enter_PaymentDetails1(WebDriver driver, ArrayList<String> test_steps, String PaymentType,
			String CardNumber, String NameOnCard, String CardExpDate) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
		try {
			res.CP_NewReservation_PaymentMethod.click();
		} catch (Exception e) {
			driver.findElement(By.xpath(OR_Reservation.CP_NewReservation_PaymentMethod1)).click();
		}

		if (PaymentType.equalsIgnoreCase("Swipe")) {
			String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'MC')]";
			Wait.WaitForElement(driver, paymentMethod);
			driver.findElement(By.xpath(paymentMethod)).click();
			res.CP_NewReservation_Swipe.click();
			test_steps.add("Clicking in Swipe");
			reslogger.info("Clicking in Swipe");
			Wait.wait1Second();
			String CC = "(//label[text()='Credit Card Number']/preceding-sibling::input)[2]";
			Wait.WaitForElement(driver, CC);
			driver.findElement(By.xpath(CC)).sendKeys(CardNumber);
			test_steps.add("Enter CardNumber : " + CardNumber);
			reslogger.info("Enter CardNumber : " + CardNumber);
			res.CP_NewReservation_CardNumber.sendKeys(Keys.TAB);
			Wait.wait2Second();
		} else {
			String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'"
					+ PaymentType.trim() + "')]";
			Wait.WaitForElement(driver, paymentMethod);
			// driver.findElement(By.xpath(paymentMethod)).click();
			JavascriptExecutor jse = (JavascriptExecutor) driver;
			jse.executeScript("arguments[0].click();", driver.findElement(By.xpath(paymentMethod)));
			test_steps.add("Selected PaymentType : " + PaymentType);
			reslogger.info("Selected PaymentType : " + PaymentType);
			if (PaymentType.trim().equalsIgnoreCase("MC") || PaymentType.trim().equalsIgnoreCase("Visa")
					|| PaymentType.trim().equalsIgnoreCase("Amex") || PaymentType.trim().equalsIgnoreCase("Discover")) {
				String cardNumber = "//label[text()='Credit Card Number']/preceding-sibling::input";
				try {
					driver.findElement(By.xpath(cardNumber)).clear();
				} catch (Exception e) {
					try {
						cardNumber = "(//label[text()='Credit Card Number']/preceding-sibling::input)[2]";
						driver.findElement(By.xpath(cardNumber)).clear();
					} catch (Exception e1) {
						try {
							cardNumber = "(//label[text()='Credit Card Number']/preceding-sibling::input)[3]";
							driver.findElement(By.xpath(cardNumber)).clear();
						} catch (Exception e2) {
							cardNumber = "(//label[text()='Credit Card Number']/preceding-sibling::input)[4]";
							driver.findElement(By.xpath(cardNumber)).clear();
						}
					}
				}
				driver.findElement(By.xpath(cardNumber)).sendKeys(CardNumber);
				test_steps.add("Enter CardNumber : " + CardNumber);
				reslogger.info("Enter CardNumber : " + CardNumber);
				String nameOnCard = "//label[text()='Name On card']/preceding-sibling::input";
				try {
					driver.findElement(By.xpath(nameOnCard)).clear();
				} catch (Exception e) {
					nameOnCard = "(//label[text()='Name On card']/preceding-sibling::input)[2]";
					driver.findElement(By.xpath(nameOnCard)).clear();
				}
				driver.findElement(By.xpath(nameOnCard)).sendKeys(NameOnCard);
				test_steps.add("Enter Name On Card : " + NameOnCard);
				reslogger.info("Enter Name On Card : " + NameOnCard);
				String cardExpDate = "(//label[text()='Exp Date']/preceding-sibling::input)[2]";
				try {
					driver.findElement(By.xpath(cardExpDate)).clear();
				} catch (Exception e) {
					cardExpDate = "(//label[text()='Exp Date']/preceding-sibling::input)[4]";
					driver.findElement(By.xpath(cardExpDate)).clear();
				}

				driver.findElement(By.xpath(cardExpDate)).sendKeys(CardExpDate);
				test_steps.add("Enter Card ExpDate : " + CardExpDate);
				reslogger.info("Enter Card ExpDate : " + CardExpDate);
			}
		}
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CreateGuestProfile);
		if (!driver.findElement(By.xpath("//small[contains(text(),'Address')]/../../following-sibling::div//input"))
				.isSelected()) {
			driver.findElement(By.xpath("//small[contains(text(),'Address')]/../../following-sibling::div/label"))
					.click();
		}
		return test_steps;
	}

	public void select_HouseAccoutAsPayment(WebDriver driver, ArrayList<String> test_steps, String AccountName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
		res.CP_NewReservation_PaymentMethod.click();
		String houseAcc = "//span[text()='Account (House Account)']/..";
		Wait.WaitForElement(driver, houseAcc);
		driver.findElement(By.xpath(houseAcc)).click();
		test_steps.add("Selecting Account (House Account) as payment method");
		reslogger.info("Selecting Account (House Account) as payment method");

		String input = "//input[@name='houseaccount-autocomplete']";

		Wait.WaitForElement(driver, input);
		driver.findElement(By.xpath(input)).sendKeys(AccountName);
		String acc = "//b[text()='" + AccountName.trim() + "']";
		Wait.WaitForElement(driver, acc);
		driver.findElement(By.xpath(acc)).click();
		test_steps.add("Selecting Account (House Account) as payment method and the house account is : " + AccountName);
		reslogger.info("Selecting Account (House Account) as payment method and the house account is : " + AccountName);

	}

	public void select_GroupAccoutAsPayment(WebDriver driver, ArrayList<String> test_steps, String AccountName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
		res.CP_NewReservation_PaymentMethod.click();
		String houseAcc = "//span[text()='Account (Group)']/..";
		Wait.WaitForElement(driver, houseAcc);
		driver.findElement(By.xpath(houseAcc)).click();
		test_steps.add("Selecting Account (Group) as payment method");
		reslogger.info("Selecting Account (Group) as payment method");

		String input = "//input[@data-bind='value: selectedAccountValue']";
		Wait.WaitForElement(driver, input);

		JavascriptExecutor js = (JavascriptExecutor) driver;
		String AccName = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(input)));
		reslogger.info(AccName);
		Assert.assertEquals(AccName, AccountName, "Failed to verify groups account name");
		test_steps.add(
				"Succesfully verified  Account (Group) as payment method and the group account is : " + AccountName);
		reslogger.info(
				"Suceesfully verified  Account (Group) as payment method and the group account is : " + AccountName);

	}

	public void select_GiftCertificateAsPayment(WebDriver driver, ArrayList<String> test_steps, String AccountName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
		res.CP_NewReservation_PaymentMethod.click();
		String gsAcc = "//span[text()='Gift Certificate']/..";
		Wait.WaitForElement(driver, gsAcc);
		driver.findElement(By.xpath(gsAcc)).click();
		test_steps.add("Selecting Gift Certificate as payment method");
		reslogger.info("Selecting Gift Certificate as payment method");

		String input = "//input[@name='giftCertificate-autocomplete']";

		Wait.WaitForElement(driver, input);
		driver.findElement(By.xpath(input)).sendKeys(AccountName);
		String acc = "//b[text()='" + AccountName.trim() + "']";
		Wait.WaitForElement(driver, acc);
		driver.findElement(By.xpath(acc)).click();
		test_steps.add("Selecting Gift Certificate as payment method and the house account is : " + AccountName);
		reslogger.info("Selecting Gift Certificate as payment method and the house account is : " + AccountName);

	}

	public void enter_MarketSegmentDetails(WebDriver driver, ArrayList<String> test_steps, String TravelAgent,
			String MarketSegment, String Referral) throws InterruptedException {
		enter_MarketSegmentDetails(driver, test_steps, TravelAgent, MarketSegment, Referral, true);
	}

	public void enter_MarketSegmentDetails(WebDriver driver, ArrayList<String> test_steps, String TravelAgent,
			String MarketSegment, String Referral, boolean useTravelAgentInfo) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_TravelAgent);

		if (!(TravelAgent.equalsIgnoreCase("") || TravelAgent.isEmpty())) {
			res.CP_NewReservation_TravelAgent.sendKeys(TravelAgent);
			Wait.wait2Second();
			String account = "//b[contains(text(),'" + TravelAgent.trim() + "')]/../../..";
			Wait.WaitForElement(driver, account);
			driver.findElement(By.xpath(account)).click();
			if (useTravelAgentInfo) {
				String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]/following-sibling::div//button[contains(text(),'Yes')]";
				Wait.WaitForElement(driver, dataYes);
				driver.findElement(By.xpath(dataYes)).click();
				test_steps.add(
						"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
				reslogger.info(
						"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
				Wait.wait5Second();
			} else {
				String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]/following-sibling::div//button[contains(text(),'No')]";
				Wait.WaitForElement(driver, dataYes);
				driver.findElement(By.xpath(dataYes)).click();
				test_steps.add(
						"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
				reslogger.info(
						"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
				Wait.wait5Second();
			}

			/*
			 * String
			 * policyYes="//div[contains(text(),'Do you want to replace the guest info')]/following-sibling::div//button[contains(text(),'Yes')]"
			 * ; Wait.WaitForElement(driver, policyYes);
			 * driver.findElement(By.xpath(policyYes)).click(); test_steps.
			 * add("Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes"
			 * ); reslogger.
			 * info("Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes"
			 * );
			 */
		}

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Referral);
		Wait.wait3Second();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Referral), driver);

		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_Referral), driver);
		Utility.ScrollToElement(res.CP_NewReservation_Referral, driver);

		res.CP_NewReservation_Referral.click();
		// Wait.wait1Second();

		/*
		 * String ref =
		 * "//label[text()='Referral']/preceding-sibling::div//ul/li//span[contains(text(),'"
		 * + Referral.trim() + "')]";
		 */

		String ref = "(//label[text()='Referral']/preceding-sibling::div//ul/li//span[contains(text(),'"
				+ Referral.trim() + "')])[2]";
		reslogger.info(ref);
		Wait.waitForElementToBeClickable(By.xpath(ref), 10, driver);
		Utility.ScrollToElement(driver.findElement(By.xpath(ref)), driver);

		Utility.app_logs.info(ref);
		// Wait.WaitForElement(driver, ref);

		driver.findElement(By.xpath(ref)).click();
		test_steps.add("Selected Referral as : " + Referral);
		reslogger.info("Selected Referral as : " + Referral);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Market);
		Utility.ScrollToElement(res.CP_NewReservation_Market, driver);
		Wait.wait2Second();
		res.CP_NewReservation_Market.click();
		String market = "//label[text()='Market']/preceding-sibling::div//ul/li//span[contains(text(),'"
				+ MarketSegment.trim() + "')]";
		Wait.WaitForElement(driver, market);

		driver.findElement(By.xpath(market)).click();
		test_steps.add("Selected MarketSegment as : " + MarketSegment);
		reslogger.info("Selected MarketSegment as : " + MarketSegment);
	}

	public ArrayList<String> clickBookNow(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Book);
		Wait.explicit_wait_elementToBeClickable(res.CP_NewReservation_Book, driver);
		Utility.ScrollToElement(res.CP_NewReservation_Book, driver);
		res.CP_NewReservation_Book.click();
		reslogger.info("Click on Book Now");

		try {
			Wait.WaitForElementUsingClassName(driver, OR.Toaster_Message);
			Wait.waitForElementToBeVisibile(By.className(OR.Toaster_Message), driver);
			Wait.waitForElementToBeClickable(By.className(OR.Toaster_Message), driver);
			Utility.app_logs.info(res.Toaster_Message.getText());
			testSteps.add("Toaster message: " + res.Toaster_Message.getText());

		} catch (Exception e) {
			// TODO: handle exception
		}

		testSteps.add("Click on Book Now");
		reslogger.info("Click on Book Now");
		String loading = "(//div[@class='ir-loader-in'])[2]";
		int count = 0;
		try {
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (count == 60) {
					break;
				} else {
					count++;
					Wait.wait1Second();
				}
			}
		} catch (Exception e) {
			// TODO: handle exception
		}

		reslogger.info("Waited to loading symbol");
		return testSteps;

	}

	public ArrayList<String> clickBookNow_CopyRes(WebDriver driver, ArrayList<String> testSteps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String CP_NewReservation_Book = "(//button[text()='BOOK NOW'])[1]";
		try {
			Utility.ScrollToElement(driver.findElement(By.xpath(CP_NewReservation_Book)), driver);
			driver.findElement(By.xpath(CP_NewReservation_Book)).click();
		} catch (Exception e) {
			CP_NewReservation_Book = "(//button[text()='BOOK NOW'])[3]";
			Utility.ScrollToElement(driver.findElement(By.xpath(CP_NewReservation_Book)), driver);
			driver.findElement(By.xpath(CP_NewReservation_Book)).click();
		}
		reslogger.info("Click on Book Now");

		try {
			Wait.WaitForElementUsingClassName(driver, OR.Toaster_Message);
			Wait.waitForElementToBeVisibile(By.className(OR.Toaster_Message), driver);
			Wait.waitForElementToBeClickable(By.className(OR.Toaster_Message), driver);
			Utility.app_logs.info(res.Toaster_Message.getText());
			testSteps.add("Toaster message: " + res.Toaster_Message.getText());

		} catch (Exception e) {
			// TODO: handle exception
		}

		testSteps.add("Click on Book Now");
		reslogger.info("Click on Book Now");
		String loading = "(//div[@class='ir-loader-in'])[2]";
		int count = 0;
		try {
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (count == 60) {
					break;
				} else {
					count++;
					Wait.wait1Second();
				}
			}
		} catch (Exception e) {
			// TODO: handle exception
		}

		reslogger.info("Waited to loading symbol");
		return testSteps;

	}

//	List<String> toasterMsg(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {
//		Elements_CPReservation res = new Elements_CPReservation(driver);
//		Wait.WaitForElementUsingClassName(driver, OR.Toaster_Message);
//		Wait.waitForElementToBeVisibile(By.className(OR.Toaster_Message), driver);
//		Wait.waitForElementToBeClickable(By.className(OR.Toaster_Message), driver);
//		Utility.app_logs.info(res.Toaster_Message.getText());
//		testSteps.add("Toaster message: " + res.Toaster_Message.getText());
//
//		return testSteps;
//
//	}

	public String toasterMsg(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElementUsingClassName(driver, OR.Toaster_Message);
		Wait.waitForElementToBeVisibile(By.className(OR.Toaster_Message), driver);
		Wait.waitForElementToBeClickable(By.className(OR.Toaster_Message), driver);
		String message = res.Toaster_Message.getText();
		testSteps.add("Toaster message: " + res.Toaster_Message.getText());
		reslogger.info("Toaster message: " + res.Toaster_Message.getText());
		return message;

	}

	public void pay_DepositAmount(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_DepositPayPopUp);
		String depositAmount = "//h4[text()='Deposit Payment']/../..//label[text()='AMOUNT']/following-sibling::div/input";
		Wait.WaitForElement(driver, depositAmount);
		depositAmount = driver.findElement(By.xpath(depositAmount)).getText();

		String depositPaymentType = "//h4[text()='Deposit Payment']/../..//label[text()='TYPE']/preceding-sibling::div/button/span";
		Wait.WaitForElement(driver, depositPaymentType);
		depositPaymentType = driver.findElement(By.xpath(depositPaymentType)).getText();

		test_steps.add("Paying deposit amount : " + depositAmount + " and the payment type is : " + depositPaymentType);
		reslogger.info("Paying deposit amount : " + depositAmount + " and the payment type is : " + depositPaymentType);

		String pay = "//h4[text()='Deposit Payment']/../..//button[starts-with(text(),'Pay')]";

		Wait.WaitForElement(driver, pay);
		driver.findElement(By.xpath(pay)).click();
		test_steps.add("Click on Pay");
		reslogger.info("Click on Pay");

		String loading = "(//div[@class='ir-loader-in'])[3]";

		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
		String paymentFail = "//span[contains(text(),'Transaction Declined. Please try again or enter a different payment method.')]";

		if (driver.findElement(By.xpath(paymentFail)).isDisplayed()) {
			test_steps.add("Transaction Declined. Please try again or enter a different payment method.");
			reslogger.info("Transaction Declined. Please try again or enter a different payment method.");
		} else {

		}
	}

	public String get_ReservationConfirmationNumber(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait2Second();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ConfirmationNumber);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_ConfirmationNumber), driver, 120);
		String confirmation = res.CP_NewReservation_ConfirmationNumber.getText();
		test_steps.add("Captured reservation confirmation number is : <b>" + confirmation + "</b>");
		reslogger.info("Confirmation Number : <b>" + confirmation + "</b>");
		return confirmation;
	}

	public String get_ReservationStatus(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ReservationStatus);
		String status = res.CP_NewReservation_ReservationStatus.getText();
		test_steps.add("Captured reservation status on success popup is  : <b>" + status + "</b>");
		reslogger.info("Reservation Status : " + status);
		return status;
	}

	public void verify_QuoteConfirmetionPopup(WebDriver driver, ArrayList<String> test_steps) {
		String quote = "//h4[contains(text(),'Quote Confirmation')]";
		Wait.WaitForElement(driver, quote);
		if (driver.findElement(By.xpath(quote)).isDisplayed()) {
			test_steps.add("Quote Confirmation pop is displayed");
			reslogger.info("Quote Confirmation pop is displayed");
		} else {
			test_steps.add("Quote Confirmation pop not is displayed");
			reslogger.info("Quote Confirmation pop not is displayed");
		}
	}

	public ArrayList<String> clickCloseReservationSavePopup(WebDriver driver, ArrayList<String> test_steps)
			throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		unsavedDataYesClick(driver, test_steps);
		while (true) {
			boolean isExist = Utility.isElementPresent(driver, By.xpath(loading));
			/* if (!driver.findElement(By.xpath(loading)).isDisplayed()) */
			if (!isExist) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait1Second();
			}
		}
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ClosePopUp);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_ClosePopUp), driver);

		Utility.ScrollToElement(res.CP_NewReservation_ClosePopUp, driver);
		// Wait.explicit_wait_elementToBeClickable(res.CP_NewReservation_ClosePopUp,
		// driver);
		try {
//			Wait.wait1Second();
			res.CP_NewReservation_ClosePopUp.click();
		} catch (Exception e) {
			try {
				Utility.clickThroughAction(driver, res.CP_NewReservation_ClosePopUp);
			} catch (Exception e1) {
				Utility.clickThroughJavaScript(driver, res.CP_NewReservation_ClosePopUp);
			}
		}
		test_steps.add("Clicking on Close");
		reslogger.info("Clicking on Close");

		try {
			Wait.waitForElementToBeInVisibile(By.xpath(OR_Reservation.CP_NewReservation_ClosePopUp), driver, 10);
		} catch (Exception e) {
			reslogger.info("Confirmation popup is already closed");
		}
		Wait.wait5Second();
		loading = "(//div[@class='ir-loader-in'])";
		count = 0;
		unsavedDataYesClick(driver, test_steps);
		while (true) {
			boolean isExist = Utility.isElementPresent(driver, By.xpath(loading));
			/* if (!driver.findElement(By.xpath(loading)).isDisplayed()) */
			if (isExist) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait1Second();
			}
		}

		//
		// reslogger.info("Waited to loading symbol");
		//
		return test_steps;
	}

	public void click_Folio(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Folio);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_Folio), driver);
		try {
			Utility.ScrollToElement(res.CP_NewReservation_Folio, driver);
			res.CP_NewReservation_Folio.click();

			test_steps.add("Clicking on Folio");
			reslogger.info("Clicking on Folio");
			/*
			 * String path = "//a[@class='current']"; Wait.WaitForElement(driver, path);
			 * Wait.waitForElementToBeVisibile(By.xpath(path), driver);
			 * assertTrue(driver.findElement(By.xpath(path)).isDisplayed(),
			 * "Failed: to Displayed Folio Detail");
			 * test_steps.add("Folio Detail Tab is Displayed");
			 * reslogger.info("Folio Detail Tab is Displayed");
			 */
		} catch (Exception e) {
			Utility.ScrollToElement(res.CP_NewReservation_Folio, driver);
			Utility.clickThroughJavaScript(driver, res.CP_NewReservation_Folio);
			test_steps.add("Clicking on Folio");
			reslogger.info("Clicking on Folio");
			/*
			 * String path = "//a[@class='current']"; Wait.WaitForElement(driver, path);
			 * Wait.waitForElementToBeVisibile(By.xpath(path), driver);
			 * assertTrue(driver.findElement(By.xpath(path)).isDisplayed(),
			 * "Failed: to Displayed Folio Detail");
			 * test_steps.add("Folio Detail Tab is Displayed");
			 * reslogger.info("Folio Detail Tab is Displayed");
			 */
		}
	}

	public void click_Documents(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_DocumentsTab);
		res.CP_NewReservation_DocumentsTab.click();
		test_steps.add("Clicking on Documents");
		reslogger.info("Clicking on Documents");
	}

	public String get_RoomCharge(WebDriver driver, ArrayList<String> test_steps) {
		String Balance = driver.findElement(By.xpath(
				"//label[contains(text(),'Room Charges: ')]/following-sibling::span[@class='pamt']/span[@class='pamt']"))
				.getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("Room Charges : <b>" + Balance + "</b>");
		reslogger.info("Room Charges : " + Balance);
		return Balance;
	}

	public String get_RoomCharge_U(WebDriver driver, ArrayList<String> test_steps) {
		String Balance = driver.findElement(By.xpath(
				"//div[@ data-bind = 'showInnroadCurrency: { value: aggregateTotal, ShouldShowNegativeAsBracket: true } ']"))
				.getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("Room Charges : <b>" + Balance + "</b>");
		reslogger.info("Room Charges : " + Balance);
		return Balance;
	}

	public String get_Taxes(WebDriver driver, ArrayList<String> test_steps) {
		String Balance = driver
				.findElement(By.xpath("//label[contains(text(),'Taxes')]/following-sibling::span/span[@class='pamt']"))
				.getText();
		Balance = Balance.replace("$", "");
		test_steps.add("Taxes & Service Charges : " + Balance);
		reslogger.info("Taxes & Service Charges : " + Balance);
		return Balance;
	}

	public String get_Inceidentals(WebDriver driver, ArrayList<String> test_steps) {
		String Balance = driver
				.findElement(
						By.xpath("//label[contains(text(),'Incidentals')]/following-sibling::span/span[@class='pamt']"))
				.getText();
		Balance = Balance.replace("$", "");
		test_steps.add("Incidentals : " + Balance);
		reslogger.info("Incidentals : " + Balance);
		return Balance;
	}

	public String get_TotalCharges(WebDriver driver, ArrayList<String> test_steps) {
		String totalCharges = driver
				.findElement(By.xpath(
						"//label[contains(text(),'Total Charges')]" + "/following-sibling::span/span[@class='pamt']"))
				.getText();
		totalCharges = totalCharges.replace("$ ", "");
		test_steps.add("Total Charges from folio is captured as : <b>" + totalCharges + "</b>");
		reslogger.info("Total Charges : " + Balance);
		return totalCharges;
	}

	public String get_Payments(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		String payments = driver
				.findElement(
						By.xpath("//label[contains(text(),'Payments')]/following-sibling::span/span[@class='pamt']"))
				.getText();
		payments = payments.replace("$ ", "");
		test_steps.add("Payments from folio is captured as : <b>" + payments + "</b>");
		reslogger.info("Payments : " + payments);
		return payments;
	}

	public String getPaymentMethodInExistingRes(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GetPaymentMethodName), driver);
		String paymentMethod = res.getPaymentMethodName.getText().trim();
		return paymentMethod;
	}

	public String get_PaymentsForAccountReservation(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		String payments = null;
		try {
			payments = driver
					.findElement(By.xpath(
							"(//label[contains(text(),'Payments')]/following-sibling::span/span[@class='pamt'])[2]"))
					.getText();
		} catch (Exception e) {
			payments = driver
					.findElement(By
							.xpath("//label[contains(text(),'Payments')]/following-sibling::span/span[@class='pamt']"))
					.getText();
		}
		payments = payments.replace("$ ", "");
		test_steps.add("Payments from folio is captured as : <b>" + payments + "</b>");
		reslogger.info("Payments : " + payments);
		return payments;
	}

	public String get_Balance(WebDriver driver, ArrayList<String> test_steps) {
		String Balance = driver.findElement(By.xpath(
				"//label[contains(text(),'Balance')]/following-sibling::span[@class='pamt']/span[@class='pamt']"))
				.getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("Balance Charges : <b>" + Balance + "</b>");
		reslogger.info("Balance Charges : " + Balance);
		return Balance;
	}

	public String get_Balance(ArrayList<String> test_steps, WebDriver driver) {
		String Balance = driver
				.findElement(By.xpath(
						"//label[(text()='Balance: ')]/following-sibling::span[@class='pamt']/span[@class='pamt']"))
				.getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("Balance Charges : <b>" + Balance + "</b>");
		reslogger.info("Balance Charges : " + Balance);
		return Balance;
	}

	public void click_History(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String loading = "(//div[@class='ir-loader-in'])";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_History);
		Utility.ScrollToElement(res.CP_NewReservation_History, driver);
		res.CP_NewReservation_History.click();
		test_steps.add("Clicking on History");
		reslogger.info("Clicking on History");
		loading = "(//div[@class='ir-loader-in'])";
		counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
	}

	public void verify_ReservationInHistoryTab(WebDriver driver, ArrayList test_steps, String reservation) {
		String res = "//span[contains(text(),'Created reservation with Confirmation Number: " + reservation.trim()
				+ "')]";
		try {
			String loading = "//history-info//div[contains(@data-bind,'showLoading')]//div";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 3) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");
		} catch (Exception e) {
			reslogger.info("no loading");
		}
		if (driver.findElement(By.xpath(res)).isDisplayed()) {
			test_steps.add("Reservation creation verified in History tab : " + reservation);
			reslogger.info("Reservation creation verified in History tab : " + reservation);
		} else {
			test_steps.add("Reservation creation not found in History tab : " + reservation);
			reslogger.info("Reservation creation not found in History tab : " + reservation);
		}
	}

	public void verify_QuoteInHistoryTab(WebDriver driver, ArrayList test_steps, String reservation, String timeZone) {
		String res = "//span[contains(text(),'Saved quote with Confirmation Number: " + reservation.trim() + "')]";
		if (driver.findElement(By.xpath(res)).isDisplayed()) {
			test_steps.add("Reservation creation verified in History tab : " + reservation);
			reslogger.info("Reservation creation verified in History tab : " + reservation);
		} else {
			test_steps.add("Reservation creation not found in History tab : " + reservation);
			reslogger.info("Reservation creation not found in History tab : " + reservation);
		}

		String payment = "//span[contains(text(),'Saved quote with Confirmation Number: " + reservation.trim()
				+ "')]/../preceding-sibling::td//span";

		String room = driver.findElement(By.xpath(payment)).getText();
		if (room.equalsIgnoreCase("Reservation")) {
			test_steps.add("Payment category verified for the Reservation");
			reslogger.info("Payment category verified for the Reservation");
		} else {
			test_steps.add("Payment category not verified for the Reservation");
			reslogger.info("Payment category not verifie for the Reservation");
		}

		Date date = new Date();
		DateFormat df = new SimpleDateFormat("MM/dd/yy");

		// Use Madrid's time zone to format the date in
		df.setTimeZone(TimeZone.getTimeZone(timeZone));

		String d = df.format(date);

		String payline = "(//span[contains(text(),'Saved quote with Confirmation Number: " + reservation.trim()
				+ "')]/../preceding-sibling::td//span)[2]";
		room = driver.findElement(By.xpath(payline)).getText();
		if (room.equalsIgnoreCase(d)) {
			test_steps.add("Payment Date verified in history : " + room);
			reslogger.info("Payment Date verified in history : " + room);
		} else {
			test_steps.add("Payment Date not verified in history : " + room);
			reslogger.info("Payment Date not verified in history : " + room);
		}

	}

	public String get_RoomNumber(WebDriver driver, ArrayList test_steps, String IsAssign) {
		String room = "//span[text()='ROOM:']/following-sibling::span";
		Wait.WaitForElement(driver, room);
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(room)), driver);
		room = driver.findElement(By.xpath(room)).getText();

		if (IsAssign.equalsIgnoreCase("No")) {
			if (room.equalsIgnoreCase("Unassigned")) {
				test_steps.add("Room Number is : Unassigned");
				reslogger.info("Room Number is : Unassigned");
			}
		} else {
			test_steps.add("Room Number is : " + room);
			reslogger.info("Room Number is : " + room);
		}
		return room;
	}

	public String getSecondRoomNumber(WebDriver driver, ArrayList test_steps, String IsAssign) {
		String room = "(//span[text()='ROOM:']/following-sibling::span)[2]";
		Wait.WaitForElement(driver, room);
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(room)), driver);
		room = driver.findElement(By.xpath(room)).getText();

		if (IsAssign.equalsIgnoreCase("No")) {
			if (room.equalsIgnoreCase("Unassigned")) {
				test_steps.add("Room Number is : Unassigned");
				reslogger.info("Room Number is : Unassigned");
			}
		} else {
			test_steps.add("Room Number is : " + room);
			reslogger.info("Room Number is : " + room);
		}
		return room;
	}

	public String get_RoomChargeWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver.findElement(By.xpath(
				"//label[contains(text(),'Room Charges: ')]/following-sibling::span[@class='pamt']/span[@class='pamt']"))
				.getText();
		test_steps.add("Room Charges : " + Balance);
		reslogger.info("Room Charges : " + Balance);
		return Balance;
	}

	public String get_FeesWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver.findElement(By.xpath("//label[contains(text(),'Fees')]/following-sibling::span/span"))
				.getText();
		test_steps.add("Fees: " + Balance);
		reslogger.info("Fees: " + Balance);
		return Balance;
	}

	public String get_TaxesWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver.findElement(By.xpath(
				"(//label[contains(text(),'Taxes & Service Charges:') or text()='Taxes:']/following-sibling::span/span[@class='pamt'])[1]"))
				.getText();
		test_steps.add("Taxes & Service Charges : " + Balance);
		reslogger.info("Taxes & Service Charges : " + Balance);
		return Balance;
	}

	public String get_InceidentalsWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(
						By.xpath("//label[contains(text(),'Incidentals')]/following-sibling::span/span[@class='pamt']"))
				.getText();
		test_steps.add("Incidentals : " + Balance);
		reslogger.info("Incidentals : " + Balance);
		return Balance;
	}

	public String get_TotalChargesWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(By
						.xpath("//label[contains(text(),'Total Charges')]/following-sibling::span/span[@class='pamt']"))
				.getText();
		test_steps.add("Total Charges : " + Balance);
		reslogger.info("Total Charges : " + Balance);
		return Balance;
	}

	public String get_PaymentsWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(
						By.xpath("//label[contains(text(),'Payments')]/following-sibling::span/span[@class='pamt']"))
				.getText();
		test_steps.add("Payments : " + Balance);
		reslogger.info("Payments : " + Balance);
		return Balance;
	}

	public String get_BalanceWithCurrency(WebDriver driver, ArrayList test_steps) {

		String Balance = driver.findElement(By.xpath(
				"//label[contains(text(),'Balance')]/following-sibling::span[@class='pamt']/span[@class='pamt']"))
				.getText();
		/*
		 * String Balance = driver.findElement(By.xpath(
		 * "(//label[contains(text(),'Balance')]/following-sibling::span[@class='pamt']/span[@class='pamt'])[1]"
		 * )).getText();
		 */
		test_steps.add("Balance Charges : " + Balance);
		reslogger.info("Balance Charges : " + Balance);
		return Balance;
	}

	public String get_TripSummaryRoomChargesWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(By
						.xpath("//span[text()='Summary']/../../..//div[text()='Room Charges']/following-sibling::div"))
				.getText();
		test_steps.add("TripSummary Room Charges : " + Balance);
		reslogger.info("TripSummary Room Charges : " + Balance);
		return Balance;
	}

	public String get_TripSummaryRoomChargesWithoutCurrency(WebDriver driver, ArrayList<String> test_steps) {

		String balance = "//span[contains(text(),'Summary')]/../../..//div[text()='Room Charges']/following-sibling::div";
		Wait.WaitForElement(driver, balance);
		WebElement balanceElement = driver.findElement(By.xpath(balance));
		balance = balanceElement.getText().replaceAll("[$£ ]", "").trim();
		test_steps.add("TripSummary Room Charges : <b>" + balance + "</b>");
		reslogger.info("TripSummary Room Charges : " + balance);
		return balance;
	}

	public String get_TripSummaryTaxesWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(By.xpath(
						"(//div[text()='Taxes & Service Charges' or text()='Taxes']//following-sibling::div)[1]"))
				.getText();
		test_steps.add("TripSummary Taxes & Service Charges : " + Balance);
		reslogger.info("TripSummary Taxes & Service Charges : " + Balance);
		return Balance;
	}

	public String get_TripSummaryTaxesWithoutCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(By.xpath(
						"(//div[text()='Taxes & Service Charges' or text()='Taxes']//following-sibling::div)[1]"))
				.getText();
		Balance = Balance.replace("$", "");
		test_steps.add("TripSummary Taxes & Service Charges : " + Balance);
		reslogger.info("TripSummary Taxes & Service Charges : " + Balance);
		return Balance;
	}

	public String get_TripSummaryInceidentalsWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(
						By.xpath("//span[text()='Summary']/../../..//div[text()='Incidentals']/following-sibling::div"))
				.getText();
		test_steps.add("TripSummary Incidentals : " + Balance);
		reslogger.info("TripSummary Incidentals : " + Balance);
		return Balance;
	}

	public String get_TripSummaryInceidentalsWithoutCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(
						By.xpath("//span[text()='Summary']/../../..//div[text()='Incidentals']/following-sibling::div"))
				.getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("TripSummary Incidentals : " + Balance);
		reslogger.info("TripSummary Incidentals : " + Balance);
		return Balance;
	}

	public String get_TripSummaryTripTotalChargesWithCurrency(WebDriver driver, ArrayList<String> test_steps) {
		String tripTotal = driver.findElement(By.xpath(
				"//span[text()='Summary']/../../..//div[contains(text()," + "'Trip Total')]/following-sibling::div"))
				.getText();
		test_steps.add("Captured TripSummary Trip Total as : <b>" + tripTotal + "</b>");
		reslogger.info("TripSummary Trip Total : " + tripTotal);
		return tripTotal;
	}

	public String get_TripSummaryTripTotalChargesWithoutCurrency(WebDriver driver, ArrayList<String> test_steps) {
		String xpath = "//span[text()='Summary']/../../..//div[contains(text(),'Trip Total')]/following-sibling::div";
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(xpath)), driver);
		String Balance = driver.findElement(By.xpath(xpath)).getText();
		Balance = Balance.replaceAll("[$£]", "").trim();
		test_steps.add("Trip Total Charges captured at trip summary as : <b>" + Balance + "</b>");
		reslogger.info("Trip Total Charges captured at trip summary as : " + Balance);
		return Balance;
	}

	public String get_TripSummaryPaidWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = "$ 0.0";
		if (driver
				.findElements(By.xpath(
						"//span[text()='Summary']/../../..//div[contains(text(),'Paid')]/following-sibling::div"))
				.size() > 0) {
			Balance = driver
					.findElement(By.xpath(
							"//span[text()='Summary']/../../..//div[contains(text(),'Paid')]/following-sibling::div"))
					.getText();
			test_steps.add("TripSummary Paid : " + Balance);
			reslogger.info("TripSummary Paid : " + Balance);
		}
		return Balance;
	}

	public String getTripSummaryBalance(WebDriver driver, ArrayList<String> test_steps) {
		String balance = driver.findElement(By.xpath(
				"//span[text()='Summary']/../../..//div[contains(text()," + "'Balance')]/following-sibling::div"))
				.getText();
		balance = balance.replace("$ ", "");
		test_steps.add("Trip Summary Balance is captured as : <b>" + balance + "</b>");
		reslogger.info("TripSummary Balance Charges : " + balance);
		return balance;
	}

	public String get_TripSummaryPaid(WebDriver driver, ArrayList test_steps) {
		String Balance = driver
				.findElement(By.xpath(
						"//span[text()='Summary']/../../..//div[contains(text(),'Paid')]/following-sibling::div"))
				.getText();

		Balance = Balance.trim();
		Balance = Balance.substring(1, Balance.length() - 1);
		Balance = Balance.trim();
		test_steps.add("TripSummary Paid : " + Balance);
		reslogger.info("TripSummary Paid : " + Balance);

		return Balance;
	}

	public String getTripSummaryPaidAmount(WebDriver driver, ArrayList<String> test_steps) {
		String PaidBalance = driver
				.findElement(By.xpath(
						"//span[text()='Summary']/../../..//div[contains(text()," + "'Paid')]/following-sibling::div"))
				.getText();
		PaidBalance = PaidBalance.replace("$ ", "");
		test_steps.add("Paid amount captured at trip summary is : <b>" + PaidBalance + "</b>");
		reslogger.info("Paid amount captured at trip summary is : " + PaidBalance);
		return PaidBalance;
	}

	public void verifyTripSummaryPaid(WebDriver driver, ArrayList test_steps, String getPaid, String Paid) {
		double paidAmt = Double.valueOf(getPaid);
		int amt = (int) paidAmt;
		getPaid = String.valueOf(amt);
		assertEquals(getPaid.trim(), (Paid), "Failed : to Verify Trip Summary Paid");
		test_steps.add("Verified TripSummary  Paid : <b>" + Paid + "</b>");
		reslogger.info("Verified TripSummary  Paid : " + Paid);

	}

	public void verifyTripSummaryRoomCharges(WebDriver driver, ArrayList test_steps, String getRoomCharges,
			String RoomCharges) {
		double roomAmt = Double.valueOf(getRoomCharges);
		int amt = (int) roomAmt;
		getRoomCharges = String.valueOf(amt);
		assertEquals(getRoomCharges.trim(), (RoomCharges), "Failed : to Verify Trip Summary Room Changes");
		test_steps.add("Verified TripSummary Room Changes : <b>" + RoomCharges + "</b>");
		reslogger.info("Verified TripSummary Room Changes : " + RoomCharges);
	}

	public void verifyTripSummaryTaxService(WebDriver driver, ArrayList test_steps, String taxServiceCharges,
			String TaxService) {
		double taxAmt = Double.valueOf(taxServiceCharges);
		int amt = (int) taxAmt;
		taxServiceCharges = String.valueOf(amt);
		if (taxServiceCharges.equals(TaxService)) {
			assertEquals(taxServiceCharges.trim(), (TaxService), "Failed : to Verify Trip Summary Tax Service Changes");
			test_steps.add("Verified TripSummary Tax Service Changes : <b>" + TaxService + "</b>");
			reslogger.info("Verified TripSummary Tax Service Changes : " + TaxService);
		} else if (taxServiceCharges.equals("0")) {
			assertEquals(taxServiceCharges.trim(), ("0"), "Failed : to Verify Trip Summary Tax Service Changes");
			test_steps.add("Verified TripSummary Tax Service Changes : <b>" + taxServiceCharges + "</b>");
			reslogger.info("Verified TripSummary Tax Service Changes : " + taxServiceCharges);

		}
	}

	public void verifyTripSummaryTotal(WebDriver driver, ArrayList test_steps, String TripTotal, String Total) {
		double totalAmt = Double.valueOf(TripTotal);
		int amt = (int) totalAmt;
		TripTotal = String.valueOf(amt);
		assertEquals(TripTotal.trim(), (Total), "Failed : to Verify Trip Summary Total");
		test_steps.add("Verified TripSummary Trip Total Charges : <b>" + Total + "</b>");
		reslogger.info("Verified TripSummary  Trip Total  Charges : " + Total);
	}

	public String get_TripSummaryBalanceWithCurrency(WebDriver driver, ArrayList test_steps) {
		String Balance = "$ 0.0";
		if (driver
				.findElements(By.xpath(
						"//span[text()='Summary']/../../..//div[contains(text(),'Paid')]/following-sibling::div"))
				.size() > 0) {
			Balance = driver.findElement(By
					.xpath("//span[text()='Summary']/../../..//div[contains(text(),'Balance')]/following-sibling::div"))
					.getText();

			test_steps.add("TripSummary Balance Charges : " + Balance);
			reslogger.info("TripSummary Balance Charges : " + Balance);
		}
		return Balance;
	}

	public String get_TripSummaryBalance_Amount(WebDriver driver, ArrayList<String> test_steps) {
		String Balance = driver
				.findElement(By.xpath(
						"//span[text()='Summary']/../../..//div[contains(text(),'Balance')]/following-sibling::div"))
				.getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("Balance amount is captured at trip summary as : <b>" + Balance + "</b>");
		reslogger.info("TripSummary Balance Charges : " + Balance);
		return Balance;
	}

	public void verifyTripSummaryBalance(WebDriver driver, ArrayList test_steps, String getBalance, String Balance) {

		double balanceAmount = Double.valueOf(getBalance);
		reslogger.info(String.valueOf((int) (balanceAmount)).trim());
		assertTrue(String.valueOf((int) (balanceAmount)).trim().equals(Balance),
				"Failed : to Verify Trip Summary Balance");
		test_steps.add("Verified TripSummary Balance Charges :<b> " + Balance + "</b>");
		reslogger.info("Verified TripSummary Balance Charges : " + Balance);
	}

	public void verifyTripSummaryBalanceForCheckOut(WebDriver driver, ArrayList test_steps, String getBalance,
			String Balance) {

		// double balanceAmount=Double.valueOf(getBalance);
		// reslogger.info(String.valueOf((int)(balanceAmount)).trim());
		assertTrue(getBalance.contains(Balance), "Failed : to Verify Trip Summary Balance");
		test_steps.add("Verified TripSummary Balance Charges :<b> " + Balance + "</b>");
		reslogger.info("Verified TripSummary Balance Charges : " + Balance);

	}

	public void Verify_TripSummary_Balance_ForCheckOut(WebDriver driver, ArrayList test_steps, String getBalance,
			String Balance) {

		// double balanceAmount=Double.valueOf(getBalance);
		// reslogger.info(String.valueOf((int)(balanceAmount)).trim());
		assertTrue(getBalance.contains(Balance), "Failed : to Verify Trip Summary Balance");
		test_steps.add("Verified TripSummary Balance Charges :<b> " + Balance + "</b>");
		reslogger.info("Verified TripSummary Balance Charges : " + Balance);
	}

	public void verifyDepositPaymentInHistoryTab(WebDriver driver, ArrayList test_steps, Double deposit) {
		String depositOne = "//span[contains(text(),'payment') and contains(text(),'" + deposit + "')]";
		if (driver.findElement(By.xpath(depositOne)).isDisplayed()) {

			test_steps.add("Deposit payment verified in History Tab");
			reslogger.info("Deposit payment verified in History Tab");
		} else {
			test_steps.add("Deposit payment not found  in History Tab");
			reslogger.info("Deposit payment not found  in History Tab");
		}
	}

	public void verify_AcountPaymentInHistory(WebDriver driver, ArrayList test_steps, Double amount, String AccountName,
			ArrayList RoomAbbri, ArrayList Rooms, String timeZone) {
		String payline = "//span[contains(text(),'payment') and contains(text(),'" + amount + "') and contains(text(),'"
				+ AccountName + "')]";
		if (driver.findElement(By.xpath(payline)).isDisplayed()) {
			test_steps.add("Account payment verified in History Tab");
			reslogger.info("Account payment verified in History Tab");
		} else {
			test_steps.add("Account payment not found  in History Tab");
			reslogger.info("Account payment not found  in History Tab");
		}

		payline = "//span[contains(text(),'payment') and contains(text(),'" + amount + "') and contains(text(),'"
				+ AccountName + "')]/../following-sibling::td//span";

		String room = driver.findElement(By.xpath(payline)).getText();
		String rm = RoomAbbri.get(0).toString();
		String rm1 = Rooms.get(0).toString();
		String[] rm2 = rm.split(":");
		rm = rm2[1].trim();
		String[] rm3 = rm1.split(":");
		rm1 = rm3[1].trim();
		rm = rm + ": " + rm1;

		reslogger.info(room);
		reslogger.info(rm);

		if (rm.equalsIgnoreCase(room)) {
			test_steps.add("Room Number verified in history : " + room);
			reslogger.info("Room Number verified in history : " + room);
		} else {
			test_steps.add("Room Number not verified in history : " + room);
			reslogger.info("Room Number not verified in history : " + room);
		}

		String payment = "//span[contains(text(),'payment') and contains(text(),'" + amount + "') and contains(text(),'"
				+ AccountName + "')]/../preceding-sibling::td//span";

		room = driver.findElement(By.xpath(payment)).getText();
		if (room.equalsIgnoreCase("Payment")) {
			test_steps.add("Payment category verified for the payment");
			reslogger.info("Payment category verified for the payment");
		} else {
			test_steps.add("Payment category not verified for the payment");
			reslogger.info("Payment category not verifie for the payment");
		}

		Date date = new Date();
		DateFormat df = new SimpleDateFormat("MM/dd/yy");

		// Use Madrid's time zone to format the date in
		df.setTimeZone(TimeZone.getTimeZone(timeZone));

		String d = df.format(date);

		payline = "(//span[contains(text(),'payment') and contains(text(),'" + amount + "') and contains(text(),'"
				+ AccountName + "')]/../preceding-sibling::td//span)[2]";
		room = driver.findElement(By.xpath(payline)).getText();
		if (room.equalsIgnoreCase(d)) {
			test_steps.add("Payment Date verified in history : " + room);
			reslogger.info("Payment Date verified in history : " + room);
		} else {
			test_steps.add("Payment Date not verified in history : " + room);
			reslogger.info("Payment Date not verified in history : " + room);
		}

	}

	public void verify_BannerDetails(WebDriver driver, ArrayList test_steps, String Salutation, String GuestFirstName,
			String GuestLastName, String PhoneNumber, String Email, String TripTotal, String Balance,
			String ConfirmationNumber, String Status, String CheckInDate, String CheckOutDate, String Country) {
		test_steps.add("******************* Banner fields verification **********************");
		reslogger.info("******************* Banner fields verification **********************");

		String name = Salutation.trim() + " " + GuestFirstName.trim() + " " + GuestLastName.trim();
		String bannername = "//td/div/span[contains(text(),'" + name + "')]";
		reslogger.info(bannername);
		if (driver.findElement(By.xpath(bannername)).isDisplayed()) {
			test_steps.add("Reservation banner name field verified : " + name);
			reslogger.info("Reservation banner name field verified : " + name);
		} else {
			test_steps.add("Reservation banner name field not found : " + name);
			reslogger.info("Reservation banner name field not found : " + name);
		}

		PhoneNumber = PhoneNumber.replace("" + PhoneNumber.trim().charAt(0), "(" + PhoneNumber.trim().charAt(0));
		PhoneNumber = PhoneNumber.replace("" + PhoneNumber.trim().charAt(4), ")" + PhoneNumber.trim().charAt(4));
		PhoneNumber = PhoneNumber.replace("" + PhoneNumber.trim().charAt(5), " " + PhoneNumber.trim().charAt(5));
		PhoneNumber = PhoneNumber.replace("" + PhoneNumber.trim().charAt(9), "-" + PhoneNumber.trim().charAt(9));

		String code = null;
		if (Country.equalsIgnoreCase("United States")) {
			code = "1";
		} else if (Country.equalsIgnoreCase("United Kingdom")) {
			code = "41";
		}
		code = code + "-";
		PhoneNumber = code + PhoneNumber;
		reslogger.info(PhoneNumber);

		String phone = "//td//span[text()='" + PhoneNumber + "']";
		if (driver.findElement(By.xpath(phone)).isDisplayed()) {
			test_steps.add("Reservation banner PhoneNumber field verified : " + PhoneNumber);
			reslogger.info("Reservation banner PhoneNumber field verified : " + PhoneNumber);
		} else {
			test_steps.add("Reservation banner PhoneNumber field not found : " + PhoneNumber);
			reslogger.info("Reservation banner PhoneNumber field not found : " + PhoneNumber);
		}

		String trip = "//td[text()='TRIP TOTAL']/following-sibling::td[contains(text(),'" + TripTotal.trim() + "')]";
		if (driver.findElement(By.xpath(trip)).isDisplayed()) {
			test_steps.add("Reservation banner TripTotal field verified : " + TripTotal);
			reslogger.info("Reservation banner TripTotal field verified : " + TripTotal);
		} else {
			test_steps.add("Reservation banner TripTotal field not found : " + TripTotal);
			reslogger.info("Reservation banner TripTotal field not found : " + TripTotal);
		}

		String bal = "//td[text()='BALANCE']/following-sibling::td/div[contains(text(),'" + Balance.trim() + "')]";
		if (driver.findElement(By.xpath(trip)).isDisplayed()) {
			test_steps.add("Reservation banner Balance field verified : " + Balance);
			reslogger.info("Reservation banner Balance field verified : " + Balance);
		} else {
			test_steps.add("Reservation banner Balance field not found : " + Balance);
			reslogger.info("Reservation banner Balance field not found : " + Balance);
		}

		String mail = "//td//a[text()='" + Email + "']";
		if (driver.findElement(By.xpath(mail)).isDisplayed()) {
			test_steps.add("Reservation banner mail field verified : " + Email);
			reslogger.info("Reservation banner mail field verified : " + Email);
		} else {
			test_steps.add("Reservation banner mail field not found : " + Email);
			reslogger.info("Reservation banner mail field not found : " + Email);
		}

		String sta = "//td//span[text()='" + Status.trim() + "']";
		if (driver.findElement(By.xpath(sta)).isDisplayed()) {
			test_steps.add("Reservation banner Status field verified : " + Status);
			reslogger.info("Reservation banner Status field verified : " + Status);
		} else {
			test_steps.add("Reservation banner Status field not found : " + Status);
			reslogger.info("Reservation banner Status field not found : " + Status);
		}

		String confirmation = "//td//span[text()='" + ConfirmationNumber.trim() + "']";
		if (driver.findElement(By.xpath(confirmation)).isDisplayed()) {
			test_steps.add("Reservation banner ConfirmationNumber field verified : " + ConfirmationNumber);
			reslogger.info("Reservation banner ConfirmationNumber field verified : " + ConfirmationNumber);
		} else {
			test_steps.add("Reservation banner ConfirmationNumber field not found : " + ConfirmationNumber);
			reslogger.info("Reservation banner ConfirmationNumber field not found : " + ConfirmationNumber);
		}

		String[] checkIn = CheckInDate.split("/");

		if (checkIn[0].charAt(0) == '0') {
			checkIn[0] = checkIn[0].replace("" + checkIn[0].charAt(0), "");
		}

		String checkInMonthDay = Utility.get_Month(CheckInDate);
		checkInMonthDay = checkInMonthDay + " " + checkIn[0];
		checkInMonthDay = "(" + checkInMonthDay;

		String[] checkOut = CheckOutDate.split("/");

		if (checkOut[0].charAt(0) == '0') {
			checkOut[0] = checkOut[0].replace("" + checkOut[0].charAt(0), "");
		}

		String checkOutMonthDay = Utility.get_Month(CheckOutDate);
		checkOutMonthDay = checkOutMonthDay + " " + checkOut[0];
		checkOutMonthDay = checkOutMonthDay + ")";
		String day = checkInMonthDay + " - " + checkOutMonthDay;

		reslogger.info(day);
		String days = "//td//span[contains(text(),'" + day.trim() + "')]";
		if (driver.findElement(By.xpath(confirmation)).isDisplayed()) {
			test_steps.add("Reservation banner Stay from and Stay to are verified : " + day);
			reslogger.info("Reservation banner Stay from and Stay to are verified : " + day);
		} else {
			test_steps.add("Reservation banner Stay from and Stay to are not found : " + day);
			reslogger.info("Reservation banner Stay from and Stay to are not found : " + day);
		}
	}

	public void verify_StayInfo(WebDriver driver, ArrayList test_steps, String CheckInDate, String CheckOutDate,
			String Adults, String Children, String RoomClass, String RoomCharges) throws Exception {
		test_steps.add("******************* Stay info fields verification **********************");
		reslogger.info("******************* Stay info fields verification **********************");

		SimpleDateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");
		Date dateObj1 = format1.parse(CheckInDate);
		Date dateObj2 = format1.parse(CheckOutDate);
		long diff = dateObj2.getTime() - dateObj1.getTime();
		int Nights = (int) (diff / (24 * 60 * 60 * 1000));
		reslogger.info("difference between days: " + Nights);

		String[] checkIn = CheckInDate.split("/");
		if (checkIn[0].charAt(0) == '0') {
			checkIn[0] = checkIn[0].replace("" + checkIn[0].charAt(0), "");
		}
		String checkInMonth = Utility.get_Month(CheckInDate);
		String checkInDays = checkInMonth + " " + checkIn[0] + ", " + checkIn[2];

		String checkInDay = "//div[contains(text(),'Stay')]/..//div[@class='checkin']/span[text()='" + checkInDays
				+ "']";
		if (driver.findElement(By.xpath(checkInDay)).isDisplayed()) {
			test_steps.add("Reservation Stay Info checkin date verified : " + CheckInDate);
			reslogger.info("Reservation Stay Info checkin date verified : " + CheckInDate);
		} else {
			test_steps.add("Reservation Stay Info checkin date not found : " + CheckInDate);
			reslogger.info("Reservation Stay Info checkin date not found : " + CheckInDate);
		}

		Date now = new Date(checkIn[1] + "/" + checkIn[0] + "/" + checkIn[2]);
		SimpleDateFormat simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the
		// day
		// of
		// the
		// week
		// abbreviated
		simpleDateformat = new SimpleDateFormat("EEEE"); // the day of the week
		// spelled out
		// completely
		String dayofCheckIn = simpleDateformat.format(now);

		String chckInday = "//div[contains(text(),'Stay')]/..//div[@class='checkin']//span[text()='"
				+ dayofCheckIn.trim() + "']";
		if (driver.findElement(By.xpath(chckInday)).isDisplayed()) {
			test_steps.add("Reservation Stay Info checkin day verified : " + dayofCheckIn);
			reslogger.info("Reservation Stay Info checkin day verified : " + dayofCheckIn);
		} else {
			test_steps.add("Reservation Stay Info checkin day not found : " + dayofCheckIn);
			reslogger.info("Reservation Stay Info checkin day not found : " + dayofCheckIn);
		}

		String[] checkOut = CheckOutDate.split("/");

		if (checkOut[0].charAt(0) == '0') {
			checkOut[0] = checkOut[0].replace("" + checkOut[0].charAt(0), "");
		}
		String checkOutMonth = Utility.get_Month(CheckOutDate);
		// String checkOutDays = checkInMonth + " " + checkOut[0] + ", " + checkOut[2];
		String checkOutDays = checkOutMonth + " " + checkOut[0] + ", " + checkOut[2];
		String checkoutDay = "//div[contains(text(),'Stay')]/..//div[@class='checkout']/span[text()='" + checkOutDays
				+ "']";
		if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
			test_steps.add("Reservation Stay Info checkout date verified : " + CheckOutDate);
			reslogger.info("Reservation Stay Info checkout date verified : " + CheckOutDate);
		} else {
			test_steps.add("Reservation Stay Info checkout date not found : " + CheckOutDate);
			reslogger.info("Reservation Stay Info checkout date not found : " + CheckOutDate);
		}

		now = new Date(checkOut[1] + "/" + checkOut[0] + "/" + checkOut[2]);
		simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the day of the
		// week
		// abbreviated
		simpleDateformat = new SimpleDateFormat("EEEE"); // the day of the week
		// spelled out
		// completely
		String dayofCheckOut = simpleDateformat.format(now);
		String chkOutDay = "//div[contains(text(),'Stay')]/..//div[@class='checkout']//span[text()='"
				+ dayofCheckOut.trim() + "']";
		if (driver.findElement(By.xpath(chkOutDay)).isDisplayed()) {
			test_steps.add("Reservation Stay Info checkout day verified : " + dayofCheckOut);
			reslogger.info("Reservation Stay Info checkout day verified : " + dayofCheckOut);
		} else {
			test_steps.add("Reservation Stay Info checkout day not found : " + dayofCheckOut);
			reslogger.info("Reservation Stay Info checkout day not found : " + dayofCheckOut);
		}

		String nights = "//div[contains(text(),'Stay')]/..//div[@class='noofnights']/span[text()='" + Nights + "N']";
		if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
			test_steps.add("Reservation Stay Info Nights verified : " + Nights + "N");
			reslogger.info("Reservation Stay Info Nights verified : " + Nights + "N");
		} else {
			test_steps.add("Reservation Stay Info Nights not found : " + Nights + "N");
			reslogger.info("Reservation Stay Info Nights not found : " + Nights + "N");
		}

		String adults = "//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'numberOfAdults')]";
		adults = driver.findElement(By.xpath(adults)).getText().trim();
		if (adults.equalsIgnoreCase(Adults.trim())) {
			test_steps.add("Reservation Stay Info Adults verified : " + Adults);
			reslogger.info("Reservation Stay Info Adults verified : " + Adults);
		} else {
			test_steps.add("Reservation Stay Info Adults not found : " + Adults);
			reslogger.info("Reservation Stay Info Adults not found : " + Adults);
		}

		String children = "//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'numberOfChildren')]";
		children = driver.findElement(By.xpath(children)).getText().trim();
		if (children.equalsIgnoreCase(Children.trim())) {
			test_steps.add("Reservation Stay Info Children verified : " + Children);
			reslogger.info("Reservation Stay Info Children verified : " + Children);
		} else {
			test_steps.add("Reservation Stay Info Children not found : " + Children);
			reslogger.info("Reservation Stay Info Children not found : " + Children);
		}

		String roomClass = "//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'roomClassName')]";
		roomClass = driver.findElement(By.xpath(roomClass)).getText().trim();
		if (roomClass.equalsIgnoreCase(RoomClass.trim())) {
			test_steps.add("Reservation Stay Info RoomClass verified : " + RoomClass);
			reslogger.info("Reservation Stay Info RoomClass verified : " + RoomClass);
		} else {
			test_steps.add("Reservation Stay Info RoomClass not found : " + RoomClass);
			reslogger.info("Reservation Stay Info RoomClass not found : " + RoomClass);
		}

		String roomCharge = "//div[contains(text(),'Stay')]/..//div//span[text()='TOTAL']/following-sibling::span";
		roomCharge = driver.findElement(By.xpath(roomCharge)).getText().trim();
		if (roomCharge.equalsIgnoreCase(RoomCharges.trim()) || roomCharge.contains(RoomCharges.trim())) {
			test_steps.add("Reservation Stay Info RoomCharges verified : " + RoomCharges);
			reslogger.info("Reservation Stay Info RoomCharges verified : " + RoomCharges);
		} else {
			test_steps.add("Reservation Stay Info RoomCharges not found : " + RoomCharges);
			reslogger.info("Reservation Stay Info RoomCharges not found : " + RoomCharges);
		}
	}

	public void verify_MRB_StayInfo(WebDriver driver, ArrayList test_steps, String CheckInDate, String CheckOutDate,
			String Adults, String Children, String RoomClass, String RoomCharges, ArrayList roomCost, String IsAssign,
			String RatePlan) throws Exception {
		test_steps.add("******************* MRB Stay info fields verification **********************");
		reslogger.info("******************* MRB Stay info fields verification **********************");

		/*
		 * <<<<<<< HEAD SimpleDateFormat format1=new SimpleDateFormat("dd/MM/yyyy");
		 * Date dateObj1 = format1.parse(CheckInDate); Date dateObj2 =
		 * format1.parse(CheckOutDate); long diff = dateObj2.getTime() -
		 * dateObj1.getTime(); int Nights = (int) (diff / (24 * 60 * 60 * 1000));
		 * Utility.app_logs.info("difference between days: " + Nights); =======
		 * SimpleDateFormat format1=new SimpleDateFormat("dd/MM/yyyy"); Date dateObj1 =
		 * format1.parse(CheckInDate); Date dateObj2 = format1.parse(CheckOutDate); long
		 * diff = dateObj2.getTime() - dateObj1.getTime(); int Nights = (int) (diff /
		 * (24 * 60 * 60 * 1000)); reslogger.info("difference between days: " + Nights);
		 * >>>>>>> b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
		 */

		String[] in = CheckInDate.split("\\|");
		String[] out = CheckOutDate.split("\\|");
		String[] adu = Adults.split("\\|");
		String[] chld = Children.split("\\|");
		String[] roomclass = RoomClass.split("\\|");
		String[] rate = RatePlan.split("\\|");

		int count = in.length;

		for (int i = 0; i < count; i++) {

			SimpleDateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");
			Date dateObj1 = format1.parse(in[i]);
			Date dateObj2 = format1.parse(out[i]);
			long diff = dateObj2.getTime() - dateObj1.getTime();
			int Nights = (int) (diff / (24 * 60 * 60 * 1000));
			reslogger.info("difference between days: " + Nights);

			String[] checkIn = in[i].split("/");
			if (checkIn[0].charAt(0) == '0') {
				checkIn[0] = checkIn[0].replace("" + checkIn[0].charAt(0), "");
			}
			String checkInMonth = Utility.get_Month(in[i]);
			String checkInDays = checkInMonth + " " + checkIn[0] + ", " + checkIn[2];

			String checkInDay = "//div[contains(text(),'Stay')]/..//div[@class='checkin']/span[text()='" + checkInDays
					+ "']";
			if (driver.findElement(By.xpath(checkInDay)).isDisplayed()) {
				test_steps.add("Reservation Stay Info checkin date verified : " + in[i]);
				reslogger.info("Reservation Stay Info checkin date verified : " + in[i]);
			} else {
				test_steps.add("Reservation Stay Info checkin date not found : " + in[i]);
				reslogger.info("Reservation Stay Info checkin date not found : " + in[i]);
			}

			Date now = new Date(checkIn[1] + "/" + checkIn[0] + "/" + checkIn[2]);
			SimpleDateFormat simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the
			// day
			// of
			// the
			// week
			// abbreviated
			simpleDateformat = new SimpleDateFormat("EEEE"); // the day of the
			// week spelled
			// out
			// completely
			String dayofCheckIn = simpleDateformat.format(now);

			String chckInday = "//div[contains(text(),'Stay')]/..//div[@class='checkin']//span[text()='"
					+ dayofCheckIn.trim() + "']";
			if (driver.findElement(By.xpath(chckInday)).isDisplayed()) {
				test_steps.add("Reservation Stay Info checkin day verified : " + dayofCheckIn);
				reslogger.info("Reservation Stay Info checkin day verified : " + dayofCheckIn);
			} else {
				test_steps.add("Reservation Stay Info checkin day not found : " + dayofCheckIn);
				reslogger.info("Reservation Stay Info checkin day not found : " + dayofCheckIn);
			}

			String[] checkOut = out[i].split("/");

			if (checkOut[0].charAt(0) == '0') {
				checkOut[0] = checkOut[0].replace("" + checkOut[0].charAt(0), "");
			}
			String checkOutMonth = Utility.get_Month(out[i]);
			String checkOutDays = checkOutMonth + " " + checkOut[0] + ", " + checkOut[2];
			String checkoutDay = "//div[contains(text(),'Stay')]/..//div[@class='checkout']/span[text()='"
					+ checkOutDays + "']";
			if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
				test_steps.add("Reservation Stay Info checkout date verified : " + out[i]);
				reslogger.info("Reservation Stay Info checkout date verified : " + out[i]);
			} else {
				test_steps.add("Reservation Stay Info checkout date not found : " + out[i]);
				reslogger.info("Reservation Stay Info checkout date not found : " + out[i]);
			}

			now = new Date(checkOut[1] + "/" + checkOut[0] + "/" + checkOut[2]);
			simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the day of
			// the week
			// abbreviated
			simpleDateformat = new SimpleDateFormat("EEEE"); // the day of the
			// week spelled
			// out
			// completely
			String dayofCheckOut = simpleDateformat.format(now);
			String chkOutDay = "//div[contains(text(),'Stay')]/..//div[@class='checkout']//span[text()='"
					+ dayofCheckOut.trim() + "']";
			if (driver.findElement(By.xpath(chkOutDay)).isDisplayed()) {
				test_steps.add("Reservation Stay Info checkout day verified : " + dayofCheckOut);
				reslogger.info("Reservation Stay Info checkout day verified : " + dayofCheckOut);
			} else {
				test_steps.add("Reservation Stay Info checkout day not found : " + dayofCheckOut);
				reslogger.info("Reservation Stay Info checkout day not found : " + dayofCheckOut);
			}

			String nights = "//div[contains(text(),'Stay')]/..//div[@class='noofnights']/span[text()='" + Nights
					+ "N']";
			if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
				test_steps.add("Reservation Stay Info Nights verified : " + Nights + "N");
				reslogger.info("Reservation Stay Info Nights verified : " + Nights + "N");
			} else {
				test_steps.add("Reservation Stay Info Nights not found : " + Nights + "N");
				reslogger.info("Reservation Stay Info Nights not found : " + Nights + "N");
			}

			String adults = "(//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'numberOfAdults')])["
					+ (i + 1) + "]";
			adults = driver.findElement(By.xpath(adults)).getText().trim();
			if (adults.equalsIgnoreCase(adu[i].trim())) {
				test_steps.add("Reservation Stay Info Adults verified : " + adu[i]);
				reslogger.info("Reservation Stay Info Adults verified : " + adu[i]);
			} else {
				test_steps.add("Reservation Stay Info Adults not found : " + adu[i]);
				reslogger.info("Reservation Stay Info Adults not found : " + adu[i]);
			}

			String children = "(//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'numberOfChildren')])["
					+ (i + 1) + "]";
			children = driver.findElement(By.xpath(children)).getText().trim();
			if (children.equalsIgnoreCase(chld[i].trim())) {
				test_steps.add("Reservation Stay Info Children verified : " + chld[i]);
				reslogger.info("Reservation Stay Info Children verified : " + chld[i]);
			} else {
				test_steps.add("Reservation Stay Info Children not found : " + chld[i]);
				reslogger.info("Reservation Stay Info Children not found : " + chld[i]);
			}

			String roomClass = "(//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'roomClassName')])["
					+ (i + 1) + "]";
			roomClass = driver.findElement(By.xpath(roomClass)).getText().trim();
			if (roomClass.contains(roomclass[i].trim())) {
				test_steps.add("Reservation Stay Info RoomClass verified : " + roomclass[i]);
				reslogger.info("Reservation Stay Info RoomClass verified : " + roomclass[i]);
			} else {
				test_steps.add("Reservation Stay Info RoomClass not found : " + roomclass[i]);
				reslogger.info("Reservation Stay Info RoomClass not found : " + roomclass[i]);
			}

			String roomCharge = "(//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'roomClassName')])["
					+ (i + 1) + "]/following-sibling::span";
			roomCharge = driver.findElement(By.xpath(roomCharge)).getText().trim();
			roomCharge = roomCharge.trim();
			roomCharge = roomCharge.substring(1, roomCharge.length());
			roomCharge = roomCharge.trim();
			if (roomCharge.equalsIgnoreCase(roomCost.get(i).toString().trim())) {
				test_steps.add(
						"Reservation Stay Info RoomCharges verified for line item : " + (i + 1) + " " + roomCharge);
				reslogger.info(
						"Reservation Stay Info RoomCharges verified for line item : " + (i + 1) + " " + roomCharge);
			} else {
				test_steps.add(
						"Reservation Stay Info RoomCharges not found for line item : " + (i + 1) + " " + roomCharge);
				reslogger.info(
						"Reservation Stay Info RoomCharges not found for line item : " + (i + 1) + " " + roomCharge);
			}

			String rateplan = "(//div[contains(text(),'Stay')]/..//div//span[contains(text(),'RATE PLAN:')])[" + (i + 1)
					+ "]/following-sibling::span";
			rateplan = driver.findElement(By.xpath(rateplan)).getText().trim();
			if (rateplan.equalsIgnoreCase(rate[i])) {
				test_steps.add("Reservation Stay Info rateplan verified for line item : " + (i + 1) + " " + rateplan);
				reslogger.info("Reservation Stay Info rateplan verified for line item : " + (i + 1) + " " + rateplan);
			} else {
				test_steps.add("Reservation Stay Info rateplan not found for line item : " + (i + 1) + " " + rateplan);
				reslogger.info("Reservation Stay Info rateplan not found for line item : " + (i + 1) + " " + rateplan);
			}

			String room = "(//span[text()='ROOM:']/following-sibling::span)[" + (i + 1) + "]";
			Wait.WaitForElement(driver, room);
			room = driver.findElement(By.xpath(room)).getText();

			if (IsAssign.equalsIgnoreCase("No")) {
				if (room.equalsIgnoreCase("Unassigned")) {
					test_steps.add("Room Number is of the line item: " + (i + 1) + " is Unassighed");
					reslogger.info("Room Number is of the line item: " + (i + 1) + " Unassighed");
				}
			} else {
				test_steps.add("Room Number is of the line item: " + (i + 1) + " is " + room);
				reslogger.info("Room Number is of the line item: " + (i + 1) + " is " + room);
			}

		}
	}

	public void velidate_TripSummaryAndFolio(WebDriver driver, ArrayList test_steps, String FilioRoomCharges,
			String FilioTaxes, String FilioIncidentals, String FilioTripTotal, String FilioPaid, String FilioBalance,
			String TripSummaryRoomCharges, String TripSummaryTaxes, String TripSummaryIncidentals,
			String TripSummaryTripTotal, String TripSummaryPaid, String TripSummaryBalance) {
		test_steps.add("******************* Validating Folio and TripSummary fields **********************");
		reslogger.info("******************* Validating Folio and TripSummary fields **********************");

		if (FilioRoomCharges.equalsIgnoreCase(TripSummaryRoomCharges)) {
			test_steps.add("TripSummary RoomCharges and Folio RoomCharges are same : " + FilioRoomCharges);
			reslogger.info("TripSummary RoomCharges and Folio RoomCharges are same : " + FilioRoomCharges);
		} else {
			test_steps.add("TripSummary RoomCharges and Folio RoomCharges are not same : " + FilioRoomCharges);
			reslogger.info("TripSummary RoomCharges and Folio RoomCharges are not same : " + FilioRoomCharges);
		}

		if (FilioTaxes.equalsIgnoreCase(TripSummaryTaxes)) {
			test_steps.add("TripSummaryTaxes and FilioTaxes are same : " + FilioTaxes);
			reslogger.info("TTripSummaryTaxes and FilioTaxes are same : " + FilioTaxes);
		} else {
			test_steps.add("TripSummaryTaxes and FilioTaxes are not same : " + FilioTaxes);
			reslogger.info("TripSummaryTaxes and FilioTaxes are not same : " + FilioTaxes);
		}
		if (FilioIncidentals.equalsIgnoreCase(TripSummaryIncidentals)) {
			test_steps.add("TripSummary Incidental and Folio Incidental are same : " + FilioIncidentals);
			reslogger.info("TripSummary Incidental and Folio Incidental are same : " + FilioIncidentals);
		} else {
			test_steps.add("TripSummary Incidental and Folio Incidental are not same : " + FilioIncidentals);
			reslogger.info("TripSummary Incidental and Folio Incidental are not same : " + FilioIncidentals);
		}
		if (FilioTripTotal.equalsIgnoreCase(TripSummaryTripTotal)) {
			test_steps.add("TripSummary TripTotal and Folio TripTotal are same : " + FilioTripTotal);
			reslogger.info("TripSummary TripTotal and Folio TripTotal are same : " + FilioTripTotal);
		} else {
			test_steps.add("TripSummary TripTotal and Folio TripTotal are not same : " + FilioTripTotal);
			reslogger.info("TripSummary TripTotal and Folio TripTotal are not same : " + FilioTripTotal);
		}
		if (FilioPaid.equalsIgnoreCase(TripSummaryPaid)) {
			test_steps.add("TripSummary Paid and Folio Paid are same : " + FilioPaid);
			reslogger.info("TripSummary Paid and Folio Paid are same : " + FilioPaid);
		} else {
			test_steps.add("TripSummary Paid and Folio Paid are not same : " + FilioPaid);
			reslogger.info("TripSummary Paid and Folio Paid are not same : " + FilioPaid);
		}
		if (FilioBalance.equalsIgnoreCase(TripSummaryBalance)) {
			test_steps.add("TripSummary Balance and Folio Balance are same : " + FilioBalance);
			reslogger.info("TripSummary Balance and Folio Balance are same : " + FilioBalance);
		} else {
			test_steps.add("TripSummary Balance and Folio Balance are not same : " + FilioBalance);
			reslogger.info("TripSummary Balance and Folio Balance are not same : " + FilioBalance);
		}
	}

	public void validate_GuestInfo(WebDriver driver, ArrayList test_steps, String Salutation, String GuestFirstName,
			String GuestLastName, String PhoneNumber, String AlternatePhone, String Email, String Country,
			String Account, String Address1, String Address2, String Address3, String State, String City,
			String PostalCode) throws ParseException {
		test_steps.add("******************* Guest Info fields verification **********************");
		reslogger.info("******************* Guest Info fields verification **********************");

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_GuestInfo_GuestName);

		String name = Salutation.trim() + " " + GuestFirstName.trim() + " " + GuestLastName.trim();
		String guestname = res.CP_GuestInfo_GuestName.getText().trim();
		reslogger.info(guestname);
		if (guestname.equalsIgnoreCase(name.trim())) {
			test_steps.add("Reservation Guest Info GuestName field verified : " + name);
			reslogger.info("Reservation Guest Info GuestName field verified : " + name);
		} else {
			test_steps.add("Reservation Guest Info GuestName field not found : " + name);
			reslogger.info("Reservation Guest Info GuestName field not found : " + name);
		}

		String contactname = res.CP_GuestInfo_ContactName.getText().trim();
		reslogger.info(contactname);
		if (contactname.equalsIgnoreCase(name.trim())) {
			test_steps.add("Reservation Guest Info ContactName field verified : " + name);
			reslogger.info("Reservation Guest Info ContactName field verified : " + name);
		} else {
			test_steps.add("Reservation Guest Info ContactName field not found : " + name);
			reslogger.info("Reservation Guest Info ContactName field not found : " + name);
		}

		PhoneNumber = PhoneNumber.replace("" + PhoneNumber.trim().charAt(0), "(" + PhoneNumber.trim().charAt(0));
		PhoneNumber = PhoneNumber.replace("" + PhoneNumber.trim().charAt(4), ")" + PhoneNumber.trim().charAt(4));
		PhoneNumber = PhoneNumber.replace("" + PhoneNumber.trim().charAt(5), " " + PhoneNumber.trim().charAt(5));
		PhoneNumber = PhoneNumber.replace("" + PhoneNumber.trim().charAt(9), "-" + PhoneNumber.trim().charAt(9));

		String code = null;
		if (Country.equalsIgnoreCase("United States")) {
			code = "1";
		} else if (Country.equalsIgnoreCase("United Kingdom")) {
			code = "41";
		}
		code = code + "-";
		PhoneNumber = code + PhoneNumber;
		reslogger.info(PhoneNumber);

		String phone = res.CP_GuestInfo_Phone.getText().trim();
		if (phone.equalsIgnoreCase(PhoneNumber)) {
			test_steps.add("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
			reslogger.info("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
		} else {
			test_steps.add("Reservation Guest Info PhoneNumber field not found : " + PhoneNumber);
			reslogger.info("Reservation Guest Info PhoneNumber field not found : " + PhoneNumber);
		}

		AlternatePhone = AlternatePhone.replace("" + AlternatePhone.trim().charAt(0),
				"(" + AlternatePhone.trim().charAt(0));
		AlternatePhone = AlternatePhone.replace("" + AlternatePhone.trim().charAt(4),
				")" + AlternatePhone.trim().charAt(4));
		AlternatePhone = AlternatePhone.replace("" + AlternatePhone.trim().charAt(5),
				" " + AlternatePhone.trim().charAt(5));
		AlternatePhone = AlternatePhone.replace("" + AlternatePhone.trim().charAt(9),
				"-" + AlternatePhone.trim().charAt(9));

		AlternatePhone = code + AlternatePhone;
		reslogger.info(AlternatePhone);

		phone = res.CP_GuestInfo_AlternatePhone.getText().trim();
		if (phone.equalsIgnoreCase(AlternatePhone)) {
			test_steps.add("Reservation Guest Info AlternatePhone field verified : " + AlternatePhone);
			reslogger.info("Reservation Guest Info AlternatePhone field verified : " + AlternatePhone);
		} else {
			test_steps.add("Reservation Guest Info AlternatePhone field not found : " + AlternatePhone);
			reslogger.info("Reservation Guest Info AlternatePhone field not found : " + AlternatePhone);
		}

		String mail = res.CP_GuestInfo_Email.getText().trim();
		reslogger.info(mail);
		if (mail.equalsIgnoreCase(Email.trim())) {
			test_steps.add("Reservation Guest Info Email field verified : " + Email);
			reslogger.info("Reservation Guest Info Email field verified : " + Email);
		} else {
			test_steps.add("Reservation Guest Info Email field not found : " + Email);
			reslogger.info("Reservation Guest Info Email field not found : " + Email);
		}

		String account = res.CP_GuestInfo_Account.getText().trim();
		if (account.equalsIgnoreCase("-") && (Account.equalsIgnoreCase("") || Account.isEmpty())) {
			test_steps.add("Reservation Guest Info Account field verified");
			reslogger.info("Reservation Guest Info Account field verified");
		} else if (!(account.equalsIgnoreCase("-")) && !(Account.equalsIgnoreCase("") || Account.isEmpty())) {
			if (account.contentEquals(Account.trim())) {
				test_steps.add("Reservation Guest Info Account field verified : " + Account);
				reslogger.info("Reservation Guest Info Account field verified  : " + Account);
			} else {
				test_steps.add("Reservation Guest Info Account field not found : " + Account);
				reslogger.info("Reservation Guest Info Account field not found : " + Account);
			}
		} else {
			test_steps.add("Reservation Guest Info Account field not found : " + Account);
			reslogger.info("Reservation Guest Info Account field not found : " + Account);
		}

		String address1 = res.CP_GuestInfo_Address1.getText().trim();
		reslogger.info(address1);
		if (address1.equalsIgnoreCase(Address1.trim())) {
			test_steps.add("Reservation Guest Info Address1 field verified : " + Address1);
			reslogger.info("Reservation Guest Info Address1 field verified : " + Address1);
		} else {
			test_steps.add("Reservation Guest Info Address1 field not found : " + Address1);
			reslogger.info("Reservation Guest Info Address1 field not found : " + Address1);
		}

		String address2 = res.CP_GuestInfo_Address2.getText().trim();
		reslogger.info(address2);
		if (address2.equalsIgnoreCase(Address2.trim())) {
			test_steps.add("Reservation Guest Info Address2 field verified : " + Address2);
			reslogger.info("Reservation Guest Info Address2 field verified : " + Address2);
		} else {
			test_steps.add("Reservation Guest Info Address2 field not found : " + Address2);
			reslogger.info("Reservation Guest Info Address2 field not found : " + Address2);
		}

		String address3 = res.CP_GuestInfo_Address3.getText().trim();
		reslogger.info(address3);
		if (address3.equalsIgnoreCase(Address3.trim())) {
			test_steps.add("Reservation Guest Info Address3 field verified : " + Address3);
			reslogger.info("Reservation Guest Info Address3 field verified : " + Address3);
		} else {
			test_steps.add("Reservation Guest Info Address3 field not found : " + Address3);
			reslogger.info("Reservation Guest Info Address3 field not found : " + Address3);
		}

		String city = res.CP_GuestInfo_City.getText().trim();
		reslogger.info(city);
		if (city.equalsIgnoreCase(City.trim())) {
			test_steps.add("Reservation Guest Info City field verified : " + City);
			reslogger.info("Reservation Guest Info City field verified : " + City);
		} else {
			test_steps.add("Reservation Guest Info City field not found : " + City);
			reslogger.info("Reservation Guest Info City field not found : " + City);
		}

		String postalcode = res.CP_GuestInfo_PostalCode.getText().trim();
		reslogger.info(postalcode);
		if (postalcode.equalsIgnoreCase(PostalCode.trim())) {
			test_steps.add("Reservation Guest Info PostalCode field verified : " + PostalCode);
			reslogger.info("Reservation Guest Info PostalCode field verified : " + PostalCode);
		} else {
			test_steps.add("Reservation Guest Info PostalCode field not found : " + PostalCode);
			reslogger.info("Reservation Guest Info PostalCode field not found : " + PostalCode);
		}

		String country = res.CP_GuestInfo_Country.getText().trim();
		reslogger.info(country);
		if (country.equalsIgnoreCase(Country.trim())) {
			test_steps.add("Reservation Guest Info Country field verified : " + Country);
			reslogger.info("Reservation Guest Info Country field verified : " + Country);
		} else {
			test_steps.add("Reservation Guest Info Country field not found : " + Country);
			reslogger.info("Reservation Guest Info Country field not found : " + Country);
		}

		String state = res.CP_GuestInfo_State.getText().trim();
		reslogger.info(state);

		if (!(state.equalsIgnoreCase("") || state.isEmpty())) {
			if (state.equalsIgnoreCase(State.trim())) {
				test_steps.add("Reservation Guest Info State field verified : " + State);
				reslogger.info("Reservation Guest Info State field verified : " + State);
			} else {
				test_steps.add("Reservation Guest Info State field not found : " + State);
				reslogger.info("Reservation Guest Info State field not found : " + State);
			}
		}
	}

	public void validate_MRB_GuestInfo(WebDriver driver, ArrayList test_steps, String Salutation, String GuestFirstName,
			String GuestLastName, String PhoneNumber, String AlternatePhone, String Email, String Country,
			String Account, String Address1, String Address2, String Address3, String State, String City,
			String PostalCode) {
		test_steps.add("******************* MRB Guest Info fields verification **********************");
		reslogger.info("******************* MRB Guest Info fields verification **********************");

		String[] sal = Salutation.split("\\|");
		String[] guestFName = GuestFirstName.split("\\|");
		String[] guestLName = GuestLastName.split("\\|");
		String[] phonenum = PhoneNumber.split("\\|");
		String[] email = Email.split("\\|");

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_GuestInfo_GuestName);

		String name = sal[0].trim() + " " + guestFName[0].trim() + " " + guestLName[0].trim();
		String guestname = res.CP_GuestInfo_GuestName.getText().trim();
		reslogger.info(guestname);
		if (guestname.equalsIgnoreCase(name.trim())) {
			test_steps.add("Reservation Guest Info GuestName field verified : " + name);
			reslogger.info("Reservation Guest Info GuestName field verified : " + name);
		} else {
			test_steps.add("Reservation Guest Info GuestName field not found : " + name);
			reslogger.info("Reservation Guest Info GuestName field not found : " + name);
		}

		String contactname = res.CP_GuestInfo_ContactName.getText().trim();
		reslogger.info(contactname);
		if (contactname.equalsIgnoreCase(name.trim())) {
			test_steps.add("Reservation Guest Info ContactName field verified : " + name);
			reslogger.info("Reservation Guest Info ContactName field verified : " + name);
		} else {
			test_steps.add("Reservation Guest Info ContactName field not found : " + name);
			reslogger.info("Reservation Guest Info ContactName field not found : " + name);
		}

		phonenum[0] = phonenum[0].replace("" + phonenum[0].trim().charAt(0), "(" + phonenum[0].trim().charAt(0));
		phonenum[0] = phonenum[0].replace("" + phonenum[0].trim().charAt(4), ")" + phonenum[0].trim().charAt(4));
		phonenum[0] = phonenum[0].replace("" + phonenum[0].trim().charAt(5), " " + phonenum[0].trim().charAt(5));
		phonenum[0] = phonenum[0].replace("" + phonenum[0].trim().charAt(9), "-" + phonenum[0].trim().charAt(9));

		String code = null;
		if (Country.equalsIgnoreCase("United States")) {
			code = "1";
		} else if (Country.equalsIgnoreCase("United Kingdom")) {
			code = "41";
		}
		code = code + "-";
		PhoneNumber = code + phonenum[0];
		reslogger.info(PhoneNumber);

		String phone = res.CP_GuestInfo_Phone.getText().trim();
		if (phone.equalsIgnoreCase(PhoneNumber)) {
			test_steps.add("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
			reslogger.info("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
		} else {
			test_steps.add("Reservation Guest Info PhoneNumber field not found : " + PhoneNumber);
			reslogger.info("Reservation Guest Info PhoneNumber field not found : " + PhoneNumber);
		}

		AlternatePhone = AlternatePhone.replace("" + AlternatePhone.trim().charAt(0),
				"(" + AlternatePhone.trim().charAt(0));
		AlternatePhone = AlternatePhone.replace("" + AlternatePhone.trim().charAt(4),
				")" + AlternatePhone.trim().charAt(4));
		AlternatePhone = AlternatePhone.replace("" + AlternatePhone.trim().charAt(5),
				" " + AlternatePhone.trim().charAt(5));
		AlternatePhone = AlternatePhone.replace("" + AlternatePhone.trim().charAt(9),
				"-" + AlternatePhone.trim().charAt(9));

		AlternatePhone = code + AlternatePhone;
		reslogger.info(AlternatePhone);

		phone = res.CP_GuestInfo_AlternatePhone.getText().trim();
		if (phone.equalsIgnoreCase(AlternatePhone)) {
			test_steps.add("Reservation Guest Info AlternatePhone field verified : " + AlternatePhone);
			reslogger.info("Reservation Guest Info AlternatePhone field verified : " + AlternatePhone);
		} else {
			test_steps.add("Reservation Guest Info AlternatePhone field not found : " + AlternatePhone);
			reslogger.info("Reservation Guest Info AlternatePhone field not found : " + AlternatePhone);
		}

		String mail = res.CP_GuestInfo_Email.getText().trim();
		reslogger.info(mail);
		if (mail.equalsIgnoreCase(email[0].trim())) {
			test_steps.add("Reservation Guest Info Email field verified : " + email[0]);
			reslogger.info("Reservation Guest Info Email field verified : " + email[0]);
		} else {
			test_steps.add("Reservation Guest Info Email field not found : " + email[0]);
			reslogger.info("Reservation Guest Info Email field not found : " + email[0]);
		}
		String account;
		if (!(Account.equalsIgnoreCase("") || Account.isEmpty())) {
			account = "//guest-info//span[contains(text(),'Gues')]/../..//label[text()='Account']/following-sibling::a//span";
			account = driver.findElement(By.xpath(account)).getText();
		} else {

			account = res.CP_GuestInfo_Account.getText().trim();
		}
		if (account.equalsIgnoreCase("-") && (Account.equalsIgnoreCase("") || Account.isEmpty())) {
			test_steps.add("Reservation Guest Info Account field verified");
			reslogger.info("Reservation Guest Info Account field verified");
		} else if (!(account.equalsIgnoreCase("-")) && !(Account.equalsIgnoreCase("") || Account.isEmpty())) {
			if (account.contentEquals(Account.trim())) {
				test_steps.add("Reservation Guest Info Account field verified : " + Account);
				reslogger.info("Reservation Guest Info Account field verified  : " + Account);
			} else {
				test_steps.add("Reservation Guest Info Account field not found : " + Account);
				reslogger.info("Reservation Guest Info Account field not found : " + Account);
			}
		} else {
			test_steps.add("Reservation Guest Info Account field not found : " + Account);
			reslogger.info("Reservation Guest Info Account field not found : " + Account);
		}

		String address1 = res.CP_GuestInfo_Address1.getText().trim();
		reslogger.info(address1);
		if (address1.equalsIgnoreCase(Address1.trim())) {
			test_steps.add("Reservation Guest Info Address1 field verified : " + Address1);
			reslogger.info("Reservation Guest Info Address1 field verified : " + Address1);
		} else {
			test_steps.add("Reservation Guest Info Address1 field not found : " + Address1);
			reslogger.info("Reservation Guest Info Address1 field not found : " + Address1);
		}

		String address2 = res.CP_GuestInfo_Address2.getText().trim();
		reslogger.info(address2);
		if (address2.equalsIgnoreCase(Address2.trim())) {
			test_steps.add("Reservation Guest Info Address2 field verified : " + Address2);
			reslogger.info("Reservation Guest Info Address2 field verified : " + Address2);
		} else {
			test_steps.add("Reservation Guest Info Address2 field not found : " + Address2);
			reslogger.info("Reservation Guest Info Address2 field not found : " + Address2);
		}

		String address3 = res.CP_GuestInfo_Address3.getText().trim();
		reslogger.info(address3);
		if (address3.equalsIgnoreCase(Address3.trim())) {
			test_steps.add("Reservation Guest Info Address3 field verified : " + Address3);
			reslogger.info("Reservation Guest Info Address3 field verified : " + Address3);
		} else {
			test_steps.add("Reservation Guest Info Address3 field not found : " + Address3);
			reslogger.info("Reservation Guest Info Address3 field not found : " + Address3);
		}

		String city = res.CP_GuestInfo_City.getText().trim();
		reslogger.info(city);
		if (city.equalsIgnoreCase(City.trim())) {
			test_steps.add("Reservation Guest Info City field verified : " + City);
			reslogger.info("Reservation Guest Info City field verified : " + City);
		} else {
			test_steps.add("Reservation Guest Info City field not found : " + City);
			reslogger.info("Reservation Guest Info City field not found : " + City);
		}

		String postalcode = res.CP_GuestInfo_PostalCode.getText().trim();
		reslogger.info(postalcode);
		if (postalcode.equalsIgnoreCase(PostalCode.trim())) {
			test_steps.add("Reservation Guest Info PostalCode field verified : " + PostalCode);
			reslogger.info("Reservation Guest Info PostalCode field verified : " + PostalCode);
		} else {
			test_steps.add("Reservation Guest Info PostalCode field not found : " + PostalCode);
			reslogger.info("Reservation Guest Info PostalCode field not found : " + PostalCode);
		}

		String country = res.CP_GuestInfo_Country.getText().trim();
		reslogger.info(country);
		if (country.equalsIgnoreCase(Country.trim())) {
			test_steps.add("Reservation Guest Info Country field verified : " + Country);
			reslogger.info("Reservation Guest Info Country field verified : " + Country);
		} else {
			test_steps.add("Reservation Guest Info Country field not found : " + Country);
			reslogger.info("Reservation Guest Info Country field not found : " + Country);
		}

		String state = res.CP_GuestInfo_State.getText().trim();
		reslogger.info(state);

		if (!(state.equalsIgnoreCase("") || state.isEmpty())) {
			if (state.equalsIgnoreCase(State.trim())) {
				test_steps.add("Reservation Guest Info State field verified : " + State);
				reslogger.info("Reservation Guest Info State field verified : " + State);
			} else {
				test_steps.add("Reservation Guest Info State field not found : " + State);
				reslogger.info("Reservation Guest Info State field not found : " + State);
			}
		}
	}

	public void validate_MRB_AdditionalGuestInfo(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String PhoneNumber, String Email, String Country) {
		test_steps.add("******************* MRB additional Guest Info fields verification **********************");
		reslogger.info("******************* MRB additional Guest Info fields verification **********************");

		String[] sal = Salutation.split("\\|");
		String[] guestFName = GuestFirstName.split("\\|");
		String[] guestLName = GuestLastName.split("\\|");
		String[] phonenum = PhoneNumber.split("\\|");
		String[] email = Email.split("\\|");

		String addtionalRoom = "//span[contains(text(),'Additional Room: ')]";

		int count = sal.length;

		for (int i = 1; i < count; i++) {

			addtionalRoom = "(//span[contains(text(),'Additional Room: ')])[" + i + "]";
			Wait.WaitForElement(driver, addtionalRoom);
			driver.findElement(By.xpath(addtionalRoom)).click();
			test_steps.add("Expending addtinal guest room : " + i);
			reslogger.info("Expending addtinal guest room : " + i);

			Elements_CPReservation res = new Elements_CPReservation(driver);

			String guestName = "(//span[contains(text(),'Additional Room: ')])[" + i
					+ "]/../../../../../..//label[text()='Guest Name']/following-sibling::span";
			Wait.WaitForElement(driver, guestName);

			String name = sal[i].trim() + " " + guestFName[i].trim() + " " + guestLName[i].trim();
			String guestname = driver.findElement(By.xpath(guestName)).getText().trim();
			reslogger.info(guestname);
			if (guestname.equalsIgnoreCase(name.trim())) {
				test_steps.add("Reservation addtinal Guest Info GuestName field verified for additonal room : " + i
						+ " " + name);
				reslogger.info("Reservation addtinal Guest Info GuestName field verified for additonal room : " + i
						+ " " + name);
			} else {
				test_steps.add("Reservation addtinal Guest Info GuestName field not found for additonal room : " + i
						+ " " + name);
				reslogger.info("Reservation addtinal Guest Info GuestName field not found for additonal room : " + i
						+ " " + name);
			}

			String code = null;
			if (Country.equalsIgnoreCase("United States")) {
				code = "1";
			} else if (Country.equalsIgnoreCase("United Kingdom")) {
				code = "41";
			}
			code = code + "-";
			PhoneNumber = phonenum[i];
			reslogger.info(PhoneNumber);

			String phone = "(//span[contains(text(),'Additional Room: ')])[" + i
					+ "]/../../../../../..//label[text()='Phone']/following-sibling::span";
			phone = driver.findElement(By.xpath(phone)).getText().trim();
			if (phone.equalsIgnoreCase(PhoneNumber)) {
				test_steps.add("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
				reslogger.info("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
			} else {
				test_steps.add("Reservation Guest Info PhoneNumber field not found : " + PhoneNumber);
				reslogger.info("Reservation Guest Info PhoneNumber field not found : " + PhoneNumber);
			}

			String mailadd = "(//span[contains(text(),'Additional Room: ')])[" + i
					+ "]/../../../../../..//label[text()='E-mail']/following-sibling::span";
			String mail = driver.findElement(By.xpath(mailadd)).getText().trim();
			reslogger.info(mail);
			/*
			 * if (mail.equalsIgnoreCase(email[i].trim())) {
			 * test_steps.add("Reservation Guest Info Email field verified : " + email[i]);
			 * reslogger.info("Reservation Guest Info Email field verified : " + email[i]);
			 * } else { test_steps.add("Reservation Guest Info Email field not found : " +
			 * email[i]); reslogger.info("Reservation Guest Info Email field not found : " +
			 * email[i]); }
			 */
		}
	}

	public void get_AssociatedPoliciesToReservation(WebDriver driver, ArrayList test_steps)
			throws InterruptedException {
		test_steps.add("******************* Policies associated to reservation **********************");
		reslogger.info("******************* Policies associated to reservation **********************");
		String policies = "(//div[text()='Policies And Disclaimers']/..//h4)";

		int count = driver.findElements(By.xpath(policies)).size();
		for (int i = 1; i < count; i++) {
			policies = "(//div[text()='Policies And Disclaimers']/..//h4)[" + i + "]/a";
			driver.findElement(By.xpath(policies)).click();
			Wait.wait2Second();
			if (i == 1) {
				String depositPolicy = "//div[text()='Policies And Disclaimers']/..//label[text()='Deposit Policy']/following-sibling::div//button/span";
				depositPolicy = driver.findElement(By.xpath(depositPolicy)).getText();
				test_steps.add("Associated deposit policy to reservation : " + depositPolicy);
				reslogger.info("Associated deposit policy to reservation : " + depositPolicy);
			}
			if (i == 2) {
				String checkinPolicy = "//div[text()='Policies And Disclaimers']/..//label[text()='Check-in Policy']/following-sibling::div//button/span";
				checkinPolicy = driver.findElement(By.xpath(checkinPolicy)).getText();
				test_steps.add("Associated checkin policy to reservation : " + checkinPolicy);
				reslogger.info("Associated checkin policy to reservation : " + checkinPolicy);
			}
			if (i == 3) {
				String noShow = "//div[text()='Policies And Disclaimers']/..//label[text()='No show Policy']/following-sibling::div//button/span";
				noShow = driver.findElement(By.xpath(noShow)).getText();
				test_steps.add("Associated noShow policy to reservation : " + noShow);
				reslogger.info("Associated noShow policy to reservation : " + noShow);
			}
		}
	}

	public void validate_DepositAmount(WebDriver driver, ArrayList test_steps, String Number, Double DepositPaid,
			Double RoomCharges) {
		test_steps.add("******************* validating deposit amount **********************");
		reslogger.info("******************* Verify Deposit Policy Associated **********************");
		int num = Integer.parseInt(Number.trim());
		if ((RoomCharges * num) / 100 == DepositPaid) {
			test_steps.add("Deposit amount validated : " + DepositPaid);
			reslogger.info("Deposit amount validated : " + DepositPaid);
		} else {
			test_steps.add("Deposit amount paid : " + DepositPaid + " and actual deposit are not same : "
					+ (RoomCharges * num) / 100);
			reslogger.info("Deposit amount paid : " + DepositPaid + " and actual deposit are not same : "
					+ (RoomCharges * num) / 100);
		}

	}

	public void verify_DepositPolicyAssociated(WebDriver driver, ArrayList test_steps, String PolicyName)
			throws InterruptedException {
		test_steps.add("******************* Verify Deposit Policy Associated **********************");
		reslogger.info("******************* Verify Deposit Policy Associated **********************");
		String policies = "(//div[text()='Policies And Disclaimers']/..//h4)/a";
		driver.findElement(By.xpath(policies)).click();
		Wait.wait2Second();
		String depositPolicy = "//div[text()='Policies And Disclaimers']/..//label[text()='Deposit Policy']/following-sibling::div//button/span";
		depositPolicy = driver.findElement(By.xpath(depositPolicy)).getText().trim();
		test_steps.add("Associated deposit policy to reservation : " + depositPolicy);
		reslogger.info("Associated deposit policy to reservation : " + depositPolicy);
		reslogger.info(depositPolicy);
		reslogger.info(PolicyName);
		assertEquals(depositPolicy, PolicyName);
		test_steps.add("Verified Associated deposit policy to reservation : " + depositPolicy);
		reslogger.info("Verified Associated deposit policy to reservation : " + depositPolicy);
	}

	public void verify_GuestReportLabelsValidations(WebDriver driver, ArrayList test_steps)
			throws InterruptedException {
		test_steps.add("===================Guest Reports labels verification===================");
		reslogger.info("===================Guest Reports labels verification===================");
		String reports = "//div/a[contains(text(),'Reports ')]";
		Wait.WaitForElement(driver, reports);
		driver.findElement(By.xpath(reports)).click();
		Wait.wait2Second();
		String guestStatement = "//div/a[contains(text(),'Reports ')]/..//ul//span[text()='Guest Statement']";
		String guestStatementWithTaxBreakdown = "//div/a[contains(text(),'Reports ')]/..//ul//span[text()='Guest Statement with Tax breakdown']";
		String guestRegistration = "//div/a[contains(text(),'Reports ')]/..//ul//span[text()='Guest Registration']";
		String guestRegistartiontaxbreakdown = "//div/a[contains(text(),'Reports ')]/..//ul//span[text()='Guest Registration with Tax breakdown']";

		if (driver.findElement(By.xpath(guestStatement)).isDisplayed()) {
			test_steps.add("Guest Statement label displayed");
			reslogger.info("Guest Statement label displayed");
		} else {
			test_steps.add("Guest Statement label not displayed");
			reslogger.info("Guest Statement label not displayed");
		}

		if (driver.findElement(By.xpath(guestStatementWithTaxBreakdown)).isDisplayed()) {
			test_steps.add("Guest Statement with Tax breakdown label displayed");
			reslogger.info("Guest Statement with Tax breakdown label displayed");
		} else {
			test_steps.add("Guest Statement with Tax breakdown label not displayed");
			reslogger.info("Guest Statement with Tax breakdown label not displayed");
		}

		if (driver.findElement(By.xpath(guestRegistration)).isDisplayed()) {
			test_steps.add("Guest Registration label displayed");
			reslogger.info("Guest Registration label displayed");
		} else {
			test_steps.add("Guest Registration label not displayed");
			reslogger.info("Guest Registration label not displayed");
		}

		if (driver.findElement(By.xpath(guestRegistartiontaxbreakdown)).isDisplayed()) {
			test_steps.add("Guest Registration with Tax breakdown label displayed");
			reslogger.info("Guest Registration with Tax breakdown label displayed");
		} else {
			test_steps.add("Guest Registration with Tax breakdown label not displayed");
			reslogger.info("Guest Registration with Tax breakdown label not displayed");
		}
		Wait.WaitForElement(driver, reports);
		driver.findElement(By.xpath(reports)).click();
	}

	public void verify_NotesSections(WebDriver driver, ArrayList test_steps) {
		test_steps.add("******************* Verify Notes section **********************");
		reslogger.info("******************* Verify Notes section **********************");
		String note = "//a[text()='ADD NOTE ']";
		if (driver.findElement(By.xpath(note)).isDisplayed()) {
			test_steps.add("Notes Section is displayed");
			reslogger.info("Notes Section is displayed");
		} else {
			test_steps.add("Notes Section is not displayed");
			reslogger.info("Notes Section is not displayed");
		}
	}

	public void enter_Notes(WebDriver driver, ArrayList test_steps, String IsAddNotes, String NoteType, String Subject,
			String Description) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddNotes);
		test_steps.add("******************* Adding Notes **********************");
		reslogger.info("******************* Adding Notes **********************");
		if (IsAddNotes.equalsIgnoreCase("Yes")) {
			try {
				Utility.scrollAndClick(driver, By.xpath(OR_Reservation.CP_AddNotes));
			} catch (Exception e) {
				Utility.clickThroughJavaScript(driver, res.CP_AddNotes);
			}
			test_steps.add("Click on Add Notes");
			reslogger.info("Click on Add Notes");
			Wait.wait5Second();
			String noteTypeArrow = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Type']/..//button";
			Wait.WaitForElement(driver, noteTypeArrow);
			try {
				JavascriptExecutor executor = (JavascriptExecutor) driver;
				executor.executeScript("arguments[0].click();", driver.findElement(By.xpath(noteTypeArrow)));

			} catch (Exception e) {
				driver.findElement(By.xpath(noteTypeArrow)).click();
			}

			String noteType = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Type']/..//button/..//div//li/a/span[text()='"
					+ NoteType.trim() + "']";
			Wait.WaitForElement(driver, noteType);
			driver.findElement(By.xpath(noteType)).click();
			test_steps.add("Select Note Type : " + NoteType);
			reslogger.info("Select Note Type : " + NoteType);

			String subject = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Subject']/..//input";
			Wait.WaitForElement(driver, subject);
			driver.findElement(By.xpath(subject)).sendKeys(Subject);
			test_steps.add("Enter subject : " + Subject);
			reslogger.info("Enter subject : " + Subject);

			String description = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Description']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, description);
			driver.findElement(By.xpath(description)).sendKeys(Description);
			test_steps.add("Enter Description : " + Description);
			reslogger.info("Enter Description : " + Description);

			String user = "//input[starts-with(@data-bind,'value: updatedBy')]";

			JavascriptExecutor js = (JavascriptExecutor) driver;
			user = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(user)));

			String add = "//h4[text()='Add Notes']/../..//button[text()='Add']";
			Wait.WaitForElement(driver, add);
			Utility.customAssert(driver.findElement(By.xpath(add)).isEnabled() + "", "true", true,
					"Successfully Verified Add Note Button", "Successfully Verified Add Note Button", true, test_steps);
			driver.findElement(By.xpath(add)).click();
			test_steps.add("Click on Add");
			reslogger.info("Click on Add");

			String noteverify = "//td[text()='" + NoteType.trim() + "']";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Sucessfully added Note : " + Subject);
			reslogger.info("Sucessfully added Note : " + Subject);

			test_steps.add("Verified Note Type : " + NoteType);
			reslogger.info("Verified Note Type : " + NoteType);

			noteverify = "//td[text()='" + Subject.trim() + "']";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note Subject : " + Subject);
			reslogger.info("Verified Note Subject : " + Subject);

			noteverify = "//td[text()='" + Description.trim() + "']";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note Description : " + Description);
			reslogger.info("Verified Note Description : " + Description);

			noteverify = "//td[text()='" + user.trim() + "']";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note updated by : " + user);
			reslogger.info("Verified Note updated by : " + user);
		}
	}

	public void verify_Notes(WebDriver driver, ArrayList test_steps, String NoteType, String Subject,
			String Description, String user, ArrayList RoomAbbri, ArrayList Rooms) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddNotes);
		test_steps.add("******************* Verify  Notes **********************");
		reslogger.info("******************* Verify Notes **********************");
		int count = RoomAbbri.size();
		for (int i = 0; i < count; i++) {
			String noteverify = "(//td[text()='" + NoteType.trim() + "'])[" + (i + 1) + "]";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Sucessfully added Note : " + Subject);
			reslogger.info("Sucessfully added Note : " + Subject);

			test_steps.add("Verified Note Type : " + NoteType);
			reslogger.info("Verified Note Type : " + NoteType);

			noteverify = "(//td[text()='" + Subject.trim() + "'])[" + (i + 1) + "]";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note Subject : " + Subject);
			reslogger.info("Verified Note Subject : " + Subject);

			noteverify = "(//td[text()='" + Description.trim() + "'])[" + (i + 1) + "]";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note Description : " + Description);
			reslogger.info("Verified Note Description : " + Description);

			noteverify = "(//td[text()='" + user.trim() + "'])[" + (i + 1) + "]";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note updated by : " + user);
			reslogger.info("Verified Note updated by : " + user);

			String[] room = Rooms.get(i).toString().trim().split(":");
			String abbr = RoomAbbri.get(i).toString().trim();

			String[] abbri = abbr.trim().split(":");

			abbr = abbri[1] + ":" + room[1];
			reslogger.info(abbr);
			String roomnum = "//td[contains(text(),'" + abbr + "')]";
			reslogger.info(roomnum);
			Wait.WaitForElement(driver, roomnum);
			test_steps.add("Verified Note Room Number : " + abbr);
			reslogger.info("Verified Note Room Number : " + abbr);
		}
	}

	public void enter_NotesWithTimeZone(WebDriver driver, ArrayList test_steps, String IsAddNotes, String NoteType,
			String Subject, String Description, String timeZone) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddNotes);
		test_steps.add("******************* Adding Notes **********************");
		reslogger.info("******************* Adding Notes **********************");
		if (IsAddNotes.equalsIgnoreCase("Yes")) {
			res.CP_AddNotes.click();
			test_steps.add("Click on Add Notes");
			reslogger.info("Click on Add Notes");

			String noteTypeArrow = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Type']/..//button";
			Wait.WaitForElement(driver, noteTypeArrow);
			driver.findElement(By.xpath(noteTypeArrow)).click();

			String noteType = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Type']/..//button/..//div//li/a/span[text()='"
					+ NoteType.trim() + "']";
			Wait.WaitForElement(driver, noteType);
			driver.findElement(By.xpath(noteType)).click();
			test_steps.add("Select Note Type : " + NoteType);
			reslogger.info("Select Note Type : " + NoteType);

			String subject = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Subject']/..//input";
			Wait.WaitForElement(driver, subject);
			driver.findElement(By.xpath(subject)).sendKeys(Subject);
			test_steps.add("Enter subject : " + Subject);
			reslogger.info("Enter subject : " + Subject);

			String description = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Description']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, description);
			driver.findElement(By.xpath(description)).sendKeys(Description);
			test_steps.add("Enter Description : " + Description);
			reslogger.info("Enter Description : " + Description);

			String user = "//input[starts-with(@data-bind,'value: updatedBy')]";

			JavascriptExecutor js = (JavascriptExecutor) driver;
			user = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(user)));

			Date date = new Date();
			DateFormat df = new SimpleDateFormat("MM/dd/yyy");

			// Use Madrid's time zone to format the date in
			df.setTimeZone(TimeZone.getTimeZone(timeZone));

			reslogger.info(df.format(date));

			String updatedon = "(//h4[text()='Add Notes']/../..//label[text()='Updated On']/../input)";
			js = (JavascriptExecutor) driver;
			String updatedOn = (String) js.executeScript("return arguments[0].value",
					driver.findElement(By.xpath(updatedon)));
			if (df.format(date).equalsIgnoreCase(updatedOn)) {
				test_steps.add("Updated on date validated with property time zone date : " + df.format(date));
				reslogger.info("Updated on date validated with property time zone date : " + df.format(date));
			}

			String add = "//h4[text()='Add Notes']/../..//button[text()='Add']";
			Wait.WaitForElement(driver, add);
			driver.findElement(By.xpath(add)).click();
			test_steps.add("Click on Add");
			reslogger.info("Click on Add");

			String noteverify = "//td[text()='" + NoteType.trim() + "']";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Sucessfully added Note : " + Subject);
			reslogger.info("Sucessfully added Note : " + Subject);

			test_steps.add("Verified Note Type : " + NoteType);
			reslogger.info("Verified Note Type : " + NoteType);

			noteverify = "//td[text()='" + Subject.trim() + "']";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note Subject : " + Subject);
			reslogger.info("Verified Note Subject : " + Subject);

			noteverify = "//td[text()='" + Description.trim() + "']";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note Description : " + Description);
			reslogger.info("Verified Note Description : " + Description);

			noteverify = "//td[text()='" + user.trim() + "']";
			Wait.WaitForElement(driver, noteverify);
			test_steps.add("Verified Note updated by : " + user);
			reslogger.info("Verified Note updated by : " + user);
		}
	}

	public boolean verify_TaskSections(WebDriver driver, ArrayList test_steps) {
		test_steps.add("******************* Verify Task section **********************");
		reslogger.info("******************* Verify Task section **********************");
		String task = "//button[text()='ADD TASK']";
		if (driver.findElement(By.xpath(task)).isDisplayed()) {
			test_steps.add("Task Section is displayed");
			reslogger.info("Task Section is displayed");
			return true;
		} else {
			test_steps.add("Task Section is not displayed");
			reslogger.info("Task Section is not displayed");
			return false;
		}
	}

	public void enter_Task(WebDriver driver, ArrayList test_steps, String IsTask, String TaskCategory, String TaskType,
			String TaskDetails, String TaskRemarks, String TaskDueon, String TaskAssignee, String TaskStatus)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddTask);
		test_steps.add("******************* Adding Task **********************");
		reslogger.info("******************* Adding Task **********************");
		if (IsTask.equalsIgnoreCase("Yes")) {
			res.CP_AddTask.click();
			test_steps.add("Click on Add Task");
			reslogger.info("Click on Add Task");
			Wait.wait5Second();
			String taskCategoryArrow = "//label[text()='Category']/..//button";
			Wait.WaitForElement(driver, taskCategoryArrow);
			try {
				driver.findElement(By.xpath(taskCategoryArrow)).click();
			} catch (Exception e) {
				taskCategoryArrow = "(//label[text()='Category']/..//button)[2]";
				driver.findElement(By.xpath(taskCategoryArrow)).click();
			}

			String taskCategory = "//label[text()='Category']/..//div/ul//span[text()='" + TaskCategory.trim() + "']";
			Wait.WaitForElement(driver, taskCategory);
			driver.findElement(By.xpath(taskCategory)).click();
			test_steps.add("Select Task Category : " + TaskCategory);
			reslogger.info("Select Task Category : " + TaskCategory);

			String taskType = "(//label[text()='Type']/..//button)[2]";

			try {
				Wait.WaitForElement(driver, taskType);
				driver.findElement(By.xpath(taskType)).click();
			} catch (Exception e) {
				try {
					taskType = "(//label[text()='Type']/..//button)[3]";
					driver.findElement(By.xpath(taskType)).click();
				} catch (Exception e1) {
					taskType = "//label[text()='Type']/..//button";
					driver.findElement(By.xpath(taskType)).click();
				}
			}
			Wait.wait2Second();
			taskType = "(//label[text()='Type']/..//div/ul//span[text()='" + TaskType.trim() + "'])[2]";
			try {
				// Wait.WaitForElement(driver, taskType);
				Wait.wait2Second();
				driver.findElement(By.xpath(taskType)).click();
			} catch (Exception e) {
				taskType = "(//label[text()='Type']/..//div/ul//span[text()='" + TaskType.trim() + "'])";
				driver.findElement(By.xpath(taskType)).click();

			}
			test_steps.add("Select Task Type : " + TaskType);
			reslogger.info("Select Task Type : " + TaskType);

			String taskDetails = "//label[text()='Details']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, taskDetails);
			try {
				driver.findElement(By.xpath(taskDetails)).sendKeys(TaskDetails);
			} catch (Exception e) {
				taskDetails = "(//label[text()='Details']/preceding-sibling::textarea)[2]";
				driver.findElement(By.xpath(taskDetails)).sendKeys(TaskDetails);
			}
			test_steps.add("Select Task Details : " + TaskDetails);
			reslogger.info("Select Task Details : " + TaskDetails);

			String taskRemarks = "//label[text()='Remarks']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, taskRemarks);
			try {
				driver.findElement(By.xpath(taskRemarks)).sendKeys(TaskRemarks);
			} catch (Exception e) {
				taskRemarks = "(//label[text()='Remarks']/preceding-sibling::textarea)[2]";
				driver.findElement(By.xpath(taskRemarks)).sendKeys(TaskRemarks);
			}
			test_steps.add("Enter Task Remarks : " + TaskRemarks);
			reslogger.info("Enter Task Remarks : " + TaskRemarks);

			String dueCalender = "//label[text()='Due On']/..//i";
			Wait.WaitForElement(driver, dueCalender);
			try {
				driver.findElement(By.xpath(dueCalender)).click();
			} catch (Exception e) {
				dueCalender = "(//label[text()='Due On']/..//i)[2]";
				driver.findElement(By.xpath(dueCalender)).click();
			}
			String monthYear = Utility.get_MonthYear(TaskDueon);
			String day = Utility.getDay(TaskDueon);
			reslogger.info(monthYear);
			String header = null, headerText = null, next = null, date;
			for (int i = 1; i <= 12; i++) {
				header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
				headerText = driver.findElement(By.xpath(header)).getText();
				if (headerText.equalsIgnoreCase(monthYear)) {
					date = "//td[contains(@class,'day') and text()='" + day + "']";
					Wait.WaitForElement(driver, date);
					int size = driver.findElements(By.xpath(date)).size();
					for (int k = 1; k <= size; k++) {
						date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + k + "]";
						String classText = driver.findElement(By.xpath(date)).getAttribute("class");
						if (!classText.contains("old")) {
							driver.findElement(By.xpath(date)).click();
							test_steps.add("Selecting due on date : " + TaskDueon);
							reslogger.info("Selecting due on date : " + TaskDueon);
							break;
						}
					}
					break;
				} else {
					next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
					Wait.WaitForElement(driver, next);
					driver.findElement(By.xpath(next)).click();
					Wait.wait2Second();
				}
			}

			String taskAssignee = "//label[text()='Assignee']/..//input";
			Wait.WaitForElement(driver, taskAssignee);
			try {
				driver.findElement(By.xpath(taskAssignee)).sendKeys(TaskAssignee);
			} catch (Exception e) {
				taskAssignee = "(//label[text()='Assignee']/..//input)[2]";
				driver.findElement(By.xpath(taskAssignee)).sendKeys(TaskAssignee);
			}
			Wait.wait2Second();
			String taskassgin = "//label[text()='Assignee']/..//div/ul/li/div";
			Wait.WaitForElement(driver, taskassgin);
			driver.findElement(By.xpath(taskassgin)).click();
			test_steps.add("Enter Task Assignee : " + TaskAssignee);
			reslogger.info("Enter Task Assignee : " + TaskAssignee);

			String taskStatus = "(//label[text()='Status']/..//button)[2]";
			Wait.WaitForElement(driver, taskStatus);
			String status = "";
			try {
				driver.findElement(By.xpath(taskStatus)).click();
				status = "(//label[text()='Status']/..//button)[2]/following-sibling::div//li//span[text()='"
						+ TaskStatus.trim() + "']";
			} catch (Exception e) {
				taskStatus = "(//label[text()='Status']/..//button)[3]";
				driver.findElement(By.xpath(taskStatus)).click();
				status = "(//label[text()='Status']/..//button)[3]/following-sibling::div//li//span[text()='"
						+ TaskStatus.trim() + "']";
			}
			Wait.WaitForElement(driver, status);
			driver.findElement(By.xpath(status)).click();
			test_steps.add("Select Task Status : " + TaskStatus);
			reslogger.info("Select Task Status : " + TaskStatus);

			String save = "//h4[text()='Add Task']/../..//button[text()='Save']";
			Wait.WaitForElement(driver, save);
			driver.findElement(By.xpath(save)).click();
			test_steps.add("Click on Save");
			reslogger.info("Click on Save");

			String taskVerify = "//span[text()='Tasks ']/../..//td//span[text()='" + TaskType.trim() + "']";
			Wait.WaitForElement(driver, taskVerify);
			test_steps.add("Sucessfully added Task : " + TaskType);
			reslogger.info("Sucessfully added Task : " + TaskType);

			test_steps.add("Verified Task Type : " + TaskType);
			reslogger.info("Verified Task Type : " + TaskType);

			test_steps.add("Verified Task Type : " + TaskType);
			reslogger.info("Verified Task Type : " + TaskType);

			taskDetails = "//span[text()='Tasks ']/../..//td[text()='" + TaskDetails.trim() + "']";
			Wait.WaitForElement(driver, taskDetails);
			test_steps.add("Verified Task details : " + TaskDetails);
			reslogger.info("Verified Task details : " + TaskDetails);

			String[] taskdue = TaskDueon.split("/");
			String due = "//span[text()='Tasks ']/../..//td[contains(text(),'" + taskdue[1] + "/" + taskdue[0] + "')]";
			Wait.WaitForElement(driver, due);
			test_steps.add("Verified Task due on : " + TaskDueon);
			reslogger.info("Verified Task due on : " + TaskDueon);

			String stat = "//span[text()='Tasks ']/../..//td[contains(text(),'" + TaskStatus.trim() + "')]";
			Wait.WaitForElement(driver, stat);
			test_steps.add("Verified Tsak Status : " + TaskStatus);
			reslogger.info("Verified Task Status : " + TaskStatus);

		}
	}

	public void select_Dates(WebDriver driver, ArrayList test_steps, String CheckInDate, String CheckoutDate,
			String Adults, String Children, String RatePlan, String PromoCode, String IsSplitRes)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
//

		String loading = "(//div[@class='ir-loader-in'])[2]";

		int counter = 0;
		while (true) {
			Boolean load = Utility.isElementDisplayed(driver, By.xpath(loading));
			if (load) {
				if (counter == 40) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
				reslogger.info("Waited to loading symbol");
			} else {
				break;
			}
//			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
//				break;
//			} else if (counter == 40) {
//				break;
//			} else {
//				counter++;
//				Wait.wait2Second();
//			}
		}

		String[] checkin = CheckInDate.split("\\|");
		String[] checkout = CheckoutDate.split("\\|");
		String[] adu = Adults.split("\\|");
		String[] child = Children.split("\\|");
		String[] rate = RatePlan.split("\\|");
		String[] promoCode = PromoCode.split("\\|");
		Boolean flag = false;
		reslogger.info(CheckInDate);
		int size = checkin.length;
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddRoom);
		reslogger.info("MRB size : " + size);
		if (size > 1) {
			for (int i = 1; i <= size; i++) {
				String checkInCal = "(//label[text()='Check In']/following-sibling::i)[" + i + "]";
				reslogger.info(checkInCal);
				Wait.WaitForElement(driver, checkInCal);
				driver.findElement(By.xpath(checkInCal)).click();
				reslogger.info("Check in: " + checkin[i - 1]);
				String monthYear = Utility.get_MonthYear(checkin[i - 1]);
				String day = Utility.getDay(checkin[i - 1]);
				reslogger.info(monthYear);
				String header = null, headerText = null, next = null, date;
				for (int k = 1; k <= 12; k++) {
					header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
					headerText = driver.findElement(By.xpath(header)).getText();
					if (headerText.equalsIgnoreCase(monthYear)) {
						date = "//td[contains(@class,'day') and text()='" + day + "']";
						Wait.WaitForElement(driver, date);

						int size1 = driver.findElements(By.xpath(date)).size();
						for (int l = 1; l <= size; l++) {
							date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + l + "]";
							String classText = driver.findElement(By.xpath(date)).getAttribute("class");
							if (!classText.contains("old")) {
								driver.findElement(By.xpath(date)).click();
								test_steps.add("Selecting checkin date : " + checkin[+(i - 1)]);
								reslogger.info("Selecting checkin date : " + checkin[(i - 1)]);
								break;
							}
						}

						break;
					} else {
						next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
						Wait.WaitForElement(driver, next);
						driver.findElement(By.xpath(next)).click();
						Wait.wait2Second();
					}
				}

				String checkOutCal = "(//label[text()='Check Out']/following-sibling::i)[" + i + "]";
				reslogger.info(checkOutCal);
				Wait.WaitForElement(driver, checkOutCal);
				driver.findElement(By.xpath(checkOutCal)).click();
				monthYear = Utility.get_MonthYear(checkout[i - 1]);
				day = Utility.getDay(checkout[i - 1]);
				reslogger.info(monthYear);
				for (int k = 1; k <= 12; k++) {
					header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
					headerText = driver.findElement(By.xpath(header)).getText();
					if (headerText.equalsIgnoreCase(monthYear)) {
						date = "//td[contains(@class,'day') and text()='" + day + "']";
						Wait.WaitForElement(driver, date);

						int size1 = driver.findElements(By.xpath(date)).size();
						for (int l = 1; l <= size; l++) {
							date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + l + "]";
							String classText = driver.findElement(By.xpath(date)).getAttribute("class");
							if (!classText.contains("old")) {
								driver.findElement(By.xpath(date)).click();
								test_steps.add("Selecting checkout date : " + checkout[(i - 1)]);
								reslogger.info("Selecting checkout date : " + checkout[(i - 1)]);
								break;
							}
						}
						break;
					} else {
						next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
						Wait.WaitForElement(driver, next);
						driver.findElement(By.xpath(next)).click();
						Wait.wait2Second();
					}
				}
				if (!IsSplitRes.equalsIgnoreCase("Yes")) {

					String adults = "(//label[text()='Adults']/preceding-sibling::input)[" + i + "]";
					Wait.WaitForElement(driver, adults);
					driver.findElement(By.xpath(adults)).clear();
					driver.findElement(By.xpath(adults)).sendKeys(adu[i - 1]);
					test_steps.add("Enter Number of Adults : " + adu[(i - 1)]);
					reslogger.info("Enter Number of Adults : " + adu[(i - 1)]);

					String children = "(//label[text()='Children']/preceding-sibling::input)[" + i + "]";
					Wait.WaitForElement(driver, children);
					driver.findElement(By.xpath(children)).clear();
					driver.findElement(By.xpath(children)).sendKeys(child[i - 1]);
					test_steps.add("Enter Number of Children : " + child[(i - 1)]);
					reslogger.info("Enter Number of Children : " + child[(i - 1)]);

					// res.CP_NewReservation_Rateplan.click();
					String ratebutton = "(//label[contains(text(),'Rate Plan / Promo')]//..//preceding-sibling::div/button)["
							+ i + "]";
					Wait.WaitForElement(driver, ratebutton);
					driver.findElement(By.xpath(ratebutton)).click();

					reslogger.info(
							"(//label[contains(text(),'Rate Plan / Promo')]//..//preceding-sibling::div//span[text()='"
									+ rate[1].trim() + "'])");

					int rateCount = driver.findElements(By.xpath(
							"(//label[contains(text(),'Rate Plan / Promo')]//..//preceding-sibling::div//span[text()='"
									+ rate[1].trim() + "'])"))
							.size();
					reslogger.info(rateCount);
					String rateLoc = null;
					if (rateCount == 1) {

						rateLoc = "(//label[contains(text(),'Rate Plan / Promo')]//..//preceding-sibling::div//span[text()='"
								+ rate[i - 1].trim() + "'])[" + i + "]";
					} else {

						rateLoc = "(//label[contains(text(),'Rate Plan / Promo')]//..//preceding-sibling::div//span[text()='"
								+ rate[i - 1].trim() + "'])[" + rateCount + "]";
					}
					reslogger.info(rateLoc);
					Wait.WaitForElement(driver, rateLoc);
					driver.findElement(By.xpath(rateLoc)).click();
					test_steps.add("Selecting the rateplan : " + rate[i - 1]);
					reslogger.info("Selecting the rateplan : " + rate[i - 1]);
					if (RatePlan.contains("Promo")) {
						String promo = "(//label[contains(text(),'Enter Code')]//..//preceding-sibling::input)[" + i
								+ "]";
						Wait.WaitForElement(driver, promo);
						res.CP_NewReservation_PromoCode.clear();
						res.CP_NewReservation_PromoCode.sendKeys(promoCode[i - 1]);
						test_steps.add("Enter promocode : " + promoCode[i]);
						reslogger.info("Enter promocode : " + promoCode[i]);
					}
				}
				if (!(i == size)) {
					clickOnAddARoomButton(driver, test_steps);
					reslogger.info("Clicking on add room");
					if (IsSplitRes.equalsIgnoreCase("Yes") && !flag) {
						res.CP_NewReservation_SplitReservation.click();
						test_steps.add("Clicking on split reservation");
						reslogger.info("Clicking on split reservation");
					}
					flag = true;
				}
			}
		} else {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CheckinCal);
			res.CP_NewReservation_CheckinCal.click();
			String monthYear = Utility.get_MonthYear(CheckInDate);
			String day = Utility.getDay(CheckInDate);
			reslogger.info(monthYear);
			String header = null, headerText = null, next = null, date;
			for (int i = 1; i <= 12; i++) {
				header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
				headerText = driver.findElement(By.xpath(header)).getText();
				if (headerText.equalsIgnoreCase(monthYear)) {
					date = "//td[contains(@class,'day') and text()='" + day + "']";
					Wait.WaitForElement(driver, date);
					driver.findElement(By.xpath(date)).click();
					test_steps.add("Selecting checkin date : " + CheckInDate);
					reslogger.info("Selecting checkin date : " + CheckInDate);
					break;
				} else {
					next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
					Wait.WaitForElement(driver, next);
					driver.findElement(By.xpath(next)).click();
					Wait.wait2Second();
				}
			}
		}
	}

	public int randomNumber;

	public ArrayList<String> select_MRBRooms(WebDriver driver, ArrayList<String> test_steps, String RoomClass,
			String IsAssign, String Account) throws InterruptedException {

		String[] roomclass = RoomClass.split("\\|");
		boolean flag = false;
		int size = roomclass.length;
		ArrayList al = new ArrayList();
		for (int i = 1; i <= size; i++) {
			String Applypolicy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
			if (driver.findElements(By.xpath(Applypolicy)).size() > 0) {
				Wait.WaitForElement(driver, Applypolicy);
				Wait.wait3Second();
				driver.findElement(By.xpath(Applypolicy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");
			}

			Wait.wait5Second();
			String rm = "//span[text()='Room " + i + " of " + size + "']";
			Wait.WaitForElement(driver, rm);
			Wait.waitForElementToBeVisibile(By.xpath(rm), driver);
			Wait.waitForElementToBeClickable(By.xpath(rm), driver);
			if (driver.findElement(By.xpath(rm)).isDisplayed()) {
				test_steps.add("Room " + i + " of " + size + " is displayed");
				reslogger.info("Room " + i + " of " + size + " is displayed");
			} else {
				String clickOnPopUpYesBut = "(//div[@class='row']//button[contains(text(),'Yes')])[3]";
				driver.findElement(By.xpath(clickOnPopUpYesBut)).click();

			}

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1].trim() + "')]/following-sibling::span";
			System.out.println("rulessize : " + rulessize);
			Wait.WaitForElement(driver, rulessize);
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();

			String room = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../div[2]/span)";
			reslogger.info(room);
			Wait.WaitForElement(driver, room);
			Wait.wait2Second();
			String rooms = driver.findElement(By.xpath(room)).getText();
			reslogger.info(rooms);
			String[] roomsCount = rooms.split(" ");
			int count = Integer.parseInt(roomsCount[0].trim());

			String cost = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/span)";

			Utility.ScrollToElement(driver.findElement(By.xpath(room)), driver);

			cost = driver.findElement(By.xpath(cost)).getText();
			cost = cost.trim();
			cost = cost.substring(1, cost.length());
			reslogger.info("cost : " + cost);
			al.add(cost);
			if (count > 0) {
				test_steps.add("Selecting room class : " + roomclass[i - 1]);
				reslogger.info("Selecting room class : " + roomclass[i - 1]);
				String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select";
				WebElement ele = driver.findElement(By.xpath(sel));
				if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
					Wait.WaitForElement(driver, unAssign);
					driver.findElement(By.xpath(unAssign)).click();
					test_steps.add("Selected room number : Unassigned");
					reslogger.info("Selected room number : Unassigned");

				} else {
					String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select/option";
					reslogger.info(roomnum);
					int count1 = driver.findElements(By.xpath(roomnum)).size();
					Random random = new Random();
					randomNumber = random.nextInt(count1 - 1) + 1;
					reslogger.info("count : " + count1);
					reslogger.info("randomNumber : " + randomNumber);
					Wait.WaitForElement(driver, sel);

					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.wait2Second();
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
							+ randomNumber + "]/a/span";
					Wait.WaitForElement(driver, roomNumber);
					driver.findElement(By.xpath(roomNumber)).click();
				}

				String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
				String getRate = getRateName(driver);
				reslogger.info("getRate : " + getRate);
				if (getRate.equalsIgnoreCase(roomclass[i - 1])) {
					select = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')])[2]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
				}
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();

				String loading = "(//div[@class='ir-loader-in'])[2]";
				int counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
				reslogger.info("Waited to loading symbol");

				reslogger.info("Rule Count : " + ruleCount);
				if (ruleCount > 1) {

					String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";
					counter = 0;
					Wait.wait2Second();
					if (driver.findElements(By.xpath(rules)).size() > 0) {
						driver.findElement(By.xpath(rules)).click();
						test_steps.add(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
						reslogger.info(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

						loading = "(//div[@class='ir-loader-in'])[2]";
						counter = 0;
						while (true) {
							if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
								break;
							} else if (counter == 3) {
								break;
							} else {
								counter++;
								Wait.wait3Second();
							}
						}
					}
				}

				System.out.println("*************** Account : " + Account);
				if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
					// if (i == 1) {
					String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
					if (driver.findElements(By.xpath(policy)).size() > 0) {
						Wait.WaitForElement(driver, policy);
						driver.findElement(By.xpath(policy)).click();
						test_steps.add("Based on the changes made, new policies are applicable.? : yes");
						reslogger.info("Based on the changes made, new policies are applicable.? : yes");
						Wait.wait10Second();
						loading = "(//div[@class='ir-loader-in'])[2]";
						counter = 0;
						while (true) {
							if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
								break;
							} else if (counter == 3) {
								break;
							} else {
								counter++;
								Wait.wait2Second();
							}
						}
					}
					// }
				}
				System.out.println("*************** End : ");
			} else {
				test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
				reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
			}
		}
		return al;
	}

	public String getRateName(WebDriver driver) {
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.getRateName);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.getRateName), driver);
		return Utility.getElementText(elements.getRateName);

	}

	public void enter_MRB_MailingAddress(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String PhoneNumber, String AltenativePhone, String Email,
			String Account, String AccountType, String Address1, String Address2, String Address3, String City,
			String Country, String State, String PostalCode, String IsGuesProfile, String IsAddMoreGuestInfo,
			String IsSplit, ArrayList al) throws InterruptedException {

		if (!IsSplit.equalsIgnoreCase("Yes")) {
			Add_PrimaryRoom(driver, test_steps, al);
			Add_AdditionalRoom(driver, test_steps, al);
			uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
			enter_GuestDetails(driver, test_steps, Salutation, GuestFirstName, GuestLastName, Email, PhoneNumber,
					AltenativePhone, IsSplit, IsAddMoreGuestInfo);
			enter_Address(driver, test_steps, Address1, Address2, Address3);
			enter_City(driver, test_steps, City);
			select_Country(driver, test_steps, Country);
			select_State(driver, test_steps, State);
			enter_PostalCode(driver, test_steps, PostalCode);
			enter_Account(driver, test_steps, Account, AccountType);
		}
		if (IsAddMoreGuestInfo.equalsIgnoreCase("Yes") && IsSplit.equalsIgnoreCase("Yes")) {
			enter_Split_GuestName(driver, test_steps, Salutation, GuestFirstName, GuestLastName, Email, PhoneNumber,
					AltenativePhone);
			enter_Address(driver, test_steps, Address1, Address2, Address3);
			enter_City(driver, test_steps, City);
			select_Country(driver, test_steps, Country);
			select_State(driver, test_steps, State);
			enter_PostalCode(driver, test_steps, PostalCode);
			uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
			enter_Account(driver, test_steps, Account, AccountType);
		} else if (IsSplit.equalsIgnoreCase("Yes")) {
			enter_GuestName(driver, test_steps, Salutation, GuestFirstName, GuestLastName);
			enter_Phone(driver, test_steps, PhoneNumber, AltenativePhone);
			enter_Email(driver, test_steps, Email);
			enter_Address(driver, test_steps, Address1, Address2, Address3);
			enter_City(driver, test_steps, City);
			select_Country(driver, test_steps, Country);
			select_State(driver, test_steps, State);
			enter_PostalCode(driver, test_steps, PostalCode);
			uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
			enter_Account(driver, test_steps, Account, AccountType);
		}
	}

	public void enter_MRB_MailingAddressForMRB(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String PhoneNumber, String AltenativePhone, String Email,
			String Account, String AccountType, String Address1, String Address2, String Address3, String City,
			String Country, String State, String PostalCode, String IsGuesProfile, String IsAddMoreGuestInfo,
			String IsSplit, ArrayList al) throws InterruptedException, ParseException {
		if (!IsSplit.equalsIgnoreCase("Yes")) {
			Add_PrimaryRoom(driver, test_steps, al);
			Add_AdditionalRoom(driver, test_steps, al);
			enter_GuestDetailsForMRB(driver, test_steps, Salutation, GuestFirstName, GuestLastName, Email, PhoneNumber,
					AltenativePhone, IsSplit, IsAddMoreGuestInfo);
			enter_Address(driver, test_steps, Address1, Address2, Address3);
			enter_City(driver, test_steps, City);
			select_Country(driver, test_steps, Country);
			select_State(driver, test_steps, State);
			enter_PostalCode(driver, test_steps, PostalCode);
			uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
			enter_Account(driver, test_steps, Account, AccountType);
		}
		if (IsAddMoreGuestInfo.equalsIgnoreCase("Yes") && IsSplit.equalsIgnoreCase("Yes")) {
			enter_Split_GuestName(driver, test_steps, Salutation, GuestFirstName, GuestLastName, Email, PhoneNumber,
					AltenativePhone);
			enter_Address(driver, test_steps, Address1, Address2, Address3);
			enter_City(driver, test_steps, City);
			select_Country(driver, test_steps, Country);
			select_State(driver, test_steps, State);
			enter_PostalCode(driver, test_steps, PostalCode);
			uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
			enter_Account(driver, test_steps, Account, AccountType);
		} else if (IsSplit.equalsIgnoreCase("Yes")) {
			enter_GuestName(driver, test_steps, Salutation, GuestFirstName, GuestLastName);
			enter_Phone(driver, test_steps, PhoneNumber, AltenativePhone);
			enter_Email(driver, test_steps, Email);
			enter_Address(driver, test_steps, Address1, Address2, Address3);
			enter_City(driver, test_steps, City);
			select_Country(driver, test_steps, Country);
			select_State(driver, test_steps, State);
			enter_PostalCode(driver, test_steps, PostalCode);
			uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
			enter_Account(driver, test_steps, Account, AccountType);
		}
	}

	public void enter_Split_GuestName(WebDriver driver, ArrayList test_steps, String Salutation, String GuestFirstName,
			String GuestLastName, String Email, String PhoneNumber, String AltenativePhone) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		String[] salu = Salutation.split("\\|");
		String[] guestFName = GuestFirstName.split("\\|");
		String[] guestLName = GuestLastName.split("\\|");
		String[] mail = Email.split("\\|");
		String[] phone = PhoneNumber.split("\\|");

		int size = salu.length;

		for (int i = 1; i <= size; i++) {
			if (i == 1) {
				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
				res.CP_NewReservation_GuestSalutation.click();
				String sal = "//span[contains(text(),'" + salu[i - 1] + "')]/../..";
				Wait.WaitForElement(driver, sal);
				driver.findElement(By.xpath(sal)).click();

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
				res.CP_NewReservation_GuestFirstName.sendKeys(guestFName[i - 1]);
				test_steps.add("Guest First Name : " + guestFName[i - 1]);
				reslogger.info("Guest First Name : " + guestFName[i - 1]);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);
				res.CP_NewReservation_GuestLastName.sendKeys(guestLName[i - 1]);
				test_steps.add("Guest Last Name : " + guestLName[i - 1]);
				reslogger.info("Guest Last Name : " + guestLName[i - 1]);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Phone);
				res.CP_NewReservation_Phone.clear();
				res.CP_NewReservation_Phone.sendKeys(phone[i - 1]);
				test_steps.add("Enter Phone Number : " + phone[i - 1]);
				reslogger.info("Enter Phone Number : " + phone[i - 1]);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AltenativePhone);
				res.CP_NewReservation_AltenativePhone.clear();
				res.CP_NewReservation_AltenativePhone.sendKeys(AltenativePhone);
				test_steps.add("Enter AltenativePhone Number : " + AltenativePhone);
				reslogger.info("Enter AltenativePhone Number : " + AltenativePhone);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Email);
				res.CP_NewReservation_Email.clear();
				res.CP_NewReservation_Email.sendKeys(mail[i - 1]);
				test_steps.add("Enter Email : " + mail[i - 1]);
				reslogger.info("Enter Email : " + mail[i - 1]);

			} else {
				int count = driver.findElements(By.xpath("//button[contains(@class,'salutationBtn')]")).size();
				String saluta = "(//button[contains(@class,'salutationBtn')])[" + count + "]";
				String slaut = "(//button[contains(@class,'salutationBtn')])[" + count
						+ "]/following-sibling::div//span[contains(text(),'" + salu[i - 1] + "')]";
				Wait.WaitForElement(driver, saluta);
				driver.findElement(By.xpath(saluta)).click();

				Wait.WaitForElement(driver, slaut);
				driver.findElement(By.xpath(slaut)).click();

				count = driver.findElements(By.xpath("//label[text()='Guest Name']/../input")).size();
				String fname = "(//label[text()='Guest Name']/../input)[" + count + "]";
				Wait.WaitForElement(driver, fname);
				driver.findElement(By.xpath(fname)).sendKeys(guestFName[i - 1]);
				test_steps.add("Guest First Name : " + guestFName[i - 1]);
				reslogger.info("Guest First Name : " + guestFName[i - 1]);

				count = driver.findElements(By.xpath("//label[text()='Last Name']/../input")).size();
				String lname = "(//label[text()='Last Name']/../input)[" + (count - 1) + "]";
				Wait.WaitForElement(driver, lname);
				driver.findElement(By.xpath(lname)).sendKeys(guestLName[i - 1]);
				test_steps.add("Guest Last Name : " + guestLName[i - 1]);
				reslogger.info("Guest Last Name : " + guestLName[i - 1]);

				count = driver.findElements(By.xpath("(//label[text()='Phone']/preceding-sibling::input)")).size();
				String ph = "(//label[text()='Phone']/preceding-sibling::input)[" + count + "]";
				driver.findElement(By.xpath(ph)).sendKeys(phone[i - 1]);
				test_steps.add("Enter Phone Number : " + phone[i - 1]);
				reslogger.info("Enter Phone Number : " + phone[i - 1]);

				count = driver.findElements(By.xpath("(//label[text()='E-mail']/preceding-sibling::input)")).size();
				String email = "(//label[text()='E-mail']/preceding-sibling::input)[" + count + "]";
				driver.findElement(By.xpath(email)).sendKeys(mail[i - 1]);
				test_steps.add("Enter Phone Number : " + mail[i - 1]);
				reslogger.info("Enter Phone Number : " + mail[i - 1]);
			}
			if (!(i == size)) {
				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddMoreGuestInfo);
				res.CP_NewReservation_AddMoreGuestInfo.click();
				test_steps.add("Clicking on Add More Guest Info");
				reslogger.info("Clicking on Add More Guest Info");
				String warn = "//div[contains(text(),'The number of guest names added surpasses the number of guests booked in the room.')]/..//button[text()='Yes']";
				Wait.WaitForElement(driver, warn);
				driver.findElement(By.xpath(warn)).click();
			}
		}
	}

	public String primary = null;;

	public void Add_PrimaryRoom(WebDriver driver, ArrayList test_steps, ArrayList al) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait3Second();
		String primaryArrow = "//span[text()='Primary Room']/../../following-sibling::div//button";
		Wait.WaitForElement(driver, primaryArrow);
		Wait.waitForElementToBeClickable(By.xpath(primaryArrow), driver);
		try {
			driver.findElement(By.xpath(primaryArrow)).click();
		} catch (Exception e) {
			Utility.clickThroughAction(driver, driver.findElement(By.xpath(primaryArrow)));
		}
		Wait.wait3Second();
		String primaryRoom = "//span[text()='Primary Room']/../../following-sibling::div//li[2]//span";
		primary = driver.findElement(By.xpath(primaryRoom)).getText();
		Wait.WaitForElement(driver, primaryRoom);
		driver.findElement(By.xpath(primaryRoom)).click();
		test_steps.add("Selected Primary Room as : " + primary);
		reslogger.info("Selected Primary Room as : " + primary);
		al.add(primary);
	}

	public String additionalRoomNo = null;

	public void Add_AdditionalRoom(WebDriver driver, ArrayList test_steps, ArrayList al) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		String additional = "(//span[text()='Additional Room'])";
		int count = driver.findElements(By.xpath(additional)).size();
		for (int i = 1; i <= count; i++) {
			String additionalArrow = "(//span[text()='Additional Room'])[" + i
					+ "]/../../following-sibling::div//button";
			Wait.WaitForElement(driver, additionalArrow);
			driver.findElement(By.xpath(additionalArrow)).click();
			/*
			 * String additionalRoom = "((//span[text()='Additional Room'])[" + i +
			 * "]/../../following-sibling::div//li[" + (i + 1) + "]//span)[1]";
			 */
			String additionalRoom = "((//span[text()='Additional Room'])[" + i + "]/../../following-sibling::div//li["
					+ (i + 2) + "]//span)[1]";
			additionalRoomNo = driver.findElement(By.xpath(additionalRoom)).getText();
			Wait.WaitForElement(driver, additionalRoom);
			driver.findElement(By.xpath(additionalRoom)).click();
			test_steps.add("Selected Addtinal  Room as : " + additionalRoomNo);
			reslogger.info("Selected Addtinal Room as : " + additionalRoomNo);
			al.add(additionalRoomNo);
		}
	}

	public void enter_GuestDetails(WebDriver driver, ArrayList test_steps, String Salutation, String GuestFirstName,
			String GuestLastName, String Email, String PhoneNumber, String AltenativePhone, String IsSplit,
			String IsAddMoreGuestInfo) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		String[] salu = Salutation.split("\\|");
		String[] guestFName = GuestFirstName.split("\\|");
		String[] guestLName = GuestLastName.split("\\|");
		String[] mail = Email.split("\\|");
		String[] phone = PhoneNumber.split("\\|");

		int size = salu.length;

		for (int i = 1; i <= size; i++) {
			if (i == 1) {
				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
				res.CP_NewReservation_GuestSalutation.click();
				String sal = "//span[contains(text(),'" + salu[i - 1] + "')]/../..";
				Wait.WaitForElement(driver, sal);
				driver.findElement(By.xpath(sal)).click();

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
				res.CP_NewReservation_GuestFirstName.clear();

				res.CP_NewReservation_GuestFirstName.sendKeys(guestFName[i - 1]);
				test_steps.add("Guest First Name : " + guestFName[i - 1]);
				reslogger.info("Guest First Name : " + guestFName[i - 1]);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);
				res.CP_NewReservation_GuestLastName.clear();

				res.CP_NewReservation_GuestLastName.sendKeys(guestLName[i - 1]);
				test_steps.add("Guest Last Name : " + guestLName[i - 1]);
				reslogger.info("Guest Last Name : " + guestLName[i - 1]);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Phone);
				res.CP_NewReservation_Phone.clear();
				res.CP_NewReservation_Phone.sendKeys(phone[i - 1]);
				test_steps.add("Enter Phone Number : " + phone[i - 1]);
				reslogger.info("Enter Phone Number : " + phone[i - 1]);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AltenativePhone);
				res.CP_NewReservation_AltenativePhone.clear();
				res.CP_NewReservation_AltenativePhone.sendKeys(AltenativePhone);
				test_steps.add("Enter AltenativePhone Number : " + AltenativePhone);
				reslogger.info("Enter AltenativePhone Number : " + AltenativePhone);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Email);
				res.CP_NewReservation_Email.clear();
				res.CP_NewReservation_Email.sendKeys(mail[i - 1]);
				test_steps.add("Enter Email : " + mail[i - 1]);
				reslogger.info("Enter Email : " + mail[i - 1]);

			} else {

				String additional = "(//span[text()='Additional Room'])";
				int count = driver.findElements(By.xpath(additional)).size();

				String saluta = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//span[text()='Select']/..";
				String slaut = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//span[text()='Select']/../following-sibling::div//li//span[text()='"
						+ salu[i - 1] + "']";
				Wait.WaitForElement(driver, saluta);
				driver.findElement(By.xpath(saluta)).click();
				reslogger.info(slaut);
				Wait.WaitForElement(driver, slaut);
				driver.findElement(By.xpath(slaut)).click();

				count = driver.findElements(By.xpath("//label[text()='Guest ']/../input")).size();
				String fname = "(//label[text()='Guest ']/../input)[" + i + "]";
				Wait.WaitForElement(driver, fname);
				driver.findElement(By.xpath(fname)).clear();
				driver.findElement(By.xpath(fname)).sendKeys(guestFName[i - 1]);
				test_steps.add("Guest First Name : " + guestFName[i - 1]);
				reslogger.info("Guest First Name : " + guestFName[i - 1]);

				count = driver.findElements(By.xpath(
						"(//span[text()='Additional Room'])/../../../../../..//label[text()='Last Name']/../input"))
						.size();
				String lname = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//label[text()='Last Name']/../input";
				Wait.WaitForElement(driver, lname);
				driver.findElement(By.xpath(lname)).clear();
				driver.findElement(By.xpath(lname)).sendKeys(guestLName[i - 1]);
				test_steps.add("Guest Last Name : " + guestLName[i - 1]);
				reslogger.info("Guest Last Name : " + guestLName[i - 1]);

				count = driver.findElements(By.xpath("(//label[text()='Phone']/preceding-sibling::input)")).size();
				String ph = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//label[text()='Phone']/preceding-sibling::input";
				driver.findElement(By.xpath(ph)).clear();
				driver.findElement(By.xpath(ph)).sendKeys(phone[i - 1]);
				test_steps.add("Enter Phone Number : " + phone[i - 1]);
				reslogger.info("Enter Phone Number : " + phone[i - 1]);

				/*
				 * count = driver.findElements(By.xpath(
				 * "(//label[text()='E-mail']/preceding-sibling::input)")).size( ); String email
				 * = "(//span[text()='Additional Room'])[" + (i - 1) +
				 * "]/../../../../../..//label[text()='E-mail']/preceding-sibling::input";
				 * driver.findElement(By.xpath(email)).clear();
				 * 
				 * driver.findElement(By.xpath(email)).sendKeys(mail[i - 1]);
				 * test_steps.add("Enter Altenative Email : " + mail[i - 1]);
				 * reslogger.info("Enter Altenative Email : " + mail[i - 1]);
				 */

			}
			if (!(i == size) && IsAddMoreGuestInfo.equalsIgnoreCase("Yes") && IsSplit.equalsIgnoreCase("Yes")) {
				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddMoreGuestInfo);
				res.CP_NewReservation_AddMoreGuestInfo.click();
				test_steps.add("Clicking on Add More Guest Info");
				reslogger.info("Clicking on Add More Guest Info");
			}
		}
	}

	public void verify_MRB_Folio(WebDriver driver, ArrayList test_steps, ArrayList RoomAbbri, String IsAssign,
			ArrayList Rooms) throws InterruptedException {
		test_steps.add("******************* MRB Folio Creation verification **********************");
		reslogger.info("******************* MRB Folio Creation verification **********************");
		String abb = null;
		String roomnumber = null;
		System.out.println("RoomAbbri :" + RoomAbbri);
		reslogger.info(RoomAbbri.size());
		for (int i = 0; i < RoomAbbri.size(); i++) {
			abb = RoomAbbri.get(i).toString();
			roomnumber = Rooms.get(i).toString();
			String[] abbrivation = abb.split(":");
			String[] rooomno = roomnumber.split(":");
			String folio = null;

			String folioSize = "//button[contains(@title,'Guest')]";
			Wait.WaitForElement(driver, folioSize);
			driver.findElement(By.xpath(folioSize)).click();
			Wait.wait2Second();

			if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps
							.add("Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
					reslogger
							.info("Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
					// folio="Guest Folio For "+abbrivation[1]+" :
					// "+abbrivation[0];
					// new
					// Select(driver.findElement(By.xpath(folioSize))).selectByVisibleText(folio);
					driver.findElement(By.xpath(folio)).click();
					String roomCahrge = "//span[text()='Room Charge']";
					get_RoomCharge(driver, test_steps);
					if (driver.findElements(By.xpath(roomCahrge)).size() > 0) {
						test_steps.add("Room Charge Line Item  is present : " + "Guest Folio For " + abbrivation[1]
								+ " : " + abbrivation[0] + " with amount : " + get_RoomCharge(driver, test_steps));
						reslogger.info("Room Charge Line Item  is present : " + "Guest Folio For " + abbrivation[1]
								+ " : " + abbrivation[0] + " with amount : " + get_RoomCharge(driver, test_steps));
					} else {
						test_steps.add("Room Charge Line Item  is not present : " + "Guest Folio For " + abbrivation[1]
								+ " : " + abbrivation[0] + " with amount : " + get_RoomCharge(driver, test_steps));
						reslogger.info("Room Charge Line Item  is not present : " + "Guest Folio For " + abbrivation[1]
								+ " : " + abbrivation[0] + " with amount : " + get_RoomCharge(driver, test_steps));
					}
				} else {
					test_steps.add(
							"Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
					reslogger.info(
							"Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
				}
			} else {
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[1] + " : " + rooomno[1].trim()
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps.add(
							"Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + rooomno[1].trim());
					reslogger.info(
							"Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + rooomno[1].trim());
					// folio="Guest Folio For "+abbrivation[1]+" :
					// "+rooomno[1].trim();
					// new
					// Select(driver.findElement(By.xpath(folioSize))).selectByVisibleText(folio);
//					driver.findElement(By.xpath(folio)).click();
					Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(folio)));
					String roomCahrge = "//span[text()='Room Charge']";
					if (driver.findElements(By.xpath(roomCahrge)).size() > 0) {
						test_steps.add("Room Charge Line Item  is present : " + "Guest Folio For " + abbrivation[1]
								+ " : " + rooomno[1].trim() + " with amount : " + get_RoomCharge(driver, test_steps));
						reslogger.info("Room Charge Line Item  is present : " + "Guest Folio For " + abbrivation[1]
								+ " : " + rooomno[1].trim() + " with amount : " + get_RoomCharge(driver, test_steps));
					} else {
						test_steps.add("Room Charge Line Item  is not present : " + "Guest Folio For " + abbrivation[1]
								+ " : " + rooomno[1].trim() + " with amount : " + get_RoomCharge(driver, test_steps));
						reslogger.info("Room Charge Line Item  is not present : " + "Guest Folio For " + abbrivation[1]
								+ " : " + rooomno[1].trim() + " with amount : " + get_RoomCharge(driver, test_steps));
					}
				} else {
					test_steps.add("Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : "
							+ rooomno[1].trim());
					reslogger.info("Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : "
							+ rooomno[1].trim());
				}
			}
		}
	}

	public void verify_MRB_BannerDetails(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String PhoneNumber, String Email, String TripTotal,
			String Balance, String ConfirmationNumber, String Status, String CheckInDate, String CheckOutDate,
			String Country) {
		test_steps.add("******************* Banner fields verification **********************");
		reslogger.info("******************* Banner fields verification **********************");

		String[] salutation = Salutation.split("\\|");
		String[] guestFName = GuestFirstName.split("\\|");
		String[] guestLName = GuestLastName.split("\\|");
		String[] ph = PhoneNumber.split("\\|");
		String[] email = Email.split("\\|");
		String[] checkInDate = CheckInDate.split("\\|");
		String[] checkOutDate = CheckOutDate.split("\\|");

		String name = salutation[0].trim() + " " + guestFName[0].trim() + " " + guestLName[0].trim();
		String bannername = "//td/div/span[contains(text(),'" + name + "')]";
		reslogger.info(bannername);
		if (driver.findElement(By.xpath(bannername)).isDisplayed()) {
			test_steps.add("Reservation banner name field verified : " + name);
			reslogger.info("Reservation banner name field verified : " + name);
		} else {
			test_steps.add("Reservation banner name field not found : " + name);
			reslogger.info("Reservation banner name field not found : " + name);
		}

		ph[0] = ph[0].replace("" + ph[0].trim().charAt(0), "(" + ph[0].trim().charAt(0));
		ph[0] = ph[0].replace("" + ph[0].trim().charAt(4), ")" + ph[0].trim().charAt(4));
		ph[0] = ph[0].replace("" + ph[0].trim().charAt(5), " " + ph[0].trim().charAt(5));
		ph[0] = ph[0].replace("" + ph[0].trim().charAt(9), "-" + ph[0].trim().charAt(9));

		String code = null;
		if (Country.equalsIgnoreCase("United States")) {
			code = "1";
		} else if (Country.equalsIgnoreCase("United Kingdom")) {
			code = "41";
		}
		code = code + "-";
		ph[0] = code + ph[0];
		reslogger.info(ph[0]);

		String phone = "//td//span[text()='" + ph[0] + "']";
		if (driver.findElement(By.xpath(phone)).isDisplayed()) {
			test_steps.add("Reservation banner PhoneNumber field verified : " + ph[0]);
			reslogger.info("Reservation banner PhoneNumber field verified : " + ph[0]);
		} else {
			test_steps.add("Reservation banner PhoneNumber field not found : " + PhoneNumber);
			reslogger.info("Reservation banner PhoneNumber field not found : " + PhoneNumber);
		}

		String trip = "//td[text()='TRIP TOTAL']/following-sibling::td[contains(text(),'" + TripTotal.trim() + "')]";
		if (driver.findElement(By.xpath(trip)).isDisplayed()) {
			test_steps.add("Reservation banner TripTotal field verified : " + TripTotal);
			reslogger.info("Reservation banner TripTotal field verified : " + TripTotal);
		} else {
			test_steps.add("Reservation banner TripTotal field not found : " + TripTotal);
			reslogger.info("Reservation banner TripTotal field not found : " + TripTotal);
		}

		String bal = "//td[text()='BALANCE']/following-sibling::td/div[contains(text(),'" + Balance.trim() + "')]";
		if (driver.findElement(By.xpath(trip)).isDisplayed()) {
			test_steps.add("Reservation banner Balance field verified : " + Balance);
			reslogger.info("Reservation banner Balance field verified : " + Balance);
		} else {
			test_steps.add("Reservation banner Balance field not found : " + Balance);
			reslogger.info("Reservation banner Balance field not found : " + Balance);
		}

		/*
		 * String mail = "//td//a[text()='" + email[0] + "']"; if
		 * (driver.findElement(By.xpath(mail)).isDisplayed()) {
		 * test_steps.add("Reservation banner mail field verified : " + email[0]);
		 * reslogger.info("Reservation banner mail field verified : " + email[0]); }
		 * else { test_steps.add("Reservation banner mail field not found : " +
		 * email[0]); reslogger.info("Reservation banner mail field not found : " +
		 * email[0]); }
		 */

		String sta = "//td//span[text()='" + Status.trim() + "']";
		if (driver.findElement(By.xpath(sta)).isDisplayed()) {
			test_steps.add("Reservation banner Status field verified : " + Status);
			reslogger.info("Reservation banner Status field verified : " + Status);
		} else {
			test_steps.add("Reservation banner Status field not found : " + Status);
			reslogger.info("Reservation banner Status field not found : " + Status);
		}

		String confirmation = "//td//span[text()='" + ConfirmationNumber.trim() + "']";
		if (driver.findElement(By.xpath(confirmation)).isDisplayed()) {
			test_steps.add("Reservation banner ConfirmationNumber field verified : " + ConfirmationNumber);
			reslogger.info("Reservation banner ConfirmationNumber field verified : " + ConfirmationNumber);
		} else {
			test_steps.add("Reservation banner ConfirmationNumber field not found : " + ConfirmationNumber);
			reslogger.info("Reservation banner ConfirmationNumber field not found : " + ConfirmationNumber);
		}

		String[] checkIn = checkInDate[0].split("/");

		if (checkIn[0].charAt(0) == '0') {
			checkIn[0] = checkIn[0].replace("" + checkIn[0].charAt(0), "");
		}

		String checkInMonthDay = Utility.get_Month(checkInDate[0]);
		checkInMonthDay = checkInMonthDay + " " + checkIn[0];
		checkInMonthDay = "(" + checkInMonthDay;

		String[] checkOut = checkOutDate[(checkOutDate.length - 1)].split("/");

		if (checkOut[0].charAt(0) == '0') {
			checkOut[0] = checkOut[0].replace("" + checkOut[0].charAt(0), "");
		}

		String checkOutMonthDay = Utility.get_Month(checkOutDate[checkOutDate.length - 1]);
		checkOutMonthDay = checkOutMonthDay + " " + checkOut[0];
		checkOutMonthDay = checkOutMonthDay + ")";
		String day = checkInMonthDay + " - " + checkOutMonthDay;

		reslogger.info(day);
		String days = "//td//span[contains(text(),'" + day.trim() + "')]";
		if (driver.findElement(By.xpath(days)).isDisplayed()) {
			test_steps.add("Reservation banner Stay from and Stay to are verified : " + day);
			reslogger.info("Reservation banner Stay from and Stay to are verified : " + day);
		} else {
			test_steps.add("Reservation banner Stay from and Stay to are not found : " + day);
			reslogger.info("Reservation banner Stay from and Stay to are not found : " + day);
		}
	}

	public void click_Pay(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_Pay);
		Wait.wait5Second();
		res.CP_Reservation_Folio_Pay.click();
		test_steps.add("Clicking on Pay");
		reslogger.info("Clicking on Pay");
		String loading = "(//div[@class='ir-loader-in'])";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
		reslogger.info("loading done");
	}

	public void verify_PaymentLineItem(WebDriver driver, ArrayList test_steps, String PaymentType, String CardNumber,
			String NameOnCard, String CardExpDate, String amount, String AddPaymentNotes) throws InterruptedException {
		test_steps.add("******************* Verify payment line item **********************");
		reslogger.info("******************* Verify payment line item **********************");

		if (PaymentType.equalsIgnoreCase("MC") || PaymentType.equalsIgnoreCase("Visa")
				|| PaymentType.equalsIgnoreCase("Amex") || PaymentType.equalsIgnoreCase("Discover")) {
			String lastFourDightsOfCard = CardNumber.substring(CardNumber.length() - 4, CardNumber.length());

			String description = "//a[contains(text(),'Name: " + NameOnCard.trim()
					+ "')]/../following-sibling::td[3]/span[contains(text(),'" + amount.trim() + "')]";
			reslogger.info(description);
			if (driver.findElement(By.xpath(description)).isDisplayed()) {
				test_steps.add("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
				reslogger.info("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
			} else {
				test_steps.add(
						"Payment line item with " + amount + " is not displayed for payment type : " + PaymentType);
				reslogger.info(
						"Payment line item with " + amount + " is not displayed for payment type : " + PaymentType);
			}

			String line = "//a[contains(text(),'Name: " + NameOnCard.trim()
					+ "')]/../following-sibling::td[3]/span[contains(text(),'" + amount.trim()
					+ "')]/../preceding-sibling::td[3]/a";
			Wait.WaitForElement(driver, line);
			driver.findElement(By.xpath(line)).click();
			test_steps.add("Opening Payment line item");
			reslogger.info("Opening Payment line item");

			String payemntType = "//label[text()='Payment Method:']/following-sibling::div/select";

			WebElement pay = new Select(driver.findElement(By.xpath(payemntType))).getFirstSelectedOption();
			reslogger.info(pay.getText());
			if (pay.getText().trim().equalsIgnoreCase(PaymentType)) {
				test_steps.add("Payment Method verified in line item : " + pay.getText());
				reslogger.info("Payment Method verified in line item : " + pay.getText());
			} else {
				test_steps.add("Payment Method not verified in line item : " + pay.getText());
				reslogger.info("Payment Method not verified in line item : " + pay.getText());
			}

			String amt = "//label[text()='Amount:']/following-sibling::div//input";

			JavascriptExecutor js = (JavascriptExecutor) driver;
			String amtValue = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(amt)));
			reslogger.info(amtValue);
			if (amtValue.equalsIgnoreCase(amount)) {
				test_steps.add("Payment amount verified in line item : " + amount);
				reslogger.info("Payment amount verified in line item : " + amount);
			} else {
				test_steps.add("Payment amount not verified in line item : " + amount);
				reslogger.info("Payment amount not verified in line item : " + amount);
			}

			String payInfo = "//label[text()='Payment Info:']/following-sibling::div//textarea";
			String info = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(payInfo)));
			reslogger.info(info);
			if (info.contains(lastFourDightsOfCard) && info.contains(CardExpDate)) {
				test_steps.add("Payment info verified in line item : " + info);
				reslogger.info("Payment info verified in line item : " + info);
			} else {
				test_steps.add("Payment info not verified in line item : " + info);
				reslogger.info("Payment info not verified in line item : " + info);
			}

			String notes = "//label[text()='Notes:']/following-sibling::div//textarea";

			String note = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(notes)));
			reslogger.info(note);
			if (note.equalsIgnoreCase(AddPaymentNotes)) {
				test_steps.add("Payment notes verified in line item : " + note);
				reslogger.info("Payment notes verified in line item : " + note);
			} else {
				test_steps.add("Payment notes not verified in line item : " + note);
				reslogger.info("Payment notes not verified in line item : " + note);
			}

			String close = "//span[text()='Payment Details']/../../.././../../../..//button[text()='Cancel']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Closeing Payment line item");
			reslogger.info("Closeing Payment line item");
			Wait.wait5Second();

		} else if (PaymentType.equalsIgnoreCase("Cash")) {
			String description = "//a[contains(text(),'" + PaymentType.trim()
					+ "')]/../following-sibling::td[3]/span[contains(text(),'" + amount.trim() + "')]";
			reslogger.info(description);
			if (driver.findElement(By.xpath(description)).isDisplayed()) {
				test_steps.add("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
				reslogger.info("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
			} else {
				test_steps.add(
						"Payment line item with " + amount + " is nor displayed for payment type : " + PaymentType);
				reslogger.info(
						"Payment line item with " + amount + " is nor displayed for payment type : " + PaymentType);
			}

			String line = "//a[contains(text(),'" + PaymentType.trim()
					+ "')]/../following-sibling::td[3]/span[contains(text(),'" + amount.trim()
					+ "')]/../preceding-sibling::td[3]/a";
			Wait.WaitForElement(driver, line);
			driver.findElement(By.xpath(line)).click();
			test_steps.add("Opening Payment line item");
			reslogger.info("Opening Payment line item");

			String payemntType = "//label[text()='Payment Method:']/following-sibling::div/select";

			WebElement pay = new Select(driver.findElement(By.xpath(payemntType))).getFirstSelectedOption();
			reslogger.info(pay.getText());
			if (pay.getText().trim().equalsIgnoreCase("Cash")) {
				test_steps.add("Payment Method verified in line item : " + pay.getText());
				reslogger.info("Payment Method verified in line item : " + pay.getText());
			} else {
				test_steps.add("Payment Method not verified in line item : " + pay.getText());
				reslogger.info("Payment Method not verified in line item : " + pay.getText());
			}

			String amt = "//label[text()='Amount:']/following-sibling::div//input";

			JavascriptExecutor js = (JavascriptExecutor) driver;
			String amtValue = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(amt)));
			reslogger.info(amtValue);
			if (amtValue.equalsIgnoreCase(amount)) {
				test_steps.add("Payment amount verified in line item : " + amount);
				reslogger.info("Payment amount verified in line item : " + amount);
			} else {
				test_steps.add("Payment amount not verified in line item : " + amount);
				reslogger.info("Payment amount not verified in line item : " + amount);
			}

			String payInfo = "//label[text()='Payment Info:']/following-sibling::div//textarea";
			String info = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(payInfo)));
			reslogger.info(info);
			if (info.contains("Cash")) {
				test_steps.add("Payment info verified in line item : " + info);
				reslogger.info("Payment info verified in line item : " + info);
			} else {
				test_steps.add("Payment info not verified in line item : " + info);
				reslogger.info("Payment info not verified in line item : " + info);
			}

			String notes = "//label[text()='Notes:']/following-sibling::div//textarea";

			String note = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(notes)));
			reslogger.info(note);
			if (note.equalsIgnoreCase(AddPaymentNotes)) {
				test_steps.add("Payment notes verified in line item : " + note);
				reslogger.info("Payment notes verified in line item : " + note);
			} else {
				test_steps.add("Payment notes not verified in line item : " + note);
				reslogger.info("Payment notes not verified in line item : " + note);
			}

			String close = "//span[text()='Payment Details']/../../.././../../../..//button[text()='Close']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Closeing Payment line item");
			reslogger.info("Closeing Payment line item");
		} else if (PaymentType.equalsIgnoreCase("Swipe")) {
			String description = "//a[contains(text(),'Name: ')]/../following-sibling::td[3]/span[contains(text(),'"
					+ amount.trim() + "')]";
			if (driver.findElement(By.xpath(description)).isDisplayed()) {
				test_steps.add("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
				reslogger.info("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
			} else {
				test_steps.add(
						"Payment line item with " + amount + " is nor displayed for payment type : " + PaymentType);
				reslogger.info(
						"Payment line item with " + amount + " is nor displayed for payment type : " + PaymentType);
			}

			String line = "//a[contains(text(),'Name: ')]/../following-sibling::td[3]/span[contains(text(),'"
					+ amount.trim() + "')]/../preceding-sibling::td[3]/a";
			Wait.WaitForElement(driver, line);
			driver.findElement(By.xpath(line)).click();
			test_steps.add("Opening Payment line item");
			reslogger.info("Opening Payment line item");

			String payemntType = "//label[text()='Payment Method:']/following-sibling::div/select";

			WebElement pay = new Select(driver.findElement(By.xpath(payemntType))).getFirstSelectedOption();
			reslogger.info(pay.getText());
			if (pay.getText().trim().equalsIgnoreCase("MC")) {
				test_steps.add("Payment Method verified in line item : " + pay.getText());
				reslogger.info("Payment Method verified in line item : " + pay.getText());
			} else {
				test_steps.add("Payment Method not verified in line item : " + pay.getText());
				reslogger.info("Payment Method not verified in line item : " + pay.getText());
			}

			String amt = "//label[text()='Amount:']/following-sibling::div//input";

			JavascriptExecutor js = (JavascriptExecutor) driver;
			String amtValue = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(amt)));
			reslogger.info(amtValue);
			if (amtValue.equalsIgnoreCase(amount)) {
				test_steps.add("Payment amount verified in line item : " + amount);
				reslogger.info("Payment amount verified in line item : " + amount);
			} else {
				test_steps.add("Payment amount not verified in line item : " + amount);
				reslogger.info("Payment amount not verified in line item : " + amount);
			}

			String payInfo = "//label[text()='Payment Info:']/following-sibling::div//textarea";
			String info = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(payInfo)));
			reslogger.info(info);
			if (info.contains("5454")) {
				test_steps.add("Payment info verified in line item : " + info);
				reslogger.info("Payment info verified in line item : " + info);
			} else {
				test_steps.add("Payment info not verified in line item : " + info);
				reslogger.info("Payment info not verified in line item : " + info);
			}

			String notes = "//label[text()='Notes:']/following-sibling::div//textarea";

			String note = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(notes)));
			reslogger.info(note);
			if (note.equalsIgnoreCase(AddPaymentNotes)) {
				test_steps.add("Payment notes verified in line item : " + note);
				reslogger.info("Payment notes verified in line item : " + note);
			} else {
				test_steps.add("Payment notes not verified in line item : " + note);
				reslogger.info("Payment notes not verified in line item : " + note);
			}

			String close = "//span[text()='Payment Details']/../../.././../../../..//button[text()='Cancel']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Closeing Payment line item");
			reslogger.info("Closeing Payment line item");
		}
		Wait.wait2Second();
	}

	public void verify_DepositPaymentLineItem(WebDriver driver, ArrayList test_steps, String PaymentType,
			String CardNumber, String NameOnCard, String CardExpDate, String amount, String AddPaymentNotes)
			throws InterruptedException {
		test_steps.add("******************* Verify payment line item **********************");
		reslogger.info("******************* Verify payment line item **********************");

		if (PaymentType.equalsIgnoreCase("MC") || PaymentType.equalsIgnoreCase("Visa")
				|| PaymentType.equalsIgnoreCase("Amex") || PaymentType.equalsIgnoreCase("Discover")) {
			String lastFourDightsOfCard = CardNumber.substring(CardNumber.length() - 4, CardNumber.length());

			String description = "//a[contains(text(),'Name: " + NameOnCard.trim()
					+ "')]/../following-sibling::td[3]/span[contains(text(),'" + amount.trim() + "')]";
			reslogger.info(description);
			if (driver.findElement(By.xpath(description)).isDisplayed()) {
				test_steps.add("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
				reslogger.info("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
			} else {
				test_steps.add(
						"Payment line item with " + amount + " is not displayed for payment type : " + PaymentType);
				reslogger.info(
						"Payment line item with " + amount + " is not displayed for payment type : " + PaymentType);
			}

			String line = "//a[contains(text(),'Name: " + NameOnCard.trim()
					+ "')]/../following-sibling::td[3]/span[contains(text(),'" + amount.trim()
					+ "')]/../preceding-sibling::td[3]/a";
			Wait.WaitForElement(driver, line);
			driver.findElement(By.xpath(line)).click();
			test_steps.add("Opening Payment line item");
			reslogger.info("Opening Payment line item");

			String payemntType = "//label[text()='Payment Method:']/following-sibling::div/select";

			WebElement pay = new Select(driver.findElement(By.xpath(payemntType))).getFirstSelectedOption();
			reslogger.info(pay.getText());
			if (pay.getText().trim().equalsIgnoreCase(PaymentType)) {
				test_steps.add("Payment Method verified in line item : " + pay.getText());
				reslogger.info("Payment Method verified in line item : " + pay.getText());
			} else {
				test_steps.add("Payment Method not verified in line item : " + pay.getText());
				reslogger.info("Payment Method not verified in line item : " + pay.getText());
			}

			String amt = "//label[text()='Amount:']/following-sibling::div//input";

			JavascriptExecutor js = (JavascriptExecutor) driver;
			String amtValue = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(amt)));
			reslogger.info(amtValue);
			if (amtValue.equalsIgnoreCase(amount)) {
				test_steps.add("Payment amount verified in line item : " + amount);
				reslogger.info("Payment amount verified in line item : " + amount);
			} else {
				test_steps.add("Payment amount not verified in line item : " + amount);
				reslogger.info("Payment amount not verified in line item : " + amount);
			}

			String payInfo = "//label[text()='Payment Info:']/following-sibling::div//textarea";
			String info = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(payInfo)));
			reslogger.info(info);
			if (info.contains(lastFourDightsOfCard) && info.contains(CardExpDate)) {
				test_steps.add("Payment info verified in line item : " + info);
				reslogger.info("Payment info verified in line item : " + info);
			} else {
				test_steps.add("Payment info not verified in line item : " + info);
				reslogger.info("Payment info not verified in line item : " + info);
			}

			String notes = "//label[text()='Notes:']/following-sibling::div//textarea";

			String note = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(notes)));
			reslogger.info(note);
			if (note.equalsIgnoreCase(AddPaymentNotes)) {
				test_steps.add("Payment notes verified in line item : " + note);
				reslogger.info("Payment notes verified in line item : " + note);
			} else {
				test_steps.add("Payment notes not verified in line item : " + note);
				reslogger.info("Payment notes not verified in line item : " + note);
			}

			String close = "//span[text()='Payment Details']/../../.././../../../..//button[text()='Cancel']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Closeing Payment line item");
			reslogger.info("Closeing Payment line item");
			Wait.wait5Second();

		} else if (PaymentType.equalsIgnoreCase("Cash")) {
			String description = "//a[contains(text(),'" + PaymentType.trim()
					+ "')]/../following-sibling::td[3]/span[contains(text(),'" + amount.trim() + "')]";
			reslogger.info(description);
			if (driver.findElement(By.xpath(description)).isDisplayed()) {
				test_steps.add("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
				reslogger.info("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
			} else {
				test_steps.add(
						"Payment line item with " + amount + " is nor displayed for payment type : " + PaymentType);
				reslogger.info(
						"Payment line item with " + amount + " is nor displayed for payment type : " + PaymentType);
			}

			String line = "//a[contains(text(),'" + PaymentType.trim()
					+ "')]/../following-sibling::td[3]/span[contains(text(),'" + amount.trim()
					+ "')]/../preceding-sibling::td[3]/a";
			Wait.WaitForElement(driver, line);
			driver.findElement(By.xpath(line)).click();
			test_steps.add("Opening Payment line item");
			reslogger.info("Opening Payment line item");

			String payemntType = "//label[text()='Payment Method:']/following-sibling::div/select";

			WebElement pay = new Select(driver.findElement(By.xpath(payemntType))).getFirstSelectedOption();
			reslogger.info(pay.getText());
			if (pay.getText().trim().equalsIgnoreCase("Cash")) {
				test_steps.add("Payment Method verified in line item : " + pay.getText());
				reslogger.info("Payment Method verified in line item : " + pay.getText());
			} else {
				test_steps.add("Payment Method not verified in line item : " + pay.getText());
				reslogger.info("Payment Method not verified in line item : " + pay.getText());
			}

			String amt = "//label[text()='Amount:']/following-sibling::div//input";

			JavascriptExecutor js = (JavascriptExecutor) driver;
			String amtValue = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(amt)));
			reslogger.info(amtValue);
			if (amtValue.equalsIgnoreCase(amount)) {
				test_steps.add("Payment amount verified in line item : " + amount);
				reslogger.info("Payment amount verified in line item : " + amount);
			} else {
				test_steps.add("Payment amount not verified in line item : " + amount);
				reslogger.info("Payment amount not verified in line item : " + amount);
			}

			String payInfo = "//label[text()='Payment Info:']/following-sibling::div//textarea";
			String info = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(payInfo)));
			reslogger.info(info);
			if (info.contains("Cash")) {
				test_steps.add("Payment info verified in line item : " + info);
				reslogger.info("Payment info verified in line item : " + info);
			} else {
				test_steps.add("Payment info not verified in line item : " + info);
				reslogger.info("Payment info not verified in line item : " + info);
			}

			String notes = "//label[text()='Notes:']/following-sibling::div//textarea";

			String note = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(notes)));
			reslogger.info(note);
			if (note.equalsIgnoreCase(AddPaymentNotes)) {
				test_steps.add("Payment notes verified in line item : " + note);
				reslogger.info("Payment notes verified in line item : " + note);
			} else {
				test_steps.add("Payment notes not verified in line item : " + note);
				reslogger.info("Payment notes not verified in line item : " + note);
			}

			String close = "//span[text()='Payment Details']/../../.././../../../..//button[text()='Close']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Closeing Payment line item");
			reslogger.info("Closeing Payment line item");
		} else if (PaymentType.equalsIgnoreCase("Swipe")) {
			String description = "//a[contains(text(),'Name: ')]/../following-sibling::td[3]/span[contains(text(),'"
					+ amount.trim() + "')]";
			if (driver.findElement(By.xpath(description)).isDisplayed()) {
				test_steps.add("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
				reslogger.info("Payment line item with " + amount + " is displayed for payment type : " + PaymentType);
			} else {
				test_steps.add(
						"Payment line item with " + amount + " is nor displayed for payment type : " + PaymentType);
				reslogger.info(
						"Payment line item with " + amount + " is nor displayed for payment type : " + PaymentType);
			}

			String line = "//a[contains(text(),'Name: ')]/../following-sibling::td[3]/span[contains(text(),'"
					+ amount.trim() + "')]/../preceding-sibling::td[3]/a";
			Wait.WaitForElement(driver, line);
			driver.findElement(By.xpath(line)).click();
			test_steps.add("Opening Payment line item");
			reslogger.info("Opening Payment line item");

			String payemntType = "//label[text()='Payment Method:']/following-sibling::div/select";

			WebElement pay = new Select(driver.findElement(By.xpath(payemntType))).getFirstSelectedOption();
			reslogger.info(pay.getText());
			if (pay.getText().trim().equalsIgnoreCase("MC")) {
				test_steps.add("Payment Method verified in line item : " + pay.getText());
				reslogger.info("Payment Method verified in line item : " + pay.getText());
			} else {
				test_steps.add("Payment Method not verified in line item : " + pay.getText());
				reslogger.info("Payment Method not verified in line item : " + pay.getText());
			}

			String amt = "//label[text()='Amount:']/following-sibling::div//input";

			JavascriptExecutor js = (JavascriptExecutor) driver;
			String amtValue = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(amt)));
			reslogger.info(amtValue);
			if (amtValue.equalsIgnoreCase(amount)) {
				test_steps.add("Payment amount verified in line item : " + amount);
				reslogger.info("Payment amount verified in line item : " + amount);
			} else {
				test_steps.add("Payment amount not verified in line item : " + amount);
				reslogger.info("Payment amount not verified in line item : " + amount);
			}

			String payInfo = "//label[text()='Payment Info:']/following-sibling::div//textarea";
			String info = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(payInfo)));
			reslogger.info(info);
			if (info.contains("5454")) {
				test_steps.add("Payment info verified in line item : " + info);
				reslogger.info("Payment info verified in line item : " + info);
			} else {
				test_steps.add("Payment info not verified in line item : " + info);
				reslogger.info("Payment info not verified in line item : " + info);
			}

			String notes = "//label[text()='Notes:']/following-sibling::div//textarea";

			String note = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(notes)));
			reslogger.info(note);
			if (note.equalsIgnoreCase(AddPaymentNotes)) {
				test_steps.add("Payment notes verified in line item : " + note);
				reslogger.info("Payment notes verified in line item : " + note);
			} else {
				test_steps.add("Payment notes not verified in line item : " + note);
				reslogger.info("Payment notes not verified in line item : " + note);
			}

			String close = "//span[text()='Payment Details']/../../.././../../../..//button[text()='Close']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Closeing Payment line item");
			reslogger.info("Closeing Payment line item");
		}
		Wait.wait2Second();
	}

	public void validate_FolioAmountAfterPayment(WebDriver driver, ArrayList test_steps, String paidFolio,
			String balanceFolio, String paidFolioAfterPay, String balanceFolioAfterPay, String amount,
			String TakePaymentType) {
		test_steps.add("******************* Verify folio amount after payment **********************");
		reslogger.info("******************* Verify folio amount after payment **********************");

		Double paidBefore = Double.parseDouble(paidFolio);
		Double balBefore = Double.parseDouble(balanceFolio);
		Double paidAfter = Double.parseDouble(paidFolioAfterPay);
		Double balAfter = Double.parseDouble(balanceFolioAfterPay);
		Double amt = Double.parseDouble(amount);

		if (TakePaymentType.equalsIgnoreCase("Capture")) {

			if (Double.compare((paidBefore + amt), paidAfter) == 0) {
				test_steps.add("Folio Paid amount is updated with : " + amount);
				reslogger.info("Folio Paid amount is updated with : " + amount);
			} else {
				test_steps.add("Folio Paid amount is not updated with : " + amount);
				reslogger.info("Folio Paid amount is not updated with : " + amount);
			}

			if (Double.compare((balBefore - amt), balAfter) == 0) {
				test_steps.add("Folio Balance amount is updated with : " + amount);
				reslogger.info("Folio Balance amount is updated with : " + amount);
			} else {
				test_steps.add("Folio Balance amount is not updated with : " + amount);
				reslogger.info("Folio Balance amount is not updated with : " + amount);
			}

		} /*
			 * else if (GenerateGuestStatementStatus) {
			 * 
			 * }
			 */

	}

	public void click_Quote(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Quote);
		res.CP_NewReservation_Quote.click();
		test_steps.add("Click on Save Quote");
		reslogger.info("Click on Save Quote");
	}

	public void verify_QuoteStauts(WebDriver driver, ArrayList test_steps, String status) {
		if (status.equalsIgnoreCase("Quote")) {
			test_steps.add("Quote status is verified");
			reslogger.info("Quote status is verified");
		} else {
			test_steps.add("Quote status is not verified");
			reslogger.info("Quote status is not verified");
		}
	}

	public HashMap<String, String> VerifyFolioLineItemsAfterRollBack(WebDriver driver, ArrayList<String> test_steps,
			String CheckInDate, String CheckOutDate) throws InterruptedException, Exception {
		reslogger.info("******************* Verify Folio Details **********************");
		ArrayList<String> allDays = Utility.getAllDatesBetweenCheckInOutDates(CheckInDate, CheckOutDate);
		String roomChargePerNight = null;
		HashMap<String, String> dateAndRoomCharge = new HashMap<>();
		for (String datees : allDays) {

			String date = Utility.getDifferentDateFormat(datees, "EE MMM dd, yyyy");
			// datees=Utility.convertDateFormattoString(datees, date);
			Wait.wait10Second();
			String dateOFLIneItem = driver
					.findElement(By.xpath("//td[@class='lineitem-date']/span[text()='" + date + "']")).getText();
			String category = driver.findElement(By.xpath(
					"//td[@class='lineitem-date']/span[text()='" + date + "']/../../td/span[text()='Room Charge']"))
					.getText();

			if (date.equalsIgnoreCase(dateOFLIneItem) && category.equalsIgnoreCase("Room Charge")) {
				String path = "//td[@class='lineitem-date']/span[text()='" + date
						+ "']/following::td/span[text()='Room Charge']/.././following::td[@class='lineitem-amount']/span";
				Wait.wait5Second();
				roomChargePerNight = driver.findElement(By.xpath(path)).getText();
				dateAndRoomCharge.put(datees, roomChargePerNight);
			}

		}

		return dateAndRoomCharge;
	}

	public void verify_PaymentInHistoryTab(WebDriver driver, ArrayList test_steps, String amount, String PaymentType,
			String CardNumber, String CardExp, String timeZone) {
		test_steps.add("******************* Payment verification in History tab **********************");
		reslogger.info("******************* Payment verification in History tab **********************");
		String deposit = "//span[contains(text(),'payment') and contains(text(),'" + amount + "')]";

		String text = driver.findElement(By.xpath(deposit)).getText();
		reslogger.info(text);

		if (driver.findElement(By.xpath(deposit)).isDisplayed()) {
			test_steps.add("Payment verified in History Tab");
			reslogger.info("Payment verified in History Tab");
		} else {
			test_steps.add("Payment not found  in History Tab");
			reslogger.info("Payment not found  in History Tab");
		}

		String category = "//span[contains(text(),'payment ') and contains(text(),'" + amount
				+ "')]/../preceding-sibling::td/span[text()='Payment']";
		if (driver.findElement(By.xpath(category)).isDisplayed()) {
			test_steps.add("Payment category verified in History Tab");
			reslogger.info("Payment category verified in History Tab");
		} else {
			test_steps.add("Payment category not found  in History Tab");
			reslogger.info("Payment category not found  in History Tab");
		}

		Date date1 = new Date();
		DateFormat df = new SimpleDateFormat("MM/dd/yy");
		// Use Madrid's time zone to format the date in
		df.setTimeZone(TimeZone.getTimeZone(timeZone));

		reslogger.info(df.format(date1));
		String DateFormat = df.format(date1);

		/*
		 * DateFormat df = new SimpleDateFormat("dd/MM/yy"); Calendar calobj = <<<<<<<
		 * HEAD Calendar.getInstance();
		 * Utility.app_logs.info(df.format(calobj.getTime())); =======
		 * Calendar.getInstance(); reslogger.info(df.format(calobj.getTime())); >>>>>>>
		 * b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0 String
		 * DateFormat=df.format(calobj.getTime());
		 */

		String[] DFormat = DateFormat.split("/");
		String date = "//span[contains(text(),'payment ') and contains(text(),'" + amount
				+ "')]/../preceding-sibling::td/span[text()='" + DFormat[0] + "/" + DFormat[1] + "/" + DFormat[2]
				+ "']";
		if (driver.findElement(By.xpath(date)).isDisplayed()) {
			test_steps.add("Payment date verified in History Tab");
			reslogger.info("Payment date verified in History Tab");
		} else {
			test_steps.add("Payment date not found  in History Tab");
			reslogger.info("Payment date not found  in History Tab");
		}

		if (PaymentType.equalsIgnoreCase("MC") || PaymentType.equalsIgnoreCase("Visa")
				|| PaymentType.equalsIgnoreCase("Amex") || PaymentType.equalsIgnoreCase("Discover")) {
			String lastFourDightsOfCard = CardNumber.substring(CardNumber.length() - 4, CardNumber.length());
			if (text.contains(lastFourDightsOfCard) && text.contains(CardExp)) {
				test_steps.add("Verified Payment type " + PaymentType + " Last Four Digits " + lastFourDightsOfCard
						+ " and Exp Date of the card :" + CardExp + " in the payment description : " + text);
				reslogger.info("Verified Payment type " + PaymentType + " Last Four Digits " + lastFourDightsOfCard
						+ " and Exp Date of the card :" + CardExp + " in the payment description : " + text);
			} else {
				test_steps.add("Payment type " + PaymentType + " Last Four Digits " + lastFourDightsOfCard
						+ " and Exp Date of the card :" + CardExp + " in the payment description are not found : "
						+ text);
				reslogger.info("Payment type " + PaymentType + " Last Four Digits " + lastFourDightsOfCard
						+ " and Exp Date of the card :" + CardExp + " in the payment description are not found : "
						+ text);
			}
		} else if (PaymentType.equalsIgnoreCase("Swipe")) {
			String lastFourDightsOfCard = "5454";
			CardExp = "12/23";
			if (text.contains("MC") && text.contains("5454") && text.contains(CardExp)) {
				test_steps.add("Verified Payment type " + PaymentType + " Last Four Digits " + lastFourDightsOfCard
						+ " and Exp Date of the card :" + CardExp + " in the payment description : " + text);
				reslogger.info("Verified Payment type " + PaymentType + " Last Four Digits " + lastFourDightsOfCard
						+ " and Exp Date of the card :" + CardExp + " in the payment description : " + text);
			} else {
				test_steps.add("Payment type " + PaymentType + " Last Four Digits " + lastFourDightsOfCard
						+ " and Exp Date of the card :" + CardExp + " in the payment description are not found : "
						+ text);
				reslogger.info("Payment type " + PaymentType + " Last Four Digits " + lastFourDightsOfCard
						+ " and Exp Date of the card :" + CardExp + " in the payment description are not found : "
						+ text);
			}
		} else if (PaymentType.equalsIgnoreCase("Cash")) {
			if (text.contains("Cash")) {
				test_steps.add("Verified Payment type " + PaymentType + " in the payment description : " + text);
				reslogger.info("Verified Payment type " + PaymentType + " in the payment description : " + text);
			} else {
				test_steps.add("Payment type " + PaymentType + " in the payment description not found : " + text);
				reslogger.info("Payment type " + PaymentType + " in the payment description not found : " + text);
			}
		}
	}

	public ArrayList<String> click_DeatilsTab(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_DetailsTab);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_DetailsTab), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_DetailsTab), driver);
		res.CP_NewReservation_DetailsTab.click();
		test_steps.add("Click on Details Tab");
		reslogger.info("Click on Details Tab");
		return test_steps;
	}

	public void verify_MainPaymentMethod(WebDriver driver, ArrayList test_steps, String IsSetAsMainPaymentMethod,
			String PaymentType, String CardNumber, String CardExpDate, String NameOnCard) {

		test_steps.add("******************* Main Payment Method verification  **********************");
		reslogger.info("******************* Main Payment Method verification  **********************");
		if (IsSetAsMainPaymentMethod.equalsIgnoreCase("Yes")) {
			if (PaymentType.equalsIgnoreCase("Cash")) {
				String payment = "//span[text()='PAYMENT ']/../..//span[text()='Cash']";
				if (driver.findElement(By.xpath(payment)).isDisplayed()) {
					test_steps.add("Cash as Main Payment Method is validated");
					reslogger.info("Cash as Main Payment Method is validated");
				} else {
					test_steps.add("Cash as Main Payment Method is not validated");
					reslogger.info("Cash as Main Payment Method is not validated");
				}
			} else if (PaymentType.equalsIgnoreCase("Swipe")) {
				String payment = "//span[text()='PAYMENT ']/../..//span[text()='MC']";
				String cardnum = "//span[text()='PAYMENT ']/../..//span[contains(text(),'5454')]";
				String cardName = "//span[text()='PAYMENT ']/../..//span[contains(text(),'MC TEST CARD')]";
				String exp = "//span[text()='PAYMENT ']/../..//span[contains(text(),'12/23')]";

				if (driver.findElement(By.xpath(payment)).isDisplayed()
						&& driver.findElement(By.xpath(cardnum)).isDisplayed()
						&& driver.findElement(By.xpath(cardName)).isDisplayed()
						&& driver.findElement(By.xpath(exp)).isDisplayed()) {
					test_steps.add("Swipe card as Main Payment Method is validated");
					reslogger.info("Swipe card as Main Payment Method is validated");
				} else {
					test_steps.add("Swipe card as Main Payment Method is not validated");
					reslogger.info("Swipe card as Main Payment Method is not validated");
				}
			} else if (PaymentType.equalsIgnoreCase("MC") || PaymentType.equalsIgnoreCase("Visa")
					|| PaymentType.equalsIgnoreCase("Amex") || PaymentType.equalsIgnoreCase("Discover")) {
				String lastFourDightsOfCard = CardNumber.substring(CardNumber.length() - 4, CardNumber.length());
				String payment = "//span[text()='PAYMENT ']/../..//span[text()='" + PaymentType + "']";
				String cardnum = "//span[text()='PAYMENT ']/../..//span[contains(text(),'" + lastFourDightsOfCard
						+ "')]";
				String cardName = "//span[text()='PAYMENT ']/../..//span[contains(text(),'" + NameOnCard + "')]";
				String exp = "//span[text()='PAYMENT ']/../..//span[contains(text(),'" + CardExpDate + "')]";

				if (driver.findElement(By.xpath(payment)).isDisplayed()
						&& driver.findElement(By.xpath(cardnum)).isDisplayed()
						&& driver.findElement(By.xpath(cardName)).isDisplayed()
						&& driver.findElement(By.xpath(exp)).isDisplayed()) {
					test_steps.add(PaymentType + " as Main Payment Method is validated");
					reslogger.info(PaymentType + " as Main Payment Method is validated");
				} else {
					test_steps.add(PaymentType + " as Main Payment Method is not validated");
					reslogger.info(PaymentType + " as Main Payment Method is not validated");
				}
			}

		}

	}

	public void verify_UpdatedByUser(WebDriver driver, ArrayList test_steps, String LoggedInUser) {
		test_steps.add("******************* Updated By user verification  **********************");
		reslogger.info("******************* Updated By user verification  **********************");
		String user = "//div[contains(text(),'Updated By:')]/span";
		Wait.WaitForElement(driver, user);

		user = driver.findElement(By.xpath(user)).getText().trim();
		reslogger.info(LoggedInUser);
		reslogger.info(user);
		if (user.contains(LoggedInUser)) {
			test_steps.add("Updated by user validated : " + LoggedInUser);
			reslogger.info("Updated by user validated : " + LoggedInUser);
		} else {
			test_steps.add("Updated by user not validated : " + LoggedInUser);
			reslogger.info("Updated by user not validated : " + LoggedInUser);
		}
	}

	public void verify_UpdatedByUserTime(WebDriver driver, ArrayList test_steps, String timeZone) {
		test_steps.add("******************* Updated By date verification  **********************");
		reslogger.info("******************* Updated By date verification  **********************");
		String user = "//div[contains(text(),'Updated By:')]/span";
		Wait.WaitForElement(driver, user);

		user = driver.findElement(By.xpath(user)).getText().trim();
		// reslogger.info(LoggedInUser);
		reslogger.info(user);

		Date date = new Date();
		DateFormat df = new SimpleDateFormat("MM/dd/yy");

		// Use Madrid's time zone to format the date in
		df.setTimeZone(TimeZone.getTimeZone(timeZone));

		String d = df.format(date);

		if (user.contains(d)) {
			test_steps.add("Updated by date validated : " + d);
			reslogger.info("Updated by date validated : " + d);
		} else {
			test_steps.add("Updated by date not validated : " + d);
			reslogger.info("Updated by date not validated : " + d);
		}
	}

	public void close_FirstOpenedReservation(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		String close = "(//ul[@class='sec_nav']//li[5]//i)[2]";
		try {
			// Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(close)),
			// driver);
			// Wait.WaitForElement(driver, close);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(close)), driver);
			Utility.ScrollToElement(driver.findElement(By.xpath(close)), driver);
			driver.findElement(By.xpath(close)).click();
			unsavedDataYesClick(driver, test_steps);
			test_steps.add("Closed the reservation");
			reslogger.info("Closed the reservation");

		} catch (Exception e) {
			// Wait.WaitForElement(driver, close);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(close)), driver);
			Utility.ScrollToElement(driver.findElement(By.xpath(close)), driver);
			Wait.wait2Second();
			try {
				driver.findElement(By.xpath(close)).click();
			} catch (Exception e1) {
				JavascriptExecutor jse = (JavascriptExecutor) driver;
				jse.executeScript("arguments[0].click();", driver.findElement(By.xpath(close)));
			}
			unsavedDataYesClick(driver, test_steps);
			test_steps.add("Closed the reservation");
			reslogger.info("Closed the reservation");
		}
	}

	public void close_FirstOpenedReservationWithNo(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		String close = "(//ul[@class='sec_nav']//li[5]//i)[2]";
		try {
			// Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(close)),
			// driver);
			// Wait.WaitForElement(driver, close);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(close)), driver);
			Utility.ScrollToElement(driver.findElement(By.xpath(close)), driver);
			driver.findElement(By.xpath(close)).click();
			unsavedDataNoClick(driver, test_steps);
			test_steps.add("Reservation Not Closed");
			reslogger.info("Reservation Not Closed");

		} catch (Exception e) {
			// Wait.WaitForElement(driver, close);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(close)), driver);
			Utility.ScrollToElement(driver.findElement(By.xpath(close)), driver);
			Wait.wait2Second();
			try {
				driver.findElement(By.xpath(close)).click();
			} catch (Exception e1) {
				JavascriptExecutor jse = (JavascriptExecutor) driver;
				jse.executeScript("arguments[0].click();", driver.findElement(By.xpath(close)));
			}
			unsavedDataNoClick(driver, test_steps);
			test_steps.add("Reservation Not Closed");
			reslogger.info("Reservation Not Closed");
		}
	}

	public void verify_MR_ToolTip(WebDriver driver, ArrayList test_steps, String reservation) {

		String pop = "//span[contains(text(),'" + reservation + "')]/following-sibling::span/span";
		Wait.WaitForElement(driver, pop);
		int count = driver.findElements(By.xpath(pop)).size();

		Actions act = new Actions(driver);

		String user = "(//span[contains(text(),'" + reservation + "')]/../preceding-sibling::td[2]//a)";

		String room = "(//span[contains(text(),'" + reservation + "')]/../following-sibling::td[5]/span)";

		for (int i = 1; i <= count; i++) {
			user = "(//span[contains(text(),'" + reservation + "')]/../preceding-sibling::td[2]//a)[" + i + "]";
			room = "(//span[contains(text(),'" + reservation + "')]/../following-sibling::td[5]/span)[" + i + "]";
			user = driver.findElement(By.xpath(user)).getText();
			room = driver.findElement(By.xpath(room)).getText();
			pop = "(//span[contains(text(),'" + reservation + "')]/following-sibling::span/span)[" + i + "]";
			act.moveToElement(driver.findElement(By.xpath(pop))).build().perform();
			String popup = "//span[contains(text(),'" + reservation
					+ "')]/following-sibling::span/span/..//div/div[text()='Multiple Rooms']";
			if (driver.findElement(By.xpath(pop)).isDisplayed()) {
				test_steps.add("MR symbol and Multiple Rooms tooltip are verified for the guest : " + user
						+ " and for the room : " + room);
				reslogger.info("MR symbol and Multiple Rooms tooltip are verified for the guest : " + user
						+ " and for the room : " + room);
			} else {
				test_steps.add("MR symbol and Multiple Rooms tooltip are not verified for the guest : " + user
						+ " and for the room : " + room);
				reslogger.info("MR symbol and Multiple Rooms tooltip are not verified for the guest : " + user
						+ " and for the room : " + room);
			}
		}
	}

	public String getPanelStatusGuestName(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String guestName = res.CP_Reservation_StatusPanel_GuestName.getText();
		return guestName;

	}

	public String getStayInfoSecondGuestName(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String guestName = res.CP_Reservation_StayInfo_SecondaryGuestName.getText();
		return guestName;

	}

	public String getPanelStatusStatusName(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_PanelNoShowStatus);
		String status = res.CP_Reservation_StatusPanel_Status.getText();
		reslogger.info("Status is: " + status);
		return status;

	}

	public void clickPolicyCollapseIcon(WebDriver driver, ArrayList<String> test_steps, String PolicyType,
			String percentage) throws InterruptedException

	{
		Elements_CPReservation res = new Elements_CPReservation(driver);
		if (PolicyType.equals("No Show")) {
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel, driver);
			boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("No Show Policy Alread Expanded");
				reslogger.info("No Show Policy Alread Expanded ");
			} else {
				res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyCollapse.click();
				test_steps.add("No Show Policy  Expanded");
				reslogger.info("No Show Policy  Expanded ");
			}
		} else if (PolicyType.equals("Check In")) {
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel, driver);
			boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("Check In Policy Alread Expanded");
				reslogger.info("Check In Policy Alread Expanded ");
			} else {
				res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyCollapse.click();
				test_steps.add("Check In Policy  Expanded");
				reslogger.info("Check In Policy  Expanded ");
			}
		} else if (PolicyType.equals("Cancel")) {
			String path = "//div[text()='Policies And Disclaimers']/..//span[contains(text(),'Cancellation "
					+ percentage + "%')]";
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CancellationPolicyLabel, driver);
			boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_CancellationPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("Cancellation Policy Alread Expanded");
				reslogger.info("Cancellation Policy Alread Expanded ");
			} else {
				WebElement element = driver.findElement(By.xpath(path));
				Utility.ScrollToElement(element, driver);
				element.click();
				test_steps.add("Cancellation Policy Expanded");
				reslogger.info("Cancellation Policy Expanded ");
			}

		}

	}

	public void verifyPOLICIESANDDISCLAIMERSNoShowPolicy(WebDriver driver, ArrayList<String> test_steps,
			String PolicyName, String PolicyType, String percentage) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		clickPolicyCollapseIcon(driver, test_steps, PolicyType, percentage);
		if (PolicyType.equals("No Show")) {
			// Verified No Show Policy Label
			assertTrue(res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel.isDisplayed(),
					"Failed: To verify No Show Policy Label");
			test_steps.add("Verified <b>'NO SHOW POLICY'</b> Label ");
			reslogger.info("Verified 'NO SHOW POLICY' Label ");

		} else if (PolicyType.equals("Check In")) {
			// Verified No Show Policy Label

			assertTrue(res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel.isEnabled(),
					"Failed: To verify Check-in  Policy Label");
			test_steps.add("Verified <b>'Check-in Policy'</b> Label ");
			reslogger.info("Verified 'Check-in Policy' Label ");
		}
		// Verified No Show Policy
		String path = "//div[@aria-expanded='true']//span[@class='filter-option pull-left'][contains(text(),'"
				+ PolicyName + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		reslogger.info(PolicyName);
		Utility.ScrollToElement(element, driver);
		reslogger.info("***************");
		assertTrue(element.isDisplayed(), "Failed: To verify  Policy " + PolicyName);
		test_steps.add("Verified: <b>" + PolicyName + " Associated</b>");
		reslogger.info("Verified : " + PolicyName + " Associated");

	}

	public void verifyCPReservationNotes(WebDriver driver, ArrayList<String> test_steps, String PolicyType,
			String NotesType, String Abb, String RoomNo, String Subject, String Desc, String UpdateOn, String Date)

			throws InterruptedException {
		Wait.wait10Second();

		reslogger.info("Policy Type: " + PolicyType);
		reslogger.info(" Abbrivation: " + Abb);

		String FinalAbb = Abb;
		reslogger.info(" Final Abbrivation No: " + FinalAbb);

		/*
		 * String[] abb = Abb.split(":"); String FinalAbb = abb[1].trim();
		 * reslogger.info(" Room No: " + FinalAbb);
		 */

		String[] room = RoomNo.split(":");
		String FinalRoomNo = room[1].trim();
		reslogger.info(" Room No: " + FinalRoomNo);
		reslogger.info(" Date: " + UpdateOn);
		if (PolicyType.equals("No Show")) {
			String path = "//notes-info[contains(@params,'reservationDetail')]//tr/td[contains(@data-bind,'type')][(text()='"
					+ NotesType + "')]" + "/following-sibling::td[contains(@data-bind,'roomClassAbbrv')][(text()='"
					+ FinalAbb + ": " + FinalRoomNo + "')]"
					+ "/following-sibling::td[contains(@data-bind,'subject')][(text()='" + PolicyType + "')]"
					+ "//following-sibling::td[contains(@data-bind,'updatedOn')][contains(text(),'" + UpdateOn + "')]";

			reslogger.info(path);
			Wait.WaitForElement(driver, path);
			WebElement element = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(element, driver);
			assertTrue(element.isDisplayed(), "Failed: To verify No Show Notes");
			test_steps.add("Verified Notes <br>" + "TYPE: <b>" + PolicyType + "</b> ROOM: <b>" + FinalAbb + "</b>: <b>"
					+ FinalRoomNo + "</b> SUBJECT: <b>" + Subject + "</b> DESCRIPTION: <b>" + Desc
					+ "</b> UPDATED ON: <b>" + Date + "</b>");
			reslogger.info("Verified Notes TYPE: " + PolicyType + " ROOM: " + FinalAbb + ": " + FinalRoomNo
					+ " SUBJECT: " + Subject + " DESCRIPTION: " + Desc + " UPDATED ON: " + Date);

		} else if (PolicyType.equals("Cancel")) {

			String path = "//notes-info[contains(@params,'reservationDetail')]//tr/td[contains(@data-bind,'type')][(text()='"
					+ NotesType + "')]" + "/following-sibling::td[contains(@data-bind,'roomClassAbbrv')][(text()='"
					+ FinalAbb + ": " + FinalRoomNo + "')]"
					+ "/following-sibling::td[contains(@data-bind,'subject')][(text()='" + Subject + "')] "
					+ "/following-sibling::td[contains(@data-bind,'details')][(text()='" + Desc + "')]"
					+ "//following-sibling::td[contains(@data-bind,'updatedOn')][contains(text(),'" + UpdateOn + "')]";

			reslogger.info(path);
			WebElement element = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(element, driver);
			assertTrue(element.isDisplayed(), "Failed: To verify Cancellation Notes");
			test_steps.add("Verified Notes <br>" + "TYPE: <b>" + PolicyType + " </b> ROOM:  <b>" + FinalAbb
					+ "</b>: <b>" + FinalRoomNo + " </b> SUBJECT:  <b>" + Subject + " </b> DESCRIPTION:  <b>" + Desc
					+ " </b> UPDATED ON:  <b>" + Date + " </b>");
			reslogger.info("Verified Notes TYPE: " + PolicyType + " ROOM: " + FinalAbb + ": " + FinalRoomNo
					+ " SUBJECT: " + Subject + " DESCRIPTION: " + Desc + " UPDATED ON: " + Date);

		}
	}

	public void verifyCPReservationDetailTabPolicies(WebDriver driver, ArrayList<String> test_steps, String PolicyType,
			String Percentage, String PolicyName, String Desc) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		clickPolicyCollapseIcon(driver, test_steps, PolicyType, Percentage);
		if (PolicyType.equals("No Show")) {

			// Verified No Show Policy Label
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel, driver);
			assertTrue(res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel.isDisplayed(),
					"Failed: To verify No Show Policy Label");
			test_steps.add("Verified <b>'NO SHOW POLICY'</b> Label ");
			reslogger.info("Verified 'NO SHOW POLICY' Label ");
		} else if (PolicyType.equals("Cancel")) {
			// Click_CancellationPolicy(driver, test_steps,Percentage);
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CancellationPolicyLabel, driver);
			assertTrue(res.CP_Reservation_POLICIESANDDISCLAIMERS_CancellationPolicyLabel.isDisplayed(),
					"Failed: To verify Cancellation Policy Label");
			test_steps.add("Verified <b>'Cancellation Policy'</b> Label ");
			reslogger.info("Verified 'Cancellation Policy' Label ");

		} else if (PolicyType.equals("Check In")) {
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel, driver);
			assertTrue(res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel.isDisplayed(),
					"Failed: To verify Check-In Policy Label");
			test_steps.add("Verified <b>'Check-In Policy'</b> Label ");
			reslogger.info("Verified 'Check-In Policy' Label ");

		}
		reslogger.info(PolicyName);
		// Verified Associate Policy
		String path = "//div[@aria-expanded='true']//span[@class='filter-option pull-left'][contains(text(),'"
				+ PolicyName + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		reslogger.info(PolicyName);
		Utility.ScrollToElement(element, driver);
		reslogger.info("***************");
		assertTrue(element.isDisplayed(), "Failed: To verify Associate Policy " + PolicyName);
		test_steps.add("Verified Policy: <b> " + PolicyName + "</b>");
		reslogger.info("Verified Policy: " + PolicyName);
		// Verified Description
		String DescPath = "//div[@aria-expanded='true']//textarea[contains(text(),'" + Desc + "')]";
		WebElement DescElement = driver.findElement(By.xpath(DescPath));
		Utility.ScrollToElement(DescElement, driver);
		assertTrue(DescElement.isDisplayed(), "Failed: To verify  Policy Description" + Desc);
		test_steps.add("Verified Policy Description: <b> " + Desc + "</b>");
		reslogger.info("Verified Policy Description: " + Desc);

	}

	public void verifyLineItem(WebDriver driver, ArrayList<String> test_steps, String Date, String PreviousDay,
			String Category, String Desc, String Amount) throws InterruptedException {
		reslogger.info("******************* Verify Folio Details **********************");

		Elements_CPReservation res = new Elements_CPReservation(driver);
		String LineItemSetMainPaymentPath = "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-date']/span[contains(text(),'"
				+ PreviousDay + "')]" + "/../following-sibling::td[@class='lineitem-category']/span[contains(text(),'"
				+ Category + "')]" + "/../following-sibling::td[@class='lineitem-description']//a[contains(text(),'"
				+ Desc + "')]" + "/../following-sibling::td[@class='lineitem-amount']/span[contains(text(),'" + Amount
				+ "')]";
		Wait.WaitForElement(driver, LineItemSetMainPaymentPath);
		WebElement SetLineItemElement = driver.findElement(By.xpath(LineItemSetMainPaymentPath));
		// Verified No Show Fee line item
		assertTrue(SetLineItemElement.isDisplayed(), "Failed: To Verify Line Item");
		test_steps.add(" Verified Date:<b>  " + Date + "</b>");
		reslogger.info("Verified  Date: " + Date);
		test_steps.add(" Verified  Category:<b>  " + Category + "</b>");
		reslogger.info(" Verified  Category: " + Category);
		test_steps.add("Verified  Description:<b>  " + Desc + "</b>");
		reslogger.info(" Verified Description: " + Desc);
		test_steps.add(" Verified Amount:<b>  " + Amount + "</b>");
		reslogger.info(" Verified  Amount: " + Amount);

	}

	public boolean verifyLineItem(WebDriver driver, ArrayList<String> test_steps, String date, String category,
			String amount) {
		reslogger.info("******************* Verify Folio Details **********************");
		String LineItemSetMainPaymentPath = String.format(
				"//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-date']/span[contains(text(),'%s')]"
						+ "/../following-sibling::td[@class='lineitem-category']/span[contains(text(),'%s')]"
						+ "/../following-sibling::td[@class='lineitem-amount']/span[contains(text(),'%s')]",
				date, category, amount);
		Wait.WaitForElement(driver, LineItemSetMainPaymentPath);
		WebElement SetLineItemElement = driver.findElement(By.xpath(LineItemSetMainPaymentPath));

		boolean lineItemVerified = SetLineItemElement.isDisplayed();
		if (lineItemVerified) {
			test_steps.add("Verified Date:<b>  " + date + "</b>");
			reslogger.info("Verified  Date: " + date);
			test_steps.add("Verified  Category:<b>  " + category + "</b>");
			reslogger.info("Verified  Category: " + category);
			test_steps.add("Verified Amount:<b>  " + amount + "</b>");
			reslogger.info("Verified  Amount: " + amount);
		} else {
			test_steps
					.add(String.format("Assertion Line item for the date %s, category %s and amount %s is not present",
							date, category, amount));
			reslogger.info(String.format("Line item for the date %s, category %s and amount %s is not present", date,
					category, amount));
		}
		return lineItemVerified;
	}

	public void VerifyLineItemSecondGuestAlreadyPayAmountByPrimaryOne(WebDriver driver, ArrayList<String> test_steps,
			String Desc) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String LineItemSetMainPaymentPath = "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-description']//a[(contains(text(),'"
				+ Desc + "'))]";
		// WebElement
		// SetLineItemElement=driver.findElement(By.xpath(LineItemSetMainPaymentPath));
		boolean isExist = Utility.isElementPresent(driver, By.xpath(LineItemSetMainPaymentPath));
		if (!isExist) {
			test_steps
					.add("Verified Primary Guest Pay Secondary Guest Charges, No Amount Available for Secondary Guest");
			reslogger.info(
					"Verified Primary Guest Pay Secondary Guest Charges ,No Amount Available for Secondary Guest");
		}

	}

	// update on 11 Dec 2020 by Gangotri
	public void verifyDisplayVoidLineItems(WebDriver driver, ArrayList<String> test_steps, String Notes,
			String Category) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean isExist = checkedDisplayVoidItem(driver, test_steps);
		boolean isImageExist = driver.findElement(By.xpath("//td/i[contains(@class,'icon3')]")).isDisplayed();
		if (!isExist && isImageExist) {
			// String path = "//td[contains(@class,'lineitem-note')]/img[@title='" + Notes +
			// "']";
			String path = "//td[contains(@class,'lineitem-note')]/i[@title='" + Notes + "']";
			WebElement element = driver.findElement(By.xpath(path));
			Wait.explicit_wait_visibilityof_webelement(element, driver);
			// Verified Line Item for Display Void Item
			assertTrue(element.isDisplayed(), "Failed: To verify Display Line Item Notes");
			test_steps.add("'Line Item' Verified Notes:<b>  " + Notes + "</b>");
			reslogger.info("'Line Item' Verified Notes: " + Notes);
			// Verified Image
			/*
			 * assertTrue(res.CP_Reservation_DisplayVoidItemLineItemImage3.isDisplayed(),
			 * "Failed: To verify Display Line Item Image");
			 */
			assertTrue(driver.findElement(By.xpath("//td/i[contains(@class,'icon3')]")).isDisplayed(),
					"Failed: To verify Display Line Item Image");
			test_steps.add("'Line Item' Verified<b>  Image </b>");
			reslogger.info("'Line Item' Verified Image ");
			// Verified Room Changes
			/*
			 * String RoomChange = "//td[contains(@class,'lineitem-note')]/img[@title='" +
			 * Notes + "']/../following-sibling::td[@class='lineitem-category']/span";
			 */
			String RoomChange = "//td[contains(@class,'lineitem-note')]/i[@title='" + Notes
					+ "']/../following-sibling::td[@class='lineitem-category']/span";
			WebElement roomChangeEle = driver.findElement(By.xpath(RoomChange));
			assertTrue(roomChangeEle.getText().toLowerCase().trim().equals(Category.toLowerCase().trim()),
					"Failed: To verify Display Line Item Category");
			test_steps.add("'Line Item' Verified Category:<b>  " + Category + "</b>");
			reslogger.info("'Line Item' Verified Category: " + Category);
		} else if (!isExist) {
			// String path = "//td[contains(@class,'lineitem-note')]/img[@title='" + Notes +
			// "']";
			String path = "//td[contains(@class,'lineitem-note')]/i[@title='" + Notes + "']";
			WebElement element = driver.findElement(By.xpath(path));
			Wait.explicit_wait_visibilityof_webelement(element, driver);
			// Verified Line Item for Display Void Item
			assertTrue(element.isDisplayed(), "Failed: To verify Display Line Item Notes");
			test_steps.add("'Line Item' Verified Notes:<b>  " + Notes + "</b>");
			reslogger.info("'Line Item' Verified Notes: " + Notes);
		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <verifyReservationStatusStatus> ' Description: <Verify
	 * Reservation Status from Panel> ' ' Input parameters: <string> ' Return:
	 * <<<<<<< HEAD <test_Steps> ' Created By: <Gangotri Sikheria> ' ' Created On:
	 * <> ' Modified ON: <11 June 2020> ======= <test_Steps> ' Created By: <Gangotri
	 * Sikheria> ' ' Created On: <> ' Modified ON: <11 June 2020> >>>>>>>
	 * b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> verifyReservationStatusStatus(WebDriver driver, ArrayList<String> test_steps,
			String Status) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_PanelNoShowStatus);
		Utility.ScrollToElement(res.CP_Reservation_StatusPanel_Status, driver);

		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_StatusPanel_Status, driver);
		// Verified History Tab No Show Entry
		reslogger.info("Status is: " + res.CP_Reservation_StatusPanel_Status.getText());
		reslogger.info("Matched Status is: " + Status);

		assertEquals(res.CP_Reservation_StatusPanel_Status.getText().toLowerCase().trim(), Status.toLowerCase().trim(),
				"Failed: To verify Status");
		test_steps.add("  Verified Reservation Status: <b>" + Status + "</b>");
		reslogger.info("Verified Reservation Status: " + Status);

		return test_steps;

	}

	public void VerifyReservationStatusTripTotal(WebDriver driver, ArrayList<String> test_steps,
			String TotalTripAmount) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_StatusPanel_TripTotal, driver);
		String RerservationStatus_TripTotalAmount = res.CP_Reservation_StatusPanel_TripTotal.getText().replace("$", "");
		double tripAmount = Double.valueOf(RerservationStatus_TripTotalAmount);
		int amt = (int) tripAmount;
		RerservationStatus_TripTotalAmount = String.valueOf(amt);
		// Verified History Tab No Show Entry
		assertTrue(RerservationStatus_TripTotalAmount.equals(TotalTripAmount), "Failed: To verify Total Trip");
		test_steps.add("  Verified Reservation Status Total Trip:  <b>" + TotalTripAmount + "</b>");
		reslogger.info(" Verified Reservation Status Total Trip: " + TotalTripAmount);
	}

	public void verifyReservationStatusBalance(WebDriver driver, ArrayList<String> test_steps, String Balance)
			throws InterruptedException

	{
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_PanelBalance);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_StatusPanel_Balance, driver);
		Utility.ScrollToElement(res.CP_Reservation_StatusPanel_Balance, driver);
		String RerservationStatus_BalanceAmount = res.CP_Reservation_StatusPanel_Balance.getText().replace("$", "");
		double balanceAmount = Double.valueOf(RerservationStatus_BalanceAmount);
		reslogger.info(String.valueOf((int) (balanceAmount)).trim());
		assertEquals(String.valueOf((int) (balanceAmount)).trim(), (Balance), "Failed: To verify Balance");

		test_steps.add("  Verified Reservation Status Balance:  <b>" + Balance + "</b>");
		reslogger.info(" Verified Reservation Status Balance: " + Balance);
	}

	public void verifyReservationStatusBalanceForCheckOut(WebDriver driver, ArrayList<String> test_steps,
			String Balance) throws InterruptedException

	{
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_Reservation_StatusPanel_Balance, driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_StatusPanel_Balance, driver);
		String RerservationStatus_BalanceAmount = res.CP_Reservation_StatusPanel_Balance.getText().replace("$", "");
		assertEquals(RerservationStatus_BalanceAmount.trim(), (Balance), "Failed: To verify Balance");
		test_steps.add("  Verified Reservation Status Balance:  <b>" + Balance + "</b>");
		reslogger.info(" Verified Reservation Status Balance: " + Balance);
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyHistoryTabDescription ' Description: Verification of
	 * Description Marked this reservation as a no show and Cancelled this
	 * reservation ' Input parameters: String ' Created By: Gangotri ' Created On:
	 * June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public void verifyHistoryTabDescription(WebDriver driver, ArrayList<String> test_steps, String Status) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_HistoryTab_NoShowDesc);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_HistoryTab_NoShow, driver);
		// Verified History Tab No Show Entry
		assertTrue(res.CP_Reservation_HistoryTab_NoShow.isDisplayed(), "Failed: To verify History Tab ");
		if (Status.equals("No Show")) {
			test_steps.add(" 'History Tab' Verified : <b> Marked this reservation as a no show </b>");
			reslogger.info("'History Tab' Verified : No Show Entry");
		} else if (Status.equals("Cancel")) {
			test_steps.add(" 'History Tab' Verified : <b> Cancelled this reservation </b>");
			reslogger.info("'History Tab' Verified :Cancel Entry");
		}

	}

	public void verifyHistoryTabDescriptionWithPayment(WebDriver driver, ArrayList<String> test_steps, String amount,
			String Status, String PaymentMethod) {
		String desc = "Made a no show payment of $" + amount.trim() + ".00 using " + PaymentMethod;
		String CancelDesc = "Made a cancellation payment of $" + amount.trim() + " using " + PaymentMethod;
		String path = null;

		if (Status.equals("No Show")) {
			path = "//span[contains(text(),'" + desc + "')]";
			WebElement element = driver.findElement(By.xpath(path));
			assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Description");
			test_steps.add("'History Tab' Verified Description: <b>" + desc + "</b>");
			reslogger.info("'History Tab' Verified Description : " + desc);
		} else if (Status.equals("Cancel")) {
			path = "//span[contains(text(),'" + CancelDesc + "')]";
			WebElement element = driver.findElement(By.xpath(path));
			assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Description");
			test_steps.add("'History Tab' Verified Description: <b>" + CancelDesc + "</b>");
			reslogger.info("'History Tab' Verified Description : " + CancelDesc);

		}
	}

	public void verifyHistoryTabPaymentDesc(WebDriver driver, ArrayList<String> test_steps, String amount,
			String Status, String abb, String RoomNo, String PaymentMethod) {
		String[] room = RoomNo.split(":");
		String FinalRoomNo = room[1].trim();
		reslogger.info(" Room No: " + FinalRoomNo);
		String checkIn = "Made a payment $" + amount.trim() + ".00 using " + PaymentMethod;
		String checkOut = "Captured payment for $" + amount.trim() + ".00 using " + PaymentMethod;

		String path = "//span[contains(text(),'" + checkIn
				+ "')]/ancestor::td/following-sibling::td/span[contains(text(),'" + abb + ": " + FinalRoomNo + "')]";
		String checkOutPath = "//span[contains(text(),'" + checkOut
				+ "')]/ancestor::td/following-sibling::td/span[contains(text(),'" + abb + ": " + FinalRoomNo + "')]";
		if (Status.equals("Check In")) {
			WebElement element = driver.findElement(By.xpath(path));
			assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Description");
			test_steps.add("'History Tab' Verified Description: <b>" + checkIn + "</b>");
			reslogger.info("'History Tab' Verified Description : " + checkIn);
			test_steps.add("'History Tab' Verified Room: <b>" + abb + ": " + FinalRoomNo + "</b>");
			reslogger.info("'History Tab' Verified Room : " + abb + ": " + FinalRoomNo);
		} else if (Status.equals("Check Out")) {
			WebElement elementCheckOut = driver.findElement(By.xpath(checkOutPath));
			assertTrue(elementCheckOut.isDisplayed(), "Failed: To verify History Tab  Description");
			test_steps.add("'History Tab' Verified Description: <b>" + checkOut + "</b>");
			reslogger.info("'History Tab' Verified Description : " + checkOut);
			test_steps.add("'History Tab' Verified Room: <b>" + abb + ": " + FinalRoomNo + "</b>");
			reslogger.info("'History Tab' Verified Room : " + abb + ": " + FinalRoomNo);
		}

	}

	public void Verify_HistoryTab_Checkout_ChangedRoomCharges(WebDriver driver, ArrayList<String> test_steps,
			String amount, String ChangedCharges) {
		String checkOut = "Changed room charge from $" + amount + ".00 to $" + ChangedCharges + ".00";
		String path = "//span[contains(text(),'" + checkOut + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Changed Room Charges");
		test_steps.add("'History Tab' Verified <b>Changed room charge from $" + amount + ".00 to $</b>" + ChangedCharges
				+ ".00");
		reslogger.info(
				"'History Tab' Verified  Changed room charge from $" + amount + ".00 to $" + ChangedCharges + ".00");

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: Verify_HistoryTab_Checkout_ChangedCheckOutDate ' Description:
	 * Verification of Description Changed check out date from ' Input parameters:
	 * String ' Created By: Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void Verify_HistoryTab_Checkout_ChangedCheckOutDate(WebDriver driver, ArrayList<String> test_steps,
			String date, String ChangedDate) {
		String checkOut = "Changed check out date from " + date + " to " + ChangedDate + "";
		String path = "//span[contains(text(),'" + checkOut + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Changed Checkout Date");
		test_steps.add("'History Tab' Verified <b>Changed check out date from " + date + " to </b>" + ChangedDate);
		reslogger.info("'History Tab' Verified  Changed check out date from " + date + " to " + ChangedDate);

	}

	public void commonMethodToverifyHistoryTabDescriptionForCheckINCheckOut(WebDriver driver,
			ArrayList<String> test_steps, String amount, String Status, String abb, String RoomNo,
			String PaymentMethod) {
		String[] room = RoomNo.split(":");
		String FinalRoomNo = room[1].trim();
		reslogger.info(" Room No: " + FinalRoomNo);
		String checkIn = "Made a payment $" + amount.trim() + ".00 using " + PaymentMethod;
		String checkOut = "Captured payment for $" + amount.trim() + ".00 using " + PaymentMethod;

		String path = "//span[contains(text(),'" + checkIn
				+ "')]/ancestor::td/following-sibling::td/span[contains(text(),'" + abb + ": " + FinalRoomNo + "')]";
		String checkOutPath = "//span[contains(text(),'" + checkOut
				+ "')]/ancestor::td/following-sibling::td/span[contains(text(),'" + abb + ": " + FinalRoomNo + "')]";
		if (Status.equals("Check In")) {
			WebElement element = driver.findElement(By.xpath(path));
			assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Description");
			test_steps.add("'History Tab' Verified Description: <b>" + checkIn + "</b>");
			reslogger.info("'History Tab' Verified Description : " + checkIn);
			test_steps.add("'History Tab' Verified Room: <b>" + abb + ": " + FinalRoomNo + "</b>");
			reslogger.info("'History Tab' Verified Room : " + abb + ": " + FinalRoomNo);
		} else if (Status.equals("Check Out")) {
			WebElement elementCheckOut = driver.findElement(By.xpath(checkOutPath));
			assertTrue(elementCheckOut.isDisplayed(), "Failed: To verify History Tab  Description");
			test_steps.add("'History Tab' Verified Description: <b>" + checkOut + "</b>");
			reslogger.info("'History Tab' Verified Description : " + checkOut);
			test_steps.add("'History Tab' Verified Room: <b>" + abb + ": " + FinalRoomNo + "</b>");
			reslogger.info("'History Tab' Verified Room : " + abb + ": " + FinalRoomNo);
		}

	}

	public void verifyChangedRoomChargesOnHistoryTabForCheckout(WebDriver driver, ArrayList<String> test_steps,
			String amount, String ChangedCharges) {
		String checkOut = "Changed room charge from $" + amount + ".00 to $" + ChangedCharges + ".00";
		String path = "//span[contains(text(),'" + checkOut + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Changed Room Charges");
		test_steps.add("'History Tab' Verified <b>Changed room charge from $" + amount + ".00 to $</b>" + ChangedCharges
				+ ".00");
		reslogger.info(
				"'History Tab' Verified  Changed room charge from $" + amount + ".00 to $" + ChangedCharges + ".00");

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyChangedCheckOutDateOnHistoryTab ' Description:
	 * Verification of Description Changed check out date from ' Input parameters:
	 * String ' Created By: Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public void verifyChangedCheckOutDateOnHistoryTab(WebDriver driver, ArrayList<String> test_steps, String date,
			String ChangedDate) {
		String checkOut = "Changed check out date from " + date + " to " + ChangedDate + "";
		String path = "//span[contains(text(),'" + checkOut + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Changed Checkout Date");
		test_steps.add("'History Tab' Verified <b>Changed check out date from " + date + " to </b>" + ChangedDate);
		reslogger.info("'History Tab' Verified  Changed check out date from " + date + " to " + ChangedDate);

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: commonMethodToverifyRoomsOnHistoryTab ' Description:
	 * Verification of Rooms on History ' Input parameters: String ' Created By:
	 * Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public void commonMethodToverifyRoomsOnHistoryTab(WebDriver driver, ArrayList<String> test_steps,
			String RoomClassName) throws InterruptedException {
		String path = "//div[contains(@data-bind,'hasHistory')]//td/span[contains(@data-bind,'data.room')]";
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		assertTrue(element.getText().toLowerCase().trim().equals(RoomClassName.toLowerCase().trim()),
				"Failed: To verify History Tab  Room");
		test_steps.add("'History Tab' Verified Room: <b>" + RoomClassName + "</b>");
		reslogger.info("'History Tab' Verified Room : " + RoomClassName);
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyRollBackButton ' Description: Verification of Roll Back
	 * button ' Input parameters: String ' Created By: Gangotri ' Created On: June 3
	 * 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void verifyRollBackButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_RolleBackButton);
		Utility.ScrollToElement(res.CP_Reservation_RollBackAllButton, driver);
		assertTrue(res.CP_Reservation_RollBackAllButton.isDisplayed(), "Failed: To verify Roll Back Button");

		test_steps.add("Verified  <b>Roll Back </b> Button");
		reslogger.info("Verified Roll Back Button");
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyStayInforRollBackButton ' Description: Verification of
	 * Stay Info Roll Back button ' Input parameters: String ' Created By: Gangotri
	 * ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void verifyStayInforRollBackButton(WebDriver driver, ArrayList<String> test_steps, String RoomClassName)
			throws InterruptedException {
		String path = "//div[contains(@data-bind,'ReservationStatusLookup')]/div//div[contains(@class,'ir-roomInfo')]//span[contains(text(),'"
				+ RoomClassName + "')]"
				+ "/ancestor::div/div[contains(@class,'detailsbox')]/following-sibling::div//button[contains(text(),'Roll Back')]";
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		assertTrue(element.isDisplayed(), "Failed: To verify Stay Info Roll Back Button");
		test_steps.add(" Stay Info-Roll Back Button is Displayed For Room Class <b>" + RoomClassName + "</b>");
		reslogger.info("Stay Info-Roll Back Button is Displayed For Room Class: " + RoomClassName);

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyCheckOutAllButton ' Description: Verification of
	 * CheckOut All button ' Input parameters: String ' Created By: Gangotri '
	 * Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void verifyCheckOutAllButton(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutAllButton);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_CheckOutAllButton, driver);
		assertTrue(res.CP_Reservation_CheckOutAllButton.isDisplayed(), "Failed: To verify Check Out All Button");
		test_steps.add("Verified  <b>Check Out All </b> Button");
		reslogger.info("Verified Check Out All  Button");
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyCheckOutButton ' Description: Verification of CheckOut
	 * button ' Input parameters: String ' Created By: Gangotri ' Created On: June 3
	 * 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void verifyCheckOutButton(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutButton);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_CheckOutButton, driver);
		assertTrue(res.CP_Reservation_CheckOutButton.isDisplayed(), "Failed: To verify Check Out  Button");
		test_steps.add("Verified  <b>Check Out  </b> Button");
		reslogger.info("Verified Check Out   Button");
	}

	public void click_RollBackButton(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_RolleBackButton);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_RollBackAllButton, driver);
		res.CP_Reservation_RollBackAllButton.click();
		test_steps.add("Click Roll Back Button");
		reslogger.info("Click Roll Back Button");
	}

	public void Click_CancellationPolicy(WebDriver driver, ArrayList<String> test_steps, String percentage)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String path = "//div[text()='Policies And Disclaimers']/..//span[contains(text(),'Cancellation " + percentage
				+ "%')]";
		Wait.WaitForElement(driver, path);
		Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CancellationPolicyLabel, driver);
		boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_CancellationPolicyLabel.isDisplayed();
		if (isEclicked) {
			test_steps.add("Cancellation Policy Alread Expanded");
			reslogger.info("Cancellation Policy Alread Expanded ");
		} else {
			WebElement element = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(element, driver);
			element.click();
			test_steps.add("Cancellation Policy Expanded");
			reslogger.info("Cancellation Policy Expanded ");
		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: addCancelationReson ' Description: Add Cancel Reason and click
	 * PROCEED TO CANCELLATION PAYMENT button and verify Cancellation Reason
	 * Validation ' Input parameters: String ' Created By: Gangotri ' Created On:
	 * June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void addCancelationReson(WebDriver driver, ArrayList<String> test_steps, String reason, String validationMsg)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		// Wait.WaitForElement(driver, OR_Reservation.ProceedToPaymentButton);
		CompleteCancelProcess(driver, test_steps);
		// Utility.ScrollToElement(res.ProceedToPaymentButton, driver);
		// res.ProceedToPaymentButton.click();
		// test_steps.add("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
		// reslogger.info("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
		test_steps.add("<b>****Start Verifying Reason****</b>");
		assertEquals(res.CancelReservation_ValidationMsg.getText().toLowerCase().trim(),
				(validationMsg.toLowerCase().trim()), "Failed: To verify reason");
		test_steps.add("Verified  Cancellation Reason Validation: <b>" + validationMsg + "</b>");
		reslogger.info("Verified Cancellation Reason Validation: " + validationMsg);
		provideReasonForCancelAndClickOnProceedToPay(driver, test_steps, reason, true);
		String loading = "(//div[@class='ir-loader-in'])[2]";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 10) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
	}

	public void enableVoidRoomCharge(WebDriver driver, ArrayList<String> test_steps, boolean voidRoomCharges) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean voidRoomChargesSelected = res.cancelResPopupVoidRoomChargesCheckBox.isSelected();
		if (voidRoomCharges) {
			if (!(voidRoomChargesSelected)) {
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.cancelResPopupVoidRoomChargesCheckBoxClick),
						driver);
				res.cancelResPopupVoidRoomChargesCheckBoxClick.click();
				test_steps.add("Enabling Void Room Charges check box");
			} else {
				test_steps.add("Void Room Charges check box is already selected");
			}
		} else {
			if (voidRoomChargesSelected) {
				res.cancelResPopupVoidRoomChargesCheckBoxClick.click();
				test_steps.add("Unselecting Void Room Charges check box");
			} else {
				test_steps.add("Void Room Charges check box is already unselected");
			}
		}
	}

	public void provideReasonForCancelAndClickOnProceedToPay(WebDriver driver, ArrayList<String> test_steps,
			String reason, boolean voidRoomCharges) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CancelReservation_Reason);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CancelReservation_Reason), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelReservation_Reason), driver);
		res.CancelReservation_Reason.clear();
		res.CancelReservation_Reason.sendKeys(reason);
		test_steps.add("Providing Cancellation Reason as : <b>" + reason + " </b>");
		reslogger.info("Providing Cancellation Reason as : " + reason);

		CompleteCancelProcess(driver, test_steps);
		// Wait.WaitForElement(driver, OR_Reservation.ProceedToPaymentButton);
		// Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ProceedToPaymentButton),
		// driver);
		// Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ProceedToPaymentButton),
		// driver);
		// Utility.ScrollToElement_NoWait(res.ProceedToPaymentButton, driver);
		// res.ProceedToPaymentButton.sendKeys(Keys.ENTER);
		// Utility.clickThroughJavaScript(driver, res.ProceedToPaymentButton);
		// test_steps.add("Clicking on '<b>PROCEED TO CANCELLATION PAYMENT</b>'
		// Button");
		// reslogger.info("Click 'PROCEED TO CANCELLATION PAYMENT' Button");

	}

	public void enterCancellationReasons(WebDriver driver, ArrayList<String> test_steps, String reason) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CancelReservation_Reason);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CancelReservation_Reason), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelReservation_Reason), driver);
		res.CancelReservation_Reason.clear();
		res.CancelReservation_Reason.sendKeys(reason);
		test_steps.add("Providing Cancellation Reason as : <b>" + reason + " </b>");
		reslogger.info("Providing Cancellation Reason as : " + reason);
	}

	public void verifyCancelPolicyOnCancelPaymentPopup(WebDriver driver, ArrayList<String> test_steps,
			String policyName, String policyText) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.cancelResPopupPolicyName), driver);
			String policyNameDisplayed = res.cancelResPopupPolicyName.getText();
			Actions act = new Actions(driver);
			act.moveToElement(res.cancelResPopupPolicyName).perform();
			String policyNameAtToolTip = res.cancelResPopupPolicyToolTipName.getText();
			String policyTextAtToolTip = res.cancelResPopupPolicyToolTipText.getText();

			assertEquals(policyNameDisplayed, policyName, "Failed - Verify policy name on cancel popup");
			test_steps.add("Successfully verified policy name on cancel popup as <b>" + policyNameDisplayed + "</b>");

			assertEquals(policyNameAtToolTip, policyName, "Failed - Verify policy name on cancel popup");
			test_steps.add(
					"Successfully verified policy name on cancel popup tool tip as <b>" + policyNameAtToolTip + "</b>");

			assertEquals(policyTextAtToolTip, policyText, "Failed - Verify policy name on cancel popup");
			test_steps.add(
					"Successfully verified policy text on cancel popup tool tip as <b>" + policyTextAtToolTip + "</b>");

		} catch (Exception e) {
			reslogger.info(e);
		}
	}

	public String get_STAYINFORoomChargesWithoutCurrency(WebDriver driver, ArrayList test_steps, String RoomClassName) {
		String Balance = driver.findElement(By.xpath(
				"//div[contains(@data-bind,'ReservationStatusLookup')]/div//div[contains(@class,'ir-roomInfo')]//span[contains(text(),'"
						+ RoomClassName + "')]"
						+ "/following-sibling::span[contains(@data-bind,'showInnroadCurrency')]"))
				.getText();
		Balance = Balance.replace("$", "");
		test_steps.add("StayInfo Room Charges : <b>" + Balance + "</b>");
		reslogger.info("StayInfo Room Charges : " + Balance);
		return Balance;
	}

	public String stayInfoActualRoom = "", stayInfoActualAbb = "";

	public int actualRoom = 0;

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickSTAYINFOThreeDots ' Description: Click three demo from
	 * stay info page as per room no ' Input parameters: String ' Created By:
	 * Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void clickSTAYINFOThreeDots(WebDriver driver, ArrayList<String> test_steps, String Status,

			String roomNO, ArrayList<String> Rooms, ArrayList<String> RoomAbbri) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		int size = res.CP_Reservation_StayInfo_ThreeDotts.size();
		for (int i = 0; i < size; i++) {
			if (i == (Integer.parseInt(roomNO) - 1)) {
				actualRoom = i;
				stayInfoActualRoom = Rooms.get(i).toString();
				stayInfoActualAbb = RoomAbbri.get(i).toString();
				reslogger.info(stayInfoActualAbb);
				Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_StayInfo_ThreeDotts);
				Utility.ScrollToElement(res.CP_Reservation_StayInfo_ThreeDotts.get(i), driver);
				res.CP_Reservation_StayInfo_ThreeDotts.get(i).click();
				test_steps.add("Room <b>" + (Integer.parseInt(roomNO)) + "</b> in the MRB Reservation");
				reslogger.info("Room " + (Integer.parseInt(roomNO)) + " in the MRB Reservation");
				break;
			}
		}

		String pathCancel = "//ul//li[contains(text(),'" + Status + "')]";
		WebDriverWait wait = new WebDriverWait(driver, 25);
		By locator = By.xpath(pathCancel);
		WebElement elementCancel = wait.until(ExpectedConditions.elementToBeClickable(locator));
		elementCancel.click();
		test_steps.add("Click : <b>" + Status + "</b>");
		reslogger.info("Click : " + Status);
	}

	public void click_FolioDetail_DropDownBox(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_FolioDetailDropDownBox);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_FolioDetailDropDownBox, driver);
		Utility.ScrollToElement(res.CP_Reservation_FolioDetailDropDownBox, driver);
		res.CP_Reservation_FolioDetailDropDownBox.click();
		test_steps.add("Click Folio Detail Drop Down Box");
		reslogger.info("Click Folio Detail Drop Down Box");
	}

	public void click_FolioDetail_DropDownBox(ArrayList<String> test_steps, WebDriver driver)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_ReservationFolioDetailDropDownBox);
		Wait.explicit_wait_visibilityof_webelement(res.CP_ReservationFolioDetailDropDownBox, driver);
		Utility.ScrollToElement(res.CP_ReservationFolioDetailDropDownBox, driver);
		res.CP_ReservationFolioDetailDropDownBox.click();
		test_steps.add("Click Folio Detail Drop Down Box");
		reslogger.info("Click Folio Detail Drop Down Box");
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickFolioDetailOptionValue ' Description: Click on Folio Drop
	 * Down BOx option ' Input parameters: String ' Created By: Gangotri ' Created
	 * On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void clickFolioDetailOptionValue(WebDriver driver, ArrayList<String> test_steps, String abb, String RoomNO)
			throws InterruptedException {
		String FinalRoomNo = null;
		if (RoomNO.contains(":")) {
			String[] room = RoomNO.split(":");
			FinalRoomNo = room[1].trim();
			reslogger.info(" Room No: " + FinalRoomNo);

		} else {
			FinalRoomNo = RoomNO;
		}

		String path = "//a/span[contains(text(),'Guest Folio For " + abb + " : " + FinalRoomNo + "')]/..";
		System.out.println(path);
		WebElement element = driver.findElement(By.xpath(path));
		Wait.WaitForElement(driver, path);
		Utility.ScrollToElement(element, driver);
		Wait.wait5Second();
		element.click();
		test_steps.add("Select Guest Folio For: <b>" + abb + ":" + FinalRoomNo + "</b>");
		reslogger.info("Select Guest Folio For: " + abb + ":" + FinalRoomNo);
	}

	public void verify_PaymentInTripSummary(WebDriver driver, ArrayList test_steps, String paidFolio,
			String balanceFolio, String paidFolioAfterPay, String balanceFolioAfterPay, String amount,
			String TakePaymentType) {
		test_steps.add("******************* Verify TripSummary amount after payment **********************");
		reslogger.info("******************* Verify TripSummary amount after payment **********************");

		Double paidBefore = Double.parseDouble(paidFolio);
		Double balBefore = Double.parseDouble(balanceFolio);
		Double paidAfter = Double.parseDouble(paidFolioAfterPay);
		Double balAfter = Double.parseDouble(balanceFolioAfterPay);
		Double amt = Double.parseDouble(amount);

		if (TakePaymentType.equalsIgnoreCase("Capture")) {

			if (Double.compare((paidBefore + amt), paidAfter) == 0) {
				test_steps.add("Folio Paid amount is updated with : " + amount);
				reslogger.info("Folio Paid amount is updated with : " + amount);
			} else {
				test_steps.add("Folio Paid amount is not updated with : " + amount);
				reslogger.info("Folio Paid amount is not updated with : " + amount);
			}

			if (Double.compare((balBefore - amt), balAfter) == 0) {
				test_steps.add("Folio Balance amount is updated with : " + amount);
				reslogger.info("Folio Balance amount is updated with : " + amount);
			} else {
				test_steps.add("Folio Balance amount is not updated with : " + amount);
				reslogger.info("Folio Balance amount is not updated with : " + amount);
			}
		}
	}

	public void create_SplitResFromMRB(WebDriver driver, ArrayList test_steps, ArrayList Rooms)
			throws InterruptedException {
		test_steps.add("******************* Spliting a room from MRB to a separate reservation **********************");
		reslogger.info("******************* Spliting a room from MRB to a separate reservation **********************");
		String circle = "//div[contains(text(),'Stay')]/..//button[contains(@class,'Circle')]";
		int count = driver.findElements(By.xpath(circle)).size();
		circle = "(//div[contains(text(),'Stay')]/..//button[contains(@class,'Circle')])[" + count + "]";
		Wait.WaitForElement(driver, circle);
		driver.findElement(By.xpath(circle)).click();

		String split = "(//li[text()='Split into Separate Reservation'])[" + (count - 1) + "]";
		Wait.WaitForElement(driver, split);
		driver.findElement(By.xpath(split)).click();
		test_steps.add("Clicking on split into separate reservation");
		reslogger.info("Clicking on split into separate reservation");
		Wait.wait3Second();
		String areYouSure = "//div[contains(text(),'Are you sure you want to split this room into a separate reservation')]/..//button[text()='Yes']";
		Wait.WaitForElement(driver, areYouSure);
		driver.findElement(By.xpath(areYouSure)).click();

		test_steps.add("Are you sure you want to split this room into a separate reservation Popup verified");
		reslogger.info("Are you sure you want to split this room into a separate reservation Popup verified");
		String loading = "(//div[@class='ir-loader-in'])";
		count = 0;
		while (true) {
			if (driver.findElements(By.xpath(loading)).size() > 4) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
	}

	public ArrayList get_FolioBalanceForAllFolios(WebDriver driver, ArrayList test_steps, ArrayList Rooms,
			ArrayList RoomAbbri, String IsAssign) throws InterruptedException {
		test_steps.add("******************* MRB Folio Creation verification **********************");
		reslogger.info("******************* MRB Folio Creation verification **********************");
		String abb = null;
		String roomnumber = null;

		ArrayList<ArrayList> al = new ArrayList<ArrayList>();

		for (int i = 0; i < RoomAbbri.size(); i++) {
			ArrayList al1 = new ArrayList();
			abb = RoomAbbri.get(i).toString();
			roomnumber = Rooms.get(i).toString();
			String[] abbrivation = abb.split(":");
			String[] rooomno = roomnumber.split(":");
			String folio = null;

			String folioSize = "//button[contains(@title,'Guest')]";
			Wait.WaitForElement(driver, folioSize);
			driver.findElement(By.xpath(folioSize)).click();
			Wait.wait2Second();
			if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps
							.add("Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
					reslogger
							.info("Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
					// folio="Guest Folio For "+abbrivation[1]+" :
					// "+abbrivation[0];
					// new
					// Select(driver.findElement(By.xpath(folioSize))).selectByVisibleText(folio);
					driver.findElement(By.xpath(folio)).click();
					String roomCahrge = "//span[text()='Room Charge']";

					Double FilioRoomCharges = Double.parseDouble(get_RoomCharge(driver, test_steps));
					Double FilioIncidentals = Double.parseDouble(get_Inceidentals(driver, test_steps));
					Double FilioTaxes = Double.parseDouble(get_Taxes(driver, test_steps));
					Double FilioTripTotal = Double.parseDouble(get_TotalCharges(driver, test_steps));
					Double FilioPaid = Double.parseDouble(get_Payments(driver, test_steps));
					Double FilioBalance = Double.parseDouble(get_Balance(driver, test_steps));
					al1.add(FilioRoomCharges);
					al1.add(FilioIncidentals);
					al1.add(FilioTaxes);
					al1.add(FilioTripTotal);
					al1.add(FilioPaid);
					al1.add(FilioBalance);
					al.add(al1);
				} else {
					test_steps.add(
							"Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
					reslogger.info(
							"Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
				}
			} else {
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[1] + " : " + rooomno[1].trim()
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps.add(
							"Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + rooomno[1].trim());
					reslogger.info(
							"Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + rooomno[1].trim());
					// folio="Guest Folio For "+abbrivation[1]+" :
					// "+rooomno[1].trim();
					// new
					// Select(driver.findElement(By.xpath(folioSize))).selectByVisibleText(folio);
					driver.findElement(By.xpath(folio)).click();
					String roomCahrge = "//span[text()='Room Charge']";

					Double FilioRoomCharges = Double.parseDouble(get_RoomCharge(driver, test_steps));
					Double FilioIncidentals = Double.parseDouble(get_Inceidentals(driver, test_steps));
					Double FilioTaxes = Double.parseDouble(get_Taxes(driver, test_steps));
					Double FilioTripTotal = Double.parseDouble(get_TotalCharges(driver, test_steps));
					Double FilioPaid = Double.parseDouble(get_Payments(driver, test_steps));
					Double FilioBalance = Double.parseDouble(get_Balance(driver, test_steps));
					al1.add(FilioRoomCharges);
					al1.add(FilioIncidentals);
					al1.add(FilioTaxes);
					al1.add(FilioTripTotal);
					al1.add(FilioPaid);
					al1.add(FilioBalance);
					al.add(al1);
				} else {
					test_steps.add("Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : "
							+ rooomno[1].trim());
					reslogger.info("Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : "
							+ rooomno[1].trim());
				}
			}
		}
		return al;
	}

	public void velidate_MRB_TripSummaryAndFolio(WebDriver driver, ArrayList test_steps, ArrayList al,
			String TripSummaryRoomCharges, String TripSummaryTaxes, String TripSummaryIncidentals,
			String TripSummaryTripTotal, String TripSummaryPaid, String TripSummaryBalance) {
		test_steps.add("******************* Validating Folio and TripSummary fields **********************");
		reslogger.info("******************* Validating Folio and TripSummary fields **********************");

		TripSummaryRoomCharges = TripSummaryRoomCharges.trim();
		TripSummaryRoomCharges = TripSummaryRoomCharges.substring(1, TripSummaryRoomCharges.length());
		TripSummaryRoomCharges = TripSummaryRoomCharges.trim();
		Double TripSummRoom = Double.parseDouble(TripSummaryRoomCharges);

		TripSummaryTaxes = TripSummaryTaxes.trim();
		TripSummaryTaxes = TripSummaryTaxes.substring(1, TripSummaryTaxes.length());
		TripSummaryTaxes = TripSummaryTaxes.trim();
		Double TripSummTax = Double.parseDouble(TripSummaryTaxes);

		TripSummaryIncidentals = TripSummaryIncidentals.trim();
		TripSummaryIncidentals = TripSummaryIncidentals.substring(1, TripSummaryIncidentals.length());
		TripSummaryIncidentals = TripSummaryIncidentals.trim();
		Double TripSummInci = Double.parseDouble(TripSummaryIncidentals);

		TripSummaryTripTotal = TripSummaryTripTotal.trim();
		TripSummaryTripTotal = TripSummaryTripTotal.substring(1, TripSummaryTripTotal.length());
		TripSummaryTripTotal = TripSummaryTripTotal.trim();
		Double TripSummTot = Double.parseDouble(TripSummaryTripTotal);

		TripSummaryPaid = TripSummaryPaid.trim();
		TripSummaryPaid = TripSummaryPaid.substring(1, TripSummaryPaid.length());
		TripSummaryPaid = TripSummaryPaid.trim();
		Double TripSummPaid = Double.parseDouble(TripSummaryPaid);

		TripSummaryBalance = TripSummaryBalance.trim();
		TripSummaryBalance = TripSummaryBalance.substring(1, TripSummaryBalance.length());
		TripSummaryBalance = TripSummaryBalance.trim();
		Double TripSummBal = Double.parseDouble(TripSummaryBalance);

		int count = al.size();
		ArrayList al1;
		Double FilioRoomCharges = (double) 0, FilioIncidentals = (double) 0, FilioTaxes = (double) 0,
				FilioTripTotal = (double) 0, FilioPaid = (double) 0, FilioBalance = (double) 0;

		for (int i = 0; i < count; i++) {
			al1 = (ArrayList) al.get(i);
			FilioRoomCharges = FilioRoomCharges + Double.parseDouble(al1.get(0).toString());
			FilioIncidentals = FilioIncidentals + Double.parseDouble(al1.get(1).toString());
			FilioTaxes = FilioTaxes + Double.parseDouble(al1.get(2).toString());
			FilioTripTotal = FilioTripTotal + Double.parseDouble(al1.get(3).toString());
			FilioPaid = FilioPaid + Double.parseDouble(al1.get(4).toString());
			FilioBalance = FilioBalance + Double.parseDouble(al1.get(5).toString());
		}

		/*
		 * reslogger.info("FilioRoomCharges :"+FilioRoomCharges);
		 * reslogger.info("FilioIncidentals : "+FilioIncidentals);
		 * reslogger.info("FilioTaxes : "+FilioTaxes);
		 * reslogger.info("FilioTripTotal : "+FilioTripTotal);
		 * reslogger.info("FilioPaid : "+FilioPaid);
		 * reslogger.info("FilioBalance : "+FilioBalance);
		 * reslogger.info("TripSummRoom : "+TripSummRoom);
		 * reslogger.info("TripSummTax : "+TripSummTax);
		 * reslogger.info("TripSummInci : "+TripSummInci);
		 * reslogger.info("TripSummTot : "+TripSummTot);
		 * reslogger.info("TripSummPaid : "+TripSummPaid);
		 * reslogger.info("TripSummBal : "+TripSummBal);
		 */

		if (Double.compare(TripSummRoom, FilioRoomCharges) == 0) {
			test_steps.add("TripSummary RoomCharges and Folio RoomCharges are same : " + FilioRoomCharges);
			reslogger.info("TripSummary RoomCharges and Folio RoomCharges are same : " + FilioRoomCharges);
		} else {
			test_steps.add("TripSummary RoomCharges and Folio RoomCharges are not same : " + FilioRoomCharges);
			reslogger.info("TripSummary RoomCharges and Folio RoomCharges are not same : " + FilioRoomCharges);
		}

		if (Double.compare(FilioTaxes, TripSummTax) == 0) {
			test_steps.add("TripSummaryTaxes and FilioTaxes are same : " + FilioTaxes);
			reslogger.info("TTripSummaryTaxes and FilioTaxes are same : " + FilioTaxes);
		} else {
			test_steps.add("TripSummaryTaxes and FilioTaxes are not same : " + FilioTaxes);
			reslogger.info("TripSummaryTaxes and FilioTaxes are not same : " + FilioTaxes);
		}
		if (Double.compare(FilioIncidentals, TripSummInci) == 0) {
			test_steps.add("TripSummary Incidental and Folio Incidental are same : " + FilioIncidentals);
			reslogger.info("TripSummary Incidental and Folio Incidental are same : " + FilioIncidentals);
		} else {
			test_steps.add("TripSummary Incidental and Folio Incidental are not same : " + FilioIncidentals);
			reslogger.info("TripSummary Incidental and Folio Incidental are not same : " + FilioIncidentals);
		}
		if (Double.compare(FilioTripTotal, TripSummTot) == 0) {
			test_steps.add("TripSummary TripTotal and Folio TripTotal are same : " + FilioTripTotal);
			reslogger.info("TripSummary TripTotal and Folio TripTotal are same : " + FilioTripTotal);
		} else {
			test_steps.add("TripSummary TripTotal and Folio TripTotal are not same : " + FilioTripTotal);
			reslogger.info("TripSummary TripTotal and Folio TripTotal are not same : " + FilioTripTotal);
		}
		if (Double.compare(FilioPaid, TripSummPaid) == 0) {
			test_steps.add("TripSummary Paid and Folio Paid are same : " + FilioPaid);
			reslogger.info("TripSummary Paid and Folio Paid are same : " + FilioPaid);
		} else {
			test_steps.add("TripSummary Paid and Folio Paid are not same : " + FilioPaid);
			reslogger.info("TripSummary Paid and Folio Paid are not same : " + FilioPaid);
		}
		if (Double.compare(FilioBalance, TripSummBal) == 0) {
			test_steps.add("TripSummary Balance and Folio Balance are same : " + FilioBalance);
			reslogger.info("TripSummary Balance and Folio Balance are same : " + FilioBalance);
		} else {
			test_steps.add("TripSummary Balance and Folio Balance are not same : " + FilioBalance);
			reslogger.info("TripSummary Balance and Folio Balance are not same : " + FilioBalance);
		}
	}

	public String verify_MRB_SplitResInHistory(WebDriver driver, ArrayList test_steps) {
		test_steps.add(
				"******************* Validating Split Reservation recored in MRB History Tab **********************");
		reslogger.info(
				"******************* Validating Split Reservation recored in MRB History Tab **********************");

		String description = "//span[contains(text(),'Split a room into separate reservation with Confirmation Number: ')]";
		String confirmation = driver.findElement(By.xpath(description)).getText();
		test_steps.add(confirmation);
		reslogger.info(confirmation);
		confirmation = confirmation.replace("Split a room into separate reservation with Confirmation Number: ", "");
		return confirmation;
	}

	public void verify_MRB_FolioAfterSplit(WebDriver driver, ArrayList test_steps, ArrayList RoomAbbri, String IsAssign,
			ArrayList Rooms) throws InterruptedException {
		test_steps.add("******************* MRB Folio Creation verification After Split**********************");
		reslogger.info("******************* MRB Folio Creation verification After Split**********************");
		String abb = null;
		String roomnumber = null;
		for (int i = 0; i < RoomAbbri.size(); i++) {
			abb = RoomAbbri.get(i).toString();
			roomnumber = Rooms.get(i).toString();
			String[] abbrivation = abb.split(":");
			String[] rooomno = roomnumber.split(":");
			String folio = null;

			String folioSize = "//button[contains(@title,'Guest')]";
			Wait.WaitForElement(driver, folioSize);
			driver.findElement(By.xpath(folioSize)).click();
			Wait.wait2Second();

			if (i == (RoomAbbri.size() - 1) || RoomAbbri.size() > 2) {
				if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
					folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]
							+ "')]";
					reslogger.info(folio);
					if (driver.findElements(By.xpath(folio)).size() > 0) {
						test_steps.add(
								"Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
						reslogger.info(
								"Folio is present : " + "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0]);
						// folio="Guest Folio For "+abbrivation[1]+" :
						// "+abbrivation[0];
						// new
						// Select(driver.findElement(By.xpath(folioSize))).selectByVisibleText(folio);
						driver.findElement(By.xpath(folio)).click();
						String roomCahrge = "//span[text()='Room Charge']";
						if (driver.findElements(By.xpath(roomCahrge)).size() > 0) {
							test_steps.add("Room Charge Line Item  is present : " + "Guest Folio For " + abbrivation[1]
									+ " : " + abbrivation[0]);
							reslogger.info("Room Charge Line Item  is present : " + "Guest Folio For " + abbrivation[1]
									+ " : " + abbrivation[0]);
						} else {
							test_steps.add("Room Charge Line Item  is not present : " + "Guest Folio For "
									+ abbrivation[1] + " : " + abbrivation[0]);
							reslogger.info("Room Charge Line Item  is not present : " + "Guest Folio For "
									+ abbrivation[1] + " : " + abbrivation[0]);
						}
					} else {
						test_steps.add("Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : "
								+ abbrivation[0]);
						reslogger.info("Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : "
								+ abbrivation[0]);
					}
//					folioSize = "//button[contains(@title,'Guest')]";
//					Wait.WaitForElement(driver, folioSize);
//					driver.findElement(By.xpath(folioSize)).click();
				} else {
					folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[1] + " : " + rooomno[1].trim()
							+ "')]";
					reslogger.info(folio);
					if (driver.findElements(By.xpath(folio)).size() > 0) {
						test_steps.add("Folio is present : " + "Guest Folio For " + abbrivation[1] + " : "
								+ rooomno[1].trim());
						reslogger.info("Folio is present : " + "Guest Folio For " + abbrivation[1] + " : "
								+ rooomno[1].trim());
						// folio="Guest Folio For "+abbrivation[1]+" :
						// "+rooomno[1].trim();
						// new
						// Select(driver.findElement(By.xpath(folioSize))).selectByVisibleText(folio);
						driver.findElement(By.xpath(folio)).click();
						String roomCahrge = "//span[text()='Room Charge']";
						if (driver.findElements(By.xpath(roomCahrge)).size() > 0) {
							test_steps.add("Room Charge Line Item  is present : " + "Guest Folio For " + abbrivation[1]
									+ " : " + rooomno[1].trim());
							reslogger.info("Room Charge Line Item  is present : " + "Guest Folio For " + abbrivation[1]
									+ " : " + rooomno[1].trim());
						} else {
							test_steps.add("Room Charge Line Item  is not present : " + "Guest Folio For "
									+ abbrivation[1] + " : " + rooomno[1].trim());
							reslogger.info("Room Charge Line Item  is not present : " + "Guest Folio For "
									+ abbrivation[1] + " : " + rooomno[1].trim());
						}
					} else {
						test_steps.add("Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : "
								+ rooomno[1].trim());
						reslogger.info("Folio is not present : " + "Guest Folio For " + abbrivation[1] + " : "
								+ rooomno[1].trim());
					}
				}
			} else {
				String option = "//option[text()='Guest Folio']";
				if (driver.findElements(By.xpath(option)).size() > 0) {
					test_steps.add("Folio present : Guest Folio");
					reslogger.info("Folio present : Guest Folio");
					folio = "Guest Folio For " + abbrivation[1] + " : " + abbrivation[0];
					String roomCahrge = "//span[text()='Room Charge']";
					if (driver.findElements(By.xpath(roomCahrge)).size() > 0) {
						test_steps.add("Room Charge Line Item  is present : Guest Folio");
						reslogger.info("Room Charge Line Item  is present : Guest Folio");
					} else {
						test_steps.add("Room Charge Line Item  is not present : Guest Folio");
						reslogger.info("Room Charge Line Item  is not present : Guest Folio");
					}
				} else {
					test_steps.add("Guest folio not present");
					reslogger.info("Guest folio not present");
				}
			}
		}
//		String folioSize = "//button[contains(@title,'Guest')]";
//		Wait.WaitForElement(driver, folioSize);
//		driver.findElement(By.xpath(folioSize)).click();
	}

	public void validate_MRBFolio_AfterSplit(WebDriver driver, ArrayList test_steps, ArrayList al)
			throws InterruptedException {
		test_steps.add("******************* MRB Folio verification After Split**********************");
		reslogger.info("******************* MRB Folio verification After Split**********************");
		int count = al.size();
		ArrayList al1;
		Double FilioRoomCharges = (double) 0, FilioIncidentals = (double) 0, FilioTaxes = (double) 0,
				FilioTripTotal = (double) 0, FilioPaid = (double) 0, FilioBalance = (double) 0;
		for (int i = 0; i < count - 1; i++) {

			al1 = (ArrayList) al.get(i);

			FilioRoomCharges = FilioRoomCharges + Double.parseDouble(al1.get(0).toString());
			FilioIncidentals = FilioIncidentals + Double.parseDouble(al1.get(1).toString());
			FilioTaxes = FilioTaxes + Double.parseDouble(al1.get(2).toString());
			FilioTripTotal = FilioTripTotal + Double.parseDouble(al1.get(3).toString());
			FilioPaid = FilioPaid + Double.parseDouble(al1.get(4).toString());
			FilioBalance = FilioBalance + Double.parseDouble(al1.get(5).toString());
		}

		String folio = "(//li//span[contains(text(),'Guest Folio')])";

		count = driver.findElements(By.xpath(folio)).size();

		// ##
		Double FilioRoomChrg = (double) 0, FilioInci = (double) 0, FilioTax = (double) 0, FilioTripTot = (double) 0,
				FilioPad = (double) 0, FilioBal = (double) 0;
		for (int i = 1; i <= count; i++) {
			String folioSize = "//button[contains(@title,'Guest')]";
			Wait.WaitForElement(driver, folioSize);
			driver.findElement(By.xpath(folioSize)).click();
			Wait.wait2Second();

			folio = "(//li//span[contains(text(),'Guest Folio')])[" + (i) + "]";

			try {
				driver.findElement(By.xpath(folio)).click();
			} catch (Exception e) {
				Utility.scrollAndClick(driver, By.xpath(folio));
			}
			Wait.wait5Second();
			FilioRoomChrg = FilioRoomChrg + Double.parseDouble(get_RoomCharge(driver, test_steps));
			FilioInci = FilioInci + Double.parseDouble(get_Inceidentals(driver, test_steps));
			FilioTax = FilioTax + Double.parseDouble(get_Taxes(driver, test_steps));
			FilioTripTot = FilioTripTot + Double.parseDouble(get_TotalCharges(driver, test_steps));
			FilioPad = FilioPad + Double.parseDouble(get_Payments(driver, test_steps));
			FilioBal = FilioBal + Double.parseDouble(get_Balance(driver, test_steps));
		}

		reslogger.info("FilioRoomCharges :" + FilioRoomCharges);
		reslogger.info("FilioIncidentals : " + FilioIncidentals);
		reslogger.info("FilioTaxes : " + FilioTaxes);
		reslogger.info("FilioTripTotal : " + FilioTripTotal);
		reslogger.info("FilioPaid : " + FilioPaid);
		reslogger.info("FilioBalance : " + FilioBalance);
		reslogger.info("FilioRoomChrg : " + FilioRoomChrg);
		reslogger.info("FilioTax : " + FilioTax);
		reslogger.info("FilioInci : " + FilioInci);
		reslogger.info("FilioTripTot : " + FilioTripTot);
		reslogger.info("FilioPad : " + FilioPad);
		reslogger.info("FilioBal : " + FilioBal);

		if (Double.compare(FilioRoomChrg, FilioRoomCharges) == 0) {
			test_steps.add("After Spliting the reservation folio RoomCharges are validated : " + FilioRoomCharges);
			reslogger.info("After Spliting the reservation folio RoomCharges are validated : " + FilioRoomCharges);
		} else {
			test_steps.add("After Spliting the reservation folio RoomCharges are not validated : " + FilioRoomCharges);
			reslogger.info("After Spliting the reservation folio RoomCharges are not validated : " + FilioRoomCharges);
		}

		if (Double.compare(FilioTaxes, FilioTax) == 0) {
			test_steps.add("After Spliting the reservation folio taxes are validated : " + FilioTaxes);
			reslogger.info("After Spliting the reservation folio taxes are validated : " + FilioTaxes);
		} else {
			test_steps.add("After Spliting the reservation folio taxes are not validated : " + FilioTaxes);
			reslogger.info("After Spliting the reservation folio taxes are not validated : " + FilioTaxes);
		}
		if (Double.compare(FilioIncidentals, FilioInci) == 0) {
			test_steps.add("After Spliting the reservation folio Incidental are validated : " + FilioIncidentals);
			reslogger.info("After Spliting the reservation folio Incidental are validated : " + FilioIncidentals);
		} else {
			test_steps.add("After Spliting the reservation folio Incidental are not validated : " + FilioIncidentals);
			reslogger.info("After Spliting the reservation folio Incidental are not validated : " + FilioIncidentals);
		}
		if (Double.compare(FilioTripTotal, FilioTripTot) == 0) {
			test_steps.add("After Spliting the reservation folio TripTotal are validated : " + FilioTripTotal);
			reslogger.info("After Spliting the reservation folio TripTotal are validated : " + FilioTripTotal);
		} else {
			test_steps.add("After Spliting the reservation folio TripTotal are not validated : " + FilioTripTotal);
			reslogger.info("After Spliting the reservation folio TripTotal are not validated : " + FilioTripTotal);
		}
		if (Double.compare(FilioPaid, FilioPad) == 0) {
			test_steps.add("After Spliting the reservation folio Paid are validated : " + FilioPaid);
			reslogger.info("After Spliting the reservation folio Paid are validated : " + FilioPaid);
		} else {
			test_steps.add("After Spliting the reservation folio Paid are not validated : " + FilioPaid);
			reslogger.info("After Spliting the reservation folio Paid are not validated : " + FilioPaid);
		}
		if (Double.compare(FilioBalance, FilioBal) == 0) {
			test_steps.add("After Spliting the reservation folio Balance are validated : " + FilioBalance);
			reslogger.info("After Spliting the reservation folio Balance are validated : " + FilioBalance);
		} else {
			test_steps.add("After Spliting the reservation folio Balance are validated : " + FilioBalance);
			reslogger.info("After Spliting the reservation folio Balance are validated : " + FilioBalance);
		}
	}

	public void velidate_MRB_TripSummaryAfterSplit(WebDriver driver, ArrayList test_steps, ArrayList al,
			String TripSummaryRoomCharges, String TripSummaryTaxes, String TripSummaryIncidentals,
			String TripSummaryTripTotal, String TripSummaryPaid, String TripSummaryBalance) {
		test_steps.add("******************* Validating TripSummary fields after split**********************");
		reslogger.info("******************* Validating TripSummary fields after split**********************");

		TripSummaryRoomCharges = TripSummaryRoomCharges.trim();
		TripSummaryRoomCharges = TripSummaryRoomCharges.substring(1, TripSummaryRoomCharges.length());
		TripSummaryRoomCharges = TripSummaryRoomCharges.trim();
		Double TripSummRoom = Double.parseDouble(TripSummaryRoomCharges);

		TripSummaryTaxes = TripSummaryTaxes.trim();
		TripSummaryTaxes = TripSummaryTaxes.substring(1, TripSummaryTaxes.length());
		TripSummaryTaxes = TripSummaryTaxes.trim();
		Double TripSummTax = Double.parseDouble(TripSummaryTaxes);

		TripSummaryIncidentals = TripSummaryIncidentals.trim();
		TripSummaryIncidentals = TripSummaryIncidentals.substring(1, TripSummaryIncidentals.length());
		TripSummaryIncidentals = TripSummaryIncidentals.trim();
		Double TripSummInci = Double.parseDouble(TripSummaryIncidentals);

		TripSummaryTripTotal = TripSummaryTripTotal.trim();
		TripSummaryTripTotal = TripSummaryTripTotal.substring(1, TripSummaryTripTotal.length());
		TripSummaryTripTotal = TripSummaryTripTotal.trim();
		Double TripSummTot = Double.parseDouble(TripSummaryTripTotal);

		TripSummaryPaid = TripSummaryPaid.trim();
		TripSummaryPaid = TripSummaryPaid.substring(1, TripSummaryPaid.length());
		TripSummaryPaid = TripSummaryPaid.trim();
		Double TripSummPaid = Double.parseDouble(TripSummaryPaid);

		TripSummaryBalance = TripSummaryBalance.trim();
		TripSummaryBalance = TripSummaryBalance.substring(1, TripSummaryBalance.length());
		TripSummaryBalance = TripSummaryBalance.trim();
		Double TripSummBal = Double.parseDouble(TripSummaryBalance);

		int count = al.size();
		ArrayList al1;
		Double FilioRoomCharges = (double) 0, FilioIncidentals = (double) 0, FilioTaxes = (double) 0,
				FilioTripTotal = (double) 0, FilioPaid = (double) 0, FilioBalance = (double) 0;

		for (int i = 0; i < count; i++) {
			if (i == (count - 1)) {
				al1 = (ArrayList) al.get(i);
				FilioRoomCharges = FilioRoomCharges + Double.parseDouble(al1.get(0).toString());
				FilioIncidentals = FilioIncidentals + Double.parseDouble(al1.get(1).toString());
				FilioTaxes = FilioTaxes + Double.parseDouble(al1.get(2).toString());
				FilioTripTotal = FilioTripTotal + Double.parseDouble(al1.get(3).toString());
				FilioPaid = FilioPaid + Double.parseDouble(al1.get(4).toString());
				FilioBalance = FilioBalance + Double.parseDouble(al1.get(5).toString());
			}
		}

		String TripSummaryRoomChrg = get_TripSummaryRoomChargesWithCurrency(driver, test_steps);
		String TripSummaryTax = get_TripSummaryTaxesWithCurrency(driver, test_steps);
		String TripSummaryInci = get_TripSummaryInceidentalsWithCurrency(driver, test_steps);
		String TripSummaryTripTot = get_TripSummaryTripTotalChargesWithCurrency(driver, test_steps);
		String TripSummaryPad = get_TripSummaryPaidWithCurrency(driver, test_steps);
		String TripSummaryBal = get_TripSummaryBalanceWithCurrency(driver, test_steps);

		TripSummaryRoomChrg = TripSummaryRoomChrg.trim();
		TripSummaryRoomChrg = TripSummaryRoomChrg.substring(1, TripSummaryRoomChrg.length());
		TripSummaryRoomChrg = TripSummaryRoomChrg.trim();
		Double TripSummRm = Double.parseDouble(TripSummaryRoomChrg);

		TripSummaryTax = TripSummaryTax.trim();
		TripSummaryTax = TripSummaryTax.substring(1, TripSummaryTax.length());
		TripSummaryTax = TripSummaryTax.trim();
		Double TripSummTx = Double.parseDouble(TripSummaryTax);

		TripSummaryInci = TripSummaryInci.trim();
		TripSummaryInci = TripSummaryInci.substring(1, TripSummaryInci.length());
		TripSummaryInci = TripSummaryInci.trim();
		Double TripSummIncid = Double.parseDouble(TripSummaryInci);

		TripSummaryTripTot = TripSummaryTripTot.trim();
		TripSummaryTripTot = TripSummaryTripTot.substring(1, TripSummaryTripTot.length());
		TripSummaryTripTot = TripSummaryTripTot.trim();
		Double TripSummTota = Double.parseDouble(TripSummaryTripTot);

		TripSummaryPad = TripSummaryPad.trim();
		TripSummaryPad = TripSummaryPad.substring(1, TripSummaryPad.length());
		TripSummaryPad = TripSummaryPad.trim();
		Double TripSummPad = Double.parseDouble(TripSummaryPad);

		TripSummaryBal = TripSummaryBal.trim();
		TripSummaryBal = TripSummaryBal.substring(1, TripSummaryBal.length());
		TripSummaryBal = TripSummaryBal.trim();
		Double TripSummBala = Double.parseDouble(TripSummaryBal);

		/*
		 * reslogger.info("FilioRoomCharges :"+FilioRoomCharges);
		 * reslogger.info("FilioIncidentals : "+FilioIncidentals);
		 * reslogger.info("FilioTaxes : "+FilioTaxes);
		 * reslogger.info("FilioTripTotal : "+FilioTripTotal);
		 * reslogger.info("FilioPaid : "+FilioPaid);
		 * reslogger.info("FilioBalance : "+FilioBalance);
		 * reslogger.info("TripSummRoom : "+TripSummRoom);
		 * reslogger.info("TripSummTax : "+TripSummTax);
		 * reslogger.info("TripSummInci : "+TripSummInci);
		 * reslogger.info("TripSummTot : "+TripSummTot);
		 * reslogger.info("TripSummPaid : "+TripSummPaid);
		 * reslogger.info("TripSummBal : "+TripSummBal);
		 */

		if (Double.compare((TripSummRoom - FilioRoomCharges), TripSummRm) == 0) {
			test_steps.add("TripSummary RoomCharges are verified : " + TripSummRm);
			reslogger.info("TripSummary RoomCharges are verified : " + TripSummRm);
		} else {
			test_steps.add("TripSummary RoomCharges are not verified : " + TripSummRm);
			reslogger.info("TripSummary RoomCharges are not verified : " + TripSummRm);
		}

		if (Double.compare((TripSummTax - FilioTaxes), TripSummTx) == 0) {
			test_steps.add("TripSummaryTaxes are verified : " + TripSummTx);
			reslogger.info("TripSummaryTaxes are verified : " + TripSummTx);
		} else {
			test_steps.add("TripSummaryTaxes are not verified : " + TripSummTx);
			reslogger.info("TripSummaryTaxes are not verified : " + TripSummTx);
		}
		if (Double.compare((TripSummInci - FilioIncidentals), TripSummIncid) == 0) {
			test_steps.add("TripSummary Incidental are verified : " + TripSummIncid);
			reslogger.info("TripSummary Incidental are verified : " + TripSummIncid);
		} else {
			test_steps.add("TripSummary Incidental are not verified : " + TripSummIncid);
			reslogger.info("TripSummary Incidental are not verified : " + TripSummIncid);
		}
		if (Double.compare((TripSummTot - FilioTripTotal), TripSummTota) == 0) {
			test_steps.add("TripSummary TripTotal are verified : " + TripSummTota);
			reslogger.info("TripSummary TripTotal are verified : " + TripSummTota);
		} else {
			test_steps.add("TripSummary TripTotal are not verified : " + TripSummTota);
			reslogger.info("TripSummary TripTotal are not verified : " + TripSummTota);
		}
		if (Double.compare((TripSummPaid - FilioPaid), TripSummPad) == 0) {
			test_steps.add("TripSummary Paid verified : " + TripSummPad);
			reslogger.info("TripSummary Paid verified : " + TripSummPad);
		} else {
			test_steps.add("TripSummary Paid not verified : " + TripSummPad);
			reslogger.info("TripSummary Paid not verified : " + TripSummPad);
		}
		if (Double.compare((TripSummBal - FilioBalance), TripSummBala) == 0) {
			test_steps.add("TripSummary Balance are verified : " + TripSummBala);
			reslogger.info("TripSummary Balance are verified : " + TripSummBala);
		} else {
			test_steps.add("TripSummary Balance are not verified : " + TripSummBala);
			reslogger.info("TripSummary Balance are not verified : " + TripSummBala);
		}
	}

	public void verify_MRB_FolioAfterSplitResSecondRes(WebDriver driver, ArrayList test_steps, ArrayList RoomAbbri,
			String IsAssign, ArrayList Rooms) {
		test_steps.add(
				"******************* MRB Folio Creation verification After Split for second reservation **********************");
		reslogger.info(
				"******************* MRB Folio Creation verification After Split for second reservation **********************");

		String folioSize = "//button[contains(@title,'Guest')]";
		Wait.WaitForElement(driver, folioSize);

		String option = "//li//span[text()='Guest Folio']";
		if (driver.findElements(By.xpath(option)).size() > 0) {
			test_steps.add("Folio present : Guest Folio");
			reslogger.info("Folio present : Guest Folio");

			String roomCahrge = "//span[text()='Room Charge']";
			if (driver.findElements(By.xpath(roomCahrge)).size() > 0) {
				test_steps.add("Room Charge Line Item  is present : Guest Folio");
				reslogger.info("Room Charge Line Item  is present : Guest Folio");
			} else {
				test_steps.add("Room Charge Line Item  is not present : Guest Folio");
				reslogger.info("Room Charge Line Item  is not present : Guest Folio");
			}
		} else {
			test_steps.add("Guest folio not present");
			reslogger.info("Guest folio not present");
		}
	}

	public void verify_SecondaryResFolio(WebDriver driver, ArrayList test_steps, ArrayList al)
			throws NumberFormatException, InterruptedException {

		test_steps.add(
				"******************* MRB Folio verification After Split for second reservation **********************");
		reslogger.info(
				"******************* MRB Folio verification After Split for second reservation **********************");

		int count = al.size();
		ArrayList al1;
		Double FilioRoomCharges = (double) 0, FilioIncidentals = (double) 0, FilioTaxes = (double) 0,
				FilioTripTotal = (double) 0, FilioPaid = (double) 0, FilioBalance = (double) 0;

		for (int i = 0; i < count; i++) {
			if (i == (count - 1)) {
				reslogger.info(al.get(i));
				al1 = (ArrayList) al.get(i);
				FilioRoomCharges = FilioRoomCharges + Double.parseDouble(al1.get(0).toString());
				FilioIncidentals = FilioIncidentals + Double.parseDouble(al1.get(1).toString());
				FilioTaxes = FilioTaxes + Double.parseDouble(al1.get(2).toString());
				FilioTripTotal = FilioTripTotal + Double.parseDouble(al1.get(3).toString());
				FilioPaid = FilioPaid + Double.parseDouble(al1.get(4).toString());
				FilioBalance = FilioBalance + Double.parseDouble(al1.get(5).toString());
			}
		}

		Double FilioRoomChrg = Double.parseDouble(get_RoomCharge(driver, test_steps));
		Double FilioInci = Double.parseDouble(get_Inceidentals(driver, test_steps));
		Double FilioTax = Double.parseDouble(get_Taxes(driver, test_steps));
		Double FilioTripTot = Double.parseDouble(get_TotalCharges(driver, test_steps));
		Double FilioPad = Double.parseDouble(get_Payments(driver, test_steps));
		Double FilioBal = Double.parseDouble(get_Balance(driver, test_steps));

		if (Double.compare(FilioRoomChrg, FilioRoomCharges) == 0) {
			test_steps.add(
					"After Spliting the secondary reservation folio RoomCharges are validated : " + FilioRoomCharges);
			reslogger.info(
					"After Spliting the secondary reservation folio RoomCharges are validated : " + FilioRoomCharges);
		} else {
			test_steps.add("After Spliting the secondary reservation folio RoomCharges are not validated : "
					+ FilioRoomCharges);
			reslogger.info("After Spliting the secondary reservation folio RoomCharges are not validated : "
					+ FilioRoomCharges);
		}

		if (Double.compare(FilioTaxes, FilioTax) == 0) {
			test_steps.add("After Spliting the secondary reservation folio taxes are validated : " + FilioTaxes);
			reslogger.info("After Spliting the secondary reservation folio taxes are validated : " + FilioTaxes);
		} else {
			test_steps.add("After Spliting the secondary reservation folio taxes are not validated : " + FilioTaxes);
			reslogger.info("After Spliting the secondary reservation folio taxes are not validated : " + FilioTaxes);
		}
		if (Double.compare(FilioIncidentals, FilioInci) == 0) {
			test_steps.add(
					"After Spliting the secondary reservation folio Incidental are validated : " + FilioIncidentals);
			reslogger.info(
					"After Spliting the secondary reservation folio Incidental are validated : " + FilioIncidentals);
		} else {
			test_steps.add("After Spliting the secondary reservation folio Incidental are not validated : "
					+ FilioIncidentals);
			reslogger.info("After Spliting the secondary reservation folio Incidental are not validated : "
					+ FilioIncidentals);
		}
		if (Double.compare(FilioTripTotal, FilioTripTot) == 0) {
			test_steps
					.add("After Spliting the secondary reservation folio TripTotal are validated : " + FilioTripTotal);
			reslogger
					.info("After Spliting the secondary reservation folio TripTotal are validated : " + FilioTripTotal);
		} else {
			test_steps.add(
					"After Spliting the secondary reservation folio TripTotal are not validated : " + FilioTripTotal);
			reslogger.info(
					"After Spliting the secondary reservation folio TripTotal are not validated : " + FilioTripTotal);
		}
		if (Double.compare(FilioPaid, FilioPad) == 0) {
			test_steps.add("After Spliting the secondary reservation folio Paid are validated : " + FilioPaid);
			reslogger.info("After Spliting the secondary reservation folio Paid are validated : " + FilioPaid);
		} else {
			test_steps.add("After Spliting the secondary reservation folio Paid are not validated : " + FilioPaid);
			reslogger.info("After Spliting the secondary reservation folio Paid are not validated : " + FilioPaid);
		}
		if (Double.compare(FilioBalance, FilioBal) == 0) {
			test_steps.add("After Spliting the secondary reservation folio Balance are validated : " + FilioBalance);
			reslogger.info("After Spliting the secondary reservation folio Balance are validated : " + FilioBalance);
		} else {
			test_steps.add("After Spliting the secondary reservation folio Balance are validated : " + FilioBalance);
			reslogger.info("After Spliting the secondary reservation folio Balance are validated : " + FilioBalance);
		}
	}

	public void veerify_SplitResFromExistringresInHistory(WebDriver driver, ArrayList test_steps, String reservation) {
		String res = "//span[contains(text(),'Split a room from existing reservation with Confirmation Number: "
				+ reservation.trim() + "')]";
		if (driver.findElement(By.xpath(res)).isDisplayed()) {
			test_steps.add("Split a room from existing reservation with Confirmation Number: " + reservation.trim()
					+ "')] verified in History tab : " + reservation);
			reslogger.info("Split a room from existing reservation with Confirmation Number: " + reservation.trim()
					+ "')] verified in History tab : " + reservation);
		} else {
			test_steps.add("Split a room from existing reservation with Confirmation Number: " + reservation.trim()
					+ "')] not found in History tab : " + reservation);
			reslogger.info("Split a room from existing reservation with Confirmation Number: " + reservation.trim()
					+ "')] not found in History tab : " + reservation);
		}
	}

	public void verify_RoomNumberForSecondaryRes(WebDriver driver, ArrayList test_steps, ArrayList Rooms,
			String roomNumber) {

		test_steps.add("******************* Secondary reservation room number verification **********************");
		reslogger.info("******************* Secondary reservation room number verification **********************");
		int count = Rooms.size();
		String room = (String) Rooms.get(count - 1);

		String[] st = room.split(":");
		room = st[1];
		room = room.trim();
		reslogger.info(room);
		reslogger.info(roomNumber);
		if (room.equalsIgnoreCase(roomNumber)) {
			test_steps.add("Room number is verified for secondary reservation : " + room);
			reslogger.info("Room number is verified for secondary reservation : " + room);
		} else {
			test_steps.add("Room number is not verified for secondary reservation : " + room);
			reslogger.info("Room number is not verified for secondary reservation : " + room);
		}
	}

	public void change_ReservationStatus(WebDriver driver, ArrayList test_steps, String ResStatus)
			throws InterruptedException {

		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			JavascriptExecutor jse = (JavascriptExecutor) driver;

			String expand = "//div[@class='dropdown ir-res-status']//span";
			Wait.WaitForElement(driver, expand);
			WebElement expandElement = driver.findElement(By.xpath(expand));
			Wait.explicit_wait_elementToBeClickable(expandElement, driver);
			try {
				expandElement.click();
			} catch (Exception e) {
				JavascriptExecutor executor = (JavascriptExecutor) driver;
				executor.executeScript("arguments[0].click();", expandElement);
			}
			// String status = "//div[@class='ng-statusChnage ir-statusMenu
			// ul']//span//ul//span[text()='" + ResStatus+ "']";
			String status = "//div[contains(@class,'res-status')]//ul//li[text()='" + ResStatus + "']";
			try {
				Wait.WaitForElement(driver, status);
				driver.findElement(By.xpath(status)).click();
			} catch (Exception e) {
				JavascriptExecutor executor = (JavascriptExecutor) driver;
				executor.executeScript("arguments[0].click();", driver.findElement(By.xpath(status)));
			}
			test_steps.add("Reservation status changes to : " + ResStatus);
			reslogger.info("Reservation status changes to : " + ResStatus);
			if (ResStatus.equals("Cancel")) {
				Utility.app_logs.info("ResStatus: " + ResStatus);
				Wait.WaitForElement(driver, OR_Reservation.CancelReservation_Reason);
				Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CancelReservation_Reason), driver);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelReservation_Reason), driver);
				res.CancelReservation_Reason.sendKeys(ResStatus);
				test_steps.add("Cancel Reason : " + ResStatus);
				reslogger.info("Cancel Reason: " + ResStatus);
				Wait.WaitForElement(driver, OR_Reservation.CancelReservation_CofirmCancellation);
				Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CancelReservation_CofirmCancellation), driver);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelReservation_CofirmCancellation), driver);
				Utility.ScrollToElement(res.CancelReservation_CofirmCancellation, driver);
				res.CancelReservation_CofirmCancellation.click();
				test_steps.add("Confirm Cancel Button Clicked");
				reslogger.info("Confirm Cancel Button Clicked");
			}
			String loading = "(//div[@class='ir-loader-in'])";
			int count = 0;
			while (true) {
				if (driver.findElements(By.xpath(loading)).size() > 4) {
					break;
				} else if (count == 20) {
					break;
				} else {
					count++;
					Wait.wait2Second();

				}
				reslogger.info("Waited to loading symbol");
			}
		} catch (Exception e) {
			reslogger.info(e);
		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickCheckInAllButton ' Description: Click on Check In All
	 * Button ' Input parameters: String ' Created By: Gangotri ' Created On: June 3
	 * 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void clickCheckInAllButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckInAllButton);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_CheckInAllButton, driver);
		Utility.ScrollToElement(res.CP_Reservation_CheckInAllButton, driver);
		res.CP_Reservation_CheckInAllButton.click();
		test_steps.add("Click Check In All Button");
		reslogger.info("Click Check In All Button");

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickCheckInButton ' Description: Click on Check In Button '
	 * Input parameters: String ' Created By: Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void clickCheckInButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckInButton);
		Utility.ScrollToElement(res.CP_Reservation_CheckInButton, driver);
		res.CP_Reservation_CheckInButton.click();
		test_steps.add("Click Check In  Button");
		reslogger.info("Click Check In  Button");
		verifySpinerLoading(driver);
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickCheckOutAllButton ' Description: Click on Check Out All
	 * Button ' Input parameters: String ' Created By: Gangotri ' Created On: June 3
	 * 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void clickCheckOutAllButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_ReservationStatusCheckOutAllButton);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ReservationStatusCheckOutAllButton, driver);
		Utility.ScrollToElement(res.CP_Reservation_ReservationStatusCheckOutAllButton, driver);
		res.CP_Reservation_ReservationStatusCheckOutAllButton.click();
		test_steps.add("Click Check Out All  Button");
		reslogger.info("Click Check Out All Button");

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickCheckOutButton ' Description: Click on Check Out Button '
	 * Input parameters: String ' Created By: Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void clickCheckOutButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_ReservationStatusCheckOutButton);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ReservationStatusCheckOutButton, driver);
//		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_Reservation_ReservationStatusCheckOutButton),
//				driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_Reservation_ReservationStatusCheckOutButton),
				driver);
		Utility.ScrollToElement(res.CP_Reservation_ReservationStatusCheckOutButton, driver);
		res.CP_Reservation_ReservationStatusCheckOutButton.click();
		test_steps.add("Click Check Out  Button");
		reslogger.info("Click Check Out  Button");

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyCheckINStayInfo ' Description: Verify Stay Info details
	 * on CheckIn Window ' Input parameters: String ' Created By: Gangotri ' Created
	 * On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> verifyNotesCopiedOrNot(WebDriver driver, ArrayList<String> test_steps, String NoteType,
			String Subject, String Description, boolean exist) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		// Wait.explicit_wait_visibilityof_webelement(res.NotesTypes.get(0), driver);
		int Size = res.NotesTypes.size();
		reslogger.info("Added Notes Size : " + Size);
		int lineNumber = Size - 1;
		reslogger.info("Expected Type : " + NoteType);

		reslogger.info("Expected Subject : " + Subject);
		reslogger.info("Expected Description : " + Description);

		boolean found = false;
		for (lineNumber = Size - 1; lineNumber >= 0; lineNumber--) {
			reslogger.info("LineNumber : " + lineNumber);
			reslogger.info("Note Type : " + res.NotesTypes.get(lineNumber).getText());

			reslogger.info("Subject : " + res.NotesSubject.get(lineNumber).getText());
			reslogger.info("Description : " + res.NotesDescription.get(lineNumber).getText());

			if (res.NotesTypes.get(lineNumber).getText().equals(NoteType)

					&& res.NotesSubject.get(lineNumber).getText().contains(Subject)
					&& res.NotesDescription.get(lineNumber).getText().equals(Description)) {
				found = true;
				break;
			}
		}
		assertEquals(found, exist,
				"FAIL - Note having Subject : " + Subject + " Not in Required visibility formr" + "<br>"
						+ "<a href='https://innroad.atlassian.net/browse/NG-11292'>"
						+ "Click here to open JIRA: NG-11292</a>");

		return test_steps;
	}

	public void checkoutReservationWithPayment(WebDriver driver) throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		elementReservation.CheckOut.click();
		generatGuestReportToggle(driver, test_steps, "No");
		Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(OR_Reservation.ProceedToCheckOutPayment)));
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.Log), driver, 60);
		// Utility.clickThroughJavaScript(driver, elementReservation.Log);
		Wait.wait10Second();
		elementReservation.Log.click();
		Wait.wait10Second();
		Wait.waitForElementByXpath(driver, "//div[@class='col-md-12 text-right']/button[text()='CLOSE']");
		driver.findElement(By.xpath("//div[@class='col-md-12 text-right']/button[text()='CLOSE']")).click();
		Wait.wait10Second();
		String ReservationStatus = elementReservation.ReservationCurrentStatus.getText();

		if (ReservationStatus.equalsIgnoreCase("DEPARTED")) {

			System.out.println("Successfully changed Reservation status to DEPARTED");
		} else {
			System.out.println("Unable to change Reservation status to DEPARTED");
		}
	}

	public void verifyCheckINStayInfoMRB(WebDriver driver, ArrayList test_steps, String CheckInDate,
			String CheckOutDate, String Adults, String Children, String RoomClass, List<String> RoomCharges,
			String Salutation, String GuestName, String LastName, String RatePlan) throws Exception {

		List<String> checkInDate = Arrays.asList(CheckInDate.split("\\|"));
		List<String> checkOutDate = Arrays.asList(CheckOutDate.split("\\|"));
		List<String> adults = Arrays.asList(Adults.split("\\|"));
		List<String> children = Arrays.asList(Children.split("\\|"));
		List<String> roomClass = Arrays.asList(RoomClass.split("\\|"));
		List<String> salutation = Arrays.asList(Salutation.split("\\|"));
		List<String> guestFName = Arrays.asList(GuestName.split("\\|"));
		List<String> guestLName = Arrays.asList(LastName.split("\\|"));
		List<String> ratePlan = Arrays.asList(RatePlan.split("\\|"));
		String[] checkIn, checkInSplit;
		String checkInMonth = "";
		SimpleDateFormat simpleDateformat;
		Date now;
		int Nights = 0;
		for (int i = 0; i < checkInDate.size(); i++) {
			SimpleDateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");
			Date dateObj1 = format1.parse(CheckInDate);
			Date dateObj2 = format1.parse(CheckOutDate);
			long diff = dateObj2.getTime() - dateObj1.getTime();
			Nights = (int) (diff / (24 * 60 * 60 * 1000));
			reslogger.info("difference between days: " + Nights);
			checkIn = checkInDate.get(i).split("/");
			if (checkIn[0].charAt(0) == '0') {
				checkIn[0] = checkIn[0].replace("" + checkIn[0].charAt(0), "");
			}
			checkInMonth = Utility.get_Month(checkInDate.get(i));
			String checkInDays = checkInMonth + " " + checkIn[0] + ", " + checkIn[2];
			String checkInDay = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='checkin']/span[text()='"
					+ checkInDays + "']";
			if (driver.findElement(By.xpath(checkInDay)).isDisplayed()) {
				test_steps.add("Stay Info checkin date verified : <b>" + checkInDays + "</b>");
				reslogger.info("Stay Info checkin date verified : " + checkInDays);
			} else {
				test_steps.add("Stay Info checkin date not found : <b>" + checkInDays + "</b>");
				reslogger.info("Stay Info checkin date not found : " + checkInDays);
			}
			now = new Date(checkIn[1] + "/" + checkIn[0] + "/" + checkIn[2]);
			simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the day of
			// the week
			// abbreviated
			simpleDateformat = new SimpleDateFormat("EEEE"); // the day of the
			String dayofCheckIn = simpleDateformat.format(now); // week spelled

			String chckInday = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='checkin']//span[text()='"
					+ dayofCheckIn.trim() + "']";
			if (driver.findElement(By.xpath(chckInday)).isDisplayed()) {
				test_steps.add(" Stay Info checkin day verified : <b>" + dayofCheckIn + "</b>");
				reslogger.info(" Stay Info checkin day verified : " + dayofCheckIn);
			} else {
				test_steps.add(" Stay Info checkin day not found : <b>" + dayofCheckIn + "</b>");
				reslogger.info(" Stay Info checkin day not found : " + dayofCheckIn);
			}

		}

		for (int i = 0; i < checkOutDate.size(); i++) {
			String[] checkOut = checkOutDate.get(i).split("/");

			if (checkOut[0].charAt(0) == '0') {
				checkOut[0] = checkOut[0].replace("" + checkOut[0].charAt(0), "");
			}
			String checkOutMonth = Utility.get_Month(checkOutDate.get(i));
			String[] checkOutSplit = checkOut[2].split("\\|");
			String checkOutDays = checkOutMonth + " " + checkOut[0] + ", " + checkOut[2];
			String checkoutDay = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='checkout']/span[text()='"
					+ checkOutDays + "']";
			if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
				test_steps.add(" Stay Info checkout date verified : <b>" + checkOutDays + "</b>");
				reslogger.info(" Stay Info checkout date verified : " + checkOutDays);
			} else {
				test_steps.add(" Stay Info checkout date not found : <b>" + checkOutDays + "</b>");
				reslogger.info(" Stay Info checkout date not found : " + checkOutDays);
			}

			now = new Date(checkOut[1] + "/" + checkOut[0] + "/" + checkOut[2]);
			simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the day of
			// the week
			// abbreviated
			simpleDateformat = new SimpleDateFormat("EEEE"); // the day of the
			// week spelled
			// out
			// completely
			String dayofCheckOut = simpleDateformat.format(now);
			String chkOutDay = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='checkout']//span[text()='"
					+ dayofCheckOut.trim() + "']";
			if (driver.findElement(By.xpath(chkOutDay)).isDisplayed()) {
				test_steps.add(" Stay Info checkout day verified : <b>" + dayofCheckOut + "</b>");
				reslogger.info("Stay Info checkout day verified : " + dayofCheckOut);
			} else {
				test_steps.add(" Stay Info checkout day not found : <b>" + dayofCheckOut + "</b>");
				reslogger.info(" Stay Info checkout day not found : " + dayofCheckOut);
			}

			String nights = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='noofnights']/span[text()='"
					+ Nights + "N']";
			if (driver.findElement(By.xpath(nights)).isDisplayed()) {
				test_steps.add(" Stay Info Nights verified : <b>" + Nights + "N</b>");
				reslogger.info(" Stay Info Nights verified : " + Nights + "N");
			} else {
				test_steps.add(" Stay Info Nights not found : <b>" + Nights + "N</b>");
				reslogger.info(" Stay Info Nights not found : " + Nights + "N");
			}
		}

		for (int i = 0; i < adults.size(); i++) {
			String adult = "//div[contains(@class,'ir-checkin-stay-info')]/..//div//span[contains(@data-bind,'numberOfAdults')]";
			adult = driver.findElement(By.xpath(adult)).getText().trim();
			if (adult.equals(adults.get(i).trim())) {
				test_steps.add(" Stay Info Adults verified : <b>" + adults.get(i) + "</b>");
				reslogger.info(" Stay Info Adults verified : " + adults.get(i));
			} else {
				test_steps.add(" Stay Info Adults not found : <b>" + adults.get(i) + "</b>");
				reslogger.info(" Stay Info Adults not found : " + adults.get(i));
			}

		}
		for (int i = 0; i < children.size(); i++) {
			String childrens = "//div[contains(@class,'ir-guestInfo')]/div/span//span[contains(@data-bind,'text: $data.numberOfChildren')]";
			List<WebElement> childrensList = driver.findElements(By.xpath(childrens));
			if (childrensList.get(i).getText().trim().contains(children.get(i))) {
				test_steps.add(" Stay Info Children verified : <b>" + children.get(i) + "</b>");
				reslogger.info(" Stay Info Children verified : " + children.get(i));
			} else {
				test_steps.add(" Stay Info Children not found : <b>" + children.get(i) + "</b>");
				reslogger.info(" Stay Info Children not found : " + children.get(i));
			}
		}

		for (int i = 0; i < roomClass.size(); i++) {
			String roomClasss1 = "//div[contains(@class,'ir-checkin-stay-info')]/..//div//label[contains(@data-bind,'roomClassName')]";
			List<WebElement> roomClasss = driver.findElements(By.xpath(roomClasss1));
			if (roomClasss.get(i).getText().trim().equals((roomClass.get(i) + ":").trim())) {
				test_steps.add(" Stay Info RoomClass verified : <b>" + roomClass.get(i) + "</b>");
				reslogger.info(" Stay Info RoomClass verified : " + roomClass.get(i));
			} else {
				test_steps.add(" Stay Info RoomClass not found : <b>" + roomClass.get(i) + "</b>");
				reslogger.info(" Stay Info RoomClass not found : " + roomClass.get(i));
			}
		}

		for (int i = 0; i < salutation.size(); i++) {
			String guestName = "//div[contains(@class,'ir-checkin-stay-info')]/..//span[contains(@data-bind,'guestNameInSync')][contains(text(),'"
					+ salutation.get(i) + " " + guestFName.get(i) + " " + guestLName.get(i) + "')]";
			WebElement element = driver.findElement(By.xpath(guestName));

			if (element.isDisplayed()) {
				test_steps.add(" Stay Info Guest Name verified : <b>" + salutation.get(i) + " " + guestFName.get(i)
						+ " " + guestLName.get(i) + "</b>");
				reslogger.info(" Stay Info Guest Name verified : " + salutation.get(i) + " " + guestFName.get(i) + " "
						+ guestLName.get(i));
			} else {
				test_steps.add(" Stay Info Guest Name not found : <b>" + salutation.get(i) + " " + guestFName.get(i)
						+ " " + guestLName.get(i) + "</b>");
				reslogger.info(" Stay Info Guest Name not found : " + salutation.get(i) + " " + guestFName.get(i) + " "
						+ guestLName.get(i));
			}
		}

		for (int i = 0; i < ratePlan.size(); i++) {
			String ratePlans1 = "//div[contains(@class,'ir-checkin-stay-info')]/..//span[contains(@data-bind,'ratePlanName')]";
			List<WebElement> ratePlans = driver.findElements(By.xpath(ratePlans1));
			if (ratePlans.get(i).getText().trim().equals(ratePlan.get(i).trim())) {
				test_steps.add(" Stay Info RatePlan verified :<b> " + ratePlan.get(i) + "</b>");
				reslogger.info(" Stay Info RatePlan verified : " + ratePlan.get(i));
			} else {
				test_steps.add(" Stay Info RatePlan not found : <b>" + ratePlan.get(i) + "</b>");
				reslogger.info(" Stay Info RatePlan not found : " + ratePlan.get(i));
			}
		}

		String roomCharge1 = "//div[contains(@class,'ir-checkin-stay-info')]/..//div//label[contains(@data-bind,'roomTotal ')]";
		List<WebElement> roomCharge = driver.findElements(By.xpath(roomCharge1));

		for (int i = 0; i < roomCharge.size(); i++) {
			if (roomCharge.get(i).getText().trim().equalsIgnoreCase(RoomCharges.get(i).trim())) {
				test_steps.add(" Stay Info RoomCharges verified : <b>" + RoomCharges.get(i).trim() + "</b>");
				reslogger.info(" Stay Info RoomCharges verified : " + RoomCharges.get(i).trim());
			} else {
				test_steps.add(" Stay Info RoomCharges not found : <b>" + RoomCharges.get(i).trim() + "</b>");
				reslogger.info(" Stay Info RoomCharges not found : " + RoomCharges.get(i).trim());
			}

		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyGuestContactInfo ' Description: Verify Guest Contact
	 * Infor on Check In Window ' Input parameters: String ' Created By: Gangotri '
	 * Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void verifyGuestContactInfo(WebDriver driver, ArrayList test_steps, String Salutation, String GuestName,
			String LastName, String Email, String Phone) {
		WebElement element;

		List<String> salutation = Arrays.asList(Salutation.split("\\|"));
		List<String> guestFName = Arrays.asList(GuestName.split("\\|"));
		List<String> guestLName = Arrays.asList(LastName.split("\\|"));
		List<String> email = Arrays.asList(Email.split("\\|"));
		List<String> phone = Arrays.asList(Phone.split("\\|"));
		for (int i = 0; i < salutation.size(); i++) {
			String test = salutation.get(i).toString().trim();
			String guestName = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'irFormattedProfileName')][contains(text(),'"
					+ salutation.get(i) + " " + guestFName.get(i) + "')]";
			element = driver.findElement(By.xpath(guestName));
			if (element.isDisplayed()) {
				test_steps.add(" Stay Info Primary Guest Name verified : <b>" + salutation.get(i) + " "
						+ guestFName.get(i) + "</b>");
				reslogger.info(
						" Stay Info Primary Guest Name verified : " + salutation.get(i) + " " + guestFName.get(i));
			} else {
				test_steps.add(" Stay Info Primary Guest Name not found : <b>" + salutation.get(i) + " "
						+ guestFName.get(i) + "</b>");
				reslogger.info(
						" Stay Info Primary Guest Name not found : " + salutation.get(i) + " " + guestFName.get(i));
			}
		}

		for (int i = 0; i < guestLName.size(); i++) {
			String lastName = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'LastName')][contains(text(),'"
					+ guestLName.get(i) + "')]";
			element = driver.findElement(By.xpath(lastName));
			if (element.isDisplayed()) {
				test_steps.add(" Stay Info Last Name verified : <b>" + guestLName.get(i) + "</b>");
				reslogger.info(" Stay Info Last Name verified : " + guestLName.get(i));
			} else {
				test_steps.add(" Stay Info Last Name not found : <b>" + guestLName.get(i) + "</b>");
				reslogger.info(" Stay Info Last Name not found : " + guestLName.get(i));
			}
		}
		if (Utility.validateString(Email)) {
			// List<String> email = Arrays.asList(Email.split("\\|"));
			for (int i = 0; i < email.size(); i++) {
				String emails = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'EmailAddress')][contains(text(),'"
						+ email.get(i) + "')]";
				element = driver.findElement(By.xpath(emails));
				if (element.isDisplayed()) {
					test_steps.add(" Stay Info Email verified : <b>" + email.get(i) + "</b>");
					reslogger.info(" Stay Info Email verified : " + email.get(i));
				} else {
					test_steps.add(" Stay Info Email not found : <b>" + email.get(i) + "</b>");
					reslogger.info(" Stay Info Email not found : " + email.get(i));
				}

			}
		}
		if (Utility.validateString(Email)) {
			// List<String> phone = Arrays.asList(Phone.split("\\|"));
			for (int i = 0; i < phone.size(); i++) {
				if (i == 0) {
					String extension = "1-(";
					String firstPhone = phone.get(i).substring(0, 3);
					String phoneBracket = firstPhone + ") ";
					String secondPhone = Phone.substring(3, 6);
					String lastPhone = Phone.substring(6, 10);
					String finalPhone = extension + phoneBracket + secondPhone + "-" + lastPhone;
					String phones = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'irFormattedPhoneNumber')][contains(text(),'"
							+ finalPhone + "')]";
					element = driver.findElement(By.xpath(phones));
					if (element.isDisplayed()) {
						test_steps.add(" Stay Info Phone verified : <b>" + finalPhone + "</b>");
						reslogger.info(" Stay Info Phone verified : " + finalPhone);
					} else {
						test_steps.add(" Stay Info Phone not found : <b>" + finalPhone + "</b>");
						reslogger.info(" Stay Info Phone not found : " + finalPhone);
					}
				} else {
					String phones = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'irFormattedPhoneNumber')][contains(text(),'"
							+ phone.get(i) + "')]";
					element = driver.findElement(By.xpath(phones));
					if (element.isDisplayed()) {
						test_steps.add(" Stay Info Phone verified : <b>" + phone.get(i) + "</b>");
						reslogger.info(" Stay Info Phone verified : " + phone.get(i));
					} else {
						test_steps.add(" Stay Info Phone not found : <b>" + phone.get(i) + "</b>");
						reslogger.info(" Stay Info Phone not found : " + phone.get(i));
					}
				}

			}
		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyGenerateGuestReportToggle ' Description: Verify Generate
	 * Guest Registration Toggle in CheckIn Window and Checkot Window ' Input
	 * parameters: String ' Created By: Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void verifyGenerateGuestReportToggle(WebDriver driver, ArrayList test_steps, boolean isFlagSetting)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait5Second();
		if (isFlagSetting) {
			boolean isExist = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggleOff));
			assertEquals(isExist, false, "Failed: to Verify Toggle");
			test_steps.add("Generate Guest Registration Toggle On");
			reslogger.info("Generate Guest Registration Toggle On");
		} else if (!isFlagSetting) {
			assertTrue(res.CP_Reservation_CheckIn_GuestRegistrationReportToggleOff.isEnabled(),
					"Failed: to Verify Toggle");
			test_steps.add("Generate Guest Registration Toggle Off");
			reslogger.info("Generate Guest Registration Toggle Off");

		}
	}

	public void cancelReservation(WebDriver driver, ArrayList test_steps) {
		String expand = "//div[@class='ng-statusChnage ir-statusMenu ul']//span[@class='dropdown dropdown-toggle ir-dropdown-span-status']";
		Wait.waitForElementToBeClickable(By.xpath(expand), driver);
		driver.findElement(By.xpath(expand)).click();
		String status = "//div[@class='ng-statusChnage ir-statusMenu ul']//span//ul//span[text()='Cancel']";
		Wait.waitForElementToBeClickable(By.xpath(status), driver);
		driver.findElement(By.xpath(status)).click();
		test_steps.add("Clicking on cancel reservation button");
		reslogger.info("Clicking on cancel reservation button");
	}

	public void noShowReservationsCp(WebDriver driver, boolean voidcheckedRequired, ArrayList test_steps)
			throws InterruptedException {
		String dropDown = "//i[contains(@data-bind,'ReservationUpdate')]";
		Wait.WaitForElement(driver, dropDown);
		driver.findElement(By.xpath(dropDown)).click();
		Wait.wait2Second();
		String noShow = "(//ul[contains(@data-bind,'ResStatuses')]/li//span[text()='No Show'])";
		Wait.WaitForElement(driver, noShow);
		driver.findElement(By.xpath(noShow)).click();
		reslogger.info("Clicking on noShow");
		test_steps.add("Clicking on noShow");
		Wait.waitForElementToBeInvisibile(By.xpath(noShow), driver);
		if (!voidcheckedRequired) {
			unCheckedVoidRoomChargeCheckBox(driver, test_steps);

		}
		try {
			String confirm = "//button[contains(text(),'CONFIRM NO SHOW')]";
			if (driver.findElement(By.xpath(confirm)).isDisplayed()) {
				Wait.WaitForElement(driver, confirm);
				// driver.findElement(By.xpath(confirm)).click();
				JavascriptExecutor executor = (JavascriptExecutor) driver;
				executor.executeScript("arguments[0].click();", driver.findElement(By.xpath(confirm)));
				reslogger.info("Clicking on confirm");
				test_steps.add("Clicking on confirm");
				String path = "//button[text()='Yes, Confirm no show & refund later']";
				Wait.wait5Second();
				if (driver.findElement(By.xpath(path)).isDisplayed()) {
					Wait.WaitForElement(driver, path);
					JavascriptExecutor executor1 = (JavascriptExecutor) driver;
					executor1.executeScript("arguments[0].click();", driver.findElement(By.xpath(path)));
				}

			} else {
				confirm = "//button[contains(text(),'PROCEED TO NO SHOW PAYMENT')]";
				Wait.WaitForElement(driver, confirm);
				// driver.findElement(By.xpath(confirm)).click();
				JavascriptExecutor executor1 = (JavascriptExecutor) driver;
				executor1.executeScript("arguments[0].click();", driver.findElement(By.xpath(confirm)));
				reslogger.info("Clicking on proceed to payment");
				test_steps.add("Clicking on proceed to payment");
				String pay = "//h4[text()='No Show Payment']/../../..//button[contains(text(),'Pay')]";
				Wait.WaitForElement(driver, pay);
				Wait.waitForElementToBeClickable(By.xpath(pay), driver);
				try {
					driver.findElement(By.xpath(pay)).click();
					Wait.waitForElementToBeInvisibile(By.xpath(pay), driver);
				} catch (Exception e) {
					JavascriptExecutor executor = (JavascriptExecutor) driver;
					executor.executeScript("arguments[0].click();", driver.findElement(By.xpath(pay)));
				}
				reslogger.info("Clicking on pay");
				test_steps.add("Clicking on pay");
			}
		} catch (Exception e) {
			reslogger.info("catch without handle");
		}

		String close = "";
		close = "//h4[contains(text(),'No Show Successful')]/../..//button[text()='CLOSE']";
		try {
			if (((driver.findElements(By.xpath(close)).size() > 0))) {

				Wait.WaitForElement(driver, close);
				driver.findElement(By.xpath(close)).click();
				reslogger.info("Clicking on close");
				test_steps.add("Clicking on close");
			} else {
				reslogger.info("Else close");
				close = "//h4[contains(text(),'No Show Successful')]/../..//button[text()='Close']";
				// Wait.WaitForElement(driver, close);
				Wait.waitForElementToBeVisibile(By.xpath(close), driver);
				driver.findElement(By.xpath(close)).click();
				reslogger.info("Clicking on close");
				test_steps.add("Clicking on close");
			}
		} catch (Exception e) {
			reslogger.info("catch in close");
		}

		String rollback = "//button[contains(text(),'Roll Back')]";
		Wait.WaitForElement(driver, rollback);
		reslogger.info("Reservation status is No Show");
		test_steps.add("Reservation status is No Show");
	}

	public void disableGuestReportToggle(WebDriver driver, ArrayList<String> test_steps, String resStatus) {
		if (resStatus.equalsIgnoreCase("CheckIn")) {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CheckIn_GuestRegistrationReportToggle), driver);
			res.CheckIn_GuestRegistrationReportToggle.click();
			test_steps.add("Disable CheckIn Generate Guest Registration Toggle");
			reslogger.info("Disable CheckIn Generate Guest Registration Toggle");
		} else {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CheckOut_GuestRegistrationReportToggle), driver);
			res.CheckOut_GuestRegistrationReportToggle.click();
			test_steps.add("Disable CheckOut Generate Guest Registration Toggle");
			reslogger.info("Disable CheckOut Generate Guest Registration Toggle");
		}
	}

	public void disableGenerateGuestReportToggle(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.waitForElementToBeClickable(
					By.xpath(OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggle), driver);
			Utility.ScrollToElement(res.CP_Reservation_CheckIn_GuestRegistrationReportToggle, driver);
			res.CP_Reservation_CheckIn_GuestRegistrationReportToggle.click();
			Wait.wait5Second();
		} catch (Exception e) {
//			generatGuestReportToggle(driver, test_steps,"No");
		}
		try {
			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggleOff);
			Wait.waitForElementToBeClickable(
					By.xpath(OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggleOff), driver);
		} catch (Exception e) {
			res.CP_Reservation_CheckIn_GuestRegistrationReportToggle.click();
		}
	}

	public boolean generatGuestReportToggle(WebDriver driver, ArrayList test_steps, String IsGuesRegistration)
			throws InterruptedException {
		boolean GenerateGuestStatementStatus = false;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean isDisabled = Utility.isElementPresent(driver,
				By.xpath(OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggleOff));
		if (IsGuesRegistration.contentEquals("Yes")) {
			if (isDisabled) {
				Utility.ScrollToElement(res.CP_Reservation_CheckIn_GuestRegistrationReportToggleOff, driver);
				res.CP_Reservation_CheckIn_GuestRegistrationReportToggleOff.click();
				// disableGenerateGuestReportToggle(driver, test_steps);
				test_steps.add("Enabled Generate Guest Registration Toggle");
				reslogger.info("Enabled Generate Guest Registration Toggle");
				GenerateGuestStatementStatus = true;
			} else {
				GenerateGuestStatementStatus = true;
				test_steps.add("Enabled Generate Guest Registration Toggle");
				reslogger.info("Enabled Generate Guest Registration Toggle");
			}
		} else if (IsGuesRegistration.contentEquals("No")) {
			if (isDisabled) {
				GenerateGuestStatementStatus = false;
				test_steps.add("Disabled Generate Guest Registration Toggle");
				reslogger.info("Disabled Generate Guest Registration Toggle");
			} else {
				GenerateGuestStatementStatus = false;
				Utility.ScrollToElement(res.CP_Reservation_CheckIn_GuestRegistrationReportToggle, driver);
				res.CP_Reservation_CheckIn_GuestRegistrationReportToggle.click();
				// disableGenerateGuestReportToggle(driver, test_steps);
			}
		}
		return GenerateGuestStatementStatus;

	}

	public boolean isRoomReserved = false;

	private void CheckINScreenRoomOccupiedWithOtherReservation(WebDriver driver, boolean isRoomBooked)
			throws InterruptedException {
		int count = 0;
		List<String> OccupiedRooms = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'occupying room')]";
		isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
		while (isRoomBooked) {
			reslogger.info("Occupied: " + path);

			isRoomReserved = true;
			WebElement element = driver.findElement(By.xpath(path));
			String textIs = element.getText();
			reslogger.info("<br>" + textIs);
			String[] nag = textIs.split("is occupying room ");
			List<String> roomNos = new ArrayList<String>();
			for (int i = 0; i < nag.length; i++) {
				if (!(i == 0) && !(i == (nag.length - 1))) {
					roomNos.add(nag[i].split("Reservation")[0].trim());
				}

				if ((i == nag.length - 1)) {
					roomNos.add(nag[i].split("Please")[0].trim());
				}

			}

			reslogger.info(roomNos);
			Utility.ScrollToElement(element, driver);

			res.CP_Reservation_CheckInOkButton.click();
			reslogger.info("Click Confirm CheckIn Button");
			String DropDownBoxPath = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//button[@title='"
					+ roomNos.get(count).toString() + "']";
			Wait.WaitForElement(driver, DropDownBoxPath);
			WebElement dropdownElement = driver.findElement(By.xpath(DropDownBoxPath));
			Utility.ScrollToElement(dropdownElement, driver);
			dropdownElement.click();
			reslogger.info("Click Drop Down Box");
			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckDropDownOpenRooms);
			Utility.ScrollToElement(res.CP_Reservation_CheckDropDownOpenRooms.get(0), driver);

			int count1 = res.CP_Reservation_CheckDropDownOpenRooms.size();
			reslogger.info("Count is: " + count1);
			Random random = new Random();
			randomNumber = random.nextInt(count1 - 1) + 1;
			reslogger.info("count : " + count1);
			reslogger.info("randomNumber : " + randomNumber);
			String roomNumber = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li["
					+ randomNumber + "]/a/span";
			reslogger.info(roomNumber);
			Wait.waitUntilPresenceOfElementLocated(roomNumber, driver);
			Utility.ScrollToElement(driver.findElement(By.xpath(roomNumber)), driver);
			driver.findElement(By.xpath(roomNumber)).click();
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			reslogger.info("Click Confirm CheckIn Button");
			isRoomBooked = Utility.isElementDisplayed(driver, By.xpath(path));
			boolean isRoomDirty = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckIn_ModelPopMsg));

			if (!isRoomBooked) {
				reslogger.info("Occuied Again");
				break;
			} else if (isRoomDirty) {
				ClickConfirmButtonOfDirtyPopupModel(driver, test_steps, isRoomDirty);
			}

		}

	}

	public boolean isRoomUnAssigned = false;

	private void CheckINScreenRoomUnAssigned(WebDriver driver, boolean isExist) throws InterruptedException {
		int count = 0;

		List<String> OccupiedRooms = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);

		while (isExist) {
			isRoomUnAssigned = true;
			Wait.wait5Second();
			Utility.ScrollToElement(res.CP_Reservation_CheckINUassigned.get(count), driver);
			res.CP_Reservation_CheckINUassigned.get(count).click();
			reslogger.info("Click UnAssigned Drop Down Box");
			String path = "//ir-stay-info-checkin//div[contains(@class,'dropdown-menu open')]//ul/li[@class='selected']/following-sibling::li/a/span[@class='text']";
			List<WebElement> ele = driver.findElements(By.xpath(path));
			int count1 = ele.size();
			reslogger.info("Count is: " + count1);
			Random random = new Random();
			randomNumber = random.nextInt(count1 - 1) + 1;
			reslogger.info("count : " + count1);
			reslogger.info("randomNumber : " + randomNumber);
			String roomNumber = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li["
					+ randomNumber + "]/a/span";
			Wait.WaitForElement(driver, roomNumber);
			Utility.ScrollToElement(driver.findElement(By.xpath(roomNumber)), driver);
			driver.findElement(By.xpath(roomNumber)).click();
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			reslogger.info("Click Confirm CheckIn Button");
			isExist = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
			reslogger.info("UnAssigned Exist or Not: " + isExist);
			boolean isRoomDirty = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckIn_ModelPopMsg));

			if (!isExist) {
				break;
			} else if (isRoomDirty) {
				ClickConfirmButtonOfDirtyPopupModel(driver, test_steps, isRoomDirty);
			}
		}
		int count2 = 0;
		String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'occupying room')]";
		Wait.wait5Second();
		boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));

		while (isRoomBooked) {
			reslogger.info("Occupied: " + path);
			WebElement element = driver.findElement(By.xpath(path));
			String textIs = element.getText();
			reslogger.info(textIs);
			String[] nag = textIs.split("is occupying room ");
			List<String> roomNos = new ArrayList<String>();
			for (int i = 0; i < nag.length; i++) {
				if (!(i == 0) && !(i == (nag.length - 1))) {
					roomNos.add(nag[i].split("Reservation")[0].trim());
				}

				if ((i == nag.length - 1)) {
					roomNos.add(nag[i].split("Please")[0].trim());
				}

			}

			reslogger.info(roomNos);
			Utility.ScrollToElement(element, driver);
			res.CP_Reservation_CheckInOkButton.click();
			String DropDownBoxPath = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//button[@title='"
					+ roomNos.get(count2).toString() + "']";
			Wait.WaitForElement(driver, DropDownBoxPath);
			WebElement dropdownElement = driver.findElement(By.xpath(DropDownBoxPath));
			Utility.ScrollToElement(dropdownElement, driver);
			dropdownElement.click();
			reslogger.info("Room is Dirty");
			int count1 = res.CP_Reservation_CheckDropDownOpenRooms.size();
			reslogger.info("Count is: " + count1);
			Random random = new Random();
			randomNumber = random.nextInt(count1 - 1) + 1;
			reslogger.info("count : " + count1);
			reslogger.info("randomNumber : " + randomNumber);
			String roomNumber = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li["
					+ randomNumber + "]/a/span";
			Wait.WaitForElement(driver, roomNumber);
			Utility.ScrollToElement(driver.findElement(By.xpath(roomNumber)), driver);
			driver.findElement(By.xpath(roomNumber)).click();
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			/*
			 * isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
			 */
			isRoomBooked = Utility.isElementDisplayed(driver, By.xpath(path));
			reslogger.info("Room is Again Dirty or Not: " + isRoomBooked);
			boolean isRoomDirty = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckIn_ModelPopMsg));

			if (!isRoomBooked) {

				break;
			} else if (isRoomDirty) {
				ClickConfirmButtonOfDirtyPopupModel(driver, test_steps, isRoomDirty);
			}
		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickOnProceedToCheckInPaymentButton ' Description: Clicking
	 * on Proceed to Check-In Payment Button ' Input parameters: String ' Created
	 * By: Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void clickOnProceedToCheckInPaymentButton(WebDriver driver, ArrayList<String> test_steps) throws Exception {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_Reservation_ConfirmCheckInPayment_Button_2),
				driver);
		Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckInPayment_Button_2, driver);

		res.CP_Reservation_ConfirmCheckInPayment_Button_2.click();
		test_steps.add("Clicking on  Proceed to Check-In Payment Button");
		reslogger.info("Clicking on Proceed to Check-In Payment Button");

		try {
			Wait.waitForToasterToBeVisibile(By.xpath("//*[@id='toast-container']//div[@class='toast-title']"), driver);
			String msg = Utility.getELementText(
					driver.findElement(By.xpath("//*[@id='toast-container']//div[@class='toast-title']")), false,
					"innerHTML");
			if (msg.toUpperCase().contains("FAIL")) {
				try {
					try {
						clickOnProceedToCheckInPaymentButton_2(driver, test_steps);
					} catch (Exception e) {
						e.printStackTrace();
						checkInProcess(driver, test_steps);
					}
				} catch (Exception e) {

				}
			}
		} catch (Exception e) {
			reslogger.info("no toast");
		}
		try {
			Wait.wait3Second();
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_Reservation_CheckIn_ModelPopMsg), driver, 30);
			isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.CP_Reservation_CheckIn_ModelPopMsg));
			reslogger.info("isRoomDirty:" + isRoomDirty);
			if (isRoomDirty) {
				ClickConfirmButtonOfDirtyPopupModel(driver, test_steps, isRoomDirty);
			} else {
				test_steps.addAll(VerifyDirtyRoom(driver));
			}
		} catch (Exception e) {
			reslogger.info("Room is not durty");
		}

	}

	public void clickOnProceedToCheckOutPaymentButton(WebDriver driver, ArrayList<String> test_steps) throws Exception {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_Reservation_ConfirmCheckOutPayment_Button), driver);
		Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckOutPayment_Button, driver);
		res.CP_Reservation_ConfirmCheckOutPayment_Button.click();
		test_steps.add("Clicking on  Proceed to Check-Out Payment Button");
		reslogger.info("Clicking on Proceed to Check-Out Payment Button");

	}

	public void clickOnConfirmCheckOutButton(WebDriver driver, ArrayList<String> test_steps) throws Exception {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_Reservation_ConfirmCheckOutPayment_Button), driver);
		Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckOutPayment_Button, driver);
		res.CP_Reservation_ConfirmCheckOutPayment_Button.click();
		test_steps.add("Clicking On Confirm  Check-Out  Button");
		reslogger.info("Clicking on Confirm Check-Out  Button");

	}

	public void clickOnProceedToCheckInPaymentButton_2(WebDriver driver, ArrayList<String> test_steps)
			throws Exception {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_Reservation_ConfirmCheckInPayment_Button_2),
				driver);
		Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckInPayment_Button_2, driver);
		res.CP_Reservation_ConfirmCheckInPayment_Button_2.click();

		try {
			Wait.waitForToasterToBeVisibile(By.xpath("//*[@id='toast-container']//div[@class='toast-title']"), driver);
			String msg = Utility.getELementText(
					driver.findElement(By.xpath("//*[@id='toast-container']//div[@class='toast-title']")), false,
					"innerHTML");
			if (msg.toUpperCase().contains("FAIL")) {
				try {
					try {
						res.CP_Reservation_ConfirmCheckInPayment_Button_2.click();
						test_steps.add("Clicking on  Proceed to Check-In Payment Button");
						reslogger.info("Clicking on Proceed to Check-In Payment Button");
					} catch (Exception e) {
						e.printStackTrace();
						res.CP_Reservation_ConfirmCheckInPayment_Button_2.click();
						test_steps.add("Clicking on  Proceed to Check-In Payment Button");
						reslogger.info("Clicking on Proceed to Check-In Payment Button");
					}
				} catch (Exception e) {

				}
			}
		} catch (Exception e) {
			System.out.println("no toast");
		}
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: completeCheckInProcess ' Description: Complete Check In
	 * Process, Covered Dirty message , Unassigned and Room Reserved with another
	 * reservation ' Input parameters: String ' Created By: Gangotri ' Created On:
	 * June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	// public boolean isCheckOutAllPresent = false
	public boolean isRoomDirty = false, confirmCheckIn = false, confirmCheckInWithPayment = false;

	public String completeCheckInProcess(WebDriver driver, ArrayList test_steps) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		String buttonName = null;
		if (res.CP_Reservation_ConfirmCheckIn_Button.isEnabled()) {
			confirmCheckIn = true;

			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckIn_Button, driver);
			buttonName = res.CP_Reservation_ConfirmCheckIn_Button.getText();
			Utility.clickThroughJavaScript(driver, res.CP_Reservation_ConfirmCheckIn_Button);
			test_steps.add("Clicking on  Confirm Check-In Button");
			reslogger.info("Clicking on Confirm  Check-In Button");
			try {
				Wait.waitForToasterToBeVisibile(By.xpath("//*[@id='toast-container']//div[@class='toast-title']"),
						driver);
				String msg = Utility.getELementText(
						driver.findElement(By.xpath("//*[@id='toast-container']//div[@class='toast-title']")), false,
						"innerHTML");
				if (msg.toUpperCase().contains("FAIL")) {
					try {
						try {
							res.CP_Reservation_ConfirmCheckIn_Button.click();
							test_steps.add("Clicking on  Confirm Check-In Button");
							reslogger.info("Clicking on Confirm  Check-In Button");
						} catch (Exception e) {
							e.printStackTrace();
							res.CP_Reservation_ConfirmCheckIn_Button.click();
							test_steps.add("Clicking on  Confirm Check-In Button");
							reslogger.info("Clicking on Confirm  Check-In Button");
						}
					} catch (Exception e) {

					}
				}
			} catch (Exception e) {
				System.out.println("button not enabled");
			}

			verifySpinerLoading(driver);

			boolean isUnassigned = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
			reslogger.info("IsUnassigned:" + isUnassigned);
			Wait.wait10Second();
			String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'occupying room')]";
			boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
			reslogger.info("isRoomBooked:" + isRoomBooked);
			if (isUnassigned) {
				CheckINScreenRoomUnAssigned(driver, isUnassigned);

			}
			if (isRoomBooked) {
				CheckINScreenRoomOccupiedWithOtherReservation(driver, isRoomBooked);
			}

			String loading = "(//div[@class='ir-loader-in'])[1]";
			int count = 0;
			try {
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (count == 30) {
						break;
					} else {
						count++;
						Wait.wait1Second();
					}
				}
			} catch (Exception ex) {
				// TODO: handle exception
			}

			try {
				Wait.wait3Second();
				isRoomDirty = Utility.isElementPresent(driver,
						By.xpath(OR_Reservation.CP_Reservation_CheckIn_ModelPopMsg));
				reslogger.info("isRoomDirty:" + isRoomDirty);

				if (isRoomDirty) {
					ClickConfirmButtonOfDirtyPopupModel(driver, test_steps, isRoomDirty);
				} else {
					test_steps.addAll(VerifyDirtyRoom(driver));
				}
			} catch (Exception e) {

			}
			try {

				String autorize = "//button[contains(text(),'Authorize') and contains(@data-bind,'ready-to-process')]";
				Wait.waitForElementToBeClickable(By.xpath(autorize), driver);
				driver.findElement(By.xpath(autorize)).click();
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.checkOutButtonClose), driver);
				res.checkOutButtonClose.click();
			} catch (Exception ef) {
				// TODO: handle exception
			}
			try {
				String payButton = "//*[contains(text(),'Pay') and contains(@data-bind,'ready-to-process')]";
				Wait.waitForElementToBeClickable(By.xpath(payButton), driver);
				driver.findElement(By.xpath(payButton)).click();
				test_steps.add("Clicked on Pay Button");
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.checkOutButtonClose), driver);
				res.checkOutButtonClose.click();
				test_steps.add("Clicked on Close Button");
			} catch (Exception e) {
				// TODO: handle exception
			}

		} else if (res.CP_Reservation_ConfirmCheckInPayment_Button.isEnabled()) {
			confirmCheckInWithPayment = true;

			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckInPayment_Button, driver);
			buttonName = res.CP_Reservation_ConfirmCheckInPayment_Button.getText();
			res.CP_Reservation_ConfirmCheckInPayment_Button.click();
			test_steps.add("Clicking on  Proceed to Check-In Payment Button");
			reslogger.info("Clicking on Proceed to Check-In Payment Button");
			try {
				boolean isExist = res.CP_Reservation_ConfirmCheckInPayment_Button.isDisplayed();
				if (isExist) {
					try {
						try {
							res.CP_Reservation_ConfirmCheckInPayment_Button.click();
							test_steps.add("Clicking on  Proceed to Check-In Payment Button");
							reslogger.info("Clicking on Proceed to Check-In Payment Button");
						} catch (Exception e) {
							e.printStackTrace();
							res.CP_Reservation_ConfirmCheckInPayment_Button.click();
							test_steps.add("Clicking on  Proceed to Check-In Payment Button");
							reslogger.info("Clicking on Proceed to Check-In Payment Button");
						}
					} catch (Exception e) {

					}
				}
			} catch (Exception e) {
				System.out.println("no toast");
			}

			Wait.wait10Second();
			boolean isUnassigned = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
			reslogger.info("isUnassigned:" + isUnassigned);
			String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'occupying room')]";
			boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
			reslogger.info("isRoomBooked:" + isRoomBooked);

			Wait.wait10Second();
			if (isUnassigned) {
				CheckINScreenRoomUnAssigned(driver, isUnassigned);
			}
			if (isRoomBooked) {
				CheckINScreenRoomOccupiedWithOtherReservation(driver, isRoomBooked);

			}
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
			try {
				Wait.wait3Second();
				isRoomDirty = Utility.isElementPresent(driver,
						By.xpath(OR_Reservation.CP_Reservation_CheckIn_ModelPopMsg));
				reslogger.info("isRoomDirty:" + isRoomDirty);
				if (isRoomDirty) {
					ClickConfirmButtonOfDirtyPopupModel(driver, test_steps, isRoomDirty);
				} else {
					test_steps.addAll(VerifyDirtyRoom(driver));
				}
			}

			catch (Exception e) {

			}
			try {

				String autorize = "//button[contains(text(),'Authorize') and contains(@data-bind,'ready-to-process')]";
				Wait.waitForElementToBeClickable(By.xpath(autorize), driver);
				driver.findElement(By.xpath(autorize)).click();
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.checkOutButtonClose), driver);
				res.checkOutButtonClose.click();
			} catch (Exception ef) {
				// TODO: handle exception
			}
			try {
				String pay = "//button[contains(text(),'Pay') and contains(@data-bind,'ready-to-process')]|(//h4[text()='Check In Payment']/../..//button[contains(text(),'Pay')])|(//h4[text()='Check In Payment']/../..//a[contains(text(),'Pay')])";
				if (driver.findElements(By.xpath(pay)).size() > 0) {
					for (WebElement ele : driver.findElements(By.xpath(pay))) {
						try {
//					Wait.waitForElementToBeClickable(By.xpath(pay), driver);
							ele.click();
						} catch (Exception e) {
							reslogger.info(e.toString());
							// pay = pay + "/../..//a[contains(text(),'Pay')]";

						}
					}
				}
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.checkOutButtonClose), driver);
				res.checkOutButtonClose.click();
				test_steps.add("Clicked on Close Button");
			} catch (Exception e) {
				// TODO: handle exception
			}

		}

		return buttonName;
	}

	public void ClickConfirmButtonOfDirtyPopupModel(WebDriver driver, ArrayList test_steps,

			boolean isPresent) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		if (isPresent) {

			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckIn_ModelPopConfirmButton);
			Utility.ScrollToElement(res.CP_Reservation_CheckIn_ModelPopConfirmButton, driver);
			test_steps.add("One or more of the selected room(s) is Dirty");
			reslogger.info("One or more of the selected room(s) is Dirty");
			res.CP_Reservation_CheckIn_ModelPopConfirmButton.click();
			test_steps.add("Click Confirm Button");
			reslogger.info("Click Confirm Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
			reslogger.info("Loading Done");
		} else {
			test_steps.add("One or more of the selected room(s) is Not Dirty ");
			reslogger.info("One or more of the selected room(s) is Not Dirty ");
		}

	}

	public void switchToTabTwo(WebDriver driver, ArrayList test_steps) throws InterruptedException {

		Wait.waitForNewWindow(driver, 10);
		ArrayList<String> tabs2 = new ArrayList<String>(driver.getWindowHandles());
		reslogger.info(tabs2);
		if (tabs2.size() == 2) {
			driver.switchTo().window(tabs2.get(1));
			test_steps.add("Switch to report tab");
			reslogger.info("Switch to report tab");
		}

	}

	public void SwitchToTabTwoAndClose(WebDriver driver, ArrayList test_steps) throws InterruptedException {

		ArrayList<String> tabs2 = new ArrayList<String>(driver.getWindowHandles());
		reslogger.info(tabs2);
		if (tabs2.size() == 2) {
			driver.switchTo().window(tabs2.get(1));
			driver.close();
			test_steps.add("Switch to Tab tab Two and Close");
			reslogger.info("Switch to Tab tab Two and Close");
			Wait.wait2Second();
			driver.switchTo().window(tabs2.get(0));
			test_steps.add("Switch to Main tab");
			reslogger.info("Switch to Main tab");
		}

	}

	public String getURL = "";

	public void VerifyGuestRegistrationReportDisplayed(WebDriver driver, ArrayList test_steps)
			throws InterruptedException {

		Wait.wait5Second();
		getURL = driver.getCurrentUrl();
		reslogger.info(getURL);
		assertTrue(getURL.contains(".pdf"));
		test_steps.add("Guest Registration Report Page is Displayed");
		reslogger.info("Guest Registration Report Page is Displayed");
	}

	public void switchToTabOne(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Wait.waitForNewWindow(driver, 10);
		ArrayList<String> tabs2 = new ArrayList<String>(driver.getWindowHandles());
		reslogger.info(tabs2);
		/*
		 * if (tabs2.size() == 2) { driver.switchTo().window(tabs2.get(0));
		 * test_steps.add("Switch to Main tab"); reslogger.info("Switch to Main tab"); }
		 */

		driver.switchTo().window(tabs2.get(0));
		test_steps.add("Switch to Main tab");
		reslogger.info("Switch to Main tab");
	}

	public String getMainWindow(WebDriver driver, ArrayList test_steps) {
		String winHandelBefore = driver.getWindowHandle();
		test_steps.add("Get Main Window");
		reslogger.info("Get Main Window");
		return winHandelBefore;
	}

	public void switchToMainWindow(WebDriver driver, ArrayList test_steps, String windowName) {
		Wait.waitForNewWindow(driver, 10);
		driver.switchTo().window(windowName);
		test_steps.add("Switch to Parent Window");
		reslogger.info("Switch to Parent Window");

	}

	public void switchToChildWindow(WebDriver driver, ArrayList test_steps) {
		Wait.waitForNewWindow(driver, 10);
		for (String windowHandel : driver.getWindowHandles())

		{
			reslogger.info(windowHandel);
			driver.switchTo().window(windowHandel);
			test_steps.add("Switch to Child Window");
			reslogger.info("Switch Child Window");
		}
	}

	public boolean verifyPDFContent(String strURL, String reqTextInPDF) {

		boolean flag = false;

		PDFTextStripper pdfStripper = null;
		PDDocument pdDoc = null;
		COSDocument cosDoc = null;
		String parsedText = null;

		try {
			URL url = new URL(strURL);
			BufferedInputStream file = new BufferedInputStream(url.openStream());
			PDFParser parser = new PDFParser(file);
			parser.parse();
			String TestText = new PDFTextStripper().getText(parser.getPDDocument());
			assertTrue(TestText.contains(reqTextInPDF));
			/*
			 * cosDoc = parser.getDocument(); pdfStripper = new PDFTextStripper();
			 * pdfStripper.setStartPage(1); pdfStripper.setEndPage(1);
			 * 
			 * pdDoc = new PDDocument(cosDoc); parsedText = pdfStripper.getText(pdDoc);
			 */
		} catch (MalformedURLException e2) {
			System.err.println("URL string could not be parsed " + e2.getMessage());
		} catch (IOException e) {
			System.err.println("Unable to open PDF Parser. " + e.getMessage());
			try {
				if (cosDoc != null)
					cosDoc.close();
				if (pdDoc != null)
					pdDoc.close();
			} catch (Exception e1) {
				e.printStackTrace();
			}
		}

		reslogger.info("+++++++++++++++++");
		reslogger.info(parsedText);
		reslogger.info("+++++++++++++++++");

		// if(parsedText.contains(reqTextInPDF)) {
		// flag=true;
		// }

		return flag;
	}

	public void verifyHistoryForCheckin(WebDriver driver, ArrayList test_steps, String desc, String abb, String RoomNo,
			String CheckInStatus, ArrayList<String> RoomAbbri, ArrayList<String> Rooms) throws InterruptedException {

		String FinalRoomNo = null;
		if (CheckInStatus.equals("CheckInSingleRoom") || CheckInStatus.equals("CheckOutSingleRoom")
				|| CheckInStatus.equals("RollBackSingleRoom")) {
			if (RoomNo.contains(":")) {
				String[] room = RoomNo.split(":");
				FinalRoomNo = room[1].trim();
				reslogger.info(" Room No: " + FinalRoomNo);
			} else {
				FinalRoomNo = RoomNo;
			}
			String FinalAbb = abb;
			reslogger.info(" Room Abb: " + FinalAbb);

			String path = "//td/span[contains(text(),'" + desc
					+ "')]/ancestor::td/following-sibling::td/span[contains(text(),'" + FinalAbb + ": " + FinalRoomNo
					+ "')]";
			Wait.WaitForElement(driver, path);
			WebElement element = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(element, driver);
			assertTrue(element.isDisplayed(), "Failed: to Verify Description and Room");
			test_steps.add("Verified Description: <b>" + desc + "</b>");
			reslogger.info("Verified Description: " + desc);
			test_steps.add("Verified Room: <b>" + FinalAbb + ": " + FinalRoomNo + "</b>");
			reslogger.info("Verified Room: " + FinalAbb + ": " + FinalRoomNo);
		} else if (CheckInStatus.equals("CheckInAll") || CheckInStatus.equals("Check Out")
				|| CheckInStatus.equals("RollBack")) {
			for (int i = 0; i < Rooms.size(); i++) {
				String[] room = Rooms.get(i).split(":");
				FinalRoomNo = room[1].trim();
				reslogger.info(" Room No: " + FinalRoomNo);
				String FinalAbb = RoomAbbri.get(i);
				reslogger.info(" Room Abb: " + FinalAbb);

				String path = "//td/span[contains(text(),'" + desc
						+ "')]/ancestor::td/following-sibling::td/span[contains(text(),'" + FinalAbb + ": "
						+ FinalRoomNo + "')]";
				Wait.WaitForElement(driver, path);
				WebElement element = driver.findElement(By.xpath(path));
				Utility.ScrollToElement(element, driver);
				assertTrue(element.isDisplayed(), "Failed: to Verify Description and Room");
				test_steps.add("Verified Description: <b>" + desc + "</b>");
				reslogger.info("Verified Description: " + desc);
				test_steps.add("Verified Room: <b>" + FinalAbb + ": " + FinalRoomNo + "</b>");
				reslogger.info("Verified Room: " + FinalAbb + ": " + FinalRoomNo);
			}
		}

	}

	public void verifyDocuments(WebDriver driver, ArrayList test_steps, String resNO) throws InterruptedException {
		String Path = "//td[contains(text(),'" + resNO + "')]";
		Wait.WaitForElement(driver, Path);
		WebElement element = driver.findElement(By.xpath(Path));
		Utility.ScrollToElement(element, driver);
		assertTrue(element.isDisplayed(), "Failed: to Verify Documents");
		test_steps.add("Verified Documents: <b>" + resNO + "</b>");
		reslogger.info("Verified Documents: " + resNO);
	}

	public void clickGuestContactInfoCollapseIcon(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_Reservation_GuestContactInforCollapse, driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_GuestContactInforCollapse, driver);
		res.CP_Reservation_GuestContactInforCollapse.click();
		test_steps.add("Click Guest Contact Infor Collapse Icon");
		reslogger.info("Click Guest Contact Infor Collapse Icon");

	}

	public List<String> getStayInfoRoomCharges(WebDriver driver, ArrayList<String> test_steps) {
		List<String> roomCharges = new ArrayList<String>();
		String path = "//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'roomTotal')]";
		List<WebElement> roomCharge = driver.findElements(By.xpath(path));
		for (int i = 0; i < roomCharge.size(); i++) {
			roomCharges.add(roomCharge.get(i).getText());
			reslogger.info(roomCharges);

		}
		test_steps.add("Successfully Get Stay Info Room Charges");
		reslogger.info("Successfully Get Stay Info Room Charges");
		return roomCharges;
	}

	public ArrayList<String> getStayInfoRoomNo(WebDriver driver, ArrayList<String> test_steps) {
		ArrayList<String> roomNos = new ArrayList<String>();
		String path = "//div[contains(text(),'Stay')]/..//div[@class='ir-flex-grow ir-roomInfo']//span[contains(@data-bind,'roomNumber')]";
		List<WebElement> roomNo = driver.findElements(By.xpath(path));
		for (int i = 0; i < roomNo.size(); i++) {
			roomNos.add(roomNo.get(i).getText());
			reslogger.info(roomNos);

		}
		// test_steps.add("Successfully Get Stay Info Room Number");
		reslogger.info("Successfully Get Stay Info Room Number");
		return roomNos;
	}

	public List<String> getStayInfoGuestName(WebDriver driver, ArrayList<String> test_steps) {
		List<String> guestNames = new ArrayList<String>();
		String path = "//div[contains(text(),'Stay')]/..//div[@class='ir-flex-grow ir-guestInfo']//span[contains(@data-bind,'guestName')]";
		List<WebElement> roomNo = driver.findElements(By.xpath(path));
		for (int i = 0; i < roomNo.size(); i++) {

			guestNames.add(roomNo.get(i).getText());
			reslogger.info(guestNames);

		}

		test_steps.add("Get Stay Info Room Gust Name: <b>" + guestNames + " </b>");
		reslogger.info("Get Stay Info Room Gust Name: " + guestNames);
		return guestNames;
	}

	public void clickPrintButtonFromSuccessFullPop(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_CheckInSuccessPrintButton, driver);
		res.CP_CheckInSuccessPrintButton.click();
		test_steps.add("Click Print Button ");
		reslogger.info("Click Print Button ");
		Wait.wait5Second();
	}

	public void reservationStatusPanelSelectStatus(WebDriver driver, String status, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_StatusPanel_DropDownBox);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_StatusPanel_DropDownBox, driver);
		CPReservationPage.CP_Reservation_StatusPanel_DropDownBox.click();
		test_steps.add("Click on Drop Down box of Reservation Status Panel");
		reslogger.info("Click on Drop Down box of Reservation Status Panel");
		String path = "//span[contains(@class,'ir-dropdown-span-status open')]//ul[contains(@class,'dropdown-menu')]/li/a/span[contains(text(),'"
				+ status + "')]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		String getStatus = Utility.getELementText(element, false, "");
		Utility.customAssert(getStatus.toUpperCase(), status.toUpperCase(), true,
				"Successfully Verified Status Option : " + status, "Failed to Verify Status Option : " + status, true,
				test_steps);
		element.click();
		test_steps.add("Select Status : <b>" + status + "</b>");
		reslogger.info("Select Status : " + status);
		verifySpinerLoading(driver);
		if (status.equals("Cancel") || status.equals("No Show")) {

			// Wait till pop model is not displayed
			int counter = 0;
			while (true) {
				if (!CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_Title.isDisplayed()) {
					break;
				} else if (counter == 40) {
					break;
				} else {
					counter++;
				}
			}
		}
	}

	public boolean checkedVoidRoomChargeCheckBox(WebDriver driver, ArrayList<String> test_steps) {
		boolean isChecked = false;
		Elements_CPReservation res = new Elements_CPReservation(driver);

		String path = "//span[contains(text(),'Void Room Charges')]/ancestor::div/label/input|//span[contains(text(),'Void room charges for unused nights')]/ancestor::div/label/input";
		isChecked = driver.findElement(By.xpath(path)).isSelected();
		if (!isChecked) {
			res.CP_Reservation_NoShow_VoidRoomChargeCheckBox.click();
			test_steps.add("Checked Void Room Charge Check Box ");
			reslogger.info("Checked Void Room Charge Check Box ");
		} else {
			test_steps.add(" Void Room Charge Check Box is Already Checked ");
			reslogger.info("Void Room Charge Check Box is Already Checked ");
		}

		return isChecked;
	}

	public boolean unCheckedVoidRoomChargeCheckBox(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		boolean isUnchecked = false;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait5Second();
		String path = "//span[contains(text(),'Void Room Charges')]/ancestor::div/label/input|//span[contains(text(),'Void room charges for unused nights')]/ancestor::div/label/input";

		isUnchecked = driver.findElement(By.xpath(path)).isSelected();
		if (isUnchecked) {
			try {
				res.CP_Reservation_NoShow_VoidRoomChargeCheckBox.click();
			} catch (Exception e) {
				JavascriptExecutor executor = (JavascriptExecutor) driver;
				executor.executeScript("arguments[0].click();", res.CP_Reservation_NoShow_VoidRoomChargeCheckBox);
			}
			test_steps.add("UnChecked Void Room Charge Check Box ");
			reslogger.info("UnChecked Void Room Charge Check Box ");
		} else {
			test_steps.add("UnChecked Void Room Charge Check Box ");
			reslogger.info("UnChecked Void Room Charge Check Box ");
		}
		return isUnchecked;
	}

	public boolean proceedToNoShowPaymentButtonIsPresent(WebDriver driver, ArrayList<String> test_steps) {
		return Utility.isElementDisplayed(driver, By.xpath(OR_Reservation.ProceedToPaymentButton));
	}

	public void clickProceedToNoShowPaymentButton(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ProceedToPaymentButton), driver);
		res.ProceedToPaymentButton.click();
		test_steps.add("Click on Proceed To No Show Payment Button ");
		reslogger.info("Click on Proceed To No Show Payment Button ");
	}

	public void clickConfirmNoShowButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait2Second();
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ConfirmButton, driver);
		Wait.explicit_wait_elementToBeClickable(res.CP_Reservation_ConfirmButton, driver);
		res.CP_Reservation_ConfirmButton.click();
		test_steps.add("Click on Confirm No Show Button ");
		reslogger.info("Click on Confirm No Show Button ");
		verifySpinerLoading(driver);
	}

	public void clickConfirmButtonFromNoShowModelPopup(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ConfirmNoShowNoButton, driver);
		res.CP_Reservation_ConfirmNoShowNoButton.click();
		test_steps.add("Click on " + " 'No, Cancel the no show process' " + "Button ");
		reslogger.info("Click on " + " 'No, Cancel the no show process' " + "Button ");
	}

	public boolean verifyConfirmYesButton(WebDriver driver) {
		boolean value = Utility.isElementPresent(driver, By.xpath(OR_Reservation.ConfirmDialog_YesButton));
		return value;
	}

	public void clickYesButtonOfConfirmTheNoShowProcessPopupModel(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ConfirmNoShowYesButton, driver);
		res.CP_Reservation_ConfirmNoShowYesButton.click();
		test_steps.add("Click on " + " 'Yes, Confirm no show & refund later' " + "Button ");
		reslogger.info("Click on " + " 'Yes, Confirm no show & refund later' " + "Button ");
	}

	public void clickCloseButtonOfPaymentWindow(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_NoShowPaymentPopup_CloseButton, driver);
		res.CP_Reservation_NoShowPaymentPopup_CloseButton.click();
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
	}

	public void clickYesButtonOfNoShowPaymentWindow(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_NoShowPaymentPopup_CloseButtonMsgYesButton,
				driver);
		res.CP_Reservation_NoShowPaymentPopup_CloseButtonMsgYesButton.click();
		test_steps.add("Click Yes Button ");
		reslogger.info("Click Yes Button ");
	}

	public void clickNoButtonOfNoShowPaymentWindow(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_NoShowPaymentPopup_CloseButtonMsgNoButton,
				driver);
		res.CP_Reservation_NoShowPaymentPopup_CloseButtonMsgNoButton.click();
		test_steps.add("Click No Button ");
		reslogger.info("Click No Button ");
	}

	public void verifyReservationPopWindow(WebDriver driver, String Title, String GuestName, String Status,
			String ResNo, ArrayList<String> test_steps, String OptionPerform) throws InterruptedException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShow_Cancel_CheckIn_CheckOut_Title);
		Wait.explicit_wait_visibilityof_webelement(
				CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_Title, driver);
		// Verified No Show Reservation Page Title
		assertEquals(
				CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_Title.getText().toLowerCase().trim(),
				Title.toLowerCase().trim(), "Failed: To verify Reservation Page Title");
		test_steps.add("Verified Header: <b>" + Title + "</b>");
		reslogger.info(" Verified Header: " + Title);
		// Verified No Show Reservation Page Guest Name
		assertEquals(CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_GuestName.getText().toLowerCase()
				.trim(), GuestName.toLowerCase().trim(), "Failed: To verify Reservation Page GuestName");

		test_steps.add("Verified Guest Name <b>" + GuestName + "</b>");
		reslogger.info("Verified Guest Name " + GuestName);
		String[] status = null;

		if (OptionPerform.equals("Check Out")) {
			status = CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_Status.getText().split("-");
			status[0] = status[0] + "-" + status[1];
		} else {
			status = CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_Status.getText().split("-");

		}
		// Verified No Show Reservation Page Status
		/*
		 * assertTrue(status[0].toLowerCase().trim().equals(Status.toLowerCase()
		 * .trim()), "Failed: To verify Reservation Page Status");
		 */
		assertEquals(status[0].toLowerCase().trim(), Status.toLowerCase().trim(),
				"Failed: To verify Reservation Page Status");

		test_steps.add(" Verified Status <b>" + Status + "</b>");
		reslogger.info(" Verified Status: " + Status);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_ConfirmationNo, driver);
		// Verified No Show Reservation Page ReservationNo
		String ConfirmationNO = CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_ConfirmationNo.getText()
				.trim();
		reslogger.info(ConfirmationNO);
		/*
		 * assertTrue(CPReservationPage.
		 * CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_ConfirmationNo.getText(
		 * ).trim() .equals(ResNo.trim()),
		 * "Failed: To verifyReservation Page Confirmation No");
		 */

		assertEquals(CPReservationPage.CP_Reservation_NoShow_Cancel_CheckIn_CheckOut_ConfirmationNo.getText().trim(),
				ResNo.trim(), "Failed: To verifyReservation Page Confirmation No");
		test_steps.add(" Verified Reservation  No <b>" + ResNo + "</b>");
		reslogger.info(" Verified Reservation No: " + ResNo);

	}

	public void voidRoomChargeVerificationOfNoShow(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.VoidRoomChargeLabel, driver);
		// Verified No Show Reservation Page Void Room Charge Label
		assertTrue(CPReservationPage.VoidRoomChargeLabel.isDisplayed(), "Failed: To verify  Void Room Charge Lable");
		test_steps.add(" Verified <b> Void Room Charge </b> Label ");
		reslogger.info(" Verified  Void Room Charge Label");
	}

	public String TripSummary_RoomCharges = "";
	public String TripSummary_TaxServices = "";
	public String AmountPaid = "";

	public String CalculationFee(WebDriver driver, int roomCharge, int noShowPercent, int taxPercentage,
			int paidAmount) {
		int NoShowFee = (roomCharge * noShowPercent) / 100;
		reslogger.info("Pearcentage: " + NoShowFee);
		TripSummary_RoomCharges = String.valueOf(NoShowFee);
		int TaxOnNoShowFee = (NoShowFee * taxPercentage) / 100;
		reslogger.info("Tax on Pearcentage: " + TaxOnNoShowFee);
		TripSummary_TaxServices = String.valueOf(TaxOnNoShowFee);
		int TotalNoShowFee = NoShowFee + TaxOnNoShowFee;
		reslogger.info("Total Fee  : " + TotalNoShowFee);
		int PaidAmount = TotalNoShowFee - paidAmount;
		AmountPaid = String.valueOf(PaidAmount);
		reslogger.info("Need to Paid  : " + AmountPaid);
		return String.valueOf(TotalNoShowFee);

	}

	public void getAmountOnPaymentVerificationPage(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount, driver);
		// Get Amount
		Amount = CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		double noshowPaymentAmount = Double.valueOf(Amount);
		int amt = (int) noshowPaymentAmount;
		Amount = String.valueOf(amt);
		reslogger.info(Amount);
	}

	String type = "";
	public String Amount = "", Balance = "";

	// public double amount = 0.00;

	public void SelectDate(WebDriver driver, Date Date, String day) {
		DateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
		String tDate = dateFormat.format(Date);
		String[] checkin = tDate.split("\\|");
		int size = checkin.length;
		String header = null, headerText = null, date;
		// String monthYear=Utility.get_MonthYear(Date);
		for (int i = 1; i <= size; i++) {
			String monthYear = Utility.get_MonthYear(checkin[i - 1]);

			for (int k = 1; k <= 12; k++) {
				header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
				headerText = driver.findElement(By.xpath(header)).getText();
				if (headerText.equalsIgnoreCase(monthYear)) {
					date = "//td[contains(@class,'day') and text()='" + day + "']";
					Wait.WaitForElement(driver, date);

					int size1 = driver.findElements(By.xpath(date)).size();
					for (int l = 1; l <= size1; l++) {
						date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + l + "]";
						String classText = driver.findElement(By.xpath(date)).getAttribute("class");
						if (!classText.contains("old")) {
							driver.findElement(By.xpath(date)).click();
							test_steps.add("Selecting  date : " + Date);
							reslogger.info("Selecting  date : " + Date);
							break;
						}
					}

					break;
				}

			}
		}
	}

	public String previousDate = "";
	public String currentDay = "";
	public String PreviousDay = "";
	public Date oneDayBefore;
	public String Current_Date = "";
	public Date current_Date;

	public void getTodaysANDYesturdayDate() throws ParseException {
		DateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy");
		dateFormat.setTimeZone(TimeZone.getTimeZone("EST"));

		Date currentDate = new Date();
		current_Date = currentDate;
		String CurrentDate = dateFormat.format(currentDate);
		Current_Date = CurrentDate;
		Date myDate = dateFormat.parse(CurrentDate);
		reslogger.info("CurrentDate: " + Current_Date);
		int CD = myDate.getDate();
		currentDay = String.valueOf(CD);
		reslogger.info("CurrentDay: " + currentDay);

		// Date oneDayBefore = new Date(myDate.getTime() - 2);
		oneDayBefore = new Date(myDate.getTime() - 2);
		previousDate = dateFormat.format(oneDayBefore);
		reslogger.info("Previous Date: " + previousDate);
		Date myPDate = dateFormat.parse(previousDate);
		int PD = myPDate.getDate();
		PreviousDay = String.valueOf(PD);
		reslogger.info("PreviousDay: " + PreviousDay);

	}

	public Date getTodaysDate(String format, String timeZone) {
		Date current_Date = null;
		DateFormat dateFormat = new SimpleDateFormat(format);
		dateFormat.setTimeZone(TimeZone.getTimeZone(timeZone));
		Date currentDate = new Date();
		current_Date = currentDate;
		String CurrentDate = dateFormat.format(currentDate);
		reslogger.info("CurrentDate: " + CurrentDate);

		return current_Date;
	}

	public Date getPreviousDate(String format, String timeZone) throws ParseException {
		// String previousDate=null;
		DateFormat dateFormat = new SimpleDateFormat(format);
		dateFormat.setTimeZone(TimeZone.getTimeZone(timeZone));

		Date currentDate = new Date();
		String CurrentDate = dateFormat.format(currentDate);
		Date myDate = dateFormat.parse(CurrentDate);
		Date oneDayBefore = new Date(myDate.getTime() - 2);
		String previousDate = dateFormat.format(oneDayBefore);
		Date previous = dateFormat.parse(previousDate);
		reslogger.info("Previous Date: " + previousDate);

		return previous;
	}

	public void SetAsMainPaymentMethod(WebDriver driver, ArrayList<String> test_steps, String PaymentType,
			String PaymentTypeTwo, Date Date, String Day, String PolicyType) throws ParseException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		String path = "//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + PaymentType + "']";
		WebElement PaymentMethodElement = driver.findElement(By.xpath(path));
		PaymentMethodElement.click();
		test_steps.add("Click Payment Method");
		reslogger.info("Click CPayment Method");
		String options = "//paymentmethod//div[contains(@class,'open')]/ul//li/a//span[@class='text'][contains(text(),'"
				+ PaymentTypeTwo + "')]";
		WebElement PaymentMethodOptions = driver.findElement(By.xpath(options));
		PaymentMethodOptions.click();
		test_steps.add("Select Payment Option :<b> " + PaymentTypeTwo + "<b>");
		reslogger.info("Click Payment Option: " + PaymentTypeTwo);
		if (PolicyType.equals("Cancel") || PolicyType.equals("No Show")) {
			CPReservationPage.NoShow_Cancel_Checkout_Date_CalanderIcon.click();
			test_steps.add("Click Calander Icon");
			reslogger.info("Click Calander Icon");
		} else if (PolicyType.equals("Check In")) {
			CPReservationPage.CheckInPaymentPopup_Date_CalanderIcon.click();
			test_steps.add("Click Calander Icon");
			reslogger.info("Click Calander Icon");
		} else if (PolicyType.equals("Check Out")) {
			CPReservationPage.CheckOutPaymentPopup_Date_CalanderIcon.click();
			test_steps.add("Click Calander Icon");
			reslogger.info("Click Calander Icon");
		}

		SelectDate(driver, Date, Day);
		test_steps.add("Select Date: <b>" + previousDate + "</b>");
		reslogger.info("Select Date: " + previousDate);
		CPReservationPage.CP_Reservation_NoShowPaymentPopup_SetMainPaymentCheckBox.click();
		test_steps.add("Click Set As Main Payment Method Check Box");
		reslogger.info("Click Set As Main Payment Method Check Box");

	}

	public void closeWindowVerificationOfPaymentPopup(WebDriver driver, ArrayList<String> test_steps, String Msg) {

		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		// Verified No Show Payment Page Close Title
		assertTrue(CPReservationPage.CP_Reservation_NoShowPaymentPopup_CloseButtonMsg.getText().toLowerCase().trim()
				.equals(Msg.toLowerCase().trim()), "Failed: To verify Are You Sure Msg");
		test_steps.add("Verified Message:<b> " + Msg + "</b>");
		reslogger.info("Verified Message: " + Msg);
		// Verified No Show Payment Page Close Page Yes Button
		assertTrue(CPReservationPage.CP_Reservation_NoShowPaymentPopup_CloseButtonMsgYesButton.isDisplayed(),
				"Failed: To verify Payment Page Yes Button");
		test_steps.add(" Verified <b>Yes</b> Button ");
		reslogger.info("Verified Yes Button");
		// Verified No Show Payment Page Close Page No Button
		assertTrue(CPReservationPage.CP_Reservation_NoShowPaymentPopup_CloseButtonMsgNoButton.isDisplayed(),
				"Failed: To verify Payment Page No Button");
		test_steps.add(" Verified <b>No</b> Button ");
		reslogger.info(" Verified No Button");
		clickNoButtonOfNoShowPaymentWindow(driver, test_steps);
		// Wait.explicit_wait_visibilityof_webelement(CPReservationPage.CP_Reservation_StatusPanel_DropDownBox,
		// driver);
	}

	public boolean confirmNoShowVerification(WebDriver driver) {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		boolean isExitNoShowVerification = CPReservationPage.CP_Reservation_ConfirmNoShowMsg.isEnabled();
		return isExitNoShowVerification;

	}

	public void confirmNoShowWindowVerification(WebDriver driver, ArrayList<String> test_steps, String ConfirmNoShowMsg)
			throws InterruptedException {

		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ConfirmDialog_Message);
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.CP_Reservation_ConfirmNoShowMsg, driver);
		// Verified Confirm No Show Msg
		assertTrue(CPReservationPage.CP_Reservation_ConfirmNoShowMsg.getText().toLowerCase().trim()
				.equals(ConfirmNoShowMsg.toLowerCase().trim()), "Failed: To verify The guest is owed a refund");
		test_steps.add("Successfull Verified Confirm No Show  Message ");
		reslogger.info("Successfull Verified Confirm No Show  Message");
		// Verified Confirm No Show Page Yes Button
		assertTrue(CPReservationPage.CP_Reservation_ConfirmNoShowYesButton.isDisplayed(),
				"Failed: To verify Confirm No Show  Page Yes Button");
		test_steps.add("Successfull Verified Confirm No Show  Page  Yes Button ");
		reslogger.info("Successfull Verified Confirm No Show  Page Yes Button");
		// Verified Confirm No Show Page No Button
		assertTrue(CPReservationPage.CP_Reservation_ConfirmNoShowNoButton.isDisplayed(),
				"Failed: To verify Confirm No Show Page No Button");
		test_steps.add("Successfull Verified Confirm No Show Page  No Button ");
		reslogger.info("Successfull Verified Confirm No Show  Page No Button");
		clickConfirmButtonFromNoShowModelPopup(driver, test_steps);
		// Verified Confirm No Show Button Again
		assertTrue(CPReservationPage.CP_Reservation_ConfirmButton.isDisplayed(),
				"Failed: To verify Confirm No Show   Button");
		test_steps.add("Successfull Verified Confirm No Show   Button Again");
		reslogger.info("Successfull Verified Confirm No Show  Button Again");
		// Click Again Confirm No Show Button
		clickConfirmNoShowButton(driver, test_steps);
		clickYesButtonOfConfirmTheNoShowProcessPopupModel(driver, test_steps);
		Wait.wait10Second();

	}

	public boolean NoShowSuccessFull(WebDriver driver) throws InterruptedException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowSuccessFul_ModelHeader);
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.NoShowSuccessfull_Header, driver);
		boolean iExistNoShowSuccessScreen = CPReservationPage.NoShowSuccessfull_Header.isEnabled();
		return iExistNoShowSuccessScreen;
	}

	public void commonMethodForSuccessfullWindowVerification(WebDriver driver, ArrayList<String> test_steps,
			String NoShowSuccess, String Status, String PaymentMethod, String Notes, String Balance, String Type,
			String TotalNoFee, String PaymentType, String dateValue) throws InterruptedException, ParseException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowSuccess_ModelHeader);
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.CP_Reservation_NoShowSuccess, driver);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShowSuccess, driver);

		// Verified Success -Message
		assertEquals(CPReservationPage.CP_Reservation_NoShowSuccess.getText().toLowerCase().trim(),
				(NoShowSuccess.toLowerCase().trim()), "Failed: To verify Success Header");
		test_steps.add("  Verified Message: <b>" + NoShowSuccess + "</b>");
		reslogger.info("  Verified Message:" + NoShowSuccess);

		if (PaymentType.equals("Check Out")) {
			// Verified Success-Date
			Date date = null;
			String Date = CPReservationPage.NoShowSuccess_Date.getText();
			DateFormat dateFormat = new SimpleDateFormat("MM/dd/yy");
			dateFormat.setTimeZone(TimeZone.getTimeZone("EST"));
			Date myDate = dateFormat.parse(dateValue);
			String CurrentDate = dateFormat.format(myDate);

			// date = formatter.parse(Date);
			assertEquals(CPReservationPage.NoShowSuccess_Date.getText(), (CurrentDate),
					"Failed: To verify  Success Page Date");
			test_steps.add("  Verified Date: <b>" + dateValue + "</b>");
			reslogger.info("  Verified Date: " + dateValue);
		} else {

			assertEquals(CPReservationPage.NoShowSuccess_Date.getText(), (dateValue),
					"Failed: To verify  Success Page Date");

			test_steps.add("  Verified Date: <b>" + dateValue + "</b>");
			reslogger.info("  Verified Date: " + dateValue);
		}

		// Verified Success-Balance
		String balance = CPReservationPage.NoShowSuccess_Balance.getText().replace("$ ", "");

		reslogger.info(balance);
		if (PaymentType.equals("Check Out")) {
			double tripAmount = Double.valueOf(balance);
			int amt = (int) tripAmount;
			String BalanceCheckOut = String.valueOf(amt);
			assertEquals(BalanceCheckOut.trim(), (Balance), "Failed: To verify Success Page Balance");
			test_steps.add(" Verified Balance: <b>" + Balance + "</b>");
			reslogger.info("  Verified Balance: " + Balance);
		} else {
			assertEquals(balance.trim(), (Balance), "Failed: To verify Success Page Balance");
			test_steps.add(" Verified Balance: <b>" + Balance + "</b>");
			reslogger.info("  Verified Balance: " + Balance);

		}
		// Verified Success-Amount

		reslogger.info("Amount: " + TotalNoFee);
		String path = "//span[contains(@data-bind,'noShow.PaymentAmount')][contains(text(),'$ " + TotalNoFee
				+ "')]|//span[contains(@data-bind,'cancel.PaymentAmount')][contains(text(),'$ " + TotalNoFee
				+ "')]|//span[contains(@data-bind,'checkInDetail.PaymentAmount')][contains(text(),'$ " + TotalNoFee
				+ "')]|//span[contains(@data-bind,'checkOutDetail.PaymentAmount')][contains(text(),'$ " + TotalNoFee
				+ "')]";
		WebElement AmountElement = driver.findElement(By.xpath(path));
		assertTrue(AmountElement.isDisplayed(), "Failed: To verify  Success Page Amount: " + TotalNoFee);
		test_steps.add("  Verified Amount: <b>" + TotalNoFee + "</b>");
		reslogger.info("  Verified Amount: " + TotalNoFee);

		// Verified Success-Type
		reslogger.info(type);
		assertEquals(CPReservationPage.NoShowSuccess_Type.getText().toLowerCase().trim(), (Type.toLowerCase().trim()),
				"Failed: To verify  Success Page Type");
		test_steps.add("  Verified Type: <b>" + Type + "</b>");
		reslogger.info(" Verified Type: " + Type);

		// Verified Success-Payment Method
		assertTrue(CPReservationPage.CP_Reservation_NoShowSuccessPaymentMethod.getText().toLowerCase().trim()
				.contains(PaymentMethod.toLowerCase().trim()), "Failed: To verify Success Page Payment Method");
		test_steps.add("  Verified Payment Method: <b>" + PaymentMethod + "</b>");
		reslogger.info("  Verified Payment Method: " + PaymentMethod);

		// Verified Success -Status
		assertEquals(CPReservationPage.CP_Reservation_NoShowSuccessStatus.getText().toLowerCase().trim(),
				(Status.toLowerCase().trim()), "Failed: To verify  Success Page Status ");
		test_steps.add("  Verified Status:<b> " + Status + "</b>");
		reslogger.info(" Verified Status: " + Status);

		// Verified Success Notes
		if (Utility.validateString(Notes)) {
			assertEquals(CPReservationPage.CP_Reservation_NoShowSuccessNotes.getText().toLowerCase().trim(),
					(Notes.toLowerCase().trim()), "Failed: To verify  Success Page Notes ");
			test_steps.add(" Verified  Notes: <b>" + Notes + "</b>");
			reslogger.info(" Verified  Notes: " + Notes);
		}
	}

	public boolean VerifyNoShowSuccessFull(WebDriver driver) {
		boolean value = Utility.isElementPresent(driver, By.xpath(OR_Reservation.NoShowSuccessFul_ModelHeader));
		return value;
	}

	public void noShowSuccessfullyWindowVerification(WebDriver driver, ArrayList<String> test_steps, String headerText,
			String Reg) throws InterruptedException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.wait10Second();
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.NoShowSuccessfull_Header, driver);
		// Verified No Show Successful Header
		assertTrue(CPReservationPage.NoShowSuccessfull_Header.getText().toLowerCase().trim()
				.equals(headerText.toLowerCase().trim()), "Failed: To verify No Show Successful Header");
		test_steps.add("'No Show Successful' Verified Header: <b>" + headerText + "</b>");
		reslogger.info("'No Show Successful' Verified Header");

		// Verified No Show Successful message
		assertTrue(CPReservationPage.NoShowSuccessfull_Msg.isDisplayed(),
				"Failed: To verify No Show Successful Message: ");
		test_steps.add("'No Show Successful' Verified Message: <b>No Show successful</b>");
		reslogger.info("'No Show Successful' Verified Message");

		// Verified No Show Successful Registration NO
		assertTrue(
				CPReservationPage.NoShowSuccessfull_Reg.getText().toLowerCase().trim().equals(Reg.toLowerCase().trim()),
				"Failed: To verify No Show Successful Reg No");
		test_steps.add("'No Show Successful' Verified Registration No:<b> " + Reg + "</b>");
		reslogger.info("'No Show Successful' Verified Registration No " + Reg);
		CPReservationPage.NoShowSuccessfull_Button.click();
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");

	}

	public void clickCloseButtonOfSuccessModelPopup(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait5Second();
		Wait.WaitForElement(driver, OR_Reservation.NoShowClosePopupButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowClosePopupButton), driver, 10);
		// res.CP_Reservation_NoShowSuccessCloseButton.click();
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", res.NoShowClosePopupButton);

		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
		verifySpinerLoading(driver);
	}

	public void clickAddNoteLinks(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentAddNoteLink);
		Wait.explicit_wait_elementToBeClickable(res.CP_Reservation_NoShowPayment_AddNoteLink, driver);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click()", res.CP_Reservation_NoShowPayment_AddNoteLink);
		// res.CP_Reservation_NoShowPayment_AddNoteLink.click();
		test_steps.add("Click Add Notes Link ");
		reslogger.info("Click Add Notes Link ");
	}

	public ArrayList<String> clickOnPayButtonOnPaymentPopup(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.wait10Second();
		} catch (InterruptedException e1) {
			// TODO Auto-generated catch block
			e1.printStackTrace();
		}
//		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopup_LogANDPayButton), driver);
//		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowPaymentPopup_LogANDPayButton), driver);
		String buttonName = res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText();
		JavascriptExecutor js = (JavascriptExecutor) driver;
		js.executeScript("arguments[0].click();", res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton);
		// res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.click();
		test_steps.add("Clicking on " + buttonName + " Button ");
		reslogger.info("Clicking on " + buttonName + " Button ");
		if (buttonName != "") {
			try {
				Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowSuccess_ModelHeader), driver);
			} catch (Exception e) {

				try {
					js.executeScript("arguments[0].click();", res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton);
					test_steps.add("Clicking on " + buttonName + " Button ");
					reslogger.info("Clicking on " + buttonName + " Button ");
					Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowSuccess_ModelHeader), driver);

				} catch (Exception e2) {
//				test_steps.add(
//						"Existing issue in CP: Posted room charges do not move to account when charge routing is set"
//								+ "<br/><a href='https://innroad.atlassian.net/browse/NG-10512' target='_blank'>"
//								+ "Verified :NG-10512</a><br/>");
//				reslogger.info(
//						"Existing issue in CP: Posted room charges do not move to account when charge routing is set"
//								+ "<br/><a href='https://innroad.atlassian.net/browse/NG-10512' target='_blank'>"
//								+ "Verified :NG-10512</a><br/>");
				}

			}
		}
		return test_steps;
	}

	public void clickLogORPayAuthorizedButton(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_LogANDPayButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowPaymentPopup_LogANDPayButton), driver);
		Utility.scrollAndClick(driver, By.xpath(OR_Reservation.NoShowPaymentPopup_LogANDPayButton));
		try {
			res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.click();
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton);
		}

		String buttonName = res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().split(" ")[0];
		test_steps.add("Clicking on " + buttonName + " Button ");
		reslogger.info("Clicking on " + buttonName + " Button ");
	}

	public String getPaymentMethod(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		String path = "//paymentmethod//div[(@class='form-group ir-frm-grp')]//button";
		WebElement PaymentMethod = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(PaymentMethod, driver);
		String paymentMethod = PaymentMethod.getAttribute("title");

		reslogger.info(paymentMethod);
		return paymentMethod;
	}

	public void addNotesAndClickLogORPayORAuthorizedButton(WebDriver driver, ArrayList<String> test_steps, String Notes)
			throws Exception {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		clickAddNoteLinks(driver, test_steps);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentAddNoteTextBox);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_NoShowPayment_AddNoteTextBox, driver);
		res.CP_Reservation_NoShowPayment_AddNoteTextBox.sendKeys(Notes);
		test_steps.add("Input Notes: <b>" + Notes + "</b>");
		reslogger.info("Input Notes: " + Notes);
		try {
			String loading = "//*[@id='ReservationPaymetItemDetailV2']//div[@data-bind='visible: ShowLoading']";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 3) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");
		} catch (Exception e) {
			reslogger.info("no loading");
		}
		clickLogORPayAuthorizedButton(driver, test_steps);
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
		reslogger.info("Loading Done");
		Wait.wait15Second();
	}

	public void verifyReservationPopWindowPolicyName(WebDriver driver, ArrayList<String> test_steps, String PolicyName,
			String PolicyType) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait5Second();// verifySpinerLoading(driver);
		if (PolicyType.equals("No Show") || PolicyType.contains("Cancel")) {
			Utility.ScrollToElement(res.NoShowAndCancelReservation_PolicyName, driver);
			assertTrue(res.NoShowAndCancelReservation_PolicyName.getText().toLowerCase().trim()
					.contains(PolicyName.toLowerCase().trim()), "Failed: To verify Reservation Window Policy Name");
		} else if (PolicyType.equals("Check In")) {
			Utility.ScrollToElement(res.CheckInReservation_PolicyName, driver);
			assertTrue(res.CheckInReservation_PolicyName.getText().toLowerCase().trim()
					.equals(PolicyName.toLowerCase().trim()), "Failed: To verify Reservation Window Policy Name");
		}

		test_steps.add("Verified Policy Name:<b> " + PolicyName + "</b>");
		reslogger.info("Verified Policy Name " + PolicyName);
	}

	public void verifyPolicyToolTip(WebDriver driver, ArrayList<String> test_steps, String PolicyName,
			String PolicyDesc, String PolicyType) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Actions action = new Actions(driver);

		if (PolicyType.contains("Cancel")) {
			action.moveToElement(res.NoShowAndCancelReservation_PolicyName).perform();
			assertTrue(res.CancelRoom_ToolTip_PolicyName.getText().toLowerCase().trim()
					.equals(PolicyName.toLowerCase().trim()), "Failed: To verify Tooltip Policy Name");
			test_steps.add("Verified ToolTip Policy Name:<b> " + PolicyName + "</b>");
			reslogger.info("Verified ToolTip Policy Name " + PolicyName);
			assertTrue(res.CancelRoom_ToolTip_PolicyDescription.getText().toLowerCase().trim()
					.equals(PolicyDesc.toLowerCase().trim()), "Failed: To verify Tooltip Policy Description");
			test_steps.add("Verified ToolTip Policy Description:<b> " + PolicyDesc + "</b>");
			reslogger.info("Verified ToolTip Policy Description " + PolicyDesc);

		} else if (PolicyType.equals("No Show")) {
			action.moveToElement(res.NoShowAndCancelReservation_PolicyName).perform();
			assertTrue(res.CancelRoom_ToolTip_PolicyDescription.getText().toLowerCase().trim()
					.equals(PolicyDesc.toLowerCase().trim()), "Failed: To verify Tooltip Policy Description");
			test_steps.add("Verified ToolTip Policy Description:<b> " + PolicyDesc + "</b>");
			reslogger.info("Verified ToolTip Policy Description " + PolicyDesc);

		} else if (PolicyType.equals("Check In")) {
			action.moveToElement(res.CheckInReservation_PolicyName).perform();
			assertTrue(res.CancelRoom_ToolTip_PolicyDescription.getText().toLowerCase().trim()
					.equals(PolicyDesc.toLowerCase().trim()), "Failed: To verify Tooltip Policy Description");
			test_steps.add("Verified ToolTip Policy Description:<b> " + PolicyDesc + "</b>");
			reslogger.info("Verified ToolTip Policy Description " + PolicyDesc);

		}

	}

	public void verifyReservationPopWindowPostLabel(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.ReservationPopUp_PostLabel, driver);

		assertTrue(res.ReservationPopUp_PostLabel.isDisplayed(), "Failed: To verify  Reservation Post  Label");
		test_steps.add(" Verified: <b>" + res.ReservationPopUp_PostLabel.getText() + "</b>");
		reslogger.info("Verified: " + res.ReservationPopUp_PostLabel.getText());
	}

	public void Verify_VoidRoomCharge(WebDriver driver, ArrayList<String> test_steps, String Status)
			throws InterruptedException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.VoidRoomChargeLabel, driver);
		// Verified Reservation Page Void Room Charge Label
		assertTrue(CPReservationPage.VoidRoomChargeLabel.isDisplayed(),
				"Failed: To verify Reservation Page Void Room Charge Lable");
		if (Status.equals("Cancel")) {
			test_steps.add("Verified <b>Void Room Charge Label</b> ");
			reslogger.info("Verified  Void Room Charge Label");

		} else if (Status.equals("Check Out")) {
			test_steps.add("Verified <b>Void Room Charges for Unused Nights Label</b> ");
			reslogger.info("Verified  Void Room Charges for Unused Nights Label");
		}

	}

	public void verify_AccountFolio(WebDriver driver, ArrayList test_steps, String AccountName)
			throws InterruptedException {
		String folioSize = "//button[contains(@title,'Guest')]";
		Wait.WaitForElement(driver, folioSize);
		driver.findElement(By.xpath(folioSize)).click();
		Wait.wait2Second();

		String verify_AccountFolio = "//li//span[contains(text(),'" + AccountName.trim() + "')]";
		try {
			WebElement ele = driver.findElement(By.xpath(verify_AccountFolio));
			test_steps.add("Account Folio verified in reservation : " + AccountName);
			reslogger.info("Account Folio verified in reservation : " + AccountName);
		} catch (Exception e) {
			test_steps.add("Account Folio not created in reservation : " + AccountName);
			reslogger.info("Account Folio not created in reservation : " + AccountName);
		}
		/*
		 * folioSize = "//li//span[contains(text(),'Guest Folio For')]";
		 * Wait.WaitForElement(driver, folioSize);
		 * driver.findElement(By.xpath(folioSize)).click(); Wait.wait2Second();
		 */
	}

	public String pay_Account(WebDriver driver, ArrayList test_steps, String AccountName, String IsChangeInPayAmount,
			String ChangedAmountValue, String TakePaymentType) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		res.CP_Reservation_Folio_Pay.click();
		test_steps.add("Clicking on Pay");
		reslogger.info("Clicking on Pay");

		test_steps.add("******************* Making account payment **********************");
		reslogger.info("******************* Making account payment **********************");
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_Amount);
		String amount = res.CP_Reservation_Folio_TakePayment_Amount.getText().trim();
		reslogger.info("amount : " + amount);
		test_steps.add("Amount before Pay : " + amount);
		reslogger.info("Amount before Pay : " + amount);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_PaymentButton + "/span");

		String paymentType = driver
				.findElement(By.xpath(OR_Reservation.CP_Reservation_Folio_TakePayment_PaymentButton + "/span"))
				.getText().trim();

		if (paymentType.contains(AccountName.trim())) {
			test_steps.add("Payment method is verified as account : " + paymentType);
			reslogger.info("Payment method is verified as account : " + paymentType);
		}

		// res.CP_Reservation_Folio_TakePayment_PaymentButton.click();

		if (IsChangeInPayAmount.equalsIgnoreCase("Yes")) {
			test_steps.add("Change the pay amount value : Yes");
			reslogger.info("Change the pay amount value : Yes");
			res.CP_Reservation_Folio_TakePayment_Amount.clear();
			res.CP_Reservation_Folio_TakePayment_Amount.sendKeys(Keys.chord(Keys.CONTROL, "a"));
			res.CP_Reservation_Folio_TakePayment_Amount.sendKeys(ChangedAmountValue);
			test_steps.add("Enter the Change Amount Value : " + ChangedAmountValue);
			reslogger.info("Enter the Change Amount Value : " + ChangedAmountValue);
			amount = ChangedAmountValue;
		} else {
			test_steps.add("paying the amount : " + amount);
			reslogger.info("paying the amount : " + amount);
		}

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_TypeButton);
		try {
			res.CP_Reservation_Folio_TakePayment_TypeButton.click();
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, res.CP_Reservation_Folio_TakePayment_TypeButton);
		}

		String type = "//h4[text()='Take Payment']/../..//label[text()='TYPE']/..//div/div//span[text()='"
				+ TakePaymentType.trim() + "']";
		Wait.WaitForElement(driver, type);
		driver.findElement(By.xpath(type)).click();
		test_steps.add("Select Take Payment Type : " + TakePaymentType);
		reslogger.info("Select Take Payment Type : " + TakePaymentType);

		String button = "//h4[text()='Take Payment']/../..//a[contains(text(),'" + amount.trim() + "')]";
		Wait.WaitForElement(driver, button);
		try {
			driver.findElement(By.xpath(button)).click();
		} catch (Exception e) {
			Utility.scrollAndClick(driver, By.xpath(button));
		}
		test_steps.add("Click on Pay");
		reslogger.info("Click on Pay");

		String takePayType = "//h4[contains(text(),'Successful')]/../..//label[text()='TYPE']/following-sibling::span";
		Wait.WaitForElement(driver, takePayType);
		String paytype = driver.findElement(By.xpath(takePayType)).getText().trim();
		assertEquals(paytype, TakePaymentType.trim());
		test_steps.add("Take Payment Type validated after payment : " + TakePaymentType);
		reslogger.info("Take Payment Type validated after payment : " + TakePaymentType);
		String status = "//h4[contains(text(),'Successful')]/../..//label[text()='Approved']";
		Wait.WaitForElement(driver, status);
		if (driver.findElement(By.xpath(status)).isDisplayed()) {
			test_steps.add("Transaction status is : Approved");
			reslogger.info("Transaction status is : Approved");
		} else {
			test_steps.add("Transaction status is not : Approved");
			reslogger.info("Transaction status is not : Approved");
		}

		String close = "//h4[contains(text(),'Successful')]/../..//button[text()='Close']";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		test_steps.add("Click on Close");
		reslogger.info("Click on Close");

		// String saveFolio =
		// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save");
		reslogger.info("Click on Save");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
		return amount;
	}

	public void verify_AccountPaymentLineItem(WebDriver driver, ArrayList test_steps, String amount, String Account)
			throws InterruptedException {
		test_steps.add("******************* Verify account apayment line item **********************");
		reslogger.info("******************* Verify account payment line item **********************");

		String payment = "//td/a[contains(text(),'" + Account + "')]/../following-sibling::td//span[contains(text(),'"
				+ amount + "')]";
		Wait.WaitForElement(driver, payment);
		test_steps.add("Account payment line item displayed");
		reslogger.info("Account payment line item displayed");

		String line = "//td/a[contains(text(),'" + Account + "')]/../following-sibling::td//span[contains(text(),'"
				+ amount + "')]/../preceding-sibling::td[3]/a";
		Wait.WaitForElement(driver, line);
		driver.findElement(By.xpath(line)).click();
		test_steps.add("Opening Payment line item");
		reslogger.info("Opening Payment line item");
		Wait.wait5Second();
		String payemntType = "(//label[text()='Payment Method:']/following-sibling::div/select)[2]";

		WebElement pay = new Select(driver.findElement(By.xpath(payemntType))).getFirstSelectedOption();
		reslogger.info(pay.getText());
		if (pay.getText().trim().contains(Account)) {
			test_steps.add("Payment Method verified in line item : " + pay.getText());
			reslogger.info("Payment Method verified in line item : " + pay.getText());
		} else {
			test_steps.add("Payment Method not verified in line item : " + pay.getText());
			reslogger.info("Payment Method not verified in line item : " + pay.getText());
		}

		String amt = "(//label[text()='Amount:']/following-sibling::div//input)[2]";

		JavascriptExecutor js = (JavascriptExecutor) driver;
		String amtValue = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(amt)));
		reslogger.info(amtValue);
		if (amtValue.equalsIgnoreCase(amount)) {
			test_steps.add("Payment amount verified in line item : " + amount);
			reslogger.info("Payment amount verified in line item : " + amount);
		} else {
			test_steps.add("Payment amount not verified in line item : " + amount);
			reslogger.info("Payment amount not verified in line item : " + amount);
		}

		String payInfo = "//label[text()='Payment Info:']/following-sibling::div//textarea";
		String info = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(payInfo)));
		reslogger.info(info);
		Wait.wait2Second();
		String close = "//span[text()='Payment Details']/../../.././../../../..//button[text()='Close']";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		test_steps.add("Closeing Payment line item");
		reslogger.info("Closeing Payment line item");
		Wait.wait5Second();
	}

	public void verify_AccountPaymentLineItemHA(WebDriver driver, ArrayList test_steps, String amount, String Account)
			throws InterruptedException {
		test_steps.add("******************* Verify account apayment line item **********************");
		reslogger.info("******************* Verify account payment line item **********************");

		String payment = "//td/a[contains(text(),'" + Account
				+ "')]//..//following-sibling::td[@class='lineitem-amount']//span";
		Utility.app_logs.info("path: " + payment);
		Wait.WaitForElement(driver, payment);
		test_steps.add("Account payment line item displayed");
		reslogger.info("Account payment line item displayed");

		String line = "//td/a[contains(text(),'" + Account + "')]";
		Wait.WaitForElement(driver, line);
		driver.findElement(By.xpath(line)).click();
		test_steps.add("Opening Payment line item");
		reslogger.info("Opening Payment line item");
		Wait.wait5Second();
		String payemntType = "(//label[text()='Payment Method:']/following-sibling::div/select)[2]";

		WebElement pay = new Select(driver.findElement(By.xpath(payemntType))).getFirstSelectedOption();
		reslogger.info(pay.getText());
		if (pay.getText().trim().contains(Account)) {
			test_steps.add("Payment Method verified in line item : " + pay.getText());
			reslogger.info("Payment Method verified in line item : " + pay.getText());
		} else {
			test_steps.add("Payment Method not verified in line item : " + pay.getText());
			reslogger.info("Payment Method not verified in line item : " + pay.getText());
		}

		String amt = "(//label[text()='Amount:']/following-sibling::div//input)[2]";

		JavascriptExecutor js = (JavascriptExecutor) driver;
		String amtValue = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(amt)));
		reslogger.info(amtValue);
		if (amtValue.equalsIgnoreCase(amount)) {
			test_steps.add("Payment amount verified in line item : " + amount);
			reslogger.info("Payment amount verified in line item : " + amount);
		} else {
			test_steps.add("Payment amount not verified in line item : " + amount);
			reslogger.info("Payment amount not verified in line item : " + amount);
		}

		String payInfo = "//label[text()='Payment Info:']/following-sibling::div//textarea";
		String info = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(payInfo)));
		reslogger.info(info);
		Wait.wait2Second();
		String close = "//span[text()='Payment Details']/../../.././../../../..//button[text()='Close']";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		test_steps.add("Closeing Payment line item");
		reslogger.info("Closeing Payment line item");
		Wait.wait5Second();
	}

	public String get_FilioBalance(WebDriver driver) {

		String bal = "//label[.='Balance: ']//following-sibling::span[@class='pamt']";
		Wait.WaitForElement(driver, bal);
		return driver.findElement(By.xpath(bal)).getText();

	}

	public String getFolioRoomCharges(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String roomCharges = res.Folio_RoomCharges.getText();
		roomCharges = roomCharges.replace("$", "");
		return roomCharges;

	}

	public String getFolioTaxServices(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String taxCharges = res.Folio_TaxServices.getText();
		taxCharges = taxCharges.replace("$", "");
		return taxCharges;

	}

	public void enter_TravelAgentMarketSegmentDetails(WebDriver driver, ArrayList test_steps, String TravelAgent,
			String MarketSegment, String Referral, String AccountType) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_TravelAgent);

		if (!(TravelAgent.equalsIgnoreCase("") || TravelAgent.isEmpty())) {
			res.CP_NewReservation_TravelAgent.clear();
			Wait.wait1Second();
			res.CP_NewReservation_TravelAgent.sendKeys(TravelAgent);
			Wait.wait2Second();
			String account = "//b[contains(text(),'" + TravelAgent.trim() + "')]/../../..";
			Wait.WaitForElement(driver, account);
			driver.findElement(By.xpath(account)).click();
			String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]/following-sibling::div//button[contains(text(),'No')]";
			Wait.WaitForElement(driver, dataYes);
			driver.findElement(By.xpath(dataYes)).click();
			test_steps.add(
					"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
			reslogger.info(
					"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
			Wait.wait5Second();

			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
			res.CP_NewReservation_PaymentMethod.click();
			String type = null;

			if (AccountType.contentEquals("Travel Agent") || AccountType.contains("Travel")
					|| AccountType.contains("Travel Agent")) {
				type = "Account (Travel Agent)";
			}
			String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'"
					+ type + "')]";
			Wait.WaitForElement(driver, paymentMethod);
			driver.findElement(By.xpath(paymentMethod)).click();
			String acc = "//label[text()='Account Name ']/preceding-sibling::input";
			Wait.WaitForElement(driver, acc);
			String accName = driver.findElement(By.xpath(acc)).getText();
			if (accName.contains(TravelAgent)) {
				test_steps.add("Account successfully associated : " + TravelAgent);
				reslogger.info("Account successfully associated : " + TravelAgent);

				test_steps.add("Verified payment method with Travel agent account" + TravelAgent);
				reslogger.info("Verified payment method with Travel agent account" + TravelAgent);
			}

			/*
			 * String
			 * policyYes="//div[contains(text(),'Do you want to replace the guest info')]/following-sibling::div//button[contains(text(),'Yes')]"
			 * ; Wait.WaitForElement(driver, policyYes);
			 * driver.findElement(By.xpath(policyYes)).click(); test_steps.
			 * add("Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes"
			 * ); reslogger.
			 * info("Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes"
			 * );
			 */
		}

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Market);
		Utility.ScrollToElement(res.CP_NewReservation_Market, driver);
		Wait.wait2Second();
		res.CP_NewReservation_Market.click();
		String market = "//label[text()='Market']/preceding-sibling::div//ul/li//span[contains(text(),'"
				+ MarketSegment.trim() + "')]";
		Wait.WaitForElement(driver, market);

		driver.findElement(By.xpath(market)).click();
		test_steps.add("Selected MarketSegment as : " + MarketSegment);
		reslogger.info("Selected MarketSegment as : " + MarketSegment);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Referral);
		res.CP_NewReservation_Referral.click();
		Wait.wait1Second();
		String ref = "(//label[text()='Referral']/preceding-sibling::div//ul/li//span[contains(text(),'"
				+ Referral.trim() + "')])[2]";
		reslogger.info(ref);
		Wait.WaitForElement(driver, ref);
		driver.findElement(By.xpath(ref)).click();
		test_steps.add("Selected Referral as : " + Referral);
		reslogger.info("Selected Referral as : " + Referral);
	}

	public void verify_DepositPolicyValidation(WebDriver driver, ArrayList test_steps, String CheckInDate,
			String CheckOutDate, String Value) throws ParseException, InterruptedException {
		test_steps.add("******************* Verify Deposit policy amount for " + Value
				+ " Night Room Charges **********************");
		reslogger.info("******************* Verify Deposit policy amount for " + Value
				+ " Night Room Charges **********************");
		SimpleDateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");
		Date dateObj1 = format1.parse(CheckInDate);
		Date dateObj2 = format1.parse(CheckOutDate);
		long diff = dateObj2.getTime() - dateObj1.getTime();
		int Nights = (int) (diff / (24 * 60 * 60 * 1000));
		reslogger.info("difference between days: " + Nights);

		String roomCharge = get_RoomCharge(driver, test_steps);
		Double d = Double.parseDouble(roomCharge);
		Double d1 = d / Nights;
		reslogger.info(d1);

		String payments = get_Payments(driver, test_steps);
		Double d2 = Double.parseDouble(payments);
		reslogger.info(d2);

		if (Double.compare(d1, d2) == 0) {
			test_steps.add("Deposit policy for " + Value + " Night Room Charges is validated : " + d1);
			reslogger.info("Deposit policy for " + Value + " Night Room Charges is validated : " + d1);
		} else {
			test_steps.add("Deposit policy for " + Value + " Night Room Charges is not validated : " + d1);
			reslogger.info("Deposit policy for " + Value + " Night Room Charges is not validated : " + d1);
		}
	}

	public int getTotalStayInfoRooms(WebDriver driver) {
		int totalRooms = 0;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_StayInfo_CheckInButton);
		totalRooms = res.CP_Reservation_StayInfo_CheckInButton.size();
		reslogger.info("Total Rooms Is: " + totalRooms);
		return totalRooms;
	}

	public int TotalRoom = 0, actualRoomCheckIn = 0;
	public String actualRoomCheckInCharge = null, actualRoomClassCheckIn = null, actualRoomAbbCheckIn = null;

	public void stayInfoCheckIn(WebDriver driver, ArrayList<String> test_steps, String roomNO, List<String> RoomCharges,
			ArrayList<String> Rooms, ArrayList<String> RoomAbbri) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_StayInfo_CheckInButton);
		TotalRoom = res.CP_Reservation_StayInfo_CheckInButton.size();
		for (int i = 0; i < TotalRoom; i++) {
			if (i == (Integer.parseInt(roomNO) - 1)) {
				actualRoomCheckIn = i;
				actualRoomCheckInCharge = RoomCharges.get(i).replace("$", "").trim();
				actualRoomClassCheckIn = Rooms.get(i);
				actualRoomAbbCheckIn = RoomAbbri.get(i);
				Utility.ScrollToElement(res.CP_Reservation_StayInfo_CheckInButton.get(i), driver);
				res.CP_Reservation_StayInfo_CheckInButton.get(i).click();
				test_steps.add(
						"Room <b>" + (Integer.parseInt(roomNO)) + "</b> in the MRB Reservation Click CheckIn Button");
				reslogger.info("Room " + (Integer.parseInt(roomNO)) + " in the MRB Reservation Click CheckIn Button");
				break;
			}
		}

	}

	public int TotalRooms = 0, actualRoomCheckOut = 0;
	public String actualRoomCheckOutCharge = null, actualRoomClassCheckOut = null, actualRoomAbbCheckOut = null,
			actualGuestNameCheckOut = null;

	public void stayInfoCheckOutRoom(WebDriver driver, ArrayList<String> test_steps, String roomNO,
			List<String> RoomCharges, ArrayList<String> Rooms, ArrayList<String> RoomAbbri, List<String> GuestName,
			String Phone, String Email) throws InterruptedException {
		List<String> Phones = Arrays.asList(Phone.split("\\|"));
		List<String> Emails = Arrays.asList(Email.split("\\|"));
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_StayInfo_CheckOutButton);
		TotalRooms = res.CP_Reservation_StayInfo_CheckOutButtonList.size();
		for (int i = 0; i < TotalRooms; i++) {
			if (i == (Integer.parseInt(roomNO) - 1)) {
				actualRoomCheckOut = i;
				actualRoomCheckOutCharge = RoomCharges.get(i).replace("$", "").trim();
				actualRoomClassCheckOut = Rooms.get(i);
				actualRoomAbbCheckOut = RoomAbbri.get(i);
				actualGuestNameCheckOut = GuestName.get(i);

				Utility.ScrollToElement(res.CP_Reservation_StayInfo_CheckOutButtonList.get(i), driver);
				res.CP_Reservation_StayInfo_CheckOutButtonList.get(i).click();
				test_steps.add(
						"Room <b>" + (Integer.parseInt(roomNO)) + "</b> in the MRB Reservation Click Check-Out Button");
				reslogger.info("Room " + (Integer.parseInt(roomNO)) + " in the MRB Reservation Click Check-Out Button");
				break;
			}
		}

	}

	public void verifyDepositAmountTripSummary(WebDriver driver, ArrayList test_steps, String CheckInDate,
			String CheckOutDate, String Value, Double DepositAmount) throws ParseException, InterruptedException {
		SimpleDateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");

		Date dateObj1 = format1.parse(CheckInDate);
		Date dateObj2 = format1.parse(CheckOutDate);
		long diff = dateObj2.getTime() - dateObj1.getTime();
		int Nights = (int) (diff / (24 * 60 * 60 * 1000));
		reslogger.info("difference between days: " + Nights);
		Wait.wait3Second();
		String roomCharge = get_TripSummaryRoomChargesWithoutCurrency(driver, test_steps);
		Double d = Double.parseDouble(roomCharge);
		Double d1 = d / Nights;
		reslogger.info(d1);

		// String payments=DepositAmount;
		Double d2 = DepositAmount;
		reslogger.info(d2);

		if (Double.compare(d1, d2) == 0) {
			test_steps.add("Deposit policy for " + Value + " Night Room Charges is validated : " + d1);
			reslogger.info("Deposit policy for " + Value + " Night Room Charges is validated : " + d1);
		} else {
			test_steps.add("Deposit policy for " + Value + " Night Room Charges is not validated : " + d1);
			reslogger.info("Deposit policy for " + Value + " Night Room Charges is not validated : " + d1);
		}
	}

	public String verifyGuestContactInfoForCheckInRoom(WebDriver driver, ArrayList<String> test_steps, int TotalRoom,
			String roomNO, String Salutation, String GuestName, String LastName, String Email, String Phone) {
		String guestNameCheckInRoom = null;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		WebElement element;

		List<String> salutation = Arrays.asList(Salutation.split("\\|"));
		List<String> guestFName = Arrays.asList(GuestName.split("\\|"));
		List<String> guestLName = Arrays.asList(LastName.split("\\|"));
		List<String> email = Arrays.asList(Email.split("\\|"));
		List<String> phone = Arrays.asList(Phone.split("\\|"));

		// int size=res.CP_Reservation_StayInfo_CheckInButton.size();
		for (int i = 0; i < TotalRoom; i++) {
			if (i == (Integer.parseInt(roomNO) - 1)) {

				String test = salutation.get(i).toString().trim();
				guestNameCheckInRoom = salutation.get(i) + " " + guestFName.get(i) + " " + guestLName.get(i);
				String guestName = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'irFormattedProfileName')][contains(text(),'"
						+ salutation.get(i) + " " + guestFName.get(i) + "')]";
				element = driver.findElement(By.xpath(guestName));
				if (element.isDisplayed()) {
					test_steps.add(" Stay Info Primary Guest Name verified : <b>" + salutation.get(i) + " "
							+ guestFName.get(i) + "</b>");
					reslogger.info(
							" Stay Info Primary Guest Name verified : " + salutation.get(i) + " " + guestFName.get(i));
				} else {
					test_steps.add(" Stay Info Primary Guest Name not found : <b>" + salutation.get(i) + " "
							+ guestFName.get(i) + "</b>");
					reslogger.info(
							" Stay Info Primary Guest Name not found : " + salutation.get(i) + " " + guestFName.get(i));
				}

				String lastName = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'LastName')][contains(text(),'"
						+ guestLName.get(i) + "')]";
				element = driver.findElement(By.xpath(lastName));
				if (element.isDisplayed()) {
					test_steps.add(" Stay Info Last Name verified : <b>" + guestLName.get(i) + "</b>");
					reslogger.info(" Stay Info Last Name verified : " + guestLName.get(i));
				} else {
					test_steps.add(" Stay Info Last Name not found : <b>" + guestLName.get(i) + "</b>");
					reslogger.info(" Stay Info Last Name not found : " + guestLName.get(i));
				}

				String emails = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'EmailAddress')][contains(text(),'"
						+ email.get(i) + "')]";
				element = driver.findElement(By.xpath(emails));
				if (element.isDisplayed()) {
					test_steps.add(" Stay Info Email verified : <b>" + email.get(i) + "</b>");
					reslogger.info(" Stay Info Email verified : " + email.get(i));
				} else {
					test_steps.add(" Stay Info Email not found : <b>" + email.get(i) + "</b>");
					reslogger.info(" Stay Info Email not found : " + email.get(i));
				}

				if (i == 0) {
					String extension = "1-(";
					String firstPhone = phone.get(i).substring(0, 3);
					String phoneBracket = firstPhone + ") ";
					String secondPhone = Phone.substring(3, 6);
					String lastPhone = Phone.substring(6, 10);
					String finalPhone = extension + phoneBracket + secondPhone + "-" + lastPhone;
					String phones = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'irFormattedPhoneNumber')][contains(text(),'"
							+ finalPhone + "')]";
					element = driver.findElement(By.xpath(phones));
					if (element.isDisplayed()) {
						test_steps.add(" Stay Info Phone verified : <b>" + finalPhone + "</b>");
						reslogger.info(" Stay Info Phone verified : " + finalPhone);
					} else {
						test_steps.add(" Stay Info Phone not found : <b>" + finalPhone + "</b>");
						reslogger.info(" Stay Info Phone not found : " + finalPhone);
					}
				} else {
					String phones = "//div[@id='guestInfo-acc']//span[contains(@data-bind,'irFormattedPhoneNumber')][contains(text(),'"
							+ phone.get(i) + "')]";
					element = driver.findElement(By.xpath(phones));
					if (element.isDisplayed()) {
						test_steps.add(" Stay Info Phone verified : <b>" + phone.get(i) + "</b>");
						reslogger.info(" Stay Info Phone verified : " + phone.get(i));
					} else {
						test_steps.add(" Stay Info Phone not found : <b>" + phone.get(i) + "</b>");
						reslogger.info(" Stay Info Phone not found : " + phone.get(i));
					}
				}
			}

		}
		return guestNameCheckInRoom;
	}

	public void verifyStayInfoForCheckInRoom(WebDriver driver, ArrayList test_steps, int TotalRoom, String roomNO,
			String CheckInDate, String CheckOutDate, String Adults, String Children, String RoomClass,
			List<String> RoomCharges, String Salutation, String GuestName, String LastName, String RatePlan)
			throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		List<String> checkInDate = Arrays.asList(CheckInDate.split("\\|"));
		List<String> checkOutDate = Arrays.asList(CheckOutDate.split("\\|"));
		List<String> adults = Arrays.asList(Adults.split("\\|"));
		List<String> children = Arrays.asList(Children.split("\\|"));
		List<String> roomClass = Arrays.asList(RoomClass.split("\\|"));
		List<String> salutation = Arrays.asList(Salutation.split("\\|"));
		List<String> guestFName = Arrays.asList(GuestName.split("\\|"));
		List<String> guestLName = Arrays.asList(LastName.split("\\|"));
		List<String> ratePlan = Arrays.asList(RatePlan.split("\\|"));
		String[] checkIn, checkInSplit;
		String checkInMonth = "";
		SimpleDateFormat simpleDateformat;
		Date now;
		int Nights = 0;
		// int size=res.CP_Reservation_StayInfo_CheckInButton.size();
		for (int i = 0; i < TotalRoom; i++) {
			if (i == (Integer.parseInt(roomNO) - 1)) {
				// CheckIn

				SimpleDateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");
				Date dateObj1 = format1.parse(CheckInDate);
				Date dateObj2 = format1.parse(CheckOutDate);
				long diff = dateObj2.getTime() - dateObj1.getTime();
				Nights = (int) (diff / (24 * 60 * 60 * 1000));
				reslogger.info("difference between days: " + Nights);
				checkIn = checkInDate.get(i).split("/");
				if (checkIn[0].charAt(0) == '0') {
					checkIn[0] = checkIn[0].replace("" + checkIn[0].charAt(0), "");
				}
				checkInMonth = Utility.get_Month(checkInDate.get(i));
				String checkInDays = checkInMonth + " " + checkIn[0] + ", " + checkIn[2];
				String checkInDay = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='checkin']/span[text()='"
						+ checkInDays + "']";
				if (driver.findElement(By.xpath(checkInDay)).isDisplayed()) {
					test_steps.add("Stay Info checkin date verified : <b>" + checkInDays + "</b>");
					reslogger.info("Stay Info checkin date verified : " + checkInDays);
				} else {
					test_steps.add("Stay Info checkin date not found : <b>" + checkInDays + "</b>");
					reslogger.info("Stay Info checkin date not found : " + checkInDays);
				}
				now = new Date(checkIn[1] + "/" + checkIn[0] + "/" + checkIn[2]);
				simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the
				// day
				// of
				// the
				// week
				// abbreviated
				simpleDateformat = new SimpleDateFormat("EEEE"); // the day of
				// the week
				// spelled
				// out
				// completely
				String dayofCheckIn = simpleDateformat.format(now);

				String chckInday = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='checkin']//span[text()='"
						+ dayofCheckIn.trim() + "']";
				if (driver.findElement(By.xpath(chckInday)).isDisplayed()) {
					test_steps.add(" Stay Info checkin day verified : <b>" + dayofCheckIn + "</b>");
					reslogger.info(" Stay Info checkin day verified : " + dayofCheckIn);
				} else {
					test_steps.add(" Stay Info checkin day not found : <b>" + dayofCheckIn + "</b>");
					reslogger.info(" Stay Info checkin day not found : " + dayofCheckIn);
				}

				// CheckOut
				String[] checkOut = checkOutDate.get(i).split("/");

				if (checkOut[0].charAt(0) == '0') {
					checkOut[0] = checkOut[0].replace("" + checkOut[0].charAt(0), "");
				}
				String checkOutMonth = Utility.get_Month(checkOutDate.get(i));
				String[] checkOutSplit = checkOut[2].split("\\|");
				String checkOutDays = checkInMonth + " " + checkOut[0] + ", " + checkOut[2];
				String checkoutDay = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='checkout']/span[text()='"
						+ checkOutDays + "']";
				if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
					test_steps.add(" Stay Info checkout date verified : <b>" + checkOutDays + "</b>");
					reslogger.info(" Stay Info checkout date verified : " + checkOutDays);
				} else {
					test_steps.add(" Stay Info checkout date not found : <b>" + checkOutDays + "</b>");
					reslogger.info(" Stay Info checkout date not found : " + checkOutDays);
				}

				now = new Date(checkOut[1] + "/" + checkOut[0] + "/" + checkOut[2]);
				simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the
				// day
				// of
				// the
				// week
				// abbreviated
				simpleDateformat = new SimpleDateFormat("EEEE"); // the day of
				// the week
				// spelled
				// out
				// completely
				String dayofCheckOut = simpleDateformat.format(now);
				String chkOutDay = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='checkout']//span[text()='"
						+ dayofCheckOut.trim() + "']";
				if (driver.findElement(By.xpath(chkOutDay)).isDisplayed()) {
					test_steps.add(" Stay Info checkout day verified : <b>" + dayofCheckOut + "</b>");
					reslogger.info("Stay Info checkout day verified : " + dayofCheckOut);
				} else {
					test_steps.add(" Stay Info checkout day not found : <b>" + dayofCheckOut + "</b>");
					reslogger.info(" Stay Info checkout day not found : " + dayofCheckOut);
				}

				String nights = "//div[contains(@class,'ir-checkin-stay-info')]/..//div[@class='noofnights']/span[text()='"
						+ Nights + "N']";
				if (driver.findElement(By.xpath(nights)).isDisplayed()) {
					test_steps.add(" Stay Info Nights verified : <b>" + Nights + "N</b>");
					reslogger.info(" Stay Info Nights verified : " + Nights + "N");
				} else {
					test_steps.add(" Stay Info Nights not found : <b>" + Nights + "N</b>");
					reslogger.info(" Stay Info Nights not found : " + Nights + "N");
				}

				// Adults
				String adult = "//div[contains(@class,'ir-checkin-stay-info')]/..//div//span[contains(@data-bind,'numberOfAdults')]";
				adult = driver.findElement(By.xpath(adult)).getText().trim();
				if (adult.equals(adults.get(i).trim())) {
					test_steps.add(" Stay Info Adults verified : <b>" + adults.get(i) + "</b>");
					reslogger.info(" Stay Info Adults verified : " + adults.get(i));
				} else {
					test_steps.add(" Stay Info Adults not found : <b>" + adults.get(i) + "</b>");
					reslogger.info(" Stay Info Adults not found : " + adults.get(i));
				}
				// Children
				String childrens = "//div[contains(@class,'ir-guestInfo')]/div/span//span[contains(@data-bind,'text: $data.numberOfChildren')]";
				WebElement childrensList = driver.findElement(By.xpath(childrens));
				if (childrensList.getText().trim().contains(children.get(i).trim())) {
					test_steps.add(" Stay Info Children verified : <b>" + children.get(i) + "</b>");
					reslogger.info(" Stay Info Children verified : " + children.get(i));
				} else {
					test_steps.add(" Stay Info Children not found : <b>" + children.get(i) + "</b>");
					reslogger.info(" Stay Info Children not found : " + children.get(i));
				}
				// Room Class
				String roomClasss1 = "//div[contains(@class,'ir-checkin-stay-info')]/..//div//label[contains(@data-bind,'roomClassName')]";
				WebElement roomClasss = driver.findElement(By.xpath(roomClasss1));
				if (roomClasss.getText().trim().equals((roomClass.get(i) + ":").trim())) {
					test_steps.add(" Stay Info RoomClass verified : <b>" + roomClass.get(i) + "</b>");
					reslogger.info(" Stay Info RoomClass verified : " + roomClass.get(i));
				} else {
					test_steps.add(" Stay Info RoomClass not found : <b>" + roomClass.get(i) + "</b>");
					reslogger.info(" Stay Info RoomClass not found : " + roomClass.get(i));
				}
				// GUest Name
				String guestName = "//div[contains(@class,'ir-checkin-stay-info')]/..//span[contains(@data-bind,'guestNameInSync')][contains(text(),'"
						+ salutation.get(i) + " " + guestFName.get(i) + " " + guestLName.get(i) + "')]";
				WebElement element = driver.findElement(By.xpath(guestName));

				if (element.isDisplayed()) {
					test_steps.add(" Stay Info Guest Name verified : <b>" + salutation.get(i) + " " + guestFName.get(i)
							+ " " + guestLName.get(i) + "</b>");
					reslogger.info(" Stay Info Guest Name verified : " + salutation.get(i) + " " + guestFName.get(i)
							+ " " + guestLName.get(i));
				} else {
					test_steps.add(" Stay Info Guest Name not found : <b>" + salutation.get(i) + " " + guestFName.get(i)
							+ " " + guestLName.get(i) + "</b>");
					reslogger.info(" Stay Info Guest Name not found : " + salutation.get(i) + " " + guestFName.get(i)
							+ " " + guestLName.get(i));
				}

				// RatePlan
				String ratePlans1 = "//div[contains(@class,'ir-checkin-stay-info')]/..//span[contains(@data-bind,'ratePlanName')]";
				WebElement ratePlans = driver.findElement(By.xpath(ratePlans1));
				if (ratePlans.getText().trim().equals(ratePlan.get(i).trim())) {
					test_steps.add(" Stay Info RatePlan verified :<b> " + ratePlan.get(i) + "</b>");
					reslogger.info(" Stay Info RatePlan verified : " + ratePlan.get(i));
				} else {
					test_steps.add(" Stay Info RatePlan not found : <b>" + ratePlan.get(i) + "</b>");
					reslogger.info(" Stay Info RatePlan not found : " + ratePlan.get(i));
				}
				// RoomCharges
				String roomCharge1 = "//div[contains(@class,'ir-checkin-stay-info')]/..//div//label[contains(@data-bind,'roomTotal ')]";
				WebElement roomCharge = driver.findElement(By.xpath(roomCharge1));
				if (roomCharge.getText().trim().equalsIgnoreCase(RoomCharges.get(i).trim())) {
					test_steps.add(" Stay Info RoomCharges verified : <b>" + RoomCharges.get(i).trim() + "</b>");
					reslogger.info(" Stay Info RoomCharges verified : " + RoomCharges.get(i).trim());
				} else {
					test_steps.add(" Stay Info RoomCharges not found : <b>" + RoomCharges.get(i).trim() + "</b>");
					reslogger.info(" Stay Info RoomCharges not found : " + RoomCharges.get(i).trim());
				}

			}

		}
	}

	public void verifyStayInfoCheckOutButton(WebDriver driver, ArrayList<String> test_steps, int RoomNO)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		int size = res.CP_Reservation_StayInfo_ThreeDotts.size();
		for (int i = 0; i < size; i++) {
			if (i == RoomNO) {
				Utility.ScrollToElement(res.CP_Reservation_StayInfo_CheckOutButton, driver);

				assertTrue(res.CP_Reservation_StayInfo_CheckOutButton.isDisplayed(),
						"Failed: To verify Check Out Button");
				test_steps.add("Verified  <b>Check Out  </b> Button For Room: <b>" + i + "</b>");
				reslogger.info("Verified Check Out Button for Room : " + i);

			}

		}

	}

	// public int ButtonSize;

	public ArrayList<String> getStayInfoButtonsText(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		ArrayList<String> buttonsName = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_Reservation_StayInfo_TotalButton.get(0), driver);
		int ButtonSize = res.CP_Reservation_StayInfo_TotalButton.size();
		for (int i = 0; i < ButtonSize; i++) {
			String text = res.CP_Reservation_StayInfo_TotalButton.get(i).getText();
			buttonsName.add(res.CP_Reservation_StayInfo_TotalButton.get(i).getText().toString());
		}

		return buttonsName;
	}

	public void verifyRoomStatusAfterCheckedInRoom(WebDriver driver, ArrayList<String> test_steps, List<String> Rooms,
			ArrayList<String> RoomAbbri, String DirtyStatus, String CleanStatus, String VacantStatus,
			String OccupiedStatus) throws InterruptedException

	{

		RoomStatus roomstatus = new RoomStatus();

		for (int i = 0; i < Rooms.size(); i++) {
			String[] room = Rooms.get(i).split(":");
			String FinalRoom = room[1].trim();
			reslogger.info(" Room No: " + FinalRoom);
			String[] roomClass = RoomAbbri.get(i).split(":");
			String FinalRoomClass = roomClass[0].trim();
			reslogger.info(" Room Class: " + FinalRoomClass);
			roomstatus.searchByRoomHashVerifyRoomStatus(driver, FinalRoom, FinalRoomClass, DirtyStatus, CleanStatus,
					VacantStatus, OccupiedStatus, test_steps);

		}

	}

	public void verifyPaymentDetailUpdateBy(WebDriver driver, String NameOnCard, String UpdateByName,
			String PaymentMethod) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String path = null;
		WebElement element = null;
		if (PaymentMethod.equals("MC")) {
			path = "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-description']/a[contains(text(),'Name: "
					+ NameOnCard + "')]";
			element = driver.findElement(By.xpath(path));
			int counter = 0;
			while (true) {
				if (!element.isDisplayed()) {
					break;
				} else if (counter == 40) {
					break;
				} else {
					counter++;
				}
			}

			Utility.ScrollToElement(element, driver);

		} else if (PaymentMethod.equals("Cash")) {
			path = "//tbody[contains(@data-bind,'ComputedFolioItems')]//tr//td[@class='lineitem-description']/a[contains(text(),'"
					+ PaymentMethod + "')]";
			element = driver.findElement(By.xpath(path));
			int counter = 0;
			while (true) {
				if (!element.isDisplayed()) {
					break;
				} else if (counter == 40) {
					break;
				} else {
					counter++;
				}
			}
			Wait.explicit_wait_elementToBeClickable(element, driver);
			Wait.WaitForElement(driver, path);
			Utility.ScrollToElement(element, driver);

		}
		element.click();
		reslogger.info("Click on Description");
		String updatePath = "//div[@id='ReservationPaymetItemDetail']/..//div[contains(@data-bind,'root.ShowUpateUserInfo')]/span[contains(text(),'"
				+ UpdateByName + "')]";
		Wait.WaitForElement(driver, updatePath);
		WebElement elementUpdateBy = driver.findElement(By.xpath(updatePath));
		Utility.ScrollToElement(elementUpdateBy, driver);
		assertTrue(elementUpdateBy.isDisplayed(), "Failed: to Verify Update By");
		reslogger.info("Verified Update By: " + UpdateByName);

	}

	public void clickPaymentDetailCancel(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.Cp_Reservation_PaymentDetail_CanceButton);
		Utility.ScrollToElement(res.Cp_Reservation_PaymentDetail_CanceButton, driver);
		res.Cp_Reservation_PaymentDetail_CanceButton.click();
		test_steps.add("Clicking on Cancel Button");
		reslogger.info("Clicking on Cancel Button");
	}

	public void clickPaymentDetailClose(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.Cp_Reservation_PaymentDetail_CloseButton);
		Utility.ScrollToElement(res.Cp_Reservation_PaymentDetail_CloseButton, driver);
		res.Cp_Reservation_PaymentDetail_CloseButton.click();
		test_steps.add("Clicking on Close Button");
		reslogger.info("Clicking on Close Button");
	}

	public String getTripSummaryTripTotalAmountBeforeReservation(WebDriver driver, ArrayList test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_NewReservation_TripTotalAmount, driver);
		String Balance = res.CP_NewReservation_TripTotalAmount.getText();
		Balance = Balance.replace("$", "");
		test_steps.add("TripSummary Trip Total Before Reservation: " + Balance);
		reslogger.info("TripSummary Trip Total Before Reservation: " + Balance);
		return Balance;
	}

	public void clickCheckOutButton(WebDriver driver, ArrayList test_steps, int balance) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_ConfirmCheckOut_Button);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ConfirmCheckOut_Button, driver);
		if (balance > 0) {

			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckOut_Button, driver);
			res.CP_Reservation_ConfirmCheckOut_Button.click();
			test_steps.add("Clicking on  Proceed to Check-Out Payment Button");
			reslogger.info("Clicking on Proceed to Check-Out Payment Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);

		} else {
			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckOut_Button, driver);
			res.CP_Reservation_ConfirmCheckOut_Button.click();
			test_steps.add("Clicking on  Confirm Check-Out Button");
			reslogger.info("Clicking on Confirm  Check-Out Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
		}

	}

	public boolean confirmCheckOutButton = false, confirmCheckOutWithPayment = false;

	public String clickCheckOutButtons(WebDriver driver, ArrayList test_steps,

			String checkINConfirm, String CheckINCOnfirmWithPayment) throws InterruptedException {
		String buttonText = null;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_ConfirmCheckOut_Button);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ConfirmCheckOut_Button, driver);

		if (res.CP_Reservation_ConfirmCheckOut_Button.getText().toLowerCase().trim()
				.equals(checkINConfirm.toLowerCase().trim())) {

			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckOut_Button, driver);
			buttonText = res.CP_Reservation_ConfirmCheckOut_Button.getText();
			confirmCheckOutButton = true;
			reslogger.info(buttonText);
			res.CP_Reservation_ConfirmCheckOut_Button.click();
			test_steps.add("Clicking on  Confirm Check-Out Button");
			reslogger.info("Clicking on Confirm  Check-Out Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
		} else if (res.CP_Reservation_ConfirmCheckOut_Button.getText().toLowerCase().trim()
				.equals(CheckINCOnfirmWithPayment.toLowerCase().trim())) {

			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckOut_Button, driver);
			buttonText = res.CP_Reservation_ConfirmCheckOut_Button.getText();
			confirmCheckOutWithPayment = true;
			reslogger.info(buttonText);
			res.CP_Reservation_ConfirmCheckOut_Button.click();
			test_steps.add("Clicking on  Proceed to Check-Out Payment Button");
			reslogger.info("Clicking on Proceed to Check-Out Payment Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);

		}

		return buttonText;
	}

	/*
	 * public void AddLineItem(WebDriver driver, ArrayList test_steps, String
	 * LineItemCategory, String LineItemCategoryAmount) throws InterruptedException
	 * { test_steps.
	 * add("******************* Add Line Item to folio**********************");
	 * reslogger.
	 * info("******************* Add Line Item to folio**********************");
	 * 
	 * Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
	 * Wait.explicit_wait_visibilityof_webelement_150(ReservationPage. Add_LineItem,
	 * driver); Utility.ScrollToElement(ReservationPage.Add_LineItem, driver);
	 * ReservationPage.Add_LineItem.click(); test_steps.add("Click Add");
	 * reslogger.info("Click Add"); Wait.wait2Second();
	 * Utility.ScrollToElement(ReservationPage.Select_LineItem_Category, driver);
	 * Wait.wait2Second();
	 * Wait.explicit_wait_visibilityof_webelement(ReservationPage.
	 * Select_LineItem_Category, driver); new
	 * Select(ReservationPage.Select_LineItem_Category).selectByVisibleText(
	 * LineItemCategory); test_steps.add("Adding line item to folio : " +
	 * LineItemCategory); reslogger.info("Adding line item to folio : " +
	 * LineItemCategory);
	 * ReservationPage.Enter_LineItem_Amount.sendKeys(LineItemCategoryAmount);
	 * test_steps.add("Add Line Item Amount : " + LineItemCategoryAmount);
	 * reslogger.info("Add Line Item Amount : " + LineItemCategoryAmount);
	 * Wait.wait2Second(); ReservationPage.Commit_LineItem.click();
	 * test_steps.add("Click Commit"); reslogger.info("Click Commit"); String
	 * saveFolio = "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
	 * 
	 * Wait.WaitForElement(driver, saveFolio);
	 * driver.findElement(By.xpath(saveFolio)).click();
	 * test_steps.add("Click on Save Folio"); reslogger.info("Click on Save Folio");
	 * String loading = "(//div[@class='ir-loader-in'])"; int count = 0; while
	 * (true) { if (!driver.findElement(By.xpath(loading)).isDisplayed()) { break; }
	 * else if (count == 20) { break; } else { count++; Wait.wait2Second(); } }
	 * reslogger.info("Waited to loading symbol"); }
	 */

	public void AddLineItemWithDate(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String LineItemCategoryAmount, String ItemAddedDate) throws InterruptedException {
		test_steps.add("******************* Add Line Item to folio**********************");
		reslogger.info("******************* Add Line Item to folio**********************");

		String[] item = LineItemCategory.split("\\|");
		String[] amt = LineItemCategoryAmount.split("\\|");
		for (int i = 0; i < item.length; i++) {

			Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
			Wait.explicit_wait_visibilityof_webelement_150(ReservationPage.Add_LineItem, driver);
			Utility.ScrollToElement(ReservationPage.Add_LineItem, driver);
			ReservationPage.Add_LineItem.click();
			test_steps.add("Click Add");
			reslogger.info("Click Add");
			Wait.wait2Second();
			Utility.ScrollToElement(ReservationPage.Select_LineItem_Category, driver);
			Wait.wait2Second();
			Wait.explicit_wait_visibilityof_webelement(ReservationPage.Select_LineItem_Category, driver);
			new Select(ReservationPage.Select_LineItem_Category).selectByVisibleText(item[i]);
			test_steps.add("Adding line item to folio : " + item[i]);
			reslogger.info("Adding line item to folio : " + item[i]);

			if (Utility.validateString(ItemAddedDate)) {
				ReservationPage.enterlineItemDate.clear();
				ReservationPage.enterlineItemDate.sendKeys(ItemAddedDate);
				ReservationPage.enterlineItemDate.sendKeys(Keys.TAB);
				test_steps.add("Adding date : " + ItemAddedDate);
				reslogger.info("Adding date : " + ItemAddedDate);
			}

			test_steps.add("Line Item Quantity : 1");
			reslogger.info("Line Item Quantity : 1");

			ReservationPage.Enter_LineItem_Amount.sendKeys(amt[i]);
			test_steps.add("Add Line Item Amount : " + amt[i]);
			reslogger.info("Add Line Item Amount : " + amt[i]);

			Wait.wait2Second();
			ReservationPage.Commit_LineItem.click();
			test_steps.add("Click Commit");
			reslogger.info("Click Commit");
			Wait.wait2Second();
		}
		// String saveFolio =
		// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.WaitForElement(driver, saveFolio);
		Wait.waitForElementToBeClickable(By.xpath(saveFolio), driver);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save Folio");
		reslogger.info("Click on Save Folio");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");
	}

	public void AddLineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String LineItemCategoryAmount) throws InterruptedException {
		test_steps.add("******************* Add Line Item to folio**********************");
		reslogger.info("******************* Add Line Item to folio**********************");

		String[] item = LineItemCategory.split("\\|");
		String[] amt = LineItemCategoryAmount.split("\\|");
		for (int i = 0; i < item.length; i++) {

			Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
			Wait.explicit_wait_visibilityof_webelement_150(ReservationPage.Add_LineItem, driver);
			Utility.ScrollToElement(ReservationPage.Add_LineItem, driver);
			ReservationPage.Add_LineItem.click();
			test_steps.add("Click Add");
			reslogger.info("Click Add");
			Wait.wait2Second();
			Utility.ScrollToElement(ReservationPage.Select_LineItem_Category, driver);
			Wait.wait2Second();
			Wait.explicit_wait_visibilityof_webelement(ReservationPage.Select_LineItem_Category, driver);
			new Select(ReservationPage.Select_LineItem_Category).selectByVisibleText(item[i]);
			test_steps.add("Adding line item to folio : " + item[i]);
			reslogger.info("Adding line item to folio : " + item[i]);

			test_steps.add("Line Item Quantity : 1");
			reslogger.info("Line Item Quantity : 1");

			ReservationPage.Enter_LineItem_Amount.sendKeys(amt[i]);
			test_steps.add("Add Line Item Amount : " + amt[i]);
			reslogger.info("Add Line Item Amount : " + amt[i]);

			Wait.wait2Second();
			ReservationPage.Commit_LineItem.click();
			test_steps.add("Click Commit");
			reslogger.info("Click Commit");
			Wait.wait2Second();
		}
		// String saveFolio =
		// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save Folio");
		reslogger.info("Click on Save Folio");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");
	}

	public void verifyAddedLineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String LineItemCategoryAmount) {
		test_steps.add("******************* Verifying Added Line Item to folio**********************");
		reslogger.info("******************* Verifying Added Line Item to folio**********************");

		String includeTax = "//span[text()='Include Taxes in Line Items']/preceding-sibling::input";
		Wait.WaitForElement(driver, includeTax);
		if (driver.findElement(By.xpath(includeTax)).isSelected()) {
			driver.findElement(By.xpath(includeTax)).click();
		}

		String line = "//td[@class='lineitem-category']/span";

		int count = driver.findElements(By.xpath(line)).size();
		String text = null;

		line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])";
		Wait.WaitForElement(driver, line);
		test_steps.add("Line item category verified in folio : " + LineItemCategory);
		reslogger.info("Line item category verified in folio : " + LineItemCategory);

		line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../following-sibling::td[contains(@class,'amount')]/span[contains(text(),'"
				+ LineItemCategoryAmount + "')]";
		Wait.WaitForElement(driver, line);
		test_steps.add("Line item category amount verified in folio : " + LineItemCategoryAmount);
		reslogger.info("Line item category amount verified in folio : " + LineItemCategoryAmount);
	}

	public void void_LineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String LineItemCategoryAmount) throws InterruptedException {
		test_steps.add("******************* Void Line Item to folio**********************");
		reslogger.info("******************* Void Line Item to folio**********************");

		Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
		String line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])";

		String input = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../preceding-sibling::td//input";
		Wait.WaitForElement(driver, input);
		driver.findElement(By.xpath(input)).click();
		test_steps.add("Selecting Line item category  : " + LineItemCategory);
		reslogger.info("Selecting Line item category  : " + LineItemCategory);

		// String lineItemVoid = "//button[text()='Void']";
		String lineItemVoid = "//button[contains(@data-bind,'fnVoidFolioItems')]";
		Wait.WaitForElement(driver, lineItemVoid);
		driver.findElement(By.xpath(lineItemVoid)).click();
		test_steps.add("Voiding Line item category  : " + LineItemCategory);
		reslogger.info("Voiding Line item category  : " + LineItemCategory);
		Wait.wait3Second();
		String notes = "//h4[text()='Notes']/../..//textarea";
		Wait.WaitForElement(driver, notes);
		driver.findElement(By.xpath(notes)).sendKeys("Test Notes");
		test_steps.add("Enter Void notes as : Test Notes");
		reslogger.info("Enter Void notes as : Test Notes");

		String voidline = "//h4[text()='Notes']/../..//button[text()='Void']";
		Wait.WaitForElement(driver, voidline);
		driver.findElement(By.xpath(voidline)).click();
		test_steps.add("Click on void");
		reslogger.info("Click on void");

		Wait.wait2Second();
		ReservationPage.Commit_LineItem.click();
		test_steps.add("Click Commit");
		reslogger.info("Click Commit");
		Wait.wait2Second();
		// String saveFolio =
		// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save Folio");
		reslogger.info("Click on Save Folio");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");

		line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])";

		count = driver.findElements(By.xpath(line)).size();
		if (count <= 0) {
			test_steps.add("Successfully voided line item : " + LineItemCategory);
			reslogger.info("Successfully voided line item : " + LineItemCategory);
		} else {
			test_steps.add("Line item not voided : " + LineItemCategory);
			reslogger.info("Line item not voided : " + LineItemCategory);
		}
	}

	public void void_LineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory)
			throws InterruptedException {
		test_steps.add("******************* Void Line Item to folio**********************");
		reslogger.info("******************* Void Line Item to folio**********************");

		Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
		String line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])";

		String input = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../preceding-sibling::td//input";
		Wait.WaitForElement(driver, input);
		int previousCount = driver.findElements(By.xpath(line)).size();
		driver.findElement(By.xpath(input)).click();
		test_steps.add("Selecting Line item category  : " + LineItemCategory);
		reslogger.info("Selecting Line item category  : " + LineItemCategory);

		String lineItemVoid = "//button[text()='Void']";
		Wait.WaitForElement(driver, lineItemVoid);
		driver.findElement(By.xpath(lineItemVoid)).click();
		test_steps.add("Voiding Line item category  : " + LineItemCategory);
		reslogger.info("Voiding Line item category  : " + LineItemCategory);
		Wait.wait3Second();
		String notes = "//h4[text()='Notes']/../..//textarea";
		Wait.WaitForElement(driver, notes);
		driver.findElement(By.xpath(notes)).sendKeys("Test Notes");
		test_steps.add("Enter Void notes as : Test Notes");
		reslogger.info("Enter Void notes as : Test Notes");

		String voidline = "//h4[text()='Notes']/../..//button[text()='Void']";
		Wait.WaitForElement(driver, voidline);
		try {
			driver.findElement(By.xpath(voidline)).click();
		} catch (Exception e) {
			JavascriptExecutor jse = (JavascriptExecutor) driver;
			jse.executeScript("arguments[0].click();", driver.findElement(By.xpath(voidline)));
		}
		test_steps.add("Click on void");
		reslogger.info("Click on void");

		Wait.wait2Second();
		// ReservationPage.Commit_LineItem.click();
		test_steps.add("Click Commit");
		reslogger.info("Click Commit");
		Wait.wait2Second();
		// String saveFolio =
		// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save Folio");
		reslogger.info("Click on Save Folio");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");

		line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])";

		count = driver.findElements(By.xpath(line)).size();
		if (count < previousCount) {
			test_steps.add("Successfully voided line item : " + LineItemCategory);
			reslogger.info("Successfully voided line item : " + LineItemCategory);
		} else {
			test_steps.add("Line item not voided : " + LineItemCategory);
			reslogger.info("Line item not voided : " + LineItemCategory);
		}
	}

	public void verify_VoidedLineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String LineItemCategoryAmount) throws InterruptedException {
		test_steps.add("******************* Verify Voided Line Item to folio**********************");
		reslogger.info("******************* Verify Voided Line Item to folio**********************");

		String voidLine = "//span[text()='Display Void Items']/preceding-sibling::input";
		Wait.WaitForElement(driver, voidLine);
		if (!driver.findElement(By.xpath(voidLine)).isSelected()) {
			driver.findElement(By.xpath(voidLine)).click();
			test_steps.add("Click on Display Void Items");
			reslogger.info("Click on Display Void Items");
		}

		String line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])";

		int count = driver.findElements(By.xpath(line)).size();
		if (count > 0) {
			test_steps.add("Successfully verified voided line item : " + LineItemCategory);
			reslogger.info("Successfully verified voided line item : " + LineItemCategory);
		} else {
			test_steps.add("Line item not voided : " + LineItemCategory);
			reslogger.info("Line item not voided : " + LineItemCategory);
		}

		line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../preceding-sibling::td//i[contains(@data-bind,'PendingToPosted')]";
		count = driver.findElements(By.xpath(line)).size();
		if (count > 0) {
			test_steps.add("Successfully verified voided line item image");
			reslogger.info("Successfully verified voided line item image");
		} else {
			test_steps.add("Voided line item image validation failed");
			reslogger.info("Voided line item image validation failed");
		}

		line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../preceding-sibling::td[contains(@class,'note')]/i";
		String notes = driver.findElement(By.xpath(line)).getAttribute("title");

		if (notes.equalsIgnoreCase("test Notes")) {
			test_steps.add("Successfully verified voided line item notes");
			reslogger.info("Successfully verified voided line item notes");
		} else {
			test_steps.add("Voided line item notes validation failed");
			reslogger.info("Voided line item notes validation failed");
		}

		line = "((//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../following-sibling::td//span[contains(text(),'0.00')])[2]";
		count = driver.findElements(By.xpath(line)).size();
		if (count > 0) {
			test_steps.add("Successfully verified voided line item amount 0.00");
			reslogger.info("Successfully verified voided line item amount 0.00");
		} else {
			test_steps.add("Voided line item amount validation failed");
			reslogger.info("Voided line item amount validation failed");
		}

		if (driver.findElement(By.xpath(voidLine)).isSelected()) {
			driver.findElement(By.xpath(voidLine)).click();
			test_steps.add("Click on Display Void Items");
			reslogger.info("Click on Display Void Items");
		}
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: basicSearch_WithGuestName ' Description: Reservation search
	 * with guest name until it shows ' Input parameters: WebDriver, ArrayList,
	 * String ' Return value: String ' Created By: Naveen Banda ' Created On:
	 * 04-04-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String searchWithGuestName(WebDriver driver, ArrayList<String> test_steps, String guestName)
			throws InterruptedException {
		Elements_Reservation_SearchPage resservationSearch = new Elements_Reservation_SearchPage(driver);

		String getGuestName = null;

		Wait.explicit_wait_visibilityof_webelement_120(resservationSearch.BasicGuestName, driver);
		resservationSearch.BasicGuestName.clear();
		resservationSearch.BasicGuestName.sendKeys(guestName);
		Wait.explicit_wait_visibilityof_webelement_120(resservationSearch.Click_BasicSearch, driver);
		resservationSearch.Click_BasicSearch.click();
		Wait.wait3Second();
		if (resservationSearch.noRecordAlertMessage.isDisplayed()) {
			for (int i = 0; i < 5; i++) {
				resservationSearch.Click_BasicSearch.click();
				Wait.wait3Second();
				if (!resservationSearch.noRecordAlertMessage.isDisplayed()) {
					getGuestName = resservationSearch.Get_Guest_Name.getAttribute("title");
					break;
				}
			}
		} else {
			getGuestName = resservationSearch.Get_Guest_Name.getAttribute("title");
		}
		reslogger.info("Searching for a reservation with guest name as : <b>" + guestName + "</b>");
		test_steps.add("Searching for a reservation with guest name as : <b>" + guestName + "</b>");
		return getGuestName;
	}

	public void verifyCheckInPolicy(WebDriver driver, ArrayList<String> test_steps, String policyName,
			String policyText) throws ParseException, InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(
				By.xpath(OR_Reservation.CP_Reservation_POLICIESANDDISCLAIMERS_CheckINPolicyCollapse), driver);
		Utility.ScrollToViewElementINMiddle(driver, res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyCollapse);
		Utility.clickThroughJavaScript(driver, res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyCollapse);
		try {
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkInPolicyName), driver);
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, driver.findElement(
					By.xpath(OR_Reservation.CP_Reservation_POLICIESANDDISCLAIMERS_CheckINPolicyCollapse + "/..")));
		}
		String checkinPolicyName = res.checkInPolicyName.getText();
		assertEquals(checkinPolicyName, policyName, "Failed - Associated policy is not matched with created one");
		test_steps.add("Successfully verified associated check-in policy as : <b>" + checkinPolicyName + "</b>");

		String checkinPolicyToolTip = res.checkInPolicyToolTip.getAttribute("title");
		assertEquals(checkinPolicyToolTip, policyName, "Failed - Associated policy is not matched with created one");
		test_steps.add("Successfully verified associated check-in policy tool tip text as : <b>" + checkinPolicyToolTip
				+ "</b>");

		if (Utility.validateString(policyText)) {
			String checkInPolicyText = res.checkInPolicyText.getText();
			assertEquals(checkInPolicyText, policyText,
					"Failed - Associated policy text is not matched with created one");
			test_steps
					.add("Successfully verified associated check-in policy text as : <b>" + checkInPolicyText + "</b>");
		}

	}

	/*
	 * ======= Elements_Reservation ReservationPage = new
	 * Elements_Reservation(driver);
	 * Wait.explicit_wait_visibilityof_webelement(ReservationPage. Click_Email_icon,
	 * driver); Utility.ScrollToElement(ReservationPage.Click_Email_icon, driver);
	 * 
	 * ReservationPage.Click_Email_icon.click();
	 * Utility.app_logs.info("Click Mail Icon");
	 * Wait.explicit_wait_xpath(OR.Verify_Send_Email_Popup, driver);
	 * Wait.explicit_wait_absenceofelement(OR.
	 * Verify_loading_popup_mailContentPopUp, driver); Wait.wait5Second(); String
	 * GetEmailid = ReservationPage.Get_email_Id.getText();
	 * reslogger.info(GetEmailid + "" + GetEmailid);
	 * 
	 * ReservationPage.Get_email_Id.clear(); Wait.wait3Second();
	 * ReservationPage.Get_email_Id.sendKeys(Email);
	 * 
	 * if(Attachment.equalsIgnoreCase("")||Attachment.equals(null)) {
	 * Utility.app_logs.info("No Attachment"); }else { new
	 * Select(ReservationPage.Select_Attachment).selectByVisibleText(Attachment) ; }
	 * Wait.wait5Second(); ReservationPage.Click_Send_Email.click();
	 * Utility.app_logs.info("Click Send Email "); Wait.wait10Second(); }
	 * 
	 * } >>>>>>> AUTOMATION-1361
	 */
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickOnGuestName ' Description: Clicking on guest name after
	 * searching for a reservation ' Input parameters: WebDriver, ArrayList ' Return
	 * value: void ' Created By: Naveen Banda ' Created On: 04-04-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void clickOnGuestName(WebDriver driver, ArrayList<String> test_steps) {
		try {
			Elements_Reservation_SearchPage resservationSearch = new Elements_Reservation_SearchPage(driver);
			Wait.explicit_wait_visibilityof_webelement_120(resservationSearch.Get_Guest_Name, driver);
			resservationSearch.Get_Guest_Name.click();
			test_steps.add("Clicked on guest name and opened guest profile");
		} catch (Exception e) {

		}
	}

	public ArrayList<String> cancelPaymentCalculations(ArrayList<String> baseAmount, ArrayList<String> totalNights,
			String attribute, String attributeValue) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		ArrayList<String> roomCharges = new ArrayList<>();
		ArrayList<String> amountDetails = new ArrayList<>();
		double amountToDeduct = 0.00;
		reslogger.info("Base Amount: " + baseAmount);
		for (int i = 0; i < baseAmount.size(); i++) {
			roomCharges
					.add(df.format((Double.parseDouble(baseAmount.get(i))) * (Double.parseDouble(totalNights.get(i)))));
		}
		reslogger.info("Room Charges: " + roomCharges);
		if (attribute.equalsIgnoreCase("Room Charges")) {
			reslogger.info("In if");
			for (int i = 0; i < roomCharges.size(); i++) {
				reslogger.info("Room charge: " + roomCharges.get(i));
				double abc = (Double.parseDouble(roomCharges.get(i))) * (Double.parseDouble(attributeValue));
				reslogger.info("Per: " + abc);
				double perc = abc / 100;
				amountToDeduct = amountToDeduct + perc;
			}
		} else if (attribute.equalsIgnoreCase("First Night") || attribute.equalsIgnoreCase("First Nights")) {
			for (int i = 0; i < baseAmount.size(); i++) {
				amountToDeduct = amountToDeduct + Double.parseDouble(baseAmount.get(i));
			}
		}

		if (attribute.equalsIgnoreCase("percent of stay")) {
			reslogger.info("In if");
			for (int i = 0; i < roomCharges.size(); i++) {
				reslogger.info("Room charge: " + roomCharges.get(i));
				double abc = (Double.parseDouble(roomCharges.get(i))) * (Double.parseDouble(attributeValue));
				reslogger.info("Per: " + abc);
				double perc = abc / 100;
				amountToDeduct = amountToDeduct + perc;
			}
		} else if (attribute.equalsIgnoreCase("flat fee")) {
			amountToDeduct = Double.parseDouble(attributeValue);
		}

		amountDetails.add(df.format(amountToDeduct));
		reslogger.info(amountDetails);
		return amountDetails;
	}

	// public ArrayList<String> checkInPaymentCalculations(ArrayList<String>
	// baseAmount, ArrayList<String> totalNights, String policyFor,
	// String percentage, String taxes) {
	// DecimalFormat df = new DecimalFormat("0.00");
	// df.setMaximumFractionDigits(2);
	// ArrayList<String> roomCharges = new ArrayList<>();
	// ArrayList<String> amountDetails = new ArrayList<>();
	// double balance = 0.00;
	// double amount = 0.00;
	// for (int i = 0; i < baseAmount.size(); i++) {
	// roomCharges.add(df.format(
	// (Double.parseDouble(baseAmount.get(i)))*(Double.parseDouble(totalNights.get(i)))
	// ) );
	// }
	// if (policyFor.equalsIgnoreCase("Capture")) {
	// for (int i = 0; i < roomCharges.size(); i++) {
	// double abc =
	// (Double.parseDouble(roomCharges.get(i)))*(Double.parseDouble(percentage));
	// double perc = abc/100;
	// balance = balance+perc;
	// }
	// }else if (policyFor.equalsIgnoreCase("Authorize")) {
	// for (int i = 0; i < roomCharges.size(); i++) {
	// double abc =
	// (Double.parseDouble(roomCharges.get(i)))*(Double.parseDouble(percentage));
	// double perc = abc/100;
	// balance = balance+perc;
	// }
	// }
	// return amountDetails;
	// }

	public ArrayList<String> paymentCheckInPopupVerify(WebDriver driver, ArrayList<String> test_steps, String title,
			String expiryDate, String nameOnCard, String cardNo, String paymentMethod, String type, String percentage,
			String policyFor, String policyName, String policyText, ArrayList<String> baseAmount,
			ArrayList<String> totalNights, String taxes, String attr, String attrValue) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> details = new ArrayList<>();
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle), driver);
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		try {

			String titleDisplayed = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText();
			reslogger.info(" Verified Payment Page Title : " + titleDisplayed);
			assertEquals(titleDisplayed, title, "Failed: To verify Payment Page Title");
			test_steps.add(" Verified Payment Page Title :<b> " + title + "</b>");

			WebElement paymentElement = driver.findElement(By.xpath(
					"//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + paymentMethod + "']"));
			String paymentMethodDisplayed = paymentElement.getText().trim();
			assertEquals(paymentMethodDisplayed, paymentMethod, "Failed: To verify Payment Method");
			test_steps.add(" Verified Payment Method:<b> " + paymentMethodDisplayed + "</b> ");
			reslogger.info(" Verified Payment Method: " + paymentMethodDisplayed);

			String cardNoDisplayed = ((String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_CardNumber)).trim();
			assertEquals(cardNoDisplayed, cardNo, "Failed: To verify Card Number");
			test_steps.add(" Verified Card Number: <b>" + cardNoDisplayed + "</b>");
			reslogger.info(" Verified Card Number");

			String nameOnCardDisplayed = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_NameOnCard);
			assertEquals(nameOnCardDisplayed, nameOnCard, "Failed: To verify Name on Card ");
			test_steps.add("Verified Name on Card:<b>  " + nameOnCard + "</b>");
			reslogger.info(" Verified Name on Card");
			String expiryDateDisplayed = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_Expiry);
			assertEquals(expiryDateDisplayed, expiryDate, "Failed: To verify Expiry Date ");
			test_steps.add(" Verified Expiry Date:<b> " + expiryDateDisplayed + "</b>");
			reslogger.info(" Verified Expiry Date");

			String typeDisplayed = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.getText().trim();
			String amountDisplayed = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText().trim();
			String balanceDisplayed = null;
			String buttonExp = null;
			String buttonDisplayed = res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().trim();

			if (title.contains("Check In Payment")) {
				balanceDisplayed = res.CheckInPaymentPopup_Balance.getText().replace("$ ", "");
				String policyDisplayed = res.checkInPaymentPopupPolicyName.getText();
				assertEquals(policyDisplayed, policyName, "Failed: To verify  type");
				test_steps.add(" Verified Policy name is :<b> " + policyDisplayed + "</b>");
				reslogger.info(" Verified Check-in payment type is : " + policyDisplayed);

				Actions action = new Actions(driver);
				action.moveToElement(res.CheckInReservation_PolicyName).perform();
				String toolTipPolicyDesc = res.CancelRoom_ToolTip_PolicyDescription.getText();
				reslogger.info(" Verified tool tip text at policy name : " + toolTipPolicyDesc);
				assertEquals(toolTipPolicyDesc, policyText, "Failed: To verify Payment Page Title");
				test_steps.add(" Verified tool tip text at policy name as :<b> " + toolTipPolicyDesc + "</b>");

				assertEquals(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.isEnabled(), false,
						"Failed - Amount is in read only and can be changed");
				test_steps.add("Amount for <b>" + policyFor + "</b> is read only and can't be changeds");

				assertEquals(typeDisplayed, type, "Failed: To verify  type");
				test_steps.add(" Verified Check-in payment type is :<b> " + type + "</b>");
				reslogger.info(" Verified Check-in payment type is : " + type);

				try {
					boolean readOnly = driver.findElement(By.xpath(
							"//button[@class='btn dropdown-toggle disabled btn-default'][@title='" + type + "']"))
							.isDisplayed();// res.paymentCheckInPopupAuthTypeReadOnly.isDisplayed();
					assertEquals(readOnly, true, "Failed - Payment type is read only");
					test_steps.add(
							"Successfully verified Payment type <b>" + type + "</b> is read only and can't be changed");
				} catch (Exception e) {
					boolean editable = driver
							.findElement(By
									.xpath("//button[@class='btn dropdown-toggle btn-default'][@title='" + type + "']"))
							.isDisplayed();
					assertEquals(editable, true, "Failed - Payment type is editable");
					test_steps.add("Successfully verified Payment type is editable");
				}
				reslogger.info("Room amount list: " + baseAmount);
				reslogger.info("total nights list: " + totalNights);
				double totalAmount = 0.00;
				for (int i = 0; i < baseAmount.size(); i++) {
					totalAmount = (totalAmount)
							+ (Double.parseDouble(baseAmount.get(i)) * Double.parseDouble(totalNights.get(i)));
				}
				reslogger.info("Total amount: " + totalAmount);
				reslogger.info("Taxes: " + taxes);
				totalAmount = totalAmount + Double.parseDouble(taxes);
				reslogger.info("Total amount with Tax: " + totalAmount);
				String balanceExp = df.format(totalAmount);
				double amount2 = (totalAmount * Double.parseDouble(percentage)) / 100;
				String amountExp = df.format(amount2);
				details.add(balanceExp);
				details.add(amountExp);
				test_steps.add("Calculated policy amount <b>" + percentage + "</b> % from total amount <b>" + balanceExp
						+ "</b> is <b>" + amountExp + "</b>");

				assertEquals(amountDisplayed, amountExp,
						"Failed - Amount for " + policyFor + " while check-in is not applied as per policy");
				test_steps.add("Successfully Verified Amount for <b>" + policyFor
						+ "</b> while check-in is applied as per policy is <b>" + amountExp + "</b>");

				assertEquals(balanceDisplayed, balanceExp, "Failed - Verify balance inclunding taxes");
				test_steps.add("Successfully Verified balance inclunding taxes <b>" + balanceExp + "</b>");

				if (policyFor.equalsIgnoreCase("Capture")) {
					buttonExp = "PAY $ " + df.format(amount2);
				} else if (policyFor.equalsIgnoreCase("Authorize")) {
					buttonExp = policyFor.toUpperCase() + " $ " + df.format(amount2);
				}
				assertEquals(buttonDisplayed, buttonExp, "Failed: To verify Button for " + buttonDisplayed);
				test_steps.add(" Verified button text as :<b> " + buttonDisplayed + "</b>");
				reslogger.info(" Verified button text as :<b> " + buttonDisplayed + "</b>");

			} else if (title.contains("Cancellation Payment")) {
				balanceDisplayed = Utility.removeCurrencySignBracketsAndSpaces(res.cancelPaymentPopupBalance.getText());
				if (!(typeDisplayed.equalsIgnoreCase(type))) {
					res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
					driver.findElement(
							By.xpath("//ul[@class='dropdown-menu inner']//span[contains(text(),'" + type + "')]"))
							.click();
				}
				ArrayList<String> payment = cancelPaymentCalculations(baseAmount, totalNights, attr, attrValue);
				details.add(payment.get(0));
				assertEquals(balanceDisplayed, payment.get(0),
						"Failed - Balance while cancelling reservation is not matched with one night charge");
				test_steps.add("Successfully verified balance displayed on cancel reservation popup is <b>"
						+ balanceDisplayed + "</b>");
				assertEquals(amountDisplayed, payment.get(0),
						"Failed - Amount while cancelling reservation is not matched with one night charge");
				test_steps.add("Successfully verified amount displayed on cancel reservation popup is <b>"
						+ amountDisplayed + "</b>");
				if (type.equalsIgnoreCase("Capture")) {
					buttonExp = "PAY $ " + payment.get(0);
				} else if (type.equalsIgnoreCase("Refund")) {
					buttonExp = "REFUND $ " + payment.get(0);
				}
				assertEquals(buttonDisplayed, buttonExp, "Failed - Verify button for " + type);
				test_steps.add("Successfully verified button text displayed on cancel reservation popup is <b>"
						+ buttonDisplayed + "</b>");
			}
		} catch (Exception e) {
			reslogger.info(e);
		}
		return details;
	}

	public void verifyFolioLineItem(WebDriver driver, ArrayList<String> test_steps, ArrayList<String> baseAmount,
			ArrayList<String> totalNights, String totalAmount, String paymentType, String authAmount, String policyFor)
			throws Exception {
		ArrayList<String> roomCharges = new ArrayList<>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		double folioRoomChargeLineItems = 0.00;
		double folioAuthOrCaptureLineItems = 0.00;
		double folioRoomCharges = 0.00;
		double folioIncidentals = 0.00;
		double folioTaxes = 0.00;
		double folioPayments = 0.00;
		double folioTotalCharges = 0.00;
		double folioBalance = 0.00;
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);

		List<WebElement> rooms = res.guestFolioAllGuestsFromDropDown;
		reslogger.info(rooms.size());
		for (WebElement roomsToSelect : rooms) {
			res.guestFolioGuestDropDown.click();
			Wait.wait1Second();
			roomsToSelect.click();
			List<WebElement> roomChargesAmount = driver.findElements(
					By.xpath("//span[contains(text(), 'Room Charge')]/../..//td[@class='lineitem-amount']"));
			if (roomChargesAmount.size() != 0) {
				for (WebElement getRoomCharges : roomChargesAmount) {
					double roomCharge = Double.parseDouble(getRoomCharges.getText().replace("$ ", ""));
					folioRoomChargeLineItems = folioRoomChargeLineItems + roomCharge;
				}
			}
			List<WebElement> authOrCaptureAmount = driver.findElements(
					By.xpath("//span[contains(text(), '" + paymentType + "')]/../..//td[@class='lineitem-amount']"));
			if (authOrCaptureAmount.size() != 0) {
				for (WebElement getAuthOrCaptureCharges : authOrCaptureAmount) {
					double authOrCaptureCharge = Double
							.parseDouble(getAuthOrCaptureCharges.getText().replace("$ ", ""));
					folioAuthOrCaptureLineItems = folioAuthOrCaptureLineItems + authOrCaptureCharge;
				}
			}
			// folioAuthOrCaptureLineItems =
			// folioAuthOrCaptureLineItems+Double.parseDouble(getFolioAmount(driver,
			// test_steps, paymentType));
			folioRoomCharges = folioRoomCharges + Double.parseDouble(get_RoomCharge(driver, test_steps));
			folioTotalCharges = folioTotalCharges + Double.parseDouble(get_TotalCharges(driver, test_steps));
			folioPayments = folioPayments + Double.parseDouble(get_Payments(driver, test_steps));
			String balance1 = get_Balance(driver, test_steps);
			if (balance1.contains("(") || balance1.contains(")")) {
				balance1 = balance1.replace("(", "");
				balance1 = balance1.replace(")", "");
				folioBalance = folioBalance - Double.parseDouble(balance1);
			} else {
				folioBalance = folioBalance + Double.parseDouble(get_Balance(driver, test_steps));
			}
		}
		String balanceExp = null;
		String paymentsExp = null;
		if (policyFor.equalsIgnoreCase("Capture")) {
			double amount2 = Double.parseDouble(authAmount);
			double total2 = Double.parseDouble(totalAmount);
			double balance2 = total2 - amount2;
			double payments2 = total2 - balance2;
			balanceExp = df.format(balance2);
			paymentsExp = df.format(payments2);
		} else if (policyFor.equalsIgnoreCase("Authorize")) {
			balanceExp = totalAmount;
			paymentsExp = "0.00";
		}
		String folioRoomChargeLineItemsDisplayed = df.format(folioRoomChargeLineItems);
		String folioAuthOrCaptureLineItemsDisplayed = df.format(folioAuthOrCaptureLineItems);
		String folioRoomChargesDisplayed = df.format(folioRoomCharges);
		String folioTotalChargesDisplayed = df.format(folioTotalCharges);
		String folioPaymentsDisplayed = df.format(folioPayments);
		String folioBalanceDisplayed = df.format(folioBalance);

		assertEquals(folioRoomChargeLineItemsDisplayed, totalAmount,
				"Failed - Room charges line items for all nights mismatched at folio tab");
		test_steps.add("Successfully verified Room charge line items for all nights after check-in is <b>"
				+ folioRoomChargeLineItemsDisplayed + "</b>");

		assertEquals(folioAuthOrCaptureLineItemsDisplayed, authAmount,
				"Failed - " + policyFor + " amount mismatched at folio tab ");
		test_steps.add("Successfully verified " + policyFor + " amount after check-in is <b>"
				+ folioAuthOrCaptureLineItemsDisplayed + "</b>");
		double totalAmount2 = 0.00;
		for (int i = 0; i < baseAmount.size(); i++) {
			totalAmount2 = totalAmount2
					+ Double.parseDouble(baseAmount.get(i)) * Double.parseDouble(totalNights.get(i));
		}
		String roomChargeExp = df.format(totalAmount2);
		assertEquals(folioRoomChargesDisplayed, roomChargeExp, "Failed - Room charges mismatched at folio tab ");
		test_steps.add("Successfully verified Room charges after check-in is <b>" + folioRoomChargesDisplayed + "</b>");

		assertEquals(folioTotalChargesDisplayed, totalAmount, "Failed - Total charges mismatched at folio tab ");
		test_steps.add("Successfully verified Total charges after check-in is <b>" + folioTotalCharges + "</b>");

		assertEquals(folioPaymentsDisplayed, paymentsExp, "Failed - payments mismatched at folio tab ");
		test_steps.add("Successfully verified payments after check-in is <b>" + folioPaymentsDisplayed + "</b>");

		assertEquals(folioBalanceDisplayed, balanceExp, "Failed - Balance mismatched at folio tab ");
		test_steps.add("Successfully verified balance after check-in is <b>" + folioBalanceDisplayed + "</b>");

	}

	public void verifyAuthAmountInFolioHistory(WebDriver driver, ArrayList<String> test_steps, String descExp,
			String categoryExp, String policyFor) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement_120(res.folioHistoryTabSearchBox, driver);
		String desc = null;
		String category = null;
		if (policyFor.equalsIgnoreCase("Capture")) {
			descExp = "Captured" + descExp;
			desc = res.folioHistoryCapturePaymentDesc.getText();
			category = res.folioHistoryCapturePaymentCategory.getText();
		} else if (policyFor.equalsIgnoreCase("Authorize")) {
			descExp = "Authorized" + descExp;
			desc = res.folioHistoryAuthPaymentDesc.getText();
			category = res.folioHistoryAuthPaymentCategory.getText();
		}
		assertEquals(desc, descExp,
				"Failed - Description of payment for " + policyFor + " is not matched at folio history tab");
		test_steps.add("Successfully verified Description of payment for " + policyFor + " at folio history is <b>"
				+ desc + "</b>");

		assertEquals(category, categoryExp,
				"Failed - Category of authorized payment is not matched at folio history tab");
		test_steps.add(
				"Successfully verified Category of authorized payment at folio history is <b>" + category + "</b>");
	}

	public void selectRoomAtPaymentCheckInPopup(WebDriver driver, ArrayList<String> test_steps,
			ArrayList<String> roomNumbers) throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.roomNoDDAtCheckInPopup), driver);
		List<WebElement> roomDropDowns = res.roomsDDAtCheckInPopup;
		List<WebElement> roomClasses = res.confirmCheckInPaymentRoomClassName;
		for (int i = 0; i < roomDropDowns.size(); i++) {
			int index = i + 1;
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.confirmCheckInPaymentRoomClassName), driver);
			String roomClass = roomClasses.get(i).getText();
			roomDropDowns.get(i).click();
			String roomNo = roomNumbers.get(i);
			String xpathOfRoomNo = "(//span[@class='text' and text()='" + roomNo + "'])[" + index + "]";
			Wait.waitForElementToBeClickable(By.xpath(xpathOfRoomNo), driver);
			driver.findElement(By.xpath(xpathOfRoomNo)).click();
			test_steps.add("Selecting room number <b>" + roomNo + "</b> for <b>" + roomClass
					+ "</b> room class during payment check-in");
			reslogger.info("Selecting room number <b>" + roomNo + "</b> for <b>" + roomClass
					+ "</b> room class during payment check-in");
		}
	}

	public void checkInPaymentSuccessPopupVerify(WebDriver driver, ArrayList<String> test_steps, String NoShowSuccess,
			String Status, String PaymentMethod, String balance, String Type, String amount, String policyName,
			String policyFor, String policyText) throws Exception {
		try {
			String validate = null;
			DecimalFormat df = new DecimalFormat("0.00");
			df.setMaximumFractionDigits(2);
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.explicit_wait_visibilityof_webelement_120(res.CP_Reservation_NoShowSuccess, driver);
			Utility.ScrollToElement(res.CP_Reservation_NoShowSuccess, driver);

			String balanceDisplayed = res.NoShowSuccess_Balance.getText().replace("$ ", "").trim();
			String balanceCalculated = null;
			String amountDisplayed = res.noShowSuccessPolicyAmount.getText().replace("$ ", "");
			String amountExp = balance;

			if (NoShowSuccess.contains("Check-In Successful")) {
				validate = "Check-In";
				// Verified Success-Balance
				double balance2 = Double.parseDouble(balance);
				double amount2 = Double.parseDouble(amount);
				if (policyFor.equalsIgnoreCase("Capture")) {
					balance2 = balance2 - amount2;
					balanceCalculated = df.format(balance2);
				} else if (policyFor.equalsIgnoreCase("Authorize")) {
					balanceCalculated = df.format(balance2);
				}
				amountExp = amount;
				// Verified Success-policy name
				String policyDisplayed = res.noShowSuccessPolicyName.getText();
				assertEquals(policyDisplayed, policyName, "Failed: To verify policy name");
				test_steps.add(" Verified policy name : <b>" + policyDisplayed + "</b>");
				reslogger.info("  Verified policy name : " + policyDisplayed);

				Actions action = new Actions(driver);
				action.moveToElement(res.noShowSuccessPolicyName).perform();

				String toolTipPolicyDesc = res.CancelRoom_ToolTip_PolicyDescription.getText();
				reslogger.info(" Verified tool tip text at policy name : " + toolTipPolicyDesc);
				assertEquals(toolTipPolicyDesc, policyText, "Failed: To verify Payment Page Title");
				test_steps.add(" Verified tool tip text at policy name as :<b> " + toolTipPolicyDesc + "</b>");

			} else if (NoShowSuccess.contains("Cancellation Successful")) {
				validate = "Cancellation";
				balanceCalculated = "0.00";
				amountExp = df.format(Double.parseDouble(balance));
			}

			assertEquals(balanceDisplayed, balanceCalculated, "Failed: To verify Success Page Balance");
			test_steps.add(" Verified Balance during : " + validate + " <b> " + balanceDisplayed + "</b>");
			reslogger.info("  Verified Balance: " + balanceDisplayed);

			assertEquals(amountDisplayed, amountExp, "Failed : To verify Success Page Amount");
			test_steps.add(" Verified Amount  during : " + validate + " <b> " + amountDisplayed + "</b>");
			reslogger.info("  Verified Amount : " + amountDisplayed);

			// Verified Success -Message
			String header = res.CP_Reservation_NoShowSuccess.getText().trim();
			assertEquals(header, NoShowSuccess, "Failed: To verify Success Header");
			test_steps.add("  Verified header of the " + validate + " payment popup: <b>" + NoShowSuccess + "</b>");
			reslogger.info("  Verified header of the " + validate + " payment popup :" + NoShowSuccess);

			// Verified Success-Date
			// === For check-in/cancel it takes current day as updated so
			// validating with current day
			String date = Utility.getCurrentDate("MM/dd/yyyy");
			// date = Utility.parseDate(date, "dd/MM/yyyy", "MM/dd/yyyy");
			String dateDisplayed = res.NoShowSuccess_Date.getText();
			assertEquals(dateDisplayed, date, "Failed: To verify  Success Page Date");
			test_steps.add("  Verified Date of " + validate + " : <b>" + date + "</b>");
			reslogger.info("  Verified Date of " + validate + " : " + date);

			// Verified Success-Type
			String typeDisplayed = res.NoShowSuccess_Type.getText().trim();
			assertEquals(typeDisplayed, Type, "Failed: To verify  Success Page Type");
			test_steps.add("  Verified " + validate + " payment type : <b>" + Type + "</b>");
			reslogger.info(" Verified " + validate + " payment type : " + Type);

			// Verified Success-Payment Method
			String paymentMethodDisplayed = res.CP_Reservation_NoShowSuccessPaymentMethod.getText().trim();
			assertEquals(paymentMethodDisplayed, PaymentMethod, "Failed: To verify Success Page Payment Method");
			test_steps.add("  Verified " + validate + " Payment Method: <b>" + PaymentMethod + "</b>");
			reslogger.info("  Verified " + validate + " Payment Method: " + PaymentMethod);

			// Verified Success -Status
			String statusDisplayed = res.CP_Reservation_NoShowSuccessStatus.getText().trim();
			assertEquals(statusDisplayed, Status, "Failed: To verify  Success Page Status ");
			test_steps.add("  Verified Status of " + validate + " payment :<b> " + Status + "</b>");
			reslogger.info(" Verified Status of " + validate + " payment : " + Status);

		} catch (Exception e) {
			reslogger.info(e);
		}
	}

	public String verifyCheckOutPaymentWindow(WebDriver driver, ArrayList<String> test_steps, String Title,
			String PaymentType, String Type, String AmountRemaining,

			String cardNo, String nameOnCard, String expiryDate) throws InterruptedException {
		String CheckOutAmount = null;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopupTitle);
		Utility.ScrollToElement(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle, driver);
		// Verified No Show Payment Page Title
		assertTrue(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText().toLowerCase().trim()
				.equals(Title.toLowerCase().trim()), "Failed: To verify  Payment Page Title");
		test_steps.add(" Verified Payment Title:<b> " + Title + "</b>");
		reslogger.info(" Verified Payment Title: " + Title);
		String path = "//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + PaymentType + "']";
		reslogger.info(path);
		WebElement paymentElement = driver.findElement(By.xpath(path));
		// Verified Payment Page Type
		type = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.getText().toLowerCase().trim();
		assertEquals(type, Type.toLowerCase().trim(), "Failed: To verify  Page Type: " + Type);
		test_steps.add(" Verified Type : <b> " + Type + "</b>");
		reslogger.info(" Verified Type: " + Type);

		// Get Amount
		CheckOutAmount = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		double PaymentAmount = Double.valueOf(CheckOutAmount);
		int amt = (int) PaymentAmount;
		CheckOutAmount = String.valueOf(amt);
		reslogger.info(CheckOutAmount);

		// Get Balance
		String balance = "";
		balance = res.NoShowCancelPaymentPopup_Balance.getText().replace("$", "");

		double balanceDouble = Double.valueOf(balance);
		int balanceInt = (int) balanceDouble;
		balance = String.valueOf(balanceInt);
		if (CheckOutAmount.equals(AmountRemaining)) {
			assertEquals(CheckOutAmount, AmountRemaining, "Failed: To verify Payment Page Amount: " + AmountRemaining);
			test_steps.add("Verified Amount : <b> " + AmountRemaining + "</b>");
			reslogger.info(" Verified Amount: " + AmountRemaining);
			assertEquals(balance, AmountRemaining, "Failed: To verify Payment Page Balance: " + AmountRemaining);
			test_steps.add("Verified Balance : <b> " + AmountRemaining + "</b>");
			reslogger.info(" Verified Balance: " + AmountRemaining);
		}

		if (PaymentType.equals("Cash")) {
			// Verified Payment Page Payment Method
			assertTrue(paymentElement.isDisplayed(), "Failed: To verify Payment Method");
			test_steps.add(" Verified Payment Method:<b> " + PaymentType + "</b> ");
			reslogger.info(" Verified Payment Method: " + PaymentType);

		} else if (PaymentType.equals("MC")) {
			// Verified No Show Payment Page Payment Method
			assertTrue(paymentElement.isDisplayed(), "Failed: To verify Payment Method");
			test_steps.add(" Verified Payment Method:<b> " + PaymentType + "</b> ");
			reslogger.info(" Verified Payment Method: " + PaymentType);

			// Verified No Show Payment Page Card No
			JavascriptExecutor executor = (JavascriptExecutor) driver;
			String CardNo = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_CardNumber);
			reslogger.info(CardNo);
			// Verify Card Number

			assertTrue(CardNo.contains(cardNo), "Failed: To verify Card Number");
			test_steps.add(" Verified Card Number: <b>" + CardNo + "</b>");
			reslogger.info(" Verified Card Number");
			String NameOnCard = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_NameOnCard);
			reslogger.info(NameOnCard);

			// Verify Name on Card Number
			assertEquals(NameOnCard.toLowerCase().trim(), (nameOnCard.toLowerCase().trim()),
					"Failed: To verify Name on Card ");
			test_steps.add("Verified Name on Card:<b>  " + nameOnCard + "</b>");
			reslogger.info(" Verified Name on Card");

			String ExpiryDate = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_Expiry);
			reslogger.info(ExpiryDate);
			reslogger.info(expiryDate);
			// Verify Expiry Date
			assertEquals(ExpiryDate, expiryDate, "Failed: To verify Expiry Date ");
			test_steps.add(" Verified Expiry Date:<b> " + ExpiryDate + "</b>");
			reslogger.info(" Verified Expiry Date");
		}

		return CheckOutAmount;
	}

	public void selectTypeWhileCheckIN(WebDriver driver, ArrayList<String> test_steps, String Type)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_Type);
		Utility.ScrollToElement(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType, driver);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
		test_steps.add("Click on Type Drop Down Box");
		reslogger.info("Click on Type Drop Down Box");
		List<String> type = Arrays.asList(Type.split("\\|"));
		for (int i = 0; i < res.CP_CheckInTypeOptions.size(); i++) {
			if (res.CP_CheckInTypeOptions.get(i).getText().toLowerCase().trim()
					.equals(type.get(1).toLowerCase().trim())) {
				Wait.WaitForElement(driver, OR_Reservation.CP_CheckInTypeOptions);
				Utility.ScrollToElement(res.CP_CheckInTypeOptions.get(i), driver);
				res.CP_CheckInTypeOptions.get(i).click();
				test_steps.add(" Selected  Type : <b>" + res.CP_CheckInTypeOptions.get(i).getText() + "</b>");
				reslogger.info(" Selected Type " + res.CP_CheckInTypeOptions.get(i).getText());
				break;
			}
			res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
			test_steps.add(" Click on Type Drop Down Box Again");
			reslogger.info(" Click on Type Drop Down Box Again");

		}
	}

	public void selectType(WebDriver driver, ArrayList<String> test_steps, String Type) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_Type);
		Utility.ScrollToElement(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType, driver);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
		test_steps.add("Click on Type Drop Down Box");
		reslogger.info("Click on Type Drop Down Box");
		Wait.WaitForElement(driver, OR_Reservation.CP_CheckInTypeOptions);
		String path = "//div[contains(@data-bind,'IsAuthTypeDropDownVisible')]//ul//li/a/span[@class='text'][contains(text(),'"
				+ Type + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		element.click();
		test_steps.add(" Selected  Type : <b>" + Type + "</b>");
		reslogger.info(" Selected Type " + Type);
	}

	public void checkInPaymentSuccessPopupClose(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String close = "//button[@data-bind='click: checkInDetail.closeModal']";
		Wait.WaitForElement(driver, OR_Reservation.closeCheckinSuccessPopup);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.closeCheckinSuccessPopup), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.closeCheckinSuccessPopup), driver);
		res.closeCheckinSuccessPopup.click();
		test_steps.add("Closing payment successful popup");
		try {
			Wait.WaitForElement(driver, close);

		} catch (Exception e) {
			reslogger.info(e);
		}

		unsavedDataYesClick(driver, test_steps);

		test_steps.add("Closing payment successful popup");

	}

	public void checkInPaymentSuccessPopupClose_U(WebDriver driver, ArrayList<String> test_steps) {

		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			String close = "//ul[@class='sec_nav']//li[5]//i";
			Wait.WaitForElement(driver, OR_Reservation.NoShowSuccess_CloseButton_U);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowSuccess_CloseButton_U), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowSuccess_CloseButton_U), driver);

			driver.findElement(By.xpath(OR_Reservation.NoShowSuccess_CloseButton_U)).click();

			test_steps.add("Closing payment successful popup");

		} catch (Exception e) {
			reslogger.info(e);
		}

	}

	public void checkIn_PaymentSuccess_PopupClose(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String close = "//ul[@class='sec_nav']//li[5]//i";
		Wait.WaitForElement(driver, OR_Reservation.CHECKINCLOSEBUTTON);
		// Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowSuccess_CloseButton),
		// driver);
		// Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowSuccess_CloseButton),
		// driver);

		res.CHECKINCLOSEBUTTON.click();

		test_steps.add("Closing payment successful popup");

	}

	/*
	 * public void checkInPaymentSuccessPopupClose(WebDriver driver,
	 * ArrayList<String> test_steps) { Elements_CPReservation res = new
	 * Elements_CPReservation(driver); String close =
	 * "//ul[@class='sec_nav']//li[5]//i";
	 * res.CP_Reservation_NoShowSuccessCloseButton.click();
	 * test_steps.add("Closing payment successful popup"); try {
	 * Wait.WaitForElement(driver, close);
	 * 
	 * } catch (Exception e) { reslogger.info(e); } }
	 */
	public void verifyFolioLineItem(WebDriver driver, ArrayList<String> test_steps, String totalAmount,
			String paymentType, String authAmount, String policyFor) {
		ArrayList<String> roomCharges = new ArrayList<>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		double folioRoomCharge = 0.00;
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		List<WebElement> roomChargesAmount = driver
				.findElements(By.xpath("//span[contains(text(), 'Room Charge')]/../..//td[@class='lineitem-amount']"));
		String roomCharge = get_RoomCharge(driver, test_steps);
		String balance = get_Balance(driver, test_steps);

		String balanceExp = null;
		if (policyFor.equalsIgnoreCase("Capture")) {
			double amount2 = Double.parseDouble(authAmount);
			double total2 = Double.parseDouble(totalAmount);
			double balance2 = total2 - amount2;
			balanceExp = df.format(balance2);
		} else if (policyFor.equalsIgnoreCase("Authorize")) {
			balanceExp = totalAmount;
		}
		assertEquals(balance, balanceExp, "Failed - Balance mismatched at folio tab ");
		test_steps.add("Successfully verified balance after check-in is " + balance);
		if (roomChargesAmount.size() > 1) {
			for (WebElement webElement : roomChargesAmount) {
				String roomChargeMulti = webElement.getText().replace("$ ", "");
				roomCharges.add(roomChargeMulti);
				double abc = Double.parseDouble(roomChargeMulti);
				folioRoomCharge = folioRoomCharge + abc;
			}
		} else {
			folioRoomCharge = Double.parseDouble(getFolioAmount(driver, test_steps, "Room Charge"));
		}

		String folioRoomCharges = df.format(folioRoomCharge);

		String folioAuthAmount = getFolioAmount(driver, test_steps, paymentType);
		assertEquals(folioRoomCharges, totalAmount, "Failed - Room charge mismatched at folio line item ");
		test_steps.add("Successfully verified Room charge at folio line item after check-in is ");

		assertEquals(folioAuthAmount, authAmount, "Failed - Authorization amount mismatched at folio line item ");
		test_steps.add("Successfully verified Authorization amount at folio line item after check-in");

	}

	public String getFolioAmount(WebDriver driver, ArrayList test_steps, String category) {
		String Balance = driver
				.findElement(
						By.xpath("//span[contains(text(), '" + category + "')]/../..//td[@class='lineitem-amount']"))
				.getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("Folio amount for : " + category + " is :: " + Balance);
		reslogger.info("Folio amount for : " + category + " is :: " + Balance);
		return Balance;
	}

	public void verifyTripAmountDetailsAtTop(WebDriver driver, ArrayList<String> test_steps, String totalExp,
			String amount, String policyFor) {
		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			DecimalFormat df = new DecimalFormat("0.00");
			df.setMaximumFractionDigits(2);
			String total = res.tripTotalAmountAtTop.getText().replace("$ ", "");
			assertEquals(total, totalExp, "Failed - Total amount in trip summary displayed at top is not matched");
			test_steps
					.add("Successfully verified Total amount in trip summary displayed at top as <b>" + total + "</b>");
			test_steps.add("Amount paid during check-in is <b>" + amount + "</b>");
			String balanceExp = null;
			if (policyFor.equalsIgnoreCase("Capture")) {
				double amount2 = Double.parseDouble(amount);
				double total2 = Double.parseDouble(totalExp);
				double balance = total2 - amount2;
				balanceExp = df.format(balance);
			} else if (policyFor.equalsIgnoreCase("Authorize")) {
				balanceExp = totalExp;
			}
			String balance = res.tripBalanceAmountAtTop.getText().replace("$ ", "");
			reslogger.info(balance);
			reslogger.info(balanceExp);
			assertEquals(balance, balanceExp, "Failed - Balance amount on top is not matched");
			test_steps.add(
					"Successfully verified Balance amount in trip summary displayed at top as <b>" + balance + "</b>");
		} catch (Exception e) {

		}
	}

	public void selectRoomAtCheckInPopup(WebDriver driver, String roomNo) throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement_120(res.roomNoDDAtCheckInPopup, driver);
		try {
			res.roomNoDDAtCheckInPopup.click();
			Wait.wait1Second();
			driver.findElement(By.xpath("//span[@class='text' and text()='" + roomNo + "']")).click();
			Wait.wait1Second();
		} catch (Exception e) {
			res.roomNoDDAtCheckInPopup.click();
			Wait.wait1Second();
			driver.findElement(By.xpath("//span[@class='text' and text()='" + roomNo + "']")).click();
			Wait.wait1Second();
		}
	}

	public void checkInPaymentSuccessPopupVerify(WebDriver driver, ArrayList<String> test_steps, String NoShowSuccess,
			String Status, String PaymentMethod, String date, String balance, String Type, String amount,
			String policyName, String policyFor, String policyText) throws Exception {
		try {
			DecimalFormat df = new DecimalFormat("0.00");
			df.setMaximumFractionDigits(2);
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.explicit_wait_visibilityof_webelement_120(res.CP_Reservation_NoShowSuccess, driver);
			Utility.ScrollToElement(res.CP_Reservation_NoShowSuccess, driver);
			// Verified Success -Message

			String header = res.CP_Reservation_NoShowSuccess.getText().trim();
			assertEquals(header, NoShowSuccess, "Failed: To verify Success Header");
			test_steps.add("  Verified header of the popup: <b>" + NoShowSuccess + "</b>");
			reslogger.info("  Verified header of the popup :" + NoShowSuccess);
			// Verified Success-Date

			date = Utility.parseDate(date, "dd/MM/yyyy", "MM/dd/yyyy");
			String dateDisplayed = res.NoShowSuccess_Date.getText();
			assertEquals(dateDisplayed, date, "Failed: To verify  Success Page Date");
			test_steps.add("  Verified Date of check-in : <b>" + date + "</b>");
			reslogger.info("  Verified Date of check-in : " + date);

			// Verified Success-Balance
			String balanceDisplayed = res.NoShowSuccess_Balance.getText().replace("$ ", "").trim();
			String balanceCalculated = null;
			double balance2 = Double.parseDouble(balance);
			double amount2 = Double.parseDouble(amount);
			if (policyFor.equalsIgnoreCase("Capture")) {
				balance2 = balance2 - amount2;
				balanceCalculated = df.format(balance2);
			} else if (policyFor.equalsIgnoreCase("Authorize")) {
				balanceCalculated = df.format(balance2);
			}
			assertEquals(balanceDisplayed, balanceCalculated, "Failed: To verify Success Page Balance");
			test_steps.add(" Verified Balance: <b>" + balanceDisplayed + "</b>");
			reslogger.info("  Verified Balance: " + balanceDisplayed);

			// Verified Success-policy name
			String policyDisplayed = res.noShowSuccessPolicyName.getText();
			assertEquals(policyDisplayed, policyName, "Failed: To verify Success Page Balance");
			test_steps.add(" Verified policy name : <b>" + policyDisplayed + "</b>");
			reslogger.info("  Verified policy name : " + policyDisplayed);

			Actions action = new Actions(driver);
			action.moveToElement(res.noShowSuccessPolicyName).perform();

			String toolTipPolicyDesc = res.CancelRoom_ToolTip_PolicyDescription.getText();
			reslogger.info(" Verified tool tip text at policy name : " + toolTipPolicyDesc);
			assertEquals(toolTipPolicyDesc, policyText, "Failed: To verify Payment Page Title");
			test_steps.add(" Verified tool tip text at policy name as :<b> " + toolTipPolicyDesc + "</b>");

			// Verified Success-Amount
			reslogger.info("Amount: " + amount);
			String path = "//span[contains(@data-bind,'noShow.PaymentAmount')][contains(text(),'$ " + amount + "')]|"
					+ "//span[contains(@data-bind,'cancel.PaymentAmount')][contains(text(),'$ " + amount + "')]|"
					+ "//span[contains(@data-bind,'checkInDetail.PaymentAmount')][contains(text(),'$ " + amount + "')]";
			WebElement AmountElement = driver.findElement(By.xpath(path));

			assertTrue(AmountElement.isDisplayed(), "Failed: To verify  Success Page Amount: " + amount);
			test_steps.add("  Verified Amount: <b>" + amount + "</b>");
			reslogger.info("  Verified Amount: " + amount);

			// Verified Success-Type
			reslogger.info(type);
			String typeDisplayed = res.NoShowSuccess_Type.getText().trim();
			assertEquals(typeDisplayed, Type, "Failed: To verify  Success Page Type");
			test_steps.add("  Verified check-in payment type : <b>" + Type + "</b>");
			reslogger.info(" Verified check-in payment type : " + Type);

			// Verified Success-Payment Method
			String paymentMethodDisplayed = res.CP_Reservation_NoShowSuccessPaymentMethod.getText().trim();
			assertEquals(paymentMethodDisplayed, PaymentMethod, "Failed: To verify Success Page Payment Method");
			test_steps.add("  Verified Payment Method: <b>" + PaymentMethod + "</b>");
			reslogger.info("  Verified Payment Method: " + PaymentMethod);

			// Verified Success -Status
			String statusDisplayed = res.CP_Reservation_NoShowSuccessStatus.getText().trim();
			assertEquals(statusDisplayed, Status, "Failed: To verify  Success Page Status ");
			test_steps.add("  Verified Status of payment :<b> " + Status + "</b>");
			reslogger.info(" Verified Status of payment : " + Status);
		} catch (Exception e) {

		}
	}

	public String CheckOutAmount = "";

	public void Verify_CheckOutPayment(WebDriver driver, ArrayList<String> test_steps, String Title, String PaymentType,
			String Type, String AmountRemaining, String cardNo, String nameOnCard, String expiryDate)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopupTitle);
		Utility.ScrollToElement(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle, driver);
		// Verified No Show Payment Page Title
		assertTrue(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText().toLowerCase().trim()
				.equals(Title.toLowerCase().trim()), "Failed: To verify  Payment Page Title");
		test_steps.add(" Verified Title:<b> " + Title + "</b>");
		reslogger.info(" Verified Title: " + Title);
		String path = "//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + PaymentType + "']";
		WebElement paymentElement = driver.findElement(By.xpath(path));

		// Verified Payment Page Type
		type = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.getText().toLowerCase().trim();
		assertTrue(type.equals(Type.toLowerCase().trim()), "Failed: To verify  Page Type: " + Type);
		test_steps.add(" Verified Type : <b> " + Type + "</b>");
		reslogger.info(" Verified Type: " + Type);

		// Get Amount
		CheckOutAmount = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		double PaymentAmount = Double.valueOf(CheckOutAmount);
		int amt = (int) PaymentAmount;
		CheckOutAmount = String.valueOf(amt);
		reslogger.info(CheckOutAmount);
		// Get Balance
		String balance = "";
		balance = res.NoShowCancelPaymentPopup_Balance.getText().replace("$", "");

		double balanceDouble = Double.valueOf(balance);
		int balanceInt = (int) balanceDouble;
		balance = String.valueOf(balanceInt);
		if (CheckOutAmount.equals(AmountRemaining)) {
			assertTrue(CheckOutAmount.equals(AmountRemaining),
					"Failed: To verify Payment Page Amount: " + AmountRemaining);
			test_steps.add("Verified Amount : <b> " + AmountRemaining + "</b>");
			reslogger.info(" Verified Amount: " + AmountRemaining);
			assertTrue(balance.equals(AmountRemaining), "Failed: To verify Payment Page Balance: " + AmountRemaining);
			test_steps.add("Verified Balance : <b> " + AmountRemaining + "</b>");
			reslogger.info(" Verified Balance: " + AmountRemaining);
		}

		if (PaymentType.equals("Cash")) {
			// Verified Payment Page Payment Method
			assertTrue(paymentElement.isDisplayed(), "Failed: To verify Payment Method");
			test_steps.add(" Verified Payment Method:<b> " + PaymentType + "</b> ");
			reslogger.info(" Verified Payment Method: " + PaymentType);

		} else if (PaymentType.equals("MC")) {
			// Verified No Show Payment Page Payment Method
			assertTrue(paymentElement.isDisplayed(), "Failed: To verify Payment Method");
			test_steps.add(" Verified Payment Method:<b> " + PaymentType + "</b> ");
			reslogger.info(" Verified Payment Method: " + PaymentType);

			// Verified No Show Payment Page Card No
			JavascriptExecutor executor = (JavascriptExecutor) driver;
			String CardNo = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_CardNumber);
			reslogger.info(CardNo);
			// Verify Card Number
			assertTrue(CardNo.contains(cardNo), "Failed: To verify Card Number");
			test_steps.add(" Verified Card Number: <b>" + CardNo + "</b>");
			reslogger.info(" Verified Card Number");
			String NameOnCard = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_NameOnCard);
			reslogger.info(NameOnCard);

			// Verify Name on Card Number
			assertTrue(NameOnCard.toLowerCase().trim().equals(nameOnCard.toLowerCase().trim()),
					"Failed: To verify Name on Card ");
			test_steps.add("Verified Name on Card:<b>  " + nameOnCard + "</b>");
			reslogger.info(" Verified Name on Card");

			String ExpiryDate = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_Expiry);
			reslogger.info(ExpiryDate);

			// Verify Expiry Date
			assertTrue(ExpiryDate.equals(expiryDate), "Failed: To verify Expiry Date ");
			test_steps.add(" Verified Expiry Date:<b> " + ExpiryDate + "</b>");
			reslogger.info(" Verified Expiry Date");
		}

	}

	public void Select_Type_Check_IN(WebDriver driver, ArrayList<String> test_steps, String Type)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_Type);
		Utility.ScrollToElement(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType, driver);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
		test_steps.add(" Click on Type Drop Down Box");
		reslogger.info(" Click on Type Drop Down Box");
		List<String> type = Arrays.asList(Type.split("\\|"));
		for (int i = 0; i < res.CP_CheckInTypeOptions.size(); i++) {
			if (res.CP_CheckInTypeOptions.get(i).getText().toLowerCase().trim()
					.equals(type.get(1).toLowerCase().trim())) {
				res.CP_CheckInTypeOptions.get(i).click();
				test_steps.add(" Selected  Type : <b>" + res.CP_CheckInTypeOptions.get(i).getText() + "</b>");
				reslogger.info(" Selected Type " + res.CP_CheckInTypeOptions.get(i).getText());
				break;
			}

		}

		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
		test_steps.add(" Click on Type Drop Down Box Again");
		reslogger.info(" Click on Type Drop Down Box Again");

	}

	public String CancelWindowVerifiedButtonAndPerformAction(WebDriver driver, ArrayList test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String buttonName = null;
		if (res.CP_Reservation_NoShow_ConfirmNoShowButton.isEnabled()) {
			buttonName = res.CP_Reservation_NoShow_ConfirmNoShowButton.getText();
			test_steps.add("Enabled Button: " + buttonName);
			reslogger.info("Enabled Button: " + buttonName);
		} else if (res.ProceedToPaymentButton.isEnabled()) {
			buttonName = res.ProceedToPaymentButton.getText();
			test_steps.add("Enabled Button: " + buttonName);
			reslogger.info("Enabled Button: " + buttonName);
		}

		return buttonName;
	}

	public void Click_Confirm_Button(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait2Second();
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_NoShow_ConfirmNoShowButton, driver);
		res.CP_Reservation_NoShow_ConfirmNoShowButton.click();

	}

	public void Click_Confirm_Payment_Button(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait2Second();
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_NoShow_ConfirmNoShowButton, driver);
		res.ProceedToPaymentButton.click();

	}

	public String CheckINCheckOutAmount = null;

	public void Get_Checkin_Amount(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		// Get Amount
		Amount = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		double noshowPaymentAmount = Double.valueOf(Amount);
		int amt = ((int) noshowPaymentAmount) / 2;
		CheckINCheckOutAmount = String.valueOf(amt);
		reslogger.info(CheckINCheckOutAmount);

	}

	public String get_Checkin_Amount(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		// Get Amount
		Amount = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		double noshowPaymentAmount = Double.valueOf(Amount);
		int amt = ((int) noshowPaymentAmount) / 2;
		String CheckINCheckOutAmount = String.valueOf(amt);
		reslogger.info(CheckINCheckOutAmount);

		return CheckINCheckOutAmount;
	}

	public ArrayList<String> checkInDate(WebDriver driver, int Days) throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		try {
			Wait.WaitForElement(driver, OR_Reservation.EnterCheckinDate);
			Wait.explicit_wait_visibilityof_webelement(elements.EnterCheckinDate, driver);
			Wait.explicit_wait_elementToBeClickable(elements.EnterCheckinDate, driver);
			elements.EnterCheckinDate.click();
			elements.EnterCheckinDate.clear();
			String checkInDate = ESTTimeZone.DateFormateForLineItem(Days);

			elements.EnterCheckinDate.sendKeys(checkInDate);
			testSteps.add("CheckIn date: " + checkInDate);
		} catch (Exception e) {
			Wait.WaitForElement(driver, OR_Reservation.EnterCheckinDate1);
			Wait.explicit_wait_visibilityof_webelement(elements.EnterCheckinDate1, driver);
			Wait.explicit_wait_elementToBeClickable(elements.EnterCheckinDate1, driver);
			elements.EnterCheckinDate1.click();
			elements.EnterCheckinDate1.clear();
			String checkInDate = ESTTimeZone.DateFormateForLineItem(Days);

			elements.EnterCheckinDate1.sendKeys(checkInDate);
			testSteps.add("CheckIn date: " + checkInDate);
		}
		return testSteps;
	}

	public ArrayList<String> checkOutDate(WebDriver driver, int Days) throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		try {
			Wait.WaitForElement(driver, OR_Reservation.EnterCheckout);
			Wait.explicit_wait_visibilityof_webelement(elements.EnterCheckout, driver);
			Wait.explicit_wait_elementToBeClickable(elements.EnterCheckout, driver);
			elements.EnterCheckout.click();
			elements.EnterCheckout.clear();
			String checkInDate = ESTTimeZone.DateFormateForLineItem(Days);

			elements.EnterCheckout.sendKeys(checkInDate);
			testSteps.add("CheckOut date: " + checkInDate);
		} catch (Exception e) {
			Wait.explicit_wait_visibilityof_webelement(elements.EnterCheckout1, driver);
			Wait.explicit_wait_elementToBeClickable(elements.EnterCheckout1, driver);
			elements.EnterCheckout1.click();
			elements.EnterCheckout1.clear();
			String checkInDate = ESTTimeZone.DateFormateForLineItem(Days);

			elements.EnterCheckout1.sendKeys(checkInDate);
			testSteps.add("CheckOut date: " + checkInDate);
		}
		return testSteps;

	}

	public ArrayList<String> enterAdult(WebDriver driver, String Adults) {
		Elements_CPReservation elementsReservation = new Elements_CPReservation(driver);
		ArrayList<String> testStep = new ArrayList<>();
		try {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Adults);
			elementsReservation.CP_NewReservation_Adults.clear();
			elementsReservation.CP_NewReservation_Adults.sendKeys(Adults);
			testStep.add("Enter No of adults : " + Adults);
			reslogger.info("Enter No of adults : " + Adults);
		} catch (Exception e) {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Adults1);
			elementsReservation.CP_NewReservation_Adults1.clear();
			elementsReservation.CP_NewReservation_Adults1.sendKeys(Adults);
			testStep.add("Enter No of adults : " + Adults);
			reslogger.info("Enter No of adults : " + Adults);
		}
		return testStep;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <enterChildren> ' Description: <Enter childern value> ' Input
	 * parameters: < String value> ' Return value: <array list> ' Created By:
	 * <Farhan Ghaffar> ' Created On: <04/17/2020>
	 * 
	 * ' Modified By | Description of Modification:
	 * ------------------------------------------ <mm/dd/yyyy>:<Developer name>:
	 * 1.Step modified 2.Step modified
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> enterChildren(WebDriver driver, String Children) {

		Elements_CPReservation elementsReservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		try {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Children);
			elementsReservation.CP_NewReservation_Children.clear();
			elementsReservation.CP_NewReservation_Children.sendKeys(Children);
		} catch (Exception e) {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Children1);
			elementsReservation.CP_NewReservation_Children1.clear();
			elementsReservation.CP_NewReservation_Children1.sendKeys(Children);
		}
		testSteps.add("Enter No of Children : " + Children);
		reslogger.info("Enter No of Children : " + Children);
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <VeriGuestProfileCheckox> ' Description: <Verify create guest
	 * profile checkbox is checked or not> ' Input parameters: <boolean value> '
	 * Return value: <array list> ' Created By: <Farhan Ghaffar> ' Created On:
	 * <04/17/2020>
	 * 
	 * ' Modified By | Description of Modification:
	 * ------------------------------------------ <mm/dd/yyyy>:<Developer name>:
	 * 1.Step modified 2.Step modified
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> VerifyGuestProfileCheckox(WebDriver driver, boolean isChecked)
			throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckboxGuestProfile);
		Wait.explicit_wait_visibilityof_webelement(element.CheckboxGuestProfile, driver);
		Wait.explicit_wait_elementToBeClickable(element.CheckboxGuestProfile, driver);
		Utility.ScrollToElement(element.CheckboxGuestProfile, driver);
		if (isChecked) {
			if (element.CheckboxGuestProfile.isSelected()) {
				test_step.add("Verified create guest profile checkbox already checked");
			} else {
				element.CheckboxGuestProfile.click();
				test_step.add("Verified create guest profile checkbox is checked");
			}
		} else {
			if (!element.CheckboxGuestProfile.isSelected()) {
				element.CheckboxGuestProfile.click();
				test_step.add("Verified create guest profile checkbox is  unchecked");
			} else {
				test_step.add("Verified create guest profile checkbox already unchecked");
			}
		}

		return test_step;
	}

	public ArrayList<String> CheckInReservationWithOutPolicy(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckInPopupHeading);
		Wait.explicit_wait_visibilityof_webelement(element.CheckInPopupHeading, driver);
		Wait.explicit_wait_elementToBeClickable(element.CheckInPopupHeading, driver);
		assertEquals(element.CheckInPopupHeading.getText(), "Check In", "Failed: Check In popup heading is mismaching");
		test_steps.add("Verified checkin reservation opend");
		return test_steps;
	}

	public ArrayList<String> CheckInConfrimButton(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckinConfirmButton);
		Wait.explicit_wait_visibilityof_webelement(element.CheckinConfirmButton, driver);
		Wait.explicit_wait_elementToBeClickable(element.CheckinConfirmButton, driver);
		element.CheckinConfirmButton.click();
		test_steps.add("Click on checkin confrim buttton");
		return test_steps;
	}

	public ArrayList<String> CheckInButton(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_CheckInButton, driver);
		Utility.ScrollToElement(res.CP_Reservation_CheckInButton, driver);
		res.CP_Reservation_CheckInButton.click();
		test_steps.add("Click Check In  Button");
		reslogger.info("Click Check In  Button");
		return test_steps;

	}

	public ArrayList<String> VerifyDirtyRoom(WebDriver driver) throws InterruptedException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		try {
			Wait.wait2Second();
			Wait.explicit_wait_visibilityof_webelement(element.VerifyDirtyRoomPopup, driver);
			test_steps.add("Dirty room popup is appeared during checkin reservation");
			element.ButtonDirtyConfirm.click();
			test_steps.add("Click on dirty confirm button");

		} catch (Exception e) {
			test_steps.add("No dirty room popup appeared during checkin reservation");

		}

		return test_steps;

	}

	public String VerifyReservationStatus_Status(WebDriver driver, String Status) throws InterruptedException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Utility.ScrollToElement(element.ReservationStatus, driver);
		Wait.explicit_wait_visibilityof_webelement(element.ReservationStatus, driver);
		assertEquals(element.ReservationStatus.getText().toLowerCase().trim(), Status.toLowerCase().trim(),
				"Failed: reservation has been changed");
		return element.ReservationStatus.getText();
	}

	public ArrayList<String> ButtonAddIncidental(WebDriver driver) throws InterruptedException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		reslogger.info("in add incidentail button");
		try {
			reslogger.info("in try");

			Wait.WaitForElement(driver, OR_Reservation.ButtonAddIncidental);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ButtonAddIncidental), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ButtonAddIncidental), driver);
		} catch (Exception e) {
			reslogger.info("in catch");

			driver.navigate().refresh();
			Wait.WaitForElement(driver, OR_Reservation.ButtonAddIncidental);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ButtonAddIncidental), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ButtonAddIncidental), driver);

		}
		reslogger.info("move");

		Utility.ScrollToElement(element.ButtonAddIncidental, driver);
		element.ButtonAddIncidental.click();
		test_steps.add("Click on Add Incidental");
		return test_steps;
	}

	public ArrayList<String> enterAddOnIncidental(WebDriver driver, String getDate, String category, String perUnit,
			String quentity) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.EnterAddOn_IncidenalDate);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterAddOn_IncidenalDate), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.EnterAddOn_IncidenalDate), driver);
		Utility.ScrollToElement(element.EnterAddOn_IncidenalDate, driver);

		element.EnterAddOn_IncidenalDate.click();
		element.EnterAddOn_IncidenalDate.clear();
		element.EnterAddOn_IncidenalDate.sendKeys(getDate);
		test_steps.add("Enter Date: " + getDate);

		element.ButtonSelectIncidental.click();
		test_steps.add("Click on select button");
		Wait.wait1Second();
		String pathSelectIncidental = "//div[text()='ADD-ONS & INCIDENTALS']//..//ul//li//span[text()='" + category
				+ "']";
		WebElement elementSelect = driver.findElement(By.xpath(pathSelectIncidental));
		elementSelect.click();
		test_steps.add("Select Category: " + category);

		element.EnterPerUnit.clear();
		element.EnterPerUnit.sendKeys(perUnit);
		test_steps.add("Enter Per Unit: " + perUnit);

		element.EnterQuentity.clear();
		element.EnterQuentity.sendKeys(quentity);
		test_steps.add("Enter Quentity: " + quentity);

		element.IncidentalSave.click();
		test_steps.add("Click on Save button");
//		Wait.WaitForElementUsingClassName(driver, OR.Toaster_Title);
//		Wait.waitForElementToBeVisibile(By.className(OR.Toaster_Title), driver);
//		Wait.waitForElementToBeClickable(By.className(OR.Toaster_Title), driver);
		return test_steps;
	}

	public ArrayList<String> EnterAddOn_Incidental(WebDriver driver, int days, String category, String perUnit,
			String quentity) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.EnterAddOn_IncidenalDate);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterAddOn_IncidenalDate), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.EnterAddOn_IncidenalDate), driver);
		Utility.ScrollToElement(element.EnterAddOn_IncidenalDate, driver);
		String getDate = ESTTimeZone.DateFormateForLineItem(days);
		element.EnterAddOn_IncidenalDate.click();
		element.EnterAddOn_IncidenalDate.clear();
		element.EnterAddOn_IncidenalDate.sendKeys(getDate);
		test_steps.add("Enter Date: " + getDate);

		element.ButtonSelectIncidental.click();
		test_steps.add("Click on select button");
		Wait.wait1Second();
		String pathSelectIncidental = "//div[text()='ADD-ONS & INCIDENTALS']//..//ul//li//span[text()='" + category
				+ "']";
		WebElement elementSelect = driver.findElement(By.xpath(pathSelectIncidental));
		elementSelect.click();
		test_steps.add("Select Category: " + category);

		element.EnterPerUnit.clear();
		element.EnterPerUnit.sendKeys(perUnit);
		test_steps.add("Enter Per Unit: " + perUnit);

		element.EnterQuentity.clear();
		element.EnterQuentity.sendKeys(quentity);
		test_steps.add("Enter Quentity: " + quentity);

		element.IncidentalSave.click();
		test_steps.add("Click on Save button");
		Wait.WaitForElementUsingClassName(driver, OR.Toaster_Title);
		Wait.waitForElementToBeVisibile(By.className(OR.Toaster_Title), driver);
		Wait.waitForElementToBeClickable(By.className(OR.Toaster_Title), driver);
		return test_steps;
	}

	public String getIncidentalDate(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		driver.navigate().refresh();
		try {
			Wait.WaitForElement(driver, OR_Reservation.GetIncidentalDate);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GetIncidentalDate), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GetIncidentalDate), driver);
		} catch (Exception e) {
			driver.navigate().refresh();
			Wait.WaitForElement(driver, OR_Reservation.GetIncidentalDate);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GetIncidentalDate), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GetIncidentalDate), driver);
		}

		reslogger.info("element.GetIncidentalDate:+ " + element.GetIncidentalDate.size());
		Utility.ScrollToElement_NoWait(element.GetIncidentalDate.get(index), driver);
		return element.GetIncidentalDate.get(index).getText();
	}

	public String getIncidentalCategory(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.GetIncidentalCategory.get(index).getText();
	}

	public String getIncidentalDescritption(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.GetIncidentalDescription.get(index).getText();
	}

	public String getIncidentalPerUnit(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.GetIncidentalPerUnit.get(index).getText();
	}

	public String getIncidentalTax(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.GetIncidentalTax.get(index).getText();
	}

	public String getIncidentalTotalAmount(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.GetIncidentalTotalAmount.get(index).getText();
	}

	public ArrayList<String> ClickOnHistory(WebDriver driver) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.HistoryTab);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.HistoryTab), driver);
		Utility.ScrollToElement_NoWait(element.HistoryTab, driver);
		element.HistoryTab.click();
		test_step.add("Click on history");
		return test_step;

	}

	public String getHistoryCategory(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(element.History_Category.get(index), driver);
		Utility.ScrollToElement_NoWait(element.History_Category.get(index), driver);
		return element.History_Category.get(index).getText();
	}

	public String gettHistoryDate(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.History_Date.get(index).getText();
	}

	public String gettHistoryTime(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.History_Time.get(index).getText();
	}

	public String gettHistoryUser(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.History_User.get(index).getText();
	}

	public String getHistoryDescription(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.History_Description.get(index).getText();
	}

	public ArrayList<String> ClickOnDetails(WebDriver driver) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		Wait.explicit_wait_visibilityof_webelement(element.DetailsTab, driver);
		Wait.explicit_wait_elementToBeClickable(element.DetailsTab, driver);
		Utility.ScrollToElement_NoWait(element.DetailsTab, driver);
		element.DetailsTab.click();
		test_step.add("Click on details");
		return test_step;

	}

	public int getNumberOfIncidentalRows(WebDriver driver) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		int counter = 0;
		String loading = "(//div[@class='ir-loader-in'])[1]";
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait1Second();
			}
		}
		Wait.WaitForElement(driver, OR_Reservation.TotalNumberofIncidentalRows);
		return element.TotalNumberofIncidentalRows.size();
	}

	public ArrayList<String> ClickOnDeleteOncidentalButton(WebDriver driver, int index)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		try {
			Wait.explicit_wait_visibilityof_webelement(element.DeleteIncidentalInSatyInfoButton.get(index), driver);
			Wait.explicit_wait_elementToBeClickable(element.DeleteIncidentalInSatyInfoButton.get(index), driver);
		} catch (Exception e) {
			driver.navigate().refresh();
			Wait.wait3Second();
			Wait.WaitForElement(driver, OR_Reservation.DeleteIncidentalInSatyInfoButton);
			Wait.explicit_wait_visibilityof_webelement(element.DeleteIncidentalInSatyInfoButton.get(index), driver);
			Wait.explicit_wait_elementToBeClickable(element.DeleteIncidentalInSatyInfoButton.get(index), driver);
		}

		Utility.ScrollToElement_NoWait(element.DeleteIncidentalInSatyInfoButton.get(index), driver);
		element.DeleteIncidentalInSatyInfoButton.get(index).click();
		return test_step;
	}

	public ArrayList<String> IncidentalVoidpopup(WebDriver driver, String EnterNotes, int index)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.VoidPopupHeading);
		Wait.explicit_wait_visibilityof_webelement(element.VoidPopupHeading, driver);
		Wait.explicit_wait_elementToBeClickable(element.VoidPopupHeading, driver);
		// assertEquals(element.VoidPopupHeading.getText(), "Void Items");
		element.EnterNotes.sendKeys(EnterNotes);
		test_step.add("Enter notes: " + EnterNotes);
		element.VoidButton.get(index).click();
		test_step.add("Click on Void button");
		return test_step;
	}

	public void VerifyRoomDisplayed(WebDriver driver, String roomClassName, ArrayList<String> test_steps) {

		String Roomxpath = "//span[contains(@data-bind,'roomClass.name') and text()='" + roomClassName + "']";
		WebElement RoomName = driver.findElement(By.xpath(Roomxpath));
		Wait.explicit_wait_visibilityof_webelement(RoomName, driver);
		assertTrue(RoomName.isDisplayed(), "Failed: '" + roomClassName + "' not displayed");
		test_steps.add("Verified Room Class '" + roomClassName + "' is Displayed");
	}

	public void VerifyAvgPerNight(WebDriver driver, String roomClassName, String baseAmount, boolean expand,
			ArrayList<String> test_steps) throws InterruptedException {

		String AvgRatePerNightxpath = "//span[contains(@data-bind,'roomClass.name') and text()='" + roomClassName
				+ "']/following-sibling::span[contains(@data-bind,'Avg per night')]";
		WebElement AvgRatePerNight = driver.findElement(By.xpath(AvgRatePerNightxpath));
		Wait.explicit_wait_visibilityof_webelement(AvgRatePerNight, driver);
		assertTrue(AvgRatePerNight.isDisplayed(), "Failed: 'Avg per night ' not displayed");
		String AvgValue = AvgRatePerNight.getText();
		AvgValue = AvgValue.split(" ")[3];
		AvgValue = AvgValue.replace("$", "").replaceAll(" ", "");
		assertEquals(AvgValue, baseAmount, "Failed: Base Amount missmatched");
		test_steps.add("Verified Room Class '" + roomClassName + "' 'Avg per night $" + AvgValue + "' is Displayed");
		if (expand) {
			Utility.ScrollToElement(AvgRatePerNight, driver);
			AvgRatePerNight.click();
			test_steps.add("Click on 'Avg per night $" + AvgValue + "' link");
		}
	}

	public void VerifyRoomClassDescription_Date(WebDriver driver, String roomClassName, String expectedvalue,
			ArrayList<String> test_steps) {

		String elementxpath = "//span[contains(@data-bind,'roomClass.name') and text()='" + roomClassName
				+ "']//ancestor::div[contains(@data-bind,'expandRoomClassRateInfo')]/following-sibling::div//td[contains(@data-bind,'startDate')]";
		WebElement Element = driver.findElement(By.xpath(elementxpath));
		Wait.explicit_wait_visibilityof_webelement(Element, driver);
		assertTrue(Element.isDisplayed(), "Failed: Date not displayed");
		assertEquals(Element.getText(), expectedvalue, "Failed: Datet missmatched");
		test_steps.add("Verified Date '" + expectedvalue + "' is Displayed");
	}

	public void VerifyRoomClassDescription_Rate(WebDriver driver, String roomClassName, String expectedvalue,
			ArrayList<String> test_steps) {

		String elementxpath = "//span[contains(@data-bind,'roomClass.name') and text()='" + roomClassName
				+ "']//ancestor::div[contains(@data-bind,'expandRoomClassRateInfo')]/following-sibling::div//td[contains(@data-bind,'rateDisplayName')]";
		WebElement Element = driver.findElement(By.xpath(elementxpath));
		Wait.explicit_wait_visibilityof_webelement(Element, driver);
		assertTrue(Element.isDisplayed(), "Failed: Rate not displayed");
		assertEquals(Element.getText(), expectedvalue, "Failed: Rate missmatched");
		test_steps.add("Verified Rate '" + expectedvalue + "' is Displayed");
	}

	public void VerifyRoomClassDescription_Amount(WebDriver driver, String roomClassName, String expectedvalue,
			ArrayList<String> test_steps) {

		String elementxpath = "//span[contains(@data-bind,'roomClass.name') and text()='" + roomClassName
				+ "']//ancestor::div[contains(@data-bind,'expandRoomClassRateInfo')]/following-sibling::div//td[contains(@data-bind,'roomTotal')]";
		WebElement Element = driver.findElement(By.xpath(elementxpath));
		Wait.explicit_wait_visibilityof_webelement(Element, driver);
		assertTrue(Element.isDisplayed(), "Failed: Amount not displayed");
		assertEquals(Utility.convertDollarToNormalAmount(driver, Element.getText()).trim(), expectedvalue,
				"Failed: Amount missmatched");
		test_steps.add("Verified Amount '" + expectedvalue + "' is Displayed");
	}

	public void closeReservationTab(WebDriver driver) throws InterruptedException {

		Elements_Reservation reservationPage = new Elements_Reservation(driver);
		Wait.WaitForElement(driver, OR.OpenedReservation_CloseButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR.OpenedReservation_CloseButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR.OpenedReservation_CloseButton), driver);
		Utility.ScrollToElement(driver.findElement(By.xpath(OR.OpenedReservation_CloseButton)), driver);
		// reservationPage.OpenedReservation_CloseButton.click();
		Utility.clickThroughAction(driver, reservationPage.OpenedReservation_CloseButton);
		try {
			Wait.wait3Second();
			reservationPage.unsavedReservationAlert.click();

		} catch (Exception e) {
			// TODO: handle exception
		}

	}

	public void CloseOpenedTab(WebDriver driver) throws InterruptedException {

		Elements_Reservation ReservationPage = new Elements_Reservation(driver);
		Wait.WaitForElement(driver, OR.OpenedReservation_CloseButton);
		Utility.ScrollToElement(driver.findElement(By.xpath(OR.OpenedReservation_CloseButton)), driver);
		WebElement CloseBtn = driver.findElement(By.xpath(OR.OpenedReservation_CloseButton));
		CloseBtn.click();

	}

	public void EnterDate(WebDriver driver, String DateType, String Date) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String Datexpath = "//input[contains(@data-bind,'" + DateType + "Date')]";
		Wait.explicit_wait_xpath(Datexpath, driver);
		WebElement DateInput = driver.findElement(By.xpath(Datexpath));
		Wait.explicit_wait_visibilityof_webelement(DateInput, driver);
		Utility.ScrollToElement(DateInput, driver);
		DateInput.sendKeys(Keys.chord(Keys.CONTROL, "a"), Date);
		assertEquals(DateInput.getAttribute("value"), Date, "Failed: Entered Date missmatched");
	}

	public ArrayList<String> VerifyCreatedTask(WebDriver driver, String TaskType, String Details, String Status,
			ArrayList<String> test_steps) throws InterruptedException {
		Elements_Reservation ReservationPage = new Elements_Reservation(driver);

		WebElement TaskTypeCheck = driver
				.findElement(By.xpath("//span[text()='Tasks ']/../..//td//span[text()='" + TaskType.trim() + "']"));
		Utility.ScrollToElement(TaskTypeCheck, driver);
		TaskTypeCheck.getText();
		assertEquals(TaskTypeCheck.getText(), TaskType, "Failed : TaskType missmatched");
		reslogger.info("Verified Task  Type :" + TaskType);
		test_steps.add("Verified Task  Type :" + TaskType);

		WebElement DetailsCheck = driver.findElement(By.xpath(
				"//td[contains(@data-bind,'text: description')  and contains(text(),'" + Details.trim() + "')]"));
		DetailsCheck.getText();
		assertEquals(DetailsCheck.getText(), Details, "Failed : Detail missmatched");
		reslogger.info("Verified Task  Detail :" + Details);

		test_steps.add("Verified Task  Detail :" + Details);

		WebElement StatusCheck = driver
				.findElement(By.xpath("//span[text()='Tasks ']/../..//td[contains(text(),'" + Status + "')]"));
		StatusCheck.getText();
		assertEquals(StatusCheck.getText(), Status, "Failed : Status missmatched");
		reslogger.info("Verified Task  Status :" + Status);
		test_steps.add("Verified Task  Status :" + Status);
		return test_steps;

	}

	public ArrayList<String> DeleteTask(WebDriver driver, String TaskDetails, ArrayList<String> test_steps)
			throws InterruptedException {

		WebElement DeletTaskButton = driver
				.findElement(By.xpath("//td[contains(@data-bind,'text: description')  and contains(text(),'"
						+ TaskDetails.trim() + "')]/ancestor::tr//button"));
		String DeleteConfirmationPopUp = "//div[text()='Are you sure you want to delete this task?']";
		String YesButton = "//div[text()='Are you sure you want to delete this task?']/parent::div//button[text()='Yes']";
		JavascriptExecutor jse = (JavascriptExecutor) driver;
		jse.executeScript("arguments[0].click();", DeletTaskButton);
		reslogger.info("Delete Task Button Clicked");
		test_steps.add("Delete Task Button Clicked");

		WebElement DeleteConfirmationPopUpEle = driver.findElement(By.xpath(DeleteConfirmationPopUp));
		WebElement YesButtonEle = driver.findElement(By.xpath(YesButton));
		Wait.WaitForElement(driver, DeleteConfirmationPopUp);

		reslogger.info("Confirmation Message Popup Displayed: " + DeleteConfirmationPopUpEle.getText());
		test_steps.add("Confirmation Message Popup Displayed: " + DeleteConfirmationPopUpEle.getText());
		Utility.ScrollToElement(YesButtonEle, driver);
		// YesButtonEle.click();
		Utility.clickThroughJavaScript(driver, YesButtonEle);

		reslogger.info("Task With Details :" + TaskDetails + " Deleted Successfully");
		test_steps.add("Task With Details :" + TaskDetails + " Deleted Successfully");
		return test_steps;

	}

	public ArrayList<String> clickPencilIcon_GoBackToStayInfo(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.explicit_wait_visibilityof_webelement_120(res.ClickGoBackToStayInfo, driver);
		Wait.explicit_wait_elementToBeClickable(res.ClickGoBackToStayInfo, driver);
		Utility.ScrollToElement(res.ClickGoBackToStayInfo, driver);
		res.ClickGoBackToStayInfo.click();
		reslogger.info("Edit Icon Clicked");
		test_steps.add("Edit Icon Clicked");
		return test_steps;
	}

	public LocalDate StartDate, EndDate;

	public List<LocalDate> getDatesBetweenFromAndToDate(WebDriver driver, ArrayList<String> test_steps,
			String CheckINDate, String CheckOutDate) {
		List<String> checkINDate = Arrays.asList(CheckINDate.split("\\|"));
		List<String> checkOutDate = Arrays.asList(CheckOutDate.split("\\|"));
		// SimpleDateFormat formatter1=new SimpleDateFormat("dd/MM/yyyy");
		DateTimeFormatter formatter = DateTimeFormatter.ofPattern("dd/MM/yyyy");
		// LocalDate date = LocalDate.parse("29-Mar-2019", formatter);

		LocalDate Start = LocalDate.parse(checkINDate.get(0), formatter);
		LocalDate End = LocalDate.parse(checkOutDate.get(0), formatter);
		List<LocalDate> ret = new ArrayList<LocalDate>();
		for (LocalDate date = Start.plusDays(1); !date.isAfter(End.minusDays(1)); date = date.plusDays(1)) {
			ret.add(date);
			StartDate = Start;
			EndDate = End;
		}
		return ret;

	}

	public void verifyDisplayVoidItems(WebDriver driver, ArrayList<String> test_steps, String Date, String Note,
			String amount) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		/*
		 * String LineItemNotePath =
		 * "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-date']/span[contains(text(),'"
		 * + Date +
		 * "')]/ancestor::td//preceding-sibling::td[contains(@class,'lineitem-note')]/img[@title='"
		 * + Note + "']";
		 */
		String LineItemNotePath = "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-date']/span[contains(text(),'"
				+ Date + "')]/ancestor::td//preceding-sibling::td[contains(@class,'lineitem-note')]/i[@title='" + Note
				+ "']";
		WebElement SetLineItemElement = driver.findElement(By.xpath(LineItemNotePath));
		String LineItemAmount = "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-date']/span[contains(text(),'"
				+ Date
				+ "')]/ancestor::td//following-sibling::td[contains(@class,'lineitem-amount')]/span[contains(text(),'"
				+ amount + "')]";
		WebElement LineItemElement = driver.findElement(By.xpath(LineItemAmount));

		assertTrue(SetLineItemElement.isDisplayed(), "Failed: To Verify Line Item");
		assertTrue(LineItemElement.isDisplayed(), "Failed: To Verify Line Item");
		test_steps.add(" Verified Date:<b>  " + Date + "</b>");
		reslogger.info("Verified  Date: " + Date);
		test_steps.add(" Verified  Note:<b>  " + Note + "</b>");
		reslogger.info(" Verified  Note: " + Note);
		test_steps.add(" Verified  Amount:<b>  " + amount + "</b>");
		reslogger.info(" Verified  Amount: " + amount);

	}

	// Created by Adhnan: ClickEditStayInfo
	public ArrayList<String> ClickEditStayInfo(WebDriver driver, ArrayList<String> steps)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(element.StayInfo_Editbutton, driver);
		Wait.explicit_wait_elementToBeClickable(element.StayInfo_Editbutton, driver);
		Utility.ScrollToElement(element.StayInfo_Editbutton, driver);
		Utility.clickThroughJavaScript(driver, element.StayInfo_Editbutton);
		reslogger.info("Click Stay Info Edit button");
		steps.add("Click Stay Info Edit button");
		Wait.WaitForElement(driver, OR_Reservation.StayInfo_ChangeDetails);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.StayInfo_ChangeDetails), driver);
		// Wait.explicit_wait_visibilityof_webelement(element.StayInfo_ChangeDetails,
		// driver);
		return steps;
	}

	// Created By adhnan : ClickStayInfo_ChangeDetails
	public ArrayList<String> ClickStayInfo_ChangeDetails(WebDriver driver, ArrayList<String> steps)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(element.StayInfo_ChangeDetails, driver);
		Wait.explicit_wait_elementToBeClickable(element.StayInfo_ChangeDetails, driver);
		Utility.ScrollToElement(element.StayInfo_ChangeDetails, driver);
		Utility.clickThroughJavaScript(driver, element.StayInfo_ChangeDetails);
		reslogger.info("Click Stay Info 'Change Stay Details");
		steps.add("Click Stay Info 'Change Stay Details'");
		return steps;
	}

	public ArrayList<String> VerifyRoomClass_Rule(WebDriver driver, String roomClassName, String ruleName,
			boolean broken, ArrayList<String> getTest_Steps) throws InterruptedException {
		String RuleBrokenxpath = "//span[contains(@data-bind,'roomClass.name') and text()='" + roomClassName
				+ "']/following-sibling::span[contains(@data-bind,'rules')]";
		WebElement RuleBroken = driver.findElement(By.xpath(RuleBrokenxpath));
		Wait.explicit_wait_visibilityof_webelement(RuleBroken, driver);
		Utility.ScrollToElement(RuleBroken, driver);
		assertTrue(RuleBroken.isDisplayed(), "Failed: 'Rule' not displayed");
		String rule = RuleBroken.getText();
		assertEquals(rule, ruleName, "Failed: rule Name missmatched");
		getTest_Steps.add("Verified Room Class '" + roomClassName + "' rule '" + rule + "' is Displayed");
		String color = RuleBroken.getAttribute("class");
		String ruleapplied = RuleBroken.getAttribute("data-bind");
		reslogger.info(color);
		reslogger.info(ruleapplied);
		if (broken) {
			assertTrue(color.contains("red"), "Failed : Rule color is not red");
			assertTrue(ruleapplied.contains("broken"), "Failed : Rule color is not broken");
			getTest_Steps.add("Verified Rule is 'Broken'");
			getTest_Steps.add("Verified Rule is Shown in 'Red'");
		} else {
			assertTrue(color.contains("green"), "Failed : Rule color is not green");
			assertTrue(ruleapplied.contains("statisfied"), "Failed : Rule is not satisfied");
			getTest_Steps.add("Verified Rule is 'Satisfied'");
			getTest_Steps.add("Verified Rule is Shown in 'Green'");
		}

		Actions actions = new Actions(driver);
		actions.moveToElement(RuleBroken).perform();
		String mouseenter = RuleBroken.getAttribute("is-title-added-on-mouseenter");
		assertEquals(mouseenter, "true", "Failed: rule Name not appear on mouse enter missmatched");
		getTest_Steps.add(
				"Verified Upon navigating mouse on top of the Rule name in context sensitive tool tip Rule name is displayed");
		return getTest_Steps;
	}

	public ArrayList<String> getRoomsOnDetailPage(WebDriver driver, ArrayList<String> Rooms) {
		String path = "//div/a[@class='accordion-toggle']/following-sibling::span[contains(@data-bind,'roomClassName')]";
		List<WebElement> element = driver.findElements(By.xpath(path));
		for (WebElement element1 : element) {
			Rooms.add(element1.getText());
			/*
			 * if (element1.isDisplayed()) { Rooms.add(element1.getText().trim()); }
			 */
		}
		reslogger.info("New Rooms are:" + Rooms);

		return Rooms;
	}

	public void click_YestakemetotheFolio(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.Checkout_CompleteCheckOutMsgYesButton, driver);
		res.Checkout_CompleteCheckOutMsgYesButton.click();
		test_steps.add("Clicking on Yes, take me to the Folio");
		reslogger.info("Clicking on Yes, take me to the Folio");
	}

	public void click_Nocancelthecheckoutprocess(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.Checkout_CompleteCheckOutMsgNoButton, driver);
		res.Checkout_CompleteCheckOutMsgNoButton.click();
		test_steps.add("Clicking on No, cancel the check-out process");
		reslogger.info("Clicking on No, cancel the check-out process");
	}

	public ArrayList<String> VerifyRoomClassManualRateAmount(WebDriver driver, String RoomClass, String ManualRate)
			throws InterruptedException {
		ArrayList<String> test_steps = new ArrayList<>();
		String path = "((//span[.='" + RoomClass + "'])[2]//parent::div//following::div[2]//span)[1]";
		Wait.WaitForElement(driver, path);
		ManualRate = "$" + ManualRate + ".00";
		test_steps.add("Expected room class rate : " + ManualRate);
		reslogger.info("Expected room class rate : " + ManualRate);

		WebElement roomAmountEl = driver.findElement(By.xpath(path));
		String roomClassRate = roomAmountEl.getText();
		test_steps.add("Found : " + roomClassRate);
		reslogger.info("Found : " + roomClassRate);

		assertEquals(ManualRate, roomClassRate, "Failed: RoomClass rate didn't override");
		test_steps.add("Verified that room class rate override with manual rate");
		reslogger.info("Verified that room class rate override with manual rate");
		return test_steps;

	}

	public ArrayList<String> clickAddSRoomButtton(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.explicit_wait_visibilityof_webelement_120(res.CP_NewReservation_AddRoom, driver);
		Wait.explicit_wait_elementToBeClickable(res.CP_NewReservation_AddRoom, driver);
		Utility.ScrollToElement(res.CP_NewReservation_AddRoom, driver);
		try {
			res.CP_NewReservation_AddRoom.click();
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, res.CP_NewReservation_AddRoom);
		}
		test_steps.add("Clicking on add room");
		reslogger.info("Clicking on add room");
		return test_steps;
	}

	public String selectRoomNumber(WebDriver driver, String roomClassName, String roomNo, boolean autoSelect,
			ArrayList<String> test_steps) throws InterruptedException {

		// String path =
		// "//span[contains(@data-bind,'roomClass.name')][text()='"+roomClassName+"']/../../../..//select[contains(@data-bind,'roomNumber')]";
		String path = "//span[contains(@data-bind,'roomClass.name')][text()='" + roomClassName
				+ "']/../../../..//button";
		String selectedRoomNo = "";
		int count = 0;
		// try {
		// Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(path)),
		// driver);
		// }catch (Exception e) {
		// Wait.wait5Second();
		// }
		// while (true) {
		// if
		// (driver.findElement(By.xpath("//section[@class='ir-roomClassDetails
		// manual-override']")).isDisplayed()) {
		// break;
		// } else if (count == 20) {
		// break;
		// } else {
		// count++;
		// Wait.wait2Second();
		// }
		// }

		if (autoSelect) {
			try {
				Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
				driver.findElement(By.xpath(path)).click();
			} catch (Exception e) {
				reslogger.info("Waited to loading symbol");
			}
			int size = driver.findElements(By.xpath("//span[contains(@data-bind,'roomClass.name')][text()='"
					+ roomClassName + "']/../../../..//ul/li/a")).size();
			Random random = new Random();
			int randomNumber = 0;

			randomNumber = random.nextInt(size) + 1;
			if (randomNumber <= 1) {
				randomNumber = randomNumber + 1;
			}

			reslogger.info("count : " + size);
			reslogger.info("randomNumber : " + randomNumber);
			driver.findElement(By.xpath("(//span[contains(@data-bind,'roomClass.name')][text()='" + roomClassName
					+ "']/../../../..//ul/li/a)[" + randomNumber + "]")).click();
			Wait.wait5Second();
			selectedRoomNo = driver.findElement(By.xpath("//span[contains(@data-bind,'roomClass.name')][text()='"
					+ roomClassName + "']/../../../..//ul/li[@class='selected']/a/span")).getText();
			test_steps.add("Selected Room No : " + selectedRoomNo);
			reslogger.info("Selected Room No : " + selectedRoomNo);
		} else {
			try {
				Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
				driver.findElement(By.xpath(path)).click();
			} catch (Exception e) {
				reslogger.info("Waited to loading symbol");
			}
			driver.findElement(By.xpath("//span[contains(@data-bind,'roomClass.name')][text()='" + roomClassName
					+ "']/../../../..//ul/li/a/span[text()='" + roomNo + "']")).click();
			// new
			// Select(driver.findElement(By.xpath(path))).selectByVisibleText(roomNo);
			test_steps.add("Selected Room No : " + roomNo);
			reslogger.info("Selected Room No : " + roomNo);
		}

		return selectedRoomNo;
	}

	public ArrayList<String> clickSelectRoomButtton(WebDriver driver, String roomClassName)
			throws InterruptedException {
		ArrayList<String> test_steps = new ArrayList<String>();
		String path = "//span[contains(@data-bind,'roomClass.name')][text()='" + roomClassName
				+ "']/../../../..//div[contains(@data-bind,'click: onSelect')]/a";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(path)), driver);
		Utility.ScrollToElement(driver.findElement(By.xpath(path)), driver);
		driver.findElement(By.xpath(path)).click();
		test_steps.add("Clicking on Select room");
		reslogger.info("Clicking on Select room");
		return test_steps;

	}

	public ArrayList<String> newPolicesApplicableYesBtn(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		Wait.wait5Second();
		Wait.explicit_wait_visibilityof_webelement_120(res.NewPolicesApplicableYesBtn, driver);
		Wait.explicit_wait_elementToBeClickable(res.NewPolicesApplicableYesBtn, driver);
		Utility.ScrollToElement(res.NewPolicesApplicableYesBtn, driver);
		res.NewPolicesApplicableYesBtn.click();
		reslogger.info("New Polices Applicable Popup Yes button Clicked");
		test_steps.add("New Polices Applicable Popup Yes button Clicked");
		return test_steps;
	}

	public ArrayList<String> selectPrimaryRoom(WebDriver driver, String roomClass, String roomNo)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		String primaryArrow = "//span[text()='Primary Room']/../../following-sibling::div//button";
		verifySpinerLoading(driver);
		Wait.waitForElementToBeClickable(By.xpath(primaryArrow), driver);
		try {
			driver.findElement(By.xpath(primaryArrow)).click();

		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(primaryArrow)));
		}

		String primaryRoom = "//span[text()='Primary Room']/../../following-sibling::div//li//span[text()='" + roomClass
				+ ": " + roomNo + "']";
		// primary = driver.findElement(By.xpath(primaryRoom)).getText();
		Wait.WaitForElement(driver, primaryRoom);
		driver.findElement(By.xpath(primaryRoom)).click();
		test_steps.add("Selected Primary Room as : " + roomClass + ": " + roomNo);
		reslogger.info("Selected Primary Room as : " + roomClass + ": " + roomNo);
		return test_steps;
	}

	public ArrayList<String> selectAdditionalRoom(WebDriver driver, String roomClass, String roomNo) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		String additionalArrow = "//span[text()='Additional Room']/../../following-sibling::div//button";
		Wait.waitForElementToBeClickable(By.xpath(additionalArrow), driver);
		try {
			JavascriptExecutor js = (JavascriptExecutor) driver;
			js.executeScript("arguments[0].click()", additionalArrow);
		} catch (Exception e) {
			driver.findElement(By.xpath(additionalArrow)).click();
		}

		String additionalRoomPath = "//span[text()='Additional Room']/../../following-sibling::div//li//span[text()='"
				+ roomClass + ": " + roomNo + "']";
		// primary = driver.findElement(By.xpath(primaryRoom)).getText();
		Wait.WaitForElement(driver, additionalRoomPath);
		driver.findElement(By.xpath(additionalRoomPath)).click();
		test_steps.add("Selected Additional Room as : " + roomClass + ": " + roomNo);
		reslogger.info("Selected Additional Room as : " + roomClass + ": " + roomNo);
		return test_steps;
	}

	public ArrayList<String> enterPrimaryGuestName(WebDriver driver, String GuestFirstName, String GuestLastName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.WaitForElement(driver, OR_Reservation.PrimaryGuestFirstName);
		res.PrimaryGuestFirstName.clear();
		res.PrimaryGuestFirstName.sendKeys(GuestFirstName);
		test_steps.add("Guest First Name : " + GuestFirstName);
		reslogger.info("Guest First Name : " + GuestFirstName);

		Wait.WaitForElement(driver, OR_Reservation.PrimaryGuestLastName);
		res.PrimaryGuestLastName.clear();
		res.PrimaryGuestLastName.sendKeys(GuestLastName);
		test_steps.add("Guest Last Name : " + GuestLastName);
		reslogger.info("Guest Last Name : " + GuestLastName);

		return test_steps;

	}

	public ArrayList<String> enterAdditionalGuestName(WebDriver driver, String GuestFirstName, String GuestLastName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.WaitForElement(driver, OR_Reservation.AdditonalGuest1FirstName);
		res.AdditonalGuest1FirstName.clear();
		res.AdditonalGuest1FirstName.sendKeys(GuestFirstName);
		test_steps.add("Guest First Name : " + GuestFirstName);
		reslogger.info("Guest First Name : " + GuestFirstName);

		Wait.WaitForElement(driver, OR_Reservation.AdditonalGuest1LastName);
		res.AdditonalGuest1LastName.clear();
		res.AdditonalGuest1LastName.sendKeys(GuestLastName);
		test_steps.add("Guest Last Name : " + GuestLastName);
		reslogger.info("Guest Last Name : " + GuestLastName);

		return test_steps;

	}

	public ArrayList<String> verifyAccountName(WebDriver driver, String accountName, boolean isOpen) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.explicit_wait_visibilityof_webelement_120(res.HeaderAccountName_AfterReservation, driver);
		String foundName = res.HeaderAccountName_AfterReservation.getText();
		foundName = foundName.replace("(", "");
		foundName = foundName.replace(")", "");
		assertEquals(foundName.trim(), accountName, "Failed to verify Account Name");
		test_steps.add("Successfully Verified Assoicated Account Name : " + accountName);
		reslogger.info("Successfully Verified Assoicated Account Name : " + accountName);
		if (isOpen) {
			Wait.explicit_wait_elementToBeClickable(res.HeaderAccountName_AfterReservation, driver);
			res.HeaderAccountName_AfterReservation.click();
			test_steps.add("Account Link Clicked");
			reslogger.info("Account Link Clicked");
		}
		return test_steps;
	}

	public String getFolioOptionCount(WebDriver driver) throws InterruptedException {
		String path = "//li//span[contains(text(),'Guest Folio')]/../../../li";
		Wait.wait2Second();
		return driver.findElements(By.xpath(path)).size() + "";
	}

	public ArrayList<String> selectFolioOption(WebDriver driver, String option) throws InterruptedException {
		String buttonPath = "//li//span[contains(text(),'Guest Folio')]/../../../../..//button";
		String optionPath = "//li//span[contains(text(),'" + option + "')]";
		ArrayList<String> test_steps = new ArrayList<String>();
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(buttonPath)), driver);
		try {
			driver.findElement(By.xpath(buttonPath)).click();
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(buttonPath)));
		}
		Wait.wait3Second();
		driver.findElement(By.xpath(optionPath)).click();
		test_steps.add("Selected Folio Option : " + option);
		reslogger.info("Selected Folio Option : " + option);
		return test_steps;
	}

	public ArrayList<String> selectFolioOptionByIndex(WebDriver driver, String index) throws InterruptedException {
		String buttonPath = "//li//span[contains(text(),'Guest Folio')]/../../../../..//button";
		String optionPath = "(//li//span[contains(text(),'Guest Folio ')])[" + index + "]";
		ArrayList<String> test_steps = new ArrayList<String>();
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(buttonPath)), driver);
		driver.findElement(By.xpath(buttonPath)).click();
		Wait.wait1Second();
		try {
			driver.findElement(By.xpath(optionPath)).click();
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(optionPath)));
		}
		if (index.equalsIgnoreCase("1")) {
			test_steps.add("Selected Primary Option");
			reslogger.info("Selected Primary Option");
		} else {
			test_steps.add("Selected Secondary Option");
			reslogger.info("Selected Secondary Option");
		}

		return test_steps;
	}

	public ArrayList<String> selectFolioOption(WebDriver driver, int index) throws InterruptedException {
		String buttonPath = "//li//span[contains(text(),'Guest Folio')]/../../../../..//button";
		String optionPath = "//li//span[contains(text(),'Guest Folio')]/../../..//li[" + index + "]";
		ArrayList<String> test_steps = new ArrayList<String>();
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(buttonPath)), driver);
		driver.findElement(By.xpath(buttonPath)).click();
		Wait.wait1Second();
		driver.findElement(By.xpath(optionPath)).click();
		test_steps.add("Selected Folio Option : " + driver
				.findElement(
						By.xpath("//li//span[contains(text(),'Guest Folio')]/../../../li[@class='selected']//span"))
				.getText());
		reslogger.info("Selected Folio Option : " + driver
				.findElement(
						By.xpath("//li//span[contains(text(),'Guest Folio')]/../../../li[@class='selected']//span"))
				.getText());
		return test_steps;
	}

	// Stay Info

	public String getArrivalDate_ResDetail(WebDriver driver) {
		String ariveDatePath = "//div[@class='checkin']//span[contains(@data-bind,'dateArrive')][1]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(ariveDatePath)), driver);
		return driver.findElement(By.xpath(ariveDatePath)).getText();
	}

	public String getDepartDate_ResDetail(WebDriver driver) {
		String path = "//div[@class='checkout']//span[contains(@data-bind,'dateDepart')][1]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getNoOfNights_ResDetail(WebDriver driver) {
		String path = "(//div[@class='noofnights']//span[contains(@data-bind,'noOfNights')])[1]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getNoOfAdults_ResDetail(WebDriver driver) {
		String path = "//div[contains(@class,'guestInfo')]//span[contains(@data-bind,'numberOfAdults')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getNoOfChilds_ResDetail(WebDriver driver) {
		String path = "//div[contains(@class,'guestInfo')]//span[contains(@data-bind,'numberOfChildren')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getRoomClass_ResDetail(WebDriver driver) {
		String path = "//div[contains(@class,'roomInfo')]//span[contains(@data-bind,'roomClassName')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getRoomNo_ResDetail(WebDriver driver) {
		String path = "//div[contains(@class,'roomInfo')]//span[contains(@data-bind,'roomNumber')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	// Guest-Info

	public String getGuestName_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:GuestInfo')]//span[contains(@data-bind,'GuestProfileName')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getContactName_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:GuestInfo')]//span[contains(@data-bind,'ContactProfileName')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getEmail_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:GuestInfo')]//span[contains(@data-bind,'emailAddress')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getPhoneNO_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:GuestInfo')]//span[contains(@data-bind,'mailing_formattedPhoneNumber')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		String foundNo = driver.findElement(By.xpath(path)).getText();
		foundNo = foundNo.replace("-", "").trim();
		foundNo = foundNo.replace("(", "");
		foundNo = foundNo.replace(")", "");
		return foundNo.trim();
	}

	public String getAlternateNo_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:GuestInfo')]//span[contains(@data-bind,'mailing_formattedAlternativePhoneNumber')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		String foundNo = driver.findElement(By.xpath(path)).getText();
		foundNo = foundNo.replace("-", "").trim();
		foundNo = foundNo.replace("(", "");
		foundNo = foundNo.replace(")", "");
		return foundNo.trim();
	}

	public String getAccount_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:GuestInfo')]//span[contains(@data-bind,'account')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getAddressLine1_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:mailingAddress')]//span[contains(@data-bind,'text:address1')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getAddressLine2_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:mailingAddress')]//span[contains(@data-bind,'text:address2')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getAddressLine3_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:mailingAddress')]//span[contains(@data-bind,'text:address3')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getCity_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:mailingAddress')]//span[contains(@data-bind,'city')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getState_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:mailingAddress')]//span[contains(@data-bind,'stateName')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getContry_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:mailingAddress')]//span[contains(@data-bind,'countryId')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getPostalCode_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:mailingAddress')]//span[contains(@data-bind,'postalCode')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public ArrayList<String> verfifyGuestinfo_ResDetail(WebDriver driver, String guestName, String addLine1,
			String city, String state, String contry, String postalCode, String email, String phoneNo) {
		ArrayList<String> test_steps = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.explicit_wait_visibilityof_webelement_120(res.GuestName_GuestInfo, driver);
		String foundGuestName = res.GuestName_GuestInfo.getText();
		assertEquals(foundGuestName, guestName, "Failed To Verify Guest Name");
		reslogger.info("Successfully Verified Guest Name : " + foundGuestName);
		test_steps.add("Successfully Verified Guest Name : " + foundGuestName);

		Wait.explicit_wait_visibilityof_webelement_120(res.AddressLine1_GuestInfo, driver);
		String foundAddLine1 = res.AddressLine1_GuestInfo.getText();
		assertEquals(foundAddLine1, addLine1, "Failed To Verify Address Line1");
		reslogger.info("Successfully Verified Address Line1 : " + foundAddLine1);
		test_steps.add("Successfully Verified Address Line1 : " + foundAddLine1);

		Wait.explicit_wait_visibilityof_webelement_120(res.City_GuestInfo, driver);
		String foundCity = res.City_GuestInfo.getText();
		assertEquals(foundCity, city, "Failed To Verify City");
		reslogger.info("Successfully Verified City : " + foundCity);
		test_steps.add("Successfully Verified City : " + foundCity);

		Wait.explicit_wait_visibilityof_webelement_120(res.Contry_GuestInfo, driver);
		String foundCountry = res.Contry_GuestInfo.getText();
		assertEquals(foundCountry, contry, "Failed To Verify Country");
		reslogger.info("Successfully Verified Country : " + foundCountry);
		test_steps.add("Successfully Verified Country : " + foundCountry);

		Wait.explicit_wait_visibilityof_webelement_120(res.State_GuestInfo, driver);
		String foundState = res.State_GuestInfo.getText();
		assertEquals(foundState, state, "Failed To Verify State");
		reslogger.info("Successfully Verified State : " + foundState);
		test_steps.add("Successfully Verified State : " + foundState);

		Wait.explicit_wait_visibilityof_webelement_120(res.PostalCode_GuestInfo, driver);
		String foundPostalCode = res.PostalCode_GuestInfo.getText();
		assertEquals(foundPostalCode, postalCode, "Failed To Verify PostalCode");
		reslogger.info("Successfully Verified PostalCode : " + foundPostalCode);
		test_steps.add("Successfully Verified PostalCode : " + foundPostalCode);

		Wait.explicit_wait_visibilityof_webelement_120(res.Email_GuestInfo, driver);
		String foundEmail = res.Email_GuestInfo.getText();
		assertEquals(foundEmail, email, "Failed To Verify Email");
		reslogger.info("Successfully Verified Email : " + foundEmail);
		test_steps.add("Successfully Verified Email : " + foundEmail);

		Wait.explicit_wait_visibilityof_webelement_120(res.PhoneNo_GuestInfo, driver);
		String foundphoneNo = res.PhoneNo_GuestInfo.getText();
		foundphoneNo = foundphoneNo.replace("-", "").trim();
		foundphoneNo = foundphoneNo.replace("(", "");
		foundphoneNo = foundphoneNo.replace(")", "");
		foundphoneNo = foundphoneNo.replace(" ", "");
		assertEquals(foundphoneNo.trim(), phoneNo, "Failed To Verify phoneNo");
		reslogger.info("Successfully Verified PhoneNo : " + foundphoneNo);
		test_steps.add("Successfully Verified PhoneNo : " + foundphoneNo);

		return test_steps;
	}

	// Payment Info
	public String getPaymentMethod_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'PaymentDetail')]//span[contains(@data-bind,'methodName')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getCardNoLast4Digits_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'PaymentDetail')]//span[contains(@data-bind,'text: PaymentDetail().creditCard.displayNumber')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getNameOnCard_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'PaymentDetail')]//span[contains(@data-bind,'cardHolderName')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getCardExpiryDate_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'PaymentDetail')]//span[contains(@data-bind,'expiresOn')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public ArrayList<String> verifyPaymentDetail_ResDetail(WebDriver driver, String paymentMethod, String cardNo,
			String nameOnCard, String expiry) {
		ArrayList<String> test_steps = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.explicit_wait_visibilityof_webelement_120(res.PaymentMethod_PayInfo, driver);
		String foundPayMethod = res.PaymentMethod_PayInfo.getText();
		assertEquals(foundPayMethod, paymentMethod, "Failed To Verify Payment Method");
		reslogger.info("Successfully Verified Payment Method : " + foundPayMethod);
		test_steps.add("Successfully Verified Payment Method : " + foundPayMethod);

		Wait.explicit_wait_visibilityof_webelement_120(res.CardNo_PayInfo, driver);
		String foundCardNo = res.CardNo_PayInfo.getText();
		assertEquals(foundCardNo, cardNo, "Failed To Verify CardNo");
		reslogger.info("Successfully Verified CardNo : " + foundCardNo);
		test_steps.add("Successfully Verified CardNo : " + foundCardNo);

		Wait.explicit_wait_visibilityof_webelement_120(res.NameOnCard_PayInfo, driver);
		String foundNameOnCard = res.NameOnCard_PayInfo.getText();
		assertEquals(foundNameOnCard, nameOnCard, "Failed To Verify Name On Card");
		reslogger.info("Successfully Verified Name On Card : " + foundNameOnCard);
		test_steps.add("Successfully Verified Name On Card : " + foundNameOnCard);

		Wait.explicit_wait_visibilityof_webelement_120(res.CardExpiry_PayInfo, driver);
		String foundExpiry = res.CardExpiry_PayInfo.getText();
		assertEquals(foundExpiry, expiry, "Failed To Verify expiry");
		reslogger.info("Successfully Verified expiry : " + foundExpiry);
		test_steps.add("Successfully Verified expiry : " + foundExpiry);
		return test_steps;
	}

	// Market Info
	public String getReferral_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:marketingInfo')]//span[text()='Referral']/following-sibling::span";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getSource_ResDetail(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:marketingInfo')]//span[text()='Source']/following-sibling::span";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public ArrayList<String> verifyPopupChangeInPolicy(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		reslogger.info("Verifying Popup Appear for Policy Change");
		try {
			Wait.explicit_wait_visibilityof_webelement(res.CP_VerifyPolicyChangePopup, driver);
			String text = res.CP_VerifyPolicyChangePopup.getText();
			String message = "Would you like to update the reservation to the new policies?";
			if (text.contains(message)) {
				test_steps.add("Verified pop up displayed for Policy Change");
			}

			// Click on Yes Button
			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutAllButton_ConfirmationMsg);
			res.CP_Reservation_CheckOutAllButton_ConfirmationMsgYesButton.click();
			test_steps.add("Click on Yes");
		} catch (Exception e) {
			test_steps.add("Policy Change PopUp didn't Display");
		}

		return test_steps;
	}

	public void verifyRoomChangeInHistoryTab(WebDriver driver, ArrayList test_steps, String roomNoBefore,
			String roomNoAfter) {

		String res = "//span[contains(text(),'Changed room assignment from')]";
		reslogger.info("msg :: " + res);
		// Wait.expl
		if (driver.findElement(By.xpath(res)).isDisplayed()) {
			test_steps.add("Verified Changed room assignment from " + roomNoBefore + " to " + roomNoAfter);
			reslogger.info("Verified Changed room assignment from " + roomNoBefore + " to " + roomNoAfter);
		} else {
			test_steps.add("Failed to Change room assignment from " + roomNoBefore + " to " + roomNoAfter);
			reslogger.info("Failed to Change room assignment from " + roomNoBefore + " to " + roomNoAfter);
		}
	}

	public ArrayList<String> clickAddRooms(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddRoom);
		res.CP_NewReservation_AddRoom.click();
		test_steps.add("Click on Add a Room Button");
		reslogger.info("Click on Add a Room Button");
		return test_steps;
	}

	public String AssignNewRoomNumber(WebDriver driver) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		WebDriverWait wait = new WebDriverWait(driver, 25);

		Wait.wait2Second();
		int count = res.CP_Reservation_StayInfo_ThreeDotts.size();
		Utility.ScrollToElement(res.CP_Reservation_StayInfo_ThreeDotts.get(count - 1), driver);

		res.CP_Reservation_StayInfo_ThreeDotts.get(count - 1).click();
		test_steps.add("Click Edit Stay Info");
		reslogger.info("Click Edit Stay Info");

		// Click on room Assign Room No
		reslogger.info("Click on Assign Room No");
//		String assignRoomNumber = "//ul//li[contains(text(),'Assign  room Number')]";
//		By locator = By.xpath(assignRoomNumber);
		int assignRoomsize = res.CP_ClickAssignRoomNumber.size();
		res.CP_ClickAssignRoomNumber.get(assignRoomsize - 1).click();
		test_steps.add("Click Assign Room Number");

		// Click on room DropDown
		reslogger.info("Click on room dropdown");
		String part = "//div[contains(@class,'ir-flex-grow ir-flex-grow-3 ir-flex-mb-grow-3')]";
		By roomLocator = By.xpath(part);
		WebElement elementRoom = wait.until(ExpectedConditions.elementToBeClickable(roomLocator));
		String roomNumber = elementRoom.getText();
		reslogger.info("Room Number :: " + roomNumber);

		elementRoom.click();
		test_steps.add("Click on room dropdown");

		// Select different room number
		String selectRoom = "//div[contains(@class,'ir-flex-grow ir-flex-grow-3 ir-flex-mb-grow-3')]//div//div//ul//li//a";
		int roomNum = driver.findElements(By.xpath(selectRoom)).size();
		String getRoomNumber = "";
		for (int i = 0; i < roomNum; i++) {
			getRoomNumber = res.CP_SelectResRoom.get(i).getText();
			if (!(getRoomNumber.equals(roomNumber)) && (!(getRoomNumber.equals("Unassigned")))) {
				res.CP_SelectResRoom.get(i).click();
				break;
			}
		}

		// Click Save Button
		reslogger.info("Clicking Save Button");
		Wait.explicit_wait_visibilityof_webelement(res.CP_SaveRoomNo, driver);
		Utility.ScrollToElement(res.CP_SaveRoomNo, driver);
		res.CP_SaveRoomNo.click();
		test_steps.add("Click on Save Room Number Button");

		return roomNumber + "-" + getRoomNumber;
	}

	public String AssignRoomNumber(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		WebDriverWait wait = new WebDriverWait(driver, 25);

		Wait.wait2Second();
		// Click on room Assign Room No
		reslogger.info("Click on Assign Room No");
		String assignRoomNumber = "//ul//li[contains(text(),'Assign  room Number')]";
		driver.findElement(By.xpath(assignRoomNumber)).click();
		test_steps.add("Click Assign Room Number");
		reslogger.info("Click on room dropdown");

		String part = "//div[contains(@class,'ir-flex-grow ir-flex-grow-3 ir-flex-mb-grow-3')]";
		By roomLocator = By.xpath(part);
		WebElement elementRoom = wait.until(ExpectedConditions.elementToBeClickable(roomLocator));
		String roomNumber = elementRoom.getText();
		reslogger.info("Room Number :: " + roomNumber);

		elementRoom.click();
		test_steps.add("Click on room dropdown");

		// Select different room number
		String selectRoom = "//div[contains(@class,'ir-flex-grow ir-flex-grow-3 ir-flex-mb-grow-3')]//div//div//ul//li//a";
		int roomNum = driver.findElements(By.xpath(selectRoom)).size();
		String getRoomNumber = "";
		for (int i = 0; i < roomNum; i++) {
			getRoomNumber = res.CP_SelectResRoom.get(i).getText();
			if (!(getRoomNumber.equals(roomNumber)) && (!(getRoomNumber.equals("Unassigned")))) {
				res.CP_SelectResRoom.get(i).click();
				break;
			}
		}

		return getRoomNumber;

	}

	public String unAssignRoomNumber(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		WebDriverWait wait = new WebDriverWait(driver, 25);

		Wait.wait2Second();
		// Click on room Assign Room No
		reslogger.info("Click on Assign Room No");
		String assignRoomNumber = "//ul//li[contains(text(),'Assign  room Number')]";
		driver.findElement(By.xpath(assignRoomNumber)).click();
		test_steps.add("Click Assign Room Number");
		reslogger.info("Click on room dropdown");

		String part = "//div[contains(@class,'ir-flex-grow ir-flex-grow-3 ir-flex-mb-grow-3')]";
		By roomLocator = By.xpath(part);
		WebElement elementRoom = wait.until(ExpectedConditions.elementToBeClickable(roomLocator));
		String roomNumber = elementRoom.getText();
		reslogger.info("Room Number :: " + roomNumber);

		elementRoom.click();
		test_steps.add("Click on room dropdown");

		// Select different room number
		String selectRoom = "//div[contains(@class,'ir-flex-grow ir-flex-grow-3 ir-flex-mb-grow-3')]//div//div//ul//li//a";
		int roomNum = driver.findElements(By.xpath(selectRoom)).size();
		String getRoomNumber = "";
		for (int i = 0; i < roomNum; i++) {
			getRoomNumber = res.CP_SelectResRoom.get(i).getText();
			if (getRoomNumber.equals("Unassigned")) {
				res.CP_SelectResRoom.get(i).click();
				break;
			}
		}

		return getRoomNumber;

	}

	public ArrayList<String> verifyPopupChangeInCost(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		reslogger.info("Verifying Popup Appear for Change In Cost");
		Wait.WaitForElement(driver, OR_Reservation.CP_VerifyChangeCostPopup);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_VerifyChangeCostPopup), driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_VerifyChangeCostPopup, driver);
		String text = res.CP_VerifyChangeCostPopup.getText();
		String[] parts = text.split("from");
		String message = parts[0];
		assertEquals(message, "Are you sure you wish to change the total cost of the stay ",
				"Failed : to verify amount change popup message");
		test_steps.add("Verified pop up displayed for Change in Total Cost");

		// Click on Yes Button
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutAllButton_ConfirmationMsg);
		res.CP_Reservation_CheckOutAllButton_ConfirmationMsgYesButton.click();
		test_steps.add("Click on Yes");

		return test_steps;
	}

	public void validateMRBAdditionalGuestInfo(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String PhoneNumber, String Email, String Country) {

		String sal = Salutation.split("\\|")[0];
		String guestFName = GuestFirstName.split("\\|")[0];
		String guestLName = GuestLastName.split("\\|")[0];
		String phonenum = PhoneNumber.split("\\|")[0];
		String email = Email.split("\\|")[0];

		String addtionalRoom = "//span[starts-with(text(),'Additional Room: ')]";
		List<WebElement> we = driver.findElements(By.xpath(addtionalRoom));

		int count = we.size();
		for (int i = 1; i <= count; i++) {
			addtionalRoom = "(//span[contains(text(),'Additional Room: ')])[" + i + "]";
			Wait.WaitForElement(driver, addtionalRoom);
			try {
				Utility.ScrollToElement(driver.findElement(By.xpath(addtionalRoom)), driver);
			} catch (InterruptedException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
			driver.findElement(By.xpath(addtionalRoom)).click();

			Elements_CPReservation res = new Elements_CPReservation(driver);

			String guestName = "(//span[contains(text(),'Additional Room: ')])[" + i
					+ "]/../../../../../..//label[text()='Guest Name']/following-sibling::span";
			Wait.WaitForElement(driver, guestName);

			String name = sal.trim() + " " + guestFName.trim() + " " + guestLName.trim();
			String guestname = driver.findElement(By.xpath(guestName)).getText().trim();
			reslogger.info(guestname);
			if (guestname.equalsIgnoreCase(name.trim())) {
				test_steps.add("Expanding additional guest room");
				reslogger.info("Expanding additional guest room");

				test_steps
						.add("Reservation additional Guest Info GuestName field verified for additonal room: " + name);
				reslogger
						.info("Reservation additional Guest Info GuestName field verified for additonal room: " + name);
			}
			String code = null;
			if (Country.equalsIgnoreCase("United States")) {
				code = "1";
			} else if (Country.equalsIgnoreCase("United Kingdom")) {
				code = "41";
			}
			code = code + "-";
			PhoneNumber = phonenum;
			reslogger.info(PhoneNumber);

			String phone = "(//span[contains(text(),'Additional Room: ')])[" + i
					+ "]/../../../../../..//label[text()='Phone']/following-sibling::span";
			phone = driver.findElement(By.xpath(phone)).getText().trim();
			if (phone.equalsIgnoreCase(PhoneNumber)) {
				test_steps.add("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
				reslogger.info("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
			}

			String mailadd = "(//span[contains(text(),'Additional Room: ')])[" + i
					+ "]/../../../../../..//label[text()='E-mail']/following-sibling::span";
			String mail = driver.findElement(By.xpath(mailadd)).getText().trim();
			reslogger.info(mail);
			if (mail.equalsIgnoreCase(email.trim())) {
				test_steps.add("Reservation Guest Info Email field verified : " + email);
				reslogger.info("Reservation Guest Info Email field verified : " + email);
			}
		}
		test_steps.add("Successfully validate MRB Additional Guest Info same as Primary Room's guest");
		reslogger.info("Successfully validate MRB Additional Guest Info same as Primary Room's guest");
	}

	public String VerifyFolioDropDownItem(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		List<WebElement> we = driver.findElements(By.xpath(OR_Reservation.CP_VerifyFolioDropDownItem));
		int count = we.size();
		String roomNo = res.CP_VerifyFolioDropDownItem.get(count - 1).getText().split(":")[1].trim();
		Utility.ScrollToElement(res.CP_Reservation_FolioDetailDropDownBox, driver);

		if (count > 2) {
			res.CP_VerifyFolioDropDownItem.get(count - 1).click();
			test_steps.add("Verified new Room is added to Folio: " + roomNo);
			reslogger.info("Verified new Room is added to Folio: " + roomNo);
		}
		return roomNo;
	}

	public void verifyAddRoomChangeInHistoryTab(WebDriver driver, ArrayList test_steps) {
		// Verify Rrom change message
		String res = "//span[contains(text(),'Added a room to this reservation')]";
		reslogger.info("msg :: " + res);

		if (driver.findElement(By.xpath(res)).isDisplayed()) {
			test_steps.add("Verified Add Room Change In History Tab");
			reslogger.info("Verified Add Room Change In History Tab");
		} else {
			test_steps.add("Failed to verify Add Room Change In History Tab");
			reslogger.info("Failed to verify Add Room Change In History Tab");
		}
	}

	public void verifyCostChangeInHistoryTab(WebDriver driver, ArrayList<String> test_steps) {
		// Verify Room change message
		String res = "//span[contains(text(),'Changed room charge from ')]";
		reslogger.info("msg :: " + res);
		String message = driver.findElement(By.xpath(res)).getText();
		if (driver.findElement(By.xpath(res)).isDisplayed()) {
			test_steps.add("Verified Message: " + message);
			reslogger.info("Verified Message: " + message);
		} else {
			test_steps.add("Failed to verify message: " + message);
			reslogger.info("Failed to verify message: " + message);
		}
	}

	public void openReservation(WebDriver driver, ArrayList<String> test_steps) {
		// TODO Auto-generated method stub
		String res = "//a[contains(@data-bind,'text: GuestName')]";
		WebElement reservationVisible = driver.findElement(By.xpath(res));
		if (driver.findElement(By.xpath(res)).isDisplayed()) {
			reservationVisible.click();
			test_steps.add("Click on Reservation");
			reslogger.info("Click on Reservation");
		} else {
			test_steps.add("Failed to Click on Reservation");
			reslogger.info("Failed to Click on Reservation");
		}
	}

	public void verifyStayInfoNewRoom(WebDriver driver, ArrayList test_steps, String CheckInDate, String CheckOutDate,
			String Adults, String Children, String RoomClass, String RoomCharges) throws Exception {
		test_steps.add("******************* Stay info fields verification **********************");
		reslogger.info("******************* Stay info fields verification **********************");

		SimpleDateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");
		Date dateObj1 = format1.parse(CheckInDate);
		Date dateObj2 = format1.parse(CheckOutDate);
		long diff = dateObj2.getTime() - dateObj1.getTime();
		int Nights = (int) (diff / (24 * 60 * 60 * 1000));
		reslogger.info("difference between days: " + Nights);

		String[] checkIn = CheckInDate.split("/");
		if (checkIn[0].charAt(0) == '0') {
			checkIn[0] = checkIn[0].replace("" + checkIn[0].charAt(0), "");
		}
		String checkInMonth = Utility.get_Month(CheckInDate);
		String checkInDays = checkInMonth + " " + checkIn[0] + ", " + checkIn[2];

		String checkInDay = "//div[contains(text(),'Stay')]/..//div[@class='checkin']/span[text()='" + checkInDays
				+ "']";
		if (driver.findElement(By.xpath(checkInDay)).isDisplayed()) {
			test_steps.add("Reservation Stay Info checkin date verified : " + CheckInDate);
			reslogger.info("Reservation Stay Info checkin date verified : " + CheckInDate);
		} else {
			test_steps.add("Reservation Stay Info checkin date not found : " + CheckInDate);
			reslogger.info("Reservation Stay Info checkin date not found : " + CheckInDate);
		}

		Date now = new Date(checkIn[1] + "/" + checkIn[0] + "/" + checkIn[2]);
		SimpleDateFormat simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the
		// day
		// of
		// the
		// week
		// abbreviated
		simpleDateformat = new SimpleDateFormat("EEEE"); // the day of the week
		// spelled out
		// completely
		String dayofCheckIn = simpleDateformat.format(now);

		String chckInday = "//div[contains(text(),'Stay')]/..//div[@class='checkin']//span[text()='"
				+ dayofCheckIn.trim() + "']";
		if (driver.findElement(By.xpath(chckInday)).isDisplayed()) {
			test_steps.add("Reservation Stay Info checkin day verified : " + dayofCheckIn);
			reslogger.info("Reservation Stay Info checkin day verified : " + dayofCheckIn);
		} else {
			test_steps.add("Reservation Stay Info checkin day not found : " + dayofCheckIn);
			reslogger.info("Reservation Stay Info checkin day not found : " + dayofCheckIn);
		}

		String[] checkOut = CheckOutDate.split("/");

		if (checkOut[0].charAt(0) == '0') {
			checkOut[0] = checkOut[0].replace("" + checkOut[0].charAt(0), "");
		}
		String checkOutMonth = Utility.get_Month(CheckOutDate);
		String checkOutDays = checkInMonth + " " + checkOut[0] + ", " + checkOut[2];
		String checkoutDay = "//div[contains(text(),'Stay')]/..//div[@class='checkout']/span[text()='" + checkOutDays
				+ "']";
		if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
			test_steps.add("Reservation Stay Info checkout date verified : " + CheckOutDate);
			reslogger.info("Reservation Stay Info checkout date verified : " + CheckOutDate);
		} else {
			test_steps.add("Reservation Stay Info checkout date not found : " + CheckOutDate);
			reslogger.info("Reservation Stay Info checkout date not found : " + CheckOutDate);
		}

		now = new Date(checkOut[1] + "/" + checkOut[0] + "/" + checkOut[2]);
		simpleDateformat = new SimpleDateFormat("dd/MM/yyyy"); // the day of the
		// week
		// abbreviated
		simpleDateformat = new SimpleDateFormat("EEEE"); // the day of the week
		// spelled out
		// completely
		String dayofCheckOut = simpleDateformat.format(now);
		String chkOutDay = "//div[contains(text(),'Stay')]/..//div[@class='checkout']//span[text()='"
				+ dayofCheckOut.trim() + "']";
		if (driver.findElement(By.xpath(chkOutDay)).isDisplayed()) {
			test_steps.add("Reservation Stay Info checkout day verified : " + dayofCheckOut);
			reslogger.info("Reservation Stay Info checkout day verified : " + dayofCheckOut);
		} else {
			test_steps.add("Reservation Stay Info checkout day not found : " + dayofCheckOut);
			reslogger.info("Reservation Stay Info checkout day not found : " + dayofCheckOut);
		}

		String nights = "//div[contains(text(),'Stay')]/..//div[@class='noofnights']/span[text()='" + Nights + "N']";
		if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
			test_steps.add("Reservation Stay Info Nights verified : " + Nights + "N");
			reslogger.info("Reservation Stay Info Nights verified : " + Nights + "N");
		} else {
			test_steps.add("Reservation Stay Info Nights not found : " + Nights + "N");
			reslogger.info("Reservation Stay Info Nights not found : " + Nights + "N");
		}

		String adults = "//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'numberOfAdults')]";
		adults = driver.findElement(By.xpath(adults)).getText().trim();
		if (adults.equalsIgnoreCase(Adults.trim())) {
			test_steps.add("Reservation Stay Info Adults verified : " + Adults);
			reslogger.info("Reservation Stay Info Adults verified : " + Adults);
		} else {
			test_steps.add("Reservation Stay Info Adults not found : " + Adults);
			reslogger.info("Reservation Stay Info Adults not found : " + Adults);
		}

		String children = "//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'numberOfChildren')]";
		children = driver.findElement(By.xpath(children)).getText().trim();
		if (children.equalsIgnoreCase(Children.trim())) {
			test_steps.add("Reservation Stay Info Children verified : " + Children);
			reslogger.info("Reservation Stay Info Children verified : " + Children);
		} else {
			test_steps.add("Reservation Stay Info Children not found : " + Children);
			reslogger.info("Reservation Stay Info Children not found : " + Children);
		}

		reslogger.info("roomClass found : " + RoomClass);

		String roomClass = "//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'roomClassName')]";
		reslogger.info("roomClass found : " + roomClass);

		List<WebElement> roomClasses = driver.findElements(By.xpath(roomClass));
		int elements = roomClasses.size();
		String roomClassName = "";
		for (int i = 0; i < elements; i++) {
			roomClassName = driver.findElements(By.xpath(roomClass)).get(i).getText();
			reslogger.info("charges : " + roomClassName);
			if (roomClassName.contains(RoomClass)) {
				test_steps.add("Reservation Stay Info Room Class Name : " + RoomClass);
				reslogger.info("Reservation Stay Info Room Class Name : " + RoomClass);
			}
		}

		String roomCharge = "//span[contains(@data-bind,'showInnroadCurrency: { value: roomTotal , ShouldShowNegativeAsBracket: true }')]";
		reslogger.info("roomCharge found : " + roomCharge);

		List<WebElement> roomCharges = driver.findElements(By.xpath(roomCharge));
		int count = roomCharges.size();
		String charges = "";
		for (int i = 0; i < count; i++) {
			charges = driver.findElements(By.xpath(roomCharge)).get(i).getText();
			reslogger.info("charges : " + charges);
			if (charges.contains(RoomCharges)) {
				test_steps.add("Reservation Stay Info RoomCharges verified : " + RoomCharges);
				reslogger.info("Reservation Stay Info RoomCharges verified : " + RoomCharges);
			}
		}
	}

	public void VerifyChangeOfPolicyMessageForRoomChange(WebDriver driver, String RoomNewClass, String IsAssign,
			String Account, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		WebDriverWait wait = new WebDriverWait(driver, 25);

		try {
			Wait.wait2Second();
			int count = res.CP_Reservation_StayInfo_ThreeDotts.size();
			Utility.ScrollToElement(res.CP_Reservation_StayInfo_ThreeDotts.get(1), driver);

			res.CP_Reservation_StayInfo_ThreeDotts.get(0).click();
			test_steps.add("Click Edit Stay Info");
			reslogger.info("Click Edit Stay Info");

			// Click on change stay Info
			reslogger.info("Click on Change Stay Info");
			String changeStayInfo = "//ul//li[contains(text(),'Change Stay Details')]";
			By locator = By.xpath(changeStayInfo);
			List<WebElement> changeStayInfoEl = driver.findElements(By.xpath(changeStayInfo));
			changeStayInfoEl.get(1).click();
			test_steps.add("Click on Change Stay Info");

			// Select room
			selectRoom(driver, test_steps, RoomNewClass, IsAssign, Account);
			test_steps.add("Room Selected for new Room Class: " + RoomNewClass);
			test_steps.addAll(verifyPopupChangeInPolicy(driver, test_steps));

			// Click Save Button
			reslogger.info("Clicking Save Button");
			Wait.explicit_wait_visibilityof_webelement(res.CP_SaveRoomNo, driver);
			Utility.ScrollToElement(res.CP_SaveRoomNo, driver);
			res.CP_SaveRoomNo.click();
			test_steps.add("Click on Save Room Number Button");

		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

	public void enter_BillingAddress(WebDriver driver, ArrayList test_steps, String Salutation, String GuestFirstName,
			String GuestLastName, String Address1, String Address2, String Address3, String City, String Country,
			String State, String PostalCode, String IsBillingSameAsMailingAddress) throws InterruptedException {
		uncheck_BillingAddresSameAsMailingAddress(driver, test_steps, IsBillingSameAsMailingAddress);

		enter_BillingContactName(driver, test_steps, Salutation, GuestFirstName, GuestLastName);
		enter_BillingContactAddress(driver, test_steps, Address1, Address2, Address3);
		enter_BillingCity(driver, test_steps, City);
		select_BillingCountry(driver, test_steps, Country);
		select_BillingState(driver, test_steps, State);
		enter_BillingPostalCode(driver, test_steps, PostalCode);
	}

	public void enter_BillingContactAddress(WebDriver driver, ArrayList test_steps, String Address1, String Address2,
			String Address3) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_BillingAddress1);
		res.CP_NewReservation_BillingAddress1.clear();
		res.CP_NewReservation_BillingAddress1.sendKeys(Address1);
		test_steps.add("Enter Address1 : " + Address1);
		reslogger.info("Enter Address1 : " + Address1);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_BillingAddress2);
		res.CP_NewReservation_BillingAddress2.clear();
		res.CP_NewReservation_BillingAddress2.sendKeys(Address2);
		test_steps.add("Enter Address2 : " + Address2);
		reslogger.info("Enter Address2 : " + Address2);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_BillingAddress3);
		res.CP_NewReservation_BillingAddress3.clear();
		res.CP_NewReservation_BillingAddress3.sendKeys(Address3);
		test_steps.add("Enter Address3 : " + Address3);
		reslogger.info("Enter Address3 : " + Address3);
	}

	public void enter_BillingCity(WebDriver driver, ArrayList test_steps, String City) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_BillingCity);
		res.CP_NewReservation_BillingCity.clear();
		res.CP_NewReservation_BillingCity.sendKeys(City);
		test_steps.add("Enter City : " + City);
		reslogger.info("Enter City : " + City);
	}

	public void select_BillingCountry(WebDriver driver, ArrayList test_steps, String Country) {
		String button = "(//select[@name='country']/following-sibling::div/button)[2]";
		Wait.WaitForElement(driver, button);
		driver.findElement(By.xpath(button)).click();

		String cntry = "(//select[@name='country']/following-sibling::div//ul/li//span[contains(text(),'"
				+ Country.trim() + "')])[2]";
		Wait.WaitForElement(driver, cntry);
		driver.findElement(By.xpath(cntry)).click();
		test_steps.add("Selected Country : " + Country);
		reslogger.info("Selected Country : " + Country);
	}

	public void select_BillingState(WebDriver driver, ArrayList test_steps, String State) {
		String button = "(//select[@name='state']/following-sibling::div)[2]";
		Wait.WaitForElement(driver, button);

		if (driver.findElements(By.xpath("(//select[@name='state'])[2]/option")).size() > 1) {
			button = "(//select[@name='state']/following-sibling::div/button)[2]";
			driver.findElement(By.xpath(button)).click();
			String cntry = "(//select[@name='state'])[2]/following-sibling::div//following-sibling::div//ul/li//a//span[contains(text(),'"
					+ State.trim() + "')]";
			Wait.WaitForElement(driver, cntry);
			driver.findElement(By.xpath(cntry)).click();
			test_steps.add("Selected State : " + State);
			reslogger.info("Selected State : " + State);
		} else {
			test_steps.add("State field disabled");
			reslogger.info("State field disabled");
		}
	}

	public void enter_BillingPostalCode(WebDriver driver, ArrayList test_steps, String PostalCode) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_BillingPostalCode);
		res.CP_NewReservation_BillingPostalCode.clear();
		res.CP_NewReservation_BillingPostalCode.sendKeys(PostalCode);
		test_steps.add("Enter PostalCode : " + PostalCode);
		reslogger.info("Enter PostalCode : " + PostalCode);
	}

	public ArrayList<String> VerifyPaymentMethod(WebDriver driver, ArrayList<String> test_steps, String PaymentMethod,
			String CardNumber, String CardHolder, String ExpiryDate) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_PaymentMethod_Section);
		Utility.ScrollToElement(res.CP_Reservation_PaymentMethod_Section, driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_PaymentMethod);
		reslogger.info("Expected Payment Method : " + PaymentMethod);
		test_steps.add("Expected Payment Method : " + PaymentMethod);
		String paymentMethod = res.CP_Reservation_PaymentMethod.getText();
		reslogger.info("Found : " + paymentMethod);
		test_steps.add("Found : " + paymentMethod);

		assertEquals(PaymentMethod, paymentMethod, "Failed: payment Method doesn't match");
		reslogger.info("Verified payment method");
		test_steps.add("Verified payment method");

		Wait.WaitForElement(driver, OR_Reservation.CP_RESERVATION_CC_Number);
		String input = CardNumber; // input string
		String lastFourDigits = ""; // substring containing last 4 characters

		if (input.length() > 4) {
			lastFourDigits = input.substring(input.length() - 4);
		} else {
			lastFourDigits = input;
		}

		reslogger.info(lastFourDigits);
		CardNumber = lastFourDigits;
		reslogger.info("Expected Credit Card Number : XXXX" + CardNumber);
		test_steps.add("Expected Credit Card Number : XXXX" + CardNumber);
		String cardNumber = res.CP_RESERVATION_CC_Number.getText();
		reslogger.info("Found : XXXX" + cardNumber);
		test_steps.add("Found : XXXX" + cardNumber);

		assertEquals(CardNumber, cardNumber, "Failed: payment Method doesn't match");
		test_steps.add("Verified credit card number");

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CardHolder_Name);
		reslogger.info("Expected Name on Card : " + CardHolder);
		test_steps.add("Expected Name on Card : " + CardHolder);
		String cardHolder = res.CP_Reservation_CardHolder_Name.getText();
		reslogger.info("Found : " + cardHolder);
		test_steps.add("Found : " + cardHolder);

		assertEquals(CardHolder, cardHolder, "Failed: Card Holder doesn't match");
		test_steps.add("Verified name on card");

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Card_ExpiryDate);
		reslogger.info("Expected Card ExpiryDate : " + ExpiryDate);
		test_steps.add("Expected Card ExpiryDate : " + ExpiryDate);
		String expiryDate = res.CP_Reservation_Card_ExpiryDate.getText();
		reslogger.info("Found : " + expiryDate);
		test_steps.add("Found : " + expiryDate);

		assertEquals(ExpiryDate, expiryDate, "Failed: Card expiryDate doesn't match");
		test_steps.add("Verified card expiry date");

		return test_steps;
	}

	public void enter_BillingContactName(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_BillingSalutation);
		res.CP_NewReservation_BillingSalutation.click();
		String sal = "(//a//span[contains(text(),'" + Salutation + "')])[5]";
		Wait.WaitForElement(driver, sal);
		driver.findElement(By.xpath(sal)).click();

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_BillingFirstName);
		res.CP_NewReservation_BillingFirstName.sendKeys(GuestFirstName);
		test_steps.add("Contact First Name : " + GuestFirstName);
		reslogger.info("Contact First Name : " + GuestFirstName);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_BillingLastName);
		res.CP_NewReservation_BillingLastName.sendKeys(GuestLastName);
		test_steps.add("Contact Last Name : " + GuestLastName);
		reslogger.info("Contact Last Name : " + GuestLastName);
	}

	public void uncheck_BillingAddresSameAsMailingAddress(WebDriver driver, ArrayList test_steps,
			String IsBillingAddressSame) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_SameAsMailingAddressCheckBox);
		Utility.ScrollToElement(res.CP_NewReservation_SameAsMailingAddressCheckBox, driver);
		if (IsBillingAddressSame.contentEquals("Yes")) {
			if (!res.CP_NewReservation_SameAsMailingAddressCheckBox.isSelected()) {
				driver.findElement(By.xpath(
						"//label//following-sibling::input[@data-bind='checked: PaymentDetail().useMailingInfo']//.."))
						.click();
				test_steps.add("Billing Address Same as mailing selected");
				reslogger.info("Billing Address Same as mailing selected");
			} else {
				test_steps.add("Billing Address Same as mailing selected");
				reslogger.info("Billing Address Same as mailing selected");
			}
		} else {
			if (res.CP_NewReservation_SameAsMailingAddressCheckBox.isSelected()) {
				driver.findElement(By.xpath(
						"//label//following-sibling::input[@data-bind='checked: PaymentDetail().useMailingInfo']//.."))
						.click();
				test_steps.add("Billing Address Same as mailing unselected");
				reslogger.info("Billing Address Same as mailing unselected");
			} else {
				test_steps.add("Billing Address Same as mailing unselected");
				reslogger.info("Billing Address Same as mailing unselected");
			}
		}
	}

	public ArrayList<String> clickCopyButton(WebDriver driver, String GuestFirstName) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		Wait.WaitForElement(driver, OR_Reservation.COPY_BUTTON);
		Utility.ScrollToElement(cpelements.COPY_BUTTON, driver);
		cpelements.COPY_BUTTON.click();
		reslogger.info("Copy Button Clicked");
		test_steps.add("Copy Button Clicked");
		Wait.wait10Second();
		Wait.explicit_wait_visibilityof_webelement(cpelements.COPY_RESERVATION_TRIMNAME, driver);
		Wait.WaitForElement(driver, OR_Reservation.COPY_RESERVATION_TRIMNAME);
		GuestFirstName = GuestFirstName.substring(0, 3);
		String copiedReservationTrimmedName = "copy " + GuestFirstName + "...";
		// assertEquals(cpelements.COPY_RESERVATION_TRIMNAME.getText().equals(copiedReservationTrimmedName),
		// true);
		reslogger.info("Verified Trimmed Copy Text In Copied Tab: " + copiedReservationTrimmedName);
		test_steps.add("Verified Trimmed Copy Text In Copied Tab: " + copiedReservationTrimmedName);
		return test_steps;

	}

	public ArrayList<String> verifyContactInfo(WebDriver driver, String IsGuesProfile, String GuestProfileName,
			String Salutation, String GuestFistName, String GuestLastName, String FirstName, String LastName,
			String Email, String Phone, String AlternativePhone) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		if (IsGuesProfile.equals("Yes")) {
			assertEquals(GuestProfileName, cpelements.COPY_CP_GuestInfo_GuestProfile.getAttribute("value"));
			reslogger.info("Contact Info GuestProfileName: " + GuestProfileName + " :Verified");
			test_steps.add("Contact Info GuestProfileName: " + GuestProfileName + " :Verified");

			assertEquals(GuestFistName, cpelements.COPY_CP_GuestInfo_FirstName.getAttribute("value"));
			reslogger.info("Guest Info FirstName: " + GuestFistName + " :Verified");
			test_steps.add("Guest Info FistName: " + GuestFistName + " :Verified");

			assertEquals(GuestLastName, cpelements.COPY_CP_GuestInfo_LastName.getAttribute("value"));
			reslogger.info("Guest Info LastName: " + GuestFistName + " :Verified");
			test_steps.add("Guest Info LastName: " + GuestFistName + " :Verified");
		} else {
			assertEquals("", cpelements.COPY_CP_GuestInfo_GuestProfile.getAttribute("value"));
			reslogger.info("Contact Info GuestProfileName: " + "Empty" + " :Verified");
			test_steps.add("Contact Info GuestProfileName: " + "Empty" + " :Verified");

			/*
			 * assertEquals("",
			 * cpelements.COPY_CP_GuestInfo_FirstName.getAttribute("value"));
			 * reslogger.info("Guest Info FirstName: " + "Empty" + " :Verified");
			 * test_steps.add("Guest Info FistName: " + "Empty" + " :Verified");
			 * 
			 * assertEquals("",
			 * cpelements.COPY_CP_GuestInfo_LastName.getAttribute("value"));
			 * reslogger.info("Guest Info LastName: " + "Empty" + " :Verified");
			 * test_steps.add("Guest Info LastName: " + "Empty" + " :Verified");
			 */
		}

		try {
			assertEquals(Salutation, cpelements.COPY_CP_GuestInfo_Guest_Salutation.getText());
		} catch (Exception e) {
			String salutation = driver
					.findElement(
							By.xpath("(//button[@type='button']//span[contains(@data-bind,'text: salutation')])[2]"))
					.getText();
			assertEquals(Salutation, salutation);
		}
		reslogger.info("Guest Info Salutation: " + "Empty" + " :Verified");
		test_steps.add("Guest Info Salutation: " + "Empty" + " :Verified");

		try {
			assertEquals(Salutation, cpelements.COPY_CP_ContactInfo_Salutation.getText());
		} catch (Exception e) {
			String salutation = driver.findElement(By.xpath(
					"(//div[contains(@data-bind,'validationOptions: guestValidationRules')]//span[contains(@data-bind,'text: $parent.mailingAddress.contact.salutation')])[2]"))
					.getText();
			assertEquals(Salutation, salutation);
		}
		reslogger.info("Contact Info Saluation: " + Salutation + " :Verified");
		test_steps.add("Contact Info Saluation: " + Salutation + " :Verified");

		try {
			assertEquals(FirstName, cpelements.COPY_CP_ContactInfo_FirstName.getAttribute("value"));
		} catch (Exception e) {
			String firstName = driver.findElement(By.xpath(
					"(//div[contains(@data-bind,'validationOptions: guestValidationRules')]//input[contains(@data-bind,'value: $parent.mailingAddress.contact.firstName')])[2]"))
					.getAttribute("value");
			assertEquals(FirstName, firstName);
		}
		reslogger.info("Contact Info FirstName: " + FirstName + " :Verified");
		test_steps.add("Contact Info FirstName: " + FirstName + " :Verified");

		try {
			assertEquals(LastName, cpelements.COPY_CP_ContactInfo_LastName.getAttribute("value"));
		} catch (Exception e) {
			String lastName = driver.findElement(By.xpath(
					"(//div[contains(@data-bind,'validationOptions: guestValidationRules')]//input[contains(@data-bind,'value: $parent.mailingAddress.contact.lastName')])[2]"))
					.getAttribute("value");
			assertEquals(LastName, lastName);
		}
		reslogger.info("Contact Info LastName: " + LastName + " :Verified");
		test_steps.add("Contact Info LastName: " + LastName + " :Verified");

		try {
			assertEquals(Email, cpelements.COPY_CP_ContactInfo_Email.getAttribute("value"));
		} catch (Exception e) {
			String email = driver.findElement(By.xpath(
					"(//div[contains(@data-bind,'validationOptions: guestValidationRules')]//input[contains(@data-bind,'textInput: $parent.mailingAddress.email')])[2]"))
					.getAttribute("value");
			assertEquals(Email, email);
		}
		reslogger.info("Contact Info Email: " + Email + " :Verified");
		test_steps.add("Contact Info Email: " + Email + " :Verified");

		try {
			assertEquals(Phone, cpelements.COPY_CP_ContactInfo_Phone.getAttribute("value").replaceAll("-", "")
					.replaceAll(" ", "").replaceAll("\\)", "").replaceAll("\\(", ""));
		} catch (Exception e) {
			String phone = driver.findElement(By.xpath(
					"(//div[contains(@data-bind,'validationOptions: guestValidationRules')]//input[contains(@data-bind,'value:$parent.mailingAddress.phone.number')])[2]"))
					.getAttribute("value").replaceAll("-", "").replaceAll(" ", "").replaceAll("\\)", "")
					.replaceAll("\\(", "");
			assertEquals(Phone, phone);

		}
		reslogger.info("Contact Info PhoneNumber: " + Phone + " :Verified");
		test_steps.add("Contact Info PhoneNumber: " + Phone + " :Verified");

		try {
			assertEquals(AlternativePhone, cpelements.COPY_CP_ContactInfo_AlternativePhone.getAttribute("value")
					.replaceAll("-", "").replaceAll(" ", "").replaceAll("\\)", "").replaceAll("\\(", ""));
		} catch (Exception e) {
			String phone = driver.findElement(By.xpath(
					"(//div[contains(@data-bind,'validationOptions: guestValidationRules')]//input[contains(@data-bind,'value: $parent.mailingAddress.alternativePhone.number')])[2]"))
					.getAttribute("value").replaceAll("-", "").replaceAll(" ", "").replaceAll("\\)", "")
					.replaceAll("\\(", "");
			assertEquals(AlternativePhone, phone);
		}
		reslogger.info("Contact Info AlternativePhon: " + AlternativePhone + " :Verified");
		test_steps.add("Contact Info AlternativePhon: " + AlternativePhone + " :Verified");

		return test_steps;

	}

	public ArrayList<String> verifyMailingInfo(WebDriver driver, String Address1, String Address2, String Address3,
			String City, String Country, String State, String PostalCode) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		assertEquals(Address1, cpelements.COPY_CP_MailingInfo_Address1.getAttribute("value"));
		reslogger.info("Mailing Info Address1: " + Address1 + " :Verified");
		test_steps.add("Mailing Info Address1: " + Address1 + " :Verified");
		assertEquals(Address2, cpelements.COPY_CP_MailingInfo_Address2.getAttribute("value"));
		reslogger.info("Mailing Info Address2: " + Address2 + " :Verified");
		test_steps.add("Mailing Info Address2: " + Address2 + " :Verified");
		assertEquals(Address3, cpelements.COPY_CP_MailingInfo_Address3.getAttribute("value"));
		reslogger.info("Mailing Info Address3: " + Address3 + " :Verified");
		test_steps.add("Mailing Info Address3: " + Address3 + " :Verified");
		assertEquals(City, cpelements.COPY_CP_MailingInfo_City.getAttribute("value"));
		reslogger.info("Mailing Info City: " + City + " :Verified");
		test_steps.add("Mailing Info City: " + City + " :Verified");
		try {
			assertEquals(Country, cpelements.COPY_CP_MailingInfo_Country.getText());
		} catch (AssertionError e) {
			String country = driver
					.findElement(By.xpath("(//select[@name='country'])[4]/following-sibling::div//button//span[1]"))
					.getText();
			assertEquals(Country, country);
		}
		reslogger.info("Mailing Info Country: " + Country + " :Verified");
		test_steps.add("Mailing Info Country: " + Country + " :Verified");
		try {
			assertEquals(State, cpelements.COPY_CP_MailingInfo_State.getText());
		} catch (AssertionError e) {
			String state = driver
					.findElement(By.xpath("(//select[@name='state'])[4]/following-sibling::div//button//span[1]"))
					.getText();
			assertEquals(State, state);
		}
		reslogger.info("Mailing Info State: " + State + " :Verified");
		test_steps.add("Mailing Info State: " + State + " :Verified");
		try {
			assertEquals(PostalCode, cpelements.COPY_CP_MailingInfo_Code.getAttribute("value"));
		} catch (AssertionError e) {
			String postalCode = driver.findElement(By.xpath(
					"(//div[contains(@data-bind,'validationOptions: guestValidationRules')]//input[contains(@data-bind,'value: postalCode')])[6]"))
					.getAttribute("value");
			assertEquals(PostalCode, postalCode);
		}
		reslogger.info("Mailing Info PostalCode: " + PostalCode + " :Verified");
		test_steps.add("Mailing Info PostalCode: " + PostalCode + " :Verified");

		return test_steps;

	}

	public ArrayList<String> verifyBillingInfo(WebDriver driver, String PaymentMethod, String CardNumber,
			String NameOnCard, String ExpDate) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		try {
			assertEquals(PaymentMethod, cpelements.COPY_CP_BillingInfo_PaymentMethod.getText());
		} catch (Exception e) {
			String paymentMethod = driver.findElement(By.xpath(
					"((//select[contains(@data-bind,'selectPicker: methodId')])[2]/following-sibling::div)//i[@class='glyphicon ir-mastercard-icon']/parent::span[1]"))
					.getText();
			assertEquals(PaymentMethod, paymentMethod);
		}
		reslogger.info("Billing Info PaymentMethod: " + PaymentMethod + " :Verified");
		test_steps.add("Billing Info PaymentMethod: " + PaymentMethod + " :Verified");

		try {
			assertEquals(CardNumber, cpelements.COPY_CP_BillingInfo_CreditCardNumber.getAttribute("value"));
		} catch (Exception e) {
			String cardNum = driver
					.findElement(By.xpath("(//input[contains(@data-bind,'value: creditCardNumber')])[2]"))
					.getAttribute("value");
			assertEquals(CardNumber, cardNum);
		}
		reslogger.info("Billing Info CardNumber: " + CardNumber + " :Verified");
		test_steps.add("Billing Info CardNumber: " + CardNumber + " :Verified");

		try {
			assertEquals(NameOnCard, cpelements.COPY_CP_BillingInfo_NameOnCard.getAttribute("value"));
		} catch (Exception e) {
			String nameOnCard = driver.findElement(By.xpath(
					"(//div[contains(@data-bind,'validationOptions: guestValidationRules')]//input[contains(@data-bind,'value:nameOnCreditCard')])[2]"))
					.getAttribute("value");
			assertEquals(NameOnCard, nameOnCard);
		}
		reslogger.info("Billing Info NameOnCard: " + NameOnCard + " :Verified");
		test_steps.add("Billing Info NameOnCard: " + NameOnCard + " :Verified");

		try {
			assertEquals(ExpDate, cpelements.COPY_CP_BillingInfo_ExpDate.getAttribute("value"));
		} catch (Exception e) {
			String expDate = driver.findElement(By.xpath(
					"(//div[contains(@data-bind,'validationOptions: guestValidationRules')]//input[contains(@data-bind,'value:creditCardExpDate')])[4]"))
					.getAttribute("value");
			assertEquals(ExpDate, expDate);
		}
		reslogger.info("Billing Info ExpDate: " + ExpDate + " :Verified");
		test_steps.add("Billing Info ExpDate: " + ExpDate + " :Verified");

		return test_steps;

	}

	public ArrayList<String> verifyRoomClassDetails(WebDriver driver, String RoomClassName, String RoomNumber)
			throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		assertEquals(RoomClassName.replace(" ", ""),
				cpelements.COPY_CP_RoomClassName.getText().split(":")[0].replace(" ", ""));
		reslogger.info("Room Class Name: " + RoomClassName + " :Verified");
		test_steps.add("Room Class Name: " + RoomClassName + " :Verified");

		assertEquals(!RoomNumber.equals(cpelements.COPY_CP_RoomClassName.getText().split(":")[1]), true);
		reslogger.info("Room Number changed from : " + RoomNumber + " to "
				+ cpelements.COPY_CP_RoomClassName.getText().split(":")[1] + ": Verified");
		test_steps.add("Room Number changed from : " + RoomNumber + " to "
				+ cpelements.COPY_CP_RoomClassName.getText().split(":")[1] + ": Verified");
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: verifyMarketingInfo ' Description: Verifies the Information is
	 * same as Copied From Reservation/ Can User After Copy Reservation. ' Input
	 * parameters: (driver,String, String ) ' Return value: String<> ' Created By:
	 * Aqsa ' Created On: <06/22/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> verifyMarketingInfo(WebDriver driver, String Market, String Referral)
			throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		String marketValue = "(//label[text()='Market']/preceding-sibling::div/button)[3]//span[text()='" + Market
				+ "']";
		String referralValue = "(//label[text()='Referral']/preceding-sibling::div/button)[4]//span[text()='" + Referral
				+ "']";
		try {
			WebElement MarketEle = driver.findElement(By.xpath(marketValue));
			WebElement ReferraltEle = driver.findElement(By.xpath(referralValue));
			assertEquals(Market, MarketEle.getText());
			assertEquals(Referral, ReferraltEle.getText());
		} catch (Exception e) {
			marketValue = "(//label[text()='Market']/preceding-sibling::div/button)[2]//span[text()='" + Market + "']";
			referralValue = "(//label[text()='Referral']/preceding-sibling::div/button)[3]//span[text()='" + Referral
					+ "']";

			WebElement MarketEle = driver.findElement(By.xpath(marketValue));
			WebElement ReferraltEle = driver.findElement(By.xpath(referralValue));
			assertEquals(Market, MarketEle.getText());
			assertEquals(Referral, ReferraltEle.getText());
		}

		reslogger.info("Marketing Info Market: " + Market + " :Verified");
		test_steps.add("Marketing Info Market: " + Market + " :Verified");
		reslogger.info("Marketing Info Referral: " + Referral + " :Verified");
		test_steps.add("Marketing Info Referral: " + Referral + " :Verified");
		return test_steps;
	}

	public ArrayList<String> verifyNotes(WebDriver driver, String Type, String Subject, String Description)
			throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		Elements_Reservation ReservationPage = new Elements_Reservation(driver);
		WebElement NotesType = null;
		WebElement NotesSubject = null;
		WebElement NotesDesctiption = null;
		try {
			NotesType = driver
					.findElement(By.xpath("(//div[text()='Notes']/parent::div//td[text()='" + Type + "'])[2]"));
			Utility.ScrollToElement(NotesType, driver);
			assertEquals(NotesType.getText(), Type, "Failed : NotesType missmatched");
			reslogger.info("Verified Notes Type :" + Type);
			test_steps.add("Verified Notes Type :" + Type);

			NotesSubject = driver.findElement(
					By.xpath("(//td[contains(@data-bind,'text: subject') and contains(text(),'" + Subject + "')])[2]"));
			assertEquals(NotesSubject.getText(), Subject, "Failed : Detail missmatched");
			reslogger.info("Verified Notes Subject :" + Subject);

			test_steps.add("Verified Notes Subject :" + Subject);

			NotesDesctiption = driver.findElement(
					By.xpath("(//td[contains(@data-bind,'text: de') and contains(text(),'" + Description + "')])[2]"));
			assertEquals(NotesDesctiption.getText(), Description, "Failed : Status missmatched");
			reslogger.info("Verified Notes Description :" + Description);
			test_steps.add("Verified Notes Description :" + Description);
		} catch (Exception e) {
			NotesType = driver
					.findElement(By.xpath("(//div[text()='Notes']/parent::div//td[text()='" + Type + "'])[1]"));
			Utility.ScrollToElement(NotesType, driver);
			assertEquals(NotesType.getText(), Type, "Failed : NotesType missmatched");
			reslogger.info("Verified Notes Type :" + Type);
			test_steps.add("Verified Notes Type :" + Type);

			NotesSubject = driver.findElement(
					By.xpath("(//td[contains(@data-bind,'text: subject') and contains(text(),'" + Subject + "')])[1]"));
			assertEquals(NotesSubject.getText(), Subject, "Failed : Detail missmatched");
			reslogger.info("Verified Notes Subject :" + Subject);

			test_steps.add("Verified Notes Subject :" + Subject);

			NotesDesctiption = driver.findElement(
					By.xpath("(//td[contains(@data-bind,'text: de') and contains(text(),'" + Description + "')])[1]"));
			assertEquals(NotesDesctiption.getText(), Description, "Failed : Status missmatched");
			reslogger.info("Verified Notes Description :" + Description);
			test_steps.add("Verified Notes Description :" + Description);

		}

		return test_steps;
	}

	public ArrayList<String> verifyIncidentals(WebDriver driver, String Category, String PerUnit, String Quantity)
			throws InterruptedException, ParseException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		Elements_Reservation ReservationPage = new Elements_Reservation(driver);
		String incidentalCategory = getIncidentalCategory(driver, 3);
		assertEquals(incidentalCategory, Category, "Failed : Category mismatched");
		reslogger.info("Verified Incidental Category :" + incidentalCategory);
		test_steps.add("Verified Incidental Category :" + incidentalCategory);

		String incidentalDescription = getIncidentalDescritption(driver, 3);
		assertEquals(incidentalDescription, Category, "Failed : Description mismatched");
		reslogger.info("Verified Incidental Description :" + incidentalDescription);
		test_steps.add("Verified Incidental Description :" + incidentalDescription);

		String incidentalPerUnit = getIncidentalPerUnit(driver, 3);
		incidentalPerUnit = incidentalPerUnit.split("\\.")[0];
		incidentalPerUnit = incidentalPerUnit.replace("$", "").replace(" ", "");
		assertEquals(incidentalPerUnit, PerUnit, "Failed : PerUnit mismatched");
		reslogger.info("Verified Incidental PerUnit :" + PerUnit);
		test_steps.add("Verified Incidental PerUnit :" + PerUnit);

		String incidentalAmount = getIncidentalTotalAmount(driver, 3);
		incidentalAmount = incidentalAmount.split("\\.")[0];
		incidentalAmount = incidentalAmount.replace("$", "").replace(" ", "");

		// assertEquals(incidentalAmount, (Integer.parseInt(Quantity) *
		// Integer.parseInt(PerUnit)),
		// "Failed : PerUnit mismatched");
		reslogger.info("Verified Incidental Amount :" + incidentalAmount);
		test_steps.add("Verified Incidental Amount :" + incidentalAmount);

		return test_steps;
	}

	public ArrayList<String> verifyCopyButtonState(WebDriver driver, String ReservationStatus)
			throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		if (ReservationStatus.equals("Confirmed") || ReservationStatus.equals("Guaranteed")
				|| ReservationStatus.equals("On Hold") || ReservationStatus.equals("Reserved")) {
			Wait.WaitForElement(driver, OR_Reservation.COPY_BUTTON);
			assertEquals(cpelements.COPY_BUTTON.isDisplayed(), true, "Failed: Copy Button is not displayed");
			reslogger.info("Copy Button is Displayed In CP Reservation Page");
			test_steps.add("Copy Button is Displayed In CP Reservation Page");

		} else {
			assertEquals(cpelements.COPY_BUTTON.isDisplayed(), false, "Failed: Copy Button is displayed");
			reslogger.info(
					"Copy Button is not Displayed In CP Reservation Page Due to: " + ReservationStatus + " Status");
			test_steps.add(
					"Copy Button is not Displayed In CP Reservation Page Due to: " + ReservationStatus + " Status");
		}
		return test_steps;
	}

	public ArrayList<String> enter_GuestName(WebDriver driver, ArrayList<String> test_steps, String GuestFirstName,
			String GuestLastName) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String CP_NewReservation_GuestFirstName = "(//label[text()='Guest ']/preceding-sibling::input)[2]";
		try {
			Wait.WaitForElement(driver, CP_NewReservation_GuestFirstName);
		} catch (Exception e) {
			CP_NewReservation_GuestFirstName = "(//label[text()='Guest ']/preceding-sibling::input)[3]";
		}

		WebElement CP_NewReservation_GuestFirstNameEle = driver.findElement(By.xpath(CP_NewReservation_GuestFirstName));
		Utility.ScrollToElement(CP_NewReservation_GuestFirstNameEle, driver);
		CP_NewReservation_GuestFirstNameEle.sendKeys(GuestFirstName);
		test_steps.add("Guest First Name : " + GuestFirstName);
		reslogger.info("Guest First Name : " + GuestFirstName);
		String CP_NewReservation_GuestLastName = "(//label[text()='Guest ']/../../../../following-sibling::div//input)[2]";
		try {
			Wait.WaitForElement(driver, CP_NewReservation_GuestLastName);
		} catch (Exception e) {
			CP_NewReservation_GuestLastName = "(//label[text()='Guest ']/../../../../following-sibling::div//input)[3]";
		}

		WebElement CP_NewReservation_GuestLasttNameEle = driver.findElement(By.xpath(CP_NewReservation_GuestLastName));
		CP_NewReservation_GuestLasttNameEle.sendKeys(GuestLastName);
		test_steps.add("Guest Last Name : " + GuestLastName);
		reslogger.info("Guest Last Name : " + GuestLastName);

		return test_steps;

	}

	public void verifyTaskNotCopied(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.COPY_CP_NewReservation_TaskNotCopy);
		Utility.ScrollToElement(res.COPY_CP_NewReservation_TaskNotCopy, driver);
		if (driver.findElements(By.xpath(OR_Reservation.COPY_CP_NewReservation_TaskNotCopy)).size() > 1) {
			assertEquals(res.COPY_CP_NewReservation_TaskNotCopy1.getText(),
					"There are no Tasks created on this reservation", "Failed: Task Copied");
			test_steps.add("Task not Copied : " + res.COPY_CP_NewReservation_TaskNotCopy1.getText() + " Verified");
			reslogger.info("Task not Copied : " + res.COPY_CP_NewReservation_TaskNotCopy1.getText() + "Verified");
		} else {
			assertEquals(res.COPY_CP_NewReservation_TaskNotCopy.getText(),
					"There are no Tasks created on this reservation", "Failed: Task Copied");
			test_steps.add("Task not Copied : " + res.COPY_CP_NewReservation_TaskNotCopy.getText() + " Verified");
			reslogger.info("Task not Copied : " + res.COPY_CP_NewReservation_TaskNotCopy.getText() + "Verified");
		}

	}

	public void verifyCopyAddedLineItem(WebDriver driver, ArrayList<String> test_steps, String LineItemCategory,
			String LineItemCategoryAmount) {
		test_steps.add("******************* Verifying Added Line Item to folio**********************");
		reslogger.info("******************* Verifying Added Line Item to folio**********************");

		String includeTax = "//span[text()='Include Taxes in Line Items']/preceding-sibling::input";
		String copyReservationIncludeTax = "(//span[text()='Include Taxes in Line Items']/preceding-sibling::input)[2]";
		try {
			Wait.WaitForElement(driver, includeTax);
			if (driver.findElement(By.xpath(includeTax)).isSelected()) {
				driver.findElement(By.xpath(includeTax)).click();
			}
		} catch (Exception e) {
			Wait.WaitForElement(driver, copyReservationIncludeTax);
			if (driver.findElement(By.xpath(copyReservationIncludeTax)).isSelected()) {
				driver.findElement(By.xpath(copyReservationIncludeTax)).click();
			}
		}

		String line = "//td[@class='lineitem-category']/span";

		int count = driver.findElements(By.xpath(line)).size();
		String text = null;

		line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])[2]";
		Wait.WaitForElement(driver, line);
		WebElement linItemCategoryElement = driver.findElement(By.xpath(line));
		assertEquals(linItemCategoryElement.getText(), LineItemCategory);
		test_steps.add("Line item category verified in folio : " + LineItemCategory);
		reslogger.info("Line item category verified in folio : " + LineItemCategory);

		line = "((//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../following-sibling::td[contains(@class,'amount')]/span[contains(text(),'"
				+ LineItemCategoryAmount + "')])[2]";
		Wait.WaitForElement(driver, line);
		WebElement linItemAmountElement = driver.findElement(By.xpath(line));
		assertEquals(linItemAmountElement.getText().split("\\.")[0].replace("$", "").replaceAll(" ", ""),
				LineItemCategoryAmount);
		test_steps.add("Line item category amount verified in folio : " + LineItemCategoryAmount);
		reslogger.info("Line item category amount verified in folio : " + LineItemCategoryAmount);
	}

	public ArrayList<String> verifyGuestNameAfterReservation(WebDriver driver, String guestName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.explicit_wait_visibilityof_webelement_120(res.HeaderGuestName_AfterReservation, driver);
		Wait.explicit_wait_visibilityof_webelement(res.HeaderGuestName_AfterReservation, driver);
		String foundName = res.HeaderGuestName_AfterReservation.getText();

		assertEquals(foundName.trim(), guestName, "Failed to verify AccounGuestt No");

		test_steps.add("Successfully Verified Guest Name : " + guestName);
		reslogger.info("Successfully Verified Guest Name : " + guestName);

		return test_steps;

	}

	public ArrayList<String> verifyConfirmationNoAfterReservation(WebDriver driver, String confirmationNo) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.explicit_wait_visibilityof_webelement_120(res.HeaderConfirmationNo, driver);
		String foundNO = res.HeaderConfirmationNo.getText();

		assertEquals(foundNO.trim(), confirmationNo, "Failed to verify ConfirmationNo");

		test_steps.add("Successfully Verified ConfirmationNo : " + confirmationNo);

		reslogger.info("Successfully Verified ConfirmationNo : " + confirmationNo);

		return test_steps;

	}

	public ArrayList<String> verifyStatusAfterReservation(WebDriver driver, String status) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		try {
			Wait.explicit_wait_visibilityof_webelement_600(res.HeaderStatus_AfterReservation, driver);
		} catch (Exception e) {
			Wait.wait5Second();
		}
		String foundTxt = res.HeaderStatus_AfterReservation.getText();

		assertEquals(foundTxt.toUpperCase(), status.toUpperCase(), "Failed to verify Status");
		test_steps.add("Successfully Verified Status : " + status);
		reslogger.info("Successfully Verified Status : " + status);
		return test_steps;

	}

	public ArrayList<String> verifyStayDateAfterReservation(WebDriver driver, String arivalDate, String departDate) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.explicit_wait_visibilityof_webelement_120(res.HeaderStayDate, driver);
		String foundTxt = res.HeaderStayDate.getText();

		assertEquals(foundTxt, "(" + arivalDate + " - " + departDate + ")", "Failed to verify StayDate");
		test_steps.add("Successfully Verified StayDate : " + foundTxt);
		reslogger.info("Successfully Verified StayDate : " + foundTxt);

		return test_steps;

	}

	public ArrayList<String> selectSalutation(WebDriver driver, String salutation) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
		Wait.explicit_wait_visibilityof_webelement(res.CP_NewReservation_GuestSalutation, driver);
		Wait.explicit_wait_elementToBeClickable(res.CP_NewReservation_GuestSalutation, driver);
		Utility.ScrollToElement(res.CP_NewReservation_GuestSalutation, driver);
		res.CP_NewReservation_GuestSalutation.click();
		String sal = "//span[contains(text(),'" + salutation + "')]/../..";
		Wait.WaitForElement(driver, sal);

		driver.findElement(By.xpath(sal)).click();
		test_steps.add("Selected Salutation : " + salutation);
		reslogger.info("Selected Salutation : " + salutation);
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <VeriGuestProfileCheckox> ' Description: <Verify create guest
	 * profile checkbox is checked or not> ' Input parameters: <boolean value> '
	 * Return value: <array list> ' Created By: <Farhan Ghaffar> ' Created On:
	 * <04/17/2020>
	 * 
	 * ' Modified By | Description of Modification:
	 * ------------------------------------------ <mm/dd/yyyy>:<Developer name>:
	 * 1.Step modified 2.Step modified
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> verifyGuestProfileCheckoxChecked(WebDriver driver, boolean isChecked)
			throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> testStep = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckboxGuestProfile);
		Wait.explicit_wait_visibilityof_webelement(element.CheckboxGuestProfile, driver);
		Wait.explicit_wait_elementToBeClickable(element.CheckboxGuestProfile, driver);
		Utility.ScrollToElement(element.CheckboxGuestProfile, driver);
		if (isChecked) {
			if (element.CheckboxGuestProfile.isSelected()) {
				testStep.add("Verified create guest profile checkbox already checked");
			} else {
				element.CheckboxGuestProfile.click();
				testStep.add("Verified create guest profile checkbox is checked");
			}
		} else {
			if (!element.CheckboxGuestProfile.isSelected()) {
				try {
					element.CheckboxGuestProfile.click();
				} catch (Exception e) {
					Utility.clickThroughJavaScript(driver, element.CheckboxGuestProfile);
				}
				testStep.add("Verified create guest profile checkbox is  unchecked");
			} else {
				testStep.add("Verified create guest profile checkbox already unchecked");
			}
		}

		return testStep;
	}

	public ArrayList<String> enterGuestName(WebDriver driver, ArrayList<String> test_steps, String Salutation,
			String GuestFirstName,

			String GuestLastName) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		try {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
			Wait.explicit_wait_visibilityof_webelement(res.CP_NewReservation_GuestSalutation, driver);
			Wait.explicit_wait_elementToBeClickable(res.CP_NewReservation_GuestSalutation, driver);
			Utility.ScrollToElement(res.CP_NewReservation_GuestSalutation, driver);
			res.CP_NewReservation_GuestSalutation.click();
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, res.CP_NewReservation_GuestSalutation);
		}
		String sal = "//span[contains(text(),'" + Salutation + "')]/../..";
		try {

			reslogger.info(sal);
			Wait.WaitForElement(driver, sal);
			driver.findElement(By.xpath(sal)).click();
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(sal)));
		}
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
		res.CP_NewReservation_GuestFirstName.sendKeys(GuestFirstName);
		test_steps.add("Guest First Name : " + GuestFirstName);
		reslogger.info("Guest First Name : " + GuestFirstName);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);
		res.CP_NewReservation_GuestLastName.sendKeys(GuestLastName);
		test_steps.add("Guest Last Name : " + GuestLastName);
		reslogger.info("Guest Last Name : " + GuestLastName);

		return test_steps;
	}

	public void enterPaymentDetails(WebDriver driver, ArrayList<String> testSteps, String paymentType,
			String cardNumber, String nameOnCard, String cardExpDate) throws InterruptedException {
		Elements_CPReservation elementsReservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
		elementsReservation.CP_NewReservation_PaymentMethod.click();

		if (paymentType.equalsIgnoreCase("Swipe")) {
			String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'MC')]";
			Wait.WaitForElement(driver, paymentMethod);
			driver.findElement(By.xpath(paymentMethod)).click();
			elementsReservation.CP_NewReservation_Swipe.click();
			testSteps.add("Clicking in Swipe");
			reslogger.info("Clicking in Swipe");
			Wait.wait1Second();
			String CC = "(//label[text()='Credit Card Number']/preceding-sibling::input)[2]";
			Wait.WaitForElement(driver, CC);
			driver.findElement(By.xpath(CC)).sendKeys(cardNumber);
			testSteps.add("Enter CardNumber : " + cardNumber);
			reslogger.info("Enter CardNumber : " + cardNumber);
			elementsReservation.CP_NewReservation_CardNumber.sendKeys(Keys.TAB);
			Wait.wait2Second();
		} else {
			String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'"
					+ paymentType.trim() + "')]";
			Wait.WaitForElement(driver, paymentMethod);
			driver.findElement(By.xpath(paymentMethod)).click();
			testSteps.add("Selected PaymentType : " + paymentType);
			reslogger.info("Selected PaymentType : " + paymentType);
			if (paymentType.trim().equalsIgnoreCase("MC") || paymentType.trim().equalsIgnoreCase("Visa")
					|| paymentType.trim().equalsIgnoreCase("Amex") || paymentType.trim().equalsIgnoreCase("Discover")) {
				elementsReservation.CP_NewReservation_CardNumber.sendKeys(cardNumber);
				testSteps.add("Enter CardNumber : " + cardNumber);
				reslogger.info("Enter CardNumber : " + cardNumber);
				elementsReservation.CP_NewReservation_NameOnCard.sendKeys(nameOnCard);
				testSteps.add("Enter Name On Card : " + nameOnCard);
				reslogger.info("Enter Name On Card : " + nameOnCard);
				elementsReservation.CP_NewReservation_CardExpDate.sendKeys(cardExpDate);
				testSteps.add("Enter Card ExpDate : " + cardExpDate);
				reslogger.info("Enter Card ExpDate : " + cardExpDate);
			}
		}
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CreateGuestProfile);
		if (!driver.findElement(By.xpath("//small[contains(text(),'Address')]/../../following-sibling::div//input"))
				.isSelected()) {
			driver.findElement(By.xpath("//small[contains(text(),'Address')]/../../following-sibling::div/label"))
					.click();
		}
	}

	public ArrayList<String> selectReferral(WebDriver driver, String referral) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.SelectMarketButton);
		Wait.explicit_wait_visibilityof_webelement(element.SelectMarketButton, driver);
		Wait.explicit_wait_elementToBeClickable(element.SelectMarketButton, driver);
		Utility.ScrollToElement(element.SelectMarketButton, driver);
		element.SelectMarketButton.click();
		testSteps.add("Click on market");
		String pathMarket = "(//label[text()='Market']/preceding-sibling::div//ul/li//span[contains(text(),'Internet')])[1]";
		Wait.WaitForElement(driver, pathMarket);
		WebElement elementMarket = driver.findElement(By.xpath(pathMarket));
		elementMarket.click();
		reslogger.info("Selected market as : Internet");
		testSteps.add("Selected market as : Internet");

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Referral);
		try {
			Wait.explicit_wait_visibilityof_webelement(element.CP_NewReservation_Referral, driver);
			Wait.explicit_wait_elementToBeClickable(element.CP_NewReservation_Referral, driver);

			element.CP_NewReservation_Referral.click();
			String pathReferral = "(//label[text()='Referral']/preceding-sibling::div//ul/li//span[contains(text(),'"
					+ referral.trim() + "')])[2]";
			reslogger.info(pathReferral);
			Wait.WaitForElement(driver, pathReferral);
			WebElement elementReferral = driver.findElement(By.xpath(pathReferral));
			Wait.explicit_wait_visibilityof_webelement(elementReferral, driver);
			elementReferral.click();
			reslogger.info("Selected Referral as : " + referral);
			testSteps.add("Selected Referral as : " + referral);
		} catch (Exception e) {
			element.CP_NewReservation_Referral1.click();
			String pathReferral = "(//label[text()='Referral']/preceding-sibling::div//ul/li//span[contains(text(),'"
					+ referral.trim() + "')])[3]";
			reslogger.info(pathReferral);
			Wait.WaitForElement(driver, pathReferral);
			WebElement elementReferral = driver.findElement(By.xpath(pathReferral));
			Wait.explicit_wait_visibilityof_webelement(elementReferral, driver);
			elementReferral.click();
			reslogger.info("Selected Referral as : " + referral);
			testSteps.add("Selected Referral as : " + referral);
		}

		return testSteps;
	}

	public ArrayList<String> selectReferral(WebDriver driver, String referral, int RoomIndex)
			throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.SelectMarketButton);
		Wait.explicit_wait_visibilityof_webelement(element.SelectMarketButton, driver);
		Wait.explicit_wait_elementToBeClickable(element.SelectMarketButton, driver);
		Utility.ScrollToElement(element.SelectMarketButton, driver);
		element.SelectMarketButton.click();
		testSteps.add("Click on market");
		String pathMarket = "(//label[text()='Market']/preceding-sibling::div//ul/li//span[contains(text(),'Internet')])["
				+ RoomIndex + "]";
		Wait.WaitForElement(driver, pathMarket);
		WebElement elementMarket = driver.findElement(By.xpath(pathMarket));
		elementMarket.click();
		reslogger.info("Selected market as : Internet");
		testSteps.add("Selected market as : Internet");

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Referral);
		Wait.explicit_wait_visibilityof_webelement(element.CP_NewReservation_Referral, driver);
		Wait.explicit_wait_elementToBeClickable(element.CP_NewReservation_Referral, driver);
		element.CP_NewReservation_Referral.click();

		String pathReferral = "(//label[text()='Referral']/preceding-sibling::div//ul/li//span[contains(text(),'"
				+ referral.trim() + "')])[2]";
		reslogger.info(pathReferral);
		Wait.WaitForElement(driver, pathReferral);
		WebElement elementReferral = driver.findElement(By.xpath(pathReferral));
		Wait.explicit_wait_visibilityof_webelement(elementReferral, driver);
		elementReferral.click();
		reslogger.info("Selected Referral as : " + referral);
		testSteps.add("Selected Referral as : " + referral);
		return testSteps;
	}

	public void clickOnQuote(WebDriver driver) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.SaveQuote);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.SaveQuote), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.SaveQuote), driver);
		element.saveQuote.click();

	}

	public String getReservationConfirmationNumber(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath("(//div[@class='ir-loader-in'])")).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ConfirmationNumber);
		String confirmation = res.CP_NewReservation_ConfirmationNumber.getText();
		test_steps.add("Confirmation Number : <b>" + confirmation + "</b>");
		reslogger.info("Confirmation Number : <b>" + confirmation + "</b>");
		return confirmation;
	}

	public String getRoomNumberDetail(WebDriver driver) {
		String path = "//div[contains(@class,'roomInfo')]//span[contains(@data-bind,'roomNumber')]";
		Wait.WaitForElement(driver, path);
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public String getRoomChargesInTripSummary(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.getRoomChargesInTripSummary);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.getRoomChargesInTripSummary), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.getRoomChargesInTripSummary), driver);
		return element.getRoomChargesInTripSummary.getText();
	}

	public String getIncidentalsInTripSummary(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.getIncidentalsInTripSummary);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.getIncidentalsInTripSummary), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.getIncidentalsInTripSummary), driver);
		return element.getIncidentalsInTripSummary.getText();
	}

	public String getIncidentalsInTripSummaryWithoutDollar(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.getIncidentalsInTripSummary);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.getIncidentalsInTripSummary), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.getIncidentalsInTripSummary), driver);
		return Utility.convertDollarToNormalAmount(driver, element.getIncidentalsInTripSummary.getText());
	}

	public String getTaxandServicesInTripSummary(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.getTaxandServicesInTripSummary);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.getTaxandServicesInTripSummary), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.getTaxandServicesInTripSummary), driver);
		return element.getTaxandServicesInTripSummary.getText();
	}

	public String getTotalTripSummary(WebDriver driver) throws InterruptedException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.getTripTotalInTripSummary);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.getTripTotalInTripSummary), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.getTripTotalInTripSummary), driver);
		return element.getTripTotalInTripSummary.getText();
	}

	public String getBalanceInTripSummary(WebDriver driver) throws InterruptedException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.getTotalBalanceInTripSummary);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.getTotalBalanceInTripSummary), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.getTotalBalanceInTripSummary), driver);
		Utility.ScrollToElement(element.getTotalBalanceInTripSummary, driver);
		return element.getTotalBalanceInTripSummary.getText();
	}

	public String getPaidInTripSummary(WebDriver driver) throws InterruptedException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.getPaidInTripSummary);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.getPaidInTripSummary), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.getPaidInTripSummary), driver);
		Utility.ScrollToElement(element.getPaidInTripSummary, driver);
		return element.getPaidInTripSummary.getText();
	}

	public ArrayList<String> selectAllSearchedReservationCheckBox(WebDriver driver) throws Exception {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.ClickOnCheckBoxProperty);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ClickOnCheckBoxProperty), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ClickOnCheckBoxProperty), driver);
		element.clickOnCheckBoxProperty.click();
		testSteps.add("Successfully all reservations are selected ");
		return testSteps;

	}

	public ArrayList<String> clickBulkOptionCheckInAndVerifyPopUp(WebDriver driver) throws Exception {
		ArrayList<String> test_steps = new ArrayList<>();
		Elements_Reservation_SearchPage resservationSearch = new Elements_Reservation_SearchPage(driver);
		Wait.waitUntilPresenceOfElementLocated(OR.Click_Bulk_Action, driver);
		resservationSearch.Click_Bulk_Action.click();
		test_steps.add("Click Bulk Action");
		resservationSearch.Select_Checkin.click();
		test_steps.add("Clicked on bulk action - CHECKIN option");
		Wait.explicit_wait_visibilityof_webelement_120(resservationSearch.Verify_Bulk_Checkin_popup, driver);
		test_steps.add("Bulk CheckIn Popup is displayed");
		return test_steps;

	}

	public ArrayList<String> clickOnBulkResservationCanUpdated(WebDriver driver, String numberOfReservations)
			throws Exception {
		ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ResBulkCanUpdatedTab);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ResBulkCanUpdatedTab), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ResBulkCanUpdatedTab), driver);

		String tabText = element.ResBulkCanUpdatedTab.getText();
		assertTrue(tabText.contains(numberOfReservations), "Failed: Number of reservation can be updated mismatching");
		testSteps.add(tabText);
		element.ResBulkCanUpdatedTab.click();
		return testSteps;
	}

	public String getReservationDetails(WebDriver driver, String Guestname, int parentInex, int Index) {

		String Path = "((//span[text()='" + Guestname + "'])[" + parentInex + "]//..//following-sibling::td//span)["
				+ Index + "]";
		WebElement element = driver.findElement(By.xpath(Path));
		return element.getText();
	}

	public String getGuestName(WebDriver driver, String Guestname, int parentInex) throws InterruptedException {

		String Path = "(//span[text()='" + Guestname + "'])[" + parentInex + "]";
		WebElement element = driver.findElement(By.xpath(Path));
		Utility.ScrollToElement(element, driver);
		return element.getText();
	}

	public ArrayList<String> clickOnBulkReservationCanNotUpdated(WebDriver driver, String numberOfReservation)
			throws Exception {
		ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ResBulkCanNotUpdatedTab);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ResBulkCanNotUpdatedTab), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ResBulkCanNotUpdatedTab), driver);
		String tabText = elements.ResBulkCanNotUpdatedTab.getText();
		assertTrue(tabText.contains(numberOfReservation));
		testSteps.add(tabText);
		reslogger.info(tabText);
		elements.ResBulkCanNotUpdatedTab.click();
		testSteps.add("Click on tab");
		return testSteps;
	}

	public ArrayList<String> clickOnProcessButtonInBulkCheckInPopUp(WebDriver driver) throws Exception {
		ArrayList<String> test_steps = new ArrayList<>();
		Elements_CPReservation cpResElm = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement_120(cpResElm.ClickProcessButtonBulkCheckIN, driver);
		cpResElm.ClickProcessButtonBulkCheckIN.click();
		reslogger.info("Process Button is Pressed Successfully");
		test_steps.add("Process Button is Pressed Successfully");

		return test_steps;
	}

	public ArrayList<String> clickOnBulkReservationCanUpdatedAfterProcess(WebDriver driver) throws Exception {
		ArrayList<String> test_steps = new ArrayList<>();
		Elements_CPReservation cpResElm = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement_120(cpResElm.verifyBulkCheckInCompletePopUp, driver);
		test_steps.add("Bulk Check In Complete PopUp After Process Is Successfully open");
		reslogger.info("Bulk Check In Complete PopUp After Process Is Successfully open");
		Wait.explicit_wait_visibilityof_webelement_120(cpResElm.clickResCanUpdateAfterProcess, driver);
		String tabText = cpResElm.clickResCanUpdateAfterProcess.getText();
		test_steps.add(tabText);
		reslogger.info(tabText);
		cpResElm.clickResCanUpdateAfterProcess.click();
		test_steps.add(tabText + " Tab is Successfully Clicked");
		reslogger.info(tabText + " Tab is Successfully Clicked");

		return test_steps;
	}

	public ArrayList<String> clickOnBulkCheckInReservationCanNotUpdated(WebDriver driver, String numberOfReservation)
			throws Exception {
		ArrayList<String> test_steps = new ArrayList<>();
		Elements_CPReservation cpResElm = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ClickResCanNotUpdateAfterProcess);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ClickResCanNotUpdateAfterProcess), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ClickResCanNotUpdateAfterProcess), driver);

		String tabText = cpResElm.clickResCanNotUpdateAfterProcess.getText();
		assertTrue(tabText.contains(numberOfReservation), "Failed: cannot updated tab is mismatching");
		test_steps.add(tabText);
		reslogger.info(tabText);
		cpResElm.clickResCanNotUpdateAfterProcess.click();
		test_steps.add("Click on tab");

		return test_steps;
	}

	public ArrayList<String> closeBulkActionPopUp(WebDriver driver) throws Exception {
		ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation elementsReservation = new Elements_CPReservation(driver);
		try {
			Wait.WaitForElement(driver, OR_Reservation.CLOSEBULKACTIONPOPUP);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CLOSEBULKACTIONPOPUP), driver);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CLOSEBULKACTIONPOPUP), driver);
			Utility.ScrollToElement_NoWait(elementsReservation.CLOSEBULKACTIONPOPUP, driver);
			elementsReservation.CLOSEBULKACTIONPOPUP.click();
		} catch (Exception e) {
			Utility.ScrollToElement_NoWait(elementsReservation.CLOSE_BULK_ACTION_POPUP, driver);
			elementsReservation.CLOSE_BULK_ACTION_POPUP.click();
		}
		test_steps.add("Bulk Action PopUp Closed Successfully");
		reslogger.info("Bulk Action PopUp Closed Successfully");

		return testSteps;

	}

	public ArrayList<String> verifyReservationStatus(WebDriver driver, String reservationNumber, String expectedStatus)
			throws Exception {

		ArrayList<String> testSteps = new ArrayList<>();
		String path = "//span[contains(text(),'" + reservationNumber
				+ "')]//..//following-sibling::td//span[contains(@data-bind,'text: StatusName.replace')]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);

		WebElement element = driver.findElement(By.xpath(path));
		testSteps.add("Expected status: " + expectedStatus);
		testSteps.add("Found: " + element.getText());
		assertEquals(element.getText(), expectedStatus, "Failed: reservation status is mismatching!");
		test_steps.add("Verified resevrtaion number " + reservationNumber + " status");
		return testSteps;
	}

	public ArrayList<String> clickOnProcessInBulkCheckOutPopUp(WebDriver driver) throws Exception {
		ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement_120(element.clickProcessButtonBulkCheckOut, driver);
		element.clickProcessButtonBulkCheckOut.click();
		reslogger.info("Process Button is Pressed Successfully");
		testSteps.add("Process Button is Pressed Successfully");

		return testSteps;
	}

	public ArrayList<String> clickOnBulkCheckoutReservationCanUpdatedAfterProcess(WebDriver driver) throws Exception {
		ArrayList<String> test_steps = new ArrayList<>();
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement_120(elements.verifyBulkCheckOutCompletePopUp, driver);
		test_steps.add("Bulk Check Out Complete PopUp After Process Is Successfully open");
		reslogger.info("Bulk Check Out Complete PopUp After Process Is Successfully open");
		Wait.explicit_wait_visibilityof_webelement_120(elements.clickResCanUpdateAfterProcess, driver);
		String tabText = elements.clickResCanUpdateAfterProcess.getText();
		test_steps.add(tabText);
		reslogger.info(tabText);
		elements.clickResCanUpdateAfterProcess.click();
		test_steps.add(tabText + " Tab is Successfully Clicked");
		reslogger.info(tabText + " Tab is Successfully Clicked");

		return test_steps;
	}

	public ArrayList<String> clickOnGuestNameInSearchReaservation(WebDriver driver, String ReservationNumber)
			throws Exception {

		ArrayList<String> testSteps = new ArrayList<>();
		String path = "//span[contains(text(),'" + ReservationNumber + "')]//..//..//following-sibling::td//a";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);

		String guestName = driver.findElement(By.xpath(path)).getText();
		driver.findElement(By.xpath(path)).click();
		Wait.wait2Second();
		driver.navigate().refresh();
		Wait.wait2Second();
		reslogger.info("Clicked " + guestName);
		return testSteps;

	}

	public ArrayList<String> checkInDates(WebDriver driver, int Days, int index)
			throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckinDate);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterCheckinDate), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.EnterCheckinDate), driver);
		elements.listEnterCheckinDate.get(index).click();
		elements.listEnterCheckinDate.get(index).clear();
		String checkInDate = ESTTimeZone.DateFormateForLineItem(Days);
		elements.listEnterCheckinDate.get(index).sendKeys(checkInDate);
		test_steps.add("CheckIn date: " + checkInDate);
		return test_steps;
	}

	public ArrayList<String> checkOutDates(WebDriver driver, int Days, int index)
			throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckout);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterCheckout), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.EnterCheckout), driver);
		elements.listEnterCheckout.get(index).click();
		elements.listEnterCheckout.get(index).clear();
		String checkOutDate = ESTTimeZone.DateFormateForLineItem(Days);
		elements.listEnterCheckout.get(index).sendKeys(checkOutDate);
		test_steps.add("CheckOut date: " + checkOutDate);
		return test_steps;

	}

	public String selectRoomNumberInMRB(WebDriver driver, String RoomClass, int index, int RoomIndex)
			throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.selectRoomNumberInMRB);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.selectRoomNumberInMRB), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.selectRoomNumberInMRB), driver);
		Utility.ScrollToElement(elements.SelectRoomNumberInMRB.get(index), driver);
		elements.SelectRoomNumberInMRB.get(index).click();
		String Path = "//div[contains(@data-bind,'validationOptions')]//button[@title='--Select Room--']//following-sibling::div//ul//li//span[contains(text(),'"
				+ RoomClass + "')]";
		Wait.WaitForElement(driver, Path);
		List<WebElement> ListRoomNumber = driver.findElements(By.xpath(Path));
		String GetRoomNumber = ListRoomNumber.get(RoomIndex).getText();
		ListRoomNumber.get(RoomIndex).click();
		return GetRoomNumber;

	}

	public ArrayList<String> checkboxCopyGuest(WebDriver driver) throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.checkboxCopyGuest);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkboxCopyGuest), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.checkboxCopyGuest), driver);
		Utility.ScrollToElement_NoWait(elements.CheckboxCopyGuest, driver);
		elements.CheckboxCopyGuest.click();
		testSteps.add("Checked Copy Guest 1 Info From Primary Room");
		return testSteps;

	}

	public String getRoomNumber(WebDriver driver, int index) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.GetIncidentalRoomNumber.get(index).getText();
	}

	public ArrayList<String> clickAddARoom(WebDriver driver) throws InterruptedException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.ClickOnAddRooms);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ClickOnAddRooms), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ClickOnAddRooms), driver);
		elements.clickOnAddRooms.click();
		test_steps.add("Click on add a room");
		return test_steps;

	}

	public ArrayList<String> clickAddOnsButton(WebDriver driver) throws InterruptedException {

		Elements_CPReservation elements_CPReservation = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.addOnsButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.addOnsButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.addOnsButton), driver);
		Utility.ScrollToElement(elements_CPReservation.CP_ADDON_Button, driver);
		elements_CPReservation.CP_ADDON_Button.click();
		reslogger.info("Clicked AddOn Button");
		test_steps.add("Clicked AddOn Button");

		Wait.WaitForElement(driver, OR_Reservation.ADDONSHeading);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ADDONSHeading), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ADDONSHeading), driver);

		assertTrue(elements_CPReservation.ADDONSHeading.isDisplayed(), "Popup didn't display");
		reslogger.info("ADDON Popup Opened");
		test_steps.add("ADDON Popup Opened");

		return test_steps;
	}

	public ArrayList<String> addingAddOns(WebDriver driver, String packageName, String packageAmount,
			String packageQuentity, boolean isRoom, String roomClassAbvWithRoomNumber) throws InterruptedException {

		Elements_CPReservation elements_CPReservation = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();

		if (isRoom) {
			elements_CPReservation.ADDONSRoomButton.click();
			reslogger.info("ADDONS RoomButton clicked");

			String Path = "//h4[text()='ADD-ONS']//..//..//div[@class='dropdown-menu open']//ul//li//span[text()='"
					+ roomClassAbvWithRoomNumber + "']";
			Wait.WaitForElement(driver, Path);
			WebElement element = driver.findElement(By.xpath(Path));
			element.click();
			Wait.WaitForElement(driver, OR_Reservation.ADDONSSelectedRoom);
			assertEquals(elements_CPReservation.ADDONSSelectedRoom.getText(), roomClassAbvWithRoomNumber,
					"Failed:Room number is mismatching");
			test_steps.add("Verified selected room number");
		}

		elements_CPReservation.AddONSSearchInput.clear();
		elements_CPReservation.AddONSSearchInput.sendKeys(packageName);
		reslogger.info("Entered PackageName : " + packageName);
		test_steps.add("Entered PackageName : " + packageName);

		elements_CPReservation.AddONSSearchButtton.click();
		reslogger.info("Clicked Search Icon");
		test_steps.add("Clicked Search Icon");

		if (Utility.validateString(packageAmount)) {
			assertEquals(elements_CPReservation.AddONSAmount.getText(), "$ " + packageAmount,
					"Failed: Amount is mismatching");
			test_steps.add("Verified amount before add new ADD-ONS");
			reslogger.info("Verified amount before add new ADD-ONS");
		}
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ADDONSPlus), driver);
		if (Utility.validateString(packageQuentity)) {
			for (int i = 0; i < Integer.parseInt(packageQuentity); i++) {
				elements_CPReservation.ADDONSPlus.click();
				reslogger.info("in click");

			}
		} else {
			String path = "//h4[text()='ADD-ONS']//..//..//span[text()='" + packageName
					+ "']/..//parent::span//parent::div/..//following-sibling::div//..//..//span[text()='+']";
			Wait.WaitForElement(driver, path);
			Utility.ScrollToElement(driver.findElement(By.xpath(path)), driver);
			driver.findElement(By.xpath(path)).click();
			reslogger.info("in click");
		}
		Utility.ScrollToElement(elements_CPReservation.ADDONSSaveButton, driver);
		elements_CPReservation.ADDONSSaveButton.click();
		test_steps.add("Clicked On Save");
		reslogger.info("Clicked On Save");

		Wait.waitForElementToBeVisibile(By.className(OR.Toaster_Title), driver);
		return test_steps;
	}

	public String getIncidentalInTripSummery(WebDriver driver) throws InterruptedException, ParseException {

		Elements_CPReservation elements_CPReservation = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.incidentalInTS);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.incidentalInTS), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.incidentalInTS), driver);
		return elements_CPReservation.incidentalInTS.getText();

	}

	public ArrayList<String> clickOnHistory(WebDriver driver) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.HistoryTab);
		Wait.explicit_wait_visibilityof_webelement(element.HistoryTab, driver);
		Wait.explicit_wait_elementToBeClickable(element.HistoryTab, driver);
		Utility.ScrollToElement_NoWait(element.HistoryTab, driver);
		element.HistoryTab.click();
		test_step.add("Click on history");
		return test_step;

	}

	public String gettHistoryRoom(WebDriver driver, int index) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		return element.HistoryRoom.get(index).getText();
	}

	public ArrayList<String> clickOnDetails(WebDriver driver) throws InterruptedException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		try {
			Wait.WaitForElement(driver, OR_Reservation.detailsTab);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.detailsTab), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.detailsTab), driver);

			Utility.ScrollToElement_NoWait(element.detailsTab, driver);
			element.detailsTab.click();
			test_step.add("Click on details");
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, element.detailsTab);
		}
		return test_step;

	}

	public ArrayList<String> clickOnDeleteOncidentalButton(WebDriver driver, int index)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		try {
			Wait.WaitForElement(driver, OR_Reservation.deleteIncidentalInSatyInfoButton);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.deleteIncidentalInSatyInfoButton), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.deleteIncidentalInSatyInfoButton), driver);

		} catch (Exception e) {
			driver.navigate().refresh();

			Wait.WaitForElement(driver, OR_Reservation.deleteIncidentalInSatyInfoButton);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.deleteIncidentalInSatyInfoButton), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.deleteIncidentalInSatyInfoButton), driver);
		}

		Utility.ScrollToElement_NoWait(element.deleteIncidentalInSatyInfoButton.get(index), driver);
		element.deleteIncidentalInSatyInfoButton.get(index).click();
		return testSteps;
	}

	public ArrayList<String> incidentalVoidpopup(WebDriver driver, String EnterNotes, int index)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.voidPopupHeading);
		Wait.explicit_wait_visibilityof_webelement(element.voidPopupHeading, driver);
		Wait.explicit_wait_elementToBeClickable(element.voidPopupHeading, driver);
		// assertEquals(element.VoidPopupHeading.getText(), "Void Items");
		element.enterNotes.sendKeys(EnterNotes);
		test_step.add("Enter notes: " + EnterNotes);
		element.voidButton.get(index).click();
		test_step.add("Click on Void button");
		return test_step;
	}

	public String getTotaltaxBeforeSaveRes(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait5Second();
		// String taxCharges =
		// res.getTotalTaxBeforeSaveRes.getAttribute("value");
		String taxCharges = res.getTotalTaxBeforeSaveRes.getText();
		return taxCharges;
	}

	public String getTotalTripTotalBeforeSaveRes(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait5Second();
		// String totalTripCharges =
		// res.getTotalTripBeforeSaveRes.getAttribute("value");
		String totalTripCharges = res.getTotalTripBeforeSaveRes.getText();
		return totalTripCharges;
	}

	public String getRoomChargesbeforeResSave(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait5Second();
		String totalRoomcharges = res.getRoomChrgesBeforeSaveRes.getText();
		return totalRoomcharges;
	}

	public String getPercentcalcvalueSingleItem(WebDriver driver, String values, String totalroomcharge, int stay) {
		String getCalculated = "";
		double percentval = Double.parseDouble(values.trim());
		double roomchargeamount = Double.parseDouble(totalroomcharge);
		double perDayRoomCharge = roomchargeamount / stay;
		double total = perDayRoomCharge * percentval / 100;
		getCalculated = String.valueOf(total);
		return getCalculated;

	}

	public String getPercentcalcvalueSingleItemforoneday(WebDriver driver, String values, String perdayRoomCharge) {
		String getCalculated = "";
		double percentval = Double.parseDouble(values.trim());
		double perDayRoomCharge = Double.parseDouble(perdayRoomCharge);
		double total = perDayRoomCharge * percentval / 100;
		getCalculated = String.valueOf(total);
		return getCalculated;

	}

	public void verifyChildLineItemTaxes(WebDriver driver, ArrayList<String> test_steps, String taxLedgeraccount,
			String existingTaxDescriptions, double percentCalculatedVal) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		// double foliovalue = 0.0;
		DecimalFormat f = new DecimalFormat("##.00");
		double totalTaxinFolios = 0.0;
		double capturetotalTax = 0.0;
		int roomChargesFolioCount = getRoomChargeFolioItemCountInRes(driver);
		for (int i = 1; i <= roomChargesFolioCount; i++) {
			String xpath = "(//tbody[starts-with(@data-bind,'getElement: ComputedFolioItemsElement')]/tr/td/span[text()='"
					+ taxLedgeraccount + "']/../following-sibling::td/a)[" + i + "]";
			// clickroomChargeFolioItems
			Wait.waitUntilPresenceOfElementLocated(xpath, driver);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(xpath)), driver);
			driver.findElement(By.xpath(xpath)).click();
			test_steps.add("Click at folio line item: " + i + " of" + " " + taxLedgeraccount);
			Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);
			Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ItemDetailOnFolioPopup, driver);
			double individualFolioTotal = 0.0;
			double totalperdayfolioTax = 0.0;
			double folioValue = 0.0;
			String xpath1 = "(//a[text()='" + existingTaxDescriptions.trim()
					+ "'])[1]/ancestor::td/following-sibling::td/span";
			Wait.waitUntilPresenceOfElementLocated(xpath1, driver);
			String val = driver.findElement(By.xpath(xpath1)).getText();
			folioValue = Double.parseDouble(val.replace("$", "").trim());
			double calculatedTax = Double.parseDouble(f.format(percentCalculatedVal));
			assertEquals(calculatedTax, folioValue);
			clickFolioPopupCancel(driver);
			test_steps.add("Close open folio line item");
		}

	}

	public String getTotalTaxInResFolios(WebDriver driver, String taxLedgeraccount, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		DecimalFormat f = new DecimalFormat("##.00");
		int roomChargesFolioCount = getRoomChargeFolioItemCountInRes(driver);
		double totalTax = 0.0;
		double totalTaxCaculated = 0.0;
		String taxAmount = "";
		for (int i = 1; i <= roomChargesFolioCount; i++) {
			String xpath = "(//tbody[starts-with(@data-bind,'getElement: ComputedFolioItemsElement')]/tr/td/span[text()='"
					+ taxLedgeraccount + "']/../following-sibling::td/a)[" + i + "]";
			// clickroomChargeFolioItems
			Wait.waitUntilPresenceOfElementLocated(xpath, driver);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(xpath)), driver);
			driver.findElement(By.xpath(xpath)).click();
			test_steps.add("Click at folio line item: " + i + " of" + " " + taxLedgeraccount);
			int taxCount = res.getTaxFolioItems.size();
			double taxVal = 0.0;
			double sumOfTaxFolio = 0.0;
			double capturetotalTax = 0.0;
			double folioClculation = 0.0;
			for (int j = 0; j < res.getTaxFolioItems.size(); j++) {
				taxVal = Double.parseDouble(res.getTaxFolioItems.get(j).getText().replace("$", "").trim());
				sumOfTaxFolio = sumOfTaxFolio + taxVal;
			}
			capturetotalTax = Double.parseDouble(res.getTaxTotalinChildFolioItem.getText().replace("$", "").trim());
			folioClculation = Double.parseDouble(f.format(sumOfTaxFolio));
			assertEquals(capturetotalTax, folioClculation);
			test_steps.add("Verifying successfully total amount captured with calculated taxes in one folio line Item: "
					+ "<b>" + folioClculation + "</b>");
			totalTax = totalTax + folioClculation;
			clickFolioPopupCancel(driver);
			test_steps.add("Close open folio line item");

		}
		String totalTaxAmount = driver.findElement(By.xpath("//span[@class='pamt tsc']/span[starts-with(.,'$')]"))
				.getText().replace("$", "").trim();
		totalTaxCaculated = Double.parseDouble(totalTaxAmount);
		assertEquals(Double.parseDouble(totalTaxAmount), totalTaxCaculated);
		test_steps.add("Verifying successfully total amount captured with Calculated Tax amount over reservation stay: "
				+ "<b>" + totalTaxCaculated + "</b>");
		taxAmount = Double.toString(totalTaxCaculated);

		return taxAmount;

	}

	public void clickFolioPopupCancel(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait10Second();
		// res.clickFolioPopupCancel.click();-
		try {
			Wait.wait5Second();
			JavascriptExecutor js = (JavascriptExecutor) driver;
			js.executeScript("arguments[0].click()", res.clickFolioPopupCancel);
		} catch (Exception e) {
			Wait.wait5Second();
			res.clickFolioPopupCancel.click();
		}

	}

	public int getRoomChargeFolioItemCountInRes(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		int count = res.getRoomChargeFolioCount.size();
		return count;

	}

	public String GETRoomNumber(WebDriver driver, ArrayList test_steps) {
		String room = "//div[contains(@data-bind,'roomClass.name')]";
		Wait.WaitForElement(driver, room);
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(room)), driver);
		room = driver.findElement(By.xpath(room)).getText();

		room = room.split(":")[1];
		room = room.replace(" ", "");
		test_steps.add("Room Number : " + room);
		reslogger.info("Room Number : " + room);

		return room;
	}

	public ArrayList<String> verifyMarketSegmentDropDown(WebDriver driver, ArrayList<String> test_steps,
			String MarketSegment, boolean isContains) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Market);
		Utility.ScrollToElement(res.CP_NewReservation_Market, driver);
		Wait.wait2Second();
		res.CP_NewReservation_Market.click();
		test_steps.add("Market Segment Dropdown Opened");
		reslogger.info("Market Segment Dropdown Opened");
		boolean isMarketSegmentFound = false;

		for (int i = 0; i < res.MARKETSEGMENT_DROPDOWNLIST.size(); i++) {
			WebElement marketSegementElement = driver.findElement(
					By.xpath("//label[text()='Market']/preceding-sibling::div//ul/li[@data-original-index='" + i
							+ "']//a//span[@class='text']"));

			if (isContains) {
				isMarketSegmentFound = marketSegementElement.getText().equals(MarketSegment);
				reslogger.info("Found:" + isMarketSegmentFound);
				if (isMarketSegmentFound) {
					assertEquals(isMarketSegmentFound, true);
					test_steps.add("Market Segment Dropdown Contains Active: " + MarketSegment);
					reslogger.info("Market Segment Dropdown Contains Active: " + MarketSegment);
					break;
				}
			} else {
				if (!isMarketSegmentFound) {
					isMarketSegmentFound = marketSegementElement.getText().contains(MarketSegment);
					assertEquals(isMarketSegmentFound, false);
					test_steps.add("Market Segment Dropdown Doesn't Contain InActive/Obsolete: " + MarketSegment);
					reslogger.info("Market Segment Dropdown Doesn't Contain InActive/Obsolete: " + MarketSegment);
					break;
				}

			}
		}
		return test_steps;
	}

	public void verifyQuoteConfirmetionPopupWithStatusCodeAndConfirmationNumber(WebDriver driver,
			String reservationNumber, String Status, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String quote = "//h4[contains(text(),'Quote Confirmation')]";
		Wait.WaitForElement(driver, quote);
		if (driver.findElement(By.xpath(quote)).isDisplayed()) {
			test_steps.add("Quote Confirmation pop is displayed");
			reslogger.info("Quote Confirmation pop is displayed");
		} else {
			test_steps.add("Quote Confirmation pop not is displayed");
			reslogger.info("Quote Confirmation pop not is displayed");
		}

		assertEquals(res.QUOTECREATED_ALERTMESSAGE.getText(), "Quote successfully created.");
		test_steps.add("Quote Confirmation pop contains Alert Message: " + res.QUOTECREATED_ALERTMESSAGE.getText());
		reslogger.info("Quote Confirmation pop contains Alert Message: " + res.QUOTECREATED_ALERTMESSAGE.getText());

		assertEquals(res.CP_NewReservation_ConfirmationNumber.getText(), reservationNumber);
		test_steps.add("Quote Confirmation pop contains Reservation Number: " + reservationNumber);
		reslogger.info("Quote Confirmation pop contains Reservation Number: " + reservationNumber);

		assertEquals(res.CP_NewReservation_ReservationStatus.getText(), Status);
		test_steps.add("Quote Confirmation pop contains Status: " + Status);
		reslogger.info("Quote Confirmation pop contains Status: " + Status);

		res.CP_NewReservation_ClosePopUp.click();
		test_steps.add("Quote Confirmation pop Close Button Click");
		reslogger.info("Quote Confirmation pop Close Button Click");

	}

	public ArrayList<String> verifyMarketSegmentDropDownAdvanceSearch(WebDriver driver, ArrayList<String> test_steps,
			String MarketSegment, boolean isContains) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.MARKETSEGMENT_ADVANCESEARCH_DROPDOWNLIST);
		res.ADVANCESEARCH_MARKETSEGMENT_BUTTON.click();
		test_steps.add("Market Segment Dropdown Opened");
		reslogger.info("Market Segment Dropdown Opened");

		boolean isMarketSegmentFound = false;

		for (int i = 0; i < res.MARKETSEGMENT_ADVANCESEARCH_DROPDOWNLIST.size(); i++) {
			WebElement marketSegementElement = driver.findElement(By.xpath(
					"//span[text()='Marketing Segment']/parent::button/following-sibling::div//li[@data-original-index='"
							+ i + "']//a//span[@class='text']"));
			if (isContains) {
				isMarketSegmentFound = marketSegementElement.getText().equals(MarketSegment);

				if (isMarketSegmentFound) {
					assertEquals(isMarketSegmentFound, true);
					test_steps.add("Market Segment Dropdown Contains Active: " + MarketSegment);
					reslogger.info("Market Segment Dropdown Contains Active: " + MarketSegment);
					break;
				}
			} else {
				if (!isMarketSegmentFound) {
					isMarketSegmentFound = marketSegementElement.getText().contains(MarketSegment);
					assertEquals(isMarketSegmentFound, false);
					test_steps.add("Market Segment Dropdown Doesn't Contain InActive/Obsolete: " + MarketSegment);
					reslogger.info("Market Segment Dropdown Doesn't Contain InActive/Obsolete: " + MarketSegment);
					break;
				}

			}
		}
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <searcRoom> ' Description: <Search room in reservation room
	 * list > ' Input parameters: < String RoomClassName> ' Return value:
	 * ArrayList<String> ' Created By: <Reddy Ponnolu> ' Created On: <04/05/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> searcRoom(WebDriver driver, String RoomClassName, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		List<WebElement> AvilableRooms = driver.findElements(
				By.xpath("//div[@id='rcDtails']//following-sibling::div/span[contains(@data-bind,'roomClass.name')]"));
		String text = null;
		for (int i = 1; i <= AvilableRooms.size(); i++) {
			text = driver.findElement(By.xpath(
					"(//div[@id='rcDtails']//following-sibling::div/span[contains(@data-bind,'roomClass.name')])[" + i
							+ "]"))
					.getText();
			test_steps.add("Avilable Rooms :" + text);
			reslogger.info("Avilable Rooms :" + text);
			;
			if (text.equals(RoomClassName)) {
				test_steps.add("In Room List newly Created room class avilable " + RoomClassName);
				reslogger.info("In Room List newly Created room class avilable " + RoomClassName);

			} else {
				// test_steps.add("In Room List newly Created room class not
				// avilable ");
				reslogger.info("In Room List newly Created room class not avilable ");

			}

		}
		if (!(text == RoomClassName)) {
			test_steps.add("RoomClass Not avilable in Reservation RoomingList: " + RoomClassName);
			reslogger.info("RoomClass Not avilable in Reservation RoomingList: " + RoomClassName);

		}
		return test_steps;
	}

	public void clickYestakemetotheFolio(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.Checkout_CompleteCheckOutMsgYesButton, driver);
		res.Checkout_CompleteCheckOutMsgYesButton.click();
		test_steps.add("Clicking on Yes, take me to the Folio");
		reslogger.info("Clicking on Yes, take me to the Folio");

	}

	public void createTask(WebDriver driver, ArrayList test_steps, boolean isAddDueOn, boolean isAddAssignee,
			String TaskCategory, String TaskType, String TaskDetails, String TaskRemarks, String TaskDueon,
			String TaskAssignee, String TaskStatus) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddTask);
		test_steps.add("******************* Adding Task **********************");
		reslogger.info("******************* Adding Task **********************");
		res.CP_AddTask.click();
		test_steps.add("Click on Add Task");
		reslogger.info("Click on Add Task");

		String taskCategoryArrow = "//label[text()='Category']/..//button";
		Wait.WaitForElement(driver, taskCategoryArrow);
		driver.findElement(By.xpath(taskCategoryArrow)).click();

		String taskCategory = "//label[text()='Category']/..//div/ul//span[text()='" + TaskCategory.trim() + "']";
		Wait.WaitForElement(driver, taskCategory);
		driver.findElement(By.xpath(taskCategory)).click();
		test_steps.add("Select Task Category : " + TaskCategory);
		reslogger.info("Select Task Category : " + TaskCategory);

		String taskType = "//label[text()='Type']/..//button";
		Wait.WaitForElement(driver, taskType);
		driver.findElement(By.xpath(taskType)).click();
		Wait.wait2Second();
		taskType = "//label[text()='Type']/..//div/ul//span[text()='" + TaskType.trim() + "']";
		Wait.WaitForElement(driver, taskType);
		driver.findElement(By.xpath(taskType)).click();
		test_steps.add("Select Task Type : " + TaskType);
		reslogger.info("Select Task Type : " + TaskType);

		if (Utility.validateString(TaskDetails)) {
			String taskDetails = "//label[text()='Details']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, taskDetails);
			driver.findElement(By.xpath(taskDetails)).sendKeys(TaskDetails);
			test_steps.add("Select Task Details : " + TaskDetails);
			reslogger.info("Select Task Details : " + TaskDetails);
		}

		if (Utility.validateString(TaskRemarks)) {
			String taskRemarks = "//label[text()='Remarks']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, taskRemarks);
			driver.findElement(By.xpath(taskRemarks)).sendKeys(TaskRemarks);
			test_steps.add("Enter Task Remarks : " + TaskRemarks);
			reslogger.info("Enter Task Remarks : " + TaskRemarks);
		}
		if (isAddDueOn) {
			String dueCalender = "//label[text()='Due On']/..//i";
			Wait.WaitForElement(driver, dueCalender);
			driver.findElement(By.xpath(dueCalender)).click();
			String monthYear = Utility.get_MonthYear(TaskDueon);
			String day = Utility.getDay(TaskDueon);
			reslogger.info(monthYear);
			String header = null, headerText = null, next = null, date;
			for (int i = 1; i <= 12; i++) {
				header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
				headerText = driver.findElement(By.xpath(header)).getText();
				if (headerText.equalsIgnoreCase(monthYear)) {
					date = "//td[contains(@class,'day') and text()='" + day + "']";
					Wait.WaitForElement(driver, date);
					int size = driver.findElements(By.xpath(date)).size();
					for (int k = 1; k <= size; k++) {
						date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + k + "]";
						String classText = driver.findElement(By.xpath(date)).getAttribute("class");
						if (!classText.contains("old")) {
							driver.findElement(By.xpath(date)).click();
							test_steps.add("Selecting due on date : " + TaskDueon);
							reslogger.info("Selecting due on date : " + TaskDueon);
							break;
						}
					}
					break;
				} else {
					next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
					Wait.WaitForElement(driver, next);
					driver.findElement(By.xpath(next)).click();
					Wait.wait2Second();
				}
			}
		}
		if (isAddAssignee) {
			String taskAssignee = "//label[text()='Assignee']/..//input";
			Wait.WaitForElement(driver, taskAssignee);
			driver.findElement(By.xpath(taskAssignee)).sendKeys(TaskAssignee);
			Wait.wait2Second();
			String taskassgin = "//label[text()='Assignee']/..//div/ul/li/div";
			Wait.WaitForElement(driver, taskassgin);
			driver.findElement(By.xpath(taskassgin)).click();
			test_steps.add("Enter Task Assignee : " + TaskAssignee);
			reslogger.info("Enter Task Assignee : " + TaskAssignee);

		}
	}

	public void clickNocancelthecheckoutprocess(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.Checkout_CompleteCheckOutMsgNoButton, driver);
		res.Checkout_CompleteCheckOutMsgNoButton.click();
		test_steps.add("Clicking on No, cancel the check-out process");
		reslogger.info("Clicking on No, cancel the check-out process");
	}

	public Double verify_TotalCharges(WebDriver driver, ArrayList<String> test_steps, String RoomCharges,
			String FolioTaxes, String TotalCharges) {
		String roomCharges = RoomCharges.replace("$", "");
		Double roomrate = Double.parseDouble(roomCharges);
		reslogger.info("roomCharges : " + roomCharges);

		String folioTaxes = FolioTaxes.replace("$", "");
		Double tax = Double.parseDouble(folioTaxes);
		reslogger.info("folioTaxes : " + tax);
		Double total = roomrate + tax;
		test_steps.add("Expected total charges : " + total);
		reslogger.info("Expected total charges : " + total);
		TotalCharges = TotalCharges.replace("$", "");
		TotalCharges = TotalCharges.trim();
		Double totalCharges = Double.parseDouble(TotalCharges);
		test_steps.add("Found : " + totalCharges);
		reslogger.info("Found : " + totalCharges);
		assertEquals(total, totalCharges, "Failed: Total Charges mismatches");
		test_steps.add("Verified total charges");
		reslogger.info("Verified total charges");

		return total;
	}

	public ArrayList<String> EnterManualRateAmount(WebDriver driver, String ManualRate) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterManualRate);
		res.EnterManualRate.clear();
		res.EnterManualRate.sendKeys(ManualRate);
		test_steps.add("Entered manual rate amount : " + ManualRate);
		reslogger.info("Entered manual rate amount : " + ManualRate);
		return test_steps;
	}

	public ArrayList<String> VerifyBalance(WebDriver driver, Double TotalCharges, String Paid, String TotalBalance) {

		ArrayList<String> test_steps = new ArrayList<>();
		Paid = Paid.replace("$", "");
		Paid = Paid.trim();
		Double paid = Double.parseDouble(Paid);
		reslogger.info("Paid : " + paid);

		Double total = TotalCharges + paid;
		test_steps.add("Expected balance : " + total);
		reslogger.info("Expected balance : " + total);

		TotalBalance = TotalBalance.replace("$", "");
		TotalBalance = TotalBalance.trim();
		Double totalBalance = Double.parseDouble(TotalBalance);
		reslogger.info("totalBalance : " + totalBalance);

		test_steps.add("Found : " + totalBalance);
		reslogger.info("Found : " + totalBalance);
		assertEquals(total, totalBalance, "Failed: Balance mismatches");
		test_steps.add("Verified balance");
		reslogger.info("Verified balance");
		return test_steps;
	}

	public void clickRollBackButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_RolleBackButton);
		Utility.ScrollToElement(res.CP_Reservation_RollBackAllButton, driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_Reservation_RolleBackButton), 60, driver);
		res.CP_Reservation_RollBackAllButton.click();
		test_steps.add("Click Roll Back  Button");
		reslogger.info("Click Roll Back  Button");
		Wait.waitTillElementDisplayed(driver, OR_Reservation.RollBackPopupMsg);
		Wait.WaitForElement(driver, OR_Reservation.RollBackPopupMsg);
	}

	public void verifyRollBackMsg(WebDriver driver, ArrayList<String> test_steps, String Msg)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.RollBackPopupMsg);
		Wait.explicit_wait_visibilityof_webelement(res.RollBackMsg, driver);
		Utility.ScrollToElement(res.RollBackMsg, driver);
		assertTrue(res.RollBackMsg.getText().toLowerCase().trim().equals(Msg.toLowerCase().trim()),
				"Failed : Verify RollBack Msg");
		test_steps.add("Verified RollBack Msg : <b>" + Msg + "</b>");
		reslogger.info("Verified RollBack :" + Msg);
	}

	public void clickCloseRollBackMsg(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.RollBackPopupCloseButton);
		Utility.ScrollToElement(res.RollBackPopupCloseButton, driver);
		res.RollBackPopupCloseButton.click();
		test_steps.add("Click Roll Back  Close Button");
		reslogger.info("Click Roll Back  Close Button");
	}

	public void clickYesButtonRollBackMsg(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.RollBacktPopupYesButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RollBacktPopupYesButton), 60, driver);
		Utility.ScrollToElement(res.RollBacktPopupYesButton, driver);
		res.RollBacktPopupYesButton.click();
		test_steps.add("Click Yes Button");
		reslogger.info("Click  Yes Button");
		verifySpinerLoading(driver);
	}

	public void verifyCheckInAllButton(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_CheckInAllButton, driver);
		assertTrue(res.CP_Reservation_CheckInAllButton.isDisplayed(), "Failed: To verify Check In All Button");
		test_steps.add("Verified  <b>Check In All </b> Button");
		reslogger.info("Verified Check IN All  Button");
	}

	public void verifyStayInfoCheckINButtonForMRB(WebDriver driver, ArrayList<String> test_steps, String RoomClassName)
			throws InterruptedException {
		String path = "//div[contains(@data-bind,'ReservationStatusLookup')]/div//div[contains(@class,'ir-roomInfo')]//span[contains(text(),'"
				+ RoomClassName + "')]"
				+ "/ancestor::div/div[contains(@class,'detailsbox')]/following-sibling::div//button[contains(text(),'Check In')]";
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		assertTrue(element.isDisplayed(), "Failed: To verify Stay Info Check In Button");
		test_steps.add(" Stay Info Check In  Button is Displayed For Room Class <b>" + RoomClassName + "</b>");
		reslogger.info("Stay Info Check In  Button is Displayed For Room Class: " + RoomClassName);

	}

	public void verifyStayInfoCheckOutButtonForMRB(WebDriver driver, ArrayList<String> test_steps, String RoomClassName)
			throws InterruptedException {
		Wait.wait10Second();
		String path = "//div[contains(@data-bind,'ReservationStatusLookup')]/div//div[contains(@class,'ir-roomInfo')]//span[contains(text(),'"
				+ RoomClassName + "')]"
				+ "/ancestor::div/div[contains(@class,'detailsbox')]/following-sibling::div//button[contains(text(),'Check Out')]";
		WebElement element = driver.findElement(By.xpath(path));
		Wait.WaitForElement(driver, path);
		Utility.ScrollToElement(element, driver);
		assertTrue(element.isDisplayed(), "Failed: To verify Stay Info Check Out Button");
		test_steps.add(" Stay Info Check Out  Button is Displayed For Room Class <b>" + RoomClassName + "</b>");
		reslogger.info("Stay Info Check Out  Button is Displayed For Room Class: " + RoomClassName);

	}

	public void clickStayInforRollBackButton(WebDriver driver, ArrayList<String> test_steps, String RoomClassName)
			throws InterruptedException {
		String path = "//div[contains(@data-bind,'ReservationStatusLookup')]/div//div[contains(@class,'ir-roomInfo')]//span[contains(text(),'"
				+ RoomClassName + "')]"
				+ "/ancestor::div/div[contains(@class,'detailsbox')]/following-sibling::div//button[contains(text(),'Roll Back')]";
		WebElement element = driver.findElement(By.xpath(path));
		Wait.WaitForElement(driver, path);
		Utility.ScrollToElement(element, driver);
		element.click();
		path = "//div[contains(text(),'Are you sure you want to re-open this reservation?')]/following-sibling::div//button[text()='Yes']";
		Wait.WaitForElement(driver, path);
		WebElement confirmButton = driver.findElement(By.xpath(path));
		confirmButton.click();

		test_steps.add("Click Stay Info-Roll Back Button For Room Class <b>" + RoomClassName + "</b>");
		reslogger.info("Click Stay Info-Roll Back Button For Room Class: " + RoomClassName);

	}

	public void verifyHistoryTabDescriptionForRollBack(WebDriver driver, ArrayList<String> test_steps) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_HistoryTab_RollBackDesc);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_HistoryTab_RollBackDesc, driver);
		// Verified History Tab No Show Entry
		assertTrue(res.CP_Reservation_HistoryTab_RollBackDesc.isDisplayed(), "Failed: To verify History Tab ");
		test_steps.add(" 'History Tab' Verified : <b> Rolled back this reservation to Reserved</b>");
		reslogger.info("'History Tab' Verified : Rolled back this reservation to Reserved");

	}

	public void addResonOnCancelModelPopup(WebDriver driver, ArrayList<String> test_steps, String reason)
			throws InterruptedException {
		verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CancelReservation_Reason);
		Utility.ScrollToElement(res.CancelReservation_Reason, driver);
		res.CancelReservation_Reason.clear();
		test_steps.add("Clear Reason");
		reslogger.info("Clear Reason");
		res.CancelReservation_Reason.sendKeys(reason);
		test_steps.add("Input Reason: <b>" + reason + " </b>");
		reslogger.info("Input Reason: " + reason);

	}

	public String CompleteCancelProcess(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait10Second();
		String buttonName = null;
		if (Utility.isElementPresent(driver, By.xpath(OR_Reservation.ConfirmedNoShowButton))
				&& res.CP_Reservation_ConfirmButton.isDisplayed()) {
			Utility.ScrollToElement(res.CP_Reservation_ConfirmButton, driver);
			buttonName = res.CP_Reservation_ConfirmButton.getText();
			res.CP_Reservation_ConfirmButton.sendKeys(Keys.ENTER);
			Utility.clickThroughJavaScript(driver, res.CP_Reservation_ConfirmButton);
			test_steps.add("Clicking on  CONFIRM CANCELLATION Button");
			reslogger.info("Clicking on CONFIRM  CANCELLATION  Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);

		} else if (Utility.isElementPresent(driver, By.xpath(OR_Reservation.ProceedToPaymentButton))
				&& res.ProceedToPaymentButton.isDisplayed()) {
			Utility.ScrollToElement(res.ProceedToPaymentButton, driver);
			buttonName = res.ProceedToPaymentButton.getText();
			res.ProceedToPaymentButton.sendKeys(Keys.ENTER);
			Utility.clickThroughJavaScript(driver, res.ProceedToPaymentButton);
			test_steps.add("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
			reslogger.info("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);

		}

		return buttonName;
	}

	public String CompleteNoShowProcess(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait10Second();
		String buttonName = null;
		// Wait till pop model is not displayed

		if (res.CP_Reservation_ConfirmButton.isDisplayed()) {
			Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ConfirmButton, driver);
			Utility.ScrollToElement(res.CP_Reservation_ConfirmButton, driver);
			buttonName = res.CP_Reservation_ConfirmButton.getText();
			res.CP_Reservation_ConfirmButton.click();
			test_steps.add("Click on Confirm No Show Button ");
			reslogger.info("Click on Confirm No Show Button ");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
			Wait.explicit_wait_absenceofelement(loading, driver);

		} else if (res.ProceedToPaymentButton.isDisplayed()) {
			Wait.explicit_wait_visibilityof_webelement(res.ProceedToPaymentButton, driver);
			Utility.ScrollToElement(res.ProceedToPaymentButton, driver);
			buttonName = res.ProceedToPaymentButton.getText();
			res.ProceedToPaymentButton.click();
			test_steps.add("Click on Proceed To No Show Payment Button ");
			reslogger.info("Click on Proceed To No Show Payment Button ");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
			Wait.explicit_wait_absenceofelement(loading, driver);

		}

		return buttonName;
	}

	public void clickOnAddARoomButton(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddRoom);
		res.CP_NewReservation_AddRoom.click();
		test_steps.add("Clicking on add room");

	}

	public void clickOnSplitResButton(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementByXpath(driver, OR_Reservation.CP_NewReservation_SplitReservation);
		res.CP_NewReservation_SplitReservation.click();
		test_steps.add("Clicking on split reservation");
		reslogger.info("Clicking on split reservation");

	}

	public String getTripTotal_Header(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.tripTotalAmountAtTop.getText());

	}

	public String getBalance_Header(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.tripBalanceAmountAtTop.getText());
	}

	public String getRoomCharge_TripSummary(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.TripSummary_RoomCharge.getText());

	}

	public String getFeeFromTripSummary(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		// getFee
		return Utility.convertDollarToNormalAmount(driver, res.getFee.getText());
	}

	public String getIncidentals_TripSummary(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.TripSummary_Incidentals.getText());

	}

	public String getTaxesAndServiceCharges_TripSummary(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.TripSummary_TaxesAndServiceCharges.getText());

	}

	public String getTripTotal_TripSummary(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.TripSummary_TripTotal.getText());

	}

	public String getPayment_TripSummary(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.TripSummary_Payment.getText());

	}

	public String getBalance_TripSummary(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.TripSummary_Balance.getText());
	}

	public String getBalance_Amount(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String tripBalance = res.TripSummary_Balance.getText().replace("$ ", "").trim();
		return tripBalance;
	}

	public void verifyTripSummeryAmount(WebDriver driver, ArrayList<String> test_steps, ArrayList<String> baseAmount,
			ArrayList<String> totalNights, String total, String payment, String policyFor) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String tripRoomCharge = res.TripSummary_RoomCharge.getText().replace("$ ", "");
		String tripTotal = res.TripSummary_TripTotal.getText().replace("$ ", "");
		String tripPaid = res.TripSummary_Payment.getText().replace("$ ", "");
		String tripBalance = res.TripSummary_Balance.getText().replace("$ ", "");
		String tripTaxes = res.TripSummary_TaxesAndServiceCharges.getText().replace("$ ", "");
		double tripRoomCharge2 = 0.00;
		for (int i = 0; i < baseAmount.size(); i++) {

			tripRoomCharge2 = tripRoomCharge2
					+ Double.parseDouble(baseAmount.get(i)) * Double.parseDouble(totalNights.get(i));
		}
		String tripRoomChargeExp = df.format(tripRoomCharge2);

		double tripTaxes2 = Double.parseDouble(total) - tripRoomCharge2;
		String tripTaxesExp = df.format(tripTaxes2);
		Utility.verifyText(tripRoomCharge, tripRoomChargeExp, "Room charges at trip summary", test_steps, reslogger);

		String expBalanceDisplayed = null;
		String expPaidDisplayed = null;

		if (policyFor.equalsIgnoreCase("Capture")) {
			double expBalance = ((Double.parseDouble(total)) - (Double.parseDouble(payment)));
			expBalanceDisplayed = df.format(expBalance);
			expPaidDisplayed = tripPaid;
		} else if (policyFor.equalsIgnoreCase("Authorize")) {
			expBalanceDisplayed = total;
			expPaidDisplayed = "0.00";
		}
		Utility.verifyText(tripTotal, total, "Trip total at trip summary", test_steps, reslogger);
		Utility.verifyText(tripBalance, expBalanceDisplayed, "Balance at trip summary", test_steps, reslogger);
		Utility.verifyText(tripPaid, expPaidDisplayed, "Paid amount at trip summary", test_steps, reslogger);
	}

	public void verifyNotesDetails(ArrayList<String> test_steps, List<WebElement> element, String expString,
			String type) {
		int i = 1;
		for (WebElement webElement : element) {
			String actString = webElement.getText();
			assertEquals(actString, expString, "Failed - Verify " + type + " of note");
			if (element.size() > 1) {
				test_steps.add("Successfully verified " + type + " of note as <b>" + actString + "</b> at row " + i);
				i++;
			} else {
				test_steps.add("Successfully verified " + type + " of note as <b>" + actString + "</b>");
			}
		}
	}

	public void verifyNoteRoomsDetails(WebDriver driver, ArrayList<String> test_steps, String noteType,
			ArrayList<String> abbrivations, ArrayList<String> roomNumbers) {
		List<WebElement> noteRoomsDisplayed = driver.findElements(
				By.xpath("//td[text()='" + noteType + "']/..//td[contains(@data-bind,'text: roomClassAbbrv')]"));
		for (int i = 0; i < noteRoomsDisplayed.size(); i++) {
			int j = i + 1;
			String actString = noteRoomsDisplayed.get(i).getText();
			String expString = abbrivations.get(i) + ": " + roomNumbers.get(i);
			assertEquals(actString, expString, "Failed - Verify room of cancel note");
			test_steps.add("Successfully verified room of note as <b>" + actString + "</b> at row " + j);
		}
	}

	public void verifyNotesDetails(WebDriver driver, ArrayList<String> test_steps, String noteType, String noteSubject,
			String noteDesc, String updatedBy) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.notesTabHeader), driver);
			Utility.ScrollToElement(res.notesTabHeader, driver);
			List<WebElement> noteTypesDisplayed = driver.findElements(
					By.xpath("//td[text()='" + noteSubject + "']/..//td[contains(@data-bind,'text: type')]"));
			List<WebElement> noteDescriptionsDisplayed = driver.findElements(
					By.xpath("//td[text()='" + noteSubject + "']/..//td[contains(@data-bind,'text: details')]"));
			List<WebElement> noteSubjectsDisplayed = driver.findElements(
					By.xpath("//td[text()='" + noteSubject + "']/..//td[contains(@data-bind,'text: subject')]"));
			List<WebElement> noteUpdatedBysDisplayed = driver.findElements(
					By.xpath("//td[text()='" + noteSubject + "']/..//td[contains(@data-bind,'text: updatedBy')]"));
			List<WebElement> noteUpdatedOnsDisplayed = driver.findElements(By.xpath(
					"//td[text()='" + noteSubject + "']/..//td[contains(@data-bind,'text: moment(updatedOn())')]"));
			if (noteType.equalsIgnoreCase("No Show")) {
				noteType = "Internal";
			}
			if (Utility.validateString(noteType)) {
				verifyNotesDetails(test_steps, noteTypesDisplayed, noteType, "type");
			}
			if (Utility.validateString(noteDesc)) {
				verifyNotesDetails(test_steps, noteDescriptionsDisplayed, noteDesc, "description");
			}
			if (Utility.validateString(updatedBy)) {
				verifyNotesDetails(test_steps, noteUpdatedBysDisplayed, updatedBy, "updated by");
			}
			if (Utility.validateString(noteSubject)) {
				verifyNotesDetails(test_steps, noteSubjectsDisplayed, noteSubject, "subject");
			}
			int i = 1;
			for (WebElement webElement : noteUpdatedOnsDisplayed) {
				String actString = webElement.getText();
				actString = Utility.parseDate(actString, "MM/dd/ yy HH:mm aa", "MM/dd/yyyy");
				String expString = Utility.getCurrentDate("MM/dd/yyyy");
				// assertEquals(actString, expString, "Failed - Verify note
				// updated on date of cancel note");
				if (noteUpdatedOnsDisplayed.size() > 1) {
					test_steps.add("Successfully verified note updated on date as <b>" + actString + "</b> at row " + i);
					i++;
				} else {
					test_steps.add("Successfully verified note updated on date as <b>" + actString + "</b> ");
				}
			}
		} catch (Exception e) {
			reslogger.info(e);
		}
	}

	public boolean getPaymentWindow(WebDriver driver) {
		boolean isExist = false;
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		isExist = Utility.isElementPresent(driver, By.xpath(OR_Reservation.NoShow_Cancel_CheckIn_CheckOut_Title));
		return isExist;
	}

	public ArrayList<String> getAssignedRoomNumbers(WebDriver driver, ArrayList<String> test_steps,
			ArrayList<String> roomClasses) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> roomNumbers = new ArrayList<>();
		try {
			if (roomClasses.size() == 1) {
				String xpath = "//div[@data-bind='with: roomSearch.SelectedRoomClass']//div[contains(text(),'"
						+ roomClasses.get(0) + "')]";
				Wait.waitForElementToBeVisibile(By.xpath(xpath), driver);
				String roomNumber = driver.findElement(By.xpath(xpath)).getText().split(": ")[1];
				roomNumbers.add(roomNumber);
			} else if (roomClasses.size() > 1) {
				for (int i = 0; i < roomClasses.size(); i++) {
					String xpath = "(//div[@data-bind='click: onToggleRoomInfo']//span[contains(text(),'"
							+ roomClasses.get(i) + "')])[2]";
					reslogger.info(xpath);
					reslogger.info(roomClasses.get(i));
					Wait.waitForElementToBeVisibile(By.xpath(xpath), driver);
					String roomNumber = driver.findElement(By.xpath(xpath)).getText().split(": ")[1];
					roomNumbers.add(roomNumber);
				}
			}
		} catch (Exception e) {
			reslogger.info(e);
		}
		return roomNumbers;

	}

	public String getPolicyfromDetailTab(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		String policyName = null;
		String path = "//div[@aria-expanded='true']//span[@class='filter-option pull-left']";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		policyName = element.getText();
		return policyName;
	}

	public void setAsMainPayment(WebDriver driver, ArrayList<String> test_steps, String PaymentType,
			String PaymentTypeTwo, Date Date, String PolicyType) throws ParseException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		String path = "//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + PaymentType + "']";
		WebElement PaymentMethodElement = driver.findElement(By.xpath(path));
		PaymentMethodElement.click();
		test_steps.add("Click Payment Method");
		reslogger.info("Click CPayment Method");
		String options = "//paymentmethod//div[contains(@class,'open')]/ul//li/a//span[@class='text'][contains(text(),'"
				+ PaymentTypeTwo + "')]";
		WebElement PaymentMethodOptions = driver.findElement(By.xpath(options));
		PaymentMethodOptions.click();
		test_steps.add("Select Payment Option :<b> " + PaymentTypeTwo + "<b>");
		reslogger.info("Click Payment Option: " + PaymentTypeTwo);
		if (PolicyType.equals("Cancel") || PolicyType.equals("No Show")) {
			CPReservationPage.NoShow_Cancel_Checkout_Date_CalanderIcon.click();
			test_steps.add("Click Calander Icon");
			reslogger.info("Click Calander Icon");
		} else if (PolicyType.equals("Check In")) {
			CPReservationPage.CheckInPaymentPopup_Date_CalanderIcon.click();
			test_steps.add("Click Calander Icon");
			reslogger.info("Click Calander Icon");
		} else if (PolicyType.equals("Check Out")) {
			CPReservationPage.CheckOutPaymentPopup_Date_CalanderIcon.click();
			test_steps.add("Click Calander Icon");
			reslogger.info("Click Calander Icon");
		}

		int CD = Date.getDate();
		String Day = String.valueOf(CD);
		reslogger.info("Day: " + Day);

		SelectDate(driver, Date, Day);
		test_steps.add("Select Date: <b>" + Date + "</b>");
		reslogger.info("Select Date: " + Date);
		CPReservationPage.CP_Reservation_NoShowPaymentPopup_SetMainPaymentCheckBox.click();
		test_steps.add("Click Set As Main Payment Method Check Box");
		reslogger.info("Click Set As Main Payment Method Check Box");

	}

	public void verifyFolioLineItem(WebDriver driver, ArrayList<String> test_steps, Date Date, String Category,
			String Desc, String Amount) throws InterruptedException {
		reslogger.info("******************* Verify Folio Details **********************");

		int CD = Date.getDate();
		String Day = String.valueOf(CD);
		reslogger.info("Day: " + Day);

		Elements_CPReservation res = new Elements_CPReservation(driver);
		String LineItemSetMainPaymentPath = "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-date']/span[contains(text(),'"
				+ Day + "')]" + "/../following-sibling::td[@class='lineitem-category']/span[contains(text(),'"
				+ Category + "')]" + "/../following-sibling::td[@class='lineitem-description']//a[contains(text(),'"
				+ Desc + "')]" + "/../following-sibling::td[@class='lineitem-amount']/span[contains(text(),'" + Amount
				+ "')]";
		Wait.WaitForElement(driver, LineItemSetMainPaymentPath);
		WebElement SetLineItemElement = driver.findElement(By.xpath(LineItemSetMainPaymentPath));
		// Verified No Show Fee line item
		assertTrue(SetLineItemElement.isDisplayed(), "Failed: To Verify Line Item");
		test_steps.add(" Verified Date:<b>  " + Date + "</b>");
		reslogger.info("Verified  Date: " + Date);
		test_steps.add(" Verified  Category:<b>  " + Category + "</b>");
		reslogger.info(" Verified  Category: " + Category);
		test_steps.add("Verified  Description:<b>  " + Desc + "</b>");
		reslogger.info(" Verified Description: " + Desc);
		test_steps.add(" Verified Amount:<b>  " + Amount + "</b>");
		reslogger.info(" Verified  Amount: " + Amount);

	}

	public boolean getNoShowHeaderWindow(WebDriver driver) {
		String path = "//h4[contains(@data-bind,'PaymentPopupHeaderText()')][contains(text(),'No Show Payment')]";
		boolean value = Utility.isElementPresent(driver, By.xpath(path));
		return value;
	}

	public boolean getCancelReservationHeaderWindow(WebDriver driver) {
		String path = "//h4[contains(@data-bind,'PaymentPopupHeaderText()')][contains(text(),'Cancellation Payment')]";
		boolean value = Utility.isElementPresent(driver, By.xpath(path));
		return value;
	}

	public void verifyCancelledStatus(WebDriver driver, String resStatus) {
		String path = "//span[@data-bind='text:reservationViewStatuses.titleLineStatus']";
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		String status = driver.findElement(By.xpath(path)).getText();
		assertEquals(status, resStatus);
	}

	public void clickSendEmailButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.GUESTINFO_SENDEMAIL_BUTTON, driver);
//		res.GUESTINFO_SENDEMAIL_BUTTON.click();
		Utility.clickThroughJavaScript(driver, res.GUESTINFO_SENDEMAIL_BUTTON);
		Wait.WaitForElement(driver, OR_Reservation.GUESTINFO_SENDEMAIL_HEADERTITLE);
		assertEquals(res.GUESTINFO_SENDEMAIL_HEADERTITLE.getText(), "Send Mail");
		test_steps.add("Send Email Popup Opened With Title: " + res.GUESTINFO_SENDEMAIL_HEADERTITLE.getText());
		reslogger.info("Send Email Popup Opened With Title: " + res.GUESTINFO_SENDEMAIL_HEADERTITLE.getText());

	}

	public void SendEmail(WebDriver driver, String emailID, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		res.GUESTINFO_SENDEMAIL_EMAILID.clear();
		res.GUESTINFO_SENDEMAIL_EMAILID.sendKeys(emailID);
		test_steps.add("Email ID Added/Updated: " + emailID);
		reslogger.info("Email ID Added/Updated: " + emailID);
		Utility.ScrollToElement(res.SENDMAIL_POPUP_SEND_BUTTON, driver);
		try {
			Wait.explicit_wait_elementToBeClickable(res.SENDMAIL_POPUP_SEND_BUTTON, driver);
			res.SENDMAIL_POPUP_SEND_BUTTON.click();
		} catch (Exception e) {
			JavascriptExecutor js = (JavascriptExecutor) driver;
			js.executeScript("arguments[0].click()", res.SENDMAIL_POPUP_SEND_BUTTON);
		}
		test_steps.add("Send Email Button Clicked");
		reslogger.info("Send Email Button Clicked");
		Wait.wait2Second();
		assertEquals(res.GUESTINFO_SENDEMAIL_HEADERTITLE.isDisplayed(), false);
		test_steps.add("Send Email Popup Closed");
		reslogger.info("Send Email Popup Closed");

	}

	public String getEmailSubject(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String emailSubject = null;
		emailSubject = res.GUESTINFO_SENDEMAIL_SUBJECT.getAttribute("value");
		reslogger.info(" Subject: " + emailSubject);
		return emailSubject;

	}

	public String getEmailDescription(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String emailDescription = null;
		driver.switchTo().frame(driver.findElement(By.className("cke_wysiwyg_frame")));
		try {
			emailDescription = res.GUESTINFO_SENDEMAIL_DESCRIPTION.getText();
		} catch (Exception e) {

			emailDescription = "";
		}
		reslogger.info(" emailDescription: " + emailDescription);
		driver.switchTo().defaultContent();
		return emailDescription;

	}

	public ArrayList<String> verifyAutoGeneratedNotes(WebDriver driver, String Type, String Subject, String Description,
			String Date, String Assignee) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		Elements_Reservation ReservationPage = new Elements_Reservation(driver);

		WebElement NotesType = driver
				.findElement(By.xpath("(//div[text()='Notes']/parent::div//td[text()='" + Type + "'])[1]"));
		Utility.ScrollToElement(NotesType, driver);
		assertEquals(NotesType.getText(), Type, "Failed : NotesType missmatched");
		reslogger.info("Verified Notes Type :" + Type);
		test_steps.add("Verified Notes Type :" + Type);

		WebElement NotesSubject = driver.findElement(
				By.xpath("(//td[contains(@data-bind,'text: subject') and contains(text(),'" + Subject + "')])[1]"));
		assertEquals(NotesSubject.getText().contains(Subject), true, "Failed : Detail missmatched");
		reslogger.info("Verified Notes Subject :" + Subject);

		test_steps.add("Verified Notes Subject :" + Subject);
		WebElement NotesDesctiption = null;
		int tableRowSize = driver.findElements(By.xpath("//tbody[contains(@data-bind,'foreach: notes')]//tr")).size();
		reslogger.info("Size is :" + tableRowSize);
		NotesDesctiption = driver.findElement(By.xpath("(//tbody[contains(@data-bind,'foreach: notes')]//tr)["
				+ tableRowSize + "]//td[contains(@data-bind,'text: de')]"));

		assertEquals(NotesDesctiption.getText().replaceAll(" ", ""), Description.replaceAll(" ", ""),
				"Failed : Description missmatched");
		reslogger.info("Verified Notes Description :" + Description);
		test_steps.add("Verified Notes Description :" + Description);
		WebElement noteAssigne = driver.findElement(By.xpath("(//tbody[contains(@data-bind,'foreach: notes')]//tr)["
				+ tableRowSize + "]//td[text()='" + Assignee + "']"));
		assertEquals(noteAssigne.getText(), Assignee, "Failed : Assignee missmatched");
		reslogger.info("Verified Notes Assignee :" + Assignee);
		test_steps.add("Verified Notes Assignee :" + Assignee);

		WebElement noteDate = driver.findElement(By.xpath("(//tbody[contains(@data-bind,'foreach: notes')]//tr)["
				+ tableRowSize + "]//td[contains(text(),'" + Date + "')]"));
		assertEquals(noteDate.getText().contains(Date), true, "Failed : Date  missmatched");
		reslogger.info("Verified Notes Date :" + Date);
		test_steps.add("Verified Notes Date :" + Date);
		return test_steps;
	}

	// Created By Aqsa : clickGuestInfoEditDetailsButton
	public ArrayList<String> clickGuestInfoEditDetailsButton(WebDriver driver, ArrayList<String> steps)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(element.GUESTINFO_EDITBUTTON, driver);
		Wait.explicit_wait_elementToBeClickable(element.GUESTINFO_EDITBUTTON, driver);
		Utility.ScrollToElement(element.GUESTINFO_EDITBUTTON, driver);
		element.GUESTINFO_EDITBUTTON.click();
		reslogger.info("Click Guest Info Edit Button");
		steps.add("Click Guest Info Edit Button");
		return steps;
	}

	// Created By Aqsa : clickGuestInfoSaveDetailsButton
	public ArrayList<String> clickGuestInfoSaveDetailsButton(WebDriver driver, ArrayList<String> steps)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(element.GUESTINFO_SAVEBUTTON, driver);
//		Wait.explicit_wait_elementToBeClickable(element.GUESTINFO_SAVEBUTTON, driver);
		Utility.ScrollToElement(element.GUESTINFO_SAVEBUTTON, driver);
		Utility.customAssert(element.GUESTINFO_SAVEBUTTON.isEnabled() + "", "true", true,
				"Successfully Verified Guest info Save Now Button", "Failed To Verify Guest info Save Now Button", true,
				steps);
		element.GUESTINFO_SAVEBUTTON.click();
		reslogger.info("Click Guest Info Save Button");
		steps.add("Click Guest Info Save Button");
		verifySpinerLoading(driver);
		return steps;
	}

	// Created By Aqsa : attachGuestProfile
	public ArrayList<String> attachGuestProfile(WebDriver driver, ArrayList<String> steps, String GuestProfileName,
			String ReplaceTheGuestInfo) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(element.GUESTINFO_GUESTPROFILE_INPUTFIELD, driver);
		Utility.ScrollToElement(element.GUESTINFO_GUESTPROFILE_INPUTFIELD, driver);
		element.GUESTINFO_GUESTPROFILE_INPUTFIELD.sendKeys(GuestProfileName);
		// search GuestProfile
		Wait.wait3Second();
		WebElement searchResult = driver
				.findElement(By.xpath("(//*[contains (text(), '" + GuestProfileName + "')])[1]"));
		Wait.wait2Second();
		Wait.explicit_wait_visibilityof_webelement(searchResult, driver);
		searchResult.click();
		Wait.wait2Second();
		Wait.WaitForElement(driver, OR_Reservation.GUESTINFO_GUESTPROFILE_CONFIRMATIONPOPUP);
		/*
		 * assertEquals(element.GUESTINFO_GUESTPROFILE_CONFIRMATIONPOPUP.getText(),
		 * "Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation."
		 * ); reslogger.
		 * info("Guest Profile Attachment Confirmation Popup Opened With Text: " +
		 * element.GUESTINFO_GUESTPROFILE_CONFIRMATIONPOPUP.getText());
		 */
		/*
		 * steps.add("Guest Profile Attachment Confirmation Popup Opened With Text: " +
		 * element.GUESTINFO_GUESTPROFILE_CONFIRMATIONPOPUP.getText());
		 */
		if (ReplaceTheGuestInfo.equalsIgnoreCase("Yes")) {
			element.GUESTINFO_GUESTPROFILE_CONFIRMATIONPOPUP_YESBUTTON.click();
			reslogger.info("Click Change Guest Info Confirmation Yes Button");
			steps.add("Click Change Guest Info Confirmation  Yes Button");
		} else if (ReplaceTheGuestInfo.equalsIgnoreCase("No")) {
			element.GUESTINFO_GUESTPROFILE_CONFIRMATIONPOPUP_NOBUTTON.click();
			reslogger.info("Click Change Guest Info Confirmation No Button");
			steps.add("Click Change Guest Info Confirmation No Button");
		} else {
			element.GUESTINFO_GUESTPROFILE_CONFIRMATIONPOPUP_CLOSEBUTTON.click();
			reslogger.info("Click Change Guest Info Confirmation Close Button");
			steps.add("Click Change Guest Info Confirmation Close Button");
		}

		return steps;
	}

	public ArrayList<String> verfifyGuestProfileAttachedInfo(WebDriver driver, String guestName, String contactName,
			String addressLine1, String addressLine2, String addressLine3, String email, String phone,
			String alternativePhone, String city, String country, String state, String postalCode, String marketSegment,
			String referral) throws InterruptedException {
		ArrayList<String> test_steps = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.explicit_wait_visibilityof_webelement_120(res.GuestName_GuestInfo, driver);
		String foundGuestName = res.GuestName_GuestInfo.getText();
		assertEquals(foundGuestName, guestName, "Failed To Verify Guest Name");

		reslogger.info("Successfully Verified Guest Name : " + foundGuestName);
		test_steps.add("Successfully Verified Guest Name : " + foundGuestName);

		Wait.explicit_wait_visibilityof_webelement_120(res.ContactName_GuestInfo, driver);
		String foundContactName = res.ContactName_GuestInfo.getText();
		assertEquals(foundContactName, contactName, "Failed To Verify ContactName");
		reslogger.info("Successfully Verified ContactName : " + foundContactName);
		test_steps.add("Successfully Verified ContactName : " + foundContactName);

		String foundAddressLine1 = res.AddressLine1_GuestInfo.getText();
		assertEquals(foundAddressLine1, addressLine1, "Failed To Verify Address Line1");
		reslogger.info("Successfully Verified Address Line1 : " + foundAddressLine1);
		test_steps.add("Successfully Verified Address Line1 : " + foundAddressLine1);

		String foundAddressLine2 = res.AddressLine2_GuestInfo.getText();
		assertEquals(foundAddressLine2, addressLine2, "Failed To Verify Address Line2");
		reslogger.info("Successfully Verified Address Line2 : " + foundAddressLine2);
		test_steps.add("Successfully Verified Address Line2 : " + foundAddressLine2);

		String foundAddressLine3 = res.AddressLine3_GuestInfo.getText();
		assertEquals(foundAddressLine3, addressLine3, "Failed To Verify Address Line3");
		reslogger.info("Successfully Verified Address Line3 : " + foundAddressLine3);
		test_steps.add("Successfully Verified Address Line3 : " + foundAddressLine3);

		String foundCity = res.City_GuestInfo.getText();
		assertEquals(foundCity, city, "Failed To Verify City");
		reslogger.info("Successfully Verified City : " + foundCity);
		test_steps.add("Successfully Verified City : " + foundCity);

		String foundCountry = res.Contry_GuestInfo.getText();
		assertEquals(foundCountry, country, "Failed To Verify Country");
		reslogger.info("Successfully Verified Country : " + foundCountry);
		test_steps.add("Successfully Verified Country : " + foundCountry);

		String foundState = res.State_GuestInfo.getText();
		assertEquals(foundState, state, "Failed To Verify State");
		reslogger.info("Successfully Verified State : " + foundState);
		test_steps.add("Successfully Verified State : " + foundState);

		String foundPostalCode = res.PostalCode_GuestInfo.getText();
		assertEquals(foundPostalCode, postalCode, "Failed To Verify PostalCode");
		reslogger.info("Successfully Verified PostalCode : " + foundPostalCode);
		test_steps.add("Successfully Verified PostalCode : " + foundPostalCode);

		String foundEmail = res.Email_GuestInfo.getText();
		assertEquals(foundEmail, email, "Failed To Verify Email");
		reslogger.info("Successfully Verified Email : " + foundEmail);
		test_steps.add("Successfully Verified Email : " + foundEmail);

		String foundphoneNo = res.PhoneNo_GuestInfo.getText();
		foundphoneNo = foundphoneNo.replace("-", "").trim();
		foundphoneNo = foundphoneNo.replace("(", "");
		foundphoneNo = foundphoneNo.replace(")", "");
		foundphoneNo = foundphoneNo.replace(" ", "");
		assertEquals(foundphoneNo.trim(), "1" + phone, "Failed To Verify phoneNo");
		reslogger.info("Successfully Verified PhoneNo : " + foundphoneNo);
		test_steps.add("Successfully Verified PhoneNo : " + foundphoneNo);

		String foundalternativephoneNo = res.AlternativePhoneNo_GuestInfo.getText();
		foundalternativephoneNo = foundalternativephoneNo.replace("-", "").trim();
		foundalternativephoneNo = foundalternativephoneNo.replace("(", "");
		foundalternativephoneNo = foundalternativephoneNo.replace(")", "");
		foundalternativephoneNo = foundalternativephoneNo.replace(" ", "");
		assertEquals(foundalternativephoneNo.trim(), "1" + alternativePhone, "Failed To Verify phoneNo");
		reslogger.info("Successfully Verified Alternative PhoneNo : " + foundalternativephoneNo);
		test_steps.add("Successfully Verified Alternative PhoneNo : " + foundalternativephoneNo);

		Utility.ScrollToElement(res.MarketSegment_GuestInfo, driver);
		String foundMarketSegment = res.MarketSegment_GuestInfo.getText();
		assertEquals(foundMarketSegment, marketSegment, "Failed To Verify MarketSegment");
		reslogger.info("Successfully Verified MarketSegment : " + foundMarketSegment);
		test_steps.add("Successfully Verified MarketSegment : " + foundMarketSegment);

		Utility.ScrollToElement(res.Referral_GuestInfo, driver);
		String foundReferral = res.Referral_GuestInfo.getText();
		assertEquals(foundReferral, referral, "Failed To Verify Referral");
		reslogger.info("Successfully Verified Referral : " + foundReferral);
		test_steps.add("Successfully Verified Referral : " + foundReferral);

		return test_steps;

	}

	public void closeFirstOpenedReservationUnSavedData(WebDriver driver, ArrayList test_steps)
			throws InterruptedException {
		String close = "(//ul[@class='sec_nav']//li[5]//i)[2]";
		try {
			// Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(close)),
			// driver);
			Wait.WaitForElement(driver, close);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(close)), driver);
			Utility.ScrollToElement(driver.findElement(By.xpath(close)), driver);
			driver.findElement(By.xpath(close)).click();
		} catch (Exception e) {
			Wait.WaitForElement(driver, close);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(close)), driver);
			Utility.ScrollToElement(driver.findElement(By.xpath(close)), driver);
			Wait.wait2Second();
			driver.findElement(By.xpath(close)).click();
		}
		if (driver.findElement(By.xpath("//div[@id='alertForTab']//h4[.='You have Unsaved Data!']")).isDisplayed()) {
			test_steps.add(
					"Unsaved data model popup is displayed while closing the reservation and clicking on YES button");
			reslogger.info(
					"Unsaved data model popup is displayed while closing the reservation and clicking on YES button");
			driver.findElement(By.xpath("//div[@id='alertForTab']//button[.='Yes']")).click();
		}
		test_steps.add("Closed the reservation");
		reslogger.info("Closed the reservation");
	}

	public String getTotalIncidentals(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait10Second();
		String IncidentalTotal = res.getTotalIncidentalsAmount.getText();

		return IncidentalTotal;
	}

	public void verifyLedgerAccountnotPresentInTaxDetailPopup(WebDriver driver, ArrayList test_steps,
			ArrayList<String> existingTaxDescription, String PackageCategory) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String taxLedgeraccount = "Room Charge";

		int roomChargesFolioCount = getRoomChargeFolioItemCountInRes(driver);
		for (int i = 1; i <= roomChargesFolioCount; i++) {
			String xpath = "(//tbody[starts-with(@data-bind,'getElement: ComputedFolioItemsElement')]/tr/td/span[text()='"
					+ taxLedgeraccount + "']/../following-sibling::td/a)[" + i + "]";
			// clickroomChargeFolioItems
			Wait.waitUntilPresenceOfElementLocated(xpath, driver);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(xpath)), driver);
			WebElement ele = driver.findElement(By.xpath(xpath));
			try {
				JavascriptExecutor js = (JavascriptExecutor) driver;
				js.executeScript("arguments[0].click()", ele);

			} catch (Exception e1) {
				ele.click();
			}
			test_steps.add("Click at folio line item: " + i + " of" + " " + taxLedgeraccount);
			Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);
			Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ItemDetailOnFolioPopup, driver);
			boolean ledgerflag = true;
			for (int k = 0; k < existingTaxDescription.size(); k++) {

				try {
					ledgerflag = IsTaxApplicableOnLedgerAccount(driver, test_steps,
							existingTaxDescription.get(k).trim(), PackageCategory);
				} catch (Exception e) {
					// TODO Auto-generated catch block
					reslogger.info(e);
				}
				assertEquals(false, ledgerflag);

				test_steps.add("<b>" + PackageCategory + "<b>" + "not associated to the Tax: " + "<b>"
						+ existingTaxDescription.get(k) + "</b>");
				cancelTaxItemDetails(driver);
				test_steps.add("Cancel tax item details popup");
			}
			clickFolioPopupCancel(driver);
			test_steps.add("Close open folio line item");
		}
	}

	public boolean IsTaxApplicableOnLedgerAccount(WebDriver driver, ArrayList<String> test_steps,
			String createdTaxDescriptions, String ledgerAccount) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean flag = false;
		Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ItemDetailOnFolioPopup, driver);

		// String xpath =
		// "(//a[text()='"+createdTaxDescriptions.trim()+"'])[1]/ancestor::td";
		JavascriptExecutor js = (JavascriptExecutor) driver;
		WebElement element = driver.findElement(By.xpath(
				"(//a[text()='" + createdTaxDescriptions.trim() + "'])[1]/ancestor::td/span/following-sibling::a"));
		// js.executeScript("arguments[0].click(true);", element);
		// reslogger.info(xpath);
		// driver.findElement(By.xpath(xpath)).click();
		Wait.explicit_wait_elementToBeClickable(element, driver);
		element.click();
		reslogger.info("Click at description link");

		test_steps.add("Click at tax Description link: " + "<b>" + createdTaxDescriptions + "</b>");
		String xpath1 = "//table[@class='table table-bordered table-striped table-hover table-condensed']/tbody/tr/td/span[text()='"
				+ ledgerAccount.trim() + "']";
		Wait.explicit_wait_10sec(res.taxItemPlaceholderInFolioDetail, driver);
		Wait.waitUntilPresenceOfElementLocated(OR.TaxItemPlaceholderInFolioDetail, driver);
		reslogger.info(xpath1);
		try {
			flag = verifySizeOfLaundryItems(driver, xpath1);
		} catch (Exception e) {
			reslogger.info(e);
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		reslogger.info(flag);
		Wait.wait5Second();
		return flag;

	}

	public boolean verifySizeOfLaundryItems(WebDriver driver, String xpath) {
		boolean laundryExists = false;
		try {
			// String xpath1 = "//table[@class='table table-bordered
			// table-striped table-hover
			// table-condensed']/tbody/tr/td/span[text()='Laundry']";
			laundryExists = driver.findElements(By.xpath(xpath)).size() != 0;
		} catch (Exception e) {
			reslogger.info(e);
			laundryExists = false;
		}
		return laundryExists;
	}

	public void cancelTaxItemDetails(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_10sec(res.taxItemDetailsPopup, driver);
		reslogger.info("cancel");
		res.cancelTaxItemDetailsPopup.click();
	}

	public void verifypackagecharges(WebDriver driver, ArrayList<String> test_steps, double packagerate,
			String PackageCategory) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		// double foliovalue = 0.0;
		double totalIncidentals = 0.0;
		double captureTotalIncidentals = 0.0;
		String mainLedgeraccount = "Room Charge";
		int roomChargesFolioCount = getRoomChargeFolioItemCountInRes(driver);
		for (int i = 1; i <= roomChargesFolioCount; i++) {
			double getincidentalval = 0.0;
			String xpath = "(//tbody[starts-with(@data-bind,'getElement: ComputedFolioItemsElement')]/tr/td/span[text()='"
					+ mainLedgeraccount + "']/../following-sibling::td/a)[" + i + "]";

			// clickroomChargeFolioItems
			driver.findElement(By.xpath(xpath)).click();
			test_steps.add("Click at folio line item: " + i + " of" + " " + PackageCategory.trim());
			Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);

			String xpath1 = "(//span[text()='" + PackageCategory.trim()
					+ "'])[1]/ancestor::td/following-sibling::td/span[starts-with(.,'$')]";
			reslogger.info(xpath1);
			String getincidentalvalue = driver.findElement(By.xpath(xpath1)).getText().replace("$", "").trim();
			getincidentalval = Double.parseDouble(getincidentalvalue);
			assertEquals(packagerate, getincidentalval);
			test_steps.add("Verifying child folio line item package value:" + PackageCategory + " " + "value" + "<b>"
					+ getincidentalval + "</b>");
			totalIncidentals = totalIncidentals + getincidentalval;
			clickFolioPopupCancel(driver);
			test_steps.add("Close open folio line item");

		}
		String capturetotalincidentals = driver
				.findElement(By.xpath("(//span[@class='pamt']/span[starts-with(.,'$')])[2]")).getText().replace("$", "")
				.trim();

		assertEquals(Double.parseDouble(capturetotalincidentals), totalIncidentals);
		test_steps.add("Verifying totalIncidental captured with calculated of each existing folio: " + "<b>"
				+ totalIncidentals + "</b>");
	}

	public void inputReason(WebDriver driver, ArrayList<String> test_steps, String reason) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CancelReservation_Reason);
		res.CancelReservation_Reason.clear();
		res.CancelReservation_Reason.sendKeys(reason);
		test_steps.add("Providing Cancellation Reason as : <b>" + reason + " </b>");
		reslogger.info("Providing Cancellation Reason as : " + reason);
	}

	public void clickProceedToCancelPaymentButton(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ProceedToPaymentButton);
		Utility.ScrollToElement(res.ProceedToPaymentButton, driver);
		res.ProceedToPaymentButton.click();
		test_steps.add("Clicking on '<b>PROCEED TO CANCELLATION PAYMENT</b>' Button");
		reslogger.info("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
	}

	public void clickConfirmCancelButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		// Wait.WaitForElement(driver, OR_Reservation.ConfirmedNoShowButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ConfirmedNoShowButton), driver);
		String buttonText = res.CP_Reservation_ConfirmButton.getText();
		Utility.ScrollToElement(res.CP_Reservation_ConfirmButton, driver);
		res.CP_Reservation_ConfirmButton.click();
		test_steps.add("Clicking on <b>" + buttonText + "</b> Button");
		reslogger.info("Clicking on " + buttonText + " Button");
	}

	public boolean verifyNoShowSuccessFull(WebDriver driver) {

		String path = "//h4[contains(@class,'modal-title')][contains(text(),'No Show Successful')]";
		boolean value = Utility.isElementPresent(driver, By.xpath(path));
		return value;
	}

	public String getAmountFromPaymentVerificationPage(WebDriver driver) throws InterruptedException {
		String amount = null;
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_Amount);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount, driver);
		amount = (String) (((JavascriptExecutor) driver).executeScript("return arguments[0].value",
				CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount));
		reslogger.info(amount);
		double noshowPaymentAmount = Double.valueOf(amount);
		amount = String.format("%.2f", noshowPaymentAmount);
		reslogger.info("Get Amount from Payment Page Is : " + amount);

		return amount;

	}

	public void verifyHistoryDescriptionWithPayment(WebDriver driver, ArrayList<String> test_steps, String amount,
			String Status, String abb, String RoomNo, String PaymentMethod) {
		String FinalRoomNo = null;
		if (RoomNo.contains(":")) {
			String[] room = RoomNo.split(":");
			FinalRoomNo = room[1].trim();
			reslogger.info(" Room No: " + FinalRoomNo);
		} else {
			FinalRoomNo = RoomNo;
		}

		String checkIn = "Made a payment $" + amount.trim() + " using " + PaymentMethod;
		String checkOut = "Captured payment for $" + amount.trim() + " using " + PaymentMethod;
		String path = "//span[contains(text(),'" + checkIn
				+ "')]/ancestor::td/following-sibling::td/span[contains(text(),'" + abb + ": " + FinalRoomNo + "')]";
		String checkOutPath = "//span[contains(text(),'" + checkOut
				+ "')]/ancestor::td/following-sibling::td/span[contains(text(),'" + abb + ": " + FinalRoomNo + "')]";
		if (Status.equals("Check In")) {
			WebElement element = driver.findElement(By.xpath(path));
			assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Description");
			test_steps.add("'History Tab' Verified Description: <b>" + checkIn + "</b>");
			reslogger.info("'History Tab' Verified Description : " + checkIn);
			test_steps.add("'History Tab' Verified Room: <b>" + abb + ": " + FinalRoomNo + "</b>");
			reslogger.info("'History Tab' Verified Room : " + abb + ": " + FinalRoomNo);
		} else if (Status.equals("Check Out")) {
			WebElement elementCheckOut = driver.findElement(By.xpath(checkOutPath));
			assertTrue(elementCheckOut.isDisplayed(), "Failed: To verify History Tab  Description");
			test_steps.add("'History Tab' Verified Description: <b>" + checkOut + "</b>");
			reslogger.info("'History Tab' Verified Description : " + checkOut);
			test_steps.add("'History Tab' Verified Room: <b>" + abb + ": " + FinalRoomNo + "</b>");
			reslogger.info("'History Tab' Verified Room : " + abb + ": " + FinalRoomNo);
		}

	}

	public void verifyChangedRoomChargesOnHistory(WebDriver driver, ArrayList<String> test_steps, String roomCharge,
			String ChangedCharges) {
		String checkOut = "Changed room charge from $" + roomCharge + " to $" + ChangedCharges;
		String path = "//span[contains(text(),'" + checkOut + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Changed Room Charges");
		test_steps.add("'History Tab' Verified <b>" + checkOut + "/b<>");
		reslogger.info("'History Tab' Verified" + checkOut);

	}

	public void verifyReservationPanelTripTotal(WebDriver driver, ArrayList<String> test_steps,
			String TotalTripAmount) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_StatusPanel_TripTotal, driver);
		String RerservationStatus_TripTotalAmount = res.CP_Reservation_StatusPanel_TripTotal.getText().replace("$", "");
		double tripAmount = Double.valueOf(RerservationStatus_TripTotalAmount);
		RerservationStatus_TripTotalAmount = String.valueOf(tripAmount);
		// Verified History Tab No Show Entry
		assertEquals(RerservationStatus_TripTotalAmount, (TotalTripAmount), "Failed: To verify Total Trip");
		test_steps.add("  Verified Reservation Panel Total Trip:  <b>" + TotalTripAmount + "</b>");
		reslogger.info(" Verified Reservation Panel Total Trip: " + TotalTripAmount);
	}

	public void verifyReservationPanelBalance(WebDriver driver, ArrayList<String> test_steps, String Balance)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_PanelBalance);
		Utility.ScrollToElement(res.CP_Reservation_StatusPanel_Balance, driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_StatusPanel_Balance, driver);
		String RerservationStatus_BalanceAmount = res.CP_Reservation_StatusPanel_Balance.getText().replace("$", "");
		double balanceAmount = Double.valueOf(RerservationStatus_BalanceAmount);
		reslogger.info("Actual Balance: " + String.format("%.2f", balanceAmount).trim());
		assertEquals(String.format("%.2f", balanceAmount).trim(), (Balance), "Failed: To verify Balance");
		test_steps.add("  Verified Reservation Panel Balance:  <b>" + Balance + "</b>");
		reslogger.info(" Verified Reservation Panel Balance: " + Balance);
	}

	public void verifyTripSummaryPaidAmount(WebDriver driver, ArrayList test_steps, String getPaid, String Paid) {
		double paidAmt = Double.valueOf(getPaid);
		getPaid = String.format("%.2f", paidAmt);
		assertEquals(getPaid.trim(), (Paid), "Failed : to Verify Trip Summary Paid");
		test_steps.add("Verified TripSummary  Paid : <b>" + Paid + "</b>");
		reslogger.info("Verified TripSummary  Paid : " + Paid);

	}

	public void verifyTripSummaryBalanceAmount(WebDriver driver, ArrayList test_steps, String getBalance,
			String Balance) {

		if (getBalance.contains("£")) {
			getBalance = getBalance.replace("£", "").trim();
			reslogger.info(getBalance);
		}
		if (Balance.contains("£")) {
			Balance = Balance.replace("£", "").trim();
			reslogger.info(Balance);
		}

		double balanceAmount = Double.valueOf(getBalance);
		reslogger.info("Actual Balance : " + String.format("%.2f", balanceAmount).trim());
		assertEquals(String.format("%.2f", balanceAmount).trim(), (Balance.trim()),
				"Failed : to Verify Trip Summary Balance");
		test_steps.add("Verified TripSummary Balance Charges :<b> " + Balance + "</b>");
		reslogger.info("Verified TripSummary Balance Charges : " + Balance);
	}

	public ArrayList<String> verifyOverbookingTab(WebDriver driver, String RoomClassName) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		Wait.WaitForElement(driver, OR_Reservation.OVERBOOKING_TAB_MESSAGE);
		Utility.ScrollToElement(cpelements.OVERBOOKING_TAB_MESSAGE, driver);
		System.out.println(cpelements.OVERBOOKING_TAB_MESSAGE.getText());
		String overbookingMessage = "There are 0 rooms available for " + RoomClassName;
		assertTrue(cpelements.OVERBOOKING_TAB_MESSAGE.getText().trim().toUpperCase()
				.contains(overbookingMessage.toUpperCase()));
		test_steps.add("Overbooking Tab Message Verified : " + overbookingMessage);
		reslogger.info("Overbooking Tab Message Verified : " + overbookingMessage);
		cpelements.OVERBOOKING_TAB_NOBUTTON.click();
		reslogger.info("Overbooking Tab No Buton Clicked");
		test_steps.add("Overbooking Tab No Buton Clicked");
		return test_steps;

	}

	public ArrayList<String> verifyNewReservationPage(WebDriver driver) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_FindRooms);
		assertEquals(cpelements.CP_NewReservation_FindRooms.isDisplayed(), true);
		test_steps.add("New Reservation Page Displayed");
		reslogger.info("New Reservation Page Displayed");

		return test_steps;

	}

	public ArrayList<String> selectCheckInDate(WebDriver driver, String checkInDate) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		String loading = "(//div[@class='ir-loader-in'])[2]";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CheckinCal);
		res.CP_NewReservation_CheckinCal.click();
		String monthYear = Utility.get_MonthYear(checkInDate);
		String day = Utility.getDay(checkInDate);
		reslogger.info(monthYear);
		String header = null, headerText = null, next = null, date;
		for (int i = 1; i <= 12; i++) {
			header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
			headerText = driver.findElement(By.xpath(header)).getText();
			if (headerText.equalsIgnoreCase(monthYear)) {
				date = "//td[contains(@class,'day') and text()='" + day + "']";
				Wait.WaitForElement(driver, date);
				int size = driver.findElements(By.xpath(date)).size();
				for (int k = 1; k <= size; k++) {
					date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + k + "]";
					String classText = driver.findElement(By.xpath(date)).getAttribute("class");
					if (!classText.contains("old")) {
						driver.findElement(By.xpath(date)).click();
						test_steps.add("Selecting checkin date : " + checkInDate);
						reslogger.info("Selecting checkin date : " + checkInDate);
						break;
					}
				}
				break;
			} else {
				next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
				Wait.WaitForElement(driver, next);
				driver.findElement(By.xpath(next)).click();
				Wait.wait2Second();
			}
		}

		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <selectCheckoutDate> ' Description: <Method will select check
	 * out date> ' Input parameters: <WebDriver driver, String CheckoutDate> '
	 * Return value: <ArrayList<String>> ' Created By: <Jamal Nasir> ' Created On:
	 * <05/04/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> selectCheckoutDate(WebDriver driver, String CheckoutDate) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CheckoutCal);
		res.CP_NewReservation_CheckoutCal.click();
		String monthYear = Utility.get_MonthYear(CheckoutDate);
		String day = Utility.getDay(CheckoutDate);
		reslogger.info(monthYear);
		String header = null, headerText = null, next = null, date;
		for (int i = 1; i <= 12; i++) {
			header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
			headerText = driver.findElement(By.xpath(header)).getText();
			if (headerText.equalsIgnoreCase(monthYear)) {
				date = "//td[contains(@class,'day') and text()='" + day + "']";
				Wait.WaitForElement(driver, date);
				int size = driver.findElements(By.xpath(date)).size();
				for (int k = 1; k <= size; k++) {
					date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + k + "]";
					String classText = driver.findElement(By.xpath(date)).getAttribute("class");
					if (!classText.contains("old")) {
						driver.findElement(By.xpath(date)).click();
						test_steps.add("Selecting checkout date : " + CheckoutDate);
						reslogger.info("Selecting checkout date : " + CheckoutDate);
						break;
					}
				}

				break;
			} else {
				next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
				Wait.WaitForElement(driver, next);
				driver.findElement(By.xpath(next)).click();
				Wait.wait2Second();
			}
		}
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getReservationStatus> ' Description: <return reservation
	 * status> ' Input parameters: <WebDriver driver> ' Return value: <String> '
	 * Created By: <Jamal Nasir> ' Created On: <05/06/2020> *
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getReservationStatus(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ReservationStatus);
		String status = res.CP_NewReservation_ReservationStatus.getText();
		return status;
	}

	/**
	 * ##########################################################################################################################################################################
	 * 
	 * ' Method Name: <selectRoom> ' Description: <Select Room IN Resevation> '
	 * Input parameters: <WebDriver driver, String RoomClass, String IsAssign,
	 * String Account> ' Return value: <ArrayList<String>> ' Created By: <Jamal
	 * Nasir> ' Created On: <05/06/2020>
	 * 
	 * ##########################################################################################################################################################################
	 */
	public ArrayList<String> selectRoom(WebDriver driver, String RoomClass, String IsAssign, String Account)
			throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, room);

		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				reslogger.info(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				Random random = new Random();
				int randomNumber = random.nextInt(count1 - 1) + 1;
				reslogger.info("count : " + count1);
				reslogger.info("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}
			if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
				String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
				Wait.WaitForElement(driver, policy);
				driver.findElement(By.xpath(policy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");

				loading = "(//div[@class='ir-loader-in'])[2]";
				counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
		return test_steps;
	}

	public String getRoomChargeUnderTripSummary(WebDriver driver, ArrayList<String> test_steps) {
		String Balance = driver.findElement(By.xpath(
				"//span[text()='Summary']/../../..//div[contains(text(),'Room Charges')]/following-sibling::div"))
				.getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("Room Charges captured at trip summary as : <b>" + Balance + "</b>");
		reslogger.info("Room Charges captured at trip summary as : " + Balance);
		return Balance;
	}

	public String getRoomNumber(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GetRoomNumber);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GetRoomNumber), driver);
		String room = reservation.GetRoomNumber.getText();
		room = room.split(":")[1].trim();
		reslogger.info("Room Number is : " + room);
		return room;
	}

	public ArrayList<String> verifyAssociatedAccount(WebDriver driver, String accountName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<String>();

		Wait.WaitForElement(driver, OR_Reservation.AssociatedAccountName);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.AssociatedAccountName), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.AssociatedAccountName), driver);
		String foundName = res.AssociatedAccountName.getText();

		assertEquals(res.AssociatedAccountName.isDisplayed(), OR_Reservation.AssociatedAccountName.contains("//a"),
				"Failed to verify Account No");
		testSteps.add("Verified Assoicated Account Name is displayed as link");
		reslogger.info("Verified Assoicated Account Name is displayed as link");
		assertEquals(foundName.trim(), accountName.trim(), "Failed to verify Account No");
		testSteps.add("Successfully Verified Assoicated Account Name : " + accountName);
		reslogger.info("Successfully Verified Assoicated Account Name : " + accountName);
		return testSteps;
	}

	public void verifyAssoiateTravelAgentInReservation(WebDriver driver, String accountName,
			ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GetTravelAccount), driver);
		String foundTravelAcc = res.getTravelAccount.getText();
		assertEquals(foundTravelAcc, accountName);
		test_steps.add("Successfully Verified Assoicated Account Name : " + accountName);
		reslogger.info("Successfully Verified Assoicated Account Name : " + accountName);
	}

	public ArrayList<String> verifyResInHistory(WebDriver driver, String ReservationNumber) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		String historyPath = "//span[.='Created reservation with Confirmation Number: " + ReservationNumber + "']";
		WebElement historyMsg = driver.findElement(By.xpath(historyPath));
		assertTrue(historyMsg.isDisplayed(), "Failed to verify reservation creation in history");

		test_steps.add("Description : Created reservation with Confirmation Number: " + ReservationNumber);
		reslogger.info("Description : Created reservation with Confirmation Number: " + ReservationNumber);
		test_steps.add("Successfully Verified reservation in history tab");
		reslogger.info("Successfully Verified reservation in history tab");
		return test_steps;
	}

	public ArrayList<String> verifyAssociatedAccount_ResHeader(WebDriver driver, String accountName) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<String>();

		String foundName = reservation.HeaderAccountName_BeforeReservation.getText();
		assertEquals(foundName.trim(), accountName, "Failed to verify Account No");
		testSteps.add("Successfully Verified Assoicated Account Name : " + accountName);
		reslogger.info("Successfully Verified Assoicated Account Name : " + accountName);
		assertEquals(reservation.GroupSign.isDisplayed(), true, "Failed: Group tic sign is not showing");
		testSteps.add("Verified group tick sign in reservation page");
		try {
			reservation.CP_NewReservation_Next.click();
		} catch (Exception e) {
			// TODO: handle exception
		}
		return testSteps;
	}

	public void verifyNoShowPolicy(WebDriver driver, ArrayList<String> test_steps, String policyName,
			String policyText) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		guestDetailsTabClick(driver, test_steps);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.noShowPolicyDisclaimersTab), driver);
		res.noShowPolicyDisclaimersTab.click();

		String noShowPolicyNameInDetailsTab = "//button[@title='" + policyName + "']";
		String noShowPolicyTextDetailsTab = noShowPolicyNameInDetailsTab
				+ "/../../../../following-sibling::div//textarea";// "//textarea[contains(text(),'" + policyText +
																	// "')]";

		Wait.waitForElementToBeVisibile(By.xpath(noShowPolicyNameInDetailsTab), driver);
		String noShowPolicyName = driver.findElement(By.xpath(noShowPolicyNameInDetailsTab)).getText().trim();
		assertEquals(noShowPolicyName, policyName, "Failed - Associated policy is not matched with created one");
		test_steps.add("Successfully verified associated no show policy name as : <b>" + noShowPolicyName + "</b>");
		Wait.waitForElementToBeVisibile(By.xpath(noShowPolicyTextDetailsTab), driver);
		String noShowPolicyText = driver.findElement(By.xpath(noShowPolicyTextDetailsTab)).getText().trim();
		assertEquals(noShowPolicyText, policyText, "Failed - Associated policy  text is not matched with created one");
		test_steps.add(
				"Successfully verified associated no show policy description as : <b>" + noShowPolicyText + "</b>");

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.closeNoShowPolicyExpand), driver);
		res.closeNoShowPolicyExpand.click();
	}

	public boolean isVoidRoomChecked;

	public void verifyNoShowReservationPopUp(WebDriver driver, String policyName, ArrayList<String> test_steps)
			throws Exception {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		String path = "//span[contains(text(),'Void Room Charges')]/ancestor::div/label/input|//span[contains(text(),'Void room charges for unused nights')]/ancestor::div/label/input";
		Wait.WaitForElement(driver, OR_Reservation.NoShowAndCancelReservation_PolicyName);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowAndCancelReservation_PolicyName), driver);

		Utility.ScrollToElement(reservation.NoShowAndCancelReservation_PolicyName, driver);
		// Wait.wait2Second();
		assertTrue(reservation.NoShowAndCancelReservation_PolicyName.getText().toLowerCase().trim()
				.equals(policyName.toLowerCase().trim()), "Failed: To verify Reservation Window Policy Name");
		isVoidRoomChecked = driver.findElement(By.xpath(path)).isSelected();
		if (!isVoidRoomChecked) {
			reservation.CP_Reservation_NoShow_VoidRoomChargeCheckBox.click();
			test_steps.add("Checked Void Room Charge Check Box ");
			reslogger.info("Checked Void Room Charge Check Box ");
		} else {
			test_steps.add(" Void Room Charge Check Box is Already Checked ");
			reslogger.info("Void Room Charge Check Box is Already Checked ");
		}

		reservation.ProceedToPaymentButton.click();
		test_steps.add("Click on Proceed To No Show Payment Button ");
		reslogger.info("Click on Proceed To No Show Payment Button ");

	}

	public void verifyNoShowNotesDetails(WebDriver driver, ArrayList<String> test_steps, String noteType,
			String noteSubject, String noteDesc, String updatedBy) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.wait3Second();
			Wait.explicit_wait_visibilityof_webelement_120(res.noShowNotesType, driver);
			Utility.ScrollToElement(res.noShowNotesType, driver);
			String noteTypeDisplayed = res.noShowNotesType.getText();
			assertEquals(noteTypeDisplayed, "Internal", "Failed - Verify type of No Show note");
			test_steps.add("Successfully verified type of note as <b>" + noteTypeDisplayed + "</b>");

			/*
			 * String noteDescriptionDisplayed =
			 * driver.findElement(By.xpath("//td[text()='"+
			 * noteType+"']/..//td[contains(@data-bind,'text: details')]")). getText();
			 * assertEquals(noteDescriptionDisplayed, noteDesc,
			 * "Failed - Verify cancel note description section"); test_steps.
			 * add("Successfully verified cancel note description as <b>"
			 * +noteDescriptionDisplayed+"</b>");
			 */

			String noteSubjectDisplayed = driver
					.findElement(By.xpath("//td[text()='" + noteType + "']/..//td[contains(@data-bind,'subject')]"))
					.getText();
			assertEquals(noteSubjectDisplayed, noteType, "Failed - Verify subject of cancel note");
			test_steps.add("Successfully verified subject of note as <b>" + noteSubjectDisplayed + "</b>");

			String noteUpdatedByDisplayed = driver
					.findElement(By.xpath("//td[text()='" + noteType + "']/..//td[contains(@data-bind,'updatedBy')]"))
					.getText();
			assertEquals(noteUpdatedByDisplayed, updatedBy, "Failed - Verify note updated by");
			test_steps.add("Successfully verified note updated by as <b>" + noteUpdatedByDisplayed + "</b>");

			String noteUpdatedOnDisplayed = driver
					.findElement(By.xpath("//td[text()='" + noteType + "']/..//td[contains(@data-bind,'updatedOn')]"))
					.getText();
			String updateDateExp = Utility.getCurrentDate("MM/dd/yyyy");
			noteUpdatedOnDisplayed = Utility.parseDate(noteUpdatedOnDisplayed, "MM/dd/ yy HH:mm aa", "MM/dd/yyyy");
			// assertEquals(noteUpdatedOnDisplayed, updateDateExp, "Failed -
			// Verify note
			// updated on date");
			test_steps.add("Successfully verified note updated on date as <b>" + noteUpdatedOnDisplayed + "</b>");

		} catch (Exception e) {
			Utility.app_logs.info(e);
		}
	}

	public boolean CheckedDisplayVoidItem(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_DisplayVoidItemCheckBox, driver);
		boolean isChecked = res.CP_Reservation_DisplayVoidItemCheckBox.isSelected();
		if (!isChecked) {
			Utility.ScrollToElement(res.CP_Reservation_DisplayVoidItemCheckBox, driver);
			res.CP_Reservation_DisplayVoidItemCheckBox.click();
			test_steps.add("Checked Display Void Item Check Box ");
			reslogger.info("Checked Display Void Item Check Box ");
		} else {
			test_steps.add("Display Void Item Check Box is Already Checked ");
			reslogger.info("Display Void Item Check Box is Already Checked ");
		}
		return isChecked;
	}

	public String getRoomNumberWithClass(WebDriver driver) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GetRoomNumber);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GetRoomNumber), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GetRoomNumber), driver);
		String room = reservation.GetRoomNumber.getText();
		return room;
	}

	public ArrayList<String> verifyReservationFolioDetails(WebDriver driver, String roomNumber, String roomClass,
			ArrayList<String> test_steps) {

		Folio folio = new Folio();
		/*
		 * driver.findElement(By.
		 * xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]"
		 * )).click(); WebElement roomsToSelect=driver.findElement(By.
		 * xpath("(//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]/..//a/span[@class='text'])[1]"
		 * )); roomsToSelect.click();
		 */
		double folioRoomChargeLineItems = 0.00;
		String noShowFee = null;
		/*
		 * List<WebElement> rooms = driver.findElements(By.
		 * xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]/..//a/span[@class='text']"
		 * )); Utility.app_logs.info(rooms.size()); for (WebElement roomsToSelect :
		 * rooms) { driver.findElement(By.
		 * xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]"
		 * )).click(); Wait.wait1Second(); roomsToSelect.click();
		 */
		List<WebElement> roomChargesAmount = driver
				.findElements(By.xpath("//span[contains(text(), 'Room Charge')]/../..//td[@class='lineitem-amount']"));
		if (roomChargesAmount.size() != 0) {
			for (WebElement getRoomCharges : roomChargesAmount) {
				double roomCharge = Double.parseDouble(getRoomCharges.getText().replace("$ ", ""));
				folioRoomChargeLineItems = folioRoomChargeLineItems + roomCharge;
				test_steps.add("voidedRoom charges for 2 nights should be voided :" + folioRoomChargeLineItems);
				reslogger.info("folio RoomCharge LineItem Amount:" + folioRoomChargeLineItems);

			}
		}
		noShowFee = folio.getNoShowFeeAmount(driver, "No Show Fee", test_steps);
		folio.verifyLineItemPaymentMethod(driver, "No Show Fee", test_steps);
		verifyResrvationFolioBalence(driver, test_steps);
		folio.clikOnLineItemDescription(driver, "No Show Fee", test_steps);
		folio.verifyLineItemDetails(driver, roomNumber, roomClass, noShowFee, test_steps);

		return test_steps;

	}

	public void verifyResrvationFolioBalence(WebDriver driver, ArrayList<String> test_steps) {
		String totalCharge = null;
		String payments = null;
		String balance = null;
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		totalCharge = "//label[contains(text(),'Total Charges:')]/../span[@class='pamt']";
		payments = "//label[contains(text(),'Payments:')]/../span[@class='pamt']";
		balance = "//label[contains(text(),'Balance: ')]/../span[@class='pamt']";

		totalCharge = driver.findElement(By.xpath(totalCharge)).getText().replace("$ ", "");
		test_steps.add("Reservation Folio Total Cgharges:" + totalCharge);
		reslogger.info("Reservation Folio Total Cgharges:" + totalCharge);
		double tcharge = Double.valueOf(totalCharge);

		payments = driver.findElement(By.xpath(payments)).getText().replace("$ ", "");
		;
		test_steps.add("Reservation Folio Total Cgharges:" + payments);
		reslogger.info("Reservation Folio Total Cgharges:" + payments);
		double payAmount = Double.valueOf(payments);
		// int payAmount= Integer.valueOf(payments);
		double totalAmount = tcharge - payAmount;
		String tAmount = df.format(totalAmount);
		test_steps.add("Reservation Folio Balence:" + totalAmount);
		reslogger.info("Reservation Folio Balence:" + totalAmount);

		balance = driver.findElement(By.xpath(balance)).getText().replace("$ ", "");

		test_steps.add("Reservation Folio Total Cgharges:" + balance);
		reslogger.info("Reservation Folio Total Cgharges:" + balance);
		assertEquals(tAmount, balance, "reservation folio balnce not a zero");

	}

	public String getTaxandServicesInTripSummaryBeforeCreateReservation(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GetTaxandServicesInTripSummaryBeforeCreateReservation);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GetTaxandServicesInTripSummaryBeforeCreateReservation),
				driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GetTaxandServicesInTripSummaryBeforeCreateReservation),
				driver);
		return element.GetTaxandServicesInTripSummaryBeforeCreateReservation.getText();
	}

	public void makeReservationNoShow(WebDriver driver, ArrayList test_steps) throws Exception {
		String expand = "//div[@class='ng-statusChnage ir-statusMenu ul']//span[@class='dropdown dropdown-toggle ir-dropdown-span-status']";

		Wait.WaitForElement(driver, expand);
		Wait.waitForElementToBeClickable(By.xpath(expand), driver);
		Utility.ScrollToElement(driver.findElement(By.xpath(expand)), driver);
		driver.findElement(By.xpath(expand)).click();
		String status = "//div[@class='ng-statusChnage ir-statusMenu ul']//span//ul//span[text()='No Show']";
		Wait.waitForElementToBeClickable(By.xpath(status), driver);
		driver.findElement(By.xpath(status)).click();
		test_steps.add("Clicking on No Show reservation button");
		reslogger.info("Clicking on No Show reservation button");
	}

	public String calculationOfNoShowAmountToBePaid(ArrayList<String> baseAmounts, ArrayList<String> totalNights,
			String attr, String attrValue, String taxes, String totalRoomCharges) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountToBePaid = null;
		double paidAmount = 0.00;
		double taxesToAdd = 0.00;
		double taxesPerc = 0.00;
		double roomChargesCalc = 0.00;

		if (!(taxes.equalsIgnoreCase("0")) && !(taxes.equalsIgnoreCase("0.0")) && !(taxes.equalsIgnoreCase("0.00"))) {
			double abc = (Double.parseDouble(taxes)) * 100;
			taxesPerc = abc / Double.parseDouble(totalRoomCharges);
		}
		if (attr.equalsIgnoreCase("First Night")) {
			for (String string : baseAmounts) {
				double amount = (Double.parseDouble(string)) * (Double.parseDouble(attrValue));
				paidAmount = paidAmount + amount;
			}
			if ((taxesPerc != 0) && (taxesPerc != 0.0) && (taxesPerc != 0.00)) {
				double abc = paidAmount * taxesPerc;
				taxesToAdd = abc / 100;
				paidAmount = paidAmount + taxesToAdd;
			}
		} else if (attr.equalsIgnoreCase("Fixed Amount")) {
			paidAmount = (Double.parseDouble(attrValue)) * (baseAmounts.size());
		} else if (attr.equalsIgnoreCase("Room Charges")) {
			for (int i = 0; i < baseAmounts.size(); i++) {
				double abc = (Double.parseDouble(baseAmounts.get(i))) * (Double.parseDouble(totalNights.get(i)))
						* (Double.parseDouble(attrValue)) / 100;
				roomChargesCalc = abc + roomChargesCalc;
			}
			paidAmount = roomChargesCalc;

			/*
			 * if ( (taxesPerc != 0) && (taxesPerc != 0.0) && (taxesPerc != 0.00) ) { double
			 * abc = paidAmount*taxesPerc; taxesToAdd = abc/100; paidAmount =
			 * paidAmount+taxesToAdd; }
			 */
		}
		amountToBePaid = df.format(paidAmount);
		return amountToBePaid;
	}

	public String getTaxesFromTripSummary(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		return res.TripSummary_TaxesAndServiceCharges.getText().replace("$", "").trim();
	}

	public void verifyNoShowPaymentSuccessPopupVerify(WebDriver driver, ArrayList<String> test_steps,
			String NoShowSuccess, String Status, String PaymentMethod, String Type, String amount) throws Exception {

		try {
			String validate = null;
			DecimalFormat df = new DecimalFormat("0.00");
			df.setMaximumFractionDigits(2);
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.explicit_wait_visibilityof_webelement_120(res.CP_Reservation_NoShowSuccess, driver);
			Utility.ScrollToElement(res.CP_Reservation_NoShowSuccess, driver);

			String balanceDisplayed = res.NoShowSuccess_Balance.getText().replace("$ ", "").trim();
			String balanceCalculated = null;
			String amountDisplayed = res.noShowSuccessPolicyAmount.getText().replace("$ ", "");
			String header = res.CP_Reservation_NoShowSuccess.getText().trim();
			assertEquals(header, NoShowSuccess, "Failed: To verify Success Header");
			test_steps.add("  Verified header of the payment popup: <b>" + NoShowSuccess + "</b>");
			reslogger.info("  Verified header of the  payment popup :" + NoShowSuccess);

			// Verified Success-Date
			// === For check-in/cancel it takes current day as updated so
			// validating with current day
			String date = Utility.getCurrentDate("MM/dd/yyyy");
			// date = Utility.parseDate(date, "dd/MM/yyyy", "MM/dd/yyyy");
			String dateDisplayed = res.NoShowSuccess_Date.getText();
			assertEquals(dateDisplayed, date, "Failed: To verify  Success Page Date");
			test_steps.add("  Verified Date of  : <b>" + date + "</b>");
			reslogger.info("  Verified Date of : " + date);

			String typeDisplayed = res.NoShowSuccess_Type.getText().trim();
			assertEquals(typeDisplayed, Type, "Failed: To verify  Success Page Type");
			test_steps.add("  Verified payment type : <b>" + Type + "</b>");
			reslogger.info(" Verified  payment type : " + Type);

			// Verified Success-Payment Method
			String paymentMethodDisplayed = res.CP_Reservation_NoShowSuccessPaymentMethod.getText().trim();
			assertEquals(paymentMethodDisplayed, PaymentMethod, "Failed: To verify Success Page Payment Method");
			test_steps.add("  Verified Payment Method: <b>" + PaymentMethod + "</b>");
			reslogger.info("  Verified Payment Method: " + PaymentMethod);

			// Verified Success -Status
			String statusDisplayed = res.CP_Reservation_NoShowSuccessStatus.getText().trim();
			assertEquals(statusDisplayed, Status, "Failed: To verify  Success Page Status ");
			test_steps.add("  Verified Status of payment :<b> " + Status + "</b>");
			reslogger.info(" Verified Status  of payment : " + Status);

		} catch (Exception e) {
			Utility.app_logs.info(e);
		}
	}

	public ArrayList<String> verifyNoShowPaymentPopUp(WebDriver driver, ArrayList<String> test_steps, String title,
			String expiryDate, String nameOnCard, String cardNo, String paymentMethod, String type, String amount) {

		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> details = new ArrayList<>();
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle), driver);
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);

		String titleDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText();
		assertEquals(titleDisplayed, title, "Failed: To verify Payment Page Title");
		test_steps.add("Verified Payment Page Title :<b> " + title + "</b>");

		String amountDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText()
				.trim();
		if (amountDisplayed.equals(amount)) {
			assertEquals(amountDisplayed, amount, "Faild to verify calculated amount");
			test_steps.add("Successfull verified amount as : <b>" + amountDisplayed + "</b>");
		} else {
			test_steps.add("Existing issue in CP: Convert WCF Service to in-process calls - PolicyService"
					+ "<br/><a href='https://innroad.atlassian.net/browse/REF-62'>" + "Verified : REF-62</a><br/>");
			reslogger.info("Existing issue in CP: Convert WCF Service to in-process calls - PolicyService"
					+ "<br/><a href='https://innroad.atlassian.net/browse/REF-62'>" + "Verified : REF-62</a><br/>");
			assertEquals(amountDisplayed, amount, "Faild to verify calculated amount");
		}
		String balanceDisplayed = reservation.NoShowCancelPaymentPopup_Balance.getText().replace("$ ", "");
		assertEquals(balanceDisplayed, amount, "Faild to verify calculated amount");
		test_steps.add("Successfull verified balance as : <b>" + balanceDisplayed + "</b>");

		WebElement paymentElement = driver.findElement(
				By.xpath("//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + paymentMethod + "']"));
		String paymentMethodDisplayed = paymentElement.getText().trim();
		assertEquals(paymentMethodDisplayed, paymentMethod, "Failed: To verify Payment Method");
		test_steps.add("Successfull verified Payment Method:<b> " + paymentMethodDisplayed + "</b> ");
		reslogger.info("Successfull verified Payment Method: " + paymentMethodDisplayed);

		String currentdate = Utility.getCurrentDate("MM/dd/yyyy");
		String noShowDate = reservation.NoShowPaymentPopup_Date.getAttribute("value");
		assertEquals(noShowDate, currentdate, "Failed: To verify Account Details");
		test_steps.add("Successfull verified No Show date as : <b>" + noShowDate + "</b>");
		reslogger.info("Successfull verified checkOutDate :" + noShowDate);

		String cardNoDisplayed = ((String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_CardNumber)).trim();
		assertEquals(cardNoDisplayed, cardNo, "Failed: To verify Card Number");
		test_steps.add("Successfull verified Card Number as : <b>" + cardNoDisplayed + "</b>");
		reslogger.info(" Verified Card Number");

		String nameOnCardDisplayed = (String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_NameOnCard);
		assertEquals(nameOnCardDisplayed, nameOnCard, "Failed: To verify Name on Card ");
		test_steps.add("Successfull verified Name on Card as : <b>" + nameOnCard + "</b>");
		reslogger.info(" Verified Name on Card");

		String expiryDateDisplayed = (String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_Expiry);
		assertEquals(expiryDateDisplayed, expiryDate, "Failed: To verify Expiry Date ");
		test_steps.add("Successfull verified Expiry Date as : <b>" + expiryDateDisplayed + "</b>");
		reslogger.info(" Verified Expiry Date");

		String buttonDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().trim();
		String buttonExp = "PAY $ " + amount;
		// buttonDisplayed = buttonDisplayed.replace("$", "").replace("PAY",
		// "").trim();
		assertEquals(buttonDisplayed, buttonExp, "Failed: To verify Payment Type");
		test_steps.add("Successfull verified button displayed as : <b>" + buttonDisplayed + "</b>");
		reslogger.info(" Verified button displayed  Amount:<b> " + buttonDisplayed + "</b>");

		clickOnPayButtonOnPaymentPopup(driver, test_steps);
		return test_steps;
	}

	public ArrayList<String> verifySecondaryUserFolioDetails(WebDriver driver, String roomNumber1, String roomClass,
			ArrayList<String> test_steps) {

		Folio folio = new Folio();
		driver.findElement(
				By.xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]")).click();
		WebElement roomsToSelect = driver.findElement(By.xpath(
				"(//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]/..//a/span[@class='text'])[2]"));
		roomsToSelect.click();
		double folioRoomChargeLineItems = 0.00;
		String noShowFee = null;
		/*
		 * List<WebElement> rooms = driver.findElements(By.
		 * xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]/..//a/span[@class='text']"
		 * )); Utility.app_logs.info(rooms.size()); for (WebElement roomsToSelect :
		 * rooms) { driver.findElement(By.
		 * xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]"
		 * )).click(); Wait.wait1Second(); roomsToSelect.click();
		 */
		List<WebElement> roomChargesAmount = driver
				.findElements(By.xpath("//span[contains(text(), 'Room Charge')]/../..//td[@class='lineitem-amount']"));
		if (roomChargesAmount.size() != 0) {
			for (WebElement getRoomCharges : roomChargesAmount) {
				double roomCharge = Double.parseDouble(getRoomCharges.getText().replace("$ ", ""));
				folioRoomChargeLineItems = folioRoomChargeLineItems + roomCharge;
				Utility.app_logs.info(folioRoomChargeLineItems);
			}
		}
		noShowFee = folio.getNoShowFeeAmount(driver, "No Show Fee", test_steps);
		folio.clikOnLineItemDescription(driver, "No Show Fee", test_steps);
		folio.verifyLineItemDetails(driver, roomNumber1, roomClass, noShowFee, test_steps);
		return test_steps;
	}

	public void clickOnEditMarketingInfoIcon(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.EditMarketingInfoIcon);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EditMarketingInfoIcon), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.EditMarketingInfoIcon), driver);
		Utility.ScrollToElement_NoWait(element.EditMarketingInfoIcon, driver);
		element.EditMarketingInfoIcon.click();
	}

	public void clickOnSaveMarketingInfoIcon(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.SaveMarketingInfo);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.SaveMarketingInfo), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.SaveMarketingInfo), driver);
		element.SaveMarketingInfo.click();
		verifySpinerLoading(driver);

	}

	public ArrayList<String> splitRoomCheckbox(WebDriver driver, boolean isChecked) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_SplitCheckBox);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_SplitCheckBox), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_SplitCheckBox), driver);
		Utility.ScrollToElement(element.CP_NewReservation_SplitCheckBox, driver);
		if (isChecked) {
			if (element.CP_NewReservation_SplitCheckBox.isSelected()) {
				testSteps.add("Verified 'Split-Room Reservation' checkbox already checked");
			} else {
				element.CP_NewReservation_SplitCheckBox.click();
				testSteps.add("Verified 'Split-Room Reservation' checkbox is checked");
			}
		} else {
			if (element.CP_NewReservation_SplitCheckBox.isSelected()) {
				element.CP_NewReservation_SplitCheckBox.click();
				testSteps.add("Verified 'Split-Room Reservation' checkbox is unchecked");
			} else {
				testSteps.add("Verified 'Split-Room Reservation' checkbox already unchecked");
			}
		}
		return testSteps;
	}

	// Created By adhnan
	public ArrayList<String> selectSplitRoom(WebDriver driver, String roomClass, int roomNumber, int RoomIndex)
			throws InterruptedException {

		Elements_CPReservation elementsReservation = new Elements_CPReservation(driver);
		ArrayList<String> steps = new ArrayList<>();
		spinerLoadingatRoomSelection(driver);

		String SplitRoomTabxpath = "//div[contains(@class,'split-parts')]/div[" + RoomIndex + "]";
		Wait.WaitForElement(driver, SplitRoomTabxpath);
		Wait.waitForElementToBeVisibile(By.xpath(SplitRoomTabxpath), driver);
		Wait.waitForElementToBeClickable(By.xpath(SplitRoomTabxpath), driver);
		WebElement SplitRoomTab = driver.findElement(By.xpath(SplitRoomTabxpath));
		Utility.ScrollToElement(SplitRoomTab, driver);
		SplitRoomTab.click();
		reslogger.info("after click");

		assertTrue(SplitRoomTab.getAttribute("class").contains("active"),
				"Failed: Split Room tab " + RoomIndex + " is not opened");
		steps.add("Split Room Tab '" + RoomIndex + "' is opened");
		reslogger.info("after click");

		String expand = "//section[@class='ir-roomClassDetails manual-override']//span[text()='" + roomClass
				+ "']//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
		reslogger.info(expand);
		Wait.WaitForElement(driver, expand);
		WebElement selectRoomNumber = driver.findElement(By.xpath(expand));
		Utility.ScrollToElement(selectRoomNumber, driver);
		// selectRoomNumber.click();
		try {
			Utility.clickThroughJavaScript(driver, selectRoomNumber);

		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, selectRoomNumber);

		}
		reslogger.info("after click o room selector");
		String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + roomClass
				+ "')]/../../../following-sibling::div/div/select/option";
		reslogger.info(roomnum);
		int count1 = driver.findElements(By.xpath(roomnum)).size();
		Random random = new Random();
		randomNumber = random.nextInt(count1 - 1) + 1;
		reslogger.info("count : " + count1);
		reslogger.info("randomNumber : " + randomNumber);
		roomNumber = randomNumber;
		String selectedRoomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[text()='" + roomClass
				+ "']//..//..//../following-sibling::div//div//select//following-sibling::div//ul/li[" + roomNumber
				+ "]/a/span";
		Wait.WaitForElement(driver, selectedRoomNumber);
		Wait.waitForElementToBeVisibile(By.xpath(selectedRoomNumber), driver);
		Wait.waitForElementToBeClickable(By.xpath(selectedRoomNumber), driver);
		driver.findElement(By.xpath(selectedRoomNumber)).click();
		String Selectxpath = "//section[@class='ir-roomClassDetails manual-override']//span[text()='" + roomClass
				+ "']//ancestor::div[contains(@data-bind,'expandRoomClassRateInfo')]//span[contains(@data-bind,'SELECT')]";
		Wait.WaitForElement(driver, Selectxpath);
		WebElement select = driver.findElement(By.xpath(Selectxpath));
		Utility.ScrollToElement(select, driver);
		try {
			Utility.clickThroughJavaScript(driver, select);

		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, select);

		}
		steps.add("Click Select button");
		reslogger.info("Click Select button");
		String classvalue = select.getAttribute("class");
		for (int i = 0; i < 5; i++) {
			if (classvalue.contains("selected")) {
				break;
			} else {
				Wait.wait2Second();
				classvalue = select.getAttribute("class");
			}
		}
		assertTrue(classvalue.contains("selected"), "Failed: Room Class not selected");
		String RoomNO = driver.findElement(By.xpath(expand)).getAttribute("title");
		steps.add("Select Room as '" + roomClass + " : " + RoomNO + "'");
		reslogger.info("Select Room as '" + roomClass + " : " + RoomNO + "'");
		return steps;

	}

	public void clickSelectRoom(WebDriver driver, String roomClass, ArrayList<String> testSteps)
			throws InterruptedException {
		String Selectxpath = "//section[@class='ir-roomClassDetails manual-override']//span[text()='" + roomClass
				+ "']//ancestor::div[contains(@data-bind,'expandRoomClassRateInfo')]//span[contains(@data-bind,'SELECT')]";
		Wait.WaitForElement(driver, Selectxpath);
		WebElement select = driver.findElement(By.xpath(Selectxpath));
		Utility.ScrollToElement(select, driver);
		try {
			Utility.clickThroughJavaScript(driver, select);

		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, select);

		}
		testSteps.add("Click Select button");
		reslogger.info("Click Select button");

	}

	public String getSplitRoomNumber(WebDriver driver, String IsAssign, int index) {
		String room = "(//span[text()='ROOM:']//following-sibling::span)[" + index + "]";
		Wait.WaitForElement(driver, room);
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(room)), driver);
		room = driver.findElement(By.xpath(room)).getText();

		if (IsAssign.equalsIgnoreCase("No")) {
			if (room.equalsIgnoreCase("Unassigned")) {
				test_steps.add("Room Number is : Unassigned");
				reslogger.info("Room Number is : Unassigned");
			}
		} else {
			test_steps.add("Room Number is : " + room);
			reslogger.info("Room Number is : " + room);
		}
		return room;
	}

	public void spinerLoadingatRoomSelection(WebDriver driver) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		try {
			int count = 0;
			while (true) {
				if (!res.spinerLoadingatRoomSelection.isDisplayed()) {
					break;
				}
				count++;
				Wait.wait1Second();

			}
		} catch (Exception e) {
			reslogger.info("In catch module loading");
		}

		reslogger.info("Waited to loading symbol");

	}

	public void moveToAddARoom(WebDriver driver) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddRoom);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_AddRoom), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_AddRoom), driver);
		Utility.ScrollToElement_NoWait(res.CP_NewReservation_AddRoom, driver);

	}

	public void enterDate(WebDriver driver, String dateType, String Date, String roomIndex)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String Datexpath = "(//input[contains(@data-bind,'" + dateType + "Date')])[" + roomIndex + "]";
		Wait.explicit_wait_xpath(Datexpath, driver);
		WebElement DateInput = driver.findElement(By.xpath(Datexpath));
		Wait.explicit_wait_visibilityof_webelement(DateInput, driver);
		Utility.ScrollToElement(DateInput, driver);
		DateInput.sendKeys(Keys.chord(Keys.CONTROL, "a"), Date);
		assertEquals(DateInput.getAttribute("value"), Date, "Failed: Entered Date missmatched");
	}

	public void enterMailingAddressOnUncheckedCreateGuestProfile(WebDriver driver, ArrayList<String> test_steps,
			String Salutation, String GuestFirstName, String GuestLastName, String IsGuesProfile)
			throws InterruptedException {
		enter_GuestName(driver, test_steps, Salutation, GuestFirstName, GuestLastName);
		uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
	}

	public String getBalanceHeader(WebDriver driver) {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		return Utility.convertDollarToNormalAmount(driver, elements.tripBalanceAmountAtTop.getText());
	}

	public String getTripTotalHeader(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		return Utility.convertDollarToNormalAmount(driver, res.tripTotalAmountAtTop.getText());

	}

	public String getRoomCharge(WebDriver driver, ArrayList<String> test_steps) {
		String Balance = driver.findElement(By.xpath(
				"//label[contains(text(),'Room Charges: ')]/following-sibling::span[@class='pamt']/span[@class='pamt']"))
				.getText();
		Balance = Balance.replace("$ ", "");
		test_steps.add("Room Charges : <b>" + Balance + "</b>");
		reslogger.info("Room Charges : " + Balance);
		return Balance;
	}

	public String getTax(WebDriver driver, ArrayList<String> test_steps) {
		String Balance = driver.findElement(By.xpath(
				"//label[contains(text(),'Taxes & Service Charges:')]/following-sibling::span/span[@class='pamt']"))
				.getText();
		Balance = Balance.replace("$", "");
		test_steps.add("Taxes & Service Charges : " + Balance);
		reslogger.info("Taxes & Service Charges : " + Balance);
		return Balance;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <selectRoom> ' Description: <method will select roomclass> '
	 * Input parameters: <WebDriver driver,String RoomClass,String IsAssign> '
	 * Return value: <ArrayList<String>> ' Created By: <Jamal Nasir> ' Created On:
	 * <05/19/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> selectRoom(WebDriver driver, String RoomClass, String IsAssign)
			throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				reslogger.info(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				Random random = new Random();
				int randomNumber = random.nextInt(count1 - 1) + 1;
				reslogger.info("count : " + count1);
				reslogger.info("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
		return test_steps;
	}

	public ArrayList<String> select_Room(WebDriver driver, String RoomClass, String IsAssign)
			throws InterruptedException {

//		String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
//				+ "')]/../../../following-sibling::div/div/select";
//
		String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../../following-sibling::div/div/select/option";
		reslogger.info(roomnum);
		int count1 = driver.findElements(By.xpath(roomnum)).size();
		Random random = new Random();
		int randomNumber = random.nextInt(count1 - 1) + 1;
		reslogger.info("count : " + count1);
		reslogger.info("randomNumber : " + randomNumber);
//		Wait.WaitForElement(driver, sel);

		String expand = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button)[1]";
		Wait.WaitForElement(driver, expand);
		driver.findElement(By.xpath(expand)).click();

		String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
				+ randomNumber + "]/a/span";
		Wait.WaitForElement(driver, roomNumber);
		driver.findElement(By.xpath(roomNumber)).click();
		///////////////

		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <VeriGuestProfileCheckox> ' Description: <Verify create guest
	 * profile checkbox is checked or not> ' Input parameters: <boolean value> '
	 * Return value: <array list> ' Created By: <Farhan Ghaffar> ' Created On:
	 * <04/17/2020>
	 * 
	 * ' Modified By | Description of Modification:
	 * ------------------------------------------ <mm/dd/yyyy>:<Developer name>:
	 * 1.Step modified 2.Step modified
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> VeriGuestProfileCheckox(WebDriver driver, boolean isChecked) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_step = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckboxGuestProfile);
		Wait.explicit_wait_visibilityof_webelement(element.CheckboxGuestProfile, driver);
		Wait.explicit_wait_elementToBeClickable(element.CheckboxGuestProfile, driver);
		Utility.ScrollToElement(element.CheckboxGuestProfile, driver);
		if (isChecked) {
			if (element.CheckboxGuestProfile.isSelected()) {
				test_step.add("Verified create guest profile checkbox already checked");
			} else {
				element.CheckboxGuestProfile.click();
				test_step.add("Verified create guest profile checkbox is checked");
			}
		} else {
			if (!element.CheckboxGuestProfile.isSelected()) {
				element.CheckboxGuestProfile.click();
				test_step.add("Verified create guest profile checkbox is  unchecked");
			} else {
				test_step.add("Verified create guest profile checkbox already unchecked");
			}
		}

		return test_step;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <verifyGuestReportLabelsValidations> ' Description: <Method
	 * will verify system report labels is displaying or not> ' Input parameters:
	 * <WebDriver driver> ' Return value: <ArrayList<String>> ' Created By: <Jamal
	 * Nasir> ' Created On: <05/22/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> verifyGuestReportLabelsValidations(WebDriver driver) throws InterruptedException {
		ArrayList<String> test_steps = new ArrayList<>();
		test_steps.add("========== Guest Reports labels verification ==========");
		reslogger.info("========== Guest Reports labels verification ==========");
		Elements_CPReservation reservationPage = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.reservationReports);
		reservationPage.reservationReports.click();

		Wait.WaitForElement(driver, OR_Reservation.guestStatement);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.guestStatement), driver);
		if (reservationPage.guestStatement.isDisplayed()) {
			test_steps.add("Guest Statement label displayed");
			reslogger.info("Guest Statement label displayed");
		} else {
			test_steps.add("Guest Statement label not displayed");
			reslogger.info("Guest Statement label not displayed");
		}

		if (reservationPage.guestStatementWithTaxBreakdown.isDisplayed()) {
			test_steps.add("Guest Statement with Tax breakdown label displayed");
			reslogger.info("Guest Statement with Tax breakdown label displayed");
		} else {
			test_steps.add("Guest Statement with Tax breakdown label not displayed");
			reslogger.info("Guest Statement with Tax breakdown label not displayed");
		}

		if (reservationPage.guestRegistration.isDisplayed()) {
			test_steps.add("Guest Registration label displayed");
			reslogger.info("Guest Registration label displayed");
		} else {
			test_steps.add("Guest Registration label not displayed");
			reslogger.info("Guest Registration label not displayed");
		}

		if (reservationPage.guestRegistartiontaxbreakdown.isDisplayed()) {
			test_steps.add("Guest Registration with Tax breakdown label displayed");
			reslogger.info("Guest Registration with Tax breakdown label displayed");
		} else {
			test_steps.add("Guest Registration with Tax breakdown label not displayed");
			reslogger.info("Guest Registration with Tax breakdown label not displayed");
		}
		reservationPage.reservationReports.click();
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <clickGuestStatementWithTaxBreakdown> ' Description: <This
	 * method will click Guest Statement with Tax breakdown report button> ' Input
	 * parameters: <WebDriver driver> ' Return value: <ArrayList<String>> ' Created
	 * By: <Jamal Nasir> ' Created On: <05/22/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickGuestStatementWithTaxBreakdown(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.reservationReports);
		res.reservationReports.click();
		test_steps.add("Click on reports");
		reslogger.info("Click on reports");

		Wait.WaitForElement(driver, OR_Reservation.guestStatementWithTaxBreakdown);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.guestStatementWithTaxBreakdown), driver);
		res.guestStatementWithTaxBreakdown.click();

		test_steps.add("Click on Guest Statement with Tax breakdown button");
		reslogger.info("Click on Guest Statement with Tax breakdown button");
		Wait.wait5Second();
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <clickGuestRegistartiontaxbreakdown> ' Description: <This
	 * method will click Guest Registration with Tax breakdown report button> '
	 * Input parameters: <WebDriver driver> ' Return value: <ArrayList<String>> '
	 * Created By: <Jamal Nasir> ' Created On: <05/22/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickGuestRegistartionTaxBreakdown(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.reservationReports);
		res.reservationReports.click();
		test_steps.add("Click on reports");
		reslogger.info("Click on reports");

		Wait.WaitForElement(driver, OR_Reservation.guestRegistartiontaxbreakdown);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.guestRegistartiontaxbreakdown), driver);
		res.guestRegistartiontaxbreakdown.click();
		test_steps.add("Click on Guest Registration with Tax breakdown button");
		reslogger.info("Click on Guest Registration with Tax breakdown button");
		Wait.wait5Second();

		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <replaceCurrency> ' Description: <This method will return
	 * string withOut currency symbol> ' Input parameters: <String str> ' Return
	 * value: <String> ' Created By: <Jamal Nasir> ' Created On: <05/22/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String replaceCurrency(String str) {
		str = str.replace("$", "");
		str = str.trim();
		reslogger.info("str : " + str);

		return str;
	}

	public void verifyNoteForSingleReservation(WebDriver driver, ArrayList<String> test_steps, String type,
			String subject, String desc, Date date, String policyType) throws InterruptedException {
		int CD = date.getDate();
		String day = String.valueOf(CD);
		reslogger.info("Day: " + day);

		if (policyType.equals("Cancel")) {

			String path = "//notes-info[contains(@params,'reservationDetail')]//tr/td[contains(@data-bind,'type')][(text()='"
					+ type + "')]/following-sibling::td[contains(@data-bind,'subject')][(text()='" + subject + "')] "
					+ "/following-sibling::td[contains(@data-bind,'details')][(text()='" + desc + "')]"
					+ "//following-sibling::td[contains(@data-bind,'updatedOn')][contains(text(),'" + day + "')]";

			reslogger.info(path);
			WebElement element = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(element, driver);
			assertTrue(element.isDisplayed(), "Failed: To verify Cancellation Notes");
			test_steps.add("Verified Notes <br>" + "TYPE: <b>" + type + " </b> SUBJECT:  <b>" + subject
					+ " </b> DESCRIPTION:  <b>" + desc + " </b> UPDATED ON:  <b>" + date + " </b>");
			reslogger.info("Verified Notes TYPE: " + type + " SUBJECT: " + subject + " DESCRIPTION: " + desc
					+ " UPDATED ON: " + date);

		} else if (policyType.equals("No Show")) {
			String path = "//notes-info[contains(@params,'reservationDetail')]//tr/td[contains(@data-bind,'type')][(text()='"
					+ type + "')]/following-sibling::td[contains(@data-bind,'subject')][(text()='" + subject + "')]"
					+ "//following-sibling::td[contains(@data-bind,'updatedOn')][contains(text(),'" + day + "')]";

			reslogger.info(path);
			WebElement element = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(element, driver);
			assertTrue(element.isDisplayed(), "Failed: To verify No Show Notes");
			test_steps.add("Verified Notes <br>" + "TYPE: <b>" + type + "</b> SUBJECT: <b>" + subject
					+ "</b> UPDATED ON: <b>" + date + "</b>");
			reslogger.info("Verified Notes TYPE: " + type + " SUBJECT: " + subject + " DESCRIPTION: " + desc
					+ " UPDATED ON: " + date);

		}
	}

	public void verifyStayInfoRoomNo(WebDriver driver, ArrayList<String> test_steps, List<String> roomNos) {
		String path = "//div[contains(text(),'Stay')]/..//div[@class='ir-flex-grow ir-roomInfo']//span[contains(@data-bind,'roomNumber')]";
		List<WebElement> roomNo = driver.findElements(By.xpath(path));
		for (int i = 0; i < roomNo.size(); i++) {
			String text = roomNo.get(i).getText();
			assertEquals(roomNo.get(i).getText().toLowerCase().trim(), roomNos.get(i).toLowerCase().trim(),
					"Failed: To verify Stay Info Room Nos");
			test_steps.add("Verified Stay Info Room Number <b>" + roomNos.get(i) + "</b>");
			reslogger.info("Verified Stay Info Room Number " + roomNos.get(i));
		}

	}

	public void verifyHistoryForChangedToUnAssigned(WebDriver driver, ArrayList<String> testSteps, String roomNo,
			String roomClass) {
		String changedRoom = "Changed room assignment from " + roomNo + " to " + roomClass + "";
		String path = "//span[contains(text(),'" + changedRoom + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Changed Room Assignment");
		testSteps.add("'History Tab' Verified <b>Changed room assignment from " + roomNo + " to </b>" + roomClass);
		reslogger.info("'History Tab' Verified  Changed room assignment from " + roomNo + " to " + roomClass);

	}

	public void commonMethodToverifyRoomsOnHistoryTab(WebDriver driver, ArrayList<String> test_steps, String abb,
			String RoomClassName)

			throws InterruptedException {
		String path = "//div[contains(@data-bind,'hasHistory')]//td/span[contains(@data-bind,'data.room')][contains(text(),'"
				+ abb + ": " + RoomClassName + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		/*
		 * assertEquals(element.getText().toLowerCase().trim(),(RoomClassName.
		 * toLowerCase().trim()), "Failed: To verify History Tab  Room");
		 */
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Room");
		test_steps.add("'History Tab' Verified Room: <b>" + abb + ": " + RoomClassName + "</b>");
		reslogger.info("'History Tab' Verified Room : " + abb + ": " + RoomClassName);
	}

	public void checkInProcess(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);

//		try {
//			List<WebElement> eleList = driver.findElements(By.xpath("//button[contains(text(),'CONFIRM CHECK IN')]|//button[contains(text(),'CONFIRM CHECK IN')]|//button[contains(text(),'PROCEED TO CHECK IN PAYMENT')]"));
//			
//			for(WebElement ele : eleList) {
//				if (ele.isEnabled()) {
//					Utility.clickThroughJavaScript(driver, ele);
//					test_steps.add("Clicking on  Confirm/Proceed Check-In Button");
//					reslogger.info("Clicking on Confirm/Proceed  Check-In Button");
//					break;
//				}
//			}
//			
//		}catch (Exception e) {
//		

		if (res.CP_Reservation_ConfirmCheckIn_Button.isEnabled()) {
			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_ConfirmCheckIn_Button);
			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckIn_Button, driver);
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			test_steps.add("Clicking on  Confirm Check-In Button");
			reslogger.info("Clicking on Confirm  Check-In Button");
			try {
				Wait.waitForToasterToBeVisibile(By.xpath("//*[@id='toast-container']//div[@class='toast-title']"),
						driver);
				String msg = Utility.getELementText(
						driver.findElement(By.xpath("//*[@id='toast-container']//div[@class='toast-title']")), false,
						"innerHTML");
				if (msg.toUpperCase().contains("FAIL")) {
					try {
						try {
							checkInProcess(driver, test_steps);
						} catch (Exception e) {
							e.printStackTrace();
							checkInProcess(driver, test_steps);
						}
					} catch (Exception e) {

					}
				}
			} catch (Exception e) {
				System.out.println("no toast");
			}

		} else if (res.CP_Reservation_ConfirmCheckInPayment_Button.isEnabled()) {
			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_ConfirmCheckInPayment_Button);
			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckInPayment_Button, driver);
			res.CP_Reservation_ConfirmCheckInPayment_Button.click();
			test_steps.add("Clicking on  Proceed to Check-In Payment Button");
			reslogger.info("Clicking on Proceed to Check-In Payment Button");
		}
//		}
		clickOnDirtyPopUp(driver, test_steps);
		verifySpinerLoading(driver);
	}

	public void AddTask(WebDriver driver, ArrayList test_steps, String TaskCategory, String TaskType,
			String TaskDetails, String TaskRemarks, String TaskDueon, String TaskAssignee, String TaskStatus)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		WebElements_TaskList TaskList = new WebElements_TaskList(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddTask);
		test_steps.add("******************* Adding Task **********************");
		reslogger.info("******************* Adding Task **********************");
		Utility.ScrollToElement(res.CP_AddTask, driver);
		res.CP_AddTask.click();
		test_steps.add("Click on Add Task");
		reslogger.info("Click on Add Task");
		Wait.wait5Second();
		String taskCategoryArrow = "//label[text()='Category']/..//button";
		Wait.WaitForElement(driver, taskCategoryArrow);
		Utility.ScrollToElement(driver.findElement(By.xpath(taskCategoryArrow)), driver);
		Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(taskCategoryArrow)));

		String taskCategory = "//label[text()='Category']/..//div/ul//span[text()='" + TaskCategory.trim() + "']";
		Wait.WaitForElement(driver, taskCategory);
		Utility.ScrollToElement(driver.findElement(By.xpath(taskCategory)), driver);
		Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(taskCategory)));
		test_steps.add("Select Task Category : " + TaskCategory);
		reslogger.info("Select Task Category : " + TaskCategory);
		Wait.wait2Second();
		String taskType = null;
		boolean isExist1 = Utility.isElementDisplayed(driver, By.xpath("(//div//label[text()='Type']/..//button)[2]"));
		if (isExist1) {
			taskType = "(//div//label[text()='Type']/..//button)[2]";
			reslogger.info(taskType);
			Wait.WaitForElement(driver, taskType);
			Utility.scrollAndClick(driver, By.xpath(taskType));
		} else {
			taskType = "//label[text()='Type']//..//div//button";
			reslogger.info(taskType);
			Wait.WaitForElement(driver, taskType);
			Utility.scrollAndClick(driver, By.xpath(taskType));
		}

		taskType = "//label[text()='Type']//..//div/ul//span[text()='" + TaskType.trim() + "']";
		Wait.WaitForElement(driver, taskType);
		driver.findElement(By.xpath(taskType)).click();
		test_steps.add("Select Task Type : " + TaskType);
		reslogger.info("Select Task Type : " + TaskType);

		if (Utility.validateString(TaskDueon)) {
			boolean isExist2 = Utility.isElementDisplayed(driver, By.xpath("(//label[text()='Due On']/..//i)[2]"));
			if (isExist2) {
				String dueCalender = "(//label[text()='Due On']/..//i)[2]";
				Wait.WaitForElement(driver, dueCalender);
				// driver.findElement(By.xpath(dueCalender)).click();
				Utility.clickThroughAction(driver, driver.findElement(By.xpath(dueCalender)));
			} else {
				String dueCalender = "//label[text()='Due On']/..//i";
				Wait.WaitForElement(driver, dueCalender);
				// driver.findElement(By.xpath(dueCalender)).click();
				Utility.clickThroughAction(driver, driver.findElement(By.xpath(dueCalender)));

			}
			Utility.selectStartDate(driver, test_steps, TaskDueon);
		}
		if (Utility.validateString(TaskDetails)) {
			String taskDetails = "//label[text()='Details']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, taskDetails);
			driver.findElement(By.xpath(taskDetails)).sendKeys(TaskDetails);
			test_steps.add("Select Task Details : " + TaskDetails);
		}
		if (Utility.validateString(TaskRemarks)) {
			String taskRemarks = "//label[text()='Remarks']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, taskRemarks);
			driver.findElement(By.xpath(taskRemarks)).sendKeys(TaskRemarks);
			test_steps.add("Enter Task Remarks : " + TaskRemarks);
			reslogger.info("Enter Task Remarks : " + TaskRemarks);
		}

		if (Utility.validateString(TaskAssignee)) {
			String taskAssignee = "//label[text()='Assignee']/..//input";
			WebElement elementAssigneeInput = driver.findElement(By.xpath(taskAssignee));
			elementAssigneeInput.sendKeys(TaskAssignee);
			Wait.wait3Second();
			String path = "//b[contains (text(), '" + TaskAssignee + "')]";
			boolean isExist = Utility.isElementPresent(driver, By.xpath(path));
			if (isExist) {
				WebElement searchAssignee = driver.findElement(By.xpath(path));
				Wait.wait2Second();
				Wait.explicit_wait_visibilityof_webelement(searchAssignee, driver);
				searchAssignee.click();
				reslogger.info("Task Assignee: " + TaskAssignee);
			}
		}
		if (Utility.validateString(TaskStatus)) {
			String taskStatus = "(//label[text()='Status']/..//button)[2]";
			Wait.WaitForElement(driver, taskStatus);
			driver.findElement(By.xpath(taskStatus)).click();
			String status = "(//label[text()='Status']/..//button)[2]/following-sibling::div//li//span[text()='"
					+ TaskStatus.trim() + "']";
			Wait.WaitForElement(driver, status);
			driver.findElement(By.xpath(status)).click();
			test_steps.add("Select Task Status : " + TaskStatus);
			reslogger.info("Select Task Status : " + TaskStatus);
		}

		String save = "//h4[text()='Add Task']/../..//button[text()='Save']";
		Wait.WaitForElement(driver, save);
		driver.findElement(By.xpath(save)).click();
		test_steps.add("Click on Save");
		reslogger.info("Click on Save");

	}

	public ArrayList<String> CheckInDate(WebDriver driver, int Days) throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckinDate);
		Wait.explicit_wait_visibilityof_webelement(elements.EnterCheckinDate, driver);
		Wait.explicit_wait_elementToBeClickable(elements.EnterCheckinDate, driver);
		elements.EnterCheckinDate.click();
		elements.EnterCheckinDate.clear();
		String checkInDate = ESTTimeZone.DateFormateForLineItem(Days);
		elements.EnterCheckinDate.sendKeys(checkInDate);
		test_steps.add("CheckIn date: " + checkInDate);
		return test_steps;
	}

	public ArrayList<String> CheckOutDate(WebDriver driver, int Days) throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckout);
		Wait.explicit_wait_visibilityof_webelement(elements.EnterCheckout, driver);
		Wait.explicit_wait_elementToBeClickable(elements.EnterCheckout, driver);
		elements.EnterCheckout.click();
		elements.EnterCheckout.clear();
		String checkInDate = ESTTimeZone.DateFormateForLineItem(Days);
		elements.EnterCheckout.sendKeys(checkInDate);
		test_steps.add("CheckIn date: " + checkInDate);
		return test_steps;

	}

	public void click_FindRooms(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_FindRooms);
		try {

			JavascriptExecutor jse = (JavascriptExecutor) driver;
			jse.executeScript("arguments[0].click();", res.CP_NewReservation_FindRooms);
		} catch (Exception e) {
			res.CP_NewReservation_FindRooms.click();
		}
		test_steps.add("Clicking on FindRooms");
		reslogger.info("Clicking on FindRooms");
		int count = 0;
		while (true) {
			if (driver.findElement(By.xpath("//section[@class='ir-roomClassDetails manual-override']")).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
	}

	public void select_Room(WebDriver driver, ArrayList test_steps, String RoomClass, String IsAssign, String Account)
			throws InterruptedException {
		reslogger.info(RoomClass);
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";
		reslogger.info(room);
		Wait.WaitForElement(driver, room);

		Utility.ScrollToElement(driver.findElement(By.xpath(room)), driver);
		String rooms = driver.findElement(By.xpath(room)).getText();

		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//div[@id='rcDtails']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//div[@id='rcDtails']//span[contains(text(),'" + RoomClass.trim()
					+ "')]/following-sibling::span";
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//div[@id='rcDtails']//span[contains(text(),'" + RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//div[@id='rcDtails']//span[contains(text(),'" + RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");

			} else {
				String roomnum = "//div[@id='rcDtails']//span[contains(text(),'" + RoomClass
						+ "')]/../../../following-sibling::div/div/select/option";
				reslogger.info(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				reslogger.info("count : " + count1);
				Random random = new Random();

				int randomNumber = random.nextInt(count1 - 1) + 1;
				reslogger.info("count : " + count1);
				reslogger.info("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//div[@id='rcDtails']//span[contains(text(),'" + RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//div[@id='rcDtails']//span[contains(text(),'" + RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li[" + randomNumber
						+ "]/a/span";

				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			}

			try {
				String select = "//div[@id='rcDtails']//span[contains(text(),'" + RoomClass
						+ "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();

			} catch (Exception e) {
				String select = "//div[@id='rcDtails']//span[contains(text(),'" + RoomClass
						+ "')]/../../../following-sibling::div//span[contains(@data-bind,'text: ( isSelected()')]";
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();

			}

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			/*
			 * while (true) { if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
			 * break; } else if (counter == 50) { break; } else { counter++;
			 * Wait.wait2Second(); } }
			 */
			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}
			if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
				String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
				Wait.WaitForElement(driver, policy);
				driver.findElement(By.xpath(policy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");

				loading = "(//div[@class='ir-loader-in'])[2]";
				counter = 0;

				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}

			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
	}

	public void click_Next(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		// Wait.waitForElementToBeInvisibile(By.xpath("(//div[@class='ir-loader-in'])[2]"),
		// driver);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Next), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_Next), driver);
		try {
			res.CP_NewReservation_Next.click();
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, res.CP_NewReservation_Next);
		}

		test_steps.add("Clicking on Next");
		reslogger.info("Clicking on Next");
		// int count = 0;
		// while (true) {
		// if (driver.findElement(By.xpath("//span[contains(text(),'Contact
		// Info')]")).isDisplayed()) {
		// break;
		// } else if (count == 20) {
		// break;
		// } else {
		// count++;
		// Wait.wait2Second();
		// }
		// }
		// reslogger.info("Waited to loading symbol");
	}

	public void click_BookNow(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		boolean isLoading = false;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Book);
		res.CP_NewReservation_Book.click();
		test_steps.add("Click on Book Now");
		reslogger.info("Click on Book Now");
		Wait.wait5Second();
		String loading = "//div[@class='ir-loader-in']";

		isLoading = Utility.isElementDisplayed(driver, By.xpath(loading));
		int count = 0;
		while (true) {
			if (!isLoading) {
				reslogger.info("Not Loading");
				break;
			} else if (count == 50) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}

		}

		reslogger.info("Waited to loading symbol");
	}

	public String GetTaskCategoryImage(WebDriver driver, int index) throws InterruptedException {
		Elements_CPReservation elements_CPReservation = new Elements_CPReservation(driver);

		try {
			Utility.app_logs.info("in try");
			Wait.WaitForElement(driver, OR_Reservation.SpanTaskCategoryImage);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.SpanTaskCategoryImage), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.SpanTaskCategoryImage), driver);
			Utility.ScrollToElement_NoWait(elements_CPReservation.SpanTaskCategoryImage.get(index), driver);

		} catch (Exception e) {
			driver.navigate().refresh();
			Utility.app_logs.info("in catch");
			Wait.WaitForElement(driver, OR_Reservation.SpanTaskCategoryImage);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.SpanTaskCategoryImage), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.SpanTaskCategoryImage), driver);
			Utility.ScrollToElement_NoWait(elements_CPReservation.SpanTaskCategoryImage.get(index), driver);

		}
		return elements_CPReservation.SpanTaskCategoryImage.get(index).getAttribute("class");

	}

	public String GetTaskName(WebDriver driver, int index) throws InterruptedException {
		Elements_CPReservation elements_CPReservation = new Elements_CPReservation(driver);
		return elements_CPReservation.SpanTaskName.get(index).getText();

	}

	public String GetTaskDetail(WebDriver driver, int index) throws InterruptedException {
		Elements_CPReservation elements_CPReservation = new Elements_CPReservation(driver);
		return elements_CPReservation.SpanTaskDetails.get(index).getText();

	}

	public String GetTaskDueOn(WebDriver driver, int index) throws InterruptedException {
		Elements_CPReservation elements_CPReservation = new Elements_CPReservation(driver);
		return elements_CPReservation.SpanTaskDueOn.get(index).getText();

	}

	public String GetTaskStatus(WebDriver driver, int index) throws InterruptedException {
		Elements_CPReservation elements_CPReservation = new Elements_CPReservation(driver);
		return elements_CPReservation.SpanTaskStatus.get(index).getText();

	}

	public void verifyReservationStausOnBasicSearch(WebDriver driver, ArrayList<String> test_steps, String statusExp) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.resStatusAtBasicSearch), driver);
		String statusDisplayed = res.resStatusAtBasicSearch.getText().trim();
		assertEquals(statusDisplayed, statusExp, "Failed: To verify reservation status at basic search");
		test_steps.add("Verified reservation status at basic search is : <b>" + statusDisplayed + "</b>");
		reslogger.info("Verified reservation status at basic search is : <b>" + statusDisplayed + "</b>");
	}

	public void enablePostCancellationFee(WebDriver driver, ArrayList<String> test_steps, boolean postCancellationFee) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean postCancellationFeeSelected = res.cancelResPopupPostCancelFeeCheckBox.isSelected();
		if (postCancellationFee) {
			if (!(postCancellationFeeSelected)) {
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.cancelResPopupPostCancelFeeCheckBoxClick),
						driver);
				res.cancelResPopupPostCancelFeeCheckBoxClick.click();
				test_steps.add("Enabling Post Cancellation Fee check box");
			} else {
				test_steps.add("Post Cancellation Fee check box is already selected");
			}
		} else {
			if (postCancellationFeeSelected) {
				res.cancelResPopupPostCancelFeeCheckBoxClick.click();
				test_steps.add("Unselecting Post Cancellation Fee check box");
			} else {
				test_steps.add("Post Cancellation Fee check box is already unselected");
			}
		}
	}

	public void unsavedDataYesClick(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			boolean popupDisplayed = driver.findElements(By.xpath(OR_Reservation.unsavedDataDisplayed)).size() > 0;
			if (popupDisplayed) {
				System.out.println("First");
				// res.unsavedDataPopupYesButton.click();
				JavascriptExecutor jse = (JavascriptExecutor) driver;
				jse.executeScript("arguments[0].click();", res.unsavedDataPopupYesButton);
				System.out.println("second");
				test_steps.add("Clicking on yes button on unsaved data popup");
			} else {
				test_steps.add("Unsaved data popup is not displayed");
			}
		} catch (Exception e) {
			reslogger.info(e);
		}
	}

	public void unsavedDataNoClick(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			boolean popupDisplayed = driver.findElements(By.xpath(OR_Reservation.unsavedDataDisplayed)).size() > 0;
			if (popupDisplayed) {
				System.out.println("First");
				// res.unsavedDataPopupYesButton.click();
				JavascriptExecutor jse = (JavascriptExecutor) driver;
				jse.executeScript("arguments[0].click();", res.unsavedDataPopupNoButton);
				System.out.println("second");
				test_steps.add("Clicking on no button on unsaved data popup");
			} else {
				test_steps.add("Unsaved data popup is not displayed");
			}
		} catch (Exception e) {
			reslogger.info(e);
		}
	}

	public String get_TripSummaryPaidAmount(WebDriver driver, ArrayList test_steps) {
		String PaidBalance = driver
				.findElement(By.xpath(
						"//span[text()='Summary']/../../..//div[contains(text(),'Paid')]/following-sibling::div"))
				.getText();
		PaidBalance = PaidBalance.replace("$ ", "");
		test_steps.add("Paid amount captured at trip summary is : <b>" + PaidBalance + "</b>");
		reslogger.info("Paid amount captured at trip summary is : " + PaidBalance);
		return PaidBalance;
	}

	public void verifyRoomChargesAtFolio(WebDriver driver, ArrayList<String> test_steps, String amount) {
		ArrayList<String> roomCharges = new ArrayList<>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		List<WebElement> roomChargesAmount = driver
				.findElements(By.xpath("//span[contains(text(), 'Room Charge')]/../..//td[@class='lineitem-amount']"));
		for (WebElement roomCharge : roomChargesAmount) {
			String roomChargeAtFolioLineItem = roomCharge.getText().replace("$ ", "");
			roomCharges.add(roomChargeAtFolioLineItem);
		}
		int i = 1;
		for (String roomChargesDisplayed : roomCharges) {
			assertEquals(roomChargesDisplayed, amount,
					"Failed - verify room charges at row " + i + " as : " + roomChargesDisplayed);
			test_steps.add("Successfully verified voided line items at row <b>" + i + "</b> as <b>"
					+ roomChargesDisplayed + "</b>");
			i++;
		}
	}

	public void verifyDepositPolicyDetailsAtPoliciesAndDisclaimers(WebDriver driver, ArrayList<String> test_steps,
			String policyName, String policyText) {
		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.depositPolicyCollapseIcon), driver);
			Utility.ScrollToViewElementINMiddle(driver, res.depositPolicyCollapseIcon);
			res.depositPolicyCollapseIcon.click();
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.depositPolicyNameAtDisclaimers), driver);
			String policyNameDisplayed = res.depositPolicyNameAtDisclaimers.getText();

			String policyNameAtToolTipDisplayed = res.depositPolicyToolTipTextAtDisclaimers.getAttribute("title");

			assertEquals(policyNameDisplayed, policyName, "Failed - Verify deposit policy name");
			test_steps.add("Successfully verified deposit policy name as <b>" + policyNameDisplayed + "</b>");
			reslogger.info("Successfully verified deposit policy name as <b>" + policyNameDisplayed + "</b>");

			/*
			 * assertEquals(policyTextDisplayed, policyText,
			 * "Failed - Verify deposit policy text");
			 * test_steps.add("Successfully verified deposit policy text as <b>" +
			 * policyTextDisplayed + "</b>");
			 * reslogger.info("Successfully verified deposit policy text as <b>" +
			 * policyTextDisplayed + "</b>");
			 */

			assertEquals(policyNameAtToolTipDisplayed, policyName, "Failed - Verify deposit policy name at tooltip");
			test_steps.add("Successfully verified deposit policy name at tooltip as <b>" + policyNameAtToolTipDisplayed
					+ "</b>");
			reslogger.info("Successfully verified deposit policy name at tooltip as <b>" + policyNameAtToolTipDisplayed
					+ "</b>");
			if (Utility.validateString(policyText)) {
				String policyTextDisplayed = res.depositPolicyTextAtDisclaimers.getText();
				assertEquals(policyTextDisplayed, policyText, "Failed - Verify deposit policy text");
				test_steps.add("Successfully verified deposit policy text as <b>" + policyTextDisplayed + "</b>");
				reslogger.info("Successfully verified deposit policy text as <b>" + policyTextDisplayed + "</b>");

			}

		} catch (Exception e) {

		}
	}

	public void verifyTripSummaryPaidAmount(WebDriver driver, ArrayList<String> test_steps, String paidAmount) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		paidAmount = df.format(Double.parseDouble(paidAmount));
		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			String paidAmountDisplayed = get_TripSummaryPaidAmount(driver, test_steps);
			paidAmountDisplayed.trim();
			assertEquals(paidAmountDisplayed, paidAmount, "Failed - Verify paid amount at summary");
			test_steps.add("Successfully verified paid amount displayed at trip summary as <b>" + paidAmountDisplayed
					+ "</b>");
			reslogger.info("Successfully verified paid amount displayed at trip summary as <b>" + paidAmountDisplayed
					+ "</b>");

		} catch (Exception e) {

		}
	}

	public void verifyTripPaidAmountAtFolio(WebDriver driver, ArrayList<String> test_steps, String paidAmount) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		paidAmount = df.format(Double.parseDouble(paidAmount));

		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			String paidAmountDisplayed = get_Payments(driver, test_steps);
			assertEquals(paidAmountDisplayed, paidAmount, "Failed - Verify paid amount at summary");
			test_steps
					.add("Successfully verified paid amount displayed at folio as <b>" + paidAmountDisplayed + "</b>");
			reslogger
					.info("Successfully verified paid amount displayed at folio as <b>" + paidAmountDisplayed + "</b>");

		} catch (Exception e) {

		}
	}

	/*
	 * <<<<<<< HEAD
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: enterAdditionalEmailAndPhoneNumber ' Description: enter email
	 * and phone number in additional room guest details ' Input parameters:
	 * WebDriver,String,String ' Return value: ArrayList<String> ' Created By: Adnan
	 * Ghaffar ' Created On: 28-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> enterAdditionalEmailAndPhoneNumber(WebDriver driver, String email, String phoneNumber)
			throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<String>();

		Wait.WaitForElement(driver, OR_Reservation.ADDITIONAL_EMAIL_ADDRESS);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ADDITIONAL_EMAIL_ADDRESS), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ADDITIONAL_EMAIL_ADDRESS), driver);
		Utility.ScrollToElement_NoWait(reservation.additionalEmailAddress, driver);
		reservation.additionalEmailAddress.clear();
		reservation.additionalEmailAddress.sendKeys(email);
		testSteps.add("Additional email : " + email);
		reslogger.info("Additional email : " + email);

		Wait.WaitForElement(driver, OR_Reservation.ADDITIONAL_PHONE_NUMBER);
		reservation.additionalPhoneNumber.clear();
		reservation.additionalPhoneNumber.sendKeys(phoneNumber);
		testSteps.add("Additional phone number : " + phoneNumber);
		reslogger.info("Additional phone number : " + phoneNumber);

		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getFristReservationRoomNumber> ' Description: <get the
	 * RoomNumber from frist reservation> ' Input parameters: < > ' Return value:
	 * <StringayList> ' Created By: <Reddy Ponnolu> ' Created On: <08/05/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getFristReservationRoomNumber(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.fristRoomNumberInReservation), driver);
		String fristRoomNumberInReservation = res.fristRoomNumberInReservation.getText();
		test_steps.add("frist RoomNumber InReservation ::" + fristRoomNumberInReservation);
		reslogger.info("frist RoomNumber InReservation ::" + fristRoomNumberInReservation);
		return fristRoomNumberInReservation;

	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: clickOnPrintButton ' Description: click on print button '
	 * Input parameters: WebDriver ' Return value: ArrayList<String> ' Created By:
	 * Adnan Ghaffar ' Created On: 28-05-2020
	 * 
	 * <<<<<<< HEAD ' Method Name: <getSecondReservationRoomNumber> ' Description:
	 * <get the RoomNumber from Second reservation> ' Input parameters: < > ' Return
	 * value: <String> ' Created By: <Reddy Ponnolu> ' Created On: <08/05/2020>
	 * ======= >>>>>>> b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public ArrayList<String> clickOnPrintButton(WebDriver driver) {
		ArrayList<String> testSteps = new ArrayList<String>();
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CLICK_ON_PRINT_BUTTON);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CLICK_ON_PRINT_BUTTON), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CLICK_ON_PRINT_BUTTON), driver);
		if (!element.radioButtonMailingDetails.isSelected()) {
			element.radioButtonMailingDetails.click();
			testSteps.add("Mailing details is selected");
		} else {
			testSteps.add("Mailing details is selected");
		}

		element.clickOnPrintButton.click();
		testSteps.add("Click print button");

		return testSteps;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: downloadPDFReport ' Description: download PDF Report of Guest
	 * Reservation ' Input parameters: WebDriver ' Return value: String ' Created
	 * By: Adnan Ghaffar ' Created On: 11-05-2020
	 * 
	 * <<<<<<< HEAD ' Method Name: <getFristReservationRoomCharge> ' Description:
	 * <get the RoomCharge from frist reservation> ' Input parameters: < > ' Return
	 * value: <String> ' Created By: <Reddy Ponnolu> ' Created On: <08/05/2020>
	 * ======= >>>>>>> b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public void downloadPDFReport(WebDriver driver) throws InterruptedException, IOException {

		Wait.wait15Second();
		Wait.waitForElementToBeGone(driver,
				driver.findElement(By.xpath("//*[@id='bpjscontainer_23']/div[2]//div[@class='modules_loading']")),
				10000);
		ArrayList<String> tabs2 = new ArrayList<String>(driver.getWindowHandles());
		driver.switchTo().window(tabs2.get(1));
		Wait.wait2Second();
		Utility.app_logs.info("after swithc");

		new Select(driver.findElement(By.xpath("//*[@id='drpReportType']"))).selectByVisibleText("Download As Pdf");
		Wait.wait5Second();

		driver.findElement(By.xpath("//*[@id='btnImgDownload']")).click();
		Wait.wait5Second();

		driver.close();
		driver.switchTo().window(tabs2.get(0));

	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: clickOnPrintIcon ' Description: click on report print icon '
	 * Input parameters:WebDriver ' Return value: void ' Created By: Adnan Ghaffar '
	 * Created On: 11-05-2020
	 * 
	 * <<<<<<< HEAD ' Method Name: <getSecondReservationRoomCharge> ' Description:
	 * <get the RoomCharge from second reservation> ' Input parameters: < > ' Return
	 * value: <String> ' Created By: <Reddy Ponnolu> ' Created On: <08/05/2020>
	 * ======= >>>>>>> b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public ArrayList<String> clickOnPrintIcon(WebDriver driver) throws InterruptedException, IOException {
		ArrayList<String> testSteps = new ArrayList<String>();
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.PRINT_ICON);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.PRINT_ICON), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.PRINT_ICON), driver);
		element.printIcon.click();
		testSteps.add("Click on print icon");

		return testSteps;

	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * <<<<<<< HEAD ########################
	 *
	 * ' Method Name: <getRoomSelectedFromTapeChart> ' Description: <Get the
	 * reservation Room number which is created from the tape chart> ' Input
	 * parameters: <WebDriver , ArrayList> ' Return value: <String> ' Created By:
	 * <Adhnan Ghaffar> ' Created On: <05/11/2020> ======= #### ################
	 * 
	 * ' Method Name: clickOnAdvanceSearch ' Description: click on advanced ' Input
	 * parameters: WebDriver ' Return value: String ' Created By: Adnan Ghaffar '
	 * Created On: 28-05-2020
	 * 
	 * >>>>>>> b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public ArrayList<String> clickOnAdvance(WebDriver driver) throws InterruptedException {
		ArrayList<String> testSteps = new ArrayList<String>();
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CLICK_ON_ADVANCE_SEARCH);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CLICK_ON_ADVANCE_SEARCH), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CLICK_ON_ADVANCE_SEARCH), driver);
		element.clickOnAdvanceSearch.click();
		testSteps.add("Click on advanced");
		reslogger.info("Clicked on advance link");
		return testSteps;

	}
	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getGuestInfoText ' Description: get guest Info text ' Input
	 * parameters: WebDriver ' Return value: String ' Created By: Adnan Ghaffar '
	 * Created On: 28-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public String getGuestInfoText(WebDriver driver) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GET_GUEST_INFO_TEXT);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GET_GUEST_INFO_TEXT), driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GET_GUEST_INFO_TEXT), driver);
		String guestInfo = element.getGuestInfoText.getText();

		return guestInfo;

	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getReservationInfoText ' Description: get reservation Info
	 * text ' Input parameters: WebDriver ' Return value: String ' Created By: Adnan
	 * Ghaffar ' Created On: 28-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public String getReservationInfoText(WebDriver driver) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GET_RESERVATION_INFO_TEXT);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GET_RESERVATION_INFO_TEXT), driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GET_RESERVATION_INFO_TEXT), driver);
		String guestInfo = element.getReservationInfoText.getText();

		return guestInfo;

	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getMarketingInfoText ' Description: get Marketing Info text '
	 * Input parameters: WebDriver ' Return value: String ' Created By: Adnan
	 * Ghaffar ' Created On: 28-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public String getMarketingInfoText(WebDriver driver) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GET_MARKETING_INFO_TEXT);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GET_MARKETING_INFO_TEXT), driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GET_MARKETING_INFO_TEXT), driver);
		String guestInfo = element.getMarketingInfoText.getText();

		return guestInfo;

	}

	public String verifyEmailPDFDetails(String folder, ArrayList<String> documentfields, ArrayList<String> test_steps)
			throws IOException {
		File getFile = Utility.getLatestFilefromDir(System.getProperty("user.dir") + File.separator + "externalFiles"
				+ File.separator + "downloadFiles" + File.separator + folder + File.separator);
		reslogger.info(getFile.getAbsolutePath());
		reslogger.info(getFile.getName());
		PDDocument document = PDDocument.load(getFile);
		document.getClass();
		String pdfFileInText = null;
		if (!document.isEncrypted()) {
			PDFTextStripperByArea stripper = new PDFTextStripperByArea();
			stripper.setSortByPosition(true);
			PDFTextStripper tStripper = new PDFTextStripper();
			pdfFileInText = tStripper.getText(document);
			String lines[] = pdfFileInText.split("\\n");
			boolean flag1 = true;
			for (String string : documentfields) {
				boolean propertyFound = false;
				for (String line : lines) {
					if (string.equalsIgnoreCase(line.trim())) {
						test_steps.add("Verified property details (" + string + ") in Guest Statement Report");
						reslogger.info("Verified propertyDetails  (" + string + ") in Guest Statement Report");
						propertyFound = true;
						break;
					}
				}
				if (!propertyFound) {
					test_steps.add("Property details for (" + string + ") not found in Guest Statement Report");
					reslogger.info("Property details for (" + string + ") not in Guest Statement Report");
				}
			}
			document.close();

			if (getFile.delete()) {
				reslogger.info("File deleted successfully");
			} else {
				reslogger.info("Failed to delete the file");
			}
		}
		return pdfFileInText;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getGuestName ' Description: get guest name from table after
	 * search ' Input parameters: WebDriver,String,int ' Return value: String '
	 * Created By: Adnan Ghaffar ' Created On: 11-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public String getGuestNameAfterSearch(WebDriver driver, int index) throws InterruptedException {

		String path = "(//a[contains(@data-bind,'text: GuestName')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String guestName = element.getAttribute("title");
		return guestName;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getReservationNumberAfterSearch ' Description: get reservation
	 * number from search table ' Input parameters: Webdriver,int ' Return value:
	 * String ' Created By: Adnan Ghaffar ' Created On: 11-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public String getReservationNumberAfterSearch(WebDriver driver, int index) throws InterruptedException {

		String path = "(//span[contains(@data-bind,'text: ConfirmationNumber')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String reservationNumber = element.getText();
		return reservationNumber;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getAdultsAfterSearch ' Description: get Adults from search
	 * table ' Input parameters: Webdriver,int ' Return value: String ' Created By:
	 * Adnan Ghaffar ' Created On: 11-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public String getAdultsAfterSearch(WebDriver driver, int index) throws InterruptedException {

		String path = "(//span[contains(@data-bind,'text: NumberOfAdults')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String adults = element.getText();
		return adults;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * <<<<<<< HEAD ' Method Name: <CalculateDatesForMRCheckInCheckOut> '
	 * Description: <This method will return Dates for MR Reservations CheckIn and
	 * CheckOut> ' Input parameters: <int days> ' Return value: <String> ' Created
	 * By: <Jamal Nasir> ' Created On: <05/18/2020> ======= ' Method Name:
	 * getChildrenAfterSearch ' Description: get children from search table ' Input
	 * parameters: Webdriver,int ' Return value: String ' Created By: Adnan Ghaffar
	 * ' Created On: 11-05-2020 >>>>>>> b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public String getChildrenAfterSearch(WebDriver driver, int index) throws InterruptedException {

		String path = "(//span[contains(@data-bind,'text: NumberOfChildren')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String children = element.getText();
		return children;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * <<<<<<< HEAD ' Method Name: <getMRBRoomNumber> ' Description: <Return room
	 * numbers based on index for MRB Reservations> ' Input parameters: <WebDriver
	 * driver, String IsAssign, int roomIndex> ' Return value: <String> ' Created
	 * By: <Jamal Nasir> ' Created On: <05/18/2020> ======= ' Method Name:
	 * getRoomAfterSearch ' Description: get room from search table ' Input
	 * parameters: Webdriver,int ' Return value: String ' Created By: Adnan Ghaffar
	 * ' Created On: 11-05-2020 >>>>>>> b6325d430d2b99d91f1cb6eaafb2ae7d120e5db0
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public String getRoomAfterSearch(WebDriver driver, int index) throws InterruptedException {

		String path = "(//span[contains(@data-bind,'text: RoomClassName')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String room = element.getText();
		return room;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getArrivalDateAfterSearch ' Description: get arrival date from
	 * search table ' Input parameters: Webdriver,int ' Return value: String '
	 * Created By: Adnan Ghaffar ' Created On: 11-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public String getArrivalDateAfterSearch(WebDriver driver, int index) throws InterruptedException {

		String path = "(//span[contains(@data-bind,'text: DateStart')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String arrivalDate = element.getText();
		return arrivalDate;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getDepartDateAfterSearch ' Description: get departure date
	 * from search table ' Input parameters: Webdriver,int ' Return value: String '
	 * Created By: Adnan Ghaffar ' Created On: 11-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public String getDepartDateAfterSearch(WebDriver driver, int index) throws InterruptedException {

		String path = "(//span[contains(@data-bind,'text: DateEnd')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String departDate = element.getText();
		return departDate;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getNightsAfterSearch ' Description: get nights from search
	 * table ' Input parameters: Webdriver,int ' Return value: String ' Created By:
	 * Adnan Ghaffar ' Created On: 11-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public String getNightsAfterSearch(WebDriver driver, int index) throws InterruptedException {

		String path = "(//span[contains(@data-bind,'text: NoOfNights')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String nights = element.getText();
		return nights;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * Method Name: getReservationStatusAfterSearch Description: getreservation
	 * status from search table Input parameters: Webdriver,int Return value: String
	 * Created By: Adnan Ghaffar Created On: 11-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public String getReservationStatusAfterSearch(WebDriver driver, int index) {
		String path = "(//span[contains(@data-bind,'StatusName.replace')])[" + index + "]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String status = element.getText();
		return status;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getSecondReservationRoomNumber> ' Description: <get the
	 * RoomNumber from Second reservation> ' Input parameters: < > ' Return value:
	 * <String> ' Created By: <Reddy Ponnolu> ' Created On: <08/05/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getSecondReservationRoomNumber(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.secondRoomNumberInReservation), driver);
		String secondRoomNumberInReservation = res.secondRoomNumberInReservation.getText();
		test_steps.add("Second RoomNumber InReservation ::" + secondRoomNumberInReservation);
		reslogger.info("Second RoomNumber InReservation ::" + secondRoomNumberInReservation);
		return secondRoomNumberInReservation;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getFristReservationRoomCharge> ' Description: <get the
	 * RoomCharge from frist reservation> ' Input parameters: < > ' Return value:
	 * <String> ' Created By: <Reddy Ponnolu> ' Created On: <08/05/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getFristReservationRoomCharge(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.fristRoomChageInReservation), driver);
		String fristRoomChageInReservation = res.fristRoomChageInReservation.getText();
		test_steps.add("frist RoomChage Amount ::" + fristRoomChageInReservation);
		reslogger.info("frist RoomChage amount ::" + fristRoomChageInReservation);
		return fristRoomChageInReservation;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getSecondReservationRoomCharge> ' Description: <get the
	 * RoomCharge from second reservation> ' Input parameters: < > ' Return value:
	 * <String> ' Created By: <Reddy Ponnolu> ' Created On: <08/05/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getSecondReservationRoomCharge(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.SecondRoomChageInReservation), driver);
		String SecondRoomChageInReservation = res.SecondRoomChageInReservation.getText();
		test_steps.add("second RoomChage Amount ::" + SecondRoomChageInReservation);
		reslogger.info("second RoomChage amount ::" + SecondRoomChageInReservation);
		return SecondRoomChageInReservation;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: <getRoomSelectedFromTapeChart> ' Description: <Get the
	 * reservation Room number which is created from the tape chart> ' Input
	 * parameters: <WebDriver , ArrayList> ' Return value: <String> ' Created By:
	 * <Adhnan Ghaffar> ' Created On: <05/11/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getRoomSelectedFromTapeChart(WebDriver driver, ArrayList test_steps) {
		String room = "//div[contains(@data-bind,'roomClass.name')]";
		Wait.WaitForElement(driver, room);
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(room)), driver);
		room = driver.findElement(By.xpath(room)).getText();
		return room;
	}

	public void uncheckCreateGuestProfile(WebDriver driver, ArrayList<String> test_steps, String IsGuesProfile) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CreateGuestProfile);
		if (IsGuesProfile.contentEquals("Yes")) {
			if (!res.CP_NewReservation_CreateGuestProfile.isSelected()) {
				driver.findElement(By.xpath("//span[contains(text(),'Create Guest Profile')]/..")).click();
				test_steps.add("Create Guest Profile selected");
				reslogger.info("Create Guest Profile selected");
			} else {
				test_steps.add("Create Guest Profile selected");
				reslogger.info("Create Guest Profile selected");
			}
		} else {
			if (res.CP_NewReservation_CreateGuestProfile.isSelected()) {
				driver.findElement(By.xpath("//span[contains(text(),'Create Guest Profile')]/..")).click();
				test_steps.add("Create Guest Profile unselected");
				reslogger.info("Create Guest Profile unselected");
			} else {
				test_steps.add("Create Guest Profile unselected");
				reslogger.info("Create Guest Profile unselected");
			}
		}
	}

	public ArrayList<String> enterEmail(WebDriver driver, ArrayList<String> test_steps, String Email) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Email);
		res.CP_NewReservation_Email.clear();
		res.CP_NewReservation_Email.sendKeys(Email);
		test_steps.add("Enter Email : " + Email);
		reslogger.info("Enter Email : " + Email);
		return test_steps;
	}

	public ArrayList<String> SelectReferral(WebDriver driver, String Referral) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Referral);
		Wait.explicit_wait_visibilityof_webelement(element.CP_NewReservation_Referral, driver);
		Wait.explicit_wait_elementToBeClickable(element.CP_NewReservation_Referral, driver);
		Utility.ScrollToElement(element.CP_NewReservation_Referral, driver);
		element.CP_NewReservation_Referral.click();

		String pathReferral = "(//label[text()='Referral']/preceding-sibling::div//ul/li//span[contains(text(),'"
				+ Referral.trim() + "')])[2]";
		reslogger.info(pathReferral);
		Wait.WaitForElement(driver, pathReferral);
		WebElement elementReferral = driver.findElement(By.xpath(pathReferral));
		Wait.explicit_wait_visibilityof_webelement(elementReferral, driver);
		elementReferral.click();
		reslogger.info("Selected Referral as : " + Referral);
		test_steps.add("Selected Referral as : " + Referral);
		return test_steps;
	}

	public ArrayList<String> getReservationEmail(WebDriver driver, String Email) {
		ArrayList<String> test_steps = new ArrayList<>();
		Email = Email.substring(0, 10);
		reslogger.info("Email : " + Email);
		String EmailPath = "//div[contains(text(), 'Any scheduled emails will be sent to " + Email + "')]";
		Wait.WaitForElement(driver, EmailPath);
		assertTrue(driver.findElement(By.xpath(EmailPath)).isDisplayed(), "Failed: Email verifications");
		test_steps.add("Verified Email in Reservation Save Popup");
		reslogger.info("Verified Email in Reservation Save Popup");

		return test_steps;
	}

	public String getReservationStatus(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ReservationStatus);
		String status = res.CP_NewReservation_ReservationStatus.getText();
		test_steps.add("Reservation Status : " + status);
		reslogger.info("Reservation Status : " + status);
		return status;
	}

	public String getRoomNumber(WebDriver driver, ArrayList test_steps, String IsAssign) {
		String room = "//span[text()='ROOM:']/following-sibling::span";
		Wait.WaitForElement(driver, room);
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(room)), driver);
		room = driver.findElement(By.xpath(room)).getText();

		if (IsAssign.equalsIgnoreCase("No")) {
			if (room.equalsIgnoreCase("Unassigned")) {
				test_steps.add("Room Number is : Unassigned");
				reslogger.info("Room Number is : Unassigned");
			}
		} else {
			test_steps.add("Room Number is : " + room);
			reslogger.info("Room Number is : " + room);
		}
		return room;
	}

	public String getRoomClassResDetail(WebDriver driver) {
		String path = "//div[contains(@class,'roomInfo')]//span[contains(@data-bind,'roomClassName')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		return driver.findElement(By.xpath(path)).getText();
	}

	public void closeFirstOpenedReservation(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		String close = "//ul[@class='sec_nav']//li[5]//i";
		try {
			// Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(close)),
			// driver);
			Wait.WaitForElement(driver, close);
			Wait.wait2Second();
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Closed the reservation");
			reslogger.info("Closed the reservation");
		} catch (Exception e) {
			close = "(//ul[@class='sec_nav']//li[5]//i)[2]";
			Wait.WaitForElement(driver, close);
			Wait.wait2Second();
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Closed the reservation");
			reslogger.info("Closed the reservation");
		}
	}

	public String checkPDF(String folder) throws IOException {
		File getFile = Utility.getLatestFilefromDir(System.getProperty("user.dir") + File.separator + "externalFiles"
				+ File.separator + "downloadFiles" + File.separator + folder + File.separator);
		reslogger.info(getFile.getAbsolutePath());
		reslogger.info(getFile.getName());
		PDDocument document = PDDocument.load(getFile);
		document.getClass();
		String pdfFileInText = null;
		if (!document.isEncrypted()) {
			PDFTextStripperByArea stripper = new PDFTextStripperByArea();
			stripper.setSortByPosition(true);
			PDFTextStripper tStripper = new PDFTextStripper();
			pdfFileInText = tStripper.getText(document);
			document.close();

			if (getFile.delete()) {
				reslogger.info("File deleted successfully");
			} else {
				reslogger.info("Failed to delete the file");
			}
		}
		return pdfFileInText;
	}

	public void Click_CheckInButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_Reservation_CheckInButton), driver);
		Utility.ScrollToElement(res.CP_Reservation_CheckInButton, driver);
		res.CP_Reservation_CheckInButton.click();
		test_steps.add("Click Check In  Button");
		reslogger.info("Click Check In  Button");

	}

	public void createTaxExempt(WebDriver driver, String taxExcemptId, ArrayList<String> test_steps)
			throws InterruptedException {
		clickTaxExcemptCheckbox(driver, test_steps);
		enterTaxExceptId(driver, taxExcemptId, test_steps);
	}

	public void enterTaxExceptId(WebDriver driver, String taxExcemptId, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_10sec(res.enterTaxExcemptId, driver);
		if (res.enterTaxExcemptId.isEnabled()) {
			res.enterTaxExcemptId.sendKeys(taxExcemptId);
			test_steps.add("Enter taxExempt Id: " + "<b>" + taxExcemptId + "</b>");
		}
	}

	public void clickTaxExcemptCheckbox(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_10sec(res.clickTaxExcemptCheckBox, driver);
		Wait.explicit_wait_elementToBeClickable(res.clickTaxExcemptCheckBox, driver);
		res.clickTaxExcemptCheckBox.click();
		Utility.ScrollToElement(res.clickTaxExcemptCheckBox, driver);
		test_steps.add("Click at taxExempt checkBox");
	}

	public boolean isTaxPresentAfterTaxExempt(WebDriver driver, ArrayList<String> test_steps, String taxLedgeraccount,
			String TaxDescriptions) throws InterruptedException {
		boolean isTaxExist = true;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		int roomChargesFolioCount = getRoomChargeFolioItemCountInRes(driver);
		for (int i = 1; i <= roomChargesFolioCount; i++) {
			String xpath = "(//tbody[starts-with(@data-bind,'getElement: ComputedFolioItemsElement')]/tr/td/span[text()='"
					+ taxLedgeraccount + "']/../following-sibling::td/a)[" + i + "]";
			// clickroomChargeFolioItems
			Wait.waitUntilPresenceOfElementLocated(xpath, driver);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(xpath)), driver);
			driver.findElement(By.xpath(xpath)).click();
			test_steps.add("Click at folio line item: " + i + " of" + " " + taxLedgeraccount);
			Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);

			String xpath1 = "(//a[text()='" + TaxDescriptions + "'])[1]/ancestor::td/following-sibling::td/span";

			isTaxExist = verifySizeOfChildLineItems(driver, xpath1);
			test_steps.add(
					"Get if the created tax is present under folio after tax exempt: " + "<b>" + isTaxExist + "</b>");
			clickFolioPopupCancel(driver);
			test_steps.add("Close folio popup");
		}

		return isTaxExist;

	}

	public boolean verifySizeOfChildLineItems(WebDriver driver, String xpath) throws InterruptedException {
		boolean ChildLineItems = false;
		Wait.wait5Second();
		try {
			// String xpath1 = "//table[@class='table table-bordered
			// table-striped table-hover
			// table-condensed']/tbody/tr/td/span[text()='Laundry']";
			ChildLineItems = driver.findElements(By.xpath(xpath)).size() != 0;
		} catch (Exception e) {
			reslogger.info(e);
			ChildLineItems = false;
		}
		return ChildLineItems;
	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <CalculateDatesForMRCheckInCheckOut> ' Description: <This
	 * method will return Dates for MR Reservations CheckIn and CheckOut> ' Input
	 * parameters: <int days> ' Return value: <String> ' Created By: <Jamal Nasir> '
	 * Created On: <05/18/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String CalculateDatesForMRCheckInCheckOut(int days) throws InterruptedException, ParseException {
		String firstDate = ESTTimeZone.DateFormateForCheckInCheckOut(days);
		String secondDate = ESTTimeZone.DateFormateForCheckInCheckOut(days + 1);
		String resDate = firstDate + "|" + secondDate;
		reslogger.info(resDate);
		return resDate;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getMRBRoomNumber> ' Description: <Return room numbers based
	 * on index for MRB Reservations> ' Input parameters: <WebDriver driver, String
	 * IsAssign, int roomIndex> ' Return value: <String> ' Created By: <Jamal Nasir>
	 * ' Created On: <05/18/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getMRBRoomNumber(WebDriver driver, String IsAssign, int roomIndex) {
		String room = "(//span[text()='ROOM:']/following-sibling::span)[" + roomIndex + "]";
		Wait.WaitForElement(driver, room);
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(room)), driver);
		room = driver.findElement(By.xpath(room)).getText();
		if (IsAssign.equalsIgnoreCase("No")) {
			if (room.equalsIgnoreCase("Unassigned")) {
				reslogger.info("Room Number is : Unassigned");
			}
		} else {
			reslogger.info("Room Number is : " + room);
		}
		return room;
	}

	public boolean verifyCheckINPaymentWindow(WebDriver driver) {
		boolean value = Utility.isElementPresent(driver,
				By.xpath("//h4[contains(@data-bind,'PaymentPopupHeaderText()')][contains(text(),'Check In Payment')]"));
		return value;
	}

	public String getDepositDueAmount(WebDriver driver) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.getDepositDueCharge, driver);
		Wait.explicit_wait_visibilityof_webelement(res.getDepositDueCharge, driver);
		String depositAmount = res.getDepositDueCharge.getText().replace("$", "").trim();
		return depositAmount;

	}

	public void selectGuestFolioItemWithIndexInRes(WebDriver driver, int index) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_FolioDetailDropDownBox);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_FolioDetailDropDownBox, driver);
		String xpath = "(//ul[@class='dropdown-menu inner']/li/a/span[starts-with(.,'Guest Folio For')])[" + index
				+ "]";
		driver.findElement(By.xpath(xpath)).click();
	}

	public int getTotalGuestFolioItem(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_FolioDetailDropDownBox);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_FolioDetailDropDownBox, driver);
		int guestFolioItems = res.getTotalGuestFolioItemInRes.size();
		test_steps.add("Guest folio Count in Folio details dropdown: " + "<b>" + guestFolioItems + "</b>");
		return guestFolioItems;
	}

	public void enterAdultsChildren(WebDriver driver, String AdultsChildrens, String Value, int RoomIndex)
			throws InterruptedException {
		String elementxpath = "(//label[text()='" + AdultsChildrens + "']/preceding-sibling::input)[" + RoomIndex + "]";
		Wait.explicit_wait_xpath(elementxpath, driver);
		WebElement ElementInput = driver.findElement(By.xpath(elementxpath));
		Wait.explicit_wait_visibilityof_webelement(ElementInput, driver);
		Utility.ScrollToElement(ElementInput, driver);
		ElementInput.sendKeys(Keys.chord(Keys.CONTROL, "a"), Value);
		assertEquals(ElementInput.getAttribute("value"), Value, "Failed: Entered Date missmatched");
	}

	public ArrayList<String> selectRateplan(WebDriver driver, String Rateplan, String PromoCode, int RoomIndex)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		String elementxpath = "(" + OR_Reservation.CP_NewReservation_Rateplan + ")[" + RoomIndex + "]";
		Wait.explicit_wait_xpath(elementxpath, driver);
		WebElement Element = driver.findElement(By.xpath(elementxpath));
		try {
			Wait.explicit_wait_visibilityof_webelement_3(Element, driver);
		} catch (Exception e) {
			elementxpath = "(" + OR_Reservation.CP_NewReservation_Rateplan + ")[2]";
			Element = driver.findElement(By.xpath(elementxpath));
			Wait.explicit_wait_visibilityof_webelement_3(Element, driver);
		}
		Wait.explicit_wait_elementToBeClickable(Element, driver);
		Utility.ScrollToElement(Element, driver);
		Element.click();
		String rate = "(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div)[" + RoomIndex
				+ "]//span[contains(text(),'" + Rateplan + "')]/..";
		reslogger.info(rate);
		Wait.WaitForElement(driver, rate);
		try {
			driver.findElement(By.xpath(rate)).click();
		} catch (Exception e) {
			try {
				rate = "(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div)[2]//span[contains(text(),'"
						+ Rateplan + "')]/..";
				driver.findElement(By.xpath(rate)).click();
			} catch (Exception e2) {
				rate = "(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div)[3]//span[contains(text(),'"
						+ Rateplan + "')]/..";
				driver.findElement(By.xpath(rate)).click();
			}
		}
		reslogger.info("Selecting the rateplan : " + Rateplan);
		testSteps.add("Selecting the rateplan : " + Rateplan);
		if (Rateplan.contains("Promo")) {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PromoCode);
			res.CP_NewReservation_PromoCode.clear();
			res.CP_NewReservation_PromoCode.sendKeys(PromoCode);
			reslogger.info("Enter promocode : " + PromoCode);
			testSteps.add("Enter promocode : " + PromoCode);
		}
		return testSteps;
	}

	public void selectRoom(WebDriver driver, String RoomClass, int RoomNumber, int RoomIndex, ArrayList<String> steps)
			throws InterruptedException {
		Elements_CPReservation reservationPage = new Elements_CPReservation(driver);
		steps.add("Selecting  Room number '" + RoomIndex + "'");
		String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//..//following-sibling::div//div/select//following-sibling::div";
		verifySpinerLoading(driver);
		reslogger.info(expand);
		Wait.WaitForElement(driver, expand);
		Wait.waitForElementToBeVisibile(By.xpath(expand), driver);
		Wait.waitForElementToBeClickable(By.xpath(expand), driver);
		WebElement Expand = driver.findElement(By.xpath(expand));
		Utility.ScrollToElement(Expand, driver);
		Wait.wait3Second();
		try {
			Utility.app_logs.info("in try");
			Expand.click();

		} catch (Exception e) {
			Utility.app_logs.info("in catch");

			expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]//..//..//..//following-sibling::div//div/select//following-sibling::div//button";
			verifySpinerLoading(driver);
			reslogger.info(expand);

			Expand = driver.findElement(By.xpath(expand));
			Expand.click();

		}
		String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ RoomClass + "')]//..//..//..//following-sibling::div//div/select//following-sibling::div//ul/li["
				+ RoomNumber + "]//a//span";
		Wait.WaitForElement(driver, roomNumber);
		driver.findElement(By.xpath(roomNumber)).click();
		String Selectxpath = "//section[@class='ir-roomClassDetails manual-override']//span[text()='" + RoomClass
				+ "']//ancestor::div[contains(@data-bind,'expandRoomClassRateInfo')]//span[contains(@data-bind,'SELECT')]";
		Wait.WaitForElement(driver, Selectxpath);
		WebElement Select = driver.findElement(By.xpath(Selectxpath));
		Utility.ScrollToElement(Select, driver);
		Select.click();
		steps.add("Click Select button");
		reslogger.info("Click Select button");
		String RoomNO = driver.findElement(By.xpath(expand)).getAttribute("title");
		steps.add("Selected Room as '" + RoomClass + " : " + RoomNO + "'");
		reslogger.info("Selected Room as '" + RoomClass + " : " + RoomNO + "'");

	}

	public void addPrimaryRoom(WebDriver driver, ArrayList test_steps, ArrayList al) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String primaryArrow = "//span[text()='Primary Room']//..//..//following-sibling::div//button";
		Wait.WaitForElement(driver, primaryArrow);
		Wait.waitForElementToBeVisibile(By.xpath(primaryArrow), driver);
		Wait.waitForElementToBeClickable(By.xpath(primaryArrow), driver);
		Wait.wait2Second();
		driver.findElement(By.xpath(primaryArrow)).click();
		String primaryRoom = "//span[text()='Primary Room']//..//..//following-sibling::div//li[2]//span";
		primary = driver.findElement(By.xpath(primaryRoom)).getText();
		Wait.WaitForElement(driver, primaryRoom);
		driver.findElement(By.xpath(primaryRoom)).click();
		test_steps.add("Selected Primary Room as : " + primary);
		reslogger.info("Selected Primary Room as : " + primary);
		al.add(primary);
	}

	public void addAdditionalRoom(WebDriver driver, ArrayList test_steps, ArrayList al) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		String additional = "(//span[text()='Additional Room'])";
		int count = driver.findElements(By.xpath(additional)).size();
		for (int i = 1; i <= count; i++) {
			String additionalArrow = "(//span[text()='Additional Room'])[" + i
					+ "]/../../following-sibling::div//button";
			Wait.WaitForElement(driver, additionalArrow);
			driver.findElement(By.xpath(additionalArrow)).click();
			String additionalRoom = "(//span[text()='Additional Room'])[" + i + "]//..//..//following-sibling::div//li["
					+ (i + 2) + "]//span";
			additionalRoomNo = driver.findElement(By.xpath(additionalRoom)).getText();
			Wait.WaitForElement(driver, additionalRoom);
			driver.findElement(By.xpath(additionalRoom)).click();
			test_steps.add("Selected Addtinal  Room as : " + additionalRoomNo);
			reslogger.info("Selected Addtinal Room as : " + additionalRoomNo);
			al.add(additionalRoomNo);
		}
	}

	// Created by adhnan
	public void AddNotes(WebDriver driver, ArrayList test_steps, String RoomName, String NoteType, String Subject,
			String Description) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddNotes);
		test_steps.add("======ADD NOTES=====");
		reslogger.info("======ADD NOTES=====");
		res.CP_AddNotes.click();
		test_steps.add("Click on Add Notes");
		reslogger.info("Click on Add Notes");

		if (Utility.validateString(RoomName)) {
			String RoomArrow = "//div[contains(@data-bind,'addNewNote')]//button[@title='--Select Room--']";
			Wait.WaitForElement(driver, RoomArrow);
			driver.findElement(By.xpath(RoomArrow)).click();
			String Room = "//div[contains(@data-bind,'addNewNote')]//button[@title='--Select Room--']//..//button//..//div//li//a//span[text()='"
					+ RoomName.trim() + "']";
			Wait.WaitForElement(driver, Room);
			driver.findElement(By.xpath(Room)).click();
			test_steps.add("Select Room : " + RoomName);
			reslogger.info("Select Room : " + RoomName);
		}
		String noteTypeArrow = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Type']//..//button";
		Wait.WaitForElement(driver, noteTypeArrow);
		driver.findElement(By.xpath(noteTypeArrow)).click();

		String noteType = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Type']//..//button/..//div//li/a/span[text()='"
				+ NoteType.trim() + "']";
		Wait.WaitForElement(driver, noteType);
		driver.findElement(By.xpath(noteType)).click();
		test_steps.add("Select Note Type : " + NoteType);
		reslogger.info("Select Note Type : " + NoteType);

		String subject = "//h4[text()='Add Notes']//..//..//div/div//div//label[text()='Subject']//..//input";
		Wait.WaitForElement(driver, subject);
		driver.findElement(By.xpath(subject)).sendKeys(Subject);
		test_steps.add("Enter subject : " + Subject);
		reslogger.info("Enter subject : " + Subject);

		String description = "//h4[text()='Add Notes']//..//..//div/div//div//label[text()='Description']//preceding-sibling::textarea";
		Wait.WaitForElement(driver, description);
		driver.findElement(By.xpath(description)).sendKeys(Description);
		test_steps.add("Enter Description : " + Description);
		reslogger.info("Enter Description : " + Description);

		String user = "//input[starts-with(@data-bind,'value: updatedBy')]";
		JavascriptExecutor js = (JavascriptExecutor) driver;
		user = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(user)));

		String add = "//h4[text()='Add Notes']//..//..//button[text()='Add']";
		Wait.WaitForElement(driver, add);
		driver.findElement(By.xpath(add)).click();
		test_steps.add("Click on Add");
		reslogger.info("Click on Add");

		String noteverify = "//td[text()='" + NoteType.trim() + "']";
		Wait.WaitForElement(driver, noteverify);
		test_steps.add("Sucessfully added Note : " + Subject);
		reslogger.info("Sucessfully added Note : " + Subject);

	}

	public void verifyNotesExist(WebDriver driver, String NoteType, String Room, String Subject, String Description,
			String UpdatedOn, boolean exist) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.NotesTypes.get(0), driver);
		int Size = res.NotesTypes.size();
		reslogger.info("Added Notes Size : " + Size);
		int lineNumber = Size - 1;
		reslogger.info("Expected Type : " + NoteType);
		reslogger.info("Expected Room : " + Room);
		reslogger.info("Expected Subject : " + Subject);
		reslogger.info("Expected Description : " + Description);
		reslogger.info("Expected Updated On Date : " + UpdatedOn);
		boolean found = false;
		for (lineNumber = Size - 1; lineNumber >= 0; lineNumber--) {
			reslogger.info("LineNumber : " + lineNumber);
			reslogger.info("Note Type : " + res.NotesTypes.get(lineNumber).getText());
			reslogger.info("Room : " + res.NotesRoom.get(lineNumber).getText());
			reslogger.info("Subject : " + res.NotesSubject.get(lineNumber).getText());
			reslogger.info("Description : " + res.NotesDescription.get(lineNumber).getText());
			reslogger.info("Updated On Date : " + res.NotesUpdatedOn.get(lineNumber).getText());
			if (res.NotesTypes.get(lineNumber).getText().equals(NoteType)
					&& res.NotesRoom.get(lineNumber).getText().equals(Room)
					&& res.NotesSubject.get(lineNumber).getText().contains(Subject)
					&& res.NotesDescription.get(lineNumber).getText().equals(Description)
					&& res.NotesUpdatedOn.get(lineNumber).getText().contains(UpdatedOn)) {
				found = true;
				break;
			}
		}
		assertEquals(found, exist, "Failed: Note having Subject : " + Subject + " Not in Required visibility form");

	}

	public void selectAccountOnReservation(WebDriver driver, ArrayList<String> test_steps, String Account,
			String isAssign, String isPolicyApplied) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Account);
		String accountdisplay = "//label[contains(text(),'Account')]//..//i[starts-with(@class,'rightIcon demo-icon icon-pencil')]";
		WebElement ele = driver.findElement(By.xpath(accountdisplay));
		if (!ele.isDisplayed()) {
			if (Account.equalsIgnoreCase("") || Account.isEmpty()) {
				reslogger.info("No Account");
			} else {
				res.CP_NewReservation_Account.sendKeys(Account);
				test_steps.add("Enter Account : " + Account);
				reslogger.info("Enter Account : " + Account);
				Wait.wait2Second();
				String account = "//b[contains(text(),'" + Account.trim() + "')]//..//..//..";
				Wait.WaitForElement(driver, account);
				Utility.ScrollToElement(driver.findElement(By.xpath(account)), driver);
				driver.findElement(By.xpath(account)).click();
				if (!isAssign.equalsIgnoreCase("No")) {
					String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]//following-sibling::div//button[contains(text(),'Yes')]";
					Wait.WaitForElement(driver, dataYes);
					Utility.ScrollToElement(driver.findElement(By.xpath(dataYes)), driver);
					driver.findElement(By.xpath(dataYes)).click();
					test_steps.add(
							"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
					reslogger.info(
							"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
					Wait.wait2Second();
				} else {
					String dataNo = "//div[contains(text(),'Do you want to replace the guest info')]//following-sibling::div//button[contains(text(),'No')]";
					Wait.WaitForElement(driver, dataNo);
					driver.findElement(By.xpath(dataNo)).click();
					test_steps.add(
							"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
					reslogger.info(
							"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
					Wait.wait2Second();
				}

				try {
					if (!isPolicyApplied.equalsIgnoreCase("No")) {
						String policyYes = "//div[contains(text(),'Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?')]/following-sibling::div//button[contains(text(),'Yes')]";
						Wait.wait2Second();
						driver.findElement(By.xpath(policyYes)).click();
						test_steps.add(
								"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes");
						reslogger.info(
								"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes");
					} else {
						String policyNo = "//div[contains(text(),'Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?')]/following-sibling::div//button[contains(text(),'No')]";
						Wait.wait2Second();
						driver.findElement(By.xpath(policyNo)).click();
						test_steps.add(
								"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : No");
						reslogger.info(
								"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : No");
					}
				} catch (Exception e) {
					// TODO: handle exception
				}

			}
		} else {
			test_steps.add("Account Aleady exists");
			reslogger.info("Account Aleady exists");
		}
	}

	/*
	 * public void clickOnPrintIcon(WebDriver driver) throws InterruptedException,
	 * IOException { Elements_CPReservation reservationPage = new
	 * Elements_CPReservation(driver); Wait.WaitForElement(driver, OR.PrintIcon);
	 * Wait.waitForElementToBeVisibile(By.xpath(OR.PrintIcon), driver);
	 * Wait.waitForElementToBeClickable(By.xpath(OR.PrintIcon), driver);
	 * reservationPage.printIcon.click();
	 * 
	 * }
	 */
	public void clickOnDetailedReservationList(WebDriver driver) throws InterruptedException {
		Wait.wait3Second();
		Elements_CPReservation reservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR.CheckboxDetailedReservationList);
		Wait.waitForElementToBeVisibile(By.xpath(OR.CheckboxDetailedReservationList), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR.CheckboxDetailedReservationList), driver);
		reservationPage.checkboxDetailedReservationList.click();

	}

	public double getCheckInAmount(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		// Get Amount
		String amount = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		double checkinAmount = Double.valueOf(Amount);
		reslogger.info(checkinAmount);
		return checkinAmount;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verificationSuccessfullWindow ' Description: Verification of
	 * Check In Success Window and Check Out Success Window ' Input parameters:
	 * String ' Created By: Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public void verificationSuccessfullWindow(WebDriver driver, ArrayList<String> test_steps, String NoShowSuccess,
			String Status, String PaymentMethod, String Notes, String Balance, String Type, String TotalNoFee,
			String PaymentType, String dateValue) throws InterruptedException, ParseException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowSuccess_ModelHeader);
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.CP_Reservation_NoShowSuccess, driver);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShowSuccess, driver);

		// Verified Success -Message
		assertEquals(CPReservationPage.CP_Reservation_NoShowSuccess.getText().toLowerCase().trim(),
				(NoShowSuccess.toLowerCase().trim()), "Failed: To verify Success Header");
		test_steps.add("  Verified Message: <b>" + NoShowSuccess + "</b>");
		reslogger.info("  Verified Message:" + NoShowSuccess);

		if (PaymentType.equals("Check Out")) {
			// Verified Success-Date
			Date date = null;
			String Date = CPReservationPage.NoShowSuccess_Date.getText();
			DateFormat dateFormat = new SimpleDateFormat("MM/dd/yy");
			dateFormat.setTimeZone(TimeZone.getTimeZone("EST"));
			Date myDate = dateFormat.parse(dateValue);
			String CurrentDate = dateFormat.format(myDate);

			// date = formatter.parse(Date);
			assertEquals(CPReservationPage.NoShowSuccess_Date.getText(), (CurrentDate),
					"Failed: To verify  Success Page Date");
			test_steps.add("  Verified Date: <b>" + dateValue + "</b>");
			reslogger.info("  Verified Date: " + dateValue);
		} else {

			assertEquals(CPReservationPage.NoShowSuccess_Date.getText(), (dateValue),
					"Failed: To verify  Success Page Date");

			test_steps.add("  Verified Date: <b>" + dateValue + "</b>");
			reslogger.info("  Verified Date: " + dateValue);
		}

		// Verified Success-Balance
		String balance = CPReservationPage.NoShowSuccess_Balance.getText().replace("$ ", "");

		reslogger.info(balance);
		if (PaymentType.equals("Check Out")) {
			/*
			 * double tripAmount = Double.valueOf(balance); int amt = (int) tripAmount;
			 * String BalanceCheckOut = String.valueOf(amt);
			 */
			String BalanceCheckOut = balance.trim();
			assertEquals(BalanceCheckOut.trim(), (Balance), "Failed: To verify Success Page Balance");
			test_steps.add(" Verified Balance: <b>" + Balance + "</b>");
			reslogger.info("  Verified Balance: " + Balance);
		} else {
			assertEquals(balance.trim(), (Balance), "Failed: To verify Success Page Balance");
			test_steps.add(" Verified Balance: <b>" + Balance + "</b>");
			reslogger.info("  Verified Balance: " + Balance);

		}
		// Verified Success-Amount

		System.out.print("Amount: " + TotalNoFee);
		String path = "//span[contains(@data-bind,'noShow.PaymentAmount')][contains(text(),'$ " + TotalNoFee
				+ "')]|//span[contains(@data-bind,'cancel.PaymentAmount')][contains(text(),'$ " + TotalNoFee
				+ "')]|//span[contains(@data-bind,'checkInDetail.PaymentAmount')][contains(text(),'$ " + TotalNoFee
				+ "')]|//span[contains(@data-bind,'checkOutDetail.PaymentAmount')][contains(text(),'$ " + TotalNoFee
				+ "')]";
		WebElement AmountElement = driver.findElement(By.xpath(path));
		assertTrue(AmountElement.isDisplayed(), "Failed: To verify  Success Page Amount: " + TotalNoFee);
		test_steps.add("  Verified Amount: <b>" + TotalNoFee + "</b>");
		reslogger.info("  Verified Amount: " + TotalNoFee);

		// Verified Success-Type
		Utility.app_logs.info(type);
		assertEquals(CPReservationPage.NoShowSuccess_Type.getText().toLowerCase().trim(), (Type.toLowerCase().trim()),
				"Failed: To verify  Success Page Type");
		test_steps.add("  Verified Type: <b>" + Type + "</b>");
		reslogger.info(" Verified Type: " + Type);

		// Verified Success-Payment Method
		assertTrue(CPReservationPage.CP_Reservation_NoShowSuccessPaymentMethod.getText().toLowerCase().trim()
				.contains(PaymentMethod.toLowerCase().trim()), "Failed: To verify Success Page Payment Method");
		test_steps.add("  Verified Payment Method: <b>" + PaymentMethod + "</b>");
		reslogger.info("  Verified Payment Method: " + PaymentMethod);

		// Verified Success -Status
		assertEquals(CPReservationPage.CP_Reservation_NoShowSuccessStatus.getText().toLowerCase().trim(),
				(Status.toLowerCase().trim()), "Failed: To verify  Success Page Status ");
		test_steps.add("  Verified Status:<b> " + Status + "</b>");
		reslogger.info(" Verified Status: " + Status);

		// Verified Success Notes
		if (Utility.validateString(Notes)) {
			assertEquals(CPReservationPage.CP_Reservation_NoShowSuccessNotes.getText().toLowerCase().trim(),
					(Notes.toLowerCase().trim()), "Failed: To verify  Success Page Notes ");
			test_steps.add(" Verified  Notes: <b>" + Notes + "</b>");
			reslogger.info(" Verified  Notes: " + Notes);
		}
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyHistoryDescForNoShowCancel ' Description: Verification
	 * of Made a no show payment and Made a cancellation payment ' Input parameters:
	 * String ' Created By: Gangotri ' Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public void verifyHistoryDescForNoShowCancel(WebDriver driver, ArrayList<String> test_steps, String amount,
			String Status, String PaymentMethod) {
		String desc = "Made a no show payment of $" + amount.trim() + " using " + PaymentMethod;
		String CancelDesc = "Made a cancellation payment of $" + amount.trim() + " using " + PaymentMethod;
		String path = "//span[contains(text(),'" + desc + "')]|//span[contains(text(),'" + CancelDesc + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Description");
		if (Status.equals("No Show")) {
			test_steps.add("'History Tab' Verified Description: <b>" + desc + "</b>");
			reslogger.info("'History Tab' Verified Description : " + desc);
		} else if (Status.equals("Cancel")) {
			test_steps.add("'History Tab' Verified Description: <b>" + CancelDesc + "</b>");
			reslogger.info("'History Tab' Verified Description : " + CancelDesc);

		}
	}

	public ArrayList<String> selectReportTyeAsPDF(WebDriver driver) throws InterruptedException {

		Elements_CPReservation reservationPage = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();

		Wait.WaitForElement(driver, OR.ClickOnReport);
		Wait.waitForElementToBeVisibile(By.xpath(OR.ClickOnReport), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR.ClickOnReport), driver);
		reservationPage.clickOnReport.click();
		testSteps.add("Click on Reports");

		Wait.WaitForElement(driver, OR.ClickOnReportAsPDF);
		Wait.waitForElementToBeVisibile(By.xpath(OR.ClickOnReportAsPDF), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR.ClickOnReportAsPDF), driver);
		Utility.ScrollToElement_NoWait(reservationPage.clickOnReport, driver);

		reservationPage.clickOnReportAsPDF.click();
		testSteps.add("Select report type as PDF");
		reslogger.info("Click on PDF Report");
		Wait.wait10Second();

		return testSteps;

	}
	/*
	 * public void downloadPDFReport(WebDriver driver) throws InterruptedException,
	 * IOException { Elements_CPReservation reservationPage = new
	 * Elements_CPReservation(driver); reservationPage.ClickOnPrint.click();
	 * Wait.wait5Second(); Wait.waitForElementToBeGone(driver,
	 * reservationPage.ModuleLoading, 10000); ArrayList<String> tabs2 = new
	 * ArrayList<String>(driver.getWindowHandles());
	 * driver.switchTo().window(tabs2.get(1)); Wait.wait2Second();
	 * 
	 * new Select(driver.findElement(By.xpath("//*[@id='drpReportType']"))).
	 * selectByVisibleText("Download As Pdf");
	 * reservationPage.DownloadButton.click(); Wait.wait3Second(); driver.close();
	 * driver.switchTo().window(tabs2.get(0));
	 * 
	 * }
	 */

	public void clickOnCloseReservationReports(WebDriver driver) throws InterruptedException {
		Elements_CPReservation reservationPage = new Elements_CPReservation(driver);

		try {
			/*
			 * Wait.WaitForElement(driver, OR.ClickOnCloseReportsPopup);
			 * Wait.waitForElementToBeVisibile(By.xpath(OR. ClickOnCloseReportsPopup),
			 * driver); Wait.waitForElementToBeClickable(By.xpath(OR.
			 * ClickOnCloseReportsPopup), driver);
			 */
			reservationPage.ClickOnCloseReportsPopup.click();
		} catch (Exception e) {
			// TODO: handle exception
		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyCheckInButtonDisability ' Description: Verification of
	 * Check In button disable ' Input parameters: String ' Created By: Gangotri '
	 * Created On: June 3 2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public void verifyCheckInButtonDisability(WebDriver driver, ArrayList<String> test_steps, String errorMessage)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckInButton);
		assertTrue(!res.CP_Reservation_CheckInButton.isEnabled(), errorMessage);
		test_steps.add(" Check In Button is Disabled");
		reslogger.info(" Check In Button is Disabled");

	}

	public void createTaskWithVerification(WebDriver driver, ArrayList test_steps, boolean isAddDueOn,
			boolean isAddAssignee, String TaskCategory, String TaskType, String TaskDetails, String TaskRemarks,
			String TaskDueon, String TaskAssignee, String TaskStatus) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddTask);
		test_steps.add("******************* Adding Task **********************");
		reslogger.info("******************* Adding Task **********************");
		res.CP_AddTask.click();
		test_steps.add("Click on Add Task");
		reslogger.info("Click on Add Task");

		String taskCategoryArrow = "//label[text()='Category']/..//button";
		Wait.WaitForElement(driver, taskCategoryArrow);
		driver.findElement(By.xpath(taskCategoryArrow)).click();

		String taskCategory = "//label[text()='Category']/..//div/ul//span[text()='" + TaskCategory.trim() + "']";
		Wait.WaitForElement(driver, taskCategory);
		driver.findElement(By.xpath(taskCategory)).click();
		test_steps.add("Select Task Category : " + TaskCategory);
		reslogger.info("Select Task Category : " + TaskCategory);

		String taskType = "//label[text()='Type']/..//button";
		Wait.WaitForElement(driver, taskType);
		driver.findElement(By.xpath(taskType)).click();
		Wait.wait2Second();
		taskType = "//label[text()='Type']/..//div/ul//span[text()='" + TaskType.trim() + "']";
		Wait.WaitForElement(driver, taskType);
		driver.findElement(By.xpath(taskType)).click();
		test_steps.add("Select Task Type : " + TaskType);
		reslogger.info("Select Task Type : " + TaskType);

		String taskDetails = "//label[text()='Details']/preceding-sibling::textarea";
		Wait.WaitForElement(driver, taskDetails);
		driver.findElement(By.xpath(taskDetails)).sendKeys(TaskDetails);
		test_steps.add("Select Task Details : " + TaskDetails);
		reslogger.info("Select Task Details : " + TaskDetails);

		String taskRemarks = "//label[text()='Remarks']/preceding-sibling::textarea";
		Wait.WaitForElement(driver, taskRemarks);
		driver.findElement(By.xpath(taskRemarks)).sendKeys(TaskRemarks);
		test_steps.add("Enter Task Remarks : " + TaskRemarks);
		reslogger.info("Enter Task Remarks : " + TaskRemarks);
		if (isAddDueOn) {
			String dueCalender = "//label[text()='Due On']/..//i";
			Wait.WaitForElement(driver, dueCalender);
			driver.findElement(By.xpath(dueCalender)).click();
			String monthYear = Utility.get_MonthYear(TaskDueon);
			String day = Utility.getDay(TaskDueon);
			reslogger.info(monthYear);
			String header = null, headerText = null, next = null, date;
			for (int i = 1; i <= 12; i++) {
				header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
				headerText = driver.findElement(By.xpath(header)).getText();
				if (headerText.equalsIgnoreCase(monthYear)) {
					date = "//td[contains(@class,'day') and text()='" + day + "']";
					Wait.WaitForElement(driver, date);
					int size = driver.findElements(By.xpath(date)).size();
					for (int k = 1; k <= size; k++) {
						date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + k + "]";
						String classText = driver.findElement(By.xpath(date)).getAttribute("class");
						if (!classText.contains("old")) {
							driver.findElement(By.xpath(date)).click();
							test_steps.add("Selecting due on date : " + TaskDueon);
							reslogger.info("Selecting due on date : " + TaskDueon);
							break;
						}
					}
					break;
				} else {
					next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
					Wait.WaitForElement(driver, next);
					driver.findElement(By.xpath(next)).click();
					Wait.wait2Second();
				}
			}
		}
		if (isAddAssignee) {
			String taskAssignee = "//label[text()='Assignee']/..//input";
			Wait.WaitForElement(driver, taskAssignee);
			driver.findElement(By.xpath(taskAssignee)).sendKeys(TaskAssignee);
			Wait.wait2Second();
			String taskassgin = "//label[text()='Assignee']/..//div/ul/li/div";
			Wait.WaitForElement(driver, taskassgin);
			driver.findElement(By.xpath(taskassgin)).click();
			test_steps.add("Enter Task Assignee : " + TaskAssignee);
			reslogger.info("Enter Task Assignee : " + TaskAssignee);
		}
		String taskStatus = "(//label[text()='Status']/..//button)[2]";
		Wait.WaitForElement(driver, taskStatus);
		driver.findElement(By.xpath(taskStatus)).click();
		String status = "//label[text()='Status']/..//button/following-sibling::div//li//span[text()='"
				+ TaskStatus.trim() + "']";
		Wait.WaitForElement(driver, status);
		driver.findElement(By.xpath(status)).click();
		test_steps.add("Select Task Status : " + TaskStatus);
		reslogger.info("Select Task Status : " + TaskStatus);

		String save = "//h4[text()='Add Task']/../..//button[text()='Save']";
		Wait.WaitForElement(driver, save);
		driver.findElement(By.xpath(save)).click();
		test_steps.add("Click on Save");
		reslogger.info("Click on Save");

		String taskVerify = "//span[text()='Tasks ']/../..//td//span[text()='" + TaskType.trim() + "']";
		Wait.WaitForElement(driver, taskVerify);
		test_steps.add("Sucessfully added Task : " + TaskType);
		reslogger.info("Sucessfully added Task : " + TaskType);

		test_steps.add("Verified Task Type : " + TaskType);
		reslogger.info("Verified Task Type : " + TaskType);

		test_steps.add("Verified Task Type : " + TaskType);
		reslogger.info("Verified Task Type : " + TaskType);

		taskDetails = "//span[text()='Tasks ']/../..//td[text()='" + TaskDetails.trim() + "']";
		Wait.WaitForElement(driver, taskDetails);
		test_steps.add("Verified Task details : " + TaskDetails);
		reslogger.info("Verified Task details : " + TaskDetails);
		if (isAddDueOn) {
			String[] taskdue = TaskDueon.split("/");
			String due = "//span[text()='Tasks ']/../..//td[contains(text(),'" + taskdue[1] + "/" + taskdue[0] + "')]";
			Wait.WaitForElement(driver, due);
			test_steps.add("Verified Task due on : " + TaskDueon);
			reslogger.info("Verified Task due on : " + TaskDueon);
		}

		String stat = "//span[text()='Tasks ']/../..//td[contains(text(),'" + TaskStatus.trim() + "')]";
		Wait.WaitForElement(driver, stat);
		test_steps.add("Verified Tsak Status : " + TaskStatus);
		reslogger.info("Verified Task Status : " + TaskStatus);

	}

	public void Click_CheckInAllButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait3Second();
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_CheckInAllButton, driver);
		Utility.ScrollToElement(res.CP_Reservation_CheckInAllButton, driver);
		res.CP_Reservation_CheckInAllButton.click();
		test_steps.add("Click Check In All Button");
		reslogger.info("Click Check In All Button");

	}

	public ArrayList<String> clickOnDirtyPopUp(WebDriver driver, ArrayList<String> test_sreps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		try {
			Wait.wait5Second();
			Wait.WaitForElement(driver, OR_Reservation.dirtyRoomPopUp);
			String xpathString = "(//button[@class = 'btn btn-success ir-btn cp-confirmation-yes ir-mb-btn-block ng-data-trim ir-pt-10-sm'])[2]";
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.dirtyRoomPopUp), driver);
			Wait.wait5Second();
			reservation.dirtyRoomPopUp.click();
			test_sreps.add("click on popup dirty button");
			reslogger.info("click on popup dirty button");

		} catch (Exception e) {
			test_sreps.add("dirty room popup not  displyed");
			reslogger.info("dirty room popup not  displyed");
		}
		try {
			verifySpinerLoading(driver);
		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		return test_sreps;

	}

	public ArrayList<String> clickonPaymentMetod(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {

		String selectPaymentDropDown = " (//div[contains(@class,'payment-method')]/button)";
		// div[contains(@class,'payment-method
		// dropup')]/button";
		Wait.waitForElementToBeVisibile(By.xpath(selectPaymentDropDown), driver);
		// Wait.wait3Second();
		driver.findElement(By.xpath(selectPaymentDropDown)).click();
		test_steps.add("click on Payment method successfully");
		reslogger.info("click on Payment method successfully");

		return test_steps;

	}

	public ArrayList<String> selectPaymentMethod(WebDriver driver, String AccountName, ArrayList<String> test_steps)
			throws InterruptedException {
		test_steps.clear();
		String paymentType = "//div[contains(@class,'payment-method')]/button/..//a/span[contains(text(),'"
				+ AccountName + "')]";
		Wait.waitForElementToBeVisibile(By.xpath(paymentType), driver);
		Utility.ScrollToElement(driver.findElement(By.xpath(paymentType)), driver);
		Wait.wait3Second();
		driver.findElement(By.xpath(paymentType)).click();

		return test_steps;

	}

	public void verifyCheckInPaymentPopupIsAppeared(WebDriver driver, String paymentMethod,
			ArrayList<String> test_steps) throws Exception {
		try {

			Wait.waitForElementToBeVisibile(
					By.xpath(OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggle), driver);
			if (driver.findElement(By.xpath(OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggle))
					.isDisplayed()) {
				disableGenerateGuestReportToggle(driver, test_steps);
				clickOnProceedToCheckInPaymentButton(driver, test_steps);
				clickOnDirtyPopUp(driver, test_steps);
				clickonPaymentMetod(driver, test_steps);
				selectPaymentMethod(driver, paymentMethod, test_steps);
				clickOnPayButtonOnPaymentPopup(driver, test_steps);
				checkInPaymentSuccessPopupClose(driver, test_steps);
			} else {
				test_steps.add("checkin pop not avilable");
				reslogger.info("checkin pop not avilable");

			}
		} catch (Exception e) {
			test_steps.add("checkin pop not avilable");
			reslogger.info("checkin pop not avilable");
		}
		Wait.wait3Second();

	}

	public void Click_CheckOutAllButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait5Second();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_Reservation_ReservationStatusCheckOutAllButton),
				driver);
		// Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_ReservationStatusCheckOutAllButton,
		// driver);
		// Utility.ScrollToElement(res.CP_Reservation_ReservationStatusCheckOutAllButton,
		// driver);
		res.CP_Reservation_ReservationStatusCheckOutAllButton.click();
		test_steps.add("Click Check Out All  Button");
		reslogger.info("Click Check Out All Button");

	}

	public ArrayList<String> clickOnCheckOutPopUp(WebDriver driver, ArrayList<String> test_sreps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		try {
			// Wait.wait3Second();
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkOutPopUp), driver);
			reservation.checkOutPopUp.click();
			test_sreps.add("click on popup yes button");
			reslogger.info("click on popup yes button");

		} catch (Exception e) {
			test_sreps.add("checkOut popup not  displyed");
			reslogger.info("checkOut popup not  displyed");

		}

		return test_sreps;

	}

	public void verifyAccountDetails(WebDriver driver, ArrayList<String> test_steps) {
		try {
			String checkOutAccountDetails = "//label[contains(text(),'ACCOUNT DETAILS')]/../span[contains(text(),'Account')]";
			Wait.waitForElementToBeVisibile(By.xpath(checkOutAccountDetails), driver);
			String account = driver.findElement(By.xpath(checkOutAccountDetails)).getText();
			// assertEquals(accountDetails, checkOutAccountDetails, "Failed: To
			// verify Account Details");
			test_steps.add(" Verified Account details:" + account);
			reslogger.info(" Verified Account details:" + account);

		} catch (Exception e) {
			Utility.app_logs.info(e);

		}
	}

	public ArrayList<String> paymentCheckOutPopUpVerify(WebDriver driver, String title, String paymentMethod,
			String type, String accountDetails, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> details = new ArrayList<>();
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle), driver);
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);

		String titleDisplayed = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText();
		reslogger.info(" Verified Payment Page Title : " + titleDisplayed);
		assertEquals(titleDisplayed, title, "Failed: To verify Payment Page Title");
		test_steps.add(" Verified Payment Page Title :<b> " + title + "</b>");

		String currentdate = Utility.getCurrentDate("MM/dd/yyyy");
		String date = "(//input[contains(@data-bind,'value:PaymentDate')])[2]";
		Wait.waitForElementToBeVisibile(By.xpath(date), driver);
		String checkOutDate = driver.findElement(By.xpath(date)).getAttribute("value");
		test_steps.add(" Verified checkOutDate: " + checkOutDate);
		reslogger.info(" Verified checkOutDate :" + checkOutDate);
		assertEquals(checkOutDate, currentdate, "Failed: To verify Account Details");

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.folioBalance), driver);
		String folioBalence = res.folioBalance.getText().replace("$", "").trim();
		test_steps.add(" Verified folio Balence<b> " + folioBalence + "</b> ");
		reslogger.info(" Verifiedfolio Balence: " + folioBalence);

		clickonPaymentMetod(driver, test_steps);
		selectPaymentMethod(driver, paymentMethod, test_steps);
		verifyAccountDetails(driver, test_steps);
		String paymentTypeDisplayed = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.getText().trim();
		test_steps.add(" Verified payment Type:<b> " + paymentTypeDisplayed + "</b>");
		reslogger.info(" Verified payment Type:");
		assertEquals(paymentTypeDisplayed, type, "Failed: To verify Payment Type");
		String amountDisplayed = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText().trim();
		test_steps.add(" Verified displayed  Amount:<b> " + paymentTypeDisplayed + "</b>");
		reslogger.info(" Verified displayed  Amount:");
		String balanceDisplayed = null;
		String buttonExp = null;
		String buttonDisplayed = res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().trim();
		buttonDisplayed = buttonDisplayed.replace("$", "").replace("PAY", "").trim();
		test_steps.add(" Verified button displayed  Amount:<b> " + buttonDisplayed + "</b>");
		reslogger.info(" Verified button displayed  Amount:<b> " + buttonDisplayed + "</b>");
		assertEquals(buttonDisplayed, folioBalence, "Failed: To verify Payment Type");

		res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.click();
		test_steps.add(" Click on pament button");
		reslogger.info("  Click on pament button");

		return test_steps;

	}

	public ArrayList<String> proceedToBookingPayment(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_NewReservation_ProceedToBookingPayment_Button, driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ProceedToBookingPayment_Button);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_ProceedToBookingPayment_Button),
				driver);
		res.CP_NewReservation_ProceedToBookingPayment_Button.getText();
		res.CP_NewReservation_ProceedToBookingPayment_Button.click();
		test_steps.add("Clicking on  Proceed to Check-Out Payment Button");
		reslogger.info("Clicking on Proceed to Check-Out Payment Button");
		verifySpinerLoading(driver);
		return test_steps;
	}

	public ArrayList<String> proceedToCheckOutPayment(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_ConfirmCheckOut_Button);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_Reservation_ConfirmCheckOut_Button), driver);
		res.CP_Reservation_ConfirmCheckOut_Button.getText();
		Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckOut_Button, driver);
		res.CP_Reservation_ConfirmCheckOut_Button.click();
		test_steps.add("Clicking on  Proceed to Check-Out Payment Button");
		reslogger.info("Clicking on Proceed to Check-Out Payment Button");
		return test_steps;
	}

	public void clickOnCheckOutPay(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		verifySpinerLoading(driver);
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOut_Pay_Button);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_Reservation_CheckOut_Pay_Button), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_Reservation_CheckOut_Pay_Button), driver);
		Wait.wait10Second();
		element.CP_Reservation_CheckOut_Pay_Button.click();
		test_steps.add("Clicking on Check-Out Pay Button");
		reslogger.info("Clicking on Check-Out Pay Button");
	}

	public void clickOnCheckOutSuccessfulCloseButton(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		verifySpinerLoading(driver);
		verifySpinerLoading(driver);
		verifySpinerLoading(driver);
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkOutButtonClose);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkOutButtonClose), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.checkOutButtonClose), driver);
		element.checkOutButtonClose.click();
		test_steps.add("Clicking on Check-Out Successful Close Button");
		reslogger.info("Clicking on Check-Out Successful Close Button");
	}

	public ArrayList<String> verifycheckOutPaymentSuccessPopupVerify(WebDriver driver, String Authorizationtype,
			String checkOutSuccess, String Status, String checkOutPaymentMethod, ArrayList<String> test_steps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkOutPaymentDate), driver);
		String checkOutPopUpDate = reservation.checkOutPaymentDate.getText();

		String date = Utility.getCurrentDate("MM/dd/yy");

		assertEquals(checkOutPopUpDate, date, "Failed: To verify  Success Page Date");
		test_steps.add("  Verified Date of checkout : <b>" + date + "</b>");
		reslogger.info("  Verified Date of checkout : " + date);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkOutFolioBalence), driver);
		String checkOutFolioBalence = reservation.checkOutFolioBalence.getText();
		test_steps.add(" checkOut FolioBalence :" + checkOutFolioBalence);
		reslogger.info(" checkOut FolioBalence :" + checkOutFolioBalence);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkOutPaymentAmount), driver);
		String checkOutPaymentAmount = reservation.checkOutPaymentAmount.getText();
		test_steps.add(" checkOut PaymentAmount :" + checkOutPaymentAmount);
		reslogger.info(" checkOut PaymentAmount :" + checkOutPaymentAmount);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkOutPaymentType), driver);
		String checkOutPaymentType = reservation.checkOutPaymentType.getText();
		test_steps.add(" checkOut PaymentType :" + checkOutPaymentType);
		reslogger.info(" checkOut PaymentType :" + checkOutPaymentType);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkoutPaymentStatus), driver);
		String checkoutPaymentStatus = reservation.checkoutPaymentStatus.getText();
		test_steps.add(" checkOut PaymentStatus :" + checkoutPaymentStatus);
		reslogger.info(" checkOut PaymentStatus :" + checkoutPaymentStatus);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkOutPaymentMethod), driver);
		String checkOutPaymentmethod = reservation.checkOutPaymentMethod.getText();
		test_steps.add(" checkOut Paymentmethod :" + checkOutPaymentmethod);
		reslogger.info(" checkOut Paymentmethod :" + checkOutPaymentmethod);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkOutButtonClose), driver);
		reservation.checkOutButtonClose.click();
		test_steps.add("click on cancel button");
		reslogger.info("click on cancel button");

		return test_steps;

	}

	public void verifyCheckOutPopIsAppear(WebDriver driver, String AccountName, String Authorizationtype,
			String accountDetails, ArrayList<String> test_steps) throws Exception {

		try {
			boolean popupDisplayed = driver.findElements(By.xpath(OR_Reservation.NoShowPaymentPopupTitle)).size() > 0;
			// Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle),
			// driver);
			if (popupDisplayed) {
				paymentCheckOutPopUpVerify(driver, "Check Out Payment", AccountName, Authorizationtype, accountDetails,
						test_steps);

				verifycheckOutPaymentSuccessPopupVerify(driver, Authorizationtype, "Check Out Payment", "Approved",
						accountDetails, test_steps);

			} else {
				test_steps.add("CheckOutPayment Method Not avilable");
				reslogger.info("CheckOutPayment Method Not avilable");
			}

		} catch (Exception e) {
			test_steps.add("CheckOutPayment Method Not avilable");
			reslogger.info("CheckOutPayment Method Not avilable");
		}

	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getAccountName ' Description: get attached account name after
	 * creation of new reservation ' Input parameters: Webdriver ' Return value:
	 * String ' Created By: Adnan Ghaffar ' Created On: 11-05-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public String getAccountName(WebDriver driver) throws InterruptedException {
		Elements_CPReservation element = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR.VERIFY_ACCOUNT_NAME);
		Wait.waitForElementToBeVisibile(By.xpath(OR.VERIFY_ACCOUNT_NAME), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR.VERIFY_ACCOUNT_NAME), driver);
		Utility.ScrollToElement_NoWait(element.verifyAccountName, driver);
		String accountName = element.verifyAccountName.getText();
		return accountName;
	}

	public void clickFolio(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Folio);
			try {
				Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Folio), driver);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_Folio), driver);
				Utility.ScrollToElement(res.CP_NewReservation_Folio, driver);
				res.CP_NewReservation_Folio.click();
			} catch (Exception e) {
				Utility.clickThroughJavaScript(driver, res.CP_NewReservation_Folio);
			}
		} catch (Exception e) {
			Wait.WaitForElement(driver, OR_Reservation.COPY_CP_NewReservation_Folio);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.COPY_CP_NewReservation_Folio), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.COPY_CP_NewReservation_Folio), driver);
			Utility.ScrollToElement(res.COPY_CP_NewReservation_Folio, driver);
			Wait.WaitForElement(driver, OR_Reservation.COPY_CP_NewReservation_Folio);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.COPY_CP_NewReservation_Folio), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.COPY_CP_NewReservation_Folio), driver);
			res.COPY_CP_NewReservation_Folio.click();
		}
		test_steps.add("Click on Folio");
		reslogger.info("Click on Folio");
	}

	public void clickFolio1(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Folio), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_Folio), driver);
			Utility.ScrollToElement(res.CP_NewReservation_Folio, driver);
			res.CP_NewReservation_Folio.click();
		} catch (Exception e) {
			String folioTab = "(//li[contains(@data-bind,'Folio')]//a[text()='Folio(s)']/..|//a[text()='Folio(s)']/..)[2]";
			Wait.waitForElementToBeVisibile(By.xpath(folioTab), driver);
			Wait.waitForElementToBeClickable(By.xpath(folioTab), driver);
			Utility.ScrollToElement(driver.findElement(By.xpath(folioTab)), driver);
			driver.findElement(By.xpath(folioTab)).click();
		}
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: secondayGuestCheckInButtonClick ' Description: Checkin Button
	 * Click, Verification of Tab,With Option Available With/Without Guest
	 * Statement, Confirm Button Click ' Input parameters: WebDriver , String,
	 * boolean ' Return value: ArrayList<String> ' Created By: Aqsa Manzoor '
	 * Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> secondayGuestCheckoutButtonClick(WebDriver driver, String RoomClassName, String RoomNumber)
			throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();

		String checkoutConfirmationMessage = "Do you wish to settle all charges in the folio for " + RoomClassName
				+ ", room " + RoomNumber + "? If not, payment will be taken when the primary guest checks out.";
		Wait.WaitForElement(driver, OR_Reservation.CP_SECONDARYGUEST_CHECKOUTBUTTON);
		Utility.ScrollToElement(element.CP_SECONDARYGUEST_CHECKOUTBUTTON, driver);
		element.CP_SECONDARYGUEST_CHECKOUTBUTTON.click();
		test_steps.add("Secondary Guest Checkout Button Clicked");
		reslogger.info("Secondary Guest Checkout Button Clicked ");
		Wait.WaitForElement(driver, OR_Reservation.CP_SECONDARYGUEST_CHECKOUT_CONFIRMATIONPOPUP);
		assertEquals(element.CP_SECONDARYGUEST_CHECKOUT_CONFIRMATIONPOPUP.getText(), checkoutConfirmationMessage);
		test_steps.add("Secondary Guest Checkout Confirmation Message: " + checkoutConfirmationMessage + " Verified");
		reslogger.info("Secondary Guest Checkout Confirmation Message:: " + checkoutConfirmationMessage + " Verified");
		element.CP_CHECKOUT_CONFIRMATIONTAB_NOBUTTON.click();
		test_steps.add("Clicked No Button Checkout Confirmation Message");
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: secondayGuestCheckoutConfirm ' Description: In Checkut tab
	 * ->Checkout Confirm Button Click With Option Available With/Without Guest
	 * Statement ' Input parameters: WebDriver , String, boolean ' Return value:
	 * ArrayList<String> ' Created By: Aqsa Manzoor ' Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> secondayGuestCheckoutConfirm(WebDriver driver, String SecondaryGuestName,
			boolean generateGuestStatement) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.CP_SECONDARYGUEST_CHECKIN_CHECKOUTTAB_TITLENAME);
		assertEquals(element.CP_SECONDARYGUEST_CHECKIN_CHECKOUTTAB_TITLENAME.getText().replaceAll(" ", ""),
				SecondaryGuestName.replaceAll(" ", ""));
		test_steps.add("Secondary Guest Name: " + SecondaryGuestName + " Verified");
		reslogger.info("Secondary Guest Name: " + SecondaryGuestName + " Verified");
		if (!generateGuestStatement) {
			element.CP_CHECKOUT_GENERATEGUESTSTATEMENT_TOGGLE.click();
			test_steps.add("Generate guest Statement Toggle: "
					+ element.CP_CHECKOUT_GENERATEGUESTSTATEMENT_TOGGLE.isSelected());
			reslogger.info("Generate guest Statement Toggle: "
					+ element.CP_CHECKOUT_GENERATEGUESTSTATEMENT_TOGGLE.isSelected());
		}
		Wait.WaitForElement(driver, OR_Reservation.CP_CHECKOUT_CONFIRMCHECKOUT_BUTTON);
		Wait.explicit_wait_visibilityof_webelement(element.CP_CHECKOUT_CONFIRMCHECKOUT_BUTTON, driver);
		Wait.explicit_wait_elementToBeClickable(element.CP_CHECKOUT_CONFIRMCHECKOUT_BUTTON, driver);
		element.CP_CHECKOUT_CONFIRMCHECKOUT_BUTTON.click();
		test_steps.add("Click on checkout confrim buttton");
		return test_steps;

	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: getSecondaryGuestRoomNumber ' Description: Get the Room Number
	 * of Secondary Guest in Details pages ' Input parameters: WebDriver ,
	 * ArrayList<String> , String ' Return value: String ' Created By: Aqsa Manzoor
	 * ' Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getSecondaryGuestRoomNumber(WebDriver driver, ArrayList test_steps, String IsAssign) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_SECONDARYGUEST_ROOMNUMBER);
		Wait.explicit_wait_visibilityof_webelement(element.CP_SECONDARYGUEST_ROOMNUMBER, driver);
		String roomNumber = element.CP_SECONDARYGUEST_ROOMNUMBER.getText();

		if (IsAssign.equalsIgnoreCase("No")) {
			if (roomNumber.equalsIgnoreCase("Unassigned")) {
				test_steps.add("Room Number is : Unassigned");
				reslogger.info("Room Number is : Unassigned");
			}
		} else {
			test_steps.add("Room Number is : " + roomNumber);
			reslogger.info("Room Number is : " + roomNumber);
		}
		return roomNumber;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyHistoryTabForPaymentDetail ' Description: Verification
	 * of History Tab Payment Line/Details With MC and updated to Cash ' Input
	 * parameters: WebDriver , ArrayList<String> , String , String , boolean ,
	 * String , String , String , String ' Return value: ArryaList<String> ' Created
	 * By: Aqsa Manzoor ' Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> verifyHistoryTabForPaymentDetail(WebDriver driver, ArrayList<String> test_steps,
			String Date, String amount, boolean isPaymentMethodChanged, String PreviousPaymentMethod,
			String PaymentMethod, String CardNumber, String ExpDate) {
		String paymentHistoryDate = "//tbody[contains(@data-bind,'foreach:historyList')]//span[text()='Payment']/ancestor::tr/td/span[contains(@data-bind,'text:$parent.formatDate($data.logDate)')]";
		WebElement paymentHistoryDateElement = driver.findElement(By.xpath(paymentHistoryDate));

		String paymentHistoryDescription = null;
		WebElement paymentHistoryDescriptionElement;

		assertEquals(paymentHistoryDateElement.getText(), Date);
		reslogger.info("History Tab: Payment Date Verified: " + paymentHistoryDateElement.getText());
		test_steps.add("History Tab: Payment Date Verified: " + paymentHistoryDateElement.getText());
		String desc = null;
		if (PaymentMethod.equals("MC")) {
			paymentHistoryDescription = "//tbody[contains(@data-bind,'foreach:historyList')]//span[text()='Payment']/ancestor::tr/td/span[contains(@data-bind,'text:$data.description')]";
			paymentHistoryDescriptionElement = driver.findElement(By.xpath(paymentHistoryDescription));

			desc = "Made a deposit payment of $" + amount + " using " + PaymentMethod + " XXXX" + CardNumber + " ("
					+ ExpDate + ")";
			reslogger.info(desc);
			assertEquals(desc, paymentHistoryDescriptionElement.getText());
			reslogger.info("History Tab: Payment Description Verified: " + paymentHistoryDescriptionElement.getText());
			test_steps.add("History Tab: Payment Description Verified: <b>" + paymentHistoryDescriptionElement.getText()
					+ "</b>");
		}
		if (isPaymentMethodChanged) {
			if (PaymentMethod.equals("Cash")) {
				desc = "Changed payment method from " + PreviousPaymentMethod + " to " + PaymentMethod;
				paymentHistoryDescription = "(//tbody[contains(@data-bind,'foreach:historyList')]//span[text()='Payment']/ancestor::tr)[1]/td/span[contains(@data-bind,'text:$data.description')]";
				paymentHistoryDescriptionElement = driver.findElement(By.xpath(paymentHistoryDescription));
				assertEquals(desc, paymentHistoryDescriptionElement.getText());
				reslogger.info(
						"History Tab: Payment Description Verified: " + paymentHistoryDescriptionElement.getText());
				test_steps.add("History Tab: Payment Description Verified: <b>"
						+ paymentHistoryDescriptionElement.getText() + "</b>");
			}
		}
		return test_steps;
	}

	public void verify_DepositAmountTripSummary(WebDriver driver, ArrayList test_steps, String CheckInDate,
			String CheckOutDate, String Value, Double DepositAmount) throws ParseException, InterruptedException {
		SimpleDateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");
		Date dateObj1 = format1.parse(CheckInDate);
		Date dateObj2 = format1.parse(CheckOutDate);
		long diff = dateObj2.getTime() - dateObj1.getTime();
		int Nights = (int) (diff / (24 * 60 * 60 * 1000));
		reslogger.info("difference between days: " + Nights);
		Wait.wait3Second();
		String roomCharge = get_TripSummaryRoomChargesWithoutCurrency(driver, test_steps);
		Double d = Double.parseDouble(roomCharge);
		Double d1 = d / Nights;
		reslogger.info(d1);

		// String payments=DepositAmount;
		Double d2 = DepositAmount;
		reslogger.info(d2);

		if (Double.compare(d1, d2) == 0) {
			test_steps.add("Deposit policy for " + Value + " Night Room Charges is validated : " + d1);
			reslogger.info("Deposit policy for " + Value + " Night Room Charges is validated : " + d1);
		} else {
			test_steps.add("Deposit policy for " + Value + " Night Room Charges is not validated : " + d1);
			reslogger.info("Deposit policy for " + Value + " Night Room Charges is not validated : " + d1);
		}
	}

	public ArrayList<String> Verify_ReservationStatus_Status(WebDriver driver, ArrayList<String> test_steps,
			String Status) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_Reservation_StatusPanel_Status, driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_StatusPanel_Status, driver);

		// Verified History Tab No Show Entry
		reslogger.info("Status is: " + res.CP_Reservation_StatusPanel_Status.getText());
		reslogger.info("Matched Status is: " + Status);
		assertTrue(res.CP_Reservation_StatusPanel_Status.getText().toLowerCase().trim()
				.equals(Status.toLowerCase().trim()), "Failed: To verify Status");
		test_steps.add("  Verified Reservation Status: <b>" + Status + "</b>");
		reslogger.info("Verified Reservation Status: " + Status);

		return test_steps;

	}

	public void verifyUnassignedMsg(WebDriver driver, ArrayList<String> testSteps, String msg)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.RollBackPopupMsg);
		Wait.explicit_wait_visibilityof_webelement(res.RollBackMsg, driver);
		Utility.ScrollToElement(res.RollBackMsg, driver);
		String uassignedMsg = res.RollBackMsg.getText().replace("<br>", "").replaceAll("[\r\n]+", "");
		assertEquals(uassignedMsg.toLowerCase().trim(), (msg.toLowerCase().trim()),
				"Failed : Verify Unassigned Message");
		testSteps.add("Verified  Msg : <b>" + msg + "</b>");
		reslogger.info("Verified  :" + msg);
	}

	public String calculationOfDeposiAmountToBePaid(ArrayList<String> baseAmounts, String attr, String attrValue,
			String taxes, String totalRoomCharges) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountToBePaid = null;
		double paidAmount = 0.00;
		double taxesToAdd = 0.00;
		double taxesPerc = 0.00;
		if (!(taxes.equalsIgnoreCase("0")) && !(taxes.equalsIgnoreCase("0.0")) && !(taxes.equalsIgnoreCase("0.00"))) {
			double abc = (Double.parseDouble(taxes)) * 100;
			taxesPerc = abc / Double.parseDouble(totalRoomCharges);
		}
		if (attr.equalsIgnoreCase("First Night")) {
			for (String string : baseAmounts) {
				double amount = (Double.parseDouble(string)) * (Double.parseDouble(attrValue));
				paidAmount = paidAmount + amount;
			}
			if ((taxesPerc != 0) && (taxesPerc != 0.0) && (taxesPerc != 0.00)) {
				double abc = paidAmount * taxesPerc;
				taxesToAdd = abc / 100;
				paidAmount = paidAmount + taxesToAdd;
			}
		} else if (attr.equalsIgnoreCase("Fixed Amount")) {
			double rooms = Double.valueOf(baseAmounts.size());
			paidAmount = Double.parseDouble(attrValue) * rooms;
		} else if (attr.equalsIgnoreCase("Room Charges")) {
			double roomsCharges = Double.parseDouble(totalRoomCharges);
			paidAmount = (Double.parseDouble(attrValue) * roomsCharges) / 100;
		}

		amountToBePaid = df.format(paidAmount);
		return amountToBePaid;
	}

	public String calculationOfDeposiAmountToBePaid(String tripTotalCharges, String totalNights) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountToBePaid = null;
		double paidAmount = (Double.parseDouble(tripTotalCharges)) / (Double.parseDouble(totalNights));
		amountToBePaid = df.format(paidAmount);
		return amountToBePaid;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verifyPaymentMethodWithReservationInFolio ' Description:
	 * Verify the TakePayment Popup, Payment Method(Reservation) and Reservation
	 * Attached in Folio Pay' Input parameters: <WebDriver, ArrayList<String>
	 * ,String, String> ' Return value: <ArrayList<String>> ' Created By: <Aqsa
	 * Manzoor> ' Created On: <20/05/2020> *
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> verifyPaymentMethodWithReservationInFolio(WebDriver driver, ArrayList<String> test_steps,
			String PaymentMethod, String ReservationNumber) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String selectedPaymentMethod = "((//div[contains(@class,'payment-method')])[2]//span)[1]";
		Wait.WaitForElement(driver, selectedPaymentMethod);
		WebElement selectedPaymentMethodElement = driver.findElement(By.xpath(selectedPaymentMethod));
		Utility.ScrollToElement(selectedPaymentMethodElement, driver);
		Wait.wait2Second();
		System.out.print(" attached:" + PaymentMethod.contains(selectedPaymentMethodElement.getText()));

		assertEquals(PaymentMethod.contains(selectedPaymentMethodElement.getText()), true);

		reslogger.info("Selected Payment Method : " + PaymentMethod);
		test_steps.add("Selected Payment Method : " + PaymentMethod);

		String reservationFoundAttched = driver
				.findElement(By.xpath("//input[contains(@data-bind,'value:$parent.SelectedReservation')]"))
				.getAttribute("value");
		System.out.print(" Value attached:" + reservationFoundAttched);
		String reservationExpectecd = "Reservation - " + ReservationNumber;
		assertEquals(reservationFoundAttched, reservationExpectecd);
		reslogger.info("Reservation Attached Verified : " + reservationFoundAttched);
		test_steps.add("Reservation Attached Verified : " + reservationFoundAttched);

		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: payButtonClickInTakePayment ' DescriptionClick Pay Button In
	 * TakePayment Popup, selects Payment Method as Main on booelan and closes in on
	 * boolean in Folio Pay' Input parameters: <WebDriver, ArrayList<String>
	 * ,String, boolean,boolean> ' Return value: <ArrayList<String>> ' Created By:
	 * <Aqsa Manzoor> ' Created On: <20/05/2020> *
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> payButtonClickInTakePayment(WebDriver driver, ArrayList<String> test_steps, String amount,
			boolean isSetMainPaymentMethod, boolean isClose) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		verifySpinerLoading(driver);
		String setAsMainPaymentMethod = "//span[text()='Set As Main Payment Method']/../input";
		JavascriptExecutor jse = (JavascriptExecutor) driver;

		if (isSetMainPaymentMethod) {
			if (!driver.findElement(By.xpath(setAsMainPaymentMethod)).isSelected()) {
				jse.executeScript("arguments[0].click(true);", driver.findElement(By.xpath(setAsMainPaymentMethod)));
				test_steps.add("Select set As Main Payment Method");
				reslogger.info("Select set As Main Payment Method");
			} else {
				test_steps.add("Already Selected set As Main Payment Method");
				reslogger.info("Already Selected set As Main Payment Method");
			}
		}
		// String button = "//h4[text()='Take Payment']/../..//button[contains(text(),'"
		// + amount + "')]";
		// String button = "//h4[text()='Take
		// Payment']/../..//button[contains(text(),'Pay ')]";
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_LogANDPayButton);
		System.out.print("Amount:" + amount);
		WebElement payButtonElement = driver.findElement(By.xpath(OR_Reservation.NoShowPaymentPopup_LogANDPayButton));
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowPaymentPopup_LogANDPayButton), driver);
		Utility.ScrollToElement(payButtonElement, driver);
		System.out.print("Text is :" + payButtonElement.getText());
		Utility.clickThroughJavaScript(driver, payButtonElement);
		verifySpinerLoading(driver);
		test_steps.add("Click on Pay");
		reslogger.info("Click on Pay");
		String paymentSuccessfulTab = "//h4[contains(text(),'Successful')]";
		Wait.WaitForElement(driver, paymentSuccessfulTab);
		WebElement paymentSuccessfulTabElement = driver.findElement(By.xpath(paymentSuccessfulTab));
		System.out.print("Tab is:" + paymentSuccessfulTabElement.isDisplayed());
		assertEquals(paymentSuccessfulTabElement.isDisplayed(), true);
		test_steps.add("Payment Successul Tab Displayed");
		reslogger.info("Payment Successul Tab Displayed");

		if (isClose) {
			String close = "//h4[contains(text(),'Successful')]/../..//button[text()='Close']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			test_steps.add("Click on Close");
			reslogger.info("Click on Close");
		}
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickEditPaymentMethodInfo ' Description: Click Edit Button To
	 * Change Payment Method In Details Tab of Reservation ' Input parameters:
	 * WebDriver , ArrayList<String> ' Return value: ArrayList<String> ' Created By:
	 * Aqsa Manzoor ' Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> clickEditPaymentMethodInfo(WebDriver driver, ArrayList<String> steps)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(element.PAYMENTMETHOD_EDITBUTTON, driver);
		Wait.explicit_wait_elementToBeClickable(element.PAYMENTMETHOD_EDITBUTTON, driver);
		Utility.ScrollToElement(element.PAYMENTMETHOD_EDITBUTTON, driver);
		element.PAYMENTMETHOD_EDITBUTTON.click();
		String path = "//i[@class='glyphicon ir-mastercard-icon']";
		Wait.WaitForElement(driver, path);
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(path)), driver);
		reslogger.info("Click Payment Method Edit button");
		steps.add("Click Payment Method Edit button");
		return steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: clickSaveButtonAfterEditPaymentMethod ' Description: Click
	 * Save Button After Editing Payment Method ' Input parameters: WebDriver ,
	 * ArrayList<String> ' Return value: ArrayList<String> ' Created By: Aqsa
	 * Manzoor ' Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickSaveButtonAfterEditPaymentMethod(WebDriver driver, ArrayList<String> steps)
			throws InterruptedException {
		// Click Save Button
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.PAYMENTMETHOD_SAVEBUTTON);
		Utility.ScrollToElement(res.PAYMENTMETHOD_SAVEBUTTON, driver);
		res.PAYMENTMETHOD_SAVEBUTTON.click();
		reslogger.info("Clicked Save Button After Updating Payment Method");
		test_steps.add("Clicked Save Button After Updating Payment Method");
		assertEquals(res.Toaster_Message.getText(), "payment Information successfully saved");
		reslogger.info("Toaster Message: " + res.Toaster_Message.getText());
		test_steps.add("Toaster Message: " + res.Toaster_Message.getText());
		verifySpinerLoading(driver);
		return steps;
	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: removeAttachedReservationInPayments ' Description: Click
	 * Cancel Button Icon In Payments TO Remove Attached Reservation as Payment
	 * Method ' Input parameters: WebDriver , ArrayList<String> ' Return value:
	 * ArrayList<String> ' Created By: Aqsa Manzoor ' Created On: 1-06-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> removeAttachedReservationInPayments(WebDriver driver, ArrayList<String> steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String cancelIcon = "//input[contains(@data-bind,'alue:$parent.SelectedReservatio')]/following-sibling::span//button";
		WebElement cancelIconElement = driver.findElement(By.xpath(cancelIcon));
		Utility.clickThroughJavaScript(driver, cancelIconElement);

//		Wait.WaitForElement(driver, cancelIcon);
//		Wait.waitForElementToBeClickable(By.xpath(cancelIcon), driver);
//		cancelIconElement.click();
		reslogger.info("Reservation Attached Removed");
		test_steps.add("Reservation Attached Removed");
		Wait.wait10Second();
		return steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: enterAmountTakePayment ' Description: Enter Amount in Take
	 * Payment Popup Method ' Input parameters: WebDriver , ArrayList<String>,
	 * SString,String, ' Return value: ArrayList<String> ' Created By: Aqsa Manzoor
	 * ' Created On: 01-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> enterAmountTakePayment(WebDriver driver, ArrayList test_steps, String IsChangeInPayAmount,
			String ChangedAmountValue) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_Amount);
		String amount = res.CP_Reservation_Folio_TakePayment_Amount.getText().trim();
		Utility.app_logs.info("amount : " + amount);
		test_steps.add("Amount before Pay : " + amount);
		reslogger.info("Amount before Pay : " + amount);

		if (IsChangeInPayAmount.equalsIgnoreCase("Yes")) {
			test_steps.add("Change the pay amount value : Yes");
			reslogger.info("Change the pay amount value : Yes");
			res.CP_Reservation_Folio_TakePayment_Amount.clear();
			res.CP_Reservation_Folio_TakePayment_Amount.sendKeys(Keys.chord(Keys.CONTROL, "a"));
			res.CP_Reservation_Folio_TakePayment_Amount.sendKeys(ChangedAmountValue);
			res.CP_Reservation_Folio_TakePayment_Amount.sendKeys(Keys.TAB);
			test_steps.add("Enter the Change Amount Value : " + ChangedAmountValue);
			reslogger.info("Enter the Change Amount Value : " + ChangedAmountValue);
			amount = ChangedAmountValue;
			Wait.wait10Second();
		} else {
			test_steps.add("paying the amount : " + amount);
			reslogger.info("paying the amount : " + amount);
		}

		return test_steps;
	}

	public String getReservationConfirmationNumberFromBanner(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		String confirmationNumber = "//span[contains(@data-bind,'text:confirmationNumber')]";
		Wait.WaitForElement(driver, confirmationNumber);
		WebElement confirmationNumberElement = driver.findElement(By.xpath(confirmationNumber));
		Wait.wait5Second();
		String confirmation = confirmationNumberElement.getText();
		test_steps.add("Confirmation Number : <b>" + confirmation + "</b>");
		reslogger.info("Confirmation Number : <b>" + confirmation + "</b>");
		return confirmation;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: verificationPaymentWindow ' Description: Verification of Check
	 * In Payment Window and Check Out Payment Window ' Input parameters: String '
	 * Return Amount as String ' Created By: Gangotri ' Created On: June 3 2020 '
	 * Get Amount, Balance and Type in Array List called
	 * "ArrayList<String> amount= new ArrayList<String>();"
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> verificationPaymentWindow(WebDriver driver, ArrayList<String> test_steps, String title,
			String expiryDate, String nameOnCard, String cardNo, String PaymentType, String Type, String totalFee,
			String tripTax, String Percentage, String PolicyType, String TripPaid) throws InterruptedException {

		// getting amount,balance and type in ArrayList
		ArrayList<String> amount = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopupTitle);
		Utility.ScrollToElement(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle, driver);
		// Verified No Show Payment Page Title
		assertEquals(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText().toLowerCase().trim(),
				(title.toLowerCase().trim()), "Failed: To verify  Payment Page Title");
		test_steps.add(" Verified Header:<b> " + title + "</b>");
		reslogger.info(" Verified Header: " + title);
		String path = "//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + PaymentType + "']";
		WebElement paymentElement = driver.findElement(By.xpath(path));

		// Get Amount
		String getAmount = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		reslogger.info(getAmount);
		amount.add(getAmount.trim());

		// Get Balance
		String balance = null;
		if (PolicyType.equals("No Show") || PolicyType.equals("Cancel")) {
			balance = res.NoShowCancelPaymentPopup_Balance.getText().replace("$", "");
			amount.add(balance);
		} else if (PolicyType.equals("Check In")) {
			balance = res.CheckInPaymentPopup_Balance.getText().replace("$", "");
			amount.add(balance.trim());
		}

		assertEquals(getAmount.trim(), totalFee.trim(), "Failed: To verify Payment Page Amount: " + totalFee);
		test_steps.add("Verified Amount : <b> " + totalFee + "</b>");
		reslogger.info(" Verified Amount: " + totalFee);
		assertEquals(balance.trim(), totalFee.trim(), "Failed: To verify Payment Page Balance: " + totalFee);
		test_steps.add("Verified Balance : <b> " + totalFee + "</b>");
		reslogger.info(" Verified Balance: " + totalFee);
		// Verified Type

		String type = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.getText().toLowerCase().trim();
		amount.add(type.trim());
		reslogger.info(amount);
		assertEquals(type, (Type.toLowerCase().trim()), "Failed: To verify  Page Type: " + Type);
		test_steps.add(" Verified Type : <b> " + Type + "</b>");
		reslogger.info(" Verified Type: " + Type);

		if (PaymentType.equals("MC")) {
			// Verified No Show Payment Page Payment Method
			assertTrue(paymentElement.isDisplayed(), "Failed: To verify Payment Method");
			test_steps.add(" Verified Payment Method:<b> " + PaymentType + "</b> ");
			reslogger.info(" Verified Payment Method: " + PaymentType);

			// Verified No Show Payment Page Card No
			JavascriptExecutor executor = (JavascriptExecutor) driver;
			String CardNo = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_CardNumber);
			reslogger.info(CardNo);
			// Verify Card Number
			assertTrue(CardNo.contains(cardNo), "Failed: To verify Card Number");
			test_steps.add(" Verified Card Number: <b>" + CardNo + "</b>");
			reslogger.info(" Verified Card Number");
			String NameOnCard = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_NameOnCard);
			reslogger.info(NameOnCard);

			// Verify Name on Card Number
			assertEquals(NameOnCard.toLowerCase().trim(), (nameOnCard.toLowerCase().trim()),
					"Failed: To verify Name on Card ");
			test_steps.add("Verified Name on Card:<b>  " + nameOnCard + "</b>");
			reslogger.info(" Verified Name on Card");

			String ExpiryDate = (String) executor.executeScript("return arguments[0].value",
					res.CP_Reservation_NoShowPaymentPopup_Expiry);
			reslogger.info(ExpiryDate);

			// Verify Expiry Date
			assertEquals(ExpiryDate, (expiryDate), "Failed: To verify Expiry Date ");
			test_steps.add(" Verified Expiry Date:<b> " + ExpiryDate + "</b>");
			reslogger.info(" Verified Expiry Date");
		}
		if (PolicyType.equals("No Show") || PolicyType.equals("Cancel")) {
			// Verified Log as External Payment
			boolean isExistLogAsExternal = res.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox.isEnabled();
			if (isExistLogAsExternal) {
				if (!res.NoShowPaymentPopup_Date.isEnabled()) {
					test_steps.add(" Verified  Date Field Disabled ");
					reslogger.info(" Verified  Date Field Disabled ");
				}
				if (!res.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox.isSelected()) {
					res.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox.click();
					reslogger.info("Click  Log as External Payment Check Box");
					// Verified No Show Payment Log Button
					assertTrue(res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.isDisplayed(),
							"Failed: To verify Payment Page Log Button");
					test_steps.add(" Verified  Log/Pay Button ");
					reslogger.info("' Verified  Log/Pay Button ");
					assertTrue(res.NoShowPaymentPopup_Date.isEnabled(), "Failed: To verify Payment Page Date Field");
					test_steps.add(" Verified  Date Field  Enabled");
					reslogger.info(" Verified  Date Field  Enabled ");
				}

			}
		}
		if (PolicyType.equals("Check In")) {
			// Verified Override Check-In Amount
			res.CP_OverrideCheckInAmountCheckBox.click();
			test_steps.add(" Checked Override Check-In Amount Check Box");
			reslogger.info(" Checked Override Check-In Amount Check Box");
			boolean isAmountEnabled = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.isEnabled();
			assertEquals(isAmountEnabled, true, "Failed : to verify Amount field Enabled");
			test_steps.add(" Amount Field  Enabled");
			reslogger.info(" Amount Field  Enabled");
			boolean isTypeEnabled = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.isEnabled();
			assertEquals(isTypeEnabled, true, "Failed : to verify Type field Enabled");
			test_steps.add(" Type Field  Enabled");
			reslogger.info(" Type Field  Enabled");
			res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
			test_steps.add(" Click on Type Drop Down Box");
			reslogger.info(" Click on Type Drop Down Box");
			String[] types = { "Authorization Only", "Capture" };
			for (int i = 0; i < res.CP_CheckInTypeOptions.size(); i++) {
				assertEquals(res.CP_CheckInTypeOptions.get(i).getText().toLowerCase().trim(),
						(types[i].toLowerCase().trim()), "Failed: To verify Type Field");
				test_steps.add(" Verified  Type Option: <b>" + res.CP_CheckInTypeOptions.get(i).getText() + "</b>");
				reslogger.info(" Verified  Date Field  Enabled " + res.CP_CheckInTypeOptions.get(i).getText());
			}

			res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
			test_steps.add(" Click on Type Drop Down Box");
			reslogger.info(" Click on Type Drop Down Box");

			boolean iExist = res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.isDisplayed();
			assertEquals(iExist, true, "Failed : to verify Authrozied Button");
			test_steps.add(" Authrozied Button  Enabled");
			reslogger.info(" Authrozied Button  Enabled");
		}
		return amount;

	}

	public void verifyPolicyDetailsOnPaymentPopup(WebDriver driver, ArrayList<String> test_steps, String policyType,
			String policyName, String policyText) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.cancelResPopupPolicyName), driver);
			String policyNameDisplayed = res.cancelResPopupPolicyName.getText();
			Actions act = new Actions(driver);
			act.moveToElement(res.cancelResPopupPolicyName).perform();
			String policyNameAtToolTip = res.cancelResPopupPolicyToolTipName.getText();
			String policyTextAtToolTip = res.cancelResPopupPolicyToolTipText.getText();

			assertEquals(policyNameDisplayed, policyName, "Failed - Verify policy name on payments popup");
			test_steps.add("Successfully verified policy name on payments popup as <b>" + policyNameDisplayed + "</b>");
			if (policyType.equalsIgnoreCase("Cancellation")) {
				assertEquals(policyNameAtToolTip, policyName, "Failed - Verify policy name on payments popup");
				test_steps.add("Successfully verified policy name on payments popup tool tip as <b>"
						+ policyNameAtToolTip + "</b>");
			}
			assertEquals(policyTextAtToolTip, policyText, "Failed - Verify policy name on payments popup");
			test_steps.add("Successfully verified policy text on payments popup tool tip as <b>" + policyTextAtToolTip
					+ "</b>");

		} catch (Exception e) {
			Utility.app_logs.info(e);
		}
	}

	public boolean verifyTextExistsFromListOfRecords(List<WebElement> elements, String textExp) {
		boolean textFound = false;
		for (WebElement webElement : elements) {
			String textDisplayed = webElement.getText();
			if (textDisplayed.equalsIgnoreCase(textExp)) {
				textFound = true;
				break;
			}
		}
		return textFound;
	}

	public void verifyPaymentDescriptionAtGuestHistory(WebDriver driver, ArrayList<String> test_steps,
			String categoryExp, String descExp) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.folioHistoryTabSearchBox), driver);
		boolean category = verifyTextExistsFromListOfRecords(reservation.guestHistoryCategories, categoryExp);
		boolean description = verifyTextExistsFromListOfRecords(reservation.guestHistoryDescriptions, descExp);

		assertEquals(category, true, "Failed to verify payment description");
		test_steps.add("Successfully verified payment category as : <b>" + categoryExp + "</b>");

		assertEquals(description, true, "Failed to verify payment description");
		test_steps.add("Successfully verified payment category as : <b>" + descExp + "</b>");

	}

	public void verifyBalanceAmountAtFolio(WebDriver driver, ArrayList<String> test_steps, String balanceAmount) {
		if (balanceAmount.contains("£")) {
			balanceAmount = balanceAmount.replace("£", "").trim();
			reslogger.info(balanceAmount);
		}
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		balanceAmount = df.format(Double.parseDouble(balanceAmount));

		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			String balanceAmountDisplayed = get_Balance(driver, test_steps);

			if (balanceAmountDisplayed.contains("£")) {
				balanceAmountDisplayed = balanceAmountDisplayed.replace("£", "").trim();
				reslogger.info(balanceAmountDisplayed);
			}

			assertEquals(balanceAmountDisplayed, balanceAmount, "Failed - Verify paid amount at summary");
			test_steps.add(
					"Successfully verified balance amount displayed at folio as <b>" + balanceAmountDisplayed + "</b>");
			reslogger.info("Successfully verified balance amount displayed at folio as " + balanceAmountDisplayed);

		} catch (Exception e) {

		}
	}

	public int getFolioLineItemTRSize(WebDriver driver, ArrayList<String> test_steps) {
		int trSize = 0;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		trSize = res.folioLineItemTableTrSize.size();
		test_steps.add("Total Folio Line Item Table Row Is: <b>" + trSize + "</b>");
		reslogger.info("Total Folio Line Item Table Row Is: " + trSize);
		return trSize;

	}

	public void verifyFolioLineItemTRSize(WebDriver driver, ArrayList<String> test_steps, int size) {
		int trSize = 0;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		trSize = res.folioLineItemTableTrSize.size();
		assertEquals(trSize, size, "Failed - Verify Folio Line Item Table Size");
		test_steps.add("Successfully verified Folio Line Item Table Size <b>" + trSize + "</b>");
		reslogger.info("Successfully verified Folio Line Item Table Size " + trSize);

	}

	public void clickCheckoutWithoutPaymentButton(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkoutWithoutPayment);
		Wait.explicit_wait_visibilityof_webelement(res.checkoutWithoutPayment, driver);
		res.checkoutWithoutPayment.click();
		String buttonName = res.checkoutWithoutPayment.getText().split(" ")[0];
		test_steps.add("Clicking on " + buttonName + " Button ");
		reslogger.info("Clicking on " + buttonName + " Button ");
	}

	public void clickOnAddTask(WebDriver driver) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddTask);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_AddTask), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_AddTask), driver);
		Utility.ScrollToElement_NoWait(res.CP_AddTask, driver);
	}

	public void enterMailingAddressWithEmail(WebDriver driver, ArrayList<String> test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String PhoneNumber, String AltenativePhone, String Email,
			String Account, String AccountType, String Address1, String Address2, String Address3, String City,
			String Country, String State, String PostalCode, String IsGuesProfile) throws InterruptedException {
		enter_GuestName(driver, test_steps, Salutation, GuestFirstName, GuestLastName);
		uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);
		enter_Phone(driver, test_steps, PhoneNumber, AltenativePhone);
		// enter_Phone(driver, test_steps, PhoneNumber, AltenativePhone);
		enter_Email(driver, test_steps, Email);
		enter_Address(driver, test_steps, Address1, Address2, Address3);
		enter_City(driver, test_steps, City);
		select_Country(driver, test_steps, Country);
		select_State(driver, test_steps, State);
		enter_PostalCode(driver, test_steps, PostalCode);
		enter_Account(driver, test_steps, Account, AccountType);
		enter_Account(driver, test_steps, Account, AccountType);
	}

	public void manualEmail(WebDriver driver, String to, String subject, String attachment, String body,
			String contentFields, String content) throws InterruptedException {
		verifySpinerLoading(driver);
		Elements_Reservation ReservationPage = new Elements_Reservation(driver);
		Wait.explicit_wait_visibilityof_webelement(ReservationPage.Click_Email_icon, driver);
		Utility.ScrollToElement(ReservationPage.Click_Email_icon, driver);
		ReservationPage.Click_Email_icon.click();
		Utility.app_logs.info("Click Mail Icon");
		Wait.explicit_wait_xpath(OR.Verify_Send_Email_Popup, driver);
		Wait.explicit_wait_absenceofelement(OR.Verify_loading_popup_mailContentPopUp, driver);
		Wait.wait3Second();
		ReservationPage.Get_email_Id.clear();
		ReservationPage.Get_email_Id.sendKeys(to);

		if (attachment != null && !attachment.equals("")) {
			ReservationPage.clickAttachmentDropDown.click();
			By attachmentSelector = By.xpath(String.format("(//span[contains(text(),'%s')])[3]", attachment));
			Wait.waitForElementToBeClickable(attachmentSelector, driver);
			driver.findElement(attachmentSelector).click();
		}

		if (subject != null && !subject.equals("")) {
			ReservationPage.subjectTextField.clear();
			ReservationPage.subjectTextField.sendKeys(subject);
		}

		if (body != null && !body.equals("")) {
			ReservationPage.bodyText.click();
			By bodySelector = By.xpath(String.format(
					"//label[contains(text(),'Body')]/following-sibling::div//span[contains(text(),'%s')]", body));
			Wait.waitForElementToBeClickable(bodySelector, driver);
			driver.findElement(bodySelector).click();
		}

		if (contentFields != null && !contentFields.equals("")) {
			String[] customFieldArray = contentFields.split("\\|");
			for (String customField : customFieldArray) {
				ReservationPage.customFieldButton.click();
				By fieldSelector = By.xpath(String.format(
						"//label[contains(text(),'Custom Fields')]//following-sibling::div//span[text()='%s']",
						customField));
				Wait.waitForElementToBeClickable(fieldSelector, driver);
				driver.findElement(fieldSelector).click();
			}
		}

		if (content != null && !content.equals("")) {
			driver.switchTo().frame(driver.findElement(By.xpath("//iframe[contains(@title,'Rich Text Editor')]")));
			try {
				String locator = "//body/div[last()]|//body/p[last()]";
				Wait.WaitForElement(driver, locator);
				WebElement element = driver.findElement(By.xpath(locator));
				JavascriptExecutor executor = (JavascriptExecutor) driver;
				executor.executeScript("arguments[0].innerHTML = arguments[1]", element, content);
			} catch (Exception e) {

			}
			driver.switchTo().defaultContent();
		}

		Wait.wait5Second();
		ReservationPage.Click_Send_Email.click();
		Utility.app_logs.info("Click Send Email ");
	}

	public void manualEmail(WebDriver driver, String Email, String Attachment) throws InterruptedException {

		Elements_Reservation ReservationPage = new Elements_Reservation(driver);
		Wait.explicit_wait_visibilityof_webelement(ReservationPage.Click_Email_icon, driver);
		Utility.ScrollToElement(ReservationPage.Click_Email_icon, driver);

		ReservationPage.Click_Email_icon.click();
		Utility.app_logs.info("Click Mail Icon");
		Wait.explicit_wait_xpath(OR.Verify_Send_Email_Popup, driver);
		Wait.explicit_wait_absenceofelement(OR.Verify_loading_popup_mailContentPopUp, driver);
		Wait.wait3Second();
		String GetEmailid = ReservationPage.Get_email_Id.getText();
		reslogger.info(GetEmailid + "" + GetEmailid);
		Wait.wait3Second();
		ReservationPage.Get_email_Id.clear();
		Wait.wait3Second();
		ReservationPage.Get_email_Id.sendKeys(Email);
		reslogger.info(GetEmailid + "" + GetEmailid);

		if (Attachment.equalsIgnoreCase("") || Attachment.equals(null)) {
			Utility.app_logs.info("No Attachment");
		} else {
			ReservationPage.clickAttachmentDropDown.click();
			reslogger.info("clicked on drop down successfully");
			/*
			 * selectGuestRegistration customFieldButton bodyText
			 */
			ReservationPage.selectGuestRegistration.click();
			// ReservationPage.customFieldButton.click();
			String bodyText = ReservationPage.bodyText.getText();
			reslogger.info(bodyText + "" + bodyText);

			// new
			// Select(ReservationPage.Select_Attachment).selectByVisibleText(Attachment);
		}
		Wait.wait5Second();
		ReservationPage.Click_Send_Email.click();
		Utility.app_logs.info("Click Send Email ");
		Wait.wait10Second();
	}

	public void clickOnDropDownIcon(WebDriver driver, ArrayList test_steps) throws Exception {
		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.reportsIcon), driver);
			Wait.wait2Second();
			res.reportsIcon.click();
			test_steps.add("Click on reservation Report");
			reslogger.info("Click on reservation Report");

		} catch (Exception e) {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.reportsIcon), driver);
			Wait.wait2Second();
			res.reportsIcon.click();
			test_steps.add("Click on reservation Report");
			reslogger.info("Click on reservation Report");
		}

	}

	public void selectGuestStatements(WebDriver driver, ArrayList test_steps) throws Exception {
		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.guestStatements), driver);
			Wait.wait2Second();
			res.guestStatements.click();
			Wait.wait3Second();
			res.allRooms.click();
			test_steps.add("Click on guestStatements In Report dropdown");
			reslogger.info("Click on guestStatements Report dropdown");
			// Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.allRooms),
			// driver);
			Wait.wait2Second();

		} catch (Exception e) {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.guestStatements), driver);
			Wait.wait2Second();
			res.guestStatements.click();
			Wait.wait3Second();
			res.allRooms.click();
			test_steps.add("Click on guestStatements In Report dropdown");
			reslogger.info("Click on guestStatements Report dropdown");
			// Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.allRooms),
			// driver);
			Wait.wait2Second();
		}

	}

	public void selectAllRoom(WebDriver driver, ArrayList test_steps) throws Exception {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		String pdfFileInText = null;
		List<String> ReportContant = new ArrayList<String>();
		String dataPath = null;
		File theNewestFile = null;
		File getFile = null;
		// res.guestStatements.click();
		// Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.allRooms),
		// driver);
		Wait.wait3Second();
		// res.allRooms.click();
		test_steps.add("Click on AllRooms In Report dropdown");
		reslogger.info("Click on AllRooms Report dropdown");

		String loading = "(//div[@class='ir-loader-in'])";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");

		Utility.app_logs.info(driver.findElements(By.xpath("//a[@class='logo_des']/img")).size());
		if (driver.findElements(By.xpath("//a[@class='logo_des']/img")).size() > 0) {
			String loc = "//div//embed[@id='embdreportViewer']";
			try {
				ArrayList<String> alltabs = new ArrayList<>(driver.getWindowHandles());
				driver.switchTo().window(alltabs.get(alltabs.size() - 1));

				String src = driver.findElement(By.xpath(loc)).getAttribute("src");
				Utility.app_logs.info(src);
				driver.get(src);
				driver.findElement(By.xpath(loc)).click();

			} catch (Exception e) {
				Utility.app_logs.info(e);
			}
		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: clickReservationReports ' Description: <This method will click
	 * on the reservation Report in new reservation Page> ' Input
	 * parameters:(WebDriver ) ' Return value: ArrayList<String> ' Created By:
	 * <Adhnan Ghaffar> ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickReservationReports(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.reservationReports);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.reservationReports), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.reservationReports), driver);
		res.reservationReports.click();
		test_steps.add("Click on reports");
		reslogger.info("Click on reports");
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: clickGuestRegistrationOption ' Description: This method will
	 * click on the guest Registration Option in Reports Dropdown in new reservation
	 * Page ' Input parameters:(WebDriver,) ' Return value: ArrayList<String> '
	 * Created By: <Adhnan Ghaffar> ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickGuestRegistrationOption(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.guestRegistration);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.guestRegistration), driver);
		res.guestRegistration.click();

		test_steps.add("Click on Guest Registration Report button");
		reslogger.info("Click on Guest Registration Report button");

		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: dirtyRoomCheckInPopUpVerification ' Description: This method
	 * will wait for the Dirty room popup during check In ' Input
	 * parameters:(WebDriver, ArrayList<String> ) ' Return value: ArrayList<String>
	 * ' Created By: Adhnan Ghaffar ' Created On: 06/16/2020
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> dirtyRoomCheckInPopUpVerification(WebDriver driver, ArrayList<String> teststeps)
			throws InterruptedException {
		boolean isRoomDirty = Utility.isElementPresent(driver,
				By.xpath(OR_Reservation.CPRESERVATION_CHECKIN_DIRTYROOMMODALPOPUP));

		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);

		if (isRoomDirty) {
			return clickConfirmButtonOfDirtyPopupModel(driver, teststeps, isRoomDirty);
		} else {
			test_steps.add("No Dirty Room Popup Appear");
			reslogger.info("No Dirty Room Popup Appear");
		}
		return teststeps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: clickConfirmButtonOfDirtyPopupModel ' Description: This method
	 * will click on the confirm button of Dirty Room Popup ' Input
	 * parameters:(WebDriver, ArrayList<String> ) ' Return value: ArrayList<String>
	 * ' Created By: <Adhnan Ghaffar> ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickConfirmButtonOfDirtyPopupModel(WebDriver driver, ArrayList<String> test_steps,
			boolean isPresent) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		if (isPresent) {

			boolean isExist = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckIn_ModelPopConfirmButton));
			if (isExist) {
				Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckIn_ModelPopConfirmButton);
				Utility.ScrollToElement(res.CP_Reservation_CheckIn_ModelPopConfirmButton, driver);
				test_steps.add("One or more of the selected room(s) is Dirty");
				reslogger.info("One or more of the selected room(s) is Dirty");
				res.CP_Reservation_CheckIn_ModelPopConfirmButton.click();
				test_steps.add("Click Confirm Button");
				reslogger.info("Click Confirm Button");
			}
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
			reslogger.info("Loading Done");
		} else {
			test_steps.add("One or more of the selected room(s) is Not Dirty ");
			reslogger.info("One or more of the selected room(s) is Not Dirty ");
		}
		return test_steps;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <clickCancelDepositPaymentPopupButton> ' Description: <This
	 * method will click Cancel button in deposit payment poppup> ' Input
	 * parameters: <WebDriver driver> ' Return value: <ArrayList<String>> ' Created
	 * By: <Farhan Ghaffar> ' Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickCancelDepositPaymentPopupButton(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.cancelDepositPaymentPopupButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.cancelDepositPaymentPopupButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.cancelDepositPaymentPopupButton), driver);
		Utility.ScrollToElement_NoWait(res.cancelDepositPaymentPopupButton, driver);
		res.cancelDepositPaymentPopupButton.click();
		testSteps.add("Clicking on Cancel Deposit Payment Button");
		reslogger.info("Clicking on Cancel Deposit Payment Button");
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <clickDepositPaymentPopupPaymentButton> ' Description: <This
	 * method will click pyment button in deposit payment poppup> ' Input
	 * parameters: <WebDriver driver> ' Return value: <ArrayList<String>> ' Created
	 * By: <Farhan Ghaffar> ' Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickDepositPaymentPopupPaymentButton(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.depositPaymentPopupPaymentButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.depositPaymentPopupPaymentButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.depositPaymentPopupPaymentButton), driver);
		Utility.ScrollToElement_NoWait(res.depositPaymentPopupPaymentButton, driver);
		res.depositPaymentPopupPaymentButton.click();
		testSteps.add("Clicking on Cancel Deposit Payment Button");
		reslogger.info("Clicking on Cancel Deposit Payment Button");
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getDepositPaymentPopupTransactionDecline> ' Description:
	 * <This method will check if transaction decline message is displaying in
	 * deposit payment poppup or not> ' Input parameters: <WebDriver driver> '
	 * Return value: <ArrayList<String>> ' Created By: <Farhan Ghaffar> ' Created
	 * On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> getDepositPaymentPopupTransactionDecline(WebDriver driver) throws InterruptedException {
		ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.depositPaymentPopupTransactionDecline);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.depositPaymentPopupTransactionDecline), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.depositPaymentPopupTransactionDecline), driver);
		Utility.ScrollToElement_NoWait(res.depositPaymentPopupTransactionDecline, driver);
		Boolean isDisplayed = res.depositPaymentPopupTransactionDecline.isDisplayed();
		reslogger.info("isDisplayed : " + isDisplayed);
		if (isDisplayed) {
			testSteps.add("Deposit payment transaction decline message dislaying");
			reslogger.info("Deposit payment transaction decline message dislaying");

		} else {
			testSteps.add("Deposit payment transaction decline message is not dislaying");
			reslogger.info("Deposit payment transaction decline message is not dislaying");

		}
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getDepositPaymentPopupHeading> ' Description: <This method
	 * will return heading diplay messagein deposit payment poppup> ' Input
	 * parameters: <WebDriver driver> ' Return value: <ArrayList<String>> ' Created
	 * By: <Farhan Ghaffar> ' Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getDepositPaymentPopupBalance(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.depositPaymentPopupBalance);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.depositPaymentPopupBalance), driver);
		Utility.ScrollToElement_NoWait(res.depositPaymentPopupBalance, driver);
		String balance = res.depositPaymentPopupBalance.getText();
		reslogger.info("balance : " + balance);
		return balance;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getDepositPaymentPopupPolicy> ' Description: <This method
	 * will return deposit policy in deposit payment poppup> ' Input parameters:
	 * <WebDriver driver> ' Return value: <String> ' Created By: <Farhan Ghaffar> '
	 * Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getDepositPaymentPopupPolicy(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.depositPaymentPopupPolicy);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.depositPaymentPopupPolicy), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.depositPaymentPopupPolicy), driver);
		Utility.ScrollToElement_NoWait(res.depositPaymentPopupPolicy, driver);
		String policy = res.depositPaymentPopupPolicy.getText();
		reslogger.info("policy : " + policy);
		return policy;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getDepositPaymentPopupAmount> ' Description: <This method
	 * will return deposit amount in deposit payment poppup> ' Input parameters:
	 * <WebDriver driver> ' Return value: <String> ' Created By: <Farhan Ghaffar> '
	 * Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getDepositPaymentPopupAmount(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement_ID(driver, OR_Reservation.depositPaymentPopupAmount);
		Wait.waitForElementToBeVisibile(By.id(OR_Reservation.depositPaymentPopupAmount), driver);
		Utility.ScrollToElement_NoWait(res.depositPaymentPopupAmount, driver);
		String amount = res.depositPaymentPopupAmount.getText();
		reslogger.info("amount : " + amount);
		return amount;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <clickSaveAsQuoteButton> ' Description: <This method will
	 * click save as quote button in deposit payment poppup> ' Input parameters:
	 * <WebDriver driver> ' Return value: <ArrayList<String>> ' Created By: <Farhan
	 * Ghaffar> ' Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickSaveAsQuoteButton(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.saveAsQuoteButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.saveAsQuoteButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.saveAsQuoteButton), driver);
		Utility.ScrollToElement_NoWait(res.saveAsQuoteButton, driver);
		Utility.customAssert(res.saveAsQuoteButton.isDisplayed() + "", "true", true,
				"Successfully Verified Quote Button Visible", "Failed to Verified Quote Button Visible", true,
				test_steps);
		res.saveAsQuoteButton.click();
		testSteps.add("Clicking on Save As Quote Button");
		reslogger.info("Clicking on Save As Quote Button");
		verifySpinerLoading(driver);
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getReservationStatusOnDetailSection> ' Description: <This
	 * method will return reservation status in details section> ' Input parameters:
	 * <WebDriver driver> ' Return value: String>> ' Created By: <Farhan Ghaffar> '
	 * Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getReservationStatusOnDetailSection(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.reservationStatusOnDetailSection);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.reservationStatusOnDetailSection), driver);
		String status = res.reservationStatusOnDetailSection.getText();
		reslogger.info("status : " + status);
		return status;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getReservationNumberOnDetailSection> ' Description: <This
	 * method will return reservation number in details section> ' Input parameters:
	 * <WebDriver driver> ' Return value: String>> ' Created By: <Farhan Ghaffar> '
	 * Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getReservationNumberOnDetailSection(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.reservationNumberOnDetailSection);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.reservationNumberOnDetailSection), driver);
		String reservationNumber = res.reservationNumberOnDetailSection.getText();
		reslogger.info("reservationNumber : " + reservationNumber);
		return reservationNumber;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <updateCCNumberNumber> ' Description: <This method will update
	 * credit card number in detail section> ' Input parameters: <WebDriver driver,
	 * String newCCNumber> ' Return value: <ArrayList<String>> ' Created By: <Farhan
	 * Ghaffar> ' Created On: <06/17/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> updateCCNumberNumber(WebDriver driver, String cardNumber)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> testStep = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.editPaymentInfoButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.editPaymentInfoButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.editPaymentInfoButton), driver);
		Utility.ScrollToElement_NoWait(element.editPaymentInfoButton, driver);
		element.editPaymentInfoButton.click();
		testStep.add("Click on edit payment info");
		reslogger.info("Click on edit payment info");

		Wait.WaitForElement(driver, OR_Reservation.decryptLink);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.decryptLink), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.decryptLink), driver);
		Utility.ScrollToElement_NoWait(element.decryptLink, driver);
		element.decryptLink.click();
		testStep.add("Click on decrypt cc number button");
		reslogger.info("Click on decrypt cc number button");

		Wait.WaitForElement(driver, OR_Reservation.ccNumberInput);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ccNumberInput), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ccNumberInput), driver);
		Utility.ScrollToElement_NoWait(element.ccNumberInput, driver);
		element.ccNumberInput.clear();
		element.ccNumberInput.sendKeys(cardNumber);
		testStep.add("Entered card Number : " + cardNumber);
		reslogger.info("Entered card Number : " + cardNumber);

		Wait.WaitForElement(driver, OR_Reservation.updateGuestProfileInput);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.updateGuestProfileInput), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.updateGuestProfileInput), driver);
		Utility.ScrollToElement_NoWait(element.updateGuestProfileInput, driver);
		element.updateGuestProfileInput.click();
		testStep.add("Click on update guest profile button");
		reslogger.info("Click on update guest profile button");

		Wait.WaitForElement(driver, OR_Reservation.paymentInfoSaveButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.paymentInfoSaveButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.paymentInfoSaveButton), driver);
		element.paymentInfoSaveButton.click();
		testStep.add("Click on payment info save button");
		reslogger.info("Click on payment info save button");

		return testStep;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getDepositDue> ' Description: <This method will return
	 * deposit due amount> ' Input parameters: <WebDriver driver> ' Return value:
	 * <String> ' Created By: <Farhan Ghaffar> ' Created On: <06/17/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getDepositDue(WebDriver driver) throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> testStep = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.depositDue);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.depositDue), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.depositDue), driver);
		Utility.ScrollToElement_NoWait(element.depositDue, driver);

		String depositDue = element.depositDue.getText();
		reslogger.info("depositDue : " + depositDue);

		return depositDue;

	}

	public ArrayList<String> verifyReservationTask(WebDriver driver, String taskName, String detail, String dueOn,
			String status, ArrayList<String> test_steps, String roomNo) throws InterruptedException {
		Elements_Reservation reservationPage = new Elements_Reservation(driver);
		Wait.wait5Second();
		String path = null;
		if (Utility.validateString(roomNo)) {
			path = "//task-info//span[contains(text(),'" + taskName
					+ "')]/..//ancestor::td/..//following-sibling::td[contains(text(),'" + roomNo
					+ "')]/following-sibling::td[contains(text(),'" + detail
					+ "')]/following-sibling::td[contains(text(),'" + dueOn + "')]/following-sibling::td[(text()='"
					+ status + "')]";
		} else {
			path = "//task-info//span[contains(text(),'" + taskName
					+ "')]/..//ancestor::td/..//following-sibling::td[contains(text(),'" + detail
					+ "')]/following-sibling::td[contains(text(),'" + dueOn + "')]/following-sibling::td[(text()='"
					+ status + "')]";
		}
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		// Verified No Show Fee line item
		assertTrue(element.isDisplayed(), "Failed: To Verify Reservation Task");
		test_steps.add(" Verified TASK TYPE:<b>  " + taskName + "</b>");
		reslogger.info("Verified  TASK TYPE: " + taskName);
		test_steps.add(" Verified  DETAILS:<b>  " + detail + "</b>");
		reslogger.info(" Verified  DETAILS: " + detail);
		test_steps.add("Verified  DUE ON:<b>  " + dueOn + "</b>");
		reslogger.info(" Verified DUE ON: " + dueOn);
		test_steps.add(" Verified STATUS:<b>  " + status + "</b>");
		reslogger.info(" Verified  STATUS: " + status);
		if (Utility.validateString(roomNo)) {
			test_steps.add(" Verified ROOMS:<b>  " + roomNo + "</b>");
			reslogger.info(" Verified  ROOMS: " + roomNo);
		}
		return test_steps;

	}

	public void dirtyPopupModelClickConfirmButton(WebDriver driver, ArrayList test_steps, boolean isPresent)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		if (isPresent) {
			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckIn_ModelPopConfirmButton);
			Utility.ScrollToElement(res.CP_Reservation_CheckIn_ModelPopConfirmButton, driver);
			test_steps.add("The room status is dirty");
			reslogger.info("The room status is dirty");
			res.CP_Reservation_CheckIn_ModelPopConfirmButton.click();
			test_steps.add("Click Confirm Button");
			reslogger.info("Click Confirm Button");
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
			reslogger.info("Loading Done");
		} else {
			test_steps.add("The room status is not  dirty");
			reslogger.info("The room status is not dirty");
		}

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: checkLogasExternalPayment ' Description: This method will
	 * check Log as External Payment in Check In Popup during CheckIn. ' Input
	 * parameters: (driver, String , String) ' Return value: void ' Created By:
	 * Adhnan Ghaffar ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void checkLogasExternalPayment(WebDriver driver, ArrayList test_steps, boolean isCheck)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		if (!res.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox.isSelected()) {
			if (isCheck) {

				res.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox.click();
				for (int i = 0; i < 5; i++) {
					reslogger.info(res.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox.isSelected());
					reslogger.info(driver.findElement(By.xpath(
							OR_Reservation.NoShowPaymentPopup_ExternalPaymentCheckBox + "//preceding-sibling::input"))
							.isSelected());
					if (driver.findElement(By.xpath(
							OR_Reservation.NoShowPaymentPopup_ExternalPaymentCheckBox + "//preceding-sibling::input"))
							.isSelected()) {
						break;
					}
				}
				assertEquals(driver.findElement(By.xpath(
						OR_Reservation.NoShowPaymentPopup_ExternalPaymentCheckBox + "//preceding-sibling::input"))
						.isSelected(), true);
			}
			test_steps.add("Log as External Payment: " + driver
					.findElement(By.xpath(
							OR_Reservation.NoShowPaymentPopup_ExternalPaymentCheckBox + "//preceding-sibling::input"))
					.isSelected());
			reslogger.info("Log as External Payment: " + driver
					.findElement(By.xpath(
							OR_Reservation.NoShowPaymentPopup_ExternalPaymentCheckBox + "//preceding-sibling::input"))
					.isSelected());
		}
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: clickGuestStatementOption ' Description: This method will
	 * click on Guest Statement Option form the report dropdown in reservation. '
	 * Input parameters: (driver) ' Return value: ArrayList<String> ' Created By:
	 * Adhnan Ghaffar ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickGuestStatementOption(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.guestStatement);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.guestStatement), driver);
		res.guestStatement.click();

		test_steps.add("Click on Guest Statement Report button");
		reslogger.info("Click on Guest Statement Report button");

		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: reportDisplayed ' Description: This method will check that the
	 * report is displayed or not. ' Input parameters: (driver) ' Return value:
	 * ArrayList<String> ' Created By: Adhnan Ghaffar ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public boolean reportDisplayed(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {

		boolean isExist = Utility.isElementPresent(driver, By.id("embdreportViewer"));
		System.out.print(" is Exist:" + isExist);
		if (isExist) {
			testSteps.add("PDF Report is Displayed");
			Utility.app_logs.info("PDF Report is Displayed");
		} else {
			testSteps.add("PDF Report is Not Displayed");
			Utility.app_logs.info("PDF Report is Not Displayed");
		}
		return isExist;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: downloadReport ' Description: This method will download the
	 * report. ' Input parameters: (driver) ' Return value: void ' Created By:
	 * Adhnan Ghaffar ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void downloadReport(WebDriver driver) throws InterruptedException {

		String dataPath = driver.findElement(By.id("embdreportViewer")).getAttribute("src");
		driver.get(dataPath);
		String fileName = Utility.download_status(driver);
		System.out.print("File Name:" + fileName);

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: verifyDataExistInReport ' Description: This method will verify
	 * data exist in single line in the given array of lines. ' Input parameters:
	 * (driver, String[], String, boolean) ' Return value: String ' Created By:
	 * Adhnan Ghaffar ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String verifyDataExistInReport(WebDriver driver, String[] lines, String data, boolean equals)
			throws InterruptedException {

		boolean found = false;
		int i = 0;
		for (String line : lines) {
			// Utility.app_logs.info("line : " + i + " " + line);
			// Utility.app_logs.info("'" +line.trim() + "'" );
			// Utility.app_logs.info("'" +data + "'" );
			if (!equals) {
				if (line.trim().contains(data)) {
					Utility.app_logs.info("line : " + i + " " + line);
					found = true;
					return line;
				}
			} else {
				if (line.trim().equals(data)) {
					Utility.app_logs.info("line : " + i + " " + line);
					found = true;
					return line;
				}
			}
			i++;
		}
		assertTrue(found, "Failed: Required Data (" + data + ") not found");
		return null;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: verifyDataExistInTwoLinesInReport ' Description: This method
	 * will verify the required data exist in any two lines of given list of lines.
	 * ' Input parameters: (driver,String[], String, String, boolean) ' Return
	 * value: String ' Created By: Adhnan Ghaffar ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String verifyDataExistInTwoLinesInReport(WebDriver driver, String[] lines, String searchData, String data,
			boolean equals) throws InterruptedException {

		boolean found = false;
		int i = 0;
		String dataLine = null;
		for (String line : lines) {
			// Utility.app_logs.info("line : " + i + " " + line);
			// Utility.app_logs.info("'" + line.trim() + "'");
			// Utility.app_logs.info("'" + data + "'");
			if (line.trim().contains(searchData)) {
				dataLine = line + lines[i + 1];
				Utility.app_logs.info("'" + dataLine + "'");
				if (!equals) {
					if (dataLine.trim().contains(data)) {
						found = true;
						return line;
					}
				} else {
					if (dataLine.trim().equals(data)) {
						Utility.app_logs.info("line : " + i + " " + line);
						found = true;
						return line;
					}
				}
			}

			i++;
		}
		assertTrue(found, "Failed: Required Data (" + data + ") not found");
		return null;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: waitTillNumberOfTabsExist ' Description: This method will wait
	 * untill the specific number of tabs exit (usually wait for report's tab) '
	 * Input parameters: (driver, int) ' Return value: void ' Created By: Adhnan
	 * Ghaffar ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void waitTillNumberOfTabsExist(WebDriver driver, int size) throws InterruptedException {
		ArrayList<String> tabs2 = new ArrayList<String>(driver.getWindowHandles());
		int i = 0;
		while (tabs2.size() < size && i < 10) {
			Wait.wait2Second();
			tabs2 = new ArrayList<String>(driver.getWindowHandles());
		}
		assertTrue(tabs2.size() >= size, "Failed: Number of tabs are not " + size);

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: <getBalance> ' Description: <This method will get the balance
	 * of the label> ' Input parameters:(WebDriver, String ) ' Return value: String
	 * ' Created By: <Adhnan Ghaffar> ' Created On: <06/02/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getBalance(WebDriver driver, String label) throws InterruptedException {
		String xpath = "//label[text()='" + label + "']//parent::div//span[@class='pamt']";
		Wait.WaitForElement(driver, xpath);
		WebElement amount = driver.findElement(By.xpath(xpath));
		Wait.explicit_wait_visibilityof_webelement(amount, driver);
		Utility.ScrollToElement(amount, driver);
		return amount.getText().trim();
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: clickFolioOptions ' Description: <This method will clcik on
	 * Folio Options Tab> ' Input parameters:(WebDriver) ' Return value:
	 * ArrayList<String> ' Created By: <Adhnan Ghaffar> ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickFolioOptions(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.FOLIO_OPTIONS_TAB);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.FOLIO_OPTIONS_TAB), driver);
		res.FOLIO_OPTIONS_TAB.click();

		testSteps.add("Click 'Folio Options' Tab");
		reslogger.info("Click 'Folio Options' Tab");
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: clickFolioDetails ' Description: <This method will clcik on
	 * Folio Details Tab> ' Input parameters:(WebDriver) ' Return value:
	 * ArrayList<String> ' Created By: <Adhnan Ghaffar> ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickFolioDetails(WebDriver driver) {

		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.FOLIO_DETAILS_TAB);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.FOLIO_DETAILS_TAB), driver);
		reservation.FOLIO_DETAILS_TAB.click();

		testSteps.add("Click 'Folio Details' Tab");
		reslogger.info("Click 'Folio Details' Tab");
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: suppressAccountFolioPrintingCheckBox ' Description: <This
	 * method will Click 'Suppress Account Folio Printing' CheckBox> ' Input
	 * parameters:(WebDriver, boolean ) ' Return value: ArrayList<String> ' Created
	 * By: <Adhnan Ghaffar> ' Created On: <06/16/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> suppressAccountFolioPrintingCheckBox(WebDriver driver, boolean check)
			throws InterruptedException {

		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.SUPPRESS_ACCOUNT_FOLIO_PRINTING_CHECKBOX);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.SUPPRESS_ACCOUNT_FOLIO_PRINTING_CHECKBOX), driver);
		Utility.ScrollToElement(reservation.SUPPRESS_ACCOUNT_FOLIO_PRINTING_CHECKBOX, driver);
		String status = "Checked";
		if (check) {
			if (!reservation.SUPPRESS_ACCOUNT_FOLIO_PRINTING_CHECKBOX.isSelected()) {
				reservation.SUPPRESS_ACCOUNT_FOLIO_PRINTING_CHECKBOX.click();
				testSteps.add("Click 'Suppress Account Folio Printing' CheckBox");
				reslogger.info("Click 'Suppress Account Folio Printing' CheckBox");
				Folio folio = new Folio();
				testSteps.addAll(folio.ClickSaveFolioItemsButton(driver));
			}
		} else if (reservation.SUPPRESS_ACCOUNT_FOLIO_PRINTING_CHECKBOX.isSelected()) {
			status = "Unchecked";
			reservation.SUPPRESS_ACCOUNT_FOLIO_PRINTING_CHECKBOX.click();
			testSteps.add("Click 'Suppress Account Folio Printing' CheckBox");
			reslogger.info("Click 'Suppress Account Folio Printing' CheckBox");
			Folio folio = new Folio();
			test_steps.addAll(folio.ClickSaveFolioItemsButton(driver));
		}
		assertEquals(check, reservation.SUPPRESS_ACCOUNT_FOLIO_PRINTING_CHECKBOX.isSelected(),
				"Failed : .SUPPRESS ACCOUNT FOLIO PRINTING CHECKBOX is not in Required State");
		testSteps.add("'Suppress Account Folio Printing' CheckBox is '" + status + "'");
		reslogger.info("'Suppress Account Folio Printing' CheckBox is '" + status + "'");
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: selectAccount ' Description: This method will associate
	 * account to the reservation. ' Input parameters: (driver, ArrayList<String ,
	 * String, String, String) ' Return value: void ' Created By: Adhnan Ghaffar '
	 * Created On: <06/12/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public void selectAccount(WebDriver driver, ArrayList<String> testSteps, String accountName, String accountNumber,
			String accountType) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Account);
		String accountdisplay = "//label[contains(text(),'Account')]//..//i[starts-with(@class,'rightIcon demo-icon icon-pencil')]";
		WebElement ele = driver.findElement(By.xpath(accountdisplay));
		if (!ele.isDisplayed()) {
			if (accountName.equalsIgnoreCase("") || accountName.isEmpty()) {
				Utility.app_logs.info("No Account");
			} else {
				res.CP_NewReservation_Account.sendKeys(accountName);
				testSteps.add("Enter Account : " + accountName);
				reslogger.info("Enter Account : " + accountName);
				Wait.wait2Second();
				String account = "//span[text()='" + accountNumber.trim() + "']//parent::div";
				// "//b[text()='" + Account.trim() + "']//..//..//..";

				Wait.WaitForElement(driver, account);
				driver.findElement(By.xpath(account)).click();
				String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]//following-sibling::div//button[contains(text(),'Yes')]";
				Wait.WaitForElement(driver, dataYes);
				driver.findElement(By.xpath(dataYes)).click();
				testSteps.add(
						"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
				reslogger.info(
						"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
				Wait.wait2Second();
				String policyYes = "//div[contains(text(),'Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?')]/following-sibling::div//button[contains(text(),'Yes')]";

				try {
					// Wait.WaitForElement(driver, policyYes);
					Wait.wait2Second();
					driver.findElement(By.xpath(policyYes)).click();
					testSteps.add(
							"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes");
					reslogger.info(
							"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes");

				} catch (Exception e) {
					// TODO: handle exception
				}

			}
		} else {
			testSteps.add("Account Aleady exists");
			reslogger.info("Account Aleady exists");
		}
	}

	private void roomOccupiedWithOtherReservation(WebDriver driver, boolean isRoomBooked) throws InterruptedException {
		int count = 0;
		List<String> OccupiedRooms = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'checked in to this room')]";
		isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
		while (isRoomBooked) {
			reslogger.info("Occupied: " + path);
			res.CP_Reservation_CheckInOkButton.click();
			reslogger.info("Click Ok Button");
			String dropDownBoxPath = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//button";
			Wait.WaitForElement(driver, dropDownBoxPath);
			WebElement dropdownElement = driver.findElement(By.xpath(dropDownBoxPath));
			Utility.ScrollToElement(dropdownElement, driver);
			dropdownElement.click();
			reslogger.info("Click Drop Down Box");
			String dropDownSize = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li";
			Wait.WaitForElement(driver, dropDownSize);
			int count1 = driver.findElements(By.xpath(dropDownSize)).size();
			reslogger.info("Count is: " + count1);
			Random random = new Random();
			randomNumber = random.nextInt(count1 - 1) + 1;
			reslogger.info("count : " + count1);
			reslogger.info("randomNumber : " + randomNumber);
			String roomNumber = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li["
					+ randomNumber + "]/a/span";
			reslogger.info(roomNumber);
			Wait.waitUntilPresenceOfElementLocated(roomNumber, driver);
			Utility.ScrollToElement(driver.findElement(By.xpath(roomNumber)), driver);
			driver.findElement(By.xpath(roomNumber)).click();
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			reslogger.info("Click Confirm CheckIn Button");
			isRoomBooked = Utility.isElementDisplayed(driver, By.xpath(path));
			boolean isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.cP_ReservationDirtyMsg));
			if (!isRoomBooked) {
				reslogger.info("Not Occuied");
				break;
			} else if (isRoomDirty) {
				dirtyPopupModelClickConfirmButton(driver, test_steps, isRoomDirty);
			}

		}

	}

	private void roomUnAssigned(WebDriver driver, boolean isExist) throws InterruptedException {
		// int count = 0;

		List<String> OccupiedRooms = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		while (isExist) {
			isRoomUnAssigned = true;
			Wait.wait5Second();
			Utility.ScrollToElement(res.cP_Reservation_CheckINUassigned, driver);
			res.cP_Reservation_CheckINUassigned.click();
			reslogger.info("Click UnAssigned Drop Down Box");
			String path = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li";
			List<WebElement> ele = driver.findElements(By.xpath(path));
			int count1 = ele.size();
			reslogger.info("Count is: " + count1);
			Random random = new Random();
			randomNumber = random.nextInt(count1 - 1) + 1;
			reslogger.info("count : " + count1);
			reslogger.info("randomNumber : " + randomNumber);
			String roomNumber = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li["
					+ randomNumber + "]/a/span";
			Wait.WaitForElement(driver, roomNumber);
			Utility.ScrollToElement(driver.findElement(By.xpath(roomNumber)), driver);
			driver.findElement(By.xpath(roomNumber)).click();
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			reslogger.info("Click Confirm CheckIn Button");
			isExist = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
			reslogger.info("UnAssigned Exist or Not: " + isExist);
			boolean isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.cP_ReservationDirtyMsg));

			if (!isExist) {
				break;
			} else if (isRoomDirty) {
				dirtyPopupModelClickConfirmButton(driver, test_steps, isRoomDirty);
			}
		}
		int count2 = 0;
		String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'checked in to this room')]";
		Wait.wait5Second();
		boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));

		while (isRoomBooked) {
			reslogger.info("Occupied: " + path);
			res.CP_Reservation_CheckInOkButton.click();
			reslogger.info("Click Ok Button");
			String dropDownBoxPath = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//button";
			Wait.WaitForElement(driver, dropDownBoxPath);
			WebElement dropdownElement = driver.findElement(By.xpath(dropDownBoxPath));
			Utility.ScrollToElement(dropdownElement, driver);
			dropdownElement.click();
			reslogger.info("Room is Dirty");
			String dropDownSize = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li";
			Wait.WaitForElement(driver, dropDownSize);
			int count1 = driver.findElements(By.xpath(dropDownSize)).size();
			reslogger.info("Count is: " + count1);
			Random random = new Random();
			randomNumber = random.nextInt(count1 - 1) + 1;
			reslogger.info("count : " + count1);
			reslogger.info("randomNumber : " + randomNumber);
			String roomNumber = "//ir-stay-info-checkin//div[contains(@class,'ir-roomInfo')]//div[contains(@class,'open')]/div[contains(@class,'dropdown-menu open')]//ul/li["
					+ randomNumber + "]/a/span";
			Wait.WaitForElement(driver, roomNumber);
			Utility.ScrollToElement(driver.findElement(By.xpath(roomNumber)), driver);
			driver.findElement(By.xpath(roomNumber)).click();
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			isRoomBooked = Utility.isElementDisplayed(driver, By.xpath(path));
			reslogger.info("Room is Again Dirty or Not: " + isRoomBooked);
			boolean isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.cP_ReservationDirtyMsg));

			if (!isRoomBooked) {

				break;
			} else if (isRoomDirty) {
				dirtyPopupModelClickConfirmButton(driver, test_steps, isRoomDirty);
			}
		}

	}

	public String completeCheckInProcessSingleRev(WebDriver driver, ArrayList test_steps) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		String buttonName = null;
		if (res.CP_Reservation_ConfirmCheckIn_Button.isEnabled()) {
			confirmCheckIn = true;
			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckIn_Button, driver);
			buttonName = res.CP_Reservation_ConfirmCheckIn_Button.getText();
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			test_steps.add("Clicking on  Confirm Check-In Button");
			reslogger.info("Clicking on Confirm  Check-In Button");
			try {
				Wait.waitForToasterToBeVisibile(By.xpath("//*[@id='toast-container']//div[@class='toast-title']"),
						driver);
				String msg = Utility.getELementText(
						driver.findElement(By.xpath("//*[@id='toast-container']//div[@class='toast-title']")), false,
						"innerHTML");
				if (msg.toUpperCase().contains("FAIL")) {
					try {
						res.CheckInConfirmButton.click();
						test_steps.add("Click on confirm checkin button");
						reslogger.info("Click on confirm checkin button");
					} catch (Exception e) {
						e.printStackTrace();
						res.CheckInConfirmButton.click();
						test_steps.add("Click on confirm checkin button");
						reslogger.info("Click on confirm checkin button");
					}
				}
			} catch (Exception e1) {

			}

			verifySpinerLoading(driver);
			Wait.wait15Second();
			boolean isUnassigned = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
			reslogger.info("IsUnassigned:" + isUnassigned);
			String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'checked in to this room')]";
			boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
			reslogger.info("isRoomBooked:" + isRoomBooked);
			if (isUnassigned) {
				roomUnAssigned(driver, isUnassigned);
			}
			if (isRoomBooked) {
				roomOccupiedWithOtherReservation(driver, isRoomBooked);

			}
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);

			isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.cP_ReservationDirtyMsg));
			reslogger.info("isRoomDirty:" + isRoomDirty);

			if (isRoomDirty) {
				dirtyPopupModelClickConfirmButton(driver, test_steps, isRoomDirty);
			}

		} else if (res.CP_Reservation_ConfirmCheckInPayment_Button.isEnabled()) {
			confirmCheckInWithPayment = true;

			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckInPayment_Button, driver);
			buttonName = res.CP_Reservation_ConfirmCheckInPayment_Button.getText();
			res.CP_Reservation_ConfirmCheckInPayment_Button.click();
			test_steps.add("Clicking on  Proceed to Check-In Payment Button");
			reslogger.info("Clicking on Proceed to Check-In Payment Button");

			try {
				Wait.waitForToasterToBeVisibile(By.xpath("//*[@id='toast-container']//div[@class='toast-title']"),
						driver);
				String msg = Utility.getELementText(
						driver.findElement(By.xpath("//*[@id='toast-container']//div[@class='toast-title']")), false,
						"innerHTML");
				if (msg.toUpperCase().contains("FAIL")) {
					try {
						try {
							clickOnProceedToCheckInPaymentButton_2(driver, test_steps);
						} catch (Exception e) {
							e.printStackTrace();
							checkInProcess(driver, test_steps);
						}
					} catch (Exception e) {

					}
				}
			} catch (Exception e) {
				System.out.println("no toast");
			}
			Wait.wait10Second();
			boolean isUnassigned = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
			reslogger.info("isUnassigned:" + isUnassigned);
			String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'checked in to this room')]";
			boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
			reslogger.info("isRoomBooked:" + isRoomBooked);
			if (isUnassigned) {
				roomUnAssigned(driver, isUnassigned);
			}
			if (isRoomBooked) {
				roomOccupiedWithOtherReservation(driver, isRoomBooked);

			}
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
			isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.cP_ReservationDirtyMsg));
			reslogger.info("isRoomDirty:" + isRoomDirty);
			if (isRoomDirty) {
				dirtyPopupModelClickConfirmButton(driver, test_steps, isRoomDirty);
			}
		}

		return buttonName;
	}

	public void completeInHouse(WebDriver driver, ArrayList test_steps) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		String buttonName = null;
		if (res.CP_Reservation_ConfirmCheckIn_Button.isEnabled()) {
			confirmCheckIn = true;
			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckIn_Button, driver);
			buttonName = res.CP_Reservation_ConfirmCheckIn_Button.getText();
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			test_steps.add("Clicking on  Confirm Check-In Button");
			reslogger.info("Clicking on Confirm  Check-In Button");

			boolean isUnassigned = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
			reslogger.info("IsUnassigned:" + isUnassigned);
			String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'checked in to this room')]";
			boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
			reslogger.info("isRoomBooked:" + isRoomBooked);
			if (isUnassigned) {
				roomUnAssigned(driver, isUnassigned);
			}
			if (isRoomBooked) {
				roomOccupiedWithOtherReservation(driver, isRoomBooked);

			}
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);

			isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.cP_ReservationDirtyMsg));
			reslogger.info("isRoomDirty:" + isRoomDirty);

			if (isRoomDirty) {
				dirtyPopupModelClickConfirmButton(driver, test_steps, isRoomDirty);
			}

		} else if (res.CP_Reservation_ConfirmCheckInPayment_Button.isEnabled()) {
			confirmCheckInWithPayment = true;

			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckInPayment_Button, driver);
			buttonName = res.CP_Reservation_ConfirmCheckInPayment_Button.getText();
			res.CP_Reservation_ConfirmCheckInPayment_Button.click();
			test_steps.add("Clicking on  Proceed to Check-In Payment Button");
			reslogger.info("Clicking on Proceed to Check-In Payment Button");

			try {
				Wait.waitForToasterToBeVisibile(By.xpath("//*[@id='toast-container']//div[@class='toast-title']"),
						driver);
				String msg = Utility.getELementText(
						driver.findElement(By.xpath("//*[@id='toast-container']//div[@class='toast-title']")), false,
						"innerHTML");
				if (msg.toUpperCase().contains("FAIL")) {
					try {
						try {
							clickOnProceedToCheckInPaymentButton_2(driver, test_steps);
						} catch (Exception e) {
							e.printStackTrace();
							checkInProcess(driver, test_steps);
						}
					} catch (Exception e) {

					}
				}
			} catch (Exception e) {
				System.out.println("no toast");
			}
			Wait.wait10Second();
			boolean isUnassigned = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
			reslogger.info("isUnassigned:" + isUnassigned);
			String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'checked in to this room')]";
			boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
			reslogger.info("isRoomBooked:" + isRoomBooked);
			if (isUnassigned) {
				roomUnAssigned(driver, isUnassigned);
			}
			if (isRoomBooked) {
				roomOccupiedWithOtherReservation(driver, isRoomBooked);

			}
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
			isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.cP_ReservationDirtyMsg));
			reslogger.info("isRoomDirty:" + isRoomDirty);
			if (isRoomDirty) {
				dirtyPopupModelClickConfirmButton(driver, test_steps, isRoomDirty);
			}
		}

	}

	public void verifyDepositDueAmount(WebDriver driver, ArrayList<String> test_steps, String depositAmount) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		depositAmount = df.format(Double.parseDouble(depositAmount));
		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			String deposiDueAmountDisplayed = getDepositDueAmount(driver);
			deposiDueAmountDisplayed.trim();
			reslogger.info("Captured Deposit Due Amount: " + deposiDueAmountDisplayed);
			assertEquals(deposiDueAmountDisplayed, depositAmount, "Failed - Verify deposit due amount at summary");
			test_steps.add("Successfully verified deposit due amount displayed at trip summary as <b>"
					+ deposiDueAmountDisplayed + "</b>");
			reslogger.info("Successfully verified deposit due amount displayed at trip summary as <b>"
					+ deposiDueAmountDisplayed + "</b>");

		} catch (Exception e) {

		}
	}

	public void verifySpinerLoading(WebDriver driver) throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Wait.wait1Second();
		int count = 0;

		try {
			reslogger.info("in try");
			while (count < 60) {
				reslogger.info(count);
				if (!reservation.SpinerLoading1.isDisplayed()) {
					break;
				}
				count = count + 1;
				Wait.wait2Second();
			}
		} catch (Exception e) {
			reslogger.info("in cathc");
		}
	}

	public void verifySpinerLoadings(WebDriver driver) throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Wait.wait1Second();
		int count = 0;

		try {
			reslogger.info("in try");
			while (count < 20) {
				reslogger.info(count);
				if (!reservation.SpinerLoading.isDisplayed()) {
					break;
				}
				count = count + 1;
				Wait.wait2Second();
			}
		} catch (Exception e) {
			reslogger.info("in cathc");
		}
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: secondayGuestCheckInButtonClick ' Description: Checkin Button
	 * Click, Verification of Tab,With Option Available With/Without Guest
	 * Statement, Confirm Button Click ' Input parameters: WebDriver , String,
	 * boolean ' Return value: ArrayList<String> ' Created By: Aqsa Manzoor '
	 * Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> enterSecondaryGuestInfo(WebDriver driver, ArrayList<String> test_steps, String Salutation,
			String GuestFirstName, String GuestLastName) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_SECONDARYGUEST_SALUTATION);
		Wait.explicit_wait_visibilityof_webelement(res.CP_SECONDARYGUEST_SALUTATION, driver);
		Wait.explicit_wait_elementToBeClickable(res.CP_SECONDARYGUEST_SALUTATION, driver);
		Utility.ScrollToElement(res.CP_SECONDARYGUEST_SALUTATION, driver);
		res.CP_SECONDARYGUEST_SALUTATION.click();
		String sal = "((//button[contains(@title,'Select')]//span[text()='Select'])[1]/parent::button/following-sibling::div//span[contains(text(),'"
				+ Salutation + "')]/../..)[1]";
		Wait.WaitForElement(driver, sal);
		driver.findElement(By.xpath(sal)).click();

		Wait.WaitForElement(driver, OR_Reservation.CP_SECONDARYGUEST_FIRSTNAME);
		res.CP_SECONDARYGUEST_FIRSTNAME.sendKeys(GuestFirstName);
		test_steps.add("Secondary Guest First Name : <b>" + GuestFirstName + "</b>");
		reslogger.info("Secondary Guest First Name : <b>" + GuestFirstName + "</b>");

		Wait.WaitForElement(driver, OR_Reservation.CP_SECONDARYGUEST_LASTNAME);
		try {
			res.CP_SECONDARYGUEST_LASTNAME.sendKeys(GuestLastName);
			test_steps.add("Secondary Guest Last Name : <b>" + GuestLastName + "</b>");
			reslogger.info("Secondary Guest Last Name : <b>" + GuestLastName + "</b>");
		} catch (Exception e) {
			test_steps.add("Secondary Guest Last Name : Element Not Interactable");
			reslogger.info("Secondary Guest Last Name : Element Not Interactable");

		}
		return test_steps;
	}

	public String reservationStatus(WebDriver driver) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GetReservationStatus);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GetReservationStatus), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GetReservationStatus), driver);
		String status = reservation.GetReservationStatus.getText();
		return status;
	}

	public void switchTab(WebDriver driver) throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Wait.wait10Second();
		ArrayList<String> tabs2 = new ArrayList<String>(driver.getWindowHandles());
		driver.switchTo().window(tabs2.get(1));
		driver.close();
		driver.switchTo().window(tabs2.get(0));
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: secondayGuestCheckoutButtonClick ' Description: Checkout
	 * Button Click & Verification of Confirmation Message ' Input parameters:
	 * WebDriver , String, String ' Return value: ArrayList<String> ' Created By:
	 * Aqsa Manzoor ' Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickOnConfirmCheckInButton(WebDriver driver) throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckInConfirmButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CheckInConfirmButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CheckInConfirmButton), driver);
		Utility.ScrollToElement(reservation.CheckInConfirmButton, driver);
		reservation.CheckInConfirmButton.click();
		testSteps.add("Click on confirm checkin button");
		reslogger.info("Click on confirm checkin button");
		try {
			Wait.waitForToasterToBeVisibile(By.xpath("//*[@id='toast-container']//div[@class='toast-title']"), driver);
			String msg = Utility.getELementText(
					driver.findElement(By.xpath("//*[@id='toast-container']//div[@class='toast-title']")), false,
					"innerHTML");
			if (msg.toUpperCase().contains("FAIL")) {
				try {
					reservation.CheckInConfirmButton.click();
					testSteps.add("Click on confirm checkin button");
					reslogger.info("Click on confirm checkin button");
				} catch (Exception e) {
					e.printStackTrace();
					reservation.CheckInConfirmButton.click();
					testSteps.add("Click on confirm checkin button");
					reslogger.info("Click on confirm checkin button");
				}
			}
		} catch (Exception e1) {

		}
		try {
			System.err.println();
			Wait.wait2Second();
			if (reservation.checkInDirtyRoomPopup.isDisplayed()) {
				reslogger.info("diryt room popup is showing");
			}
			reservation.checkInDirtyRoomPopup.click();
		} catch (Exception isDirtyRoomException) {
			reslogger.info("Reservation checked in catch block");

		}
		return testSteps;
	}

	public ArrayList<String> clickOnCheckInButton(WebDriver driver, boolean isClick, boolean isEnabled)
			throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckInButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CheckInButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CheckInButton), driver);
		Utility.ScrollToElement_NoWait(reservation.CheckInButton, driver);
//		assertEquals(reservation.CheckInButton.isEnabled(), isEnabled, "Faile: checkin button is disabled");
		testSteps.add("Is checkin button isEnabled? " + isEnabled);
		if (isClick) {
			reservation.CheckInButton.click();
			testSteps.add("Click on check in button");
		}
		return testSteps;
	}

	public String getRoomChargesInTripSummaryBeforeCreateReservation(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GetRoomChargesInTripSummaryBeforeCreateReservation);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GetRoomChargesInTripSummaryBeforeCreateReservation),
				driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GetRoomChargesInTripSummaryBeforeCreateReservation),
				driver);
		return element.GetRoomChargesInTripSummaryBeforeCreateReservation.getText();
	}

	public void takePaymentAuthorization(WebDriver driver, ArrayList<String> test_steps, String title, String policyFor,
			String amount, String folioName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		DecimalFormat df = new DecimalFormat("0.00");
		String typeDisplayed = null, buttonDisplayed = null, buttonExp = null, balanceDisplayed = null,
				folioNames = null;
		folioNames = "//h4[text()='Take Payment']/../..//span[@class='filter-option pull-left'][(text()='" + folioName
				+ "')]";
		WebElement element = driver.findElement(By.xpath(folioNames));
		reslogger.info("Folio Name is: " + folioName);
		if (title.contains("Take Payment")) {
			if (policyFor.equalsIgnoreCase("Authorization Only")) {
				String authorized = "Authorize";
				reslogger.info(authorized.toUpperCase());
				double amount2 = Double.parseDouble(amount);
				reslogger.info(df.format(amount2));
				buttonExp = authorized.toUpperCase() + " $ " + df.format(amount2);
				reslogger.info("Button Name is: " + buttonExp);
			}

			String path = "//ul[@class='dropdown-menu inner']//span[contains(text(),'" + policyFor + "')]";
			res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
			driver.findElement(By.xpath(path)).click();
			typeDisplayed = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.getText().trim();
			buttonDisplayed = res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().trim();
			assertEquals(typeDisplayed, policyFor, "Failed: To verify  type");
			test_steps.add(" Verified Take Payment type is :<b> " + policyFor + "</b>");
			reslogger.info(" Verified Take Payment type is : " + policyFor);

			assertEquals(buttonDisplayed, buttonExp, "Failed: To verify Button for " + buttonDisplayed);
			test_steps.add(" Verified button text as :<b> " + buttonDisplayed + "</b>");
			reslogger.info(" Verified button text as :<b> " + buttonDisplayed + "</b>");

			assertTrue(element.isDisplayed(), "Failed: To verify folio name " + folioName);
			test_steps.add(" Verified Folio Name as :<b> " + folioName + "</b>");
			reslogger.info(" Verified Folio Name as :<b> " + folioName + "</b>");

		}
	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: getSecondaryGuestRoomNumber ' Description: Get the Room Number
	 * of Secondary Guest in Details pages ' Input parameters: WebDriver ,
	 * ArrayList<String> , String ' Return value: String ' Created By: Aqsa Manzoor
	 * ' Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public void authorizedSuccessVerification(WebDriver driver, ArrayList<String> test_steps, String title, String date,
			String folio, String balance, String amount, String type, String paymentMethod, String lastFourDigit,
			String nameOnCard, String expiryDate, String status, String note) throws InterruptedException {
		Wait.wait10Second();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopupTitle);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle), driver);
		try {

			String titleDisplayed = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText();
			assertEquals(titleDisplayed, title, "Failed: To verify Payment Page Title");
			test_steps.add(" Verified Authorization  Page Title :<b> " + title + "</b>");
			reslogger.info(" Verified Authorization  Page Title : " + titleDisplayed);

			reslogger.info(res.authorizationSuccess_Date.getText());
			reslogger.info(date);
			assertEquals(res.authorizationSuccess_Date.getText(), (date), "Failed: To verify  Success Page Date");
			test_steps.add("  Verified Date: <b>" + date + "</b>");
			reslogger.info("  Verified Date: " + date);

			assertEquals(res.authorizationSuccess_Folio.getText().trim(), folio.trim(),
					"Failed: To verify Success Page Balance");
			test_steps.add(" Verified Folio: <b>" + folio + "</b>");
			reslogger.info("  Verified Folio: " + folio);

			String balanceAmount = "$ " + balance + "";
			assertEquals(res.authorizationSuccess_Balance.getText().trim(), balanceAmount.trim(),
					"Failed: To verify Success Page Balance");
			test_steps.add(" Verified Balance: <b>" + balance + "</b>");
			reslogger.info("  Verified Balance: " + balance);

			String amt = "$ " + amount + "";
			reslogger.info("Amount is: " + amt.trim());
			reslogger.info(res.authorizationSuccess_Amount.getText().trim());
			assertEquals(res.authorizationSuccess_Amount.getText().trim(), amt.trim(),
					"Failed: To verify  Success Page Amount: " + amount);
			test_steps.add("  Verified Amount: <b>" + amt + "</b>");
			reslogger.info("  Verified Amount: " + amt);

			assertEquals(res.authorizationSuccess_Type.getText().toLowerCase().trim(), type.toLowerCase().trim(),
					"Failed: To verify  Success Page Type");
			test_steps.add("  Verified Type: <b>" + type + "</b>");
			reslogger.info(" Verified Type: " + type);

			String paymentMethods = "" + paymentMethod + " - XXXX" + lastFourDigit + " (" + nameOnCard + ") (Exp. "
					+ expiryDate + ")";
			assertEquals(res.authorizationSuccess_PaymentMethod.getText().toLowerCase().trim(),
					paymentMethods.toLowerCase().trim(), "Failed: To verify Success Page Payment Method");
			test_steps.add("  Verified Payment Method: <b>" + paymentMethods + "</b>");
			reslogger.info("  Verified Payment Method: " + paymentMethods);

			assertEquals(res.authorizationSuccess_Status.getText().toLowerCase().trim(), status.toLowerCase().trim(),
					"Failed: To verify  Success Page Status ");
			test_steps.add("  Verified Status:<b> " + status + "</b>");
			reslogger.info(" Verified Status: " + status);

			assertEquals(res.authorizationSuccess_Note.getText().toLowerCase().trim(), (note.toLowerCase().trim()),
					"Failed: To verify  Success Page Notes ");
			test_steps.add(" Verified  Notes: <b>" + note + "</b>");
			reslogger.info(" Verified  Notes: " + note);

		} catch (Exception e) {
			reslogger.info(e);
		}

	}

	public void clickCloseButtonOfAuthorizedSuccess(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.authorizationSuccess_CloseButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.authorizationSuccess_CloseButton), driver, 10);
		// res.CP_Reservation_NoShowSuccessCloseButton.click();
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", res.authorizationSuccess_CloseButton);
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
	}

	public ArrayList<String> verifyHistoryTabForAuthorizedPayment(WebDriver driver, ArrayList<String> test_steps,
			String date, String amount, boolean isPaymentMethodChanged, String previousPaymentMethod,
			String paymentMethod, String cardNumber, String expDate, String room) {
		String paymentHistoryDate = "//tbody[contains(@data-bind,'foreach:historyList')]//span[text()='Payment']/ancestor::tr/td/span[contains(@data-bind,'text:$parent.formatDate($data.logDate)')]";
		WebElement paymentHistoryDateElement = driver.findElement(By.xpath(paymentHistoryDate));

		String paymentHistoryDescription = null;
		WebElement paymentHistoryDescriptionElement;

		assertEquals(paymentHistoryDateElement.getText(), date);
		reslogger.info("History Tab: Date Verified: " + paymentHistoryDateElement.getText());
		test_steps.add("History Tab: Date Verified: <b>" + paymentHistoryDateElement.getText() + "</b>");
		String desc = null;
		if (paymentMethod.equals("MC")) {
			paymentHistoryDescription = "//tbody[contains(@data-bind,'foreach:historyList')]//span[text()='Payment']/ancestor::tr/td/span[contains(@data-bind,'text:$data.description')]";
			paymentHistoryDescriptionElement = driver.findElement(By.xpath(paymentHistoryDescription));

			desc = "Authorized payment for $" + amount + " using (" + paymentMethod + "-XXXX" + cardNumber + " "
					+ expDate + ")";
			reslogger.info(desc);
			reslogger.info(paymentHistoryDescriptionElement.getText());
			assertEquals(desc, paymentHistoryDescriptionElement.getText());
			reslogger.info("History Tab: Description Verified: " + paymentHistoryDescriptionElement.getText());
			test_steps.add(
					"History Tab: Description Verified: <b>" + paymentHistoryDescriptionElement.getText() + "</b>");
		}

		String roomNo = "//tbody[contains(@data-bind,'foreach:historyList')]//span[text()='Payment']/ancestor::tr/td/span[contains(@data-bind,'text:$data.room')]";
		WebElement roomNoElement = driver.findElement(By.xpath(roomNo));
		reslogger.info(roomNoElement.getText());
		assertEquals(roomNoElement.getText(), room);
		reslogger.info("History Tab: Room Verified: " + roomNoElement.getText());
		test_steps.add("History Tab: Room Verified: <b>" + roomNoElement.getText() + "</b>");
		return test_steps;
	}

	public void saveReservation(WebDriver driver, ArrayList<String> test_steps) {
		// Click Save Button
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.WaitForElement(driver, OR_Reservation.reservation_Save);
			Wait.explicit_wait_visibilityof_webelement(res.reservation_Save, driver);
			Utility.ScrollToElement(res.reservation_Save, driver);
			res.reservation_Save.click();
			reslogger.info("Clicking Save Button");
			test_steps.add("Clicking Save Button");
			String loading = "(//div[@class='ir-loader-in'])";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 40) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("loading done");
		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			reslogger.info("Fail to Click on Save Button");
		}
	}

	public void verifyCheckoutPaymentForAuthorization(WebDriver driver, ArrayList<String> test_steps, String title,
			String type, String amount) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait10Second();
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopupTitle);
		Utility.ScrollToElement(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle, driver);

		assertEquals(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText().toLowerCase().trim(),
				title.toLowerCase().trim(), "Failed: To verify  Payment Page Title");
		test_steps.add(" Verified Checkout Payment Title:<b> " + title + "</b>");
		reslogger.info(" Verified Checkout Payment Title: " + title);

		String checkOutAmount = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		reslogger.info(checkOutAmount.trim());
		String balance = res.NoShowCancelPaymentPopup_Balance.getText().replace("$", "");
		reslogger.info(balance.trim());
		assertEquals(checkOutAmount.trim(), amount.trim(), "Failed: To verify Payment Page Amount: " + amount);
		test_steps.add("Verified Amount : <b> " + amount + "</b>");
		reslogger.info(" Verified Amount: " + amount);
		assertEquals(balance.trim(), amount.trim(), "Failed: To verify Payment Page Balance: " + amount);
		test_steps.add("Verified Balance : <b> " + amount + "</b>");
		reslogger.info(" Verified Balance: " + amount);

		reslogger.info(" Verified Type: " + type.toLowerCase().trim());
		String type1 = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.getText().toLowerCase().trim();
		reslogger.info(type1.toLowerCase().trim());
		assertEquals(type1.toLowerCase().trim(), type.toLowerCase().trim(), "Failed: To verify  Page Type: " + type);
		test_steps.add(" Verified Type : <b> " + type + "</b>");
		reslogger.info(" Verified Type: " + type);

	}

	public void clickCrossIcon(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.checkout_Close, driver);
		Utility.ScrollToElement(res.checkout_Close, driver);
		res.checkout_Close.click();
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
	}

	public void verify_DepositPaymentInHistoryTab(WebDriver driver, ArrayList test_steps, Double deosit) {
		String deposit = "//span[contains(text(),'payment') and contains(text(),'" + deosit + "')]";
		if (driver.findElement(By.xpath(deposit)).isDisplayed()) {
			test_steps.add("Deposit payment verified in History Tab");
			reslogger.info("Deposit payment verified in History Tab");
		} else {
			test_steps.add("Deposit payment not found  in History Tab");
			reslogger.info("Deposit payment not found  in History Tab");
		}
	}

	public void verify_AddedLineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String LineItemCategoryAmount) {
		test_steps.add("******************* Verifying Added Line Item to folio**********************");
		reslogger.info("******************* Verifying Added Line Item to folio**********************");

		String includeTax = "//span[text()='Include Taxes in Line Items']/preceding-sibling::input";
		Wait.WaitForElement(driver, includeTax);
		if (driver.findElement(By.xpath(includeTax)).isSelected()) {
			driver.findElement(By.xpath(includeTax)).click();
		}

		String line = "//td[@class='lineitem-category']/span";

		int count = driver.findElements(By.xpath(line)).size();
		String text = null;

		String[] item = LineItemCategory.split("\\|");
		String[] amt = LineItemCategoryAmount.split("\\|");
		for (int i = 0; i < item.length; i++) {

			line = "(//td[@class='lineitem-category']/span[text()='" + item[i] + "'])";
			Wait.WaitForElement(driver, line);
			test_steps.add("Line item category verified in folio : " + item[i]);
			reslogger.info("Line item category verified in folio : " + item[i]);

			line = "(//td[@class='lineitem-category']/span[text()='" + item[i]
					+ "'])/../following-sibling::td[contains(@class,'amount')]/span[contains(text(),'" + amt[i] + "')]";
			Wait.WaitForElement(driver, line);
			test_steps.add("Line item category amount verified in folio : " + amt[i]);
			reslogger.info("Line item category amount verified in folio : " + amt[i]);
		}
	}

	public void verify_VoidedIteminHistory(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String timeZone) {
		test_steps.add("******************* Verifying voided line item in history tab **********************");
		reslogger.info("******************* Verifying voided line item in history tab **********************");

		String line = "//span[text()='Removed " + LineItemCategory + " item " + LineItemCategory
				+ " from Guest Folio']";

		Wait.WaitForElement(driver, line);
		if (!driver.findElement(By.xpath(line)).isDisplayed()) {
			driver.findElement(By.xpath(line)).click();
			test_steps.add("line Item Voided in history : " + "Removed " + LineItemCategory + " item "
					+ LineItemCategory + " from Guest Folio");
			reslogger.info("line Item Voided in history : " + "Removed " + LineItemCategory + " item "
					+ LineItemCategory + " from Guest Folio");
		}

		String payment = "//span[text()='Removed " + LineItemCategory + " item " + LineItemCategory
				+ " from Guest Folio']/../preceding-sibling::td//span";
		String room = driver.findElement(By.xpath(payment)).getText();
		if (room.equalsIgnoreCase("Folio")) {
			test_steps.add("Line item Category category verified for the void");
			reslogger.info("Line item Category category verified for the void");
		} else {
			test_steps.add("Line item Category category not verified for the void");
			reslogger.info("Line item Category category not verified for the void");
		}

		Date date = new Date();
		DateFormat df = new SimpleDateFormat("MM/dd/yy");

		// Use Madrid's time zone to format the date in
		df.setTimeZone(TimeZone.getTimeZone(timeZone));

		String d = df.format(date);

		String payline = "(//span[text()='Removed " + LineItemCategory + " item " + LineItemCategory
				+ " from Guest Folio']/../preceding-sibling::td//span)[2]";
		room = driver.findElement(By.xpath(payline)).getText();
		if (room.equalsIgnoreCase(d)) {
			test_steps.add("voided line item  Date verified in history : " + room);
			reslogger.info("voided line item  Date verified in history : " + room);
		} else {
			test_steps.add("voided line item  Date not verified in history : " + room);
			reslogger.info("voided line item  Date not verified in history : " + room);
		}
	}

	public void clickYesButtonOfCheckOutAllConfirmationMsg(WebDriver driver, ArrayList test_steps, String Msg,
			String CheckOutStatus, String RoomNo, String RoomClassName) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutAllButton_ConfirmationMsg);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg, driver);
		Utility.ScrollToElement(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg, driver);
		if (CheckOutStatus.equals("CheckOutAll")) {
			assertTrue(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg.getText().toLowerCase().trim()
					.equals(Msg.toLowerCase().trim()), "Failed: To verify Message");
			test_steps.add("Verified Message : <b>" + Msg + "</b>");

			reslogger.info("Verified Message : " + Msg);

		} else if (CheckOutStatus.equals("CheckOutRoom")) {
			Msg = "Do you wish to settle all charges in the folio for " + RoomClassName + ", room " + RoomNo
					+ "? If not, payment will be taken when the primary guest checks out.";
			assertTrue(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg.getText().toLowerCase().trim()
					.equals(Msg.toLowerCase().trim()), "Failed: To verify Message");
			test_steps.add("Verified Message : <b>" + Msg + "</b>");
			reslogger.info("Verified Message : " + Msg);

		}
		res.CP_Reservation_CheckOutAllButton_ConfirmationMsgYesButton.click();
		test_steps.add("Clicking on Yes Button of Check-Out All Confirmation Message ");
		reslogger.info("Clicking on Yes Button of Check-Out All Confirmation Message ");
	}

	public void verifyMessageOfCheckOutWindow(WebDriver driver, ArrayList test_steps, String Msg)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_Reservation_CheckOut_Message, driver);
		/*
		 * assertTrue(res.CP_Reservation_CheckOut_Message.getText().toLowerCase(
		 * ).trim().equals(Msg.toLowerCase().trim()));
		 */
		assertEquals(res.CP_Reservation_CheckOut_Message.getText().toLowerCase().trim(), Msg.toLowerCase().trim(),
				"Failed to verify message ");
		test_steps.add("Verified Message : <b>" + Msg + "</b>");
		reslogger.info("Verified Message : " + Msg);

	}

	public void checkedOverRideCheckInAmountCheckBox(WebDriver driver, ArrayList test_steps, String IsOverRideCheckIN) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_OverrideCheckInAmountCheckBox);
		if (IsOverRideCheckIN.contentEquals("Yes")) {
			if (!res.CP_OverrideCheckInAmountCheckBox.isSelected()) {
				res.CP_OverrideCheckInAmountCheckBox.click();
				test_steps.add("Click Over Ride CheckIn Amount Check Box");
				reslogger.info("Click Over Ride CheckIn Amount Check Box");
			} else {
				test_steps.add("Click Over Ride CheckIn Amount Check Box");
				reslogger.info("Click Over Ride CheckIn Amount Check Box");
			}
		} else {
			if (res.CP_OverrideCheckInAmountCheckBox.isSelected()) {
				res.CP_OverrideCheckInAmountCheckBox.click();
				test_steps.add("Click Over Ride CheckIn Amount Check Box");
				reslogger.info("Click Over Ride CheckIn Amount Check Box");
			} else {
				test_steps.add("Click Over Ride CheckIn Amount Check Box");
				reslogger.info("Click Over Ride CheckIn Amount Check Box");
			}
		}
	}

	public void verifyCancellationPolicy(WebDriver driver, ArrayList<String> test_steps, String policyName,
			String policyText) throws ParseException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.cancelPolicyCollapseInDetailsTab), driver, 20);
		res.cancelPolicyCollapseInDetailsTab.click();
		reslogger.info("Clicked on Cancellation policy tab");
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.cancelPolicyNameInDetailsTab), driver);
		String cancelPolicyName = res.cancelPolicyNameInDetailsTab.getText();
		assertEquals(cancelPolicyName.trim(), policyName, "Failed - Associated policy is not matched with created one");
		test_steps
				.add("Successfully verified associated cancellation policy name as : <b>" + cancelPolicyName + "</b>");
		if (Utility.validateString(policyText)) {
			String cancelPolicyText = res.cancelPolicyTextInDetailsTab.getText();
			assertEquals(cancelPolicyText, policyText,
					"Failed - Associated policy text is not matched with created one");
			test_steps.add(
					"Successfully verified associated cancellation policy text as : <b>" + cancelPolicyText + "</b>");
		}

	}

	public void postLineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String LineItemCategoryAmount) throws InterruptedException {
		test_steps.add("******************* Post Line Item to folio**********************");
		reslogger.info("******************* Post Line Item to folio**********************");

		Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
		String line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])";

		String input = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../preceding-sibling::td//i[contains(@data-bind,'PendingToPosted')]";
		Wait.WaitForElement(driver, input);
		System.out.println(input);
		String src = driver.findElement(By.xpath(input)).getAttribute("data-bind");
		Utility.app_logs.info(src);
		if (src.contains("PendingToPosted")) {
			test_steps.add("LineitemCategory " + LineItemCategory + " folio line item status PendingToPosted");
			reslogger.info("LineitemCategory " + LineItemCategory + " folio line item status PendingToPosted");
		}

		driver.findElement(By.xpath(input)).click();
		test_steps.add("Click the post line item for " + LineItemCategory);
		reslogger.info("Click the post line item for " + LineItemCategory);

		// String saveFolio =
		// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.wait2Second();
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save Folio");
		reslogger.info("Click on Save Folio");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: enterPaymentDetailsWithReservationPaymentMethod ' Description:
	 * Select the Payment Method(Reservation) in TakePayment Popup, and Attached
	 * 'Reservation With Reservation Number in Details PaymentMethod Input
	 * parameters: <WebDriver, ArrayList<String> ,String, String> ' Return value:
	 * <ArrayList<String>> ' Created By: <Aqsa Manzoor> ' Created On: <20/05/2020> *
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> enterPaymentDetailsWithReservationPaymentMethod(WebDriver driver,
			ArrayList<String> test_steps, String PaymentType, String reservationNumber) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
		res.CP_NewReservation_PaymentMethod.click();
		String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'"
				+ PaymentType.trim() + "')]";
		Wait.WaitForElement(driver, paymentMethod);
		driver.findElement(By.xpath(paymentMethod)).click();
		test_steps.add("Selected PaymentType : " + PaymentType);
		reslogger.info("Selected PaymentType : " + PaymentType);
		if (PaymentType.equalsIgnoreCase("Reservation")) {

			String searchReservatinTab = "//input[contains(@data-bind,'value: selectedReservationValue')]";
			Wait.WaitForElement(driver, searchReservatinTab);
			WebElement searchReservatinTabElement = driver.findElement(By.xpath(searchReservatinTab));
			searchReservatinTabElement.sendKeys(reservationNumber);
			test_steps.add("Reservation Searched : " + reservationNumber);
			reslogger.info("Reservation Searched : " + reservationNumber);
			Wait.wait3Second();
			WebElement searchResult = driver
					.findElement(By.xpath("//*[contains (text(), '" + reservationNumber + "')]"));
			Wait.wait2Second();
			Wait.explicit_wait_visibilityof_webelement(searchResult, driver);
			searchResult.click();

			test_steps.add("Reservation Attached : " + reservationNumber + " as Payment Method");
			reslogger.info("Reservation Attached : " + reservationNumber + " as Payment Method");
		}
		return test_steps;
	}

	public void verify_FolioBalance(WebDriver driver, ArrayList test_steps, String bal, String bal1, String amout) {
		bal = bal.trim();
		bal = bal.substring(1, bal.length());
		bal = bal.trim();

		bal1 = bal1.trim();
		bal1 = bal1.substring(1, bal1.length());
		bal1 = bal1.trim();

		Double d = Double.parseDouble(bal);
		Double d1 = Double.parseDouble(bal1);
		Double amt = Double.parseDouble(amout);
		Assert.assertEquals(String.valueOf((d - amt)), String.valueOf(d1));
		if (Double.compare((d - amt), d1) == 0) {
			test_steps.add("Folio Balance verified : " + d1);
			reslogger.info("Folio Balance verified : " + d1);
		} else {
			test_steps.add("Folio Balance not verified");
			reslogger.info("Folio Balance not verified");
		}

	}

	public void rollBackLineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String LineItemCategoryAmount) throws InterruptedException {

		test_steps.add("******************* Roll Back Line Item to folio**********************");
		reslogger.info("******************* Roll Back Line Item to folio**********************");

		Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
		String line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])";

		String includeTax = "//span[text()='Include Taxes in Line Items']/preceding-sibling::input";
		Wait.WaitForElement(driver, includeTax);
		if (driver.findElement(By.xpath(includeTax)).isSelected()) {
			driver.findElement(By.xpath(includeTax)).click();
		}

		line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])/../following-sibling::td//a";
		driver.findElement(By.xpath(line)).click();
		test_steps.add("Clicking on line item description : " + LineItemCategory);
		reslogger.info("Clicking on line item description : " + LineItemCategory);

		String lineItem = "//h4[text()='Item Detail']/../../..//span[text()='" + LineItemCategory + "']";
		Wait.WaitForElement(driver, lineItem);
		test_steps.add("Line item catrgory displayed in Item Detail screen : " + LineItemCategory);
		reslogger.info("Line item catrgory displayed in Item Detail screen : " + LineItemCategory);

		lineItem = "//h4[text()='Item Detail']/../../..//span[contains(text(),'$ " + LineItemCategoryAmount + "')]";
		Wait.WaitForElement(driver, lineItem);
		test_steps.add("Line item catrgory amount displayed in Item Detail screen : " + LineItemCategoryAmount);
		reslogger.info("Line item catrgory amount displayed in Item Detail screen : " + LineItemCategoryAmount);

		lineItem = "//h4[text()='Item Detail']/../../..//button[contains(@data-bind,'RollbackPostedItems')]";
		Wait.WaitForElement(driver, lineItem);
		driver.findElement(By.xpath(lineItem)).click();
		test_steps.add("Clicking on RollBack line item : " + LineItemCategory);
		reslogger.info("Clicking on RollBack line item : " + LineItemCategory);

		String continueLineItem = "//h4[text()='Item Detail']/../../..//button[contains(text(),'Continue')]";
		Wait.WaitForElement(driver, continueLineItem);
		driver.findElement(By.xpath(continueLineItem)).click();
		test_steps.add("Clicking on Continue");
		reslogger.info("Clicking on Continue");

		// String saveFolio =
		// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save Folio");
		reslogger.info("Click on Save Folio");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");
		selectFolioOptionByIndex(driver, "2");

		String input = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../preceding-sibling::td//i[contains(@data-bind,'PendingToPosted')]";
		Wait.WaitForElement(driver, input);

		String src = driver.findElement(By.xpath(input)).getAttribute("class");
		if (src.equalsIgnoreCase("inncenter-icons-collection transactionstatus-icon1")) {
			test_steps.add("LineitemCategory " + LineItemCategory + " folio line item status PendingToPosted");
			reslogger.info("LineitemCategory " + LineItemCategory + " folio line item status PendingToPosted");
		}

	}

	public String get_LineItemAmount(WebDriver driver, ArrayList test_steps, String LineItemCategory) {

		Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
		String line = "//span[text()='" + LineItemCategory.trim()
				+ "']/../following-sibling::td[@class='lineitem-amount']/span";

		String includeTax = "//span[text()='Include Taxes in Line Items']/preceding-sibling::input";
		Wait.WaitForElement(driver, includeTax);
		if (!driver.findElement(By.xpath(includeTax)).isSelected()) {
			driver.findElement(By.xpath(includeTax)).click();
		}

		String amount = driver.findElement(By.xpath(line)).getText();

		amount = amount.trim();
		amount = amount.substring(1, amount.length());
		amount = amount.trim();
		return amount;

	}

	public void Input_CheckIn_CheckOut_Amount(WebDriver driver, ArrayList test_step, String Amount) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.click();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.clear();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.click();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.clear();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Amount);
		test_steps.add("Input Amount: <b>" + Amount + "</b>");
		reslogger.info("Input Amount: " + Amount);
	}

	public void inputAmountWhileCheckINAndCheckOut(WebDriver driver, ArrayList test_step, String Amount)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_Amount);
		Utility.ScrollToElement(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount, driver);
		Wait.wait5Second();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.click();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.clear();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.click();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.clear();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Amount);
		test_step.add("Input Amount: <b>" + Amount + "</b>");
		reslogger.info("Input Amount: " + Amount);
	}

	public ArrayList<String> getAmountDetailsDisplayedOnTop(WebDriver driver, ArrayList<String> test_steps) {
		ArrayList<String> amountDetails = new ArrayList<>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String total = res.tripTotalAmountAtTop.getText().split(" ")[1];
		test_steps.add("Total amount displayed at top is :: " + total);
		String balance = res.tripBalanceAmountAtTop.getText().split(" ")[1];
		test_steps.add("Balance amount displayed at top is :: " + balance);
		amountDetails.add(total);
		amountDetails.add(balance);
		return amountDetails;
	}

	public ArrayList<String> verifyReport(String checkInDate, String checkOutDate) throws Exception {
		ArrayList<String> datesToReturn = new ArrayList<>();
		String checkInDateConvert = Utility.parseDate(checkInDate, "dd/MM/yyyy", "EE, MMM dd, yyyy");
		String nights = Utility.differenceBetweenDates(checkInDate, checkOutDate);
		String nightsCalc = "";
		if (Integer.parseInt(nights) > 1) {
			nightsCalc = "Night(s)";
		} else {
			nightsCalc = "Night";
		}
		String checkOutDateConvert = Utility.parseDate(checkOutDate, "dd/MM/yyyy", "EE, MMM dd, yyyy");
		String checkInDateToValidate = "Arrival : " + checkInDateConvert + " - " + nights + " " + nightsCalc;
		String checkOutDateToValidate = "Departure : " + checkOutDateConvert;
		datesToReturn.add(checkInDateToValidate);
		datesToReturn.add(checkOutDateToValidate);
		return datesToReturn;
	}

	public ArrayList<String> getPropertyDetails(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.seclectProperty), driver);
		reservation.seclectProperty.click();
		test_steps.add("select property successfully");
		reslogger.info("select property successfully");

		return test_steps;

	}

	public String contactName(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Utility.ScrollToElement(reservation.propertyDetailscontactName, driver);
		// Wait.waitForElementToBeVisibile(By.linkText(OR_Reservation.propertyDetailscontactName),
		// driver);
		String propertyDetailscontactName = reservation.propertyDetailscontactName.getAttribute("value");
		Wait.wait2Second();
		test_steps.add("propertyDetailsPhoneNumber:  " + propertyDetailscontactName);
		reslogger.info("propertyDetailsPhoneNumber:  " + propertyDetailscontactName);
		return propertyDetailscontactName;
	}

	public String propertyEmail(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Utility.ScrollToElement(reservation.propertyDetailsinputEmail, driver);
		String propertyDetailsinputEmail = reservation.propertyDetailsinputEmail.getAttribute("value");
		Wait.wait2Second();
		test_steps.add("propertyDetailsinputEmail:  " + propertyDetailsinputEmail);
		reslogger.info("propertyDetailsinputEmail:  " + propertyDetailsinputEmail);
		return propertyDetailsinputEmail;
	}

	public String propertyDetailsPhoneNumber(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Utility.ScrollToElement(reservation.propertyDetailsPhoneNumber, driver);
		String propertyDetailsPhoneNumber = reservation.propertyDetailsPhoneNumber.getAttribute("value");
		Wait.wait2Second();
		test_steps.add("propertyDetailsPhoneNumber :" + propertyDetailsPhoneNumber);
		reslogger.info("propertyDetailsPhoneNumber :" + propertyDetailsPhoneNumber);
		return propertyDetailsPhoneNumber;
	}

	public String propertyDetailsAddress(WebDriver driver, ArrayList<String> test_steps) throws Exception {

		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Utility.ScrollToElement(reservation.propertyDetailsAddress1, driver);
		String propertyDetailsAddress1 = reservation.propertyDetailsAddress1.getAttribute("value");
		Wait.wait2Second();
		test_steps.add("propertyDetailsAddress :" + propertyDetailsAddress1);
		reslogger.info("propertyDetailsAddress :" + propertyDetailsAddress1);
		return propertyDetailsAddress1;
	}

	public String propertyDetailsCity(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Utility.ScrollToElement(reservation.propertyDetailsCity, driver);
		String propertyDetailsCity = reservation.propertyDetailsCity.getAttribute("value");
		Wait.wait2Second();
		test_steps.add("propertyDetailsCity :" + propertyDetailsCity);
		reslogger.info("propertyDetailsCity  :" + propertyDetailsCity);
		return propertyDetailsCity;
	}

	public String propertyDetailsCountry(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		String country = "//select[@id='MainContent_drpMailing_countryID']";
		Utility.ScrollToElement(reservation.propertyDetailsCountry, driver);
		Select select = new Select(driver.findElement(By.xpath(country)));
		WebElement country1 = select.getFirstSelectedOption();
		String propertyDetailsCountry = country1.getText();
		test_steps.add("propertyDetailsCountry: " + propertyDetailsCountry);
		reslogger.info("propertyDetailsCountry: " + propertyDetailsCountry);
		return propertyDetailsCountry;
	}

	public String propertyDetailsState(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		String state = "//select[@id='MainContent_drpMailing_territoryID']";
		Utility.ScrollToElement(reservation.propertyDetailsCountry, driver);
		Select select = new Select(driver.findElement(By.xpath(state)));
		WebElement state1 = select.getFirstSelectedOption();
		String propertyDetailsCountry = state1.getText();
		test_steps.add("propertyDetailsState: " + propertyDetailsCountry);
		reslogger.info("propertyDetails State: " + propertyDetailsCountry);
		return propertyDetailsCountry;
	}

	public String propertyDetailsPostalCode(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Utility.ScrollToElement(reservation.propertyDetailsPostalCode, driver);
		Wait.wait2Second();
		String propertyDetailsPostalCode = reservation.propertyDetailsPostalCode.getAttribute("value");
		test_steps.add("propertyDetailsPostalCode" + propertyDetailsPostalCode);
		reslogger.info("propertyDetailsPostalCode : " + propertyDetailsPostalCode);
		return propertyDetailsPostalCode;
	}

	// Added By adhnan/6/17/2020
	public ArrayList<String> selectReportTypeButton(WebDriver driver, String reportType, String inputType,
			boolean check, ArrayList<String> steps) throws InterruptedException {
		String reportTypexpath = "(//span[text()='" + reportType + "']//..//input[@type='" + inputType + "'])[1]";
		Wait.WaitForElement(driver, reportTypexpath);
		Wait.waitForElementToBeVisibile(By.xpath(reportTypexpath), driver);
		Wait.waitForElementToBeClickable(By.xpath(reportTypexpath), driver);
		WebElement reportTyperRadioButton = driver.findElement(By.xpath(reportTypexpath));
		Utility.ScrollToElement(reportTyperRadioButton, driver);
		if (inputType.equals("checkbox")) {
			if (check) {
				if (!reportTyperRadioButton.isSelected()) {
					reportTyperRadioButton.click();
				}
				steps.add("Check '" + reportType + "' CheckBox");
				reslogger.info("Check '" + reportType + "' CheckBox");
			} else {
				if (reportTyperRadioButton.isSelected()) {
					reportTyperRadioButton.click();

				}
				steps.add("UnCheck '" + reportType + "' CheckBox");
				reslogger.info("UnCheck '" + reportType + "' CheckBox");
			}
			assertEquals(check, reportTyperRadioButton.isSelected(),
					"Failed : '" + reportType + "' CheckBox is not in Required State");
		} else {
			reportTyperRadioButton.click();
			steps.add("Select report Type '" + reportType + "'");
			reslogger.info("Select report Type '" + reportType + "'");
			assertEquals(check, reportTyperRadioButton.isSelected(),
					"Failed : '" + reportType + "' raido is not selected");
		}
		return steps;
	}

	// Added By Adhnan/6/17/2020
	public void clickPrintReservationReports(WebDriver driver) throws InterruptedException, IOException {
		Elements_CPReservation reservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR.PRINT_RESERVATION_REPORTS);
		Wait.waitForElementToBeVisibile(By.xpath(OR.PRINT_RESERVATION_REPORTS), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR.PRINT_RESERVATION_REPORTS), driver);
		reservationPage.PRINT_RESERVATION_REPORTS.click();

	}

	// Added By Adhnan/6/17/2020
	public boolean reportDisplayed(WebDriver driver, String reportId, ArrayList<String> testSteps)
			throws InterruptedException {

		boolean isExist = Utility.isElementPresent(driver, By.id(reportId));
		System.out.print(" is Exist:" + isExist);
		if (isExist) {
			testSteps.add("PDF Report is Displayed");
			Utility.app_logs.info("PDF Report is Displayed");
		} else {
			testSteps.add("PDF Report is Not Displayed");
			Utility.app_logs.info("PDF Report is Not Displayed");
		}
		return isExist;

	}

	// Added By Adhnan/6/17/2020
	public String downloadReport(WebDriver driver, String reportSource, String reportId) throws InterruptedException {

		String dataPath = driver.findElement(By.id(reportId)).getAttribute(reportSource);
		driver.get(dataPath);
		String fileName = Utility.download_status(driver);
		System.out.print("File Name:" + fileName);
		return fileName;

	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * Method Name: getRoomNumberInMRB Description: getreservation status from
	 * search table Input parameters: Webdriver,String Return value: String Created
	 * By: Adnan Ghaffar Created On: 09-06-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */

	public String getRoomNumberAdvacedSearchInMRB(WebDriver driver, String guestName) {
		String path = "//a[@title='" + guestName
				+ "']//..//..//..//following-sibling::td//span[contains(@data-bind,'text: RoomClassName')]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		String roomNumber = element.getText();
		return roomNumber;

	}

	public ArrayList<String> closeBulkCheckoutActionPopUp(WebDriver driver) throws Exception {
		ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation elementsReservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CLOSE_BULK_CHECKOUT_POPUP);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CLOSE_BULK_CHECKOUT_POPUP), driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CLOSE_BULK_CHECKOUT_POPUP), driver);
		elementsReservation.closeBulkCheckoutPopUp.click();
		test_steps.add("Bulk Action PopUp Closed Successfully");
		reslogger.info("Bulk Action PopUp Closed Successfully");
		return testSteps;

	}

	public String getTextFromRollBackChangesPopUp(WebDriver driver) {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ROLL_BACK_POPUP_TEXT);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ROLL_BACK_POPUP_TEXT), driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ROLL_BACK_POPUP_TEXT), driver);
		String popUpMessege = element.rollBackPopUpText.getText();

		return popUpMessege;

	}

	public ArrayList<String> acceptRollBackChange(WebDriver driver) {
		ArrayList<String> testSteps = new ArrayList<String>();
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ACCEPT_ROLL_BACK_CHANGE);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ACCEPT_ROLL_BACK_CHANGE), driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ACCEPT_ROLL_BACK_CHANGE), driver);
		element.acceptRollBackChange.click();
		testSteps.add("Roll back changes accepted");

		return testSteps;

	}

	public String replaceString(String str) {
		str = str.replace("$", "");
		str = str.trim();
		Utility.app_logs.info(str);
		return str;

	}

	public String getReservationSearchDetails(WebDriver driver, int parentInex, int index) {

		String Path = "((//a[contains(@data-bind,'text: GuestName')])[" + parentInex
				+ "]//..//..//..//following-sibling::td//span)[" + index + "]";
		WebElement element = driver.findElement(By.xpath(Path));
		return element.getText();
	}

	// 5PM
	public String getReservationSearchGuestName(WebDriver driver, int index) {

		String Path = "(//a[contains(@data-bind,'text: GuestName')])[" + index + "]";
		WebElement element = driver.findElement(By.xpath(Path));
		Wait.WaitForElement(driver, Path);
		Wait.waitForElementToBeVisibile(By.xpath(Path), driver);
		Wait.waitForElementToBeClickable(By.xpath(Path), driver);
		return element.getText();
	}

	public String getReservationSearchStatus(WebDriver driver, int index) {

		String Path = "(//a[contains(@data-bind,'text: GuestName')])[" + index
				+ "]//parent::div//parent::td//following-sibling::td//span[contains(@data-bind, 'StatusName.replace')]";
		Wait.WaitForElement(driver, Path);
		Wait.waitForElementToBeVisibile(By.xpath(Path), driver);
		WebElement element = driver.findElement(By.xpath(Path));
		String getStatus = element.getText();
		return getStatus;
	}

	public String getGuestNameInChekoutPopup(WebDriver driver, String guestName, int index) {

		String Path = "(//span[@title='" + guestName + "'])[" + index + "]";
		WebElement element = driver.findElement(By.xpath(Path));
		return element.getText();
	}

	public String verifyChekoutPopup(WebDriver driver, String guestName, int parentIndex, int index) {

		String Path = "(//span[@title='" + guestName + "'])[" + parentIndex + "]//parent::td//following-sibling::td["
				+ index + "]//span";
		WebElement element = driver.findElement(By.xpath(Path));
		return element.getText();
	}

	public String getChargesInChekoutPopup(WebDriver driver, String guestName, int index) {

		String Path = "(//span[@title='" + guestName + "'])[" + index
				+ "]//parent::td//following-sibling::td//span[contains(@data-bind, 'Amount')]";
		WebElement element = driver.findElement(By.xpath(Path));
		return element.getText();

	}

	public String getGuestNameInChekoutSuccessPopup(WebDriver driver, String guestName, int index)
			throws InterruptedException {

		String Path = "(//tr[contains(@data-bind, 'ShowTransactionUpdatingMessage ')]//span[@title='" + guestName
				+ "'])[" + index + "]";
		WebElement element = driver.findElement(By.xpath(Path));
		Wait.wait5Second();
		Wait.WaitForElement(driver, Path);
		Wait.waitForElementToBeVisibile(By.xpath(Path), driver);

		return element.getText();

	}

	public String getChargesInChekoutSuccessPopup(WebDriver driver, String guestName, int index) {

		String Path = "(//tr[contains(@data-bind, 'ShowTransactionUpdatingMessage ')]//span[@title='" + guestName
				+ "'])[" + index + "]//parent::td//following-sibling::td//span[contains(@data-bind, 'Amount')]";
		WebElement element = driver.findElement(By.xpath(Path));
		return element.getText();

	}

	public String getReservationStatusInDetailsSection(WebDriver driver) {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.reservationStatusInDetailSection);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.reservationStatusInDetailSection), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.reservationStatusInDetailSection), driver);

		return element.reservationStatusInDetailSection.getText();

	}

	public ArrayList<String> verifyBulkCheckOutSuccessHeadng(WebDriver driver) {

		ArrayList<String> testSteps = new ArrayList<String>();
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.bulkCheckOutSuccessHeading);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.bulkCheckOutSuccessHeading), driver);

		assertTrue(element.bulkCheckOutSuccessHeading.isDisplayed(), "Checkout Popup succes is not displaying");
		testSteps.add("Bulk Checkout success heading verified");
		reslogger.info("Bulk Checkout success heading verified");
		return testSteps;

	}

	public String getReservationCountCheckoutSuccessPopup(WebDriver driver) {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.bulkCheckOutSuccessReservationCount);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.bulkCheckOutSuccessReservationCount), driver);

		return element.bulkCheckOutSuccessReservationCount.getText();

	}

	public void verify_PostLineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String LineItemCategoryAmount) throws InterruptedException {
		test_steps.add("******************* Verify Post Line Item to folio**********************");
		reslogger.info("******************* Verify Post Line Item to folio**********************");

		Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
		String line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])";

		String includeTax = "//span[text()='Include Taxes in Line Items']/preceding-sibling::input";
		Wait.WaitForElement(driver, includeTax);
		if (driver.findElement(By.xpath(includeTax)).isSelected()) {
			driver.findElement(By.xpath(includeTax)).click();
		}

		String input = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../preceding-sibling::td//i[contains(@data-bind,'PendingToPosted')]";
		Wait.WaitForElement(driver, input);

		String src = driver.findElement(By.xpath(input)).getAttribute("class");
		Utility.app_logs.info(src);
		if (src.contains("inncenter-icons-collection transactionstatus-icon2")) {
			test_steps.add("LineitemCategory " + LineItemCategory + " folio line item status Posted");
			reslogger.info("LineitemCategory " + LineItemCategory + " folio line item status Posted");
		}

		line = "((//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../following-sibling::td//span[contains(text(),'" + LineItemCategoryAmount + "')])";
		int count = driver.findElements(By.xpath(line)).size();
		if (count > 0) {
			test_steps.add("Successfully verified posted line item amount : " + LineItemCategoryAmount);
			reslogger.info("Successfully verified posted line item amount : " + LineItemCategoryAmount);
		} else {
			test_steps.add("Voided line item amount validation failed");
			reslogger.info("Voided line item amount validation failed");
		}
	}

	public boolean checkedDisplayVoidItem(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_DisplayVoidItemCheckBox, driver);
		boolean isChecked = res.CP_Reservation_DisplayVoidItemCheckBox.isSelected();
		if (!isChecked) {
			Utility.ScrollToElement(res.CP_Reservation_DisplayVoidItemCheckBox, driver);
			try {
				res.CP_Reservation_DisplayVoidItemCheckBox.click();
			} catch (Exception e) {
				Utility.clickThroughJavaScript(driver, res.CP_Reservation_DisplayVoidItemCheckBox);
			}
			test_steps.add("Checked Display Void Item Check Box ");
			reslogger.info("Checked Display Void Item Check Box ");
		} else {
			test_steps.add("Display Void Item Check Box is Already Checked ");
			reslogger.info("Display Void Item Check Box is Already Checked ");
		}
		return isChecked;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: secondayGuestCheckInButtonClick ' Description: Checkin Button
	 * Click, Verification of Tab,With Option Available With/Without Guest
	 * Statement, Confirm Button Click ' Input parameters: WebDriver , String,
	 * boolean ' Return value: ArrayList<String> ' Created By: Aqsa Manzoor '
	 * Created On: 10-05-2020
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> secondayGuestCheckInButtonClick(WebDriver driver, String secondaryGuestName,
			boolean generateGuestStatement) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		element.CP_SECONDARYGUEST_CHECKINBUTTON.click();
		test_steps.add("Secondary Guest CheckIn Button Clicked");
		reslogger.info("Secondary Guest CheckIn Button Clicked ");
		Wait.WaitForElement(driver, OR_Reservation.CP_SECONDARYGUEST_CHECKIN_CHECKOUTTAB_TITLENAME);
		assertEquals(element.CP_SECONDARYGUEST_CHECKIN_CHECKOUTTAB_TITLENAME.getText().replaceAll(" ", ""),
				secondaryGuestName.replaceAll(" ", ""));
		test_steps.add("Secondary Guest Name: " + secondaryGuestName + " Verified");
		reslogger.info("Secondary Guest Name: " + secondaryGuestName + " Verified");
		if (!generateGuestStatement) {
			element.CP_CHECKIN_GENERATEGUESTSTATEMENT_TOGGLE.click();
			test_steps.add("Generate guest Statement Toggle: "
					+ element.CP_CHECKIN_GENERATEGUESTSTATEMENT_TOGGLE.isSelected());
			reslogger.info("sGenerate guest Statement Toggle: "
					+ element.CP_CHECKIN_GENERATEGUESTSTATEMENT_TOGGLE.isSelected());
		}
		Wait.WaitForElement(driver, OR_Reservation.CheckinConfirmButton);
		Wait.explicit_wait_visibilityof_webelement(element.CheckinConfirmButton, driver);
		Wait.explicit_wait_elementToBeClickable(element.CheckinConfirmButton, driver);
		element.CheckinConfirmButton.click();
		test_steps.add("Click on checkin confrim buttton");

		return test_steps;
	}

	/*
	 * * #########################################################################
	 * #########################################################################
	 * ######################## ' Method Name:
	 * selectPaymentMethodWithReservationInFolio ' Description: Select the Payment
	 * Method(Reservation) in TakePayment Popup, and Attached 'Reservation With
	 * Reservation Number in folio Pay Input parameters: <WebDriver,
	 * ArrayList<String> ,String, String> ' Return value: <ArrayList<String>> '
	 * Created By: <Aqsa Manzoor> ' Created On: <20/05/2020> *
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> selectPaymentMethodWithReservationInFolio(WebDriver driver, ArrayList<String> test_steps,
			String PaymentMethod, String ReservationNumber) throws InterruptedException {
		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_PaymentButton);
			String selectedMethod = res.CP_Reservation_Folio_TakePayment_PaymentButton.getAttribute("title");
			if (!selectedMethod.equalsIgnoreCase(PaymentMethod)) {
				res.CP_Reservation_Folio_TakePayment_PaymentButton.click();
				String payment = "//h4[text()='Take Payment']/../..//label[text()='PAYMENT METHOD']/..//div/div//span[text()='"
						+ PaymentMethod.trim() + "']";
				Wait.WaitForElement(driver, payment);
				driver.findElement(By.xpath(payment)).click();
				test_steps.add("Select Payment Type as : " + PaymentMethod);
				reslogger.info("Select Payment Type as : " + PaymentMethod);
			}
			if (PaymentMethod.equalsIgnoreCase("Reservation")) {
				driver.findElement(By.xpath(
						"//div[contains(@data-bind,'SelectedReservation')]//i[contains(@class,'rightIcon demo-icon icon-pencil')]"))
						.click();
				String searchReservatinTab = "//input[contains(@data-bind,'alue:$parent.SelectedReservatio')]";
				Wait.waitForElementToBeVisibile(By.xpath(searchReservatinTab), driver);
//				Wait.WaitForElement(driver, searchReservatinTab);
				WebElement searchReservatinTabElement = driver.findElement(By.xpath(searchReservatinTab));
				searchReservatinTabElement.clear();
				searchReservatinTabElement.sendKeys(ReservationNumber);
				String searchXpath = "//*[contains (text(), '" + ReservationNumber + "')]";
				Wait.waitForElementToBeVisibile(By.xpath(searchXpath), driver);
				System.out.println("++++++++++++++++++++++" + driver.findElements(By.xpath(searchXpath)).size());
//				Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(searchXpath)));
				driver.findElement(By.xpath(searchXpath)).click();

//				Wait.wait3Second();
//				WebElement searchResult = driver
//						.findElement(By.xpath("//*[contains (text(), '" + ReservationNumber + "')]"));
//				Wait.wait5Second();
//				Wait.explicit_wait_visibilityof_webelement(searchResult, driver);
//				searchResult.click();
				reslogger
						.info("Reservation Attached Verified : " + driver.findElement(By.xpath(searchXpath)).getText());
				test_steps
						.add("Reservation Attached Verified : " + driver.findElement(By.xpath(searchXpath)).getText());

			}

		} catch (Exception e) {
			System.out.println(e);
		}

		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getDepositPaymentPopupHeading> ' Description: <This method
	 * will return heading diplay messagein deposit payment poppup> ' Input
	 * parameters: <WebDriver driver> ' Return value: <ArrayList<String>> ' Created
	 * By: <Farhan Ghaffar> ' Created On: <06/16/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> getDepositPaymentPopupHeading(WebDriver driver) throws InterruptedException {
		ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.depositPaymentPopupHeading);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.depositPaymentPopupHeading), driver);
		Boolean isDisplayed = res.depositPaymentPopupHeading.isDisplayed();
		reslogger.info("isDisplayed : " + isDisplayed);
		if (isDisplayed) {
			testSteps.add("Deposit payment heading dislaying");
			reslogger.info("Deposit payment heading dislaying");

		} else {
			testSteps.add("Deposit payment heading is not dislaying");
			reslogger.info("Deposit payment heading is not dislaying");

		}
		return testSteps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <calculateDepositePercenatge> ' Description: <This method will
	 * calculate Deposit amount based on policy percentage> ' Input parameters:
	 * <String tripTotal, String depositAmount> ' Return value: <Double> ' Created
	 * By: <Farhan Ghaffar> ' Created On: <06/10/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String calculateDepositePercenatge(String tripTotal, String depositAmount) {
		Double tripTotalInDouble = Double.parseDouble(tripTotal);
		Double depositAmountInDouble = Double.parseDouble(depositAmount);

		Double getAmount = tripTotalInDouble * depositAmountInDouble;
		getAmount = getAmount / 100;
		String amount = String.format("%.2f", getAmount);
		reslogger.info("Calculated Amount : " + amount);
		return amount;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getCheckInPolicy> ' Description: <This method will return
	 * checkin policy from checkin popup> ' Input parameters: <WebDriver driver> '
	 * Return value: <String> ' Created By: <Farhan Ghaffar> ' Created On:
	 * <06/10/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getCheckInPolicy(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkInPolicy);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkInPolicy), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.checkInPolicy), driver);

		String checkInPolicy = res.checkInPolicy.getText();
		reslogger.info("checkInPolicy : " + checkInPolicy);
		return checkInPolicy;
	}

	public String getNoShowPaymentAmount(WebDriver driver) {

		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle), driver);
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);

		String amountDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText()
				.trim();
		amountDisplayed = replaceCurrency(amountDisplayed);
		return amountDisplayed;
	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getTripSummaryRoomChargesWithCurrency> ' Description: <This
	 * method will return Room Charges from room selection in reservation creation>
	 * ' Input parameters: <WebDriver driver, ArrayList test_steps> ' Return value:
	 * <String> ' Created By: <Farhan Ghaffar> ' Created On: <06/15/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getTripSummaryRoomChargesWithCurrency(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);

		String Balance = reservation.tripSummaryRoomCharges.getText();

		test_steps.add("TripSummary Room Charges : " + Balance);
		reslogger.info("TripSummary Room Charges : " + Balance);
		return Balance;
	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getTripSummaryTaxesWithCurrency> ' Description: <This method
	 * will return Tax & Services from room selection in reservation creation> '
	 * Input parameters: <WebDriver driver, ArrayList test_steps> ' Return value:
	 * <String> ' Created By: <Farhan Ghaffar> ' Created On: <06/15/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getTripSummaryTaxesWithCurrency(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);

		String Balance = reservation.tripSummaryTaxAndServices.getText();

		test_steps.add("TripSummary Tax & Services : " + Balance);
		reslogger.info("TripSummary Tax & Services : " + Balance);
		return Balance;
	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getTripSummaryTripTotalWithCurrency> ' Description: <This
	 * method will return Trip Total Charges from room selection in reservation
	 * creation> ' Input parameters: <WebDriver driver, ArrayList test_steps> '
	 * Return value: <String> ' Created By: <Farhan Ghaffar> ' Created On:
	 * <06/15/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getTripSummaryTripTotal(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);

		String Balance = reservation.tripSummaryTotal.getText();

		test_steps.add("TripSummary Trip Total Charges : " + Balance);
		reslogger.info("TripSummary Trip Total Charges : " + Balance);
		return Balance;
	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getTripSummaryPaidWithCurrency> ' Description: <This method
	 * will return Paid amount from room selection in reservation creation> ' Input
	 * parameters: <WebDriver driver, ArrayList test_steps> ' Return value: <String>
	 * ' Created By: <Farhan Ghaffar> ' Created On: <06/15/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getTripSummaryPaidWithCurrency(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);

		String Balance = reservation.tripSummaryDepositPaid.getText();

		test_steps.add("TripSummary Paid amount : " + Balance);
		reslogger.info("TripSummary Paid amount : " + Balance);
		return Balance;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getCancelationAmount> ' Description: <This method will return
	 * Cancellation amount from room selection in reservation creation> ' Input
	 * parameters: <WebDriver driver> ' Return value: <String> ' Created By: <Farhan
	 * Ghaffar> ' Created On: <06/15/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public String getCancelationAmount(WebDriver driver) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_Amount);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopup_Amount), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowPaymentPopup_Amount), driver);
		String getAmountToPay = reservation.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText().trim();
		reslogger.info("Cancellation amount : " + getAmountToPay);
		return getAmountToPay;
	}

	public String getCheckInAmount(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_Amount);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopup_Amount), driver);
		Amount = res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		return Amount;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ######################## 'Method Name: verifyLongStayCheckbox ' Description:
	 * verify long stay text and check box Input parameters: web driver Return
	 * value: array list ' Created By: <Frahan Ghaffar> ' Created On: <22/06/2020> *
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> verifyLongStayCheckbox(WebDriver driver) throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.LongStayText);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.LongStayText), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.LongStayText), driver);
		Utility.ScrollToElement_NoWait(reservation.LongStayText, driver);
		assertEquals(reservation.LongStayText.getText(), "Long Stay", "Failed: log stay text is mismatching!");
		Utility.app_logs.info("class:" + reservation.LongStayCheckbox.getAttribute("class"));
		assertTrue(reservation.LongStayCheckbox.getAttribute("class").contains("ng-color-green"),
				"Failed: long stay checkbox is not checked");
		testSteps.add("Verified long stay checkbox is checked after set tax exempt");

		return testSteps;

	}

	public void verifyGenerateGuestReportToggle(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CheckInGuestRegirstrationReportToggle);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CheckInGuestRegirstrationReportToggle), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CheckInGuestRegirstrationReportToggle), driver);
		res.CheckInGuestRegirstrationReportToggle.click();

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getReservationPolicy> ' Description: <This method will expand
	 * required policy in detail sections of new reservation> ' Input parameters:
	 * <WebDriver driver,String PolicyType,String percentage> ' Return value:
	 * <ArrayList<String>> ' Created By: <Farhan Ghaffar> ' Created On: <06/05/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> clickPolicyCollapseIcon(WebDriver driver, String PolicyType, String percentage)
			throws InterruptedException

	{
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		if (PolicyType.equals("noShow")) {
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel, driver);
			boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("No Show Policy Alread Expanded");
				reslogger.info("No Show Policy Alread Expanded ");
			} else {
				res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyCollapse.click();
				test_steps.add("No Show Policy  Expanded");
				reslogger.info("No Show Policy  Expanded ");
			}
		} else if (PolicyType.equals("checkIn")) {
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel, driver);
			boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("Check In Policy Alread Expanded");
				reslogger.info("Check In Policy Alread Expanded ");
			} else {
				res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyCollapse.click();
				test_steps.add("Check In Policy  Expanded");
				reslogger.info("Check In Policy  Expanded ");
			}
		} else if (PolicyType.equals("cancel")) {
			String path = "//div[text()='Policies And Disclaimers']/..//span[contains(text(),'Cancellation "
					+ percentage + "%')]";
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CancellationPolicyLabel, driver);
			boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_CancellationPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("Cancellation Policy Alread Expanded");
				reslogger.info("Cancellation Policy Alread Expanded ");
			} else {
				WebElement element = driver.findElement(By.xpath(path));
				Utility.ScrollToElement(element, driver);
				element.click();
				test_steps.add("Cancellation Policy Expanded");
				reslogger.info("Cancellation Policy Expanded ");
			}

		} else if (PolicyType.equals("deposit")) {
			Utility.ScrollToElement(res.depositPolicyLabel, driver);
			boolean isEclicked = res.depositPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("Deposit Policy Alread Expanded");
				reslogger.info("Deposit Policy Alread Expanded ");
			} else {
				res.depositPolicyCollapse.click();
				test_steps.add("Deposit Policy  Expanded");
				reslogger.info("Deposit Policy  Expanded ");
			}

		}
		return test_steps;

	}

	public void closePolicyCollapseIcon(WebDriver driver, int parentIndex, int ChildIndexindex)
			throws InterruptedException

	{
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String path = "((//div[@id='accordion'])[" + parentIndex + "]//a[@data-parent='#accordion'])[" + ChildIndexindex
				+ "]";
		driver.findElement(By.xpath(path)).click();

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <getReservationPolicy> ' Description: <This method will get
	 * policy> ' Input parameters: <WebDriver driver> ' Return value: <String> '
	 * Created By: <Farhan Ghaffar> ' Created On: <06/05/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public String getReservationPolicy(WebDriver driver) throws InterruptedException

	{
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.reservationPolicy), driver);
		Utility.ScrollToElement(res.reservationPolicy, driver);
		String getPolicy = res.reservationPolicy.getText();
		reslogger.info("Policy : " + getPolicy);

		return getPolicy;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <clickNewReservationInGroups> ' Description: <This method will
	 * click new reservation groups> ' Input parameters: <WebDriver driver> ' Return
	 * value: <ArrayList<String>> ' Created By: <Farhan Ghaffar> ' Created On:
	 * <06/05/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> clickNewReservationInGroups(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.newGroupReservationInput), driver);
		res.newGroupReservationInput.click();
		test_steps.add("Clicking on New Reservation");
		reslogger.info("Clicking on New Reservation");
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <selectRoomWithPolicyUpdation> ' Description: <This method
	 * will click on No in case there is policy updation> ' Input parameters:
	 * <WebDriver driver, ArrayList<String> test_steps, String RoomClass, String
	 * IsAssign, String Account> ' Return value: <ArrayList<String>> ' Created By:
	 * <Farhan Ghaffar> ' Created On: <06/08/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public ArrayList<String> selectRoomWithPolicyUpdation(WebDriver driver, String RoomClass, String IsAssign,
			String Account) throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";

		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		Utility.app_logs.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/following-sibling::span";
			Utility.app_logs.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else if (IsAssign.equalsIgnoreCase("Yes")) {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				// updated code :aqsa ( previous script was selecting unassigned
				// when isAssign=true)
				int maxNumber = driver.findElements(By.xpath(roomnum)).size();
				int minNumber = 2;
				Random random = new Random();
				int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
				System.out.print(" Random Number is :" + randomNumber);
				Utility.app_logs.info("count : " + maxNumber);
				Utility.app_logs.info("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			} else {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				driver.findElement(By.xpath(expand)).click();

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				test_steps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait1Second();
				}
			}

			try {

				if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
					String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='No']";
					/*
					 * Wait.WaitForElement(driver, policy);
					 * Wait.waitForElementToBeVisibile(By.xpath(policy), driver);
					 * Wait.waitForElementToBeClickable(By.xpath(policy), driver);
					 */
					Wait.wait2Second();
					driver.findElement(By.xpath(policy)).click();
					test_steps.add("Based on the changes made, new policies are applicable.? : No");
					reslogger.info("Based on the changes made, new policies are applicable.? : No");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						Utility.app_logs.info("in while");
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 10) {
							break;
						} else {
							counter++;
							Wait.wait1Second();
						}
					}
				}
			} catch (Exception e) {
				// TODO: handle exception
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
		return test_steps;
	}

	public void enter_GuestDetailsForMRB(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String Email, String PhoneNumber, String AltenativePhone,
			String IsSplit, String IsAddMoreGuestInfo) throws ParseException {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		String[] salu = Salutation.split("\\|");
		String[] guestFName = GuestFirstName.split("\\|");
		String[] guestLName = GuestLastName.split("\\|");
		String[] mail = Email.split("\\|");
		String[] phone = PhoneNumber.split("\\|");

		int size = salu.length;

		for (int i = 1; i <= size; i++) {
			if (i == 1) {
				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
				res.CP_NewReservation_GuestSalutation.click();
				String sal = "//span[contains(text(),'" + salu[i - 1] + "')]/../..";
				Wait.WaitForElement(driver, sal);
				driver.findElement(By.xpath(sal)).click();

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
				res.CP_NewReservation_GuestFirstName.clear();

				Random random = new Random();
				int randomNumber = random.nextInt(900);
				reslogger.info("randomNumber : " + randomNumber);

				String FirstName = guestFName[i - 1];
				// String FirstName = guestFName[i - 1] + randomNumber;
				Utility.guestFirstName = FirstName;
				res.CP_NewReservation_GuestFirstName.sendKeys(FirstName);
				test_steps.add("Guest First Name : " + FirstName);
				reslogger.info("Guest First Name : " + FirstName);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);
				res.CP_NewReservation_GuestLastName.clear();

				// String LastName = guestLName[i - 1] + randomNumber;
				String LastName = guestLName[i - 1];
				Utility.guestLastName = LastName;
				res.CP_NewReservation_GuestLastName.sendKeys(LastName);
				test_steps.add("Guest Last Name : " + LastName);
				reslogger.info("Guest Last Name : " + LastName);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Phone);
				res.CP_NewReservation_Phone.clear();
				res.CP_NewReservation_Phone.sendKeys(phone[i - 1]);
				test_steps.add("Enter Phone Number : " + phone[i - 1]);
				reslogger.info("Enter Phone Number : " + phone[i - 1]);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AltenativePhone);
				res.CP_NewReservation_AltenativePhone.clear();
				res.CP_NewReservation_AltenativePhone.sendKeys(AltenativePhone);
				test_steps.add("Enter AltenativePhone Number : " + AltenativePhone);
				reslogger.info("Enter AltenativePhone Number : " + AltenativePhone);

				/*
				 * Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Email); <<<<<<<
				 * HEAD ======= res.CP_NewReservation_Email.clear();
				 * res.CP_NewReservation_Email.sendKeys(mail[i - 1]);
				 * test_steps.add("Enter Email : " + mail[i - 1]);
				 * reslogger.info("Enter Email : " + mail[i - 1]);
				 */
			} else {

				String additional = "(//span[text()='Additional Room'])";
				int count = driver.findElements(By.xpath(additional)).size();

				String saluta = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//span[text()='Select']/..";
				String slaut = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//span[text()='Select']/../following-sibling::div//li//span[text()='"
						+ salu[i - 1] + "']";
				Wait.WaitForElement(driver, saluta);
				driver.findElement(By.xpath(saluta)).click();
				reslogger.info(slaut);
				Wait.WaitForElement(driver, slaut);
				driver.findElement(By.xpath(slaut)).click();

				count = driver.findElements(By.xpath("//label[text()='Guest ']/../input")).size();
				String fname = "(//label[text()='Guest ']/../input)[" + i + "]";
				Wait.WaitForElement(driver, fname);
				driver.findElement(By.xpath(fname)).clear();
				String FirstName = guestFName[i - 1];
				// String FirstName = guestFName[i - 1] + randomNumber;
				driver.findElement(By.xpath(fname)).sendKeys(FirstName);
				test_steps.add("Guest First Name : " + FirstName);
				reslogger.info("Guest First Name : " + FirstName);
				Utility.secondGuestFirstName = FirstName;
				count = driver.findElements(By.xpath(
						"(//span[text()='Additional Room'])/../../../../../..//label[text()='Last Name']/../input"))
						.size();
				String lname = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//label[text()='Last Name']/../input";
				Wait.WaitForElement(driver, lname);
				driver.findElement(By.xpath(lname)).clear();
				String lastName = guestLName[i - 1];
				driver.findElement(By.xpath(lname)).sendKeys(lastName);
				test_steps.add("Guest Last Name : " + lastName);
				reslogger.info("Guest Last Name : " + lastName);
				Utility.secondGuestLastName = lastName;
				count = driver.findElements(By.xpath("(//label[text()='Phone']/preceding-sibling::input)")).size();
				String ph = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//label[text()='Phone']/preceding-sibling::input";
				driver.findElement(By.xpath(ph)).clear();
				if (Utility.validateString(phone[0])) {
					driver.findElement(By.xpath(ph)).sendKeys(phone[i - 1]);
					test_steps.add("Enter Phone Number : " + phone[i - 1]);
					reslogger.info("Enter Phone Number : " + phone[i - 1]);
				}
				count = driver.findElements(By.xpath("(//label[text()='E-mail']/preceding-sibling::input)")).size();
				String email = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//label[text()='E-mail']/preceding-sibling::input";
				driver.findElement(By.xpath(email)).clear();

				if (Utility.validateString(mail[0])) {
					driver.findElement(By.xpath(email)).sendKeys(mail[i - 1]);
					test_steps.add("Enter Altenative Email : " + mail[i - 1]);
					reslogger.info("Enter Altenative Email : " + mail[i - 1]);

				}

			}
			if (!(i == size) && IsAddMoreGuestInfo.equalsIgnoreCase("Yes") && IsSplit.equalsIgnoreCase("Yes")) {
				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddMoreGuestInfo);
				res.CP_NewReservation_AddMoreGuestInfo.click();
				test_steps.add("Clicking on Add More Guest Info");
				reslogger.info("Clicking on Add More Guest Info");
			}
		}

	}

	public void clickStayInfoCheckOutRoom(WebDriver driver, ArrayList<String> test_steps, String roomNO)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		String path = "//div[contains(@data-bind,'ReservationStatusLookup')]/div//div[contains(@class,'ir-roomInfo')]//span[contains(text(),'"
				+ roomNO + "')]"
				+ "/ancestor::div/div[contains(@class,'detailsbox')]/following-sibling::div//button[contains(text(),'Check Out')]";
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		element.click();
		test_steps.add("Room <b>" + roomNO + "</b> in the MRB Reservation Click Check-Out Button");
		reslogger.info("Room " + roomNO + " in the MRB Reservation Click Check-Out Button");

	}

	public void clickCheckoutProceedButton(WebDriver driver, ArrayList<String> test_steps, String buttonName)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkout_ProceedButton);
		Utility.ScrollToElement(res.checkout_ProceedButton, driver);
		String text = res.checkout_ProceedButton.getText();
		reslogger.info(text);
		assertEquals(text.toLowerCase().trim(), buttonName.toLowerCase().trim(), "Failed to verify Proceed Button");
		test_steps.add("Verified Proceed button");
		reslogger.info("Verified Proceed button");
		res.checkout_ProceedButton.click();
		test_steps.add("Click Proceed button");
		reslogger.info("Click Proceed button");
	}

	public void clickCheckoutProceedButtons(WebDriver driver, ArrayList<String> test_steps, String buttonName)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkout_ProceedButton);
		Utility.ScrollToElement(res.checkout_ProceedButton, driver);
		res.checkout_ProceedButton.click();
		test_steps.add("Click Proceed button");
		reslogger.info("Click Proceed button");
	}

	public void verifyCheckoutProceedMessage(WebDriver driver, ArrayList<String> test_steps, String message)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkout_ProceedMessage);
		Utility.ScrollToElement(res.checkout_ProceedMessage, driver);
		String text = res.checkout_ProceedMessage.getText();
		reslogger.info(text);
		assertEquals(text.toLowerCase().trim(), message.toLowerCase().trim(), "Failed to verify Proceed Message");
		test_steps.add("Verified Message: <b>" + text + "</b>");
		reslogger.info("Verified Message: " + text);
	}

	public void verifyConfirmCheckoutWithoutRefundButton(WebDriver driver, ArrayList<String> test_steps, String message)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkoutWithoutRefund);
		Utility.ScrollToElement(res.checkoutWithoutRefund, driver);
		String text = res.checkoutWithoutRefund.getText();
		reslogger.info(text);
		assertEquals(text.toLowerCase().trim(), message.toLowerCase().trim(),
				"Failed to verify confirm checkout without refund");
		test_steps.add("Verified Button: <b>" + text + "</b>");
		reslogger.info("Verified Button: " + text);
	}

	public void verifytakeMeToFolioButton(WebDriver driver, ArrayList<String> test_steps, String message)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkoutTakemeToFolio);
		Utility.ScrollToElement(res.checkoutTakemeToFolio, driver);
		String text = res.checkoutTakemeToFolio.getText();
		reslogger.info(text);
		assertEquals(text.toLowerCase().trim(), message.toLowerCase().trim(), "Failed to verify take me to folio");
		test_steps.add("Verified Button: <b>" + text + "</b>");
		reslogger.info("Verified Button: " + text);
	}

	public void clicktakeMeToFolioButton(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean isExist = Utility.isElementPresent(driver, By.xpath(OR_Reservation.checkoutTakemeToFolio));
		if (isExist) {
			Wait.WaitForElement(driver, OR_Reservation.checkoutTakemeToFolio);
			Utility.ScrollToElement(res.checkoutTakemeToFolio, driver);
			String buttonName = res.checkoutTakemeToFolio.getText();
			Utility.clickThroughJavaScript(driver, res.checkoutTakemeToFolio);
			test_steps.add("Click <b>" + buttonName + " Button</b>");
			reslogger.info("Click  " + buttonName + " Button");
			Wait.waitTillElementDisplayed(driver, OR_Reservation.loading);
			reslogger.info("Loading Done  ");
		}
	}

	public void clickConfirmCheckoutWithoutRefundButton(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkoutWithoutRefund);
		Utility.ScrollToElement(res.checkoutWithoutRefund, driver);
		res.checkoutWithoutRefund.click();
		test_steps.add("Click <b>" + res.checkoutWithoutRefund.getText() + " Button</b>");
		reslogger.info("Click  " + res.checkoutWithoutRefund.getText() + " Button");
		Wait.waitTillElementDisplayed(driver, OR_Reservation.loading);
		reslogger.info("Loading Done  ");
	}

	public void verifytakeMeToFolio(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.folioDetailTab);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.folioDetailTab), driver);
		assertTrue(driver.findElement(By.xpath(OR_Reservation.folioDetailTab)).isDisplayed(),
				"Failed: to Displayed Folio Detail");
		test_steps.add("Moved to Folio");
		reslogger.info("Moved to Folio");

	}

	public void verifyFoiloRefund(WebDriver driver, ArrayList<String> test_steps, String balanceAmount) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		balanceAmount = df.format(Double.parseDouble(balanceAmount));
		balanceAmount = "(" + balanceAmount + ")";
		reslogger.info(balanceAmount);

		try {
			String balanceAmountDisplayed = get_Balance(driver, test_steps);
			reslogger.info(balanceAmountDisplayed);
			assertEquals(balanceAmountDisplayed.trim(), balanceAmount.trim(), "Failed - Verify Refund at Folio");
			test_steps.add(
					"Successfully verified Refund amount displayed at folio as <b>" + balanceAmountDisplayed + "</b>");
			reslogger.info("Successfully verified Refund amount displayed at folio as " + balanceAmountDisplayed);
		} catch (Exception e) {
			reslogger.info(e);
		}
	}

	public void verifytakemeToDetail(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.detailTab);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.detailTab), driver);
		assertTrue(driver.findElement(By.xpath(OR_Reservation.detailTab)).isDisplayed(), "Failed: to Displayed Detail");
		test_steps.add("Moved to Detail Page");
		reslogger.info("Moved to Detail Page");
	}

	public void verifyRefundOnDetail(WebDriver driver, ArrayList<String> test_steps, String balanceAmount) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		balanceAmount = df.format(Double.parseDouble(balanceAmount));
		balanceAmount = "(" + balanceAmount + ")";
		reslogger.info(balanceAmount);

		try {
			String balanceAmountDisplayed = get_TripSummaryBalance_Amount(driver, test_steps);
			reslogger.info(balanceAmountDisplayed);
			assertEquals(balanceAmountDisplayed.trim(), balanceAmount.trim(), "Failed - Verify Refund at Detail");
			test_steps.add(
					"Successfully verified Refund amount displayed at detail as <b>" + balanceAmountDisplayed + "</b>");
			reslogger.info("Successfully verified Refund amount displayed at detail as " + balanceAmountDisplayed);
		} catch (Exception e) {
			reslogger.info(e);
		}
	}

	public void verifyStayInfoCheckOutButton(WebDriver driver, ArrayList<String> test_steps, String roomNO)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_StayInfo_CheckOutButton);

		String path = "//div[contains(@data-bind,'ReservationStatusLookup')]/div//div[contains(@class,'ir-roomInfo')]//span[contains(text(),'"
				+ roomNO + "')]"
				+ "/ancestor::div/div[contains(@class,'detailsbox')]/following-sibling::div//button[contains(text(),'Check Out')]";
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);

		/*
		 * int x = Integer.parseInt(roomNO) - 1;
		 * Utility.ScrollToElement(res.CP_Reservation_StayInfo_CheckOutButtonList.get(
		 * Integer.parseInt(roomNO) - 1), driver);
		 * assertTrue(res.CP_Reservation_StayInfo_CheckOutButtonList.get(Integer.
		 * parseInt(roomNO) - 1).isDisplayed(), "Failed: to Displayed Detail");
		 */
		assertTrue(element.isDisplayed(), "Failed: to Displayed Detail");
		test_steps.add("Room <b>" + roomNO + "</b> in the MRB Reservation Verify Check-Out Button");
		reslogger.info("Room " + roomNO + " in the MRB Reservation Verify Check-Out Button");
	}

	public void verifySettlementMsg(WebDriver driver, ArrayList test_steps, String RoomNo, String RoomClassName)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutAllButton_ConfirmationMsg);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg, driver);
		Utility.ScrollToElement(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg, driver);
		String Msg = "Do you wish to settle all charges in the folio for " + RoomClassName + ", room " + RoomNo
				+ "? If not, payment will be taken when the primary guest checks out.";
		reslogger.info(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg.getText());
		assertEquals(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg.getText().toLowerCase().trim(),
				Msg.toLowerCase().trim(), "Failed: To verify Message");
		test_steps.add("Verified Message : <b>" + Msg + "</b>");
		reslogger.info("Verified Message : " + Msg);

	}

	public void clickSettlementYesButton(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutAllButton_ConfirmationMsgYesButton);
		Utility.ScrollToElement(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg, driver);
		res.CP_Reservation_CheckOutAllButton_ConfirmationMsgYesButton.click();
		test_steps.add("Clicking on Yes Button");
		reslogger.info("Clicking on Yes Button");
	}

	public void clickSettlementNoButton(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutAllButton_ConfirmationMsgNoButton);
		Utility.ScrollToElement(res.CP_Reservation_CheckOutAllButton_ConfirmationMsgNoButton, driver);
		res.CP_Reservation_CheckOutAllButton_ConfirmationMsgNoButton.click();
		test_steps.add("Clicking on No Button");
		reslogger.info("Clicking on No Button");
	}

	public ArrayList<String> checkOutPayment(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckOut_Button, driver);
		res.CP_Reservation_ConfirmCheckOut_Button.getText();
		res.CP_Reservation_ConfirmCheckOut_Button.click();
		return test_steps;
	}

	public ArrayList<String> clickOnPayButtonOnPaymentPopup1(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_LogANDPayButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowPaymentPopup_LogANDPayButton), driver);
		Utility.ScrollToElement_NoWait(res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton, driver);
		String buttonName = res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().split(" ")[0];

		JavascriptExecutor js = (JavascriptExecutor) driver;
		js.executeScript("arguments[0].click();", res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton);
		test_steps.add("Clicking on " + buttonName + " Button ");
		reslogger.info("Clicking on " + buttonName + " Button ");
		try {
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowSuccess_ModelHeader), driver);
		} catch (Exception e) {
			try {
				js.executeScript("arguments[0].click();", res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton);
				test_steps.add("Clicking on " + buttonName + " Button ");
				reslogger.info("Clicking on " + buttonName + " Button ");
				Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowSuccess_ModelHeader), driver);

			} catch (Exception e2) {
				test_steps.add(
						"Existing issue in CP: Posted room charges do not move to account when charge routing is set"
								+ "<br/><a href='https://innroad.atlassian.net/browse/NG-10512' target='_blank'>"
								+ "Verified :NG-10512</a><br/>");
				reslogger.info(
						"Existing issue in CP: Posted room charges do not move to account when charge routing is set"
								+ "<br/><a href='https://innroad.atlassian.net/browse/NG-10512' target='_blank'>"
								+ "Verified :NG-10512</a><br/>");
			}
		}
		return test_steps;
	}

	public boolean verifyEmailIconEnabled(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		Elements_Reservation ReservationPage = new Elements_Reservation(driver);
		boolean emailIconFound = false;
		if (ReservationPage.emailIconsInGuestDetailsTab.size() > 0) {
			emailIconFound = true;
		}
		return emailIconFound;
	}

	public void verifyEmailIconEnabled(WebDriver driver, ArrayList<String> test_steps, boolean expValue)
			throws InterruptedException {
		boolean actValue = verifyEmailIconEnabled(driver, test_steps);
		assertEquals(actValue, expValue, "Failed to verify email icon displayed in guest details tab");
		if (expValue) {
			test_steps.add("Successfully verified email icon displayed in guest details tab");
		} else {
			test_steps.add("Successfully verified email icon is not displayed in guest details tab");
		}
	}

	public void Search_ResNumber_And_Click(WebDriver driver, String resNumber) throws InterruptedException {
		// String str = null;

		Elements_Reservation_SearchPage resservationSearch = new Elements_Reservation_SearchPage(driver);
		Wait.WaitForElement(driver, OR.Basic_Res_Number);
		Wait.waitForElementToBeClickable(By.xpath(OR.Basic_Res_Number), driver);
		resservationSearch.Basic_Res_Number.clear();
		resservationSearch.Basic_Res_Number.sendKeys(resNumber);
		resservationSearch.Click_BasicSearch.click();
		Wait.WaitForElement(driver, OR.Get_Res_Number);
		String resLocator = "//span[contains(text(),'" + resNumber.trim() + "')]/../../td[4]/div/a";
		Wait.waitForElementToBeClickable(By.xpath(resLocator), driver);

		WebElement ReservationFound = driver.findElement(By.xpath(resLocator));
		ReservationFound.click();
		Wait.wait3Second();
		// driver.navigate().refresh();
	}

	public void clickOnCashPaymentTypeDescription(WebDriver driver) throws InterruptedException {
		test_steps.add("Click on Cash payment description in folio tab");
		reslogger.info("Click on Cash payment description in folio tab");
		Elements_CPReservation res = new Elements_CPReservation(driver);
		res.cashPaymentDescription.click();
		verifyUpdatedByInItemDetailPopUp(driver);
	}

	public ArrayList<String> enterGuestName(WebDriver driver, ArrayList<String> test_steps, String GuestFirstName,

			String GuestLastName) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
		res.CP_NewReservation_GuestFirstName.sendKeys(GuestFirstName);
		test_steps.add("Guest First Name : <b>" + GuestFirstName + "</b>");
		reslogger.info("Guest First Name : <b>" + GuestFirstName + "</b>");

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);
		res.CP_NewReservation_GuestLastName.sendKeys(GuestLastName);
		test_steps.add("Guest Last Name : <b>" + GuestLastName + "</b>");
		reslogger.info("Guest Last Name : <b>" + GuestLastName + "</b>");
		return test_steps;
	}

	public void selectPaymentMethodType(WebDriver driver, ArrayList<String> test_steps, String paymentType,
			String cardNumber, String nameOnCard, String cardExpiryDate, String reservationNumber, String amount)
			throws InterruptedException {
		click_Pay(driver, test_steps);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CreateReservationPaymentMethod);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CreateReservationPaymentMethod), driver);
		test_steps.add("Clicking on Payment Method");
		reslogger.info("Clicking on Payment Method");
		try {
			Utility.ScrollToElement(res.createReservationPaymentMethod, driver);
			res.createReservationPaymentMethod.click();
		} catch (Exception e) {
			Wait.WaitForElement(driver, OR_Reservation.CreateReservationPaymentMethod);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CreateReservationPaymentMethod), driver);
			test_steps.add("Again Clicking on Payment Method");
			reslogger.info("Again Clicking on Payment Method");
			Utility.ScrollToElement(res.createReservationPaymentMethod, driver);
			res.createReservationPaymentMethod.click();
		}
		if (paymentType.trim().equalsIgnoreCase("MC")) {
			String paymentMethodMc = "(//label[text()='PAYMENT METHOD'])[2]//..//div//button//following-sibling::div//ul//li//span[text()='MC']";
			Wait.WaitForElement(driver, paymentMethodMc);
			test_steps.add("Clicking on Payment Method MC");
			reslogger.info("Clicking on Payment Method MC");
			driver.findElement(By.xpath(paymentMethodMc)).click();
			enterMcCardInfo(driver, test_steps, cardNumber, nameOnCard, cardExpiryDate);
			clickFolioName(driver);
			clickPayButton(driver);
			closePaymentSuccessfullModal(driver);
			click_Folio(driver, test_steps);
		} else if (paymentType.trim().equalsIgnoreCase("Reservation")) {
			String paymentMethodReservation = "(//label[text()='PAYMENT METHOD'])[2]//..//div//button//following-sibling::div//ul//li//span[text()='Reservation']";
			Wait.WaitForElement(driver, paymentMethodReservation);
			test_steps.add("Clicking on Payment Method Reservation");
			reslogger.info("Clicking on Payment Method Reservation");
			driver.findElement(By.xpath(paymentMethodReservation)).click();
			enterReservationNumber(driver, reservationNumber);
			// selectReservation(driver);
			clickFolioName(driver);
			clickPayButton(driver);
			closePaymentSuccessfullModal(driver);
		} else if (paymentType.trim().equalsIgnoreCase("Check")) {
			String paymentMethodCheck = "(//label[text()='PAYMENT METHOD'])[2]//..//div//button//following-sibling::div//ul//li//span[text()='Check']";
			Wait.WaitForElement(driver, paymentMethodCheck);
			test_steps.add("Select Payment Method : Check");
			reslogger.info("Select Payment Method : Check");
			driver.findElement(By.xpath(paymentMethodCheck)).click();
			enterAmount(driver, amount);
			test_steps.add("Enter Amount : " + amount);
			reslogger.info("Enter Amount : " + amount);
			clickFolioName(driver);
			clickPayButton(driver);
			test_steps.addAll(closePaymentSuccessfullModal(driver));
			click_Folio(driver, test_steps);
		}
	}

	private void enterMcCardInfo(WebDriver driver, ArrayList<String> test_steps, String cardNumber, String nameOnCard,
			String cardExpDate) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		res.CP_NewReservation_CardNumber.sendKeys(cardNumber);
		test_steps.add("Enter CardNumber : " + cardNumber);
		reslogger.info("Enter CardNumber : " + cardNumber);
		res.CP_NewReservation_NameOnCard.sendKeys(nameOnCard);
		test_steps.add("Enter Name On Card : " + nameOnCard);
		reslogger.info("Enter Name On Card : " + nameOnCard);
		res.CP_NewReservation_CardExpDate.sendKeys(cardExpDate);
		test_steps.add("Enter Card ExpDate : " + cardExpDate);
		reslogger.info("Enter Card ExpDate : " + cardExpDate);

	}

	private void enterReservationNumber(WebDriver driver, String reservationNumber) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		res.enterReservationNumber.sendKeys(reservationNumber);
		Wait.WaitForElement(driver, OR_Reservation.EnterReservationNumber);
		selectReservation(driver);
		test_steps.add("Enter Reservation Number");
		reslogger.info("Enter Reservation Number");
	}

	private void clickPayButton(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		res.clickPayButton.click();
		test_steps.add("Clicking on Pay Button");
		reslogger.info("Clicking on Pay Button");
	}

	public ArrayList<String> closePaymentSuccessfullModal(WebDriver driver) {
		ArrayList<String> steps = new ArrayList<>();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ClosePaymentSuccessfulModal);
		// Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ClosePaymentSuccessfulModal,
		// driver);

		res.closePaymentSuccessfulModal.click();
		steps.add("Clicking on Close Payment Successfull modal");
		reslogger.info("Clicking on Close Payment Successfull modal");
		return steps;
	}

	public void verifyUpdatedByInItemDetailPopUp(WebDriver driver) throws InterruptedException {
		Wait.wait10Second();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String updatedByUserName = res.updatedByUser.getText();
		assertTrue(updatedByUserName.contains("autouser"));
		test_steps.add("Verify Updated By is displayed");
		reslogger.info("Verify Updated By is displayed");
	}

	public void clickSavePaymentButton(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ClickSavePaymentButton);
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ClickSavePaymentButton, driver);
		res.clickSavePaymentButton.click();
		Wait.wait15Second();
	}

	private void enterAmount(WebDriver driver, String amount) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterAmount), driver);
		Utility.ScrollToElement(res.enterAmount, driver);
		res.enterAmount.clear();
		res.enterAmount.sendKeys(Keys.chord(Keys.CONTROL, "a"));
		res.enterAmount.sendKeys(amount);
	}

	public String getReservationNumber(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		return res.reservationNumber.getText();
	}

	private void clickFolioName(WebDriver driver) {
		driver.findElement(By
				.xpath("//*[@id=\"bpjscontainer_29\"]/div[2]/div/div[2]/form/div[5]/div/div[2]/div[2]/div/div/button"))
				.click();

	}

	public void verifyTripTotalPercentage(WebDriver driver) throws InterruptedException {
		String tripTotal = (driver.findElement(By.xpath(
				"//div[@class='row ir-pb-10 ir-pt-10 fw-700 ir-fontSize-18 ir-bt-1']//div[@class='col-md-7 col-lg-7 col-xs-7 col-sm-7 text-right']")))
						.getText();
		float expectedPercentage = 0;
		String valueWithOutDollar = tripTotal.replace("$", "").trim();
		Float floatVal = Float.valueOf(valueWithOutDollar).floatValue();
		expectedPercentage = ((10 * floatVal) / 100);
		String expectedPercentageInStringFormat = String.valueOf(expectedPercentage);
		String expectedPercentageWithDollar = "$ " + expectedPercentageInStringFormat;
		boolean actualPercentage = (driver
				.findElement(By.xpath("//div[@class='ir-fontSize-18 fw-700 ir-color-green pull-right']")).getText())
						.contains(expectedPercentageWithDollar);
		test_steps.add(" Verify Deposit Due Percentage as : <b>" + expectedPercentage + " </b>");
		reslogger.info(" Verify Deposit Due Percentage as : <b>" + expectedPercentage + " </b>");
		assertTrue(actualPercentage);

	}

	private void selectReservation(WebDriver driver) {
		test_steps.add("Select Reservation");
		reslogger.info("Select Reservation");
		String element = "//*[@id=\"bpjscontainer_29\"]/div[2]/div/div[2]/form/div[6]/fieldset/paymentmethod/div/div/div[1]/div/div[3]/div[1]/div/div/ul/li[1]";
		Wait.waitForElementToBeClickable(By.xpath(element), driver);
		driver.findElement(By.xpath(element)).click();

	}

	public ArrayList<String> verifyUpdatedByInItemDetailPopUp(WebDriver driver, String user,
			ArrayList<String> testSteps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.UpdatedByUser), driver);
		Utility.ScrollToElement(res.updatedByUser, driver);
		String updatedByUserName = res.updatedByUser.getText();
		testSteps.add("Verify Updated By is displayed");
		reslogger.info("Verify Updated By is displayed");
		assertTrue(updatedByUserName.contains(user));
		testSteps.add("Verify User '" + user + "'");
		reslogger.info("Verify User '" + user + "'");
		return testSteps;
	}

	// Added By Adhnan6/23/2020
	public void makePayment(WebDriver driver, ArrayList<String> test_steps, String amount) throws InterruptedException {
		click_Pay(driver, test_steps);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CreateReservationPaymentMethod);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CreateReservationPaymentMethod), driver);

		enterAmount(driver, amount);
		test_steps.add("Enter Amount : " + amount);
		reslogger.info("Enter Amount : " + amount);
		clickFolioName(driver);
		clickPayButton(driver);
		test_steps.add("Click Pay");
		reslogger.info("Click Pay");
		test_steps.addAll(closePaymentSuccessfullModal(driver));
		click_Folio(driver, test_steps);

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <calculateDepositePercenatge> ' Description: <This method will
	 * calculate Deposit amount based on policy percentage> ' Input parameters:
	 * <String tripTotal, String depositAmount> ' Return value: <Double> ' Created
	 * By: <Farhan Ghaffar> ' Created On: <06/10/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */
	public Double calculationDepositePercenatge(String tripTotal, String depositAmount) {
		Double tripTotalInDouble = Double.parseDouble(tripTotal);
		Double depositAmountInDouble = Double.parseDouble(depositAmount);

		Double getAmount = tripTotalInDouble * depositAmountInDouble;
		getAmount = getAmount / 100;
		String amount = String.format("%.2f", getAmount);
		depositAmountInDouble = Double.parseDouble(amount);
		return depositAmountInDouble;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: attachTravelAgentMarketSegmentDetails ' Description: Search
	 * Travel Agent Account and Popup Show to override All Information ,Clicks Yes.
	 * ' Input parameters: (driver,String[], String ) ' Return value: void ' Created
	 * By: Aqsa ' Created On: <06/22/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public void attachTravelAgentMarketSegmentDetails(WebDriver driver, ArrayList test_steps, String TravelAgent)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_TravelAgent);

		if (!(TravelAgent.equalsIgnoreCase("") || TravelAgent.isEmpty())) {
			res.CP_NewReservation_TravelAgent.clear();
			Wait.wait1Second();
			res.CP_NewReservation_TravelAgent.sendKeys(TravelAgent);
			Wait.wait2Second();
			String account = "//b[contains(text(),'" + TravelAgent.trim() + "')]/../../..";
			Wait.WaitForElement(driver, account);
			driver.findElement(By.xpath(account)).click();
			String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]/following-sibling::div//button[contains(text(),'Yes')]";
			Wait.WaitForElement(driver, dataYes);
			driver.findElement(By.xpath(dataYes)).click();
			test_steps.add(
					"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
			reslogger.info(
					"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
			Wait.wait10Second();
		}
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: verifyMarketInfo ' Description: Verifies the Information is
	 * same as attached from Travel Agent or Any other Account. ' Input parameters:
	 * (driver,String, String ) ' Return value: String<> ' Created By: Aqsa '
	 * Created On: <06/22/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> verifyMarketingInformation(WebDriver driver, String Market, String Referral)
			throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		String marketValue = "(//label[text()='Market']/preceding-sibling::div/button)[1]//span[text()='" + Market
				+ "']";
		String referralValue = "(//label[text()='Referral']/preceding-sibling::div/button)[2]//span[text()='" + Referral
				+ "']";

		WebElement MarketEle = driver.findElement(By.xpath(marketValue));
		WebElement ReferraltEle = driver.findElement(By.xpath(referralValue));

		assertEquals(Market, MarketEle.getText());
		reslogger.info("Marketing Info Market: " + Market + " :Verified");
		test_steps.add("Marketing Info Market: " + Market + " :Verified");
		reslogger.info("Valueee:" + ReferraltEle.getText());

		assertEquals(Referral, ReferraltEle.getText());
		reslogger.info("Marketing Info Referral: " + Referral + " :Verified");
		test_steps.add("Marketing Info Referral: " + Referral + " :Verified");
		return test_steps;
	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: verifyTravelAgentAttachedAndClick ' Description: Verifies the
	 * Attached Travel Agent Name and check if it is clickable and opens it on
	 * condtion. ' Input parameters: (driver,String, boolean ) ' Return value:
	 * String<> ' Created By: Aqsa ' Created On: <06/23/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> verifyTravelAgentAttachedAndClick(WebDriver driver, String travelAgentAtatched,
			boolean isClick) throws Exception {
		ArrayList<String> test_steps = new ArrayList<String>();

		Elements_CPReservation res = new Elements_CPReservation(driver);
		WebElement attachedTravelAgent = driver.findElement(By.xpath("//a[contains(@data-bind,'text:travelAgent')]"));
		Utility.ScrollToElement(attachedTravelAgent, driver);
		String foundTravelAgent = attachedTravelAgent.getText();
		assertEquals(foundTravelAgent, travelAgentAtatched, "Failed:Travel Agent Attached Mismatched");
		reslogger.info("Travel Agent Attached: " + foundTravelAgent + " :Verified");
		test_steps.add("Travel Agent Attached: " + foundTravelAgent + " :Verified");
		assertEquals(attachedTravelAgent.getTagName(), "a", "Failed:Travel Agent Attached Not Clickable");
		reslogger.info(
				"Travel Agent Attached is Clickable: Have Tag: " + attachedTravelAgent.getTagName() + " :Verified");
		test_steps.add(
				"Travel Agent Attached is Clickable:  Have Tag:" + attachedTravelAgent.getTagName() + " :Verified");
		if (isClick) {
			attachedTravelAgent.click();
			reslogger.info("Travel Agent Attached Clicked");
			test_steps.add("Travel Agent Attached Clicked");
		}
		return test_steps;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: verifyContactInformation ' Description: Verifies Contacts
	 * Information if Account is Attached To Reservation . ' Input parameters:
	 * (driver,String, String,String,String,String,String ) ' Return value: String<>
	 * ' Created By: Aqsa ' Created On: <06/23/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> verifyContactInformation(WebDriver driver, String Salutation, String FirstName,
			String LastName, String Email, String Phone, String AlternativePhone) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		assertEquals(FirstName, cpelements.CP_NewReservation_ContactFirstName.getAttribute("value"));
		reslogger.info("Contact Info FirstName: " + FirstName + " :Verified");
		test_steps.add("Contact Info FirstName: " + FirstName + " :Verified");

		assertEquals(LastName, cpelements.CP_NewReservation_ContactLastName.getAttribute("value"));
		reslogger.info("Contact Info LastName: " + LastName + " :Verified");
		test_steps.add("Contact Info LastName: " + LastName + " :Verified");

		assertEquals(Email, cpelements.CP_NewReservation_Email.getAttribute("value"));
		reslogger.info("Contact Info Email: " + Email + " :Verified");
		test_steps.add("Contact Info Email: " + Email + " :Verified");

		assertEquals(Phone, cpelements.CP_NewReservation_Phone.getAttribute("value").replaceAll("-", "")
				.replaceAll(" ", "").replaceAll("\\)", "").replaceAll("\\(", ""));
		reslogger.info("Contact Info PhoneNumber: " + Phone + " :Verified");
		test_steps.add("Contact Info PhoneNumber: " + Phone + " :Verified");

		assertEquals(AlternativePhone, cpelements.CP_NewReservation_AltenativePhone.getAttribute("value")
				.replaceAll("-", "").replaceAll(" ", "").replaceAll("\\)", "").replaceAll("\\(", ""));
		reslogger.info("Contact Info AlternativePhon: " + AlternativePhone + " :Verified");
		test_steps.add("Contact Info AlternativePhon: " + AlternativePhone + " :Verified");

		return test_steps;

	}

	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 *
	 * ' Method Name: verifyMailingInformation ' Description: Verifies Mailing
	 * Information if Account is Attached To Reservation . ' Input parameters:
	 * (driver,String, String,String,String,String,String ) ' Return value: String<>
	 * ' Created By: Aqsa ' Created On: <06/23/2020>
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	public ArrayList<String> verifyMailingInformation(WebDriver driver, String Address1, String Address2,
			String Address3, String City, String Country, String State, String PostalCode) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.CP_NewReservation_Address1, driver);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Address1), driver);
		Wait.wait5Second();
		System.out.println(cpelements.CP_NewReservation_Address1.getAttribute("value"));
		assertEquals(Address1.trim(), cpelements.CP_NewReservation_Address1.getAttribute("value").toString());

		reslogger.info("Mailing Info Address1: " + Address1 + " :Verified");
		test_steps.add("Mailing Info Address1: " + Address1 + " :Verified");
		assertEquals(Address2, cpelements.CP_NewReservation_Address2.getAttribute("value"));
		reslogger.info("Mailing Info Address2: " + Address2 + " :Verified");
		test_steps.add("Mailing Info Address2: " + Address2 + " :Verified");
		assertEquals(Address3, cpelements.CP_NewReservation_Address3.getAttribute("value"));
		reslogger.info("Mailing Info Address3: " + Address3 + " :Verified");
		test_steps.add("Mailing Info Address3: " + Address3 + " :Verified");
		assertEquals(City, cpelements.CP_NewReservation_City.getAttribute("value"));
		reslogger.info("Mailing Info City: " + City + " :Verified");
		test_steps.add("Mailing Info City: " + City + " :Verified");
		assertEquals(Country, cpelements.CP_NewReservation_COUNTRY.getText());
		reslogger.info("Mailing Info Country: " + Country + " :Verified");
		test_steps.add("Mailing Info Country: " + Country + " :Verified");
		assertEquals(State, cpelements.CP_NewReservation_STATE.getText());
		reslogger.info("Mailing Info State: " + State + " :Verified");
		test_steps.add("Mailing Info State: " + State + " :Verified");
		assertEquals(PostalCode, cpelements.CP_NewReservation_POSTALCODE.getAttribute("value"));
		reslogger.info("Mailing Info PostalCode: " + PostalCode + " :Verified");
		test_steps.add("Mailing Info PostalCode: " + PostalCode + " :Verified");

		return test_steps;

	}

	public String getCheckInPolicyName(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(
				By.xpath(OR_Reservation.CP_Reservation_POLICIESANDDISCLAIMERS_CheckINPolicyCollapse), driver);
		Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyCollapse, driver);
		res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyCollapse.click();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.checkInPolicyName), driver);
		Utility.ScrollToElement(res.checkInPolicyName, driver);
		return res.checkInPolicyName.getText();
	}

	public List<String>[] getAllDetailsOfAvailableRoomDetailsAgainstRatePlan(WebDriver driver, String ratePlan)
			throws InterruptedException {
		List<String>[] allTheList = new List[4];
		ArrayList<String> allRoomClassName = new ArrayList<String>();
		ArrayList<String> allRoomRates = new ArrayList<String>();
		ArrayList<String> allRoomDescription = new ArrayList<String>();
		ArrayList<String> errorMessage = new ArrayList<String>();
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Rateplan);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Rateplan), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_Rateplan), driver);
		// Selecting Rate Plan
		element.CP_NewReservation_Rateplan.click();
		String rate = "//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[contains(text(),'"
				+ ratePlan + "')]/..";
		reslogger.info(rate);
		Wait.WaitForElement(driver, rate);
		driver.findElement(By.xpath(rate)).click();
		test_steps.add("Selecting the rateplan : " + ratePlan);
		reslogger.info("Selecting the rateplan : " + ratePlan);
		// Click on Find Room
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_FindRooms);
		element.CP_NewReservation_FindRooms.click();
		test_steps.add("Clicking on FindRooms");
		reslogger.info("Clicking on FindRooms");

		// geting details of All Available Room Classes against Rate Plans
		int size = 0;

		size = element.getAllRoomClassName.size();

		if (size == 0) {

			String error = element.getErrorMessage.get(size).getText();
			errorMessage.add(error);
			reslogger.info("Error Messeage is = " + error);
		} else {

			for (int i = 0; i < size; i++) {

				Utility.ScrollToElement(element.getAllRoomClassName.get(i), driver);
				String roomName = element.getAllRoomClassName.get(i).getText();
				allRoomClassName.add(roomName);
				reslogger.info("Room Class Name " + i + " = " + roomName);

				Utility.ScrollToElement(element.getAllRoomClassDescription.get(i), driver);
				String roomRates = element.getAllRoomrates.get(i).getText();
				allRoomRates.add(roomRates);
				reslogger.info("Room Rate Name " + i + " = " + roomRates);

				Utility.ScrollToElement(element.getAllRoomrates.get(i), driver);
				String roomDescription = element.getAllRoomClassDescription.get(i).getText();
				allRoomDescription.add(roomDescription);
				reslogger.info("Room Class Name Description " + i + " = " + roomDescription);

			}
		}
		// add all arrayList in to list of list Array
		allTheList[0] = allRoomClassName;

		allTheList[1] = allRoomRates;

		allTheList[2] = allRoomDescription;

		allTheList[3] = errorMessage;

		return allTheList;
	}

	public HashMap<String, String> getRatesOfAvailableRoomAgainstRatePlan(WebDriver driver, String ratePlan)
			throws InterruptedException {
		HashMap<String, String> ratesAgainstRoomClasses = new HashMap<String, String>();
		ArrayList<String> errorMessage = new ArrayList<String>();
		Elements_CPReservation element = new Elements_CPReservation(driver);

		// geting details of All Available Room Classes against Rate Plans
		int size = 0;

		size = element.getAllRoomClassName.size();

		if (size == 0) {

			String error = element.getErrorMessage.get(size).getText();
			errorMessage.add(error);
			reslogger.info("Error Messeage is = " + error);
		} else {

			for (int i = 0; i < size; i++) {

				Utility.ScrollToElement(element.getAllRoomClassName.get(i), driver);
				String roomName = element.getAllRoomClassName.get(i).getText();
				Utility.ScrollToElement(element.getAllRoomrates.get(i), driver);
				String roomRates = Utility.convertDollarToNormalAmount(driver,
						element.getAllRoomrates.get(i).getText());
				roomRates = roomRates.split("\\.")[0];
				reslogger.info("Room Class Name " + i + " = " + roomName);
				ratesAgainstRoomClasses.put(roomName, roomRates);
				reslogger.info("Room Rate Name " + i + " = " + roomRates);

			}
		}
		// return HasTable of Rates
		System.out.print(" Hash of Rates:" + ratesAgainstRoomClasses);

		return ratesAgainstRoomClasses;
	}

	public ArrayList<String> verifyRateUpdate(WebDriver driver, int numberofDays, String rateFound, String nightlyRate,
			String updateRatesType, String rateChangeValue, String rateCurrencyType,
			ArrayList<String> beforeUpdateRateValues) {
		ArrayList<String> testSteps = new ArrayList<String>();
		int rateExpected = 0;
		for (int i = 0; i < numberofDays; i++) {
			if (rateFound.contains("\\.")) {
				rateFound = rateFound.split("\\.")[0];
			}
			reslogger.info("Nighlty Rate Plan Found In Reservation Find Rooms:" + rateFound);
			testSteps.add("Nighlty Rate Plan Found In Reservation Find Rooms:" + rateFound);

			if (updateRatesType.equalsIgnoreCase("EnterNewRate")) {
				reslogger.info("Nighlty Rate Plan Expected In Reservation Find Rooms:" + nightlyRate);
				testSteps.add("Nighlty Rate Plan Expected In Reservation Find Rooms:" + nightlyRate);

				assertEquals(rateFound, nightlyRate, "Failed: RatePlan didn't Updated");
			}
			// Increase/Decrease Verification

			else if (updateRatesType.equalsIgnoreCase("Increase")) {

				if (rateCurrencyType.equals(Utility.clientCurrency)) {
					// Parse and the add the rateChangeValue
					rateExpected = Integer.parseInt(beforeUpdateRateValues.get(i)) + Integer.parseInt(rateChangeValue);
					reslogger.info("Nighlty Rate Plan Expected In Reservation Find Rooms:" + rateExpected);
					testSteps.add(
							"Nighlty Rate Plan Expected In Reservation Find Rooms:" + beforeUpdateRateValues.get(i));
					// Need to remove dollar sign here
					assertEquals(rateFound.equals(Integer.toString(rateExpected)), true,
							"Failed: Nightly Rate didn't update");
				}
				// Increase is in Percentage
				else {

					// Parse and the add the rateChangeValue
					double percentageIncrease = (Integer.parseInt(beforeUpdateRateValues.get(i))
							* Integer.parseInt(rateChangeValue)) / 100;
					percentageIncrease = Math.ceil(percentageIncrease);
					rateExpected = Integer.parseInt(beforeUpdateRateValues.get(i)) + ((int) percentageIncrease);
					reslogger.info("Nighlty Rate Plan Expected In Reservation Find Rooms:" + rateExpected);
					testSteps.add("Nighlty Rate Plan Expected In Reservation Find Rooms:" + rateExpected);
					assertEquals(rateFound.equals(Integer.toString(rateExpected)), true,
							"Failed: Nightly Rate didn't update");

				}
			}

			else if (updateRatesType.equalsIgnoreCase("Decrease")) {

				if (rateCurrencyType.equals(Utility.clientCurrency)) {

					// Parse and the subtract the
					// rateChangeValue

					rateExpected = Integer.parseInt(beforeUpdateRateValues.get(i)) - Integer.parseInt(rateChangeValue);

					reslogger.info("Nighlty Rate Plan Expected In Reservation Find Rooms:" + rateExpected);
					testSteps.add(
							"Nighlty Rate Plan Expected In Reservation Find Rooms:" + beforeUpdateRateValues.get(i));
					// Need to remove dollar sign here
					assertEquals(rateFound.equals(Integer.toString(rateExpected)), true,
							"Failed: Nightly Rate didn't update");
				}

				// Decrease is in Percentage
				else {

					// Parse and the subtract the
					// rateChangeValue
					double percentageDecrease = (Integer.parseInt(beforeUpdateRateValues.get(i))
							* Integer.parseInt(rateChangeValue)) / 100;
					percentageDecrease = Math.ceil(percentageDecrease);
					rateExpected = Integer.parseInt(beforeUpdateRateValues.get(i)) - (int) percentageDecrease;
					reslogger.info("Nighlty Rate Plan Expected In Reservation Find Rooms:" + rateExpected);
					testSteps.add("Nighlty Rate Plan Expected In Reservation Find Rooms:" + rateExpected);

					assertEquals(rateFound.equals(Integer.toString(rateExpected)), true,
							"Failed: Nightly Rate didn't update");

				}

			}

			else {

				reslogger.info("Nighlty Rate Plan Expected In Reservation Find Rooms:" + beforeUpdateRateValues.get(i));
				testSteps.add("Nighlty Rate Plan Expected In Reservation Find Rooms:" + beforeUpdateRateValues.get(i));
				// Need to remove dollar sign here
				assertEquals(rateFound.equals(beforeUpdateRateValues.get(i)), true,
						"Failed: Nightly Rate didn't update");

			}
		}
		reslogger.info("Verified");
		testSteps.add("Verified");

		return testSteps;

	}

	public String getRoomClassName(WebDriver driver) {
		String roomClass = "";
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GET_ALL_ROOM_CLASS_NAME);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GET_ALL_ROOM_CLASS_NAME), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GET_ALL_ROOM_CLASS_NAME), driver);
		roomClass = element.getRoomClassName.getText();

		return roomClass;
	}

	public String getRoomClassRateWithCurrency(WebDriver driver) {
		String roomClassRate = "";
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GET_RATE_ROOM_CLASS_WITH_CURENCY);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GET_RATE_ROOM_CLASS_WITH_CURENCY), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GET_RATE_ROOM_CLASS_WITH_CURENCY), driver);
		roomClassRate = element.getRateRoomClassWithCurrency.getText();

		return roomClassRate;
	}

	public void clickYesInPolicyPopUp(WebDriver driver) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		boolean isExist = Utility.isElementPresent(driver, By.xpath(OR_Reservation.YES_POLICY_POPUP));
		if (isExist) {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.YES_POLICY_POPUP), driver);
			try {
				element.yesPolicyPopUp.click();
			} catch (Exception e) {
				JavascriptExecutor js = (JavascriptExecutor) driver;
				js.executeScript("arguments[0].click()", element.yesPolicyPopUp);
			}
		}
	}

	// Added By Adhnan 7/17/2020
	public ArrayList<String> verifyRoomNumberAvailable(WebDriver driver, ArrayList<String> test_steps, String RoomClass,
			String roomNumber, boolean exist) throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//div[2]//span";

		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div/button";
		Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
		Wait.waitForElementToBeClickable(By.xpath(expand), driver);
		WebElement elementExpand = driver.findElement(By.xpath(expand));
		Utility.ScrollToElement_NoWait(elementExpand, driver);
		elementExpand.click();

		String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
		reslogger.info(roomnum);
		List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));

		boolean found = false;
		for (int i = 0; i < getRoomNumber.size(); i++) {
			String tempRN = getRoomNumber.get(i).getText();
			// test_steps.add("Room Number Options : " + tempRN);
			reslogger.info("Room Number Options : " + tempRN);
			if (tempRN.equals(roomNumber)) {
				found = true;
			}
		}
		assertEquals(found, exist, "Failed: room Number existance missmatched");
		return test_steps;
	}

	public ArrayList<String> enterCheckInDate(WebDriver driver, String date) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckInInput);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CheckInInput), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CheckInInput), driver);
		Utility.ScrollToElement(res.CheckInInput, driver);
		res.CheckInInput.clear();
		res.CheckInInput.sendKeys(date);
		testSteps.add("Entered checkin date : " + date);
		reslogger.info("Entered checkin date : " + date);

		return testSteps;
	}

	public void cancelReservation(WebDriver driver, ArrayList test_steps, String CancelReason)
			throws InterruptedException {
		String dropDown = "//i[contains(@data-bind,'ReservationUpdate')]";
		Wait.WaitForElement(driver, dropDown);
		driver.findElement(By.xpath(dropDown)).click();
		Wait.wait2Second();
		String cancel = "(//li//span[text()='Cancel'])[2]";
		Wait.WaitForElement(driver, cancel);
		driver.findElement(By.xpath(cancel)).click();
		reslogger.info("Clicking on cancel");
		test_steps.add("Clicking on cancel");

		String reason = "//label[text()='ADD CANCELLATION REASON']/following-sibling::textarea";
		Wait.WaitForElement(driver, reason);
		driver.findElement(By.xpath(reason)).sendKeys(CancelReason);

		String confirm = "//button[contains(text(),'CONFIRM CANCELLATION ')]";
		Wait.WaitForElement(driver, confirm);
		driver.findElement(By.xpath(confirm)).click();
		reslogger.info("Clicking on confirm");
		test_steps.add("Clicking on confirm");

		String rollback = "//button[contains(text(),'Roll Back')]";
		Wait.WaitForElement(driver, rollback);
	}

	public void changeReservationDates(WebDriver driver, ArrayList test_steps, String checkinDate, String checkoutDate,
			String roomClass) throws InterruptedException {
		String edit = "//button[contains(@data-bind,'ReservationUpdate')]/i";
		Wait.WaitForElement(driver, edit);
		driver.findElement(By.xpath(edit)).click();
		reslogger.info("Clicking on edit");
		test_steps.add("Clicking on edit");

		String changeStayDetails = "//li[text()='Change Stay Details']";
		Wait.WaitForElement(driver, changeStayDetails);
		driver.findElement(By.xpath(changeStayDetails)).click();
		reslogger.info("Clicking on changeStayDetails");
		test_steps.add("Clicking on changeStayDetails");

		select_CheckInDate(driver, test_steps, checkinDate);
		select_CheckoutDate(driver, test_steps, checkoutDate);

		clickOnFindRooms(driver, test_steps);
		select_RoomWhileChnageDates(driver, test_steps, roomClass, "Yes", "");

		String save = "//button[text()='Save']";
		Wait.WaitForElement(driver, save);
		driver.findElement(By.xpath(save)).click();
		reslogger.info("Clicking on save");
		test_steps.add("Clicking on save");

		String yes = "//div[contains(text(),'Are you sure you wish to change the total cost of the stay from')]/..//button[text()='Yes']";
		Wait.WaitForElement(driver, yes);
		driver.findElement(By.xpath(yes)).click();
	}

	public void select_RoomWhileChnageDates(WebDriver driver, ArrayList test_steps, String RoomClass, String IsAssign,
			String Account) throws InterruptedException {

		reslogger.info(RoomClass);
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";
		reslogger.info(room);
		Wait.WaitForElement(driver, room);

		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/following-sibling::span";
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "((//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')])[2]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				reslogger.info(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				Random random = new Random();
				int randomNumber = random.nextInt(count1 - 1) + 1;
				reslogger.info("count : " + count1);
				reslogger.info("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			}

			try {

				String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
				String getRate = getRateName(driver);
				reslogger.info("getRate : " + getRate);
				if (getRate.equalsIgnoreCase(RoomClass)) {
					select = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ RoomClass + "')])[2]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
				}
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();
				reslogger.info("Click selected in try");

			} catch (Exception e) {
				String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div//span[contains(@data-bind,'SELECT')]";
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();
				reslogger.info("Click selected in catch");

			}

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}
			try {
				String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
				Wait.WaitForElement(driver, policy);
				driver.findElement(By.xpath(policy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");

				loading = "(//div[@class='ir-loader-in'])[2]";
				counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
			} catch (Exception e) {
				// TODO: handle exception
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
	}

	public void clickBookQuote(WebDriver driver, ArrayList test_steps) {
		String book = "//button[text()='Book']";
		Wait.explicit_wait_xpath(book, driver);
		Wait.WaitForElement(driver, book);
		Utility.customAssert(driver.findElement(By.xpath(book)).isDisplayed() + "", "true", true,
				"Successfully Verified BOOK Button Visible", "Failed to Verified BOOK Button Visible", true,
				test_steps);
		driver.findElement(By.xpath(book)).click();
		reslogger.info("Clicking on book");
		test_steps.add("Clicking on book");

		String confirm = "//button[contains(text(),'CONFIRM BOOKING')]";
		Wait.WaitForElement(driver, confirm);
		driver.findElement(By.xpath(confirm)).click();
		reslogger.info("Clicking on confirm");
		test_steps.add("Clicking on confirm");

		String close = "(//button[contains(text(),'CLOSE')])[2]";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		reslogger.info("Clicking on close");
		test_steps.add("Clicking on close");
	}

	public void verifyStayInfoDetailsForBERes(WebDriver driver, ArrayList test_steps, String CheckInDate,
			String CheckOutDate, String Adults, String Children, String RoomClass, String RoomCharges,
			ArrayList roomCost, String IsAssign, String RatePlan, String Nights) throws Exception {
		test_steps.add("******************* MRB Stay info fields verification **********************");
		reslogger.info("******************* MRB Stay info fields verification **********************");

		for (int i = 0; i < 2; i++) {

			String checkInDay = "//div[contains(text(),'Stay')]/..//div[@class='checkin']/span[text()='" + CheckInDate
					+ "']";
			if (driver.findElement(By.xpath(checkInDay)).isDisplayed()) {
				test_steps.add("Reservation Stay Info checkin date verified : " + CheckInDate);
				reslogger.info("Reservation Stay Info checkin date verified : " + CheckInDate);
			} else {
				test_steps.add("Reservation Stay Info checkin date not found : " + CheckInDate);
				reslogger.info("Reservation Stay Info checkin date not found : " + CheckInDate);
			}

			String checkoutDay = "//div[contains(text(),'Stay')]/..//div[@class='checkout']/span[text()='"
					+ CheckOutDate + "']";
			if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
				test_steps.add("Reservation Stay Info checkout date verified : " + CheckOutDate);
				reslogger.info("Reservation Stay Info checkout date verified : " + CheckOutDate);
			} else {
				test_steps.add("Reservation Stay Info checkout date not found : " + CheckOutDate);
				reslogger.info("Reservation Stay Info checkout date not found : " + CheckOutDate);
			}

			String nights = "//div[contains(text(),'Stay')]/..//div[@class='noofnights']/span[text()='" + Nights
					+ "N']";
			if (driver.findElement(By.xpath(checkoutDay)).isDisplayed()) {
				test_steps.add("Reservation Stay Info Nights verified : " + Nights + "N");
				reslogger.info("Reservation Stay Info Nights verified : " + Nights + "N");
			} else {
				test_steps.add("Reservation Stay Info Nights not found : " + Nights + "N");
				reslogger.info("Reservation Stay Info Nights not found : " + Nights + "N");
			}

			String adults = "(//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'numberOfAdults')])["
					+ (i + 1) + "]";
			adults = driver.findElement(By.xpath(adults)).getText().trim();
			if (adults.equalsIgnoreCase(adults.trim())) {
				test_steps.add("Reservation Stay Info Adults verified : " + adults);
				reslogger.info("Reservation Stay Info Adults verified : " + adults);
			} else {
				test_steps.add("Reservation Stay Info Adults not found : " + adults);
				reslogger.info("Reservation Stay Info Adults not found : " + adults);
			}

			String children = "(//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'numberOfChildren')])["
					+ (i + 1) + "]";
			children = driver.findElement(By.xpath(children)).getText().trim();
			if (children.equalsIgnoreCase(children.trim())) {
				test_steps.add("Reservation Stay Info Children verified : " + children);
				reslogger.info("Reservation Stay Info Children verified : " + children);
			} else {
				test_steps.add("Reservation Stay Info Children not found : " + children);
				reslogger.info("Reservation Stay Info Children not found : " + children);
			}

			String roomClass = "(//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'roomClassName')])["
					+ (i + 1) + "]";
			roomClass = driver.findElement(By.xpath(roomClass)).getText().trim();
			if (roomClass.contains(RoomClass.trim())) {
				test_steps.add("Reservation Stay Info RoomClass verified : " + RoomClass);
				reslogger.info("Reservation Stay Info RoomClass verified : " + RoomClass);
			} else {
				test_steps.add("Reservation Stay Info RoomClass not found : " + RoomClass);
				reslogger.info("Reservation Stay Info RoomClass not found : " + RoomClass);
			}

			String roomCharge = "(//div[contains(text(),'Stay')]/..//div//span[contains(@data-bind,'roomClassName')])["
					+ (i + 1) + "]/following-sibling::span";
			roomCharge = driver.findElement(By.xpath(roomCharge)).getText().trim();
			roomCharge = roomCharge.trim();
			roomCharge = roomCharge.substring(1, roomCharge.length());
			roomCharge = roomCharge.trim();
			if (roomCharge.equalsIgnoreCase(roomCost.get(i).toString().trim())) {
				test_steps.add(
						"Reservation Stay Info RoomCharges verified for line item : " + (i + 1) + " " + roomCharge);
				reslogger.info(
						"Reservation Stay Info RoomCharges verified for line item : " + (i + 1) + " " + roomCharge);
			} else {
				test_steps.add(
						"Reservation Stay Info RoomCharges not found for line item : " + (i + 1) + " " + roomCharge);
				reslogger.info(
						"Reservation Stay Info RoomCharges not found for line item : " + (i + 1) + " " + roomCharge);
			}

			String rateplan = "(//div[contains(text(),'Stay')]/..//div//span[contains(text(),'RATE PLAN:')])[" + (i + 1)
					+ "]/following-sibling::span";
			rateplan = driver.findElement(By.xpath(rateplan)).getText().trim();
			if (rateplan.equalsIgnoreCase(RatePlan)) {
				test_steps.add("Reservation Stay Info rateplan verified for line item : " + (i + 1) + " " + rateplan);
				reslogger.info("Reservation Stay Info rateplan verified for line item : " + (i + 1) + " " + rateplan);
			} else {
				test_steps.add("Reservation Stay Info rateplan not found for line item : " + (i + 1) + " " + rateplan);
				reslogger.info("Reservation Stay Info rateplan not found for line item : " + (i + 1) + " " + rateplan);
			}

		}
	}

	public void verify_Refferal(WebDriver driver, ArrayList test_step, String Refferal) {
		if (Refferal.equalsIgnoreCase("GDS")) {
			test_steps.add("Reservation Refferal verified : " + Refferal);
			reslogger.info("Reservation Refferal verified : " + Refferal);
		} else {
			test_steps.add("Reservation Refferal not verified : " + Refferal);
			reslogger.info("Reservation Refferal not verified : " + Refferal);
		}
	}

	public String get_RatePlan(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_RatePlan);
		String ratePlan = res.CP_Reservation_RatePlan.getText();
		test_steps.add("Getting the reservation Rate Plan  : " + ratePlan);
		reslogger.info("Getting the reservation Rate Plan  : " + ratePlan);

		return ratePlan;
	}

	public String get_RatePlanMRB(WebDriver driver, int indexOfRatePlan, ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_RatePlan);
		String ratePlan = res.cpResRatePlanListMRB.get(indexOfRatePlan).getText();
		test_steps.add("Getting the reservation Rate Plan  : " + ratePlan);
		reslogger.info("Getting the reservation Rate Plan  : " + ratePlan);

		return ratePlan;
	}

	public ArrayList<String> verifyPhoneNoBanner(WebDriver driver, String phoneNo) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();

		Wait.explicit_wait_visibilityof_webelement_120(res.HeaderPhoneNo_AfterReservation, driver);
		String foundNo = res.HeaderPhoneNo_AfterReservation.getText();
		foundNo = foundNo.replace("-", "").trim();
		foundNo = foundNo.replace("(", "");
		foundNo = foundNo.replace(")", "");
		assertEquals(foundNo, phoneNo, "Failed to verify Phone No");
		test_steps.add("Successfully Verified Phone No : " + foundNo);

		reslogger.info("Successfully Verified Phone No : " + foundNo);

		return test_steps;

	}

	public String get_AttachedAccountNameHeader(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.HeaderAccountName_AfterReservation);
		String account = res.HeaderAccountName_AfterReservation.getText();
		test_steps.add("Associated Account Name Header : " + account);
		reslogger.info("Associated Account Name Header  : " + account);

		return account;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * Method Name: selectRoomWithoutRuleHandling ' Description: This method will
	 * select room without handing rules broken popup in new reservation creation '
	 * Input parameters: WebDriver driver,String RoomClass, String IsAssign, String
	 * Account Return value: ArrayList<String> ' Created By: Farhan Ghaffar '
	 * Created On: 07-24-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public ArrayList<String> selectRoomInStayInfoSection(WebDriver driver, String RoomClass, String IsAssign)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//div[2]//span";
		Utility.app_logs.info("IsAssign: " + IsAssign);
		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]//..//..//..//following-sibling::div//div//select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"

					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);

			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			testSteps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				testSteps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else if (IsAssign.equalsIgnoreCase("Yes")) {

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div/button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				Wait.waitForElementToBeClickable(By.xpath(expand), driver);
				WebElement elementExpand = driver.findElement(By.xpath(expand));
				Utility.ScrollToElement_NoWait(elementExpand, driver);
				elementExpand.click();

				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
				reslogger.info(roomnum);
				Wait.WaitForElement(driver, roomnum);
				List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
				Wait.wait2Second();
				Utility.app_logs.info(getRoomNumber.size());
				String getMinimumNumber = getRoomNumber.get(1).getText();
				Utility.app_logs.info("getMinimumNumber: " + getMinimumNumber);

				String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
				Utility.app_logs.info("getMaxmumNumber: " + getMaxmumNumber);
				getMaxmumNumber = getMaxmumNumber.trim();
				int maxNumber = Integer.parseInt(getMaxmumNumber);
				int minNumber = Integer.parseInt(getMinimumNumber);

				Utility.app_logs.info("maxNumber : " + maxNumber);
				Utility.app_logs.info("maxNumber : " + maxNumber);

				Random random = new Random();
				int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
				IsAssign = String.valueOf(randomNumber);
				boolean isBreak = false;
				for (int j = 0; j < 5; j++) {
					Utility.app_logs.info("randomNumber: " + randomNumber);
					for (int i = 1; i < getRoomNumber.size(); i++) {
						// Utility.app_logs.info("in loop " + i);
						String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
						getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
						if (getRoomNumberFromOptions.equals(IsAssign)) {
							isBreak = true;
							break;
						}

					}
					if (isBreak == false) {
						random = new Random();
						randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
						IsAssign = String.valueOf(randomNumber);
					}
					if (isBreak) {
						break;
					}

				}
				System.out.print(" Random Number is :" + randomNumber);

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				testSteps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");

			} else {

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				Wait.waitForElementToBeClickable(By.xpath(expand), driver);
				WebElement elementExpand = driver.findElement(By.xpath(expand));
				Utility.ScrollToElement_NoWait(elementExpand, driver);
				elementExpand.click();

				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
				Utility.app_logs.info(roomnum);
				List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
				Utility.app_logs.info(getRoomNumber.size());
				String getMinimumNumber = getRoomNumber.get(1).getText();
				Utility.app_logs.info("getMinimumNumber: " + getMinimumNumber);

				String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
				Utility.app_logs.info("getMaxmumNumber: " + getMaxmumNumber);
				getMaxmumNumber = getMaxmumNumber.trim();
				int maxNumber = Integer.parseInt(getMaxmumNumber);
				int minNumber = Integer.parseInt(getMinimumNumber);

				Utility.app_logs.info("maxNumber : " + maxNumber);
				Utility.app_logs.info("maxNumber : " + maxNumber);

				Random random = new Random();
				int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
				IsAssign = String.valueOf(randomNumber);
				boolean isBreak = false;
				for (int j = 0; j < 5; j++) {
					Utility.app_logs.info("randomNumber: " + randomNumber);
					for (int i = 1; i < getRoomNumber.size(); i++) {
						Utility.app_logs.info("in loop " + i);
						String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
						getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
						if (getRoomNumberFromOptions.equals(IsAssign)) {
							isBreak = true;
							break;
						}

					}
					if (isBreak == false) {
						random = new Random();
						randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
						IsAssign = String.valueOf(randomNumber);
					}
					if (isBreak) {
						break;
					}

				}
				System.out.print(" Random Number is :" + randomNumber);

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				testSteps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
			}
			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass
					+ "')]//..//..//..//following-sibling::div//span[contains(@data-bind,'text: ( isSelected()')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}

			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
		} else {
			testSteps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");

		}

		return testSteps;
	}

	/*
	 * public ArrayList<String> editMRBReservationChangeStayDetails(WebDriver
	 * driver, int index, int changeStayDetailIndex) throws InterruptedException {
	 * ArrayList<String> testSteps = new ArrayList<>();
	 * 
	 * String editIconPath =
	 * "(//button[text()='Check In']//following-sibling::button)[" + index + "]";
	 * WebElement editIcon = driver.findElement(By.xpath(editIconPath));
	 * Wait.WaitForElement(driver, editIconPath);
	 * Wait.waitForElementToBeVisibile(By.xpath(editIconPath), driver);
	 * Wait.waitForElementToBeClickable(By.xpath(editIconPath), driver);
	 * Utility.ScrollToElement(editIcon, driver); editIcon.click();
	 * testSteps.add("click edit icon"); reslogger.info("click edit icon");
	 * 
	 * // use 2 for first and 3 for second String changeStayDetailsPath =
	 * "(//li[text()='Assign  room Number']//following-sibling::li[text()='Change Stay Details'])["
	 * + changeStayDetailIndex + "]"; WebElement changeStayDetails =
	 * driver.findElement(By.xpath(changeStayDetailsPath));
	 * Wait.WaitForElement(driver, changeStayDetailsPath);
	 * Wait.waitForElementToBeVisibile(By.xpath(changeStayDetailsPath), driver);
	 * Wait.waitForElementToBeClickable(By.xpath(changeStayDetailsPath), driver);
	 * Utility.ScrollToElement(changeStayDetails, driver);
	 * changeStayDetails.click(); testSteps.add("click change stay details");
	 * reslogger.info("click change stay details");
	 * 
	 * return testSteps; }
	 */
	public ArrayList<String> clickSaveAfterEditStayInfoInMRB(WebDriver driver) throws InterruptedException {
		verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.MrbStayInfoSaveButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.MrbStayInfoSaveButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.MrbStayInfoSaveButton), driver);
		Utility.ScrollToElement(res.MrbStayInfoSaveButton, driver);
		res.MrbStayInfoSaveButton.click();
		testSteps.add("click save");
		reslogger.info("click save");

		try {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.AmountChangeConfirmationPopup), driver);
			Utility.ScrollToElement_NoWait(res.AmountChangeConfirmationPopup, driver);
			res.AmountChangeConfirmationPopup.click();
			testSteps.add("Click yes button of Amount Change popup");
			reslogger.info("Click yes button of Amount Change popup");
		} catch (Exception e) {
			reslogger.info("Amount Change popup didn't display");

		}
		verifySpinerLoading(driver);
		return testSteps;
	}

	public int brokenRulesPopupSize(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();

		List<WebElement> rulesPopupList = driver.findElements(By.xpath(OR_Reservation.RulesPopupHeadingText));
		reslogger.info(rulesPopupList.size());
		return rulesPopupList.size();
	}

	public ArrayList<String> selectRoomNumber(WebDriver driver, String RoomClass, String RoomNumber)
			throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//div[2]//span";

		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();

		test_steps.add("Selected room class : " + RoomClass);
		reslogger.info("Selected room class : " + RoomClass);

		String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div/button";
		Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
		Wait.waitForElementToBeClickable(By.xpath(expand), driver);
		WebElement elementExpand = driver.findElement(By.xpath(expand));
		Utility.ScrollToElement_NoWait(elementExpand, driver);
		elementExpand.click();

		String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ RoomClass
				+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
				+ RoomNumber + "'])";
		Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
		driver.findElement(By.xpath(assignRoomNo)).click();

		String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//..//following-sibling::div//span[contains(text(),'SELECT')]";
		Wait.WaitForElement(driver, select);
		driver.findElement(By.xpath(select)).click();

		String loading = "(//div[@class='ir-loader-in'])[2]";
		int counter = 0;

		return test_steps;

	}

	// Inncenter Reservation Verification

	/*
	 * public String get_Reservationsource(WebDriver driver, ArrayList test_step) {
	 * Elements_CPReservation res = new Elements_CPReservation(driver);
	 * Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Source); String
	 * source = res.CP_Reservation_Source.getText();
	 * test_steps.add("Getting the reservation source : " + source);
	 * reslogger.info("Getting the reservation source : " + source);
	 * 
	 * return source; }
	 * 
	 * public String get_MarketSegemnt(WebDriver driver, ArrayList test_steps) {
	 * 
	 * Elements_CPReservation res = new Elements_CPReservation(driver);
	 * 
	 * Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_MarketSegmant);
	 * String MarketSegmant = res.CP_Reservation_MarketSegmant.getText();
	 * test_steps.add("Getting the reservation MarketSegmant  : " + MarketSegmant);
	 * reslogger.info("Getting the reservation MarketSegmant  : " + MarketSegmant);
	 * 
	 * return MarketSegmant; }
	 */
	public void verify_MarketSegmant(WebDriver driver, ArrayList test_step, String MarketSegmant) {
		if (MarketSegmant.equalsIgnoreCase("GDS")) {
			test_steps.add("Reservation MarketSegmant verified : " + MarketSegmant);
			reslogger.info("Reservation MarketSegmant verified : " + MarketSegmant);
		} else {
			test_steps.add("Reservation MarketSegmant not verified : " + MarketSegmant);
			reslogger.info("Reservation MarketSegmant not verified : " + MarketSegmant);
		}
	}

	public String get_Refferal(WebDriver driver, ArrayList test_steps) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Refferal);
		String Refferal = res.CP_Reservation_Refferal.getText();
		test_steps.add("Getting the reservation Refferal  : " + Refferal);
		reslogger.info("Getting the reservation Refferal  : " + Refferal);

		return Refferal;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * Method Name: selectMRBRoomsAndVerifyRulesPopup ' Description: This method
	 * will select room with handling rules broken popup verification and closing in
	 * new mrb reservation creation ' Input parameters: WebDriver driver,String
	 * RoomClass, String IsAssign, String Account, int days,String
	 * minimumStayValue,String noCheckIn, String noCheckOut, String buttonText
	 * Return value: ArrayList<String> ' Created By: Farhan Ghaffar ' Created On:
	 * 07-24-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public ArrayList<String> selectMRBRoomsAndVerifyRulesPopup(WebDriver driver, String RoomClass, String IsAssign,
			String Account, String isMinimumStayOn, String minimumStayValue, String isNoCheckInChecked,
			String isNoCheckOutChecked, String buttonText) throws InterruptedException {
		ArrayList testSteps = new ArrayList<>();
		String[] roomclass = RoomClass.split("\\|");

		int size = roomclass.length;

		ArrayList al = new ArrayList();
		for (int i = 1; i <= size; i++) {
			String Applypolicy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
			if (driver.findElements(By.xpath(Applypolicy)).size() > 0) {
				Wait.WaitForElement(driver, Applypolicy);
				Wait.wait3Second();
				driver.findElement(By.xpath(Applypolicy)).click();
				testSteps.add("Based on the changes made, new policies are applicable.? : yes");

				reslogger.info("Based on the changes made, new policies are applicable.? : yes");
			}
			Wait.wait5Second();
			String rm = "//span[text()='Room " + i + " of " + size + "']";
			if (driver.findElement(By.xpath(rm)).isDisplayed()) {
				testSteps.add("Room " + i + " of " + size + " is displayed");

				reslogger.info("Room " + i + " of " + size + " is displayed");
			} else {
				String clickOnPopUpYesBut = "(//div[@class='row']//button[contains(text(),'Yes')])[3]";
				driver.findElement(By.xpath(clickOnPopUpYesBut)).click();

			}
			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1].trim() + "')]/following-sibling::span";
			Wait.WaitForElement(driver, rulessize);
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();

			String room = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../div[2]/span)";
			reslogger.info(room);
			Wait.WaitForElement(driver, room);
			Wait.wait2Second();
			String rooms = driver.findElement(By.xpath(room)).getText();
			reslogger.info(rooms);
			String[] roomsCount = rooms.split(" ");
			int count = Integer.parseInt(roomsCount[0].trim());

			String cost = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/span)";

			Utility.ScrollToElement(driver.findElement(By.xpath(room)), driver);

			cost = driver.findElement(By.xpath(cost)).getText();
			cost = cost.trim();
			cost = cost.substring(1, cost.length());
			reslogger.info("cost : " + cost);
			al.add(cost);
			if (count > 0) {
				testSteps.add("Selecting room class : " + roomclass[i - 1]);

				reslogger.info("Selecting room class : " + roomclass[i - 1]);
				String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select";
				WebElement ele = driver.findElement(By.xpath(sel));
				if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
					Wait.WaitForElement(driver, unAssign);
					driver.findElement(By.xpath(unAssign)).click();
					testSteps.add("Selected room number : Unassigned");
					reslogger.info("Selected room number : Unassigned");

				} else {
					String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select/option";
					reslogger.info(roomnum);
					int count1 = driver.findElements(By.xpath(roomnum)).size();
					Random random = new Random();
					randomNumber = random.nextInt(count1 - 1) + 1;
					reslogger.info("count : " + count1);
					reslogger.info("randomNumber : " + randomNumber);
					Wait.WaitForElement(driver, sel);

					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.wait2Second();
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
							+ randomNumber + "]/a/span";
					Wait.WaitForElement(driver, roomNumber);
					driver.findElement(By.xpath(roomNumber)).click();
				}

				String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();

				String loading = "(//div[@class='ir-loader-in'])[2]";
				int counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
				reslogger.info("Waited to loading symbol");

				reslogger.info("Rule Count : " + ruleCount);
				if (ruleCount > 1) {

					String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";
					counter = 0;
					Wait.wait3Second();
					if (driver.findElements(By.xpath(rules)).size() > 0) {
						driver.findElement(By.xpath(rules)).click();
						test_steps.add(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
						reslogger.info(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

						loading = "(//div[@class='ir-loader-in'])[2]";
						counter = 0;
						while (true) {
							if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
								break;
							} else if (counter == 3) {
								break;
							} else {
								counter++;
								Wait.wait3Second();
							}
						}
					}
				}
				if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
					if (i == 1) {
						String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
						if (driver.findElements(By.xpath(policy)).size() > 0) {
							Wait.WaitForElement(driver, policy);
							driver.findElement(By.xpath(policy)).click();
							testSteps.add("Based on the changes made, new policies are applicable.? : yes");

							reslogger.info("Based on the changes made, new policies are applicable.? : yes");

							loading = "(//div[@class='ir-loader-in'])[2]";
							counter = 0;
							while (true) {
								if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
									break;
								} else if (counter == 3) {
									break;
								} else {
									counter++;
									Wait.wait2Second();
								}
							}
						}
					}
				}
			} else {
				testSteps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
				reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
			}
		}
		return al;
	}

	public ArrayList getMRBFolioBalance(WebDriver driver, ArrayList test_steps, ArrayList RoomAbbri, String IsAssign,
			ArrayList Rooms) throws InterruptedException {
		test_steps.add("******************* MRB Folio Creation verification **********************");
		reslogger.info("******************* MRB Folio Creation verification **********************");
		String abb = null;
		String roomnumber = null;

		ArrayList al = new ArrayList<>();
		reslogger.info(RoomAbbri.size());
		for (int i = 0; i < RoomAbbri.size(); i++) {
			abb = RoomAbbri.get(i).toString();
			roomnumber = Rooms.get(i).toString();
			String[] abbrivation = abb.split(":");
			String[] rooomno = roomnumber.split(":");
			roomnumber = roomnumber.toString();
			String folio = null;
			Utility.app_logs.info("rooomnoddd : " + rooomno[i]);
			Utility.app_logs.info("roomnumber : " + roomnumber);
			String folioSize = "//button[contains(@title,'Guest')]";
			Wait.WaitForElement(driver, folioSize);
			driver.findElement(By.xpath(folioSize)).click();
			Wait.wait2Second();

			if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps
							.add("Folio is present : " + "Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]);
					reslogger
							.info("Folio is present : " + "Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]);

					driver.findElement(By.xpath(folio)).click();
					String roomCahrge = "//span[text()='Room Charge']";
					al.add(get_RoomCharge(driver, test_steps));
				}
			} else {
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim()
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps.add(
							"Folio is present : " + "Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim());
					reslogger.info(
							"Folio is present : " + "Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim());

					driver.findElement(By.xpath(folio)).click();
					al.add(get_RoomCharge(driver, test_steps));

				}
			}
		}
		return al;
	}

	public void rollBackAll(WebDriver driver, ArrayList test_steps) {
		String rollBack = "//button[text()='Roll Back All']";
		Wait.WaitForElement(driver, rollBack);
		Wait.waitForElementToBeVisibile(By.xpath(rollBack), driver);
		Wait.waitForElementToBeClickable(By.xpath(rollBack), driver);
		driver.findElement(By.xpath(rollBack)).click();
		reslogger.info("Clicking on rollBackAll");
		test_steps.add("Clicking on rollBackAll");

		String reOpen = "//div[text()='Are you sure you want to re-open this reservation?']/../..//button[text()='Yes']";
		Wait.WaitForElement(driver, reOpen);
		driver.findElement(By.xpath(reOpen)).click();
		reslogger.info("Clicking on Are you sure you want to re-open this reservation? Yes");
		test_steps.add("Clicking on Are you sure you want to re-open this reservation? Yes");
		String checkinAll = "//button[contains(text(),'Check In All')]";
		Wait.WaitForElement(driver, checkinAll);
	}

	public void noShowReservation(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		String dropDown = "//i[contains(@data-bind,'ReservationUpdate')]";
		Wait.WaitForElement(driver, dropDown);
		driver.findElement(By.xpath(dropDown)).click();
		Wait.wait2Second();
		String noShow = "(//ul[contains(@data-bind,'ResStatuses')]/li//span[text()='No Show'])";
		Wait.WaitForElement(driver, noShow);
		driver.findElement(By.xpath(noShow)).click();
		reslogger.info("Clicking on noShow");
		test_steps.add("Clicking on noShow");
		try {
			String confirm = "//button[contains(text(),'CONFIRM NO SHOW')]";
			Wait.wait5Second();
			if (driver.findElement(By.xpath(confirm)).isDisplayed()) {
				Wait.WaitForElement(driver, confirm);
				driver.findElement(By.xpath(confirm)).click();
				reslogger.info("Clicking on confirm");
				test_steps.add("Clicking on confirm");
			} else {
				confirm = "//button[contains(text(),'PROCEED TO NO SHOW PAYMENT')]";
				Wait.WaitForElement(driver, confirm);
				driver.findElement(By.xpath(confirm)).click();
				reslogger.info("Clicking on proceed to payment");
				test_steps.add("Clicking on proceed to payment");
//				String pay = "//h4[text()='No Show Payment']/../../..//button[contains(text(),'Pay')]";
//				Wait.WaitForElement(driver, pay);
//				driver.findElement(By.xpath(pay)).click();
//				reslogger.info("Clicking on pay");
//				test_steps.add("Clicking on pay");
				String pay = "(//h4[text()='No Show Payment']/../..//button[contains(text(),'Pay')])|(//h4[text()='No Show Payment']/../..//a[contains(text(),'Pay')])";
				if (driver.findElements(By.xpath(pay)).size() > 0) {
					for (WebElement ele : driver.findElements(By.xpath(pay))) {
						try {
//						Wait.waitForElementToBeClickable(By.xpath(pay), driver);
							ele.click();
						} catch (Exception e) {
							reslogger.info(e.toString());
							// pay = pay + "/../..//a[contains(text(),'Pay')]";

						}
					}
				}
			}
		} catch (Exception e) {
			String confirm = "//button[contains(text(),'PROCEED TO NO SHOW PAYMENT')]";
			Wait.WaitForElement(driver, confirm);
			driver.findElement(By.xpath(confirm)).click();
			reslogger.info("Clicking on proceed to payment");
			test_steps.add("Clicking on proceed to payment");
			String pay = "//h4[text()='No Show Payment']/../../..//button[contains(text(),'Pay')]";
			Wait.WaitForElement(driver, pay);
			driver.findElement(By.xpath(pay)).click();
			reslogger.info("Clicking on pay");
			test_steps.add("Clicking on pay");
		}
		Wait.waitForCPReservationLoading(driver);
		String close = "";

		close = "//h4[contains(text(),'No Show Successful')]/../..//button[text()='Close' or text()='CLOSE']";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		reslogger.info("Clicking on close");
		test_steps.add("Clicking on close");

		String rollback = "//button[contains(text(),'Roll Back')]";
		Wait.WaitForElement(driver, rollback);
		reslogger.info("Reservation status is No Show");
		test_steps.add("Reservation status is No Show");
	}

	public void rollBack(WebDriver driver, ArrayList test_steps) {
		JavascriptExecutor jse = (JavascriptExecutor) driver;
		String rollBack = "//button[text()='Roll Back']";
		try {
			Wait.WaitForElement(driver, rollBack);
			driver.findElement(By.xpath(rollBack)).click();
		} catch (Exception e) {
			String expand = "//div[@class='ng-statusChnage ir-statusMenu ul']//span";
			Wait.WaitForElement(driver, expand);
			WebElement expandElement = driver.findElement(By.xpath(expand));
			Wait.explicit_wait_elementToBeClickable(expandElement, driver);
			try {
				expandElement.click();
			} catch (Exception e1) {
				JavascriptExecutor executor = (JavascriptExecutor) driver;
				executor.executeScript("arguments[0].click();", expandElement);
			}
			String status = "//div[@class='ng-statusChnage ir-statusMenu ul']//span//ul//span[text()='Rollback']";
			try {
				Wait.WaitForElement(driver, status);
				driver.findElement(By.xpath(status)).click();
			} catch (Exception e1) {
				JavascriptExecutor executor = (JavascriptExecutor) driver;
				executor.executeScript("arguments[0].click();", driver.findElement(By.xpath(status)));
			}
		}

		reslogger.info("Clicking on rollBack");
		test_steps.add("Clicking on rollBack");

		String reOpen = "//*[contains(text(),'Are you sure you want to re-open this reservation?')]/../..//button[text()='Yes']";
		Wait.WaitForElement(driver, reOpen);
		Wait.waitForElementToBeClickable(By.xpath(reOpen), driver);
		driver.findElement(By.xpath(reOpen)).click();
		reslogger.info("Clicking on Are you sure you want to re-open this reservation? Yes");
		test_steps.add("Clicking on Are you sure you want to re-open this reservation? Yes");
	}

	public void SelectAllFolioLineItems(WebDriver driver, ArrayList test_steps) {
		String allLineItems = "//input[contains(@data-bind,'click: selectAllLineItems')]";
		Wait.WaitForElement(driver, allLineItems);
		driver.findElement(By.xpath(allLineItems)).click();
		reslogger.info("Selecting on allLineItems");
		test_steps.add("Selecting on allLineItems");
	}

	public void voidAllFolioLineItems(WebDriver driver, ArrayList test_steps, String voidNotes) {
		String allLineItems = "//input[contains(@data-bind,'click: selectAllLineItems')]";
		Wait.WaitForElement(driver, allLineItems);
		driver.findElement(By.xpath(allLineItems)).click();
		reslogger.info("Selecting on allLineItems");
		test_steps.add("Selecting on allLineItems");

		String voidLineItems = "//button[text()='Void']";
		Wait.WaitForElement(driver, voidLineItems);
		driver.findElement(By.xpath(voidLineItems)).click();
		reslogger.info("Clicking on voidLineItems");
		test_steps.add("Clicking on voidLineItems");

		String notes = "//textarea[contains(@data-bind,'notesPopUpNote')]";
		Wait.WaitForElement(driver, notes);
		driver.findElement(By.xpath(notes)).sendKeys(voidNotes);
		reslogger.info("Enter notes as : " + voidNotes);
		test_steps.add("Enter notes as : " + voidNotes);

		String btnVoid = "//h4[text()='Notes']/../..//button[text()='Void']";
		Wait.WaitForElement(driver, btnVoid);
		driver.findElement(By.xpath(btnVoid)).click();
		reslogger.info("Clicking on void");
		test_steps.add("Clicking on void");

		String save = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.WaitForElement(driver, save);
		driver.findElement(By.xpath(save)).click();
		reslogger.info("Clicking on save");
		test_steps.add("Clicking on save");
	}

	public void SearchWithRes(WebDriver driver, String reservation) throws InterruptedException {
		// String str = null;
		Elements_Reservation_SearchPage resservationSearch = new Elements_Reservation_SearchPage(driver);
		Wait.WaitForElement(driver, OR.Basic_Res_Number);
		resservationSearch.Basic_Res_Number.clear();
		resservationSearch.Basic_Res_Number.sendKeys(reservation);
		resservationSearch.Click_BasicSearch.click();
		Wait.WaitForElement(driver, OR.Get_Res_Number);
	}

	public void deleteReservation(WebDriver driver, ArrayList test_steps) {
		String selectAll = "//input[contains(@data-bind,'SelectAllReservations')]";
		Wait.WaitForElement(driver, selectAll);
		driver.findElement(By.xpath(selectAll)).click();
		reslogger.info("Clicking on selectAll");
		test_steps.add("Clicking on selectAll");

		String drpdw = "//span[text()='Bulk Action']/../..//i";
		Wait.WaitForElement(driver, drpdw);
		driver.findElement(By.xpath(drpdw)).click();

		String delete = "//span[text()='Delete']/..";
		Wait.WaitForElement(driver, delete);
		driver.findElement(By.xpath(delete)).click();
		reslogger.info("Clicking on delete");
		test_steps.add("Clicking on delete");

		String process = "//h4[text()='Bulk Delete']/../..//button[text()='Process']";
		Wait.WaitForElement(driver, process);
		driver.findElement(By.xpath(process)).click();
		reslogger.info("Clicking on process");
		test_steps.add("Clicking on process");

		String close = "//h4[text()='Bulk Delete Completed']/../..//button[text()='Close']";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		reslogger.info("Clicking on close");
		test_steps.add("Clicking on close");
	}

	public void SearchDeletedRes(WebDriver driver, ArrayList test_steps, String reservation)
			throws InterruptedException {
		// String str = null;
		Elements_Reservation_SearchPage resservationSearch = new Elements_Reservation_SearchPage(driver);
		Wait.WaitForElement(driver, OR.Basic_Res_Number);
		resservationSearch.Basic_Res_Number.clear();
		resservationSearch.Basic_Res_Number.sendKeys(reservation);
		resservationSearch.Click_BasicSearch.click();
		reslogger.info("Search reservation : " + reservation);
		test_steps.add("Search reservation : " + reservation);

		String noRecords = "//div[contains(text(),'No records meet your criteria. Please change your criteria and search again.')]";
		Wait.WaitForElement(driver, noRecords);
		reslogger.info("No records meet your criteria. Please change your criteria and search again.");
		test_steps.add("No records meet your criteria. Please change your criteria and search again.");
	}

	public void checkinReservation(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		String checkin = "//button[text()='Check In']";
		Wait.WaitForElement(driver, checkin);
		driver.findElement(By.xpath(checkin)).click();
		reslogger.info("click on check In");
		test_steps.add("click on check In");
//<<<<<<< HEAD
//		
//		String generateGuestRegistration = "//span[contains(@data-bind , 'click: function() {checkInDetail.generateGuestRegistrationReport()')]";
//		Wait.WaitForElement(driver, generateGuestRegistration);
//		driver.findElement(By.xpath(generateGuestRegistration)).click();
//		reslogger.info("click on generate Guest Registration toggle");
//		test_steps.add("click on generate Guest Registration toggle");
//=======
		disableGenerateGuestReportToggle(driver, test_steps);

		String pay = "//h4[text()='Check In Payment']/../..//button[contains(text(),'Pay')]";
		if (driver.findElements(By.xpath(pay)).size() > 0) {
			driver.findElement(By.xpath(pay)).click();
			reslogger.info("click on pay");
			test_steps.add("click on pay");

			String close = "//h4[text()='Check-In Successful']/../..//button[text()='CLOSE']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			reslogger.info("click on close");
			test_steps.add("click on close");
		} else {
			String confirm = "//button[contains(text(),'CONFIRM CHECK IN')]";
			Wait.WaitForElement(driver, confirm);
			driver.findElement(By.xpath(confirm)).click();
			reslogger.info("click on confirm check In");
			test_steps.add("click on confirm check In");
		}

		VerifyDirtyRoom(driver);

//		clickOnPayButtonOnPaymentPopup(driver, test_steps);
//		
//		checkInPaymentSuccessPopupClose_U(driver, test_steps);

		String checkout = "//button[text()='Check Out']";
		Wait.WaitForElement(driver, checkout);
	}

	public void checkoutReservation(WebDriver driver, ArrayList test_steps) {
		String checkout = "(//button[text()='Check Out'])";
		Wait.WaitForElement(driver, checkout);
		driver.findElement(By.xpath(checkout)).click();
		reslogger.info("click on check out");
		test_steps.add("click on check out");
		try {
			generatGuestReportToggle(driver, test_steps, "No");
		} catch (InterruptedException e1) {
			e1.printStackTrace();
		}

		String ProceedToCheckout = "(//h4[text()='Check Out']/../..//button)[2]";
		Wait.WaitForElement(driver, ProceedToCheckout);
		driver.findElement(By.xpath(ProceedToCheckout)).click();
		reslogger.info("click on ProceedToCheckout");
		test_steps.add("click on ProceedToCheckout");

		String pay = "(//h4[text()='Check Out Payment']/../..//button[contains(text(),'Pay')])|(//h4[text()='Check Out Payment']/../..//a[contains(text(),'Pay')])";
		if (driver.findElements(By.xpath(pay)).size() > 0) {
			for (WebElement ele : driver.findElements(By.xpath(pay))) {
				try {
//				Wait.waitForElementToBeClickable(By.xpath(pay), driver);
					ele.click();
				} catch (Exception e) {
					reslogger.info(e.toString());
					// pay = pay + "/../..//a[contains(text(),'Pay')]";

				}
			}
			reslogger.info("click on pay");
			test_steps.add("click on pay");
			String close = "//h4[text()='Check out Successful']/../..//button[text()='CLOSE']";
			Wait.WaitForElement(driver, close);
			driver.findElement(By.xpath(close)).click();
			reslogger.info("click on close");
			test_steps.add("click on close");
		} else {
			String confirm = "(//h4[text()='Check Out']//../..//button)[2]";
			Wait.WaitForElement(driver, confirm);
			driver.findElement(By.xpath(confirm)).click();
			reslogger.info("click on confirm check out");
			test_steps.add("click on confirm check out");
		}
		String rollBack = "//button[text()='Roll Back']";
		Wait.WaitForElement(driver, rollBack);

	}

	public void bulkcancelReservation(WebDriver driver, ArrayList test_steps, String TestReason) {
		String selectAll = "//input[contains(@data-bind,'SelectAllReservations')]";
		Wait.WaitForElement(driver, selectAll);
		driver.findElement(By.xpath(selectAll)).click();
		reslogger.info("Clicking on selectAll");
		test_steps.add("Clicking on selectAll");

		String drpdw = "//span[text()='Bulk Action']/../..//i";
		Wait.WaitForElement(driver, drpdw);
		driver.findElement(By.xpath(drpdw)).click();

		String cancel = "//span[text()='Cancel']/..";
		Wait.WaitForElement(driver, cancel);
		driver.findElement(By.xpath(cancel)).click();
		reslogger.info("Clicking on cancel");
		test_steps.add("Clicking on cancel");

		String reason = "(//h4[text()='Bulk Cancel']/../..//textarea)[2]";
		Wait.WaitForElement(driver, reason);
		driver.findElement(By.xpath(reason)).sendKeys(TestReason);
		reslogger.info("Cancel reason : " + TestReason);
		test_steps.add("Cancel reason : " + TestReason);

		String process = "//h4[text()='Bulk Cancel']/../..//button[text()='Process']";
		Wait.WaitForElement(driver, process);
		driver.findElement(By.xpath(process)).click();
		reslogger.info("Clicking on process");
		test_steps.add("Clicking on process");

		String close = "//h4[text()='Bulk Cancel Completed']/../..//button[text()='Close']";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		reslogger.info("Clicking on close");
		test_steps.add("Clicking on close");
	}

	public void bulkNoShowReservation(WebDriver driver, ArrayList test_steps) {
		String selectAll = "//input[contains(@data-bind,'SelectAllReservations')]";
		Wait.WaitForElement(driver, selectAll);
		driver.findElement(By.xpath(selectAll)).click();
		reslogger.info("Clicking on selectAll");
		test_steps.add("Clicking on selectAll");

		String drpdw = "//span[text()='Bulk Action']/../..//i";
		Wait.WaitForElement(driver, drpdw);
		driver.findElement(By.xpath(drpdw)).click();

		String noShow = "(//span[text()='No Show']/..)[2]";
		Wait.WaitForElement(driver, noShow);
		driver.findElement(By.xpath(noShow)).click();
		reslogger.info("Clicking on noShow");
		test_steps.add("Clicking on noShow");

		String process = "//h4[text()='Bulk No-Show']/../..//button[text()='Process']";
		Wait.WaitForElement(driver, process);
		driver.findElement(By.xpath(process)).click();
		reslogger.info("Clicking on process");
		test_steps.add("Clicking on process");

		String close = "//h4[text()='Bulk No-Show Completed']/../..//button[text()='Close']";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		reslogger.info("Clicking on close");
		test_steps.add("Clicking on close");
	}

	public void select_DatesForRatePlan(WebDriver driver, ArrayList test_steps, String CheckInDate, String CheckoutDate,
			String Adults, String Children, String RatePlan, String PromoCode, String IsSplitRes)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.app_logs.info(Adults);
		String loading = "(//div[@class='ir-loader-in'])[2]";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");

		String[] checkin = CheckInDate.split("\\|");
		String[] checkout = CheckoutDate.split("\\|");
		String[] adu = Adults.split("\\|");
		String[] child = Children.split("\\|");
		String[] rate = RatePlan.split("\\|");
		String[] promoCode = PromoCode.split("\\|");
		Boolean flag = false;
		reslogger.info(CheckInDate);
		int size = adu.length;

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddRoom);
		reslogger.info("MRB size : " + size);
		if (size > 1) {
			for (int i = 1; i <= size; i++) {
				String checkInCal = "(//label[text()='Check In']/following-sibling::i)[" + i + "]";
				reslogger.info(checkInCal);
				Wait.WaitForElement(driver, checkInCal);
				driver.findElement(By.xpath(checkInCal)).click();

				String monthYear = Utility.get_MonthYear(CheckInDate);
				String day = Utility.getDay(CheckInDate);
				reslogger.info(monthYear);
				String header = null, headerText = null, next = null, date;
				for (int k = 1; k <= 12; k++) {
					header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
					headerText = driver.findElement(By.xpath(header)).getText();
					if (headerText.equalsIgnoreCase(monthYear)) {
						date = "//td[contains(@class,'day') and text()='" + day + "']";
						Wait.WaitForElement(driver, date);

						int size1 = driver.findElements(By.xpath(date)).size();
						for (int l = 1; l <= size; l++) {
							date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + l + "]";
							String classText = driver.findElement(By.xpath(date)).getAttribute("class");
							if (!classText.contains("old")) {
								driver.findElement(By.xpath(date)).click();
								test_steps.add("Selecting checkin date : " + CheckInDate);
								reslogger.info("Selecting checkin date : " + CheckInDate);
								break;
							}
						}

						break;
					} else {
						next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
						Wait.WaitForElement(driver, next);
						driver.findElement(By.xpath(next)).click();
						Wait.wait2Second();
					}
				}

				String checkOutCal = "(//label[text()='Check Out']/following-sibling::i)[" + i + "]";
				reslogger.info(checkOutCal);
				Wait.WaitForElement(driver, checkOutCal);
				driver.findElement(By.xpath(checkOutCal)).click();
				monthYear = Utility.get_MonthYear(CheckoutDate);
				day = Utility.getDay(CheckoutDate);
				reslogger.info(monthYear);
				for (int k = 1; k <= 12; k++) {
					header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
					headerText = driver.findElement(By.xpath(header)).getText();
					if (headerText.equalsIgnoreCase(monthYear)) {
						date = "//td[contains(@class,'day') and text()='" + day + "']";
						Wait.WaitForElement(driver, date);

						int size1 = driver.findElements(By.xpath(date)).size();
						for (int l = 1; l <= size; l++) {
							date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + l + "]";
							String classText = driver.findElement(By.xpath(date)).getAttribute("class");
							if (!classText.contains("old")) {
								driver.findElement(By.xpath(date)).click();
								test_steps.add("Selecting checkout date : " + CheckoutDate);
								reslogger.info("Selecting checkout date : " + CheckoutDate);
								break;
							}
						}
						break;
					} else {
						next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
						Wait.WaitForElement(driver, next);
						driver.findElement(By.xpath(next)).click();
						Wait.wait2Second();
					}
				}
				if (!IsSplitRes.equalsIgnoreCase("Yes")) {

					String adults = "(//label[text()='Adults']/preceding-sibling::input)[" + i + "]";
					Wait.WaitForElement(driver, adults);
					driver.findElement(By.xpath(adults)).clear();
					driver.findElement(By.xpath(adults)).sendKeys(adu[i - 1]);
					test_steps.add("Enter Number of Adults : " + adu[(i - 1)]);
					reslogger.info("Enter Number of Adults : " + adu[(i - 1)]);

					String children = "(//label[text()='Children']/preceding-sibling::input)[" + i + "]";
					Wait.WaitForElement(driver, children);
					driver.findElement(By.xpath(children)).clear();
					driver.findElement(By.xpath(children)).sendKeys(child[i - 1]);
					test_steps.add("Enter Number of Children : " + child[(i - 1)]);
					reslogger.info("Enter Number of Children : " + child[(i - 1)]);

					// res.CP_NewReservation_Rateplan.click();
					String ratebutton = "(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div/button)["
							+ i + "]";
					Wait.WaitForElement(driver, ratebutton);
					driver.findElement(By.xpath(ratebutton)).click();

					int rateCount = driver.findElements(By.xpath(
							"(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[contains(text(),'"
									+ RatePlan.trim() + "')]/..)"))
							.size();
					String rateLoc = "(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[contains(text(),'"
							+ RatePlan.trim() + "')]/..)[" + rateCount + "]";
					reslogger.info(rateLoc);
					Wait.WaitForElement(driver, rateLoc);
					driver.findElement(By.xpath(rateLoc)).click();
					test_steps.add("Selecting the rateplan : " + RatePlan);
					reslogger.info("Selecting the rateplan : " + RatePlan);
					if (RatePlan.contains("Promo")) {
						String promo = "(//label[contains(text(),'Enter Code')]/preceding-sibling::input)[" + i + "]";
						Wait.WaitForElement(driver, promo);
						res.CP_NewReservation_PromoCode.clear();
						res.CP_NewReservation_PromoCode.sendKeys(promoCode[i - 1]);
						test_steps.add("Enter promocode : " + promoCode[i]);
						reslogger.info("Enter promocode : " + promoCode[i]);
					}
				}
				if (!(i == size)) {
					clickOnAddARoomButton(driver, test_steps);
					reslogger.info("Clicking on add room");
					if (IsSplitRes.equalsIgnoreCase("Yes") && !flag) {
						res.CP_NewReservation_SplitReservation.click();
						test_steps.add("Clicking on split reservation");
						reslogger.info("Clicking on split reservation");
					}
					flag = true;
				}
			}
		} else {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CheckinCal);
			res.CP_NewReservation_CheckinCal.click();
			String monthYear = Utility.get_MonthYear(CheckInDate);
			String day = Utility.getDay(CheckInDate);
			reslogger.info(monthYear);
			String header = null, headerText = null, next = null, date;
			for (int i = 1; i <= 12; i++) {
				header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
				headerText = driver.findElement(By.xpath(header)).getText();
				if (headerText.equalsIgnoreCase(monthYear)) {
					date = "//td[contains(@class,'day') and text()='" + day + "']";
					Wait.WaitForElement(driver, date);
					driver.findElement(By.xpath(date)).click();
					test_steps.add("Selecting checkin date : " + CheckInDate);
					reslogger.info("Selecting checkin date : " + CheckInDate);
					break;
				} else {
					next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
					Wait.WaitForElement(driver, next);
					driver.findElement(By.xpath(next)).click();
					Wait.wait2Second();
				}
			}
		}
	}

	public ArrayList<String> clickEditReservation(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EditReservationButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EditReservationButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.EditReservationButton), driver);
		Utility.ScrollToElement(res.EditReservationButton, driver);
		res.EditReservationButton.click();
		testSteps.add("click edit icon");
		reslogger.info("click edit icon");

		return testSteps;
	}

	public ArrayList<String> clickSplitRooms(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_SplitRoom);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_SplitRoom), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_SplitRoom), driver);
		Utility.ScrollToElement(res.CP_NewReservation_SplitRoom, driver);
		res.CP_NewReservation_SplitRoom.click();
		testSteps.add("Clicking on split reservation");
		reslogger.info("Clicking on split reservation");
		verifySpinerLoading(driver);
		return testSteps;
	}

	public ArrayList<String> clickChangeStayDetails(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.ChangeStayDetails);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ChangeStayDetails), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ChangeStayDetails), driver);
		Utility.ScrollToElement(res.ChangeStayDetails, driver);
		res.ChangeStayDetails.click();
		testSteps.add("click Change Stay Details");
		reslogger.info("click Change Stay Details");
		verifySpinerLoading(driver);
		return testSteps;
	}

	public ArrayList<String> clickFindRooms(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.FindRoomButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.FindRoomButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.FindRoomButton), driver);
		Utility.ScrollToElement(res.FindRoomButton, driver);
		Utility.clickThroughJavaScript(driver, res.FindRoomButton);
		// res.FindRoomButton.click();
		testSteps.add("click find rooms");
		reslogger.info("click find rooms");
		verifySpinerLoading(driver);
		return testSteps;
	}

	public ArrayList<String> enterCheckOutDate(WebDriver driver, String date) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CheckOutInput);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CheckOutInput), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CheckOutInput), driver);
		Utility.ScrollToElement(res.CheckOutInput, driver);
		res.CheckOutInput.clear();
		res.CheckOutInput.sendKeys(date);
		testSteps.add("Entered checkout date : " + date);
		reslogger.info("Entered checkout date : " + date);

		return testSteps;
	}

	public String clickSaveAfterEditStayInfo(WebDriver driver, String timeZone, ArrayList<String> testSteps)
			throws InterruptedException {
		String TimeWithDate = "";
		verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);

		try {
			Wait.WaitForElement(driver, OR_Reservation.SaveButton);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.SaveButton), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.SaveButton), driver);
			Utility.ScrollToElement(res.SaveButton, driver);
			res.SaveButton.click();
			testSteps.add("click save");
			reslogger.info("click save");
			TimeWithDate = ESTTimeZone.getDateWithTime(timeZone, "MM/dd/yy h:mm aa");

		} catch (Exception e) {
			WebElement ele = driver.findElement(By.xpath("//button[contains(@data-bind, 'roomSearch.enableSave')]"));
			Utility.ScrollToElement(ele, driver);
			ele.click();
		}

		try {

			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.AmountChangeConfirmationPopup), driver);
			Utility.ScrollToElement(res.AmountChangeConfirmationPopup, driver);
			res.AmountChangeConfirmationPopup.click();
			testSteps.add("Click yes button of Amount Change popup");
			reslogger.info("Click yes button of Amount Change popup");
		} catch (Exception e) {
			testSteps.add("Amount Change popup didn't display");
			reslogger.info("Amount Change popup didn't display");

		}
		verifySpinerLoading(driver);
		return TimeWithDate;
	}

	public ArrayList<String> editMRBReservationChangeStayDetails(WebDriver driver, int index, int changeStayDetailIndex)
			throws InterruptedException {
		verifySpinerLoading(driver);
		ArrayList<String> testSteps = new ArrayList<>();

		String editIconPath = "(//button[text()='Check In']//following-sibling::button)[" + index + "]";
		WebElement editIcon = driver.findElement(By.xpath(editIconPath));
		Wait.WaitForElement(driver, editIconPath);
		Wait.waitForElementToBeVisibile(By.xpath(editIconPath), driver);
		Wait.waitForElementToBeClickable(By.xpath(editIconPath), driver);
		Utility.ScrollToElement(editIcon, driver);
		editIcon.click();
		testSteps.add("click edit icon");
		reslogger.info("click edit icon");

		// use 2 for first and 3 for second
		String changeStayDetailsPath = "(//li[text()='Assign  room Number']//following-sibling::li[text()='Change Stay Details'])["
				+ changeStayDetailIndex + "]";
		WebElement changeStayDetails = driver.findElement(By.xpath(changeStayDetailsPath));
		Wait.WaitForElement(driver, changeStayDetailsPath);
		Wait.waitForElementToBeVisibile(By.xpath(changeStayDetailsPath), driver);
		Wait.waitForElementToBeClickable(By.xpath(changeStayDetailsPath), driver);
		Utility.ScrollToElement(changeStayDetails, driver);
		changeStayDetails.click();
		testSteps.add("click change stay details");
		reslogger.info("click change stay details");
		verifySpinerLoading(driver);
		return testSteps;
	}

	public boolean getRoomNumberAvailability(WebDriver driver, ArrayList<String> test_steps, String RoomClass,
			String roomNumber) throws InterruptedException {
		String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div/button";
		Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
		Wait.waitForElementToBeClickable(By.xpath(expand), driver);
		WebElement elementExpand = driver.findElement(By.xpath(expand));
		Utility.ScrollToElement_NoWait(elementExpand, driver);
		elementExpand.click();

		String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
		reslogger.info(roomnum);
		List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));

		boolean found = false;
		for (int i = 0; i < getRoomNumber.size(); i++) {
			String tempRN = getRoomNumber.get(i).getText();
			reslogger.info("Room Number Options : " + tempRN);
			if (tempRN.equals(roomNumber)) {
				found = true;
				break;
			}
		}
		return found;
	}

	public ArrayList<String> selectRoomNumber(WebDriver driver, ArrayList<String> test_steps, String RoomClass,
			String roomName, boolean assignRoomName) throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//div[2]//span";

		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]//..//..//..//following-sibling::div//div//select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"

					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);

			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (assignRoomName) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ roomName + "'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : " + roomName);
				reslogger.info("Selected room number : " + roomName);
			} else {

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div/button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				Wait.waitForElementToBeClickable(By.xpath(expand), driver);
				WebElement elementExpand = driver.findElement(By.xpath(expand));
				Utility.ScrollToElement_NoWait(elementExpand, driver);
				elementExpand.click();

				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
				reslogger.info(roomnum);
				List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
				Utility.app_logs.info(getRoomNumber.size());
				String tempRoomNumber = null;
				for (int j = 0; j < getRoomNumber.size(); j++) {
					tempRoomNumber = getRoomNumber.get(j).getText().trim();
					if (!(tempRoomNumber.equals("Unassigned") || tempRoomNumber.equals(roomName))) {
						break;
					}
				}
				System.out.print(" Room Number is :" + tempRoomNumber);

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ tempRoomNumber + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				test_steps.add("Selecting room <b>" + tempRoomNumber + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + tempRoomNumber + "</b> from <b>" + RoomClass + "</b> room class");

			}
			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]//..//..//..//following-sibling::div//span[contains(text(),'SELECT')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}

			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);

			// Utility.app_logs.info("Waited to loading symbol");

			// Utility.app_logs.info("Rule Count : " + ruleCount);

			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
		return test_steps;
	}

	public ArrayList<String> clickCloseReservation(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_ClosePopUp);
		Utility.ScrollToElement(res.CP_NewReservation_ClosePopUp, driver);
		Wait.explicit_wait_elementToBeClickable(res.CP_NewReservation_ClosePopUp, driver);
		res.CP_NewReservation_ClosePopUp.click();
		test_steps.add("Clicking on Close");
		reslogger.info("Clicking on Close");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait1Second();
			}
		}

		reslogger.info("Waited to loading symbol");

		return test_steps;
	}

	/*
	 * public ArrayList<String> clickEditReservation(WebDriver driver) throws
	 * InterruptedException { Elements_CPReservation res = new
	 * Elements_CPReservation(driver); ArrayList<String> testSteps = new
	 * ArrayList<>(); Wait.WaitForElement(driver,
	 * OR_Reservation.EditReservationButton);
	 * Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.
	 * EditReservationButton), driver);
	 * Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.
	 * EditReservationButton), driver);
	 * Utility.ScrollToElement(res.EditReservationButton, driver);
	 * res.EditReservationButton.click(); testSteps.add("click edit icon");
	 * reslogger.info("click edit icon");
	 * 
	 * return testSteps; }
	 */

	public String get_Reservationsource(WebDriver driver, ArrayList test_step) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Source);
		String source = res.CP_Reservation_Source.getText();
		test_steps.add("Getting the reservation source : " + source);
		reslogger.info("Getting the reservation source : " + source);

		return source;
	}

	public String get_MarketSegemnt(WebDriver driver, ArrayList test_steps) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_MarketSegmant);
		String MarketSegmant = res.CP_Reservation_MarketSegmant.getText();
		test_steps.add("Getting the reservation MarketSegmant  : " + MarketSegmant);
		reslogger.info("Getting the reservation MarketSegmant  : " + MarketSegmant);

		return MarketSegmant;
	}

	public int verifyRoomClassVisibility(WebDriver driver, String roomClassName) throws InterruptedException {
		String roomClassPath = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ roomClassName + "')]";
		List<WebElement> roomClass = driver.findElements(By.xpath(roomClassPath));
		int size = roomClass.size();
		reslogger.info("size : " + size);
		return size;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: verifyRoomClassSectionVisibility ' Description: This method
	 * will check whether a room class section exist after clicking find rooms in
	 * reservation creation ' Input parameters: WebDriver driver, String
	 * roomClassName ' Return value: int ' Created By: Farhan Ghaffar ' Created On:
	 * 21-07-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public int verifyRoomClassSectionVisibility(WebDriver driver) throws InterruptedException {
		String roomClassPath = "//section[@class='ir-roomClassDetails manual-override']";
		List<WebElement> roomClass = driver.findElements(By.xpath(roomClassPath));
		int size = roomClass.size();
		reslogger.info("size : " + size);
		return size;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getRulesText ' Description: This method will return text of
	 * rules for specific room class after clicking find rooms in reservation
	 * creation ' Input parameters: WebDriver driver, String roomClassName ' Return
	 * value: String ' Created By: Farhan Ghaffar ' Created On: 17-07-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public String getRulesText(WebDriver driver, String roomClassName) throws InterruptedException {
		String roomClassPath = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ roomClassName + "')]//following-sibling::span[contains(@data-bind,'text: rules.broken.join')]";
		WebElement roomClass = driver.findElement(By.xpath(roomClassPath));
		Wait.WaitForElement(driver, roomClassPath);
		Wait.waitForElementToBeVisibile(By.xpath(roomClassPath), driver);
		String getText = roomClass.getText();
		reslogger.info("getText : " + getText);
		return getText;
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getRulesSize ' Description: This method will return size of
	 * rules list for specific room class after clicking find rooms in reservation
	 * creation ' Input parameters: WebDriver driver, String roomClassName ' Return
	 * value: int ' Created By: Farhan Ghaffar ' Created On: 17-07-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public int getRulesSize(WebDriver driver, String roomClassName) throws InterruptedException {
		String roomClassPath = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ roomClassName + "')]//following-sibling::span[contains(@data-bind,'text: rules.broken.join')]";
		List<WebElement> roomClass = driver.findElements(By.xpath(roomClassPath));
		reslogger.info("Rules Size : " + String.valueOf(roomClass.size()));
		return roomClass.size();
	}

	/*
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 * 
	 * ' Method Name: getRulesNightsText ' Description: This method will return text
	 * of rules nigths for specific room class after clicking find rooms in
	 * reservation creation ' Input parameters: WebDriver driver, String
	 * roomClassName ' Return value: String ' Created By: Farhan Ghaffar ' Created
	 * On: 17-07-2020
	 * 
	 * #########################################################################
	 * ####
	 * #########################################################################
	 * #### ################
	 */
	public String getRulesNightsText(WebDriver driver, String roomClassName) throws InterruptedException {
		String roomClassPath = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ roomClassName + "')]//following-sibling::span[contains(@data-bind,'text: rules.statisfied.join')]";
		WebElement roomClass = driver.findElement(By.xpath(roomClassPath));
		Wait.WaitForElement(driver, roomClassPath);
		Wait.waitForElementToBeVisibile(By.xpath(roomClassPath), driver);
		String getText = roomClass.getText();
		reslogger.info("getText : " + getText);
		return getText;
	}

	public ArrayList<String> checkInDate(WebDriver driver, String date) throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckinDate);
		Wait.explicit_wait_visibilityof_webelement(elements.EnterCheckinDate, driver);
		Wait.explicit_wait_elementToBeClickable(elements.EnterCheckinDate, driver);
		elements.EnterCheckinDate.click();
		elements.EnterCheckinDate.clear();

		elements.EnterCheckinDate.sendKeys(date);
		testSteps.add("CheckIn: " + date);
		testSteps.add("CheckIn date: " + date);
		return testSteps;
	}

	public ArrayList<String> checkOutDate(WebDriver driver, String date) throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckout);
		Wait.explicit_wait_visibilityof_webelement(elements.EnterCheckout, driver);
		Wait.explicit_wait_elementToBeClickable(elements.EnterCheckout, driver);
		elements.EnterCheckout.click();
		elements.EnterCheckout.clear();
		elements.EnterCheckout.sendKeys(date);
		testSteps.add("CheckOut: " + date);
		return testSteps;

	}

	public ArrayList<String> checkInDates(WebDriver driver, String date, int index)
			throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckinDate);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterCheckinDate), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.EnterCheckinDate), driver);
		elements.listEnterCheckinDate.get(index).click();
		elements.listEnterCheckinDate.get(index).clear();
		elements.listEnterCheckinDate.get(index).sendKeys(date);
		test_steps.add("CheckIn date: " + date);
		return test_steps;
	}

	public ArrayList<String> checkOutDates(WebDriver driver, String date, int index)
			throws InterruptedException, ParseException {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EnterCheckout);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterCheckout), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.EnterCheckout), driver);
		elements.listEnterCheckout.get(index).click();
		elements.listEnterCheckout.get(index).clear();
		elements.listEnterCheckout.get(index).sendKeys(date);
		test_steps.add("CheckOut date: " + date);
		return test_steps;

	}

	public void verifyBookingWindowOnReservation(WebDriver driver, ArrayList<String> test_steps, String roomClassName,
			String adults, String children, String ratePlanName, String ratePerNight, String moreThanDaysCount,
			String withInDaysCount, boolean validationMsg) throws Exception {
		Navigation navigation = new Navigation();
		ArrayList<String> verifyDates = new ArrayList<>();
		navigation.Reservation_Backward_3(driver);
		click_NewReservation(driver, test_steps);
		String currentDay = Utility.getCurrentDate("dd/MM/yyyy");
		if ((Utility.validateString(moreThanDaysCount)) && !(Utility.validateString(withInDaysCount))) {
			String moreThanDaysCountToVerify = Utility.addDays(currentDay, Integer.parseInt(moreThanDaysCount));
			verifyDates = Utility.getAllDatesBetweenCheckInOutDates(currentDay, moreThanDaysCountToVerify);
			if (validationMsg) {
				for (String date : verifyDates) {
					// selectDatesAndClickOnFindRooms(driver, test_steps, date,
					// "", adults, children, ratePlanName);
					// verifyValidationMessageForNoRatePlanFound(driver,
					// test_steps, date, moreThanDaysCount, true);
				}
			} else {
				String nextDayToValidate = Utility.addDays(verifyDates.get(verifyDates.size() - 1), 1);
				// selectDatesAndClickOnFindRooms(driver, test_steps,
				// nextDayToValidate, "", adults, children, ratePlanName);
				verifyRateAmountPerNight(driver, test_steps, roomClassName, ratePerNight, nextDayToValidate);
			}
		} else if (!(Utility.validateString(moreThanDaysCount)) && (Utility.validateString(withInDaysCount))) {
			int lastDayToValidate = Integer.parseInt(withInDaysCount) + 1;
			String moreThanDaysCountToVerify = Utility.addDays(currentDay, lastDayToValidate);
			verifyDates = Utility.getAllDatesBetweenCheckInOutDates(currentDay, moreThanDaysCountToVerify);
			if (validationMsg) {
				String nextDayToValidate = Utility.addDays(verifyDates.get(verifyDates.size() - 1), 1);
				// selectDatesAndClickOnFindRooms(driver, test_steps,
				// nextDayToValidate, "", adults, children, ratePlanName);
				// verifyValidationMessageForNoRatePlanFound(driver, test_steps,
				// nextDayToValidate, withInDaysCount, true);
			} else {
				for (String date : verifyDates) {
					// selectDatesAndClickOnFindRooms(driver, test_steps, date,
					// "", adults, children, ratePlanName);
					verifyRateAmountPerNight(driver, test_steps, roomClassName, ratePerNight, date);
				}
			}
		} else if ((Utility.validateString(moreThanDaysCount)) && (Utility.validateString(withInDaysCount))) {
			int a = Integer.parseInt(moreThanDaysCount);
			int b = Integer.parseInt(withInDaysCount);
			if (a > b) {
				test_steps.add("This is not a valid option to select from booking window restrictions");
			} else {
				currentDay = Utility.addDays(Utility.getCurrentDate("dd/MM/yyyy"), 1);
				String lastDay = Utility.addDays(currentDay, Integer.parseInt(withInDaysCount));
				verifyDates = Utility.getAllDatesBetweenCheckInOutDates(currentDay, lastDay);
				if (validationMsg) {
					String nextDayToValidate = Utility.addDays(verifyDates.get(verifyDates.size() - 1), 1);
					// selectDatesAndClickOnFindRooms(driver, test_steps,
					// nextDayToValidate, "", adults, children, ratePlanName);
					// verifyValidationMessageForNoRatePlanFound(driver,
					// test_steps, nextDayToValidate, withInDaysCount, true);
				} else {
					for (String date : verifyDates) {
						// selectDatesAndClickOnFindRooms(driver, test_steps,
						// date, "", adults, children, ratePlanName);
						verifyRateAmountPerNight(driver, test_steps, roomClassName, ratePerNight, date);
					}
				}
			}
		}
	}

	public void verifyValidationMessageForNoRatePlanFound(WebDriver driver, ArrayList<String> test_steps, String date,
			String moreThanDaysCount, boolean withInAdvance, String reservationType) throws Exception {
		String validationXpath = null;
		String actValidation = null;
		ArrayList<String> dates = new ArrayList<>();
		if (date.split("\\|").length > 1) {
			for (int i = 0; i < date.split("\\|").length; i++) {
				dates.add(date.split("\\|")[i]);
			}
		} else {
			dates.add(date);
		}
		if (reservationType.equalsIgnoreCase("group")) {
			Wait.wait10Second();
			String QGRAmount = driver.findElement(By.xpath("//span[@id='summaryRoomQrg']")).getText();
			String totalAmount = driver.findElement(By.xpath("//span[@id='summaryTotalAmount']")).getText();
			test_steps.add("<b>QGR</b> and <b>Total</b> amounts are displaying as ::" + QGRAmount + "," + totalAmount);
			double QGRAmountValue = Double.parseDouble(QGRAmount);
			double totalAmountValue = Double.parseDouble(totalAmount);
			if ((QGRAmountValue == 0.00) && (totalAmountValue == 0.00)) {
				if (withInAdvance) {
					test_steps.add(
							"Successfully verified <b>QGR</b> and <b>Total</b> amounts are displaying as <b>0.00</b> for "
									+ "date <b>" + dates + "</b> with More than <b>" + moreThanDaysCount
									+ "</b> days in advance of " + "check-in date from <b>" + currentDay + "</b>");
				} else {
					test_steps.add(
							"Successfully verified <b>QGR</b> and <b>Total</b> amounts are displaying as <b>0.00</b> for "
									+ "date <b>" + dates + "</b> with Within <b>" + moreThanDaysCount
									+ "</b> days of check-in date from <b>" + currentDay + "</b>");
				}
			} else {
				throw new SkipException("Failed to verify <b>QGR</b> and <b>Total</b> amounts");
			}
		} else {
			if (reservationType.contains("tapechart")) {
				validationXpath = "//div[@class='toast-message']";
				actValidation = "No results match your criteria. Please change your search and try again.";
			} else {
				validationXpath = "//div[contains(@data-bind,'text: roomSearch.editStayInfoError')]";
				actValidation = "No rate combination can be found!";
				if (date.split("\\|").length > 1) {
					actValidation = "No rooms are available for Room Search #1,#2. Please change the search criteria and try again.";
				}
			}
			Wait.waitForElementToBeVisibile(By.xpath(validationXpath), driver);
			String expValidation = driver.findElement(By.xpath(validationXpath)).getText();
			String currentDay = Utility.getCurrentDate("dd/MM/yyyy");
			if (withInAdvance) {
				assertEquals(actValidation, expValidation,
						"Failed to validate restriction for In advance of check-in date");
				test_steps.add("Successfully verified validation message as <b>" + expValidation + "</b> for "
						+ "date <b>" + dates + "</b> with More than <b>" + moreThanDaysCount
						+ "</b> days in advance of " + "check-in date from <b>" + currentDay + "</b>");
			} else {
				assertEquals(actValidation, expValidation,
						"Failed to validate restriction for with in days of check-in");
				test_steps.add("Successfully verified validation message as <b>" + expValidation + "</b> for "
						+ "date <b>" + dates + "</b> with Within <b>" + moreThanDaysCount
						+ "</b> days of check-in date from <b>" + currentDay + "</b>");
			}
		}
	}

	public void verifyRateAmountPerNight(WebDriver driver, ArrayList<String> test_steps, String roomClassName,
			String ratePerNight, String date) {
		String rateDisplayedXpath = "//span[contains(@data-bind,'text: roomClass.name') and " + "text()='"
				+ roomClassName + "']/..//span[contains(@data-bind,'Avg per night')]";
		Wait.waitForElementToBeVisibile(By.xpath(rateDisplayedXpath), driver);
		String rateDisplayed = driver.findElement(By.xpath(rateDisplayedXpath)).getText();
		String avgPerNightMsg = "Avg per night $" + ratePerNight;
		assertEquals(rateDisplayed, avgPerNightMsg, "Failed to verify rate room class is displayed");
		test_steps.add("Successfully verified rate plan amount displayed for <b>" + roomClassName + "</b> "
				+ "for the date <b>" + date + "</b>");
	}

	private void selectDatesAndClickOnFindRooms(WebDriver driver, ArrayList<String> test_steps, String checkInDate,
			String checkOutDate, String adults, String children, String ratePlanName, String reservationType,
			String roomClassName) throws Exception {
		if (reservationType.contains("tapechart")) {
			Tapechart tapeChart = new Tapechart();
			tapeChart.selectDatesAndClickOnSearch(driver, test_steps, checkInDate, checkOutDate, adults, children,
					ratePlanName);
		} else if (reservationType.equalsIgnoreCase("group")) {
			Groups groups = new Groups();
			if (!Utility.validateString(checkOutDate)) {
				checkOutDate = Utility.addDays(checkInDate, 1);
			}
			groups.SelectArrivalDepartureDates(driver, checkInDate, checkOutDate);
			groups.SelectRatePlan(driver, ratePlanName);
			groups.EnterNights(driver, "1");
			groups.ClickSearchGroup(driver);
			String roomClassMaxBlock = "//span[contains(@data-bind,'RoomClassName') and text()='" + roomClassName
					+ "']/../..//input[contains(@data-bind,'RoomClassAvailability.A1_block')]";
			driver.findElement(By.xpath(roomClassMaxBlock)).clear();
			driver.findElement(By.xpath(roomClassMaxBlock)).sendKeys("01");
			driver.findElement(By.xpath(roomClassMaxBlock)).sendKeys(Keys.TAB);
			List<WebElement> maxBlockInput = driver
					.findElements(By.xpath("//td//input[contains(@data-bind," + "'RoomClassAvailability.A1_block')]"));
			for (int i = 0; i < maxBlockInput.size(); i++) {
				int j = i + 1;
				JavascriptExecutor js = (JavascriptExecutor) driver;
				String maxBlockValue = (String) js.executeScript("return arguments[0].value", maxBlockInput.get(i));
				int displayedMaxBlock = Integer.parseInt(maxBlockValue);
				String roomNameXpath = "(//input[contains(@data-bind,'RoomClassAvailability.A1_block')]/../.."
						+ "//span[contains(@data-bind,'RoomClassName')])[" + j + "]";
				String roomName = driver.findElement(By.xpath(roomNameXpath)).getText();
				if (!roomName.equalsIgnoreCase(roomClassName)) {
					if (displayedMaxBlock > 0) {
						maxBlockInput.get(i).clear();
						maxBlockInput.get(i).sendKeys("0");
						maxBlockInput.get(i).sendKeys(Keys.TAB);
					}
				}
			}
		} else {
			int count = checkInDate.split("\\|").length;
			if (count > 1) {
				ArrayList<String> checkOutDates = new ArrayList<>();
				for (int i = 0; i < count; i++) {
					if (!Utility.validateString(checkOutDate)) {
						String date = Utility.addDays(checkInDate.split("\\|")[i], 1);
						checkOutDates.add(date);
					}
				}
				if (!Utility.validateString(checkOutDate)) {
					checkOutDate = Utility.addInputDataToStringWithSeperator(checkOutDates);
				}
				select_Dates(driver, test_steps, checkInDate, checkOutDate, adults, children, ratePlanName, "", "");
			} else {
				select_CheckInDate(driver, test_steps, checkInDate);
				if (Utility.validateString(checkOutDate)) {
					select_CheckoutDate(driver, test_steps, checkOutDate);
				}
				enter_Adults(driver, test_steps, adults);
				enter_Children(driver, test_steps, children);
				select_Rateplan(driver, test_steps, ratePlanName, "");
			}
			clickOnFindRooms(driver, test_steps);
		}
	}

	public void verifyRoomClassIsDisplayedInSearch(WebDriver driver, ArrayList<String> test_steps, String roomClassName,
			String date, String reservationType, String roomClassAbb) throws Exception {
		boolean roomClassFound = false;
		ArrayList<String> dates = new ArrayList<>();
		if (date.split("\\|").length > 1) {
			for (int i = 0; i < date.split("\\|").length; i++) {
				dates.add(date.split("\\|")[i]);
			}
		} else {
			dates.add(date);
		}
		if (reservationType.equalsIgnoreCase("group")) {
			Wait.wait10Second();
			String QGRAmount = driver.findElement(By.xpath("//span[@id='summaryRoomQrg']")).getText();
			String totalAmount = driver.findElement(By.xpath("//span[@id='summaryTotalAmount']")).getText();
			test_steps.add("<b>QGR</b> and <b>Total</b> amounts are displaying as ::" + QGRAmount + "," + totalAmount);
			double QGRAmountValue = Double.parseDouble(QGRAmount);
			double totalAmountValue = Double.parseDouble(totalAmount);
			if ((QGRAmountValue > 0.00) && (totalAmountValue > 0.00)) {
				test_steps.add("Successfully verified <b>QGR</b> and <b>Total</b> amounts are "
						+ "displaying as more than <b>0.00</b> as <b>" + QGRAmount + "</b> for room class <b>"
						+ roomClassName + "</b> date <b>" + dates + "</b>");
			} else {
				throw new SkipException("Failed to verify <b>QGR</b> and <b>Total</b> amounts");
			}
		} else if (reservationType.contains("tapechart")) {
			String CellPath = "//div[contains(text(),'" + roomClassAbb
					+ "')  and contains(@class,'roomclassname')]//parent::*//following-sibling::"
					+ "div//following-sibling::div[contains(@class,'DatesContainer')]//ancestor::"
					+ "div[contains(@class,'tapechartdatecell Available')]";
			String availCount = driver.findElement(By.xpath("(//div[contains(@class,'roomclassname') and text()='"
					+ roomClassAbb
					+ "']/../..//following-sibling::div[@class='row availpercentrow']//div[@class='ir-tc-absoluteCenter'])[2]"))
					.getText();
			if (Integer.parseInt(availCount) > 0) {
				if (driver.findElements(By.xpath(CellPath)).size() > 0) {
					roomClassFound = true;
					test_steps.add("Successfully verified <b>" + roomClassName
							+ "</b> room class displayed for the date <b>" + dates + "</b>");
				}
			} else {
				roomClassFound = true;
				test_steps.add(
						"<b>" + roomClassName + "</b> room class is not available for the date <b>" + dates + "</b>");
			}
		} else {
			String roomClassNameXpath = "//span[@data-bind='text: roomClass.name, attr:{title: roomClass.id}']";
			List<WebElement> roomClassNames = driver.findElements(By.xpath(roomClassNameXpath));
			for (WebElement roomClass : roomClassNames) {
				String roomClassNameDisplayed = roomClass.getText();
				if (roomClassNameDisplayed.equalsIgnoreCase(roomClassName)) {
					test_steps.add("Successfully verified <b>" + roomClassName
							+ "</b> room class displayed for the date <b>" + dates + "</b>");
					roomClassFound = true;
					break;
				}
			}
			assertEquals(roomClassFound, true, "Failed to verify rate room class is displayed");
		}
	}

	public void navigateToNewReservationScreen(WebDriver driver, ArrayList<String> test_steps, String reservationType,
			String accountName, String accountType) throws Exception {
		Navigation navigation = new Navigation();
		if (reservationType.contains("account")) {
			Account accounts = new Account();
			accounts.searchForAnAccountAndOpen(driver, test_steps, accountName, accountType);
			accounts.clickOnNewReservationButton(driver, test_steps);
		} else if (reservationType.contains("tapechart")) {
			navigation.Reservation_Backward_3(driver);
			navigation.navigateToTapeChartFromReservations(driver);
			test_steps.add("Clicked on tape chart sub-menu option");
		} else if (reservationType.contains("group")) {
			Groups groups = new Groups();
			navigation.Reservation_Backward_3(driver);
			navigation.Groups(driver);
			test_steps.add("Clicked on groups sub-menu option");
			groups.openGroup(driver, test_steps, "");
			groups.navigateRoomBlock(driver);
			test_steps.add("Clicked on rooms block option on top");
			groups.ClickNewBlock(driver);
			test_steps.add("Clicked on new block button");
			String randomNum = Utility.GenerateRandomNumber();
			String blockName = "Test" + randomNum;
			groups.EnterBlockName(driver, blockName);
			test_steps.add("Entering block name as : <b>" + blockName + "</b>");
			groups.ClickOkay_CreateNewBlock(driver);
			test_steps.add("Click ok button on create new block popup");
		} else {
			navigation.Reservation_Backward_3(driver);
			click_NewReservation(driver, test_steps);
		}
	}

	public void navigateToNewReservationScreen(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Navigation navigation = new Navigation();
		navigation.Reservation_Backward_3(driver);
		click_NewReservation(driver, test_steps);
	}

	public void verifyBookingWindowOnReservation(WebDriver driver, ArrayList<String> test_steps, String roomClassName,
			String checkInDate, String checkOutDate, String adults, String children, String ratePlanName,
			HashMap<String, String> bookingWindow, String reservationType, String roomClassAbb) throws Exception {
		String moreThanDaysCount = bookingWindow.get("More than");
		String withInDaysCount = bookingWindow.get("Within");
		String currentDay = Utility.getCurrentDate("dd/MM/yyyy");
		ArrayList<String> checkInDates = Utility.splitInputData(checkInDate);
		ArrayList<String> checkOutDates = Utility.splitInputData(checkOutDate);
		if ((Utility.validateString(moreThanDaysCount)) && !(Utility.validateString(withInDaysCount))) {
			String moreThanDaysCountToVerify = Utility.addDays(currentDay, Integer.parseInt(moreThanDaysCount));
			if (!(Utility.checkFirstDateIsGreaterOrEqualDayToSecond(checkInDate, moreThanDaysCountToVerify))) {
				selectDatesAndClickOnFindRooms(driver, test_steps, checkInDate, checkOutDate, adults, children,
						ratePlanName, reservationType, roomClassName);
				verifyValidationMessageForNoRatePlanFound(driver, test_steps, checkInDate, moreThanDaysCount, true,
						reservationType);
			} else {
				selectDatesAndClickOnFindRooms(driver, test_steps, checkInDate, checkOutDate, adults, children,
						ratePlanName, reservationType, roomClassName);
				verifyRoomClassIsDisplayedInSearch(driver, test_steps, roomClassName, checkInDate, reservationType,
						roomClassAbb);
			}
		} else if (!(Utility.validateString(moreThanDaysCount)) && (Utility.validateString(withInDaysCount))) {
			int withInDays = Integer.parseInt(withInDaysCount) + 1;
			String withInDaysCountToVerify = Utility.addDays(currentDay, withInDays);
			if (Utility.checkFirstDateIsGreaterOrEqualDayToSecond(withInDaysCountToVerify, checkInDate)) {
				selectDatesAndClickOnFindRooms(driver, test_steps, checkInDate, checkOutDate, adults, children,
						ratePlanName, reservationType, roomClassName);
				verifyRoomClassIsDisplayedInSearch(driver, test_steps, roomClassName, checkInDate, reservationType,
						roomClassAbb);
			} else {
				selectDatesAndClickOnFindRooms(driver, test_steps, checkInDate, checkOutDate, adults, children,
						ratePlanName, reservationType, roomClassName);
				verifyValidationMessageForNoRatePlanFound(driver, test_steps, checkInDate, withInDaysCount, true,
						reservationType);
			}
		} else if ((Utility.validateString(moreThanDaysCount)) && (Utility.validateString(withInDaysCount))) {
			String moreThanDaysCountToVerify = Utility.addDays(currentDay, Integer.parseInt(moreThanDaysCount));
			int withInDays = Integer.parseInt(withInDaysCount) + 1;
			String withInDaysCountToVerify = Utility.addDays(currentDay, withInDays);
			if (Utility.checkFirstDateIsGreaterOrEqualDayToSecond(withInDaysCountToVerify, moreThanDaysCountToVerify)) {
				if ((Utility.checkFirstDateIsGreaterOrEqualDayToSecond(checkInDate, moreThanDaysCountToVerify))
						&& Utility.checkFirstDateIsGreaterOrEqualDayToSecond(withInDaysCountToVerify, checkInDate)) {
					selectDatesAndClickOnFindRooms(driver, test_steps, checkInDate, checkOutDate, adults, children,
							ratePlanName, reservationType, roomClassName);
					verifyRoomClassIsDisplayedInSearch(driver, test_steps, roomClassName, checkInDate, reservationType,
							roomClassAbb);
				} else {
					selectDatesAndClickOnFindRooms(driver, test_steps, checkInDate, checkOutDate, adults, children,
							ratePlanName, reservationType, roomClassName);
					verifyValidationMessageForNoRatePlanFound(driver, test_steps, checkInDate, withInDaysCount, true,
							reservationType);
				}
			}
		}
	}

	public boolean clickRoomClassInSearchResultFindRoom(WebDriver driver, String roomclass,
			ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean roomClassPresent = false;
		// int resultCounts = res.resultCount.size();
		String roomclassLink = roomclassLink = "(//span[text()='" + roomclass + "' and @title] )";
		try {
			if (driver.findElements(By.xpath(roomclassLink)).size() > 0) {
				roomClassPresent = true;

				Wait.waitUntilPresenceOfElementLocated(roomclassLink, driver);
				Utility.ScrollToElement(driver.findElement(By.xpath(roomclassLink)), driver);
				Wait.waitForElementToBeClickable(By.xpath(roomclassLink), driver);

				driver.findElement(By.xpath(roomclassLink)).click();
				test_steps.add("Click at Room class available link: " + roomclass);
				reslogger.info("Click at Room class available link: " + roomclass);
			}
		} catch (Exception e) {
			test_steps.add("Room class not available " + roomclass + " for specified date");
			reslogger.info("Room class not available " + roomclass + " for specified date");
		}
		return roomClassPresent;
	}

	public void verifySearchedRoomClassRateDetails(WebDriver driver, String roomClass, String checkindate,
			String checkoutdate, HashMap<String, String> rate, String folioDisplayName, ArrayList<String> test_steps)
			throws ParseException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		RatesGrid ratesGrid = new RatesGrid();
		String getRateOnSearchPage = "";
		String stay = Utility.differenceBetweenDates(checkindate, checkoutdate);
		int stayDifference = Integer.parseInt(stay);
		DecimalFormat df = new DecimalFormat("#.00");

		ArrayList<String> day = new ArrayList<String>();
		ArrayList<String> amount = new ArrayList<String>();
		int count = 1;
		ArrayList<String> rateName = new ArrayList<String>();
		// j get each day records //k to get each record of perticular day - 3
		// records
		// (day, rate name, amount)
		for (int j = 1; j <= stayDifference; j++) {
			for (int k = 1; k <= 3; k++) {
				String find = "(//div[@class='ir-rc-table']/table/thead/following::tbody)[1]/tr[" + j + "]/td[" + k
						+ "]";
				Wait.waitUntilPresenceOfElementLocated(find, driver);
				Wait.waitForElementToBeVisibile(By.xpath(find), driver);
				String record = driver.findElement(By.xpath(find)).getText();
				if (k == 1) {
					DateFormat outputFormatter = new SimpleDateFormat("dd/MM/yyyy");
					Date date = new Date(record);
					String findDate = outputFormatter.format(date);
					day.add(findDate);
				} else if (k == 2) {
					rateName.add(record);
				} else {
					amount.add(record);
				}
			}
		}
		// verify records now

		reslogger.info("dates: " + day);
		reslogger.info("rateName: " + rateName);
		reslogger.info("amount: " + amount);

		ArrayList<String> foundRate = ratesGrid.getRate(rate, driver, checkindate, checkoutdate, test_steps);

		// verify rateFolioName
		for (int p = 0; p < rateName.size(); p++) {
			Assert.assertEquals(rateName.get(p), folioDisplayName);
		}
		test_steps.add("Verified folioDisplayName: " + folioDisplayName);
		reslogger.info("Verified folioDisplayName: " + folioDisplayName);
		// verify rate grid
		for (int i = 0; i < foundRate.size(); i++) {
			getRateOnSearchPage = amount.get(i).replace("$", "").trim();
			String getRateOnRateGrid = df.format(Double.parseDouble(foundRate.get(i)));
			Assert.assertEquals(getRateOnSearchPage, getRateOnRateGrid);
		}
		test_steps.add("Rate verified: " + getRateOnSearchPage);
		reslogger.info("Rate verified: " + getRateOnSearchPage);
	}

	/*
	 * public void verifyNoRateFoundInSearch(WebDriver driver, String message,
	 * ArrayList<String> test_steps) { Elements_CPReservation res = new
	 * Elements_CPReservation(driver); int resultCounts = res.resultCount.size(); if
	 * (!(resultCounts > 0)) {
	 * Wait.waitUntilPresenceOfElementLocated(OR_Reservation.
	 * NorateCombinationInSearch, driver); String getNoRateComBinationMessage =
	 * res.norateCombinationInSearch.getText();
	 * Assert.assertEquals(getNoRateComBinationMessage.trim(), message,
	 * "Failed to verify message"); test_steps.add("Verify message: " + message);
	 * reslogger.info("Verify message: " + message); } else { test_steps.
	 * add("No rate combination message not displayed as Other room class comes in search result "
	 * ); reslogger.
	 * info("No rate combination message not displayed as Other room class comes in search result "
	 * ); }
	 * 
	 * }
	 * 
	 */
	public ArrayList<String> verifyBrokenRulesPopup(WebDriver driver, String isMinimumStayOn, String minimumStayValue,
			String isNoCheckInChecked, String isNoCheckOutChecked) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.RulesPopupHeadingText);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.RulesPopupHeadingText), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RulesPopupHeadingText), driver);
		Utility.ScrollToElement(res.RulesPopupHeadingText, driver);
		Assert.assertTrue(res.RulesPopupHeadingText.isDisplayed(), "Faield to verify rules popup heading text");
		testSteps.add(
				"Verified heading ( Selecting this room will violate the following rules ) is displaying in broken rules popup");
		reslogger.info(
				"Verified heading ( Selecting this room will violate the following rules ) is displaying in broken rules popup");

		testSteps.add("Verifying rules in rule broken popup");
		reslogger.info("Verifying rules in rule broken popup");
		String expectedRulesStatement = "";
		if (isMinimumStayOn.equalsIgnoreCase("Yes") && isNoCheckInChecked.equalsIgnoreCase("Yes")
				&& isNoCheckOutChecked.equalsIgnoreCase("Yes")) {
			String minimumStay = minimumStayValue + " Nights (override)<br>";
			String noCheckIn = "No Check In (override)<br>";
			String noCheckOut = "No Check out (override)";
			expectedRulesStatement = minimumStay + noCheckIn + noCheckOut;

		} else if (isMinimumStayOn.equalsIgnoreCase("Yes") && isNoCheckInChecked.equalsIgnoreCase("No")
				&& isNoCheckOutChecked.equalsIgnoreCase("No")) {
			String minimumStay = minimumStayValue + " Nights (override)";
			String noCheckIn = "";
			String noCheckOut = "";
			expectedRulesStatement = minimumStay + noCheckIn + noCheckOut;

		} else if (isMinimumStayOn.equalsIgnoreCase("Yes") && isNoCheckInChecked.equalsIgnoreCase("Yes")
				&& isNoCheckOutChecked.equalsIgnoreCase("No")) {
			String minimumStay = minimumStayValue + " Nights (override)<br>";
			String noCheckIn = "No Check In (override)";
			String noCheckOut = "";
			expectedRulesStatement = minimumStay + noCheckIn + noCheckOut;

		} else if (isMinimumStayOn.equalsIgnoreCase("Yes") && isNoCheckInChecked.equalsIgnoreCase("No")
				&& isNoCheckOutChecked.equalsIgnoreCase("Yes")) {
			String minimumStay = minimumStayValue + " Nights (override)<br>";
			String noCheckIn = "";
			String noCheckOut = "No Check out (override)";
			expectedRulesStatement = minimumStay + noCheckIn + noCheckOut;

		} else if (isMinimumStayOn.equalsIgnoreCase("No") && isNoCheckInChecked.equalsIgnoreCase("Yes")
				&& isNoCheckOutChecked.equalsIgnoreCase("Yes")) {
			String minimumStay = "";
			String noCheckIn = "No Check In (override)<br>";
			String noCheckOut = "No Check out (override)";
			expectedRulesStatement = minimumStay + noCheckIn + noCheckOut;

		} else if (isMinimumStayOn.equalsIgnoreCase("No") && isNoCheckInChecked.equalsIgnoreCase("Yes")
				&& isNoCheckOutChecked.equalsIgnoreCase("No")) {
			String minimumStay = "";
			String noCheckIn = "No Check In (override)";
			String noCheckOut = "";
			expectedRulesStatement = minimumStay + noCheckIn + noCheckOut;

		} else if (isMinimumStayOn.equalsIgnoreCase("No") && isNoCheckInChecked.equalsIgnoreCase("No")
				&& isNoCheckOutChecked.equalsIgnoreCase("Yes")) {
			String minimumStay = "";
			String noCheckIn = "";
			String noCheckOut = "No Check out (override)";
			expectedRulesStatement = minimumStay + noCheckIn + noCheckOut;

		} else if (isMinimumStayOn.equalsIgnoreCase("No") && isNoCheckInChecked.equalsIgnoreCase("No")
				&& isNoCheckOutChecked.equalsIgnoreCase("No")) {
			String minimumStay = "";
			String noCheckIn = "";
			String noCheckOut = "";
			expectedRulesStatement = minimumStay + noCheckIn + noCheckOut;

		}

		testSteps.add("Expected  : " + expectedRulesStatement);
		reslogger.info("Expected  : " + expectedRulesStatement);

		Wait.WaitForElement(driver, OR_Reservation.RulesOverrideText);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.RulesOverrideText), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RulesOverrideText), driver);
		Utility.ScrollToElement(res.RulesOverrideText, driver);
		String getText = res.RulesOverrideText.getAttribute("innerHTML");
		testSteps.add("Found  : " + getText);
		reslogger.info("Found  : " + getText);
		Assert.assertEquals(getText, expectedRulesStatement, "Failed to verify rules");
		testSteps.add("Verified rules in rule broken popup");
		reslogger.info("Verified rules in rule broken popup");

		Wait.WaitForElement(driver, OR_Reservation.RulesPopupText);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.RulesPopupText), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RulesPopupText), driver);
		Utility.ScrollToElement(res.RulesPopupText, driver);
		Assert.assertTrue(res.RulesPopupText.isDisplayed(), "Faield to verify rules popup text");
		testSteps.add("Verified text ( Are you sure you want to proceed? ) is displaying in broken rules popup");
		reslogger.info("Verified text ( Are you sure you want to proceed? ) is displaying in broken rules popup");

		return testSteps;
	}

	public ArrayList<String> selectRoomWithoutRulePopupHandling(WebDriver driver, String RoomClass, String IsAssign,
			String Account) throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//div[2]//span";
		Utility.app_logs.info("IsAssign: " + IsAssign);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]//..//..//..//following-sibling::div//div//select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"

					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);

			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			testSteps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				testSteps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else if (IsAssign.equalsIgnoreCase("Yes")) {

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div/button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				Wait.waitForElementToBeClickable(By.xpath(expand), driver);
				WebElement elementExpand = driver.findElement(By.xpath(expand));
				Utility.ScrollToElement_NoWait(elementExpand, driver);
				elementExpand.click();

				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
				reslogger.info(roomnum);
				Wait.WaitForElement(driver, roomnum);
				List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
				Wait.wait2Second();
				Utility.app_logs.info(getRoomNumber.size());
				String getMinimumNumber = getRoomNumber.get(1).getText();
				Utility.app_logs.info("getMinimumNumber: " + getMinimumNumber);

				String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
				Utility.app_logs.info("getMaxmumNumber: " + getMaxmumNumber);
				getMaxmumNumber = getMaxmumNumber.trim();
				int maxNumber = Integer.parseInt(getMaxmumNumber);
				int minNumber = Integer.parseInt(getMinimumNumber);

				Utility.app_logs.info("maxNumber : " + maxNumber);
				Utility.app_logs.info("maxNumber : " + maxNumber);

				Random random = new Random();
				int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
				IsAssign = String.valueOf(randomNumber);
				boolean isBreak = false;
				for (int j = 0; j < 5; j++) {
					Utility.app_logs.info("randomNumber: " + randomNumber);
					for (int i = 1; i < getRoomNumber.size(); i++) {
						// Utility.app_logs.info("in loop " + i);
						String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
						getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
						if (getRoomNumberFromOptions.equals(IsAssign)) {
							isBreak = true;
							break;
						}

					}
					if (isBreak == false) {
						random = new Random();
						randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
						IsAssign = String.valueOf(randomNumber);
					}
					if (isBreak) {
						break;
					}

				}
				System.out.print(" Random Number is :" + randomNumber);

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				testSteps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");

			} else {

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				Wait.waitForElementToBeClickable(By.xpath(expand), driver);
				WebElement elementExpand = driver.findElement(By.xpath(expand));
				Utility.ScrollToElement_NoWait(elementExpand, driver);
				elementExpand.click();

				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
				Utility.app_logs.info(roomnum);
				List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
				Utility.app_logs.info(getRoomNumber.size());
				String getMinimumNumber = getRoomNumber.get(1).getText();
				Utility.app_logs.info("getMinimumNumber: " + getMinimumNumber);

				String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
				Utility.app_logs.info("getMaxmumNumber: " + getMaxmumNumber);
				getMaxmumNumber = getMaxmumNumber.trim();
				int maxNumber = Integer.parseInt(getMaxmumNumber);
				int minNumber = Integer.parseInt(getMinimumNumber);

				Utility.app_logs.info("maxNumber : " + maxNumber);
				Utility.app_logs.info("maxNumber : " + maxNumber);

				Random random = new Random();
				int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
				IsAssign = String.valueOf(randomNumber);
				boolean isBreak = false;
				for (int j = 0; j < 5; j++) {
					Utility.app_logs.info("randomNumber: " + randomNumber);
					for (int i = 1; i < getRoomNumber.size(); i++) {
						Utility.app_logs.info("in loop " + i);
						String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
						getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
						if (getRoomNumberFromOptions.equals(IsAssign)) {
							isBreak = true;
							break;
						}

					}
					if (isBreak == false) {
						random = new Random();
						randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
						IsAssign = String.valueOf(randomNumber);
					}
					if (isBreak) {
						break;
					}

				}
				System.out.print(" Random Number is :" + randomNumber);

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				testSteps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass
					+ "')]//..//..//..//following-sibling::div//span[contains(@data-bind,'text: ( isSelected()')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}

			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
		} else {
			testSteps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");

		}

		return testSteps;
	}

	public ArrayList<String> clickRulesPopup(WebDriver driver, String buttonText) throws InterruptedException {

		ArrayList<String> testSteps = new ArrayList<>();

		String rulesPopupButton = "//p[text()='Are you sure you want to proceed?']//parent::div//following::div//button[text()='"
				+ buttonText + "']";
		Wait.WaitForElement(driver, rulesPopupButton);
		Wait.waitForElementToBeVisibile(By.xpath(rulesPopupButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(rulesPopupButton), driver);
		WebElement rulesButton = driver.findElement(By.xpath(rulesPopupButton));
		Utility.ScrollToElement(rulesButton, driver);
		rulesButton.click();
		testSteps.add(buttonText + " button clicked");
		reslogger.info(buttonText + " button clicked");

		return testSteps;
	}

	public ArrayList<String> enterMRBDates(WebDriver driver, String CheckInDate, String CheckoutDate, String Adults,
			String Children, String RatePlan, String PromoCode, String IsSplitRes) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		String loading = "(//div[@class='ir-loader-in'])[2]";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");

		String[] checkin = CheckInDate.split("\\|");
		String[] checkout = CheckoutDate.split("\\|");
		String[] adu = Adults.split("\\|");
		String[] child = Children.split("\\|");
		String[] rate = RatePlan.split("\\|");
		String[] promoCode = PromoCode.split("\\|");
		Boolean flag = false;
		reslogger.info(CheckInDate);
		int size = checkin.length;

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddRoom);
		reslogger.info("MRB size : " + size);
		if (size > 1) {
			for (int i = 1; i <= size; i++) {
				String checkInCal = "(//label[text()='Check In']//..//..//div//input)[" + i + "]";
				reslogger.info(checkInCal);
				Wait.WaitForElement(driver, checkInCal);
				WebElement checkInDate = driver.findElement(By.xpath(checkInCal));
				checkInDate.clear();
				checkInDate.sendKeys(checkin[i - 1]);

				String checkOutCal = "(//label[text()='Check Out']//..//..//div//input)[" + i + "]";
				reslogger.info(checkOutCal);
				Wait.WaitForElement(driver, checkOutCal);
				WebElement checkOutDate = driver.findElement(By.xpath(checkOutCal));
				checkOutDate.clear();
				checkOutDate.sendKeys(checkout[i - 1]);

				if (!IsSplitRes.equalsIgnoreCase("Yes")) {

					String adults = "(//label[text()='Adults']/preceding-sibling::input)[" + i + "]";
					Wait.WaitForElement(driver, adults);
					driver.findElement(By.xpath(adults)).clear();
					driver.findElement(By.xpath(adults)).sendKeys(adu[i - 1]);
					testSteps.add("Enter Number of Adults : " + adu[(i - 1)]);
					reslogger.info("Enter Number of Adults : " + adu[(i - 1)]);

					String children = "(//label[text()='Children']/preceding-sibling::input)[" + i + "]";
					Wait.WaitForElement(driver, children);
					driver.findElement(By.xpath(children)).clear();
					driver.findElement(By.xpath(children)).sendKeys(child[i - 1]);
					testSteps.add("Enter Number of Children : " + child[(i - 1)]);
					reslogger.info("Enter Number of Children : " + child[(i - 1)]);

					// res.CP_NewReservation_Rateplan.click();
					String ratebutton = "(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div/button)["
							+ i + "]";
					Wait.WaitForElement(driver, ratebutton);
					driver.findElement(By.xpath(ratebutton)).click();

					int rateCount = driver.findElements(By.xpath(
							"(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[contains(text(),'"
									+ rate[i - 1].trim() + "')]/..)"))
							.size();
					String rateLoc = "(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[contains(text(),'"
							+ rate[i - 1].trim() + "')]/..)[" + rateCount + "]";
					reslogger.info(rateLoc);
					Wait.WaitForElement(driver, rateLoc);
					driver.findElement(By.xpath(rateLoc)).click();
					testSteps.add("Selecting the rateplan : " + rate[i - 1]);
					reslogger.info("Selecting the rateplan : " + rate[i - 1]);
					if (RatePlan.contains("Promo")) {
						String promo = "(//label[contains(text(),'Enter Code')]/preceding-sibling::input)[" + i + "]";
						Wait.WaitForElement(driver, promo);
						res.CP_NewReservation_PromoCode.clear();
						res.CP_NewReservation_PromoCode.sendKeys(promoCode[i - 1]);
						testSteps.add("Enter promocode : " + promoCode[i]);
						reslogger.info("Enter promocode : " + promoCode[i]);
					}
				}
				if (!(i == size)) {
					clickOnAddARoomButton(driver, testSteps);
					reslogger.info("Clicking on add room");
					if (IsSplitRes.equalsIgnoreCase("Yes") && !flag) {
						res.CP_NewReservation_SplitReservation.click();
						testSteps.add("Clicking on split reservation");
						reslogger.info("Clicking on split reservation");
					}
					flag = true;
				}
			}
		} else {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CheckinCal);
			res.CP_NewReservation_CheckinCal.click();
			String monthYear = Utility.get_MonthYear(CheckInDate);
			String day = Utility.getDay(CheckInDate);
			reslogger.info(monthYear);
			String header = null, headerText = null, next = null, date;
			for (int i = 1; i <= 12; i++) {
				header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
				headerText = driver.findElement(By.xpath(header)).getText();
				if (headerText.equalsIgnoreCase(monthYear)) {
					date = "//td[contains(@class,'day') and text()='" + day + "']";
					Wait.WaitForElement(driver, date);
					driver.findElement(By.xpath(date)).click();
					testSteps.add("Selecting checkin date : " + CheckInDate);
					reslogger.info("Selecting checkin date : " + CheckInDate);
					break;
				} else {
					next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
					Wait.WaitForElement(driver, next);
					driver.findElement(By.xpath(next)).click();
					Wait.wait2Second();
				}
			}
		}
		return testSteps;
	}

	public void verifyNewPolicesApplicablePopup(WebDriver driver, boolean isDisplayed, ArrayList<String> test_steps) {
		String path = "//*[contains(text(),'Based on the changes made, new policies are applicable.')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		assertEquals(driver.findElement(By.xpath(path)).isDisplayed(), isDisplayed,
				"Failed To Verify New Polices Are Applicable Popup");
		test_steps.add("Successfully Verified New Polices are applicable Based On the Changes Made Displayed : "
				+ isDisplayed);
		reslogger.info("Successfully Verified New Polices are applicable Based On the Changes Made Displayed : "
				+ isDisplayed);
	}

	public void clickNewPolicesApplicablePopupYesNo(WebDriver driver, boolean isYesClick, ArrayList<String> test_steps)
			throws InterruptedException {

		if (isYesClick) {
			String path = "//*[contains(text(),'Based on the changes made, new policies are applicable.')]/../following-sibling::div//button[contains(text(),'Yes')]";
			if (Utility.isElementPresent(driver, By.xpath(path))) {
				Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
				driver.findElement(By.xpath(path)).click();
				test_steps.add("Based on the changed made, new Polices are applicable : Yes Clicked");
				reslogger.info("Based on the changed made, new Polices are applicable : Yes Clicked");
			}
		} else {
			String path = "//*[contains(text(),'Based on the changes made, new policies are applicable.')]/../following-sibling::div//button[contains(text(),'No')]";
			if (Utility.isElementPresent(driver, By.xpath(path))) {
				Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
				driver.findElement(By.xpath(path)).click();
				test_steps.add("Based on the changed made, new Polices are applicable : No Clicked");
				reslogger.info("Based on the changed made, new Polices are applicable : No Clicked");
			}
		}
		try {
			Wait.waitForElementToBeGone(driver,
					driver.findElement(By
							.xpath("//*[contains(text(),'Based on the changes made, new policies are applicable.')]")),
					15);
		} catch (Exception e) {
			System.err.println("already gone");
		}
		Wait.wait2Second();

		String loading = "(//div[@class='ir-loader-in'])[2]";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 10) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}

		reslogger.info("Waited to loading symbol");
	}

	public HashMap<String, String> getCancellationClauseValue(String delim, String typeOfFees,
			String guestsWillIncurAFee) {
		HashMap<String, String> valuesAgainstClauses = new HashMap<String, String>();

		ArrayList<String> typeOfFeesList = Utility.convertTokenToArrayList(typeOfFees, delim);
		ArrayList<String> percentageList = Utility.convertTokenToArrayList(guestsWillIncurAFee, delim);
		int index = 0;
		for (String type : typeOfFeesList) {
			if (type.equalsIgnoreCase("flat fee")) {
				valuesAgainstClauses.put("flat fee", "$" + percentageList.get(index));
			} else if (type.equalsIgnoreCase("number of nights")) {
				valuesAgainstClauses.put("number of nights", percentageList.get(index) + " Night(s)");
			} else if (type.equalsIgnoreCase("percent of stay")) {
				valuesAgainstClauses.put("percent of stay", percentageList.get(index));
			}

			index++;
		}
		return valuesAgainstClauses;
	}

	public void clickPolicyCollapseIcon(WebDriver driver, String PolicyType, String cancellationClause,
			ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		if (PolicyType.equals("No Show")) {
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel, driver);
			boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("No Show Policy Alread Expanded");
				reslogger.info("No Show Policy Alread Expanded ");
			} else {
				res.CP_Reservation_POLICIESANDDISCLAIMERS_NoShowPolicyCollapse.click();
				test_steps.add("No Show Policy  Expanded");
				reslogger.info("No Show Policy  Expanded ");
			}
		} else if (PolicyType.equals("Check-in")) {
			Utility.ScrollToElement(res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel, driver);
			boolean isEclicked = res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyLabel.isDisplayed();
			if (isEclicked) {
				test_steps.add("Check In Policy Alread Expanded");
				reslogger.info("Check In Policy Alread Expanded ");
			} else {
				res.CP_Reservation_POLICIESANDDISCLAIMERS_CheckInPolicyCollapse.click();
				test_steps.add("Check In Policy  Expanded");
				reslogger.info("Check In Policy  Expanded ");
			}
		} else if (PolicyType.equals("Cancellation")) {
			String path = "//div[text()='Policies And Disclaimers']/..//span[contains(text(),'Cancellation "
					+ cancellationClause + "')]";
			try {
				Utility.ScrollToElement(driver.findElement(By.xpath(path)), driver);
			} catch (Exception e) {
				// TODO: handle exception
			}
			boolean isEclicked = driver
					.findElement(By.xpath(path + "/../../../..//label[text()='Cancellation Policy']")).isDisplayed();
			if (isEclicked) {
				test_steps.add("Cancellation Policy Alread Expanded");
				reslogger.info("Cancellation Policy Alread Expanded ");
			} else {
				WebElement element = driver.findElement(By.xpath(path));
				Utility.ScrollToElement(element, driver);
				assertTrue(driver.findElement(By.xpath(path)).isDisplayed(),
						"Failed to Verify Cancellation Policy Associated Claues Heading");
				test_steps.add("Successfully Verified Cancellation Policy Associated Claue Heading : Displayed");
				reslogger.info("Successfully Verified Cancellation Policy Associated Claue Heading :  Displayed");
				assertEquals(driver.findElement(By.xpath(path)).getText(), "Cancellation " + cancellationClause,
						"Failed to Verify Cancellation Policy Associated Claues Heading");
				test_steps.add("Successfully Verified Cancellation Policy Associated Claue Heading : Cancellation "
						+ cancellationClause);
				reslogger.info("Successfully Verified Cancellation Policy Associated Claue Heading : Cancellation "
						+ cancellationClause);
				element.click();
				test_steps.add("Cancellation Policy Expanded");
				reslogger.info("Cancellation Policy Expanded ");
			}

		} else if (type.equalsIgnoreCase("Deposit")) {

		}

	}

	public void verifyAssociatedCancellationPolicy(WebDriver driver, String delim, String PolicyTypes,
			String PolicyName, ArrayList<String> clauseNamesList, HashMap<String, String> cancellationClauseValues,
			ArrayList<String> test_steps) throws InterruptedException {
		ArrayList<String> typeList = Utility.convertTokenToArrayList(PolicyTypes, delim);
		ArrayList<String> policyNamesList = Utility.convertTokenToArrayList(PolicyName, delim);

		int index = 0;
		int clauseIndex = 1;
		for (String type : typeList) {
			if (type.equalsIgnoreCase("Cancellation")) {
				Utility.app_logs.info(clauseNamesList.size());
				for (String clause : clauseNamesList) {
					clickPolicyCollapseIcon(driver, type, cancellationClauseValues.get(clause), test_steps);
					String foundName = getPolicyfromDetailTab(driver, test_steps);
					String expectedName = policyNamesList.get(index);
					if (clauseIndex != 1) {
						expectedName = expectedName + "-Clause " + clauseIndex;
					}
					assertTrue(foundName.contains(expectedName), "Failed to verify Cancellation Policy Name");
					test_steps.add("Successfully Verified Cancellation Policy Name : " + foundName);
					reslogger.info("Successfully Verified Cancellation Policy Name : " + foundName);
					clauseIndex++;
				}
			} else if (type.equalsIgnoreCase("Deposit")) {
				clickPolicyCollapseIcon(driver, type, "", test_steps);
				String foundName = getPolicyfromDetailTab(driver, test_steps);
				assertEquals(foundName, policyNamesList.get(index), "Failed to verify Deposit Policy Name");
				test_steps.add("Successfully Verified Deposit Policy Name : " + foundName);
				reslogger.info("Successfully Verified Deposit Policy Name : " + foundName);
			} else if (type.equalsIgnoreCase("Check-in")) {
				clickPolicyCollapseIcon(driver, type, "", test_steps);
				String foundName = getPolicyfromDetailTab(driver, test_steps);
				assertEquals(foundName, policyNamesList.get(index), "Failed to verify Check-in Policy Name");
				test_steps.add("Successfully Verified Check-in Policy Name : " + foundName);
				reslogger.info("Successfully Verified Check-in Policy Name : " + foundName);
			} else if (type.equalsIgnoreCase("No Show")) {
				clickPolicyCollapseIcon(driver, type, "", test_steps);
				String foundName = getPolicyfromDetailTab(driver, test_steps);
				assertEquals(foundName, policyNamesList.get(index), "Failed to verify No Show Policy Name");
				test_steps.add("Successfully Verified No Show Policy Name : " + foundName);
				reslogger.info("Successfully Verified No Show Policy Name : " + foundName);
			}
			index++;
		}
	}

	public void verifyNoCancellationPolicyAssociated(WebDriver driver, ArrayList<String> test_steps) {
		String path = "//div[text()='Policies And Disclaimers']/..//span[contains(text(),'Cancellation')]";
		assertEquals(driver.findElement(By.xpath(path)).isDisplayed(), false, "Failled Policy Associated");
		test_steps.add("Successfully Verified Cancellation Policy Not Associated");
		reslogger.info("Successfully Verified Cancellation Policy Not Associated ");
	}

	public void verifyGuestInfoAssociatedAccount(WebDriver driver, String expectedAccount, boolean isExpected,
			ArrayList<String> test_steps) {
		String foundAcc = getAccount_ResDetail(driver);

		if (isExpected) {
			assertEquals(foundAcc, expectedAccount, "Failed to Verify Associalted Account");
			test_steps.add("Successfully Verified Associated Account : " + foundAcc);
			reslogger.info("Successfully Verified Associated Account : " + foundAcc);
		} else {
			assertNotEquals(foundAcc, expectedAccount, "Failed to Verify Associalted Account");
			test_steps.add("Successfully Verified there Is No Associated Account with this name : " + foundAcc);
			reslogger.info("Successfully Verified there Is No Associated Account with this name : " + foundAcc);
		}
	}

	public void verifyAppliedPolicyAmount(WebDriver driver, String PolicyType, String amount, String type)
			throws InterruptedException {
		Wait.wait10Second();
		DecimalFormat df = new DecimalFormat("0.00");
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopupTitle);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle, driver);
		// Verified No Show Payment Page Title
		assertEquals(CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText().toLowerCase()
				.trim(), "Cancellation Payment".toLowerCase(), "Failed: To verify  Payment Page Title");
		test_steps.add(" Verified Title:<b> Cancellation Payment</b>");
		reslogger.info(" Verified Title: Cancellation Payment");
		// Get Amount
		String foundAmount = CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		reslogger.info("foundAmount: " + foundAmount);
		foundAmount = foundAmount.replace("$", "").trim();
		if (foundAmount.contains("-")) {
			foundAmount = foundAmount.substring(1, foundAmount.length() - 1);
			reslogger.info("foundAmount: " + foundAmount);
		}
		reslogger.info("foundAmount: " + foundAmount);
		test_steps.add("Expected cancellation amount: " + Float.parseFloat(amount));
		test_steps.add("Found: " + Float.parseFloat(foundAmount));
		// assertEquals(Float.parseFloat(foundAmount), Float.parseFloat(amount), "Failed
		// to verify Cancellation Amount");
		test_steps.add("Successfully Verified Cancellation Popup Amount : " + foundAmount);
		reslogger.info("Successfully Verified Cancellation Popup Amount : " + foundAmount);
		String balance = "";
		if (PolicyType.equals("No Show") || PolicyType.equals("Cancellation")) {
			balance = CPReservationPage.NoShowCancelPaymentPopup_Balance.getText().replace("$", "").replace("(", "")
					.replace(")", "");

		} else if (PolicyType.equals("Check In")) {
			balance = CPReservationPage.CheckInPaymentPopup_Balance.getText().replace("$", "").replace("(", "")
					.replace(")", "");

		}

		assertEquals(Float.parseFloat(balance), Float.parseFloat(amount), "Failed to verify Cancellation Balance");
		test_steps.add("Successfully Verified Cancellation Popup Balance : " + balance);
		reslogger.info("Successfully Verified Cancellation Popup Balance : " + balance);

	}

	public void verifyCancellationSuccessuful(WebDriver driver, ArrayList<String> test_steps, String balance,
			String amount, String type, String status) throws InterruptedException, ParseException {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowSuccess_ModelHeader);
		Wait.explicit_wait_visibilityof_webelement(CPReservationPage.CP_Reservation_NoShowSuccess, driver);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShowSuccess, driver);

		// Verified Success -Message
		assertEquals(CPReservationPage.CP_Reservation_NoShowSuccess.getText().toLowerCase().trim(),
				"Cancellation Successful".toLowerCase(), "Failed: To verify Success Header");
		test_steps.add("  Verified Message: <b>Cancellation Successful</b>");
		reslogger.info("  Verified Message: Cancellation Successful");

		// Verified Success-Balance
		String foundBalance = CPReservationPage.NoShowSuccess_Balance.getText().replace("$ ", "");

		assertEquals(Float.parseFloat(foundBalance), Float.parseFloat(balance),
				"Failed: To verify Success Page Balance");
		test_steps.add(" Verified Balance: <b>" + foundBalance + "</b>");
		reslogger.info("  Verified Balance: " + foundBalance);

		// Verified Success-Amount

		String path = "//span[contains(@data-bind,'noShow.PaymentAmount')][contains(text(),'" + amount
				+ "')]|//span[contains(@data-bind,'cancel.PaymentAmount')][contains(text(),'" + amount
				+ "')]|//span[contains(@data-bind,'checkInDetail.PaymentAmount')][contains(text(),'" + amount
				+ "')]|//span[contains(@data-bind,'checkOutDetail.PaymentAmount')][contains(text(),'" + amount + "')]";
		WebElement AmountElement = driver.findElement(By.xpath(path));
		assertTrue(AmountElement.isDisplayed(), "Failed: To verify  Success Page Amount: " + amount);
		test_steps.add("  Verified Amount: <b>" + amount + "</b>");
		reslogger.info("  Verified Amount: " + amount);

		// Verified Success-Type

		assertEquals(CPReservationPage.NoShowSuccess_Type.getText().toLowerCase().trim(), (type.toLowerCase().trim()),
				"Failed: To verify  Success Page Type");
		test_steps.add("  Verified Type: <b>" + type + "</b>");
		reslogger.info(" Verified Type: " + type);

		// Verified Success Notes

		assertEquals(CPReservationPage.CP_Reservation_NoShowSuccessStatus.getText().toLowerCase().trim(),
				(status.toLowerCase().trim()), "Failed: To verify  Success Page Notes ");
		test_steps.add(" Verified  Status : <b>" + status + "</b>");
		reslogger.info(" Verified  Status : " + status);

	}

	public ArrayList<String> verifyAssociatedAccount_ReservationHeader(WebDriver driver, String accountName) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<String>();

		String foundName = reservation.HeaderAccountName_BeforeReservation.getText();
		assertEquals(foundName.trim(), accountName, "Failed to verify Account No");
		testSteps.add("Successfully Verified Assoicated Account Name : " + accountName);
		reslogger.info("Successfully Verified Assoicated Account Name : " + accountName);
		assertEquals(reservation.GroupSign.isDisplayed(), true, "Failed: Group tic sign is not showing");
		testSteps.add("Verified group tick sign in reservation page");
		reslogger.info("Verified group tick sign in reservation page");
		return testSteps;
	}

	public void verifyGroupName_ReservationHeader(WebDriver driver, String accountName, ArrayList<String> test_steps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.HeaderAccountName_BeforeReservation), driver, 120);
		String foundName = reservation.HeaderAccountName_BeforeReservation.getText();
		assertEquals(foundName.trim(), accountName, "Failed to verify Account No");
		test_steps.add("Successfully Verified Assoicated Account Name : " + accountName);
		reslogger.info("Successfully Verified Assoicated Account Name : " + accountName);
		assertEquals(reservation.GroupSign.isDisplayed(), true, "Failed: Group tic sign is not showing");
		test_steps.add("Verified group tick sign in reservation page");
		reslogger.info("Verified group tick sign in reservation page");

	}

	/*
	 * public void verifySearchedRoomClassRateDetails(WebDriver driver, String
	 * roomClass, String checkindate, String checkoutdate, HashMap<String, String>
	 * rate, String folioDisplayName, ArrayList<String>test_steps) throws
	 * ParseException { Elements_CPReservation res = new
	 * Elements_CPReservation(driver); RatesGrid ratesGrid = new RatesGrid(); String
	 * getRateOnSearchPage = ""; String stay =
	 * Utility.differenceBetweenDates(checkindate, checkoutdate); int stayDifference
	 * = Integer.parseInt(stay); DecimalFormat df = new DecimalFormat("#.00");
	 * 
	 * ArrayList<String> day = new ArrayList<String>(); ArrayList<String> amount =
	 * new ArrayList<String>(); int count = 1; ArrayList<String> rateName = new
	 * ArrayList<String>(); // j get each day records //k to get each record of
	 * perticular day - 3 records // (day, rate name, amount) for (int j = 1; j <=
	 * stayDifference; j++) { for (int k = 1; k <= 3; k++) { String find =
	 * "(//div[@class='ir-rc-table']/table/thead/following::tbody)[1]/tr[" + j +
	 * "]/td[" + k + "]"; Wait.waitUntilPresenceOfElementLocated(find, driver);
	 * Wait.waitForElementToBeVisibile(By.xpath(find), driver); String record =
	 * driver.findElement(By.xpath(find)).getText(); if (k == 1) { DateFormat
	 * outputFormatter = new SimpleDateFormat("dd/MM/yyyy"); Date date = new
	 * Date(record); String findDate = outputFormatter.format(date);
	 * day.add(findDate); } else if (k == 2) { rateName.add(record); } else {
	 * amount.add(record); ======= >>>>>>> develop } } else {
	 * test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
	 * reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date"); }
	 * <<<<<<< HEAD }
	 */
	// verify records now

	/*
	 * public void verifySearchedRoomClassRateDetails(WebDriver driver, String
	 * roomClass, String checkindate, String checkoutdate, HashMap<String, String>
	 * rate, String folioDisplayName, ArrayList<String>test_steps) throws
	 * ParseException { Elements_CPReservation res = new
	 * Elements_CPReservation(driver); RatesGrid ratesGrid = new RatesGrid(); String
	 * getRateOnSearchPage = ""; String stay =
	 * Utility.differenceBetweenDates(checkindate, checkoutdate); int stayDifference
	 * = Integer.parseInt(stay); DecimalFormat df = new DecimalFormat("#.00");
	 * 
	 * ArrayList<String> day = new ArrayList<String>(); ArrayList<String> amount =
	 * new ArrayList<String>(); int count = 1; ArrayList<String> rateName = new
	 * ArrayList<String>(); // j get each day records //k to get each record of
	 * perticular day - 3 records // (day, rate name, amount) for (int j = 1; j <=
	 * stayDifference; j++) { for (int k = 1; k <= 3; k++) { String find =
	 * "(//div[@class='ir-rc-table']/table/thead/following::tbody)[1]/tr[" + j +
	 * "]/td[" + k + "]"; Wait.waitUntilPresenceOfElementLocated(find, driver);
	 * Wait.waitForElementToBeVisibile(By.xpath(find), driver); String record =
	 * driver.findElement(By.xpath(find)).getText(); if (k == 1) { DateFormat
	 * outputFormatter = new SimpleDateFormat("dd/MM/yyyy"); Date date = new
	 * Date(record); String findDate = outputFormatter.format(date);
	 * day.add(findDate); } else if (k == 2) { rateName.add(record); } else {
	 * amount.add(record); } } } // verify records now
	 * 
	 * reslogger.info("dates: " + day); reslogger.info("rateName: " + rateName);
	 * reslogger.info("amount: " + amount);
	 * 
	 * ArrayList<String> foundRate = ratesGrid.getRate(rate, driver, checkindate,
	 * checkoutdate, test_steps);
	 * 
	 * // verify rateFolioName for (int p = 0; p < rateName.size(); p++) {
	 * Assert.assertEquals(rateName.get(p), folioDisplayName); }
	 * test_steps.add("Verified folioDisplayName: " + folioDisplayName);
	 * reslogger.info("Verified folioDisplayName: " + folioDisplayName); // verify
	 * rate grid for (int i = 0; i < foundRate.size(); i++) { getRateOnSearchPage =
	 * amount.get(i).replace("$", "").trim(); String getRateOnRateGrid =
	 * df.format(Double.parseDouble(foundRate.get(i)));
	 * Assert.assertEquals(getRateOnSearchPage, getRateOnRateGrid); }
	 * test_steps.add("Rate verified: " + getRateOnSearchPage);
	 * reslogger.info("Rate verified: " + getRateOnSearchPage); }
	 */
	/*
	 * public boolean clickRoomClassInSearchResultFindRoom(WebDriver driver, String
	 * roomclass, ArrayList<String> test_steps) { Elements_CPReservation res = new
	 * Elements_CPReservation(driver); boolean roomClassPresent = false; // int
	 * resultCounts = res.resultCount.size(); String roomclassLink = roomclassLink =
	 * "(//span[text()='" + roomclass + "' and @title] )"; try { if
	 * (driver.findElements(By.xpath(roomclassLink)).size() > 0) { roomClassPresent
	 * = true;
	 * 
	 * Wait.waitUntilPresenceOfElementLocated(roomclassLink, driver);
	 * Utility.ScrollToElement(driver.findElement(By.xpath(roomclassLink)), driver);
	 * Wait.waitForElementToBeClickable(By.xpath(roomclassLink), driver);
	 * 
	 * driver.findElement(By.xpath(roomclassLink)).click();
	 * test_steps.add("Click at Room class available link: " + roomclass);
	 * reslogger.info("Click at Room class available link: " + roomclass); } } catch
	 * (Exception e) { test_steps.add("Room class not available " + roomclass +
	 * " for specified date"); reslogger.info("Room class not available " +
	 * roomclass + " for specified date"); } return roomClassPresent; }
	 */

	/*
	 * public void verifyNoRateFoundInSearch(WebDriver driver, String message,
	 * ArrayList<String> test_steps) { Elements_CPReservation res = new
	 * Elements_CPReservation(driver); int resultCounts = res.resultCount.size(); if
	 * (!(resultCounts > 0)) {
	 * Wait.waitUntilPresenceOfElementLocated(OR_Reservation.
	 * NorateCombinationInSearch, driver); String getNoRateComBinationMessage =
	 * res.norateCombinationInSearch.getText();
	 * Assert.assertEquals(getNoRateComBinationMessage.trim(), message,
	 * "Failed to verify message"); test_steps.add("Verify message: " + message);
	 * reslogger.info("Verify message: " + message); } else { test_steps.
	 * add("No rate combination message not displayed as Other room class comes in search result "
	 * ); reslogger.
	 * info("No rate combination message not displayed as Other room class comes in search result "
	 * ); }
	 * 
	 * } ======= reslogger.info("dates: " + day); reslogger.info("rateName: " +
	 * rateName); reslogger.info("amount: " + amount);
	 * 
	 * ArrayList<String> foundRate = ratesGrid.getRate(rate, driver, checkindate,
	 * checkoutdate, test_steps);
	 * 
	 * // verify rateFolioName for (int p = 0; p < rateName.size(); p++) {
	 * Assert.assertEquals(rateName.get(p), folioDisplayName); }
	 * test_steps.add("Verified folioDisplayName: " + folioDisplayName);
	 * reslogger.info("Verified folioDisplayName: " + folioDisplayName); // verify
	 * rate grid for (int i = 0; i < foundRate.size(); i++) { getRateOnSearchPage =
	 * amount.get(i).replace("$", "").trim(); String getRateOnRateGrid =
	 * df.format(Double.parseDouble(foundRate.get(i)));
	 * Assert.assertEquals(getRateOnSearchPage, getRateOnRateGrid); }
	 * test_steps.add("Rate verified: " + getRateOnSearchPage);
	 * reslogger.info("Rate verified: " + getRateOnSearchPage); }
	 */
	public void verifyNoRateFoundInSearch(WebDriver driver, String message, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		int resultCounts = res.resultCount.size();
		if (!(resultCounts > 0)) {
			Wait.waitUntilPresenceOfElementLocated(OR_Reservation.NorateCombinationInSearch, driver);
			String getNoRateComBinationMessage = res.norateCombinationInSearch.getText();
			Assert.assertEquals(getNoRateComBinationMessage.trim(), message, "Failed to verify message");
			test_steps.add("Verify message: " + message);
			reslogger.info("Verify message: " + message);
		} else {
			test_steps.add("No rate combination message not displayed as Other room class comes in search result ");
			reslogger.info("No rate combination message not displayed as Other room class comes in search result ");
		}

	}

	public ArrayList select_MRBRoomsRatePlan(WebDriver driver, ArrayList test_steps, String RoomClass, String IsAssign,
			String Account, String Adults) throws InterruptedException {

		String[] roomclass = RoomClass.split("\\|");
		String[] adults = Adults.split("\\|");
		int size = adults.length;
		ArrayList al = new ArrayList();
		for (int i = 1; i <= size; i++) {
			String Applypolicy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
			if (driver.findElements(By.xpath(Applypolicy)).size() > 0) {
				Wait.WaitForElement(driver, Applypolicy);
				Wait.wait3Second();
				driver.findElement(By.xpath(Applypolicy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");
			}
			Wait.wait5Second();
			String rm = "//span[text()='Room " + i + " of " + size + "']";
			if (driver.findElement(By.xpath(rm)).isDisplayed()) {
				test_steps.add("Room " + i + " of " + size + " is displayed");
				reslogger.info("Room " + i + " of " + size + " is displayed");
			} else {
				String clickOnPopUpYesBut = "(//div[@class='row']//button[contains(text(),'Yes')])[3]";
				driver.findElement(By.xpath(clickOnPopUpYesBut)).click();
			}
			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1].trim() + "')]/following-sibling::span";
			Wait.WaitForElement(driver, rulessize);
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();

			String room = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../div[2]/span)";
			reslogger.info(room);
			Wait.WaitForElement(driver, room);
			Wait.wait2Second();
			String rooms = driver.findElement(By.xpath(room)).getText();
			reslogger.info(rooms);
			String[] roomsCount = rooms.split(" ");
			int count = Integer.parseInt(roomsCount[0].trim());

			String cost = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/span)";

			Utility.ScrollToElement(driver.findElement(By.xpath(room)), driver);

			cost = driver.findElement(By.xpath(cost)).getText();
			cost = cost.trim();
			cost = cost.substring(1, cost.length());
			reslogger.info("cost : " + cost);
			al.add(cost);
			if (count > 0) {
				test_steps.add("Selecting room class : " + roomclass[i - 1]);
				reslogger.info("Selecting room class : " + roomclass[i - 1]);
				String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select";
				WebElement ele = driver.findElement(By.xpath(sel));
				if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
					Wait.WaitForElement(driver, unAssign);
					driver.findElement(By.xpath(unAssign)).click();
					test_steps.add("Selected room number : Unassigned");
					reslogger.info("Selected room number : Unassigned");

				} else {
					String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select/option";
					reslogger.info(roomnum);
					int count1 = driver.findElements(By.xpath(roomnum)).size();
					Random random = new Random();
					randomNumber = random.nextInt(count1 - 1) + 1;
					reslogger.info("count : " + count1);
					reslogger.info("randomNumber : " + randomNumber);
					Wait.WaitForElement(driver, sel);

					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.wait2Second();
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
							+ randomNumber + "]/a/span";
					Wait.WaitForElement(driver, roomNumber);
					driver.findElement(By.xpath(roomNumber)).click();
				}

				String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();

				String loading = "(//div[@class='ir-loader-in'])[2]";
				int counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
				reslogger.info("Waited to loading symbol");

				reslogger.info("Rule Count : " + ruleCount);
				if (ruleCount > 1) {

					String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";
					counter = 0;
					Wait.wait3Second();
					if (driver.findElements(By.xpath(rules)).size() > 0) {

						driver.findElement(By.xpath(rules)).click();
						test_steps.add(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
						reslogger.info(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

						loading = "(//div[@class='ir-loader-in'])[2]";
						counter = 0;
						while (true) {
							if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
								break;
							} else if (counter == 3) {
								break;
							} else {
								counter++;
								Wait.wait3Second();
							}
						}
					}
				}
				if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
					if (i == 1) {
						String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
						if (driver.findElements(By.xpath(policy)).size() > 0) {
							Wait.WaitForElement(driver, policy);
							driver.findElement(By.xpath(policy)).click();
							test_steps.add("Based on the changes made, new policies are applicable.? : yes");
							reslogger.info("Based on the changes made, new policies are applicable.? : yes");

							loading = "(//div[@class='ir-loader-in'])[2]";
							counter = 0;
							while (true) {
								if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
									break;
								} else if (counter == 3) {
									break;
								} else {
									counter++;
									Wait.wait2Second();
								}
							}
						}
					}
				}
			} else {
				test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
				reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
			}
		}
		return al;
	}

	public void selectGroupAccount(WebDriver driver, ArrayList<String> test_steps, String Account,
			boolean isReplaceGuestInfo, boolean isPolicyApplied) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Account);
		String accountdisplay = "//label[contains(text(),'Account')]//..//i[starts-with(@class,'rightIcon demo-icon icon-pencil')]";
		WebElement ele = driver.findElement(By.xpath(accountdisplay));
		if (!ele.isDisplayed()) {
			if (Account.equalsIgnoreCase("") || Account.isEmpty()) {
				reslogger.info("No Account");
			} else {
				res.CP_NewReservation_Account.sendKeys(Account);
				test_steps.add("Enter Account : " + Account);
				reslogger.info("Enter Account : " + Account);
				Wait.wait2Second();
				String account = "//b[contains(text(),'" + Account.trim() + "')]//..//..//..";
				Wait.WaitForElement(driver, account);
				driver.findElement(By.xpath(account)).click();
				String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]//following-sibling::div//button[contains(text(),'Yes')]";
				String dataNo = "//div[contains(text(),'Do you want to replace the guest info')]//following-sibling::div//button[contains(text(),'No')]";
				Wait.WaitForElement(driver, dataYes);

				assertTrue(
						driver.findElement(By.xpath("//div[contains(text(),'Do you want to replace the guest info')]"))
								.isDisplayed(),
						"Failed To Verify Do you want to replace the guest info popup not displayed");
				test_steps.add(
						"Successfully Verified Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Popup Displayed");
				reslogger.info(
						"Successfully Verified Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Popup Displayed");

				if (isReplaceGuestInfo) {
					driver.findElement(By.xpath(dataYes)).click();

					test_steps.add(
							"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
					reslogger.info(
							"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : Yes");
					Wait.wait5Second();
					assertTrue(driver.findElement(By.xpath(
							"//div[contains(text(),'Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?')]"))
							.isDisplayed(),
							"Failed To Verify Based on the account chosen, new policies are applicable popup not displayed");
					test_steps.add(
							"Successfully Verified Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Popup Displayed");
					reslogger.info(
							"Successfully Verified Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Popup Displayed");
					if (isPolicyApplied) {
						String policyYes = "//div[contains(text(),'Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?')]/following-sibling::div//button[contains(text(),'Yes')]";

						// Wait.WaitForElement(driver, policyYes);
						Wait.wait2Second();
						driver.findElement(By.xpath(policyYes)).click();
						test_steps.add(
								"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes");
						reslogger.info(
								"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : Yes");

					} else {
						String policyNo = "//div[contains(text(),'Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?')]/following-sibling::div//button[contains(text(),'No')]";
						// Wait.WaitForElement(driver, policyYes);
						Wait.wait2Second();
						driver.findElement(By.xpath(policyNo)).click();
						test_steps.add(
								"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : No");
						reslogger.info(
								"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation? : No");
					}
				} else {
					driver.findElement(By.xpath(dataNo)).click();

					test_steps.add(
							"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
					reslogger.info(
							"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
				}
				Wait.wait2Second();

			}
		} else {
			test_steps.add("Account Aleady exists");
			reslogger.info("Account Aleady exists");
		}
	}

	public void verify_errorMessage(WebDriver driver, ArrayList<String> testSteps, String message)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GET_ERROR_MESSAGE);
		Utility.ScrollToViewElementINMiddle(driver, res.getErrorMessage.get(0));
		assertEquals(res.getErrorMessage.get(0).getText().toLowerCase().trim(), message.toLowerCase().trim(),
				"Failed to verified Message");
		testSteps.add("Verified Message <b>" + res.getErrorMessage.get(0).getText() + "</b>");
		reslogger.info("Verified Message " + res.getErrorMessage.get(0).getText());

	}

	public void verifyRoomClassCurrency(WebDriver driver, ArrayList<String> testSteps, String roomClass, String amount)
			throws InterruptedException {
		String path = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + roomClass
				+ "')]" + "//..//..//..//following-sibling::div//div/span[contains(@data-bind,'total')]";
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToViewElementINMiddle(driver, element);
		// assertThat(element.getText().trim(),
		// CoreMatchers.containsString(amount.trim()));
		testSteps.add("Verified Amount For Room Class <b>" + roomClass + "--" + element.getText() + "</b>");
		reslogger.info("Verified Amount For Room Class " + roomClass + "--" + element.getText());

	}
	/*
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 * 
	 * ' Method Name: <calculateRatesAsPerAdultsAndChildCapacity> ' Description:
	 * <This method will calculate rate as per extra adult and child > ' Input
	 * parameters: <WebDriver driver,String ratePerNight, String ratePlanAdult,
	 * String ratePlanChild,String addAdultPerNight, String addChildPerNight, String
	 * roomClassCapacity , String reservationAdult, String reservationChild> '
	 * Return value:<String> ' Created By: <Gangotri Sikheria> ' Created On:
	 * <12/0/2020>
	 * 
	 * #########################################################################
	 * #########################################################################
	 * ########################
	 */

	private ArrayList<Double> calculationDateWise(HashMap<String, String> ratePerNight,
			HashMap<String, String> addAdultPerNight, HashMap<String, String> addChildPerNight, List<Date> dates,
			int index, String format) throws NumberFormatException, ParseException {
		ArrayList<Double> rateAdultChild = new ArrayList<Double>();
		double ratePerNights = 0.00, adultPerNight = 0.00, childPerNight = 0.00;
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		if (StringUtils.isNumericSpace(ratePerNight.get(Utility.convertDateFormattoString(format, dates.get(index))))) {
			double a = Double
					.parseDouble(ratePerNight.get(Utility.convertDateFormattoString(format, dates.get(index))));
			String doubleValue = df.format(a);
			ratePerNights = Double.parseDouble(doubleValue);
			rateAdultChild.add(ratePerNights);
		} else if (!(StringUtils
				.isNumericSpace(ratePerNight.get(Utility.convertDateFormattoString(format, dates.get(index)))))) {
			ratePerNights = Double
					.parseDouble(ratePerNight.get(Utility.convertDateFormattoString(format, dates.get(index))));
			rateAdultChild.add(ratePerNights);
		}
		if (StringUtils
				.isNumericSpace(addAdultPerNight.get(Utility.convertDateFormattoString(format, dates.get(index))))) {
			double a = Double
					.parseDouble(addAdultPerNight.get(Utility.convertDateFormattoString(format, dates.get(index))));
			String doubleValue = df.format(a);
			adultPerNight = Double.parseDouble(doubleValue);
			rateAdultChild.add(adultPerNight);
		} else if (!(StringUtils
				.isNumericSpace(addAdultPerNight.get(Utility.convertDateFormattoString(format, dates.get(index)))))) {
			adultPerNight = Double
					.parseDouble(addAdultPerNight.get(Utility.convertDateFormattoString(format, dates.get(index))));
			rateAdultChild.add(adultPerNight);
		}
		if (StringUtils
				.isNumericSpace(addChildPerNight.get(Utility.convertDateFormattoString(format, dates.get(index))))) {
			double a = Double
					.parseDouble(addChildPerNight.get(Utility.convertDateFormattoString(format, dates.get(index))));
			String doubleValue = df.format(a);
			childPerNight = Double.parseDouble(doubleValue);
			rateAdultChild.add(childPerNight);
		} else if (!(StringUtils
				.isNumericSpace(addChildPerNight.get(Utility.convertDateFormattoString(format, dates.get(index)))))) {
			childPerNight = Double
					.parseDouble(addChildPerNight.get(Utility.convertDateFormattoString(format, dates.get(index))));
			rateAdultChild.add(childPerNight);
		}

		return rateAdultChild;
	}

	public String calculateRatesAsPerAdultsAndChildCapacity(WebDriver driver, HashMap<String, String> ratePerNight,
			String ratePlanAdult, String ratePlanChild, HashMap<String, String> addAdultPerNight,
			HashMap<String, String> addChildPerNight, String roomClassPersons, String roomClassAdult,
			String reservationAdult, String reservationChild, ArrayList<String> testSteps, String message,
			String roomClass, List<Date> dates, String format)
			throws InterruptedException, NumberFormatException, ParseException {

		double sum = 0.00;
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		ArrayList<Double> rateAdultChild = new ArrayList<Double>();
		String rate = null;
		int reservationTotalAdultAndChild = Integer.parseInt(reservationAdult) + Integer.parseInt(reservationChild);
		if (!reservationAdult.equals("0") && !reservationChild.equals("0")) {
			if (reservationTotalAdultAndChild == Integer.parseInt(roomClassPersons)
					|| reservationTotalAdultAndChild < Integer.parseInt(roomClassPersons)) {
				if (Integer.parseInt(reservationAdult) == Integer.parseInt(ratePlanAdult)
						|| Integer.parseInt(reservationAdult) < Integer.parseInt(ratePlanAdult)) {

					for (int i = 0; i < dates.size() - 1; i++) {
						reslogger.info(ratePerNight);
						rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
								format);

						reslogger.info(rateAdultChild);
						int childs = reservationTotalAdultAndChild - Integer.parseInt(ratePlanChild);
						if (childs <= 0) {
							childs = 0;
						}
						reslogger.info(childs);
						double child = rateAdultChild.get(0) + (childs * rateAdultChild.get(2));
						reslogger.info(child);
						sum = sum + child;
						reslogger.info(sum);
						rate = df.format(sum);

					}
					reslogger.info(rate);
					verifyRoomClassCurrency(driver, testSteps, roomClass, rate);

				} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(ratePlanAdult)
						&& !(Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult))) {
					for (int i = 0; i < dates.size() - 1; i++) {
						rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
								format);
						int couldBeChildOrAdult = reservationTotalAdultAndChild - Integer.parseInt(ratePlanChild);
						int adult = Integer.parseInt(reservationAdult) - Integer.parseInt(ratePlanAdult);
						int child = couldBeChildOrAdult - adult;
						double totalRate = rateAdultChild.get(0)
								+ ((adult * rateAdultChild.get(1)) + (child * rateAdultChild.get(2)));
						sum = sum + totalRate;
						rate = df.format(sum);

					}
					reslogger.info(rate);
					verifyRoomClassCurrency(driver, testSteps, roomClass, rate);

				} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult)) {
					verify_errorMessage(driver, testSteps, message);
				}
			} else if (reservationTotalAdultAndChild > Integer.parseInt(roomClassPersons)) {
				verify_errorMessage(driver, testSteps, message);
			}

		} else if (reservationAdult.equals("0") && Integer.parseInt(reservationChild) > Integer.parseInt(ratePlanChild)
				&& !(Integer.parseInt(reservationChild) > Integer.parseInt(roomClassPersons))) {
			for (int i = 0; i < dates.size() - 1; i++) {
				rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
						format);
				int alwaysChild = Integer.parseInt(reservationChild) - Integer.parseInt(ratePlanChild);
				double child = rateAdultChild.get(0) + (alwaysChild * rateAdultChild.get(2));
				sum = sum + child;
				rate = df.format(sum);

			}
			reslogger.info(rate);
			verifyRoomClassCurrency(driver, testSteps, roomClass, rate);
		} else if (reservationChild.equals("0") && Integer.parseInt(reservationAdult) > Integer.parseInt(ratePlanAdult)
				&& !(Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult))) {
			for (int i = 0; i < dates.size() - 1; i++) {
				rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
						format);
				int alwaysAdult = Integer.parseInt(reservationAdult) - Integer.parseInt(ratePlanAdult);
				double child = rateAdultChild.get(0) + (alwaysAdult * rateAdultChild.get(1));
				sum = sum + child;
				rate = df.format(sum);
			}

			reslogger.info(rate);
			verifyRoomClassCurrency(driver, testSteps, roomClass, rate);
		} else if (reservationAdult.equals("0")
				&& Integer.parseInt(reservationChild) > Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver, testSteps, message);
		} else if (reservationChild.equals("0")
				&& Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult)) {
			verify_errorMessage(driver, testSteps, message);
		}

		else if (reservationAdult.equals("0") && reservationChild.equals("0")) {
			verify_errorMessage(driver, testSteps, message);
		} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult)
				&& Integer.parseInt(reservationChild) > Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver, testSteps, message);
		} else if (reservationAdult.equals("0")
				&& Integer.parseInt(reservationChild) <= Integer.parseInt(ratePlanChild)) {
			for (int i = 0; i < dates.size() - 1; i++) {
				rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
						format);
				sum = sum + rateAdultChild.get(0);
				rate = df.format(sum);
			}
			reslogger.info(rate);
			verifyRoomClassCurrency(driver, testSteps, roomClass, rate);
		} else if (reservationChild.equals("0")
				&& Integer.parseInt(reservationAdult) <= Integer.parseInt(ratePlanAdult)) {
			for (int i = 0; i < dates.size() - 1; i++) {
				rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
						format);
				sum = sum + rateAdultChild.get(0);
				rate = df.format(sum);
			}
			reslogger.info(rate);
			verifyRoomClassCurrency(driver, testSteps, roomClass, rate);
		} else if (Integer.parseInt(reservationAdult) < Integer.parseInt(ratePlanAdult)
				&& Integer.parseInt(reservationChild) < Integer.parseInt(ratePlanChild)) {
			for (int i = 0; i < dates.size() - 1; i++) {
				rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
						format);
				sum = sum + rateAdultChild.get(0);
				rate = df.format(sum);
			}
			reslogger.info(rate);
			verifyRoomClassCurrency(driver, testSteps, roomClass, rate);
		}

		return rate;

	}

	public String get_TripSummaryRoomChargesWithoutCurrencyForTapeChart(WebDriver driver,
			ArrayList<String> test_steps) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.trimSummaryTapeChartReservation);
		String balance = res.trimSummaryTapeChartReservation.getText().replace("$ ", "");
		;
		test_steps.add("TripSummary Room Charges : <b>" + balance + "</b>");
		reslogger.info("TripSummary Room Charges : " + balance);
		return balance;
	}

	public void verifyTripSummaryRoomChargesAfterCreateReservationFromTapeChart(WebDriver driver,
			ArrayList<String> test_steps, String RoomCharges) {
		String getRoomCharges = get_TripSummaryRoomChargesWithoutCurrencyForTapeChart(driver, test_steps);
		try {
			assertEquals(getRoomCharges.trim(), (RoomCharges), "Failed : to Verify Trip Summary Room Changes");
			test_steps.add("Verified TripSummary Room Changes : <b>" + getRoomCharges + "</b>");
			reslogger.info("Verified TripSummary Room Changes : " + getRoomCharges);
		} catch (Error e) {
			test_steps.add("<p style=\"color:#00F000\";>Expected Room Charges : " + RoomCharges + " but found "
					+ getRoomCharges + "</p>");
			reslogger.info("Expected Room Charges : " + RoomCharges + " but found " + getRoomCharges);
		}
	}

	/*
	 * public HashMap<String, String> getRoomChargesFromFolioBasedOnDates(WebDriver
	 * driver, ArrayList<String> test_steps, String checkInDate, String
	 * checkOutDate, boolean value) throws Exception { HashMap<String, String>
	 * roomCharges = new HashMap<>(); includeTaxesinLineItems( driver, test_steps,
	 * value); ArrayList<String> dates =
	 * Utility.getAllDatesBetweenCheckInOutDates(checkInDate, checkOutDate); for
	 * (String date : dates) { // String convertedDate = Utility.parseDate(date,
	 * "dd/MM/yyyy", "EE MMM dd, yyyy"); // String
	 * convertedDate=Utility.parseDate(date, "dd/MM/yyyy", "EE dd MMM yyyy"); //
	 * String roomChargeXpath = "//span[text()='"+
	 * convertedDate+"']/../..//span[text()='Room Charge']/../..//td[@class='lineitem-amount']"
	 * ; String convertedDate=Utility.parseDate(date, "dd/MM/yyyy", "dd"); String
	 * roomChargeXpath = "//span[contains(text(),'"+
	 * convertedDate+"')]/../..//span[text()='Room Charge']/../..//td[@class='lineitem-amount']"
	 * ; String roomCharge =
	 * driver.findElement(By.xpath(roomChargeXpath)).getText(); roomCharge =
	 * roomCharge.replace("$ ", ""); roomCharges.put(date, roomCharge); } return
	 * roomCharges; }
	 */

	public ArrayList<String> checkInCheckOutRuleStatusVerfication(WebDriver driver, String checkInDate,
			String checkOutDate, String adults, String child, String ratePlan, String roomClass,
			ArrayList<String> datesCheckInRuleApplied, ArrayList<String> datesCheckOutRuleApplied)
			throws InterruptedException, ParseException {

		ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		WebElement rulePathStatisfiedElement = null;
		WebElement rulePathBrokenElement = null;

		String rulePathStatisfied = "";
		String rulePathBroken = "";
		String redColor = "rgba(208, 68, 55, 1)";
		String greenColor = "rgba(104, 160, 28, 1)";

		boolean isNoCheckIn = false;
		boolean isNoCheckOut = false;
		boolean isNoCheckInBetweenDates = false;
		boolean isNoCheckOutBetweenDates = false;

		checkInDate(driver, ESTTimeZone.parseDate(checkInDate, "dd/MM/yyyy", "MM/dd/yyyy"));
		checkOutDate(driver, ESTTimeZone.parseDate(checkOutDate, "dd/MM/yyyy", "MM/dd/yyyy"));

		enter_Adults(driver, testSteps, adults);
		enter_Children(driver, testSteps, child);
		select_Rateplan(driver, testSteps, ratePlan, "");
		clickOnFindRooms(driver, testSteps);
		String foundCheckInMonth = "";
		String foundCheckOutMonth = "";
		String foundCheckInDay = "";
		String foundCheckOutDay = "";
		String checkInMonth = "";
		String checkOutMonth = "";
		String checkInDay = "";
		String checkOutDay = "";

		checkInMonth = Utility.parseDate(checkInDate, "dd/MM/yyyy", "MM");
		reslogger.info("Parsed CheckIn Month : " + checkInMonth);

		checkInDay = Utility.parseDate(checkInDate, "dd/MM/yyyy", "dd");
		reslogger.info("Parsed  CheckIn Day : " + checkInDay);

		checkOutMonth = Utility.parseDate(checkOutDate, "dd/MM/yyyy", "MM");
		reslogger.info("Parsed CheckOut Month : " + checkOutMonth);

		checkOutDay = Utility.parseDate(checkOutDate, "dd/MM/yyyy", "dd");
		reslogger.info("Parsed  CheckOut Day : " + checkOutDay);

		for (int i = 0; i < datesCheckInRuleApplied.size(); i++) {

			if (datesCheckInRuleApplied.get(i).equals(checkInDate)) {
				isNoCheckIn = true;
				reslogger.info("isNoCheckIn Rule Applied:" + isNoCheckIn);
				testSteps.add("isNoCheckIn Rule Applied:" + isNoCheckIn);
			}
			if (!isNoCheckIn) {
				// Check In Parsing

				foundCheckInMonth = Utility.parseDate(datesCheckInRuleApplied.get(i), "dd/MM/yyyy", "MM");
				reslogger.info("Parsed CheckIn Month Found : " + foundCheckInMonth);

				foundCheckInDay = Utility.parseDate(datesCheckInRuleApplied.get(i), "dd/MM/yyyy", "dd");
				reslogger.info("Parsed CheckIn Day Found : " + foundCheckInDay);

				if (checkInMonth.equals(foundCheckInMonth)) {

					if (Integer.parseInt(foundCheckInDay) > Integer.parseInt(checkInDay)) {
						isNoCheckInBetweenDates = true;
						reslogger.info("isNoCheckInBetweenDates:" + isNoCheckInBetweenDates);
						testSteps.add("isNoCheckInBetweenDates:" + isNoCheckInBetweenDates);
					}

				}

			}
		}
		for (int j = 0; j < datesCheckOutRuleApplied.size(); j++) {
			if (datesCheckOutRuleApplied.get(j).equals(checkOutDate)) {
				isNoCheckOut = true;
				reslogger.info("isNoCheckOut Rule Applied:" + isNoCheckOut);
				testSteps.add("isNoCheckOut Rule Applied:" + isNoCheckOut);
			}

			if (!isNoCheckOut) {
				// Check Out Parsing

				foundCheckOutMonth = Utility.parseDate(datesCheckOutRuleApplied.get(j), "dd/MM/yyyy", "MM");
				reslogger.info("Parsed CheckOut Month Found : " + foundCheckOutMonth);

				foundCheckOutDay = Utility.parseDate(datesCheckOutRuleApplied.get(j), "dd/MM/yyyy", "dd");
				reslogger.info("Parsed CheckOut Day Found : " + foundCheckOutDay);

				if (checkOutMonth.equals(foundCheckOutMonth)) {

					if (Integer.parseInt(foundCheckOutDay) < Integer.parseInt(checkOutDay) && !isNoCheckOut
							&& Integer.parseInt(foundCheckOutDay) > Integer.parseInt(checkInDay)) {

						isNoCheckOutBetweenDates = true;
						reslogger.info("isNoCheckOutBetweenDates:" + isNoCheckOutBetweenDates);
						testSteps.add("isNoCheckOutBetweenDates:" + isNoCheckOutBetweenDates);
					}
				}
			}
		}

		// Utility.app_logs.info("isNoCheckOut:" + isNoCheckOut);
		// Utility.app_logs.info("isNoCheckIn:" + isNoCheckIn);
		// Utility.app_logs.info("isNoCheckInBetweenDay:" +
		// isNoCheckInBetweenDates);
		// Utility.app_logs.info("isNoCheckOutBetweenDay:" +
		// isNoCheckOutBetweenDates);

		rulePathStatisfied = "(//span[text()='" + roomClass
				+ "'])[2]/following-sibling::span[contains(@data-bind,'text: rules.statisfied')]";
		rulePathBroken = "(//span[text()='" + roomClass
				+ "'])[2]/following-sibling::span[contains(@data-bind,'text: rules.broken')]";

		if ((isNoCheckIn && isNoCheckOut) || (isNoCheckIn && !isNoCheckOut && !isNoCheckOutBetweenDates)
				|| (isNoCheckOut && !isNoCheckIn && !isNoCheckInBetweenDates)) {
			// Check Both Are In Red Color & Both Rule Applied So Just One
			// Path Red->Broken
			try {
				rulePathBrokenElement = driver.findElement(By.xpath(rulePathBroken));
			} catch (Exception e) {
				rulePathBroken = "(//span[text()='" + roomClass
						+ "'])[3]/following-sibling::span[contains(@data-bind,'text: rules.broken')]";
				rulePathBrokenElement = driver.findElement(By.xpath(rulePathBroken));

			}
		}
		// The || Condition for Empty State
		if ((!isNoCheckIn && !isNoCheckOut && isNoCheckOutBetweenDates)
				|| (!isNoCheckIn && !isNoCheckOut && isNoCheckInBetweenDates)
				|| (!isNoCheckIn && isNoCheckInBetweenDates && !isNoCheckOut && !isNoCheckOutBetweenDates)
				|| (!isNoCheckOut && isNoCheckOutBetweenDates && !isNoCheckIn && !isNoCheckInBetweenDates)) {
			// Check Both Are In Green Color & Both Rule Applied So Just One
			// Path Green->Satisfied
			try {
				rulePathStatisfiedElement = driver.findElement(By.xpath(rulePathStatisfied));
			} catch (Exception e) {
				rulePathStatisfied = "(//span[text()='" + roomClass
						+ "'])[3]/following-sibling::span[contains(@data-bind,'text: rules.statisfied')]";
				rulePathStatisfiedElement = driver.findElement(By.xpath(rulePathStatisfied));

			}
		}

		if (isNoCheckIn) {

			if (rulePathBrokenElement != null) {
				assertEquals(rulePathBrokenElement.getCssValue("color"), redColor, "Failed: Color didn't match");
				assertEquals(rulePathBrokenElement.getText().contains("No check-in"), true,
						"Failed: Color didn't match");
				reslogger.info("isNoCheckIn Rule Applied:" + redColor + " Red Color Verified");
				testSteps.add("isNoCheckIn Rule Applied:" + redColor + " Red Color Verified");

			} else if (isNoCheckInBetweenDates) {

				assertEquals(rulePathStatisfiedElement.getCssValue("color"), redColor, "Failed: Color didn't match");
				assertEquals(rulePathStatisfiedElement.getText().contains("No check-in"), true,
						"Failed: Color didn't match");
				reslogger.info("isNoCheckIn Rule Applied:" + redColor + " Red Color Verified");
				testSteps.add("isNoCheckIn Rule Applied:" + redColor + " Red Color Verified");
			}

		} else {

			if (rulePathBrokenElement != null && !isNoCheckOut) {

				assertEquals(rulePathBrokenElement.getCssValue("color"), greenColor, "Failed: Color didn't match");
				assertEquals(rulePathBrokenElement.getText().contains("No check-in"), true,
						"Failed: Color didn't match");
				reslogger.info("isNoCheckIn Rule Applied:" + greenColor + " Green Color Verified");
				testSteps.add("isNoCheckIn Rule Applied:" + greenColor + " Green Color Verified");

			} else if (isNoCheckInBetweenDates) {

				rulePathStatisfiedElement = driver.findElement(By.xpath(rulePathStatisfied));
				assertEquals(rulePathStatisfiedElement.getCssValue("color"), greenColor, "Failed: Color didn't match");
				assertEquals(rulePathStatisfiedElement.getText().contains("No check-in"), true,
						"Failed: Color didn't match");
				reslogger.info("isNoCheckIn Rule Applied:" + greenColor + " Green Color Verified");
				testSteps.add("isNoCheckIn Rule Applied:" + greenColor + " Green Color Verified");
			}

			else if (!isNoCheckInBetweenDates && !isNoCheckIn) {

				reslogger.info("No CheckIn Rule Applied Verified");
				testSteps.add("No CheckIn Rule Applied  Verified");
			}
		}

		if (isNoCheckOut) {

			if (rulePathBrokenElement != null) {
				assertEquals(rulePathBrokenElement.getCssValue("color"), redColor, "Failed: Color didn't match");
				assertEquals(rulePathBrokenElement.getText().contains("No check-out"), true,
						"Failed: Color didn't match");

				reslogger.info("isNoCheckOut Rule Applied:" + redColor + " Red Color Verified");
				testSteps.add("isNoCheckOut Rule Applied:" + redColor + " Red Color Verified");

			} else if (isNoCheckOutBetweenDates) {

				assertEquals(rulePathStatisfiedElement.getCssValue("color"), redColor, "Failed: Color didn't match");
				assertEquals(rulePathStatisfiedElement.getText().contains("No check-out"), true,
						"Failed: Color didn't match");

				reslogger.info("isNoCheckOut Rule Applied:" + redColor + " Red Color Verified");
				testSteps.add("isNoCheckOut Rule Applied:" + redColor + " Red Color Verified");
			}

		} else {

			if (rulePathBrokenElement != null && !isNoCheckIn) {

				assertEquals(rulePathBrokenElement.getCssValue("color"), greenColor, "Failed: Color didn't match");
				assertEquals(rulePathBrokenElement.getText().contains("No check-out"), true,
						"Failed: Color didn't match");
				reslogger.info("isNoCheckOut Rule Applied:" + greenColor + " Green Color Verified");
				testSteps.add("isNoCheckOut Rule Applied:" + greenColor + " Green Color Verified");

			} else if (isNoCheckOutBetweenDates) {

				rulePathStatisfiedElement = driver.findElement(By.xpath(rulePathStatisfied));
				assertEquals(rulePathStatisfiedElement.getCssValue("color"), greenColor, "Failed: Color didn't match");
				assertEquals(rulePathStatisfiedElement.getText().contains("No check-out"), true,
						"Failed: Color didn't match");
				reslogger.info("isNoCheckOut Rule Applied:" + greenColor + " Green Color Verified");
				testSteps.add("isNoCheckOut Rule Applied:" + greenColor + " Green Color Verified");
			}

			else if (!isNoCheckOutBetweenDates && !isNoCheckOut) {
				reslogger.info("No CheckOut Rule Applied Verified");
				testSteps.add("No CheckOut Rule Applied  Verified");
			}

		}
		// Now Select The RoomClass
		String roomClassSelectButton = "(//span[text()='" + roomClass
				+ "'])[2]/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div[2]/div/a[contains(@class,'select-btn')]";

		WebElement selectButton = driver.findElement(By.xpath(roomClassSelectButton));
		selectButton.click();
		if (isNoCheckIn || isNoCheckOut) {
			Wait.WaitForElement(driver, OR_Reservation.RulesPopupHeadingText);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.RulesPopupHeadingText), driver);
			assertEquals(elements.RulesPopupHeadingText.isDisplayed(), true, "Failed:Rule Popup didn't display");

			reslogger.info("Rule Applied PopUp Verified");
			testSteps.add("Rule Applied PopUp Verified");
			if (isNoCheckOut) {
				assertEquals(elements.RulesOverrideText.isDisplayed(), true, "Failed:Rule Popup didn't display");
				assertEquals(elements.RulesOverrideText.getText().contains("No check-out"), true,
						"Failed:Rule Popup didn't display");

			}
			if (isNoCheckIn) {
				assertEquals(elements.RulesOverrideText.isDisplayed(), true, "Failed:Rule Popup didn't display");
				assertEquals(elements.RulesOverrideText.getText().contains("No check-in"), true,
						"Failed:Rule Popup didn't display");

			}
			reslogger.info("Rule Applied PopUp:" + elements.RulesOverrideText.getText() + " Verified");
			testSteps.add("Rule Applied PopUp:" + elements.RulesOverrideText.getText() + " Verified");
			roomClassSelectButton = "(//span[text()='" + roomClass
					+ "'])[2]/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div[2]/div/a[contains(@class,'select-btn')]/span";

		} else {

			roomClassSelectButton = "(//span[text()='" + roomClass
					+ "'])[2]/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div[2]/div/a[contains(@class,'select-btn')]/span";

			Wait.WaitForElement(driver, roomClassSelectButton);
			selectButton = driver.findElement(By.xpath(roomClassSelectButton));
			assertEquals(selectButton.getAttribute("class"), "text selected",
					"Failed: Room class didn't selected/Rule popup shouldn't display");

			reslogger.info("Rule PopUp  didn't appear Verified");
			testSteps.add("Rule PopUp didn't appear Verified");

		}
		return testSteps;

	}

	public ArrayList<String> verifyRoomClassAvailability(WebDriver driver, String roomClassName) {

		String path = "//div[@data-bind='foreach: rateDetails']//span[text()='" + roomClassName + "']";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));

		assertEquals(element.isDisplayed(), true, "Failed: Room class is not showing");

		ArrayList<String> testStep = new ArrayList<>();
		testStep.add("Verified room class " + roomClassName + " is available in new reservation");
		return testStep;

	}

	public ArrayList<String> verifyNorateCombinationMessage(WebDriver driver) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoRateCombinationFound);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoRateCombinationFound), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoRateCombinationFound), driver);
		assertEquals(res.NoRateCombinationFound.isDisplayed(), true,
				"Failed: No rate combination found message is not displaying");
		ArrayList<String> testSteps = new ArrayList<>();
		testSteps.add("Verified message 'No rate combination found! was displaying'");
		return testSteps;

	}

	public ArrayList<String> verfyMinStayRuleValue(WebDriver driver, String roomClassName, String minStayRule) {

		String path = "//div[@data-bind='foreach: rateDetails']//span[text()='" + roomClassName
				+ "']//following-sibling::span[contains(@data-bind,'text: rules')]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));

		assertEquals(element.isDisplayed(), true, "Failed: Room class is not showing");

		ArrayList<String> testStep = new ArrayList<>();
		testStep.add("Verified room class " + roomClassName + " is available in new reservation");
		return testStep;

	}

	public ArrayList<String> isMinStayRule(WebDriver driver, String roomClassName, boolean isMinStaySatisfy) {

		String path = "//div[@data-bind='foreach: rateDetails']//span[text()='" + roomClassName
				+ "']//following-sibling::span[contains(@data-bind,'text: rules')]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeVisibile(By.xpath(path), driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		ArrayList<String> testStep = new ArrayList<>();
		if (isMinStaySatisfy) {
			assertTrue(element.getAttribute("class").contains("color-green"), "Failed: min stay rule broken");
			testStep.add("Verified min stay rule is satisfied");
		} else {
			assertTrue(element.getAttribute("class").contains("color-red"), "Failed: min stay rule is satisfy");
			testStep.add("Verified min stay rule is borken");
		}
		return testStep;

	}

	public ArrayList<String> enterAdultsIndex(WebDriver driver, String Adults, int index) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Adults);
		res.listOfAdults.get(index).clear();
		res.listOfAdults.get(index).sendKeys(Adults);
		test_steps.add("Enter No of adults : " + Adults);
		reslogger.info("Enter No of adults : " + Adults);
		return test_steps;
	}

	public ArrayList<String> enterChildrenIndex(WebDriver driver, String Children, int index) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Children);
		res.listOfChildren.get(index).clear();
		res.listOfChildren.get(index).sendKeys(Children);
		test_steps.add("Enter No of Children : " + Children);
		reslogger.info("Enter No of Children : " + Children);
		return test_steps;

	}

	public ArrayList<String> selectRateplanIndex(WebDriver driver, String Rateplan, String PromoCode, int index,
			int index1) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Rateplan);
		res.SelectRateplanName.get(index).click();
		String rate = "//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[contains(text(),'"
				+ Rateplan + "')]/..";
		reslogger.info(rate);

		List<WebElement> rates = driver.findElements(By.xpath(rate));
		reslogger.info("rates: " + rates.size());
		Wait.WaitForElement(driver, rate);
		// driver.findElement(By.xpath(rate)).click();
		test_steps.add("Selecting the rateplan : " + Rateplan);
		reslogger.info("Selecting the rateplan : " + Rateplan);
		rates.get(index1).click();
		if (Rateplan.contains("Promo")) {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PromoCode);
			res.ListOfPromoCode.get(index).clear();
			res.ListOfPromoCode.get(index).sendKeys(PromoCode);
			test_steps.add("Enter promocode : " + PromoCode);
			reslogger.info("Enter promocode : " + PromoCode);
		}
		return test_steps;
	}

	public ArrayList<String> noRoomFound(WebDriver driver, String message) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoRoomCombinationFind), driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoRoomCombinationFind), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoRoomCombinationFind), driver);

		String text = res.NoRoomCombinationFind.getText();
		reslogger.info("text: " + text);
		assertEquals(text, message, "Failed: No rooms are available for Room Search");
		ArrayList<String> testSteps = new ArrayList<>();
		testSteps.add("Verified  message" + text);
		return testSteps;

	}

	public void SelectButton(WebDriver driver, String roomClassName) {

		String path = "//span[contains(text(),'" + roomClassName
				+ "')]//ancestor::div[@id='rcDtails']//a//span[text()='SELECT']";
		Wait.WaitForElement(driver, path);
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		driver.findElement(By.xpath(path)).click();
	}

	public ArrayList<String> ruleViolatePopHeading(WebDriver driver, String night, boolean isVerify, String message)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();

		Wait.wait2Second();
		reslogger.info("pop up size: " + res.listRuleViolatePopUpText.size());
		boolean isSize = res.listRuleViolatePopUpText.size() > 0;
		if (isSize) {
			if (isVerify) {
				testSteps.add("Expected message: " + message);
				testSteps.add("Found: " + res.numberOfNights.getText());
				assertEquals(res.numberOfNights.getText(), message, "Failed to verify rule violating popup");
				testSteps.add("Verified number of nights in rule violating popup");

			}

			res.ruleViolatingYesButton.click();
			testSteps.add("Click on yes button");

		}
		return testSteps;

	}

	public HashMap<String, String> getAllChargesFromFolio(WebDriver driver, ArrayList<String> test_steps,
			String checkInDate, String checkOutDate, boolean value) throws Exception {
		HashMap<String, String> charges = getRoomChargesFromFolioBasedOnDates(driver, test_steps, checkInDate,
				checkOutDate, value);
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String totalCharges = get_TotalCharges(driver, test_steps);
		String payments = get_Payments(driver, test_steps);
		charges.put("TotalCharges", totalCharges);
		charges.put("Payments", payments);
		return charges;
	}

	public void createReservations(WebDriver driver, ArrayList<String> test_steps, String sourceOfRes,
			String accountFirstName, String accountLastName, String checkInDate, String checkOutDate,
			String adultsForRes, String childrenForRes, String ratePlan, String promoCode, String roomClass,
			String isAssign, String isaccount, String accountName, String salutation, String guestFirstName,
			String guestLastName, String phoneNumber, String altenativePhone, String email, String accountType,
			String address1, String address2, String address3, String city, String country, String state,
			String postalCode, String isGuesProfile, String travelAgent, String marketSegment, String referral,
			String paymentMethod, String cardNumber, String nameOnCard, String cardExpMonthAndYear,
			ArrayList<String> policyName, ArrayList<String> policyType, String isAccountPolicyApplicable,
			HashMap<String, String> policyNameSelected, String isPolicyCreated,
			HashMap<String, String> confirmationNOAndStatus, ArrayList<String> roomNumber) throws Exception {

		Account account = new Account();
		if (!(Utility.validateString(sourceOfRes))) {
			navigateToReservationPage(driver);
			click_NewReservation(driver, test_steps);
		} else if (sourceOfRes.equalsIgnoreCase("accountReservation")) {
			account.clickNewReservationFromAccounts(driver, test_steps, accountType, accountName, marketSegment,
					referral, accountFirstName, accountLastName, phoneNumber, altenativePhone, address1, address2,
					address3, email, city, state, postalCode, policyName, policyType, policyNameSelected,
					isPolicyCreated);

		} else if (sourceOfRes.equalsIgnoreCase("associateAccount")) {
			navigateToReservationPage(driver);
			click_NewReservation(driver, test_steps);

		}
		if (guestFirstName.split("\\|").length > 1) {
			createMRBReservations(driver, test_steps, checkInDate, checkOutDate, adultsForRes, childrenForRes, ratePlan,
					promoCode, roomClass, isAssign, isaccount, accountName, salutation, guestFirstName, guestLastName,
					phoneNumber, altenativePhone, email, accountType, address1, address2, address3, city, country,
					state, postalCode, isGuesProfile, referral, paymentMethod, cardNumber, nameOnCard,
					cardExpMonthAndYear, isAccountPolicyApplicable, sourceOfRes, roomNumber);
		} else {
			createNormalReservation(driver, test_steps, checkInDate, checkOutDate, adultsForRes, childrenForRes,
					ratePlan, promoCode, roomClass, accountName, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, accountType, address1, address2, address3, city, country, state, postalCode,
					isGuesProfile, referral, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear,
					isAccountPolicyApplicable, sourceOfRes);

		}

		click_BookNow(driver, test_steps);
		confirmationNOAndStatus.put("ConfirmationNo", get_ReservationConfirmationNumber(driver, test_steps));
		confirmationNOAndStatus.put("ReservationStatus", get_ReservationStatus(driver, test_steps));
		clickCloseReservationSavePopup(driver, test_steps);
	}

	public boolean verifylenthOfStayRestrictions(WebDriver driver, ArrayList test_steps,
			boolean verifyLenthOfStayChecked, boolean verifyMinStayCondidtion, boolean verifyMaxStayCondition,
			HashMap<String, String> addStayofLength, int days) {
		boolean flag = false;
		if (verifyLenthOfStayChecked) {
			if ((verifyMinStayCondidtion && Integer.parseInt(addStayofLength.get("Min").trim()) <= days
					&& !verifyMaxStayCondition)
					|| (!verifyMinStayCondidtion && verifyMaxStayCondition
							&& Integer.parseInt(addStayofLength.get("Max").trim()) >= days)
					|| (verifyMinStayCondidtion && verifyMaxStayCondition
							&& Integer.parseInt(addStayofLength.get("Min").trim()) <= days && verifyMaxStayCondition
							&& Integer.parseInt(addStayofLength.get("Max").trim()) >= days)) {
				flag = true;
			} else {
				flag = false;
			}
		} else {
			flag = true;
		}
		return flag;
	}

	public void navigateToReservationPage(WebDriver driver) throws Exception {
		Navigation navigation = new Navigation();
		try {
			try {
				navigation.Reservation_Backward_3(driver);
			} catch (Exception e) {
				navigation.Reservation_Backward_1(driver);
			}
		} catch (Exception e) {
			navigation.reservation(driver);
		}
		closeAllOpenedReservations(driver);
	}

	public ArrayList<String> verifyFolioPaymentLine(WebDriver driver, String date, String PayCat, String PaymentDetail,
			String amount, int lineNo) {
		ArrayList<String> test_steps = new ArrayList<String>();
		Elements_Reservation ReservationFolio = new Elements_Reservation(driver);

		String tablePath = "//div[@id='ReservationDetail']//tr[@data-bind='if: $parent.ShouldShowThisItem($data)']["
				+ lineNo + "]";
		String iconPath = tablePath + "/td[@class='text-center lineitems-changestatus']/img";
		String datePath = tablePath + "/td[@class='lineitem-date']/span";
		String categoryPath = tablePath + "/td[@class='lineitem-category']/span";
		String detailPath = tablePath + "/td[@class='lineitem-description']/a";
		String amountPath = tablePath + "/td[@class='lineitem-amount']/span";

		Wait.WaitForElement(driver, tablePath);
		// assertTrue(driver.findElement(By.xpath(tablePath)).isDisplayed(), "MC
		// line didn't added in folio page");

		String GetMCCard = driver.findElement(By.xpath(detailPath)).getText();
		assertTrue(GetMCCard.equalsIgnoreCase(PaymentDetail), "Failed: Payment Detail not matched");
		Utility.app_logs.info("Successfully Verified Folio Line Detail : " + GetMCCard);
		test_steps.add("Successfully Verified Folio Line Detail : " + GetMCCard);

		String cat = driver.findElement(By.xpath(categoryPath)).getText();
		assertTrue(cat.equalsIgnoreCase(PayCat), "Failed: Payment Category not matched");
		Utility.app_logs.info("Successfully Verified Folio Line Category : " + cat);
		test_steps.add("Successfully Verified Folio Line Category : " + cat);

		String payAmount = driver.findElement(By.xpath(amountPath)).getText();
		payAmount = Utility.convertDollarToNormalAmount(driver, payAmount).trim();
		assertEquals(Float.parseFloat(payAmount), Float.parseFloat(amount),
				"Failed: Amount Not Matched in Payment Detail");
		Utility.app_logs.info("Successfully Verified Folio Line amount : " + payAmount);
		test_steps.add("Successfully Verified Folio Line amount : " + payAmount);

		String Date = driver.findElement(By.xpath(datePath)).getText();
		assertEquals(Utility.parseDate(Date, "EEE MMM dd, yyyy", "EEE MMM dd, yyyy"),
				Utility.parseDate(date, "EEE MMM dd, yyyy", "EEE MMM dd, yyyy"), "Failed: Payment Date not matched");
		Utility.app_logs.info("Successfully Verified Folio Line Date : " + Date);
		test_steps.add("Successfully Verified Folio Line Date : " + Date);

		return test_steps;
	}

	public ArrayList<String> verifyFolioPayment(WebDriver driver, String date, String PayCat, String PaymentDetail,
			String Amount, int days) {
		ArrayList<String> test_steps = new ArrayList<String>();
		for (int i = 1; i < days; i++) {
			test_steps = verifyFolioPaymentLine(driver, date, PayCat, PaymentDetail, Amount, i);
		}

		return test_steps;
	}

	public boolean verifyBookingWindowRestrictions(WebDriver driver, ArrayList test_steps, boolean isBookinWindow,
			String checkInDate, String checkOutDate, HashMap<String, String> bookingWindowRestrictions)
			throws Exception, ParseException, Exception {
		boolean flag = false;

		if (isBookinWindow) {
			String moreThanDaysCount = bookingWindowRestrictions.get("More than");
			String withInDaysCount = bookingWindowRestrictions.get("Within");
			String currentDay = Utility.getCurrentDate("dd/MM/yyyy");

			ArrayList<String> checkInDates = Utility.splitInputData(checkInDate);
			ArrayList<String> checkOutDates = Utility.splitInputData(checkOutDate);
			if ((Utility.validateString(moreThanDaysCount)) && !(Utility.validateString(withInDaysCount))) {
				String moreThanDaysCountToVerify = Utility.addDays(currentDay, Integer.parseInt(moreThanDaysCount));
				if (!(Utility.checkFirstDateIsGreaterOrEqualDayToSecond(checkInDate, moreThanDaysCountToVerify))) {
					flag = false;
				} else {
					flag = true;
				}
			} else if (!(Utility.validateString(moreThanDaysCount)) && (Utility.validateString(withInDaysCount))) {
				int withInDays = Integer.parseInt(withInDaysCount) + 1;
				String withInDaysCountToVerify = Utility.addDays(currentDay, withInDays);
				if (Utility.checkFirstDateIsGreaterOrEqualDayToSecond(withInDaysCountToVerify, checkInDate)) {
					flag = true;
				} else {
					flag = false;
				}
			} else if ((Utility.validateString(moreThanDaysCount)) && (Utility.validateString(withInDaysCount))) {
				String moreThanDaysCountToVerify = Utility.addDays(currentDay, Integer.parseInt(moreThanDaysCount));
				int withInDays = Integer.parseInt(withInDaysCount) + 1;
				String withInDaysCountToVerify = Utility.addDays(currentDay, withInDays);
				if (Utility.checkFirstDateIsGreaterOrEqualDayToSecond(withInDaysCountToVerify,
						moreThanDaysCountToVerify)) {
					if ((Utility.checkFirstDateIsGreaterOrEqualDayToSecond(checkInDate, moreThanDaysCountToVerify))
							&& Utility.checkFirstDateIsGreaterOrEqualDayToSecond(withInDaysCountToVerify,
									checkInDate)) {
						flag = true;
					} else {
						flag = false;
					}
				}
			}
		} else {
			flag = true;

		}
		return flag;
	}

	public boolean verifyMinStayPopupComeOrNot(WebDriver driver, ArrayList test_steps, int MinStayRuleValue, int days) {
		boolean minStay = false;
		if (days >= MinStayRuleValue) {
			minStay = true;
		}
		Utility.app_logs.info(days + " " + MinStayRuleValue);
		test_steps.add("Min Stay Pop up should come? " + minStay);
		reslogger.info("Min Stay Pop up should come? " + minStay);
		return minStay;
	}

	public String verifyNoCheckInPopupComeOrNot(WebDriver driver, ArrayList test_steps, ArrayList noCheckInRule,
			String checkin, String checkout) {

		String noCheckIncolor = "";

		if (noCheckInRule.get(0).toString().equalsIgnoreCase("Yes")) {
			noCheckIncolor = "Red";
			return noCheckIncolor;
		}

		for (int i = 1; i < noCheckInRule.size(); i++) {
			if (noCheckInRule.get(i).toString().equalsIgnoreCase("Yes")) {
				noCheckIncolor = "Green";
				return noCheckIncolor;
			}
		}

		boolean flag = false;
		for (int i = 1; i < noCheckInRule.size(); i++) {
			if (noCheckInRule.get(i).toString().equalsIgnoreCase("Yes")) {
				flag = true;
				break;
			}
		}

		if (!flag) {
			noCheckIncolor = "No Color";
			;
		}

		return noCheckIncolor;

	}

	public String verifyNoCheckOutPopupComeOrNot(WebDriver driver, ArrayList test_steps, ArrayList noCheckOutRule,
			String checkin, String checkout) {

		String noCheckOutcolor = "";

		if (noCheckOutRule.get((noCheckOutRule.size()) - 1).toString().equalsIgnoreCase("Yes")) {
			noCheckOutcolor = "Red";
			return noCheckOutcolor;
		}

		for (int i = 0; i < (noCheckOutRule.size() - 1); i++) {
			if (noCheckOutRule.get(i).toString().equalsIgnoreCase("Yes")) {
				noCheckOutcolor = "Green";
				return noCheckOutcolor;
			}
		}

		boolean flag = false;
		for (int i = 0; i < (noCheckOutRule.size() - 1); i++) {
			if (noCheckOutRule.get(i).toString().equalsIgnoreCase("Yes")) {
				flag = true;
				break;
			}
		}

		if (!flag) {
			noCheckOutcolor = "No Color";
			;
		}

		return noCheckOutcolor;

	}

	public void verifyNoRateCombinationMsg(WebDriver driver, ArrayList<String> test_steps) {

		if (driver.findElements(By.xpath("//div[@class='col-md-12 alert alert-danger ir-alert']")).size() > 0) {
			String msg = "//div[contains(text(),'No rate combination can be found!')]";
			if (driver.findElements(By.xpath(msg)).size() > 0) {
				reslogger.info("Error message Found: No rate combination can be found!");
				test_steps.add("Error message Found: No rate combination can be found!");
			} else {
				System.out.println("NAgi : " + driver
						.findElement(By.xpath("//div[@class='col-md-12 alert alert-danger ir-alert']")).getText());
				reslogger.info("Error message Found: No rooms are available for Room Search");
				test_steps.add("Error message Found: No rooms are available for Room Search");
			}

			try {
				Utility.clickThroughJavaScript(driver,
						driver.findElement(By.xpath("//span[@data-bind='click: roomSearch.close']")));
			} catch (Exception e) {
				// e.printStackTrace();
			}
		}
	}

	public String verifyMinStayLabel(WebDriver driver, ArrayList<String> test_steps, String RoomClass,
			int minStayValue) {
		String min = "//span[text()='" + RoomClass
				+ "']/../span[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'"
				+ minStayValue + " NIGHT')]";
		Wait.WaitForElement(driver, min);
		reslogger.info("Verified Min Stay Rule label for : " + RoomClass + " as number of days as : " + minStayValue);
		test_steps.add("Verified Min Stay Rule label for : " + RoomClass + " as number of days as : " + minStayValue);
		String color = driver.findElement(By.xpath(min)).getAttribute("class");
		Utility.app_logs.info("Min Stay Rule color : " + color);
		if (color.contains("red")) {
			color = "Red";
		} else if (color.contains("green")) {
			color = "Green";
		} else {
			color = "No Color";
		}
		Utility.app_logs.info("Min Stay Rule color : " + color);
		return color;
	}

	public void select_RoomWithRatePlanRulesValidation(WebDriver driver, ArrayList test_steps, String RoomClass,
			String IsAssign, String Account, String checkinColor, String checkoutColor, String minStaycolor,
			int minNights) throws InterruptedException {
		reslogger.info(RoomClass);
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";
		reslogger.info(room);
		Wait.WaitForElement(driver, room);

		String rooms = driver.findElement(By.xpath(room)).getText();

		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
//			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				reslogger.info(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				Random random = new Random();
				int randomNumber = random.nextInt(count1 - 1) + 1;
				reslogger.info("count : " + count1);
				reslogger.info("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[text()='" + RoomClass
					+ "']/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			if (driver.findElements(By.xpath(select)).size() > 0) {
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();
			} else {
				String selected = "//section[@class='ir-roomClassDetails manual-override']//span[text()='" + RoomClass
						+ "']/../../../following-sibling::div/div//span[contains(@data-bind,'SELECT')]/..";
				Wait.WaitForElement(driver, selected);
				driver.findElement(By.xpath(selected)).click();
			}

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 10) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (minStaycolor.equalsIgnoreCase("Red")) {
					String min = "//p[text()='Selecting this room will violate the following rules']/..//div[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'"
							+ minNights + " NIGHT')]";
					Wait.WaitForElement(driver, min);
					test_steps.add("Verified min stay rule in the rules broken pop up as : " + minNights + " night");
					reslogger.info("Verified min stay rule in the rules broken pop up as : " + minNights + " night");
				}

				if (checkinColor.equalsIgnoreCase("Red")) {
					String min = "//p[text()='Selecting this room will violate the following rules']/..//div";
					Wait.WaitForElement(driver, min);
					String nocheckin = driver.findElement(By.xpath(min)).getText();
					if (nocheckin.contains("No Check In")) {
						test_steps.add("Verified no check in rule in the rules broken pop up");
						reslogger.info("Verified no check in rule in the rules broken pop up");
					}
				}

				if (checkoutColor.equalsIgnoreCase("Red")) {
					String min = "//p[text()='Selecting this room will violate the following rules']/..//div";
					Wait.WaitForElement(driver, min);
					String nocheckin = driver.findElement(By.xpath(min)).getText();
					if (nocheckin.contains("No Check out")) {
						test_steps.add("Verified no check in rule in the rules broken pop up");
						reslogger.info("Verified no check in rule in the rules broken pop up");
					}
				}

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}
			if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
				try {
					String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
					Wait.WaitForElement(driver, policy);
					driver.findElement(By.xpath(policy)).click();
					test_steps.add("Based on the changes made, new policies are applicable.? : yes");
					reslogger.info("Based on the changes made, new policies are applicable.? : yes");
				} catch (Exception e) {
					test_steps
							.add("No Popup Appers with Based on the changes made, new policies are applicable.? : yes");
					reslogger.info(
							"No Popup Appers with Based on the changes made, new policies are applicable.? : yes");
				}
				loading = "(//div[@class='ir-loader-in'])[2]";
				counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
	}

	public String verifyNoCheckinLabel(WebDriver driver, ArrayList<String> test_steps, String roomClass) {
		String noCheckIn = "//span[translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ')='"
				+ roomClass.toUpperCase()
				+ "']/../span[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'NO CHECK-IN') or contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'NO CHECK IN') ]";
		String color = "";
		reslogger.info(noCheckIn);
		if (driver.findElements(By.xpath(noCheckIn)).size() > 0) {
			Wait.WaitForElement(driver, noCheckIn);
			reslogger.info("Verified noCheckIn label for : " + roomClass);
			test_steps.add("Verified noCheckIn Rule label for : " + roomClass);
			color = driver.findElement(By.xpath(noCheckIn)).getAttribute("class");
			Utility.app_logs.info("noCheckin Rule color : " + color);
			if (color.contains("red")) {
				color = "Red";
			} else if (color.contains("green")) {
				color = "Green";
			} else {
				color = "No Color";
			}
		} else {
			color = "No Color";
		}
		Utility.app_logs.info("noCheckin Rule color : " + color);
		return color;
	}

	public String verifyNoCheckoutLabel(WebDriver driver, ArrayList<String> test_steps, String roomClass) {
		String noCheckOut = "//span[translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ')='"
				+ roomClass.toUpperCase()
				+ "']/../span[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'NO CHECK-OUT') or contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'NO CHECK-OUT')]";
		String color = "";
		if (driver.findElements(By.xpath(noCheckOut)).size() > 0) {
			Wait.WaitForElement(driver, noCheckOut);
			reslogger.info("Verified noCheckOut label for : " + roomClass);
			test_steps.add("Verified noCheckOut Rule label for : " + roomClass);
			color = driver.findElement(By.xpath(noCheckOut)).getAttribute("class");
			Utility.app_logs.info("noCheckOut Rule color : " + color);
			if (color.contains("red")) {
				color = "Red";
			} else if (color.contains("green")) {
				color = "Green";
			} else {
				color = "No Color";
			}
		} else {
			color = "No Color";
		}
		Utility.app_logs.info("noCheckOut Rule color : " + color);
		return color;
	}

	public ArrayList select_MRBRoomsRatePlanValidation(WebDriver driver, ArrayList test_steps, String RoomClass,
			String IsAssign, String Account, String Adults, ArrayList<String> minStayColorMRB,
			ArrayList minStayRuleValueMRB, ArrayList<String> nocheckinColorMRB, ArrayList<String> nocheckoutColorMRB)
			throws InterruptedException {

		String[] roomclass = RoomClass.split("\\|");
		String[] adults = Adults.split("\\|");
		int size = adults.length;
		ArrayList al = new ArrayList();
		for (int i = 1; i <= size; i++) {
			String Applypolicy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
			if (driver.findElements(By.xpath(Applypolicy)).size() > 0) {
				Wait.WaitForElement(driver, Applypolicy);
				Wait.wait3Second();
				driver.findElement(By.xpath(Applypolicy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");
			}
			Wait.wait5Second();
			String rm = "//span[text()='Room " + i + " of " + size + "']";
			if (driver.findElement(By.xpath(rm)).isDisplayed()) {
				test_steps.add("Room " + i + " of " + size + " is displayed");
				reslogger.info("Room " + i + " of " + size + " is displayed");
			} else {
				String clickOnPopUpYesBut = "(//div[@class='row']//button[contains(text(),'Yes')])[3]";
				driver.findElement(By.xpath(clickOnPopUpYesBut)).click();
			}
			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1].trim() + "')]/following-sibling::span";
			Wait.WaitForElement(driver, rulessize);
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();

			String room = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../div[2]/span)";
			reslogger.info(room);
			Wait.WaitForElement(driver, room);
			Wait.wait2Second();
			String rooms = driver.findElement(By.xpath(room)).getText();
			reslogger.info(rooms);
			String[] roomsCount = rooms.split(" ");
			int count = Integer.parseInt(roomsCount[0].trim());

			String cost = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/span)";

			Utility.ScrollToElement(driver.findElement(By.xpath(room)), driver);

			cost = driver.findElement(By.xpath(cost)).getText();
			cost = cost.trim();
			cost = cost.substring(1, cost.length());
			reslogger.info("cost : " + cost);
			al.add(cost);
			if (count > 0) {
				test_steps.add("Selecting room class : " + roomclass[i - 1]);
				reslogger.info("Selecting room class : " + roomclass[i - 1]);
				String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select";
				WebElement ele = driver.findElement(By.xpath(sel));
				if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
					Wait.WaitForElement(driver, unAssign);
					driver.findElement(By.xpath(unAssign)).click();
					test_steps.add("Selected room number : Unassigned");
					reslogger.info("Selected room number : Unassigned");

				} else {
					String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select/option";
					reslogger.info(roomnum);
					int count1 = driver.findElements(By.xpath(roomnum)).size();
					Random random = new Random();
					randomNumber = random.nextInt(count1 - 1) + 1;
					reslogger.info("count : " + count1);
					reslogger.info("randomNumber : " + randomNumber);
					Wait.WaitForElement(driver, sel);

					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.wait2Second();
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
							+ randomNumber + "]/a/span";
					Wait.WaitForElement(driver, roomNumber);
					driver.findElement(By.xpath(roomNumber)).click();
				}

				String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();

				String loading = "(//div[@class='ir-loader-in'])[2]";
				int counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
				reslogger.info("Waited to loading symbol");

				reslogger.info("Rule Count : " + ruleCount);
				if (ruleCount > 1) {

					String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";
					counter = 0;
					Wait.wait3Second();
					if (driver.findElements(By.xpath(rules)).size() > 0) {

						Utility.app_logs.info("minStayRuleMRB.get(i-1) : " + minStayColorMRB.get(i - 1));

						if (minStayColorMRB.get(i - 1).equalsIgnoreCase("Red")) {
							String min = "//p[text()='Selecting this room will violate the following rules']/..//div[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'"
									+ minStayRuleValueMRB.get(i - 1) + " NIGHT')]";
							Wait.WaitForElement(driver, min);
							test_steps.add("Verified min stay rule in the rules broken pop up as : "
									+ minStayRuleValueMRB.get(i - 1) + " night");
							reslogger.info("Verified min stay rule in the rules broken pop up as : "
									+ minStayRuleValueMRB.get(i - 1) + " night");
						}

						if (nocheckinColorMRB.get(i - 1).equalsIgnoreCase("Red")) {
							String min = "//p[text()='Selecting this room will violate the following rules']/..//div";
							Wait.WaitForElement(driver, min);
							String nocheckin = driver.findElement(By.xpath(min)).getText();
							if (nocheckin.contains("No Check In")) {
								test_steps.add("Verified no check in rule in the rules broken pop up");
								reslogger.info("Verified no check in rule in the rules broken pop up");
							}
						}

						if (nocheckoutColorMRB.get(i - 1).equalsIgnoreCase("Red")) {
							String min = "//p[text()='Selecting this room will violate the following rules']/..//div";
							Wait.WaitForElement(driver, min);
							String nocheckin = driver.findElement(By.xpath(min)).getText();
							if (nocheckin.contains("No Check out")) {
								test_steps.add("Verified no check in rule in the rules broken pop up");
								reslogger.info("Verified no check in rule in the rules broken pop up");
							}

						}

						driver.findElement(By.xpath(rules)).click();
						test_steps.add(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
						reslogger.info(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

						loading = "(//div[@class='ir-loader-in'])[2]";
						counter = 0;
						while (true) {
							if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
								break;
							} else if (counter == 3) {
								break;
							} else {
								counter++;
								Wait.wait3Second();
							}
						}
					}
				}

				if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
					if (i == 1) {
						String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
						if (driver.findElements(By.xpath(policy)).size() > 0) {
							Wait.WaitForElement(driver, policy);
							driver.findElement(By.xpath(policy)).click();
							test_steps.add("Based on the changes made, new policies are applicable.? : yes");
							reslogger.info("Based on the changes made, new policies are applicable.? : yes");

							loading = "(//div[@class='ir-loader-in'])[2]";
							counter = 0;
							while (true) {
								if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
									break;
								} else if (counter == 3) {
									break;
								} else {
									counter++;
									Wait.wait2Second();
								}
							}
						}
					}
				}
			} else {
				test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
				reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
			}
		}
		return al;
	}

	public ArrayList<String> verifyRatePlanForMRB(WebDriver driver, ArrayList<String> test_steps, String Rateplan) {
		String[] rate = Rateplan.split("\\|");
		String rateplan = "//span[contains(text(),'RATE PLAN: ')]/following-sibling::span";
		ArrayList<String> al = new ArrayList<String>();
		for (int i = 0; i < rate.length; i++) {
			rateplan = "(//span[contains(text(),'RATE PLAN: ')]/following-sibling::span)[" + (i + 1) + "]";
			al.add(driver.findElement(By.xpath(rateplan)).getText());

		}
		return al;
	}

	public String verifyRatePlan(WebDriver driver, ArrayList<String> test_steps, String RateplanName) {
		String rateplan = "//span[contains(text(),'RATE PLAN:')]/following-sibling::span";
		String ratePlan = driver.findElement(By.xpath(rateplan)).getText();
		return ratePlan;
	}

	public boolean verifyFolioName(WebDriver driver, ArrayList<String> test_steps, String FolioName) {
		String folioName = "//a[text()='" + FolioName + "']";
		Utility.app_logs.info(folioName);
		boolean flag = false;
		if (driver.findElements(By.xpath(folioName)).size() > 0) {
			flag = true;
		}
		return flag;
	}

	public double calculateRatesAsPerAdultsAndChildCapacityMRB(WebDriver driver, HashMap<String, String> ratePerNight,
			String ratePlanAdult, String ratePlanChild, HashMap<String, String> addAdultPerNight,
			HashMap<String, String> addChildPerNight, String roomClassPersons, String roomClassAdult,
			String reservationAdult, String reservationChild, ArrayList<String> testSteps, String message,
			String roomClass, List<Date> dates, String format)
			throws InterruptedException, NumberFormatException, ParseException {

		double sumValue = 0.00;
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		ArrayList<Double> rateAdultChild = new ArrayList<Double>();
		double rate = 0.00;
		int reservationTotalAdultAndChild = Integer.parseInt(reservationAdult) + Integer.parseInt(reservationChild);

		if (!reservationAdult.equals("0") && !reservationChild.equals("0")) {
			if (Integer.parseInt(reservationAdult) <= Integer.parseInt(ratePlanAdult)
					&& reservationTotalAdultAndChild <= Integer.parseInt(ratePlanChild)) {
				for (int i = 0; i < dates.size() - 1; i++) {
					rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
							format);
					sumValue = sumValue + rateAdultChild.get(0);
					rate = sumValue;
				}
				reslogger.info(rate);
				// verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));

			} else if (Integer.parseInt(reservationAdult) <= Integer.parseInt(ratePlanAdult)
					&& reservationTotalAdultAndChild > Integer.parseInt(ratePlanChild)
					&& !(reservationTotalAdultAndChild > Integer.parseInt(roomClassPersons))) {
				int child = reservationTotalAdultAndChild - Integer.parseInt(ratePlanChild);
				for (int i = 0; i < dates.size() - 1; i++) {
					rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
							format);
					double alwaysChild = rateAdultChild.get(0) + (child * rateAdultChild.get(2));
					sumValue = sumValue + alwaysChild;
					rate = sumValue;
				}
				reslogger.info(rate);
				// verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));
			} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(ratePlanAdult)
					&& Integer.parseInt(reservationChild) <= Integer.parseInt(ratePlanAdult)
					&& !(Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult))) {
				int adult = Integer.parseInt(reservationAdult) - Integer.parseInt(ratePlanAdult);
				for (int i = 0; i < dates.size() - 1; i++) {
					rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
							format);
					double alwaysAdult = rateAdultChild.get(0) + (adult * rateAdultChild.get(1));
					sumValue = sumValue + alwaysAdult;
					rate = sumValue;
				}
				reslogger.info(rate);
				// verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));
			} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(ratePlanAdult)
					&& reservationTotalAdultAndChild <= Integer.parseInt(ratePlanChild)
					&& !(Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult))) {
				int adult = Integer.parseInt(reservationAdult) - Integer.parseInt(ratePlanAdult);
				for (int i = 0; i < dates.size() - 1; i++) {
					rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
							format);
					double alwaysAdult = rateAdultChild.get(0) + (adult * rateAdultChild.get(1));
					sumValue = sumValue + alwaysAdult;
					rate = sumValue;
				}
				reslogger.info(rate);
				// verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));
			} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(ratePlanAdult)
					&& reservationTotalAdultAndChild > Integer.parseInt(ratePlanChild)
					&& !(Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult))
					&& !(reservationTotalAdultAndChild > Integer.parseInt(roomClassPersons))) {
				int adult = Integer.parseInt(reservationAdult) - Integer.parseInt(ratePlanAdult);
				int child = reservationTotalAdultAndChild - Integer.parseInt(ratePlanChild);
				if (adult == child) {
					for (int i = 0; i < dates.size() - 1; i++) {
						rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
								format);
						double alwaysAdult = rateAdultChild.get(0) + (adult * rateAdultChild.get(1));
						sumValue = sumValue + alwaysAdult;
						rate = sumValue;
					}
				} else if (child > adult) {
					int newChild = child - adult;
					for (int i = 0; i < dates.size() - 1; i++) {
						rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
								format);
						double couldBeChildAndAdult = rateAdultChild.get(0) + (adult * rateAdultChild.get(1))
								+ (newChild * rateAdultChild.get(2));
						sumValue = sumValue + couldBeChildAndAdult;
						rate = sumValue;
					}
				}

				reslogger.info(rate);
				// verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));
			} else if (Integer.parseInt(reservationAdult) == Integer.parseInt(ratePlanAdult)
					&& reservationTotalAdultAndChild > Integer.parseInt(ratePlanChild)
					&& !(reservationTotalAdultAndChild > Integer.parseInt(roomClassPersons))) {
				int child = reservationTotalAdultAndChild - Integer.parseInt(ratePlanChild);
				for (int i = 0; i < dates.size() - 1; i++) {
					rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
							format);
					double alwaysChild = rateAdultChild.get(0) + (child * rateAdultChild.get(2));
					sumValue = sumValue + alwaysChild;
					rate = sumValue;
				}
				reslogger.info(rate);
				// verifyRoomClassCurrency(driver,testSteps,roomClass,String.valueOf(rate));
			}
		} else if (reservationAdult.equals("0") && reservationChild.equals("0")) {
			verify_errorMessage(driver, testSteps, message);
		} else if (reservationAdult.equals("0")
				&& Integer.parseInt(reservationChild) > Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver, testSteps, message);
		} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult)
				&& reservationChild.equals("0")) {
			verify_errorMessage(driver, testSteps, message);
		} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult)
				&& Integer.parseInt(reservationChild) > Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver, testSteps, message);
		} else if (Integer.parseInt(reservationAdult) < Integer.parseInt(roomClassAdult)
				&& Integer.parseInt(reservationChild) > Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver, testSteps, message);
		} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult)
				&& Integer.parseInt(reservationChild) < Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver, testSteps, message);
		}
		return rate;

	}

	public ArrayList<String> getAllFolioRoomChargeDates(WebDriver driver, String returnFormat) {
		ArrayList<String> dates = new ArrayList<String>();

		for (WebElement el : driver.findElements(By.xpath(
				"//td[@class='lineitem-category']/span[contains(text(),'Room Charge')]/../preceding-sibling::td[@class='lineitem-date']//span"))) {
			dates.add(Utility.parseDate(el.getText(), "EEE MMM dd, yyyy", returnFormat));
		}

		return dates;
	}

	public HashMap<String, ArrayList<String>> getRoomClassFolioWiseRoomChargeDates(WebDriver driver,
			ArrayList test_steps, ArrayList<String> roomClassList, ArrayList RoomAbbri, String IsAssign,
			ArrayList Rooms, String returnFormat) throws InterruptedException {
		test_steps.add("*******************  Folio ROOM CHARGES DATES **********************");
		reslogger.info("*******************  Folio ROOM CHARGES DATES **********************");
		String abb = null;
		String roomnumber = null;
		HashMap<String, ArrayList<String>> map = new HashMap<String, ArrayList<String>>();
		reslogger.info(RoomAbbri.size());
		for (int i = 0; i < RoomAbbri.size(); i++) {
			abb = RoomAbbri.get(i).toString();

			String[] abbrivation = abb.split(":");

//			roomnumber = roomnumber.toString();
			String folio = null;
			// Utility.app_logs.info("rooomnoddd : " + rooomno[i]);
//			Utility.app_logs.info("roomnumber : " + roomnumber);
			String folioSize = "//button[contains(@title,'Guest')]";
			Wait.WaitForElement(driver, folioSize);
			driver.findElement(By.xpath(folioSize)).click();
			Wait.wait2Second();

			if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps
							.add("Folio is present : " + "Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]);
					reslogger
							.info("Folio is present : " + "Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]);

					driver.findElement(By.xpath(folio)).click();
					String roomCahrge = "//span[text()='Room Charge']";

				}
			} else if (Rooms.size() > 0) {
				roomnumber = Rooms.get(i).toString();
				String[] rooomno = roomnumber.split(":");
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim()
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps.add(
							"Folio is present : " + "Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim());
					reslogger.info(
							"Folio is present : " + "Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim());

					driver.findElement(By.xpath(folio)).click();

				}
			}
			map.put(roomClassList.get(i), getAllFolioRoomChargeDates(driver, returnFormat));
		}
		return map;
	}

	// public HashMap<String, ArrayList<String>>
	// getRoomClassFolioWiseRoomChargeDates(WebDriver driver,ArrayList<String>
	// roomClassList,ArrayList RoomAbbri, String returnFormat) throws
	// InterruptedException{
	// HashMap<String, ArrayList<String>> map = new HashMap<String,
	// ArrayList<String>>();
	//
	// for(String roomClass : roomClassList) {
	//
	// for (int i = 0; i < RoomAbbri.size(); i++) {
	// String abb = RoomAbbri.get(i).toString();
	//
	// String[] abbrivation = abb.split(":");
	//
	// String folio = null;
	//
	// String folioSize = "//button[contains(@title,'Guest')]";
	// Wait.WaitForElement(driver, folioSize);
	// driver.findElement(By.xpath(folioSize)).click();
	// Wait.wait2Second();
	//
	// folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[i] + " :
	// " + abbrivation[0]
	// + "')]";
	// reslogger.info(folio);
	// if (driver.findElements(By.xpath(folio)).size() > 0) {
	// test_steps
	// .add("Folio is present : " + "Guest Folio For " + abbrivation[i] + " : " +
	// abbrivation[0]);
	// reslogger
	// .info("Folio is present : " + "Guest Folio For " + abbrivation[i] + " : " +
	// abbrivation[0]);
	//
	// driver.findElement(By.xpath(folio)).click();
	//
	// }
	// }
	//
	// map.put(roomClass, getAllFolioRoomChargeDates(driver, returnFormat));
	// }
	//
	// return map;
	// }

	public String getFolioLineItemRoomCharge(WebDriver driver, String date, String format) {
		String path = "//td[@class='lineitem-category']/span[contains(text(),'Room Charge')]/../preceding-sibling::td[@class='lineitem-date']//span[text()='"
				+ Utility.parseDate(date, format, "EEE MMM dd, yyyy")
				+ "']/../following-sibling::td[@class='lineitem-amount']/span";
		return driver.findElement(By.xpath(path)).getText();

	}

	public HashMap<String, HashMap<String, String>> getRoomClassWiseFolioRoomChargeBasedOnDates(WebDriver driver,
			ArrayList<String> roomClasses, HashMap<String, ArrayList<String>> dates, String dateFormat,
			ArrayList RoomAbbri, String IsAssign, ArrayList Rooms) throws InterruptedException {
		HashMap<String, HashMap<String, String>> roomCharges = new HashMap<String, HashMap<String, String>>();
		String abb = null;
		String roomnumber = null;
		int i = 0;
		for (String roomClass : roomClasses) {
			ArrayList<String> datesList = dates.get(roomClass);
			HashMap<String, String> dateWiseCharges = new HashMap<String, String>();
			abb = RoomAbbri.get(i).toString();
			// roomnumber = Rooms.get(i).toString();
			String[] abbrivation = abb.split(":");
			// String[] rooomno = roomnumber.split(":");
			// roomnumber = roomnumber.toString();
			String folio = null;
			// Utility.app_logs.info("rooomnoddd : " + rooomno[i]);
			// Utility.app_logs.info("roomnumber : " + roomnumber);
			String folioSize = "//button[contains(@title,'Guest')]";
			Wait.WaitForElement(driver, folioSize);
			driver.findElement(By.xpath(folioSize)).click();
			Wait.wait2Second();

			if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps
							.add("Folio is present : " + "Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]);
					reslogger
							.info("Folio is present : " + "Guest Folio For " + abbrivation[i] + " : " + abbrivation[0]);

					driver.findElement(By.xpath(folio)).click();
					String roomCahrge = "//span[text()='Room Charge']";

				}
			} else if (Rooms.size() > 0) {
				roomnumber = Rooms.get(i).toString();
				String[] rooomno = roomnumber.split(":");
				Utility.app_logs.info("rooomnoddd : " + rooomno[i]);
				Utility.app_logs.info("roomnumber : " + roomnumber);
				folio = "//li//span[contains(text(),'Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim()
						+ "')]";
				reslogger.info(folio);
				if (driver.findElements(By.xpath(folio)).size() > 0) {
					test_steps.add(
							"Folio is present : " + "Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim());
					reslogger.info(
							"Folio is present : " + "Guest Folio For " + abbrivation[0] + " : " + rooomno[1].trim());

					driver.findElement(By.xpath(folio)).click();

				}

			}
			i++;
			for (String date : datesList) {
				String foundRoomCharge = Utility
						.removeDollarBracketsAndSpaces(getFolioLineItemRoomCharge(driver, date, dateFormat));

				test_steps.add("Found Room Charge : " + foundRoomCharge + " Where Date is : " + date
						+ " and RoomClass is : " + roomClass);
				reslogger.info("Found Room Charge : " + foundRoomCharge + " Where Date is : " + date
						+ " and RoomClass is : " + roomClass);
				dateWiseCharges.put(date, foundRoomCharge);
			}
			roomCharges.put(roomClass, dateWiseCharges);
		}

		return roomCharges;
	}

	public String[] calculateCancellationFee(String payments, String roomCharge) {

		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);

		float paid = Float.parseFloat(payments);
		float charge = Float.parseFloat(roomCharge);

		String[] decision = new String[2];

		if (paid == charge) {
			decision[0] = "alreadyPaid";
		} else if (paid > charge) {
			decision[0] = "Refund";
			decision[1] = df.format(paid - charge);
		} else if (paid < charge) {
			decision[0] = "Capture";
			decision[1] = df.format(charge - paid);
		}

		return decision;

	}

	public HashMap<String, String> createReservation(WebDriver driver, ArrayList<String> test_steps, String sourceOfRes,
			String accountFirstName, String accountLastName, String checkInDate, String checkOutDate,
			String adultsForRes, String childrenForRes, String ratePlan, String promoCode, String roomClass,
			String accountName, String salutation, String guestFirstName, String guestLastName, String phoneNumber,
			String altenativePhone, String email, String accountType, String address1, String address2, String address3,
			String city, String country, String state, String postalCode, String isGuesProfile, String travelAgent,
			String marketSegment, String referral, String paymentMethod, String cardNumber, String nameOnCard,
			String cardExpMonthAndYear, String policyToValidate, String isAccountPolicyApplicable) throws Exception {
		HashMap<String, String> data = new HashMap<>();
		Account account = new Account();
		if (sourceOfRes.equalsIgnoreCase("From Reservations page")) {
			navigateToReservationPage(driver);
			click_NewReservation(driver, test_steps);
		} else if (sourceOfRes.equalsIgnoreCase("accountReservation")) {
			account.clickNewReservationFromAccount(driver, test_steps, accountType, accountName, marketSegment,
					referral, accountFirstName, accountLastName, phoneNumber, altenativePhone, address1, address2,
					address3, email, city, state, postalCode, policyToValidate);

		} else if (sourceOfRes.equalsIgnoreCase("associateAccount")) {
			navigateToReservationPage(driver);
			click_NewReservation(driver, test_steps);

		}
		if (guestFirstName.split("\\|").length > 1) {
			createMRBReservation(driver, test_steps, checkInDate, checkOutDate, adultsForRes, childrenForRes, ratePlan,
					promoCode, roomClass, accountName, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, accountType, address1, address2, address3, city, country, state, postalCode,
					isGuesProfile, referral, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear,
					isAccountPolicyApplicable, sourceOfRes);
			try {
				driver.findElement(
						By.xpath("//span[contains(text(),'Copy Guest 1 Info from Primary Room')]/../span[1]")).click();
			} catch (Exception e) {

			}
		} else {
			data = createNormalReservation(driver, test_steps, checkInDate, checkOutDate, adultsForRes, childrenForRes,
					ratePlan, promoCode, roomClass, accountName, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, accountType, address1, address2, address3, city, country, state, postalCode,
					isGuesProfile, referral, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear,
					isAccountPolicyApplicable, sourceOfRes);

		}

		click_BookNow(driver, test_steps);
		data.put("Reservation Number", get_ReservationConfirmationNumber(driver, test_steps));
		data.put("Reservation Status", get_ReservationStatus(driver, test_steps));
		clickCloseReservationSavePopup(driver, test_steps);
		String roomChargeXpath = "(//div[text()='Room Charges']/following-sibling::div[contains(@data-bind,'showInnroadCurrency')])[1]";
		Wait.waitForElementToBeVisibile(By.xpath(roomChargeXpath), driver);
		String roomCharges = driver.findElement(By.xpath(roomChargeXpath)).getText();
		roomCharges = roomCharges.replace(TestCore.propertyCurrency, "");
		roomCharges = roomCharges.replaceAll(" ", "");
		String roomChargesPerNight = Double.toString((Double.parseDouble(roomCharges))
				/ (Double.parseDouble(Utility.differenceBetweenDates(checkInDate, checkOutDate))));
		data.put("Room Charges", roomChargesPerNight);
		return data;
	}

	public HashMap<String, String> createReservation(WebDriver driver, ArrayList<String> test_steps, String sourceOfRes,
			String checkInDate, String checkOutDate, String adults, String children, String ratePlan, String promoCode,
			String roomClass, String salutation, String guestFirstName, String guestLastName, String phoneNumber,
			String altenativePhone, String email, String address1, String address2, String address3, String city,
			String country, String state, String postalCode, String isGuesProfile, String marketSegment,
			String referral, String paymentMethod, String cardNumber, String nameOnCard, String cardExpMonthAndYear,
			int additionalGuests, String roomNumber, boolean quote, String accountName, String accountType,
			String accountFirstName, String accountLastName) throws Exception {
		HashMap<String, String> data = new HashMap<>();
		Account account = new Account();
		Tapechart tc = new Tapechart();
		Navigation nav = new Navigation();
		Groups group = new Groups();
		if (sourceOfRes.equalsIgnoreCase("From Reservations page")) {
			try {
				navigateToReservationPage(driver);
				click_NewReservation(driver, test_steps);
			} catch (Exception e) {
				click_NewReservation(driver, test_steps);
			}
		} else if (sourceOfRes.equalsIgnoreCase("Account Reservation")) {
			account.clickNewReservationFromAccount(driver, test_steps, accountType, accountName, marketSegment,
					referral, accountFirstName, accountLastName, phoneNumber, altenativePhone, address1, address2,
					address3, email, city, state, postalCode, null);

		} else if (sourceOfRes.equalsIgnoreCase("Associate Account")) {
			navigateToReservationPage(driver);
			click_NewReservation(driver, test_steps);

		} else if (sourceOfRes.equalsIgnoreCase("Group")) {
			nav.Reservation_Backward_3(driver);
			nav.groups(driver);
			ArrayList<String> accountNumbers = new ArrayList<>();
			accountFirstName = Utility.generateRandomStringWithoutNumbers();
			accountLastName = Utility.generateRandomStringWithoutNumbers();
			group.createGroupAccount(driver, test_steps, accountName, true, null, marketSegment, referral,
					accountFirstName, accountLastName, phoneNumber, address1, city, state, country, postalCode,
					accountNumbers);
			group.click_GroupNewReservation(driver, test_steps);
		}

		if (guestFirstName.split("\\|").length > 1) {
			data = createMRBReservation(driver, test_steps, checkInDate, checkOutDate, adults, children, ratePlan,
					promoCode, roomClass, accountType, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, accountType, address1, address2, address3, city, country, state, postalCode,
					isGuesProfile, referral, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear, "Yes",
					sourceOfRes, roomNumber);
			try {
				driver.findElement(
						By.xpath("//span[contains(text(),'Copy Guest 1 Info from Primary Room')]/../span[1]")).click();
			} catch (Exception e) {

			}
		} else if (sourceOfRes.equalsIgnoreCase("TapeChart")) {
			nav.Reservation_Backward_3(driver);
			tc.initiateReservationFromTapeChart(driver, test_steps, checkInDate, checkOutDate, adults, children,
					ratePlan, roomClass, "");
			tc.enterDataForTapeChartReservation(driver, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, accountName, accountType, address1, address2, address3, city, country,
					state, postalCode, isGuesProfile, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear,
					marketSegment, referral, test_steps);
		} else {
			data = createNormalReservation(driver, test_steps, checkInDate, checkOutDate, adults, children, ratePlan,
					promoCode, roomClass, accountName, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, accountType, address1, address2, address3, city, country, state, postalCode,
					isGuesProfile, referral, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear, "Yes",
					sourceOfRes, roomNumber);
		}
		if (additionalGuests > 0) {
			ArrayList<String> firstNames = new ArrayList<>();
			ArrayList<String> lastNames = new ArrayList<>();
			for (int i = 0; i < additionalGuests; i++) {
				firstNames.add(guestFirstName + i);
				lastNames.add(guestLastName + i);
			}
			enterAddMoreGuestInfoDetails(driver, test_steps, additionalGuests, firstNames, lastNames);
		}
		if (quote) {
			click_Quote(driver, test_steps);
		} else {
			click_BookNow(driver, test_steps);
		}
		data.put("Reservation Number", get_ReservationConfirmationNumber(driver, test_steps));
		data.put("Reservation Status", get_ReservationStatus(driver, test_steps));
		clickCloseReservationSavePopup(driver, test_steps);
		String roomChargeXpath = "(//div[contains(text(),'Room Charges')]//following-sibling::div[contains(@data-bind,'showInnroadCurrency')])[1]";
		Wait.waitForElementToBeVisibile(By.xpath(roomChargeXpath), driver);
		String roomCharges = driver.findElement(By.xpath(roomChargeXpath)).getText();
		roomCharges = roomCharges.replace(TestCore.propertyCurrency, "");
		roomCharges = roomCharges.replaceAll(" ", "");
		String roomChargesPerNight = Double.toString((Double.parseDouble(roomCharges))
				/ (Double.parseDouble(Utility.differenceBetweenDates(checkInDate, checkOutDate))));
		data.put("Room Charges", roomChargesPerNight);
		return data;
	}

	public void closeAllOpenedReservations(WebDriver driver) throws InterruptedException {
		String close = "//ul[@class='sec_nav']//li[5]//i";
		int size = driver.findElements(By.xpath(close)).size();
		if (size > 0) {
			do {
				try {

					// Wait.waitForElementToBeClickable(By.xpath(close), driver);
					Utility.ScrollToElement(driver.findElement(By.xpath(close)), driver);
					driver.findElement(By.xpath(close)).click();
					size = driver.findElements(By.xpath(close)).size();
				} catch (Exception e) {
					close = "(//ul[@class='sec_nav']//li[5]//i)[2]";
					Utility.ScrollToElement(driver.findElement(By.xpath(close)), driver);
					driver.findElement(By.xpath(close)).click();
					size = driver.findElements(By.xpath(close)).size();
				}
			} while (size > 0);

		}
	}

	private HashMap<String, String> createNormalReservation(WebDriver driver, ArrayList<String> test_steps,
			String checkInDate, String checkOutDate, String adultsForRes, String childrenForRes, String ratePlan,
			String promoCode, String roomClass, String account, String salutation, String guestFirstName,
			String guestLastName, String phoneNumber, String altenativePhone, String email, String accountType,
			String address1, String address2, String address3, String city, String country, String state,
			String postalCode, String isGuesProfile, String referral, String paymentMethod, String cardNumber,
			String nameOnCard, String cardExpMonthAndYear, String isAccountPolicyApplicable, String sourceOfRes)
			throws Exception {
		HashMap<String, String> data = new HashMap<>();
		test_steps.add("============== Creating a new reservation ==============");
		select_CheckInDate(driver, test_steps, checkInDate);
		select_CheckoutDate(driver, test_steps, checkOutDate);
		enter_Adults(driver, test_steps, adultsForRes);
		enter_Children(driver, test_steps, childrenForRes);
		select_Rateplan(driver, test_steps, ratePlan, promoCode);
		click_FindRooms(driver, test_steps);
		ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass);
		selectRoomToReserve(driver, test_steps, roomClass, rooms.get(0));
		data.put("Room Number", rooms.get(0));
		if (Utility.validateString(account)) {
			if (sourceOfRes.equalsIgnoreCase("accountReservation")) {
				clickYesOrNoOnPolicyChangePopup(driver, test_steps, isAccountPolicyApplicable);
				click_Next(driver, test_steps);
				enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
				if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
					enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
							cardExpMonthAndYear);
				}
			} else if (sourceOfRes.equalsIgnoreCase("associateAccount")) {
				click_Next(driver, test_steps);
				if ((accountType.equalsIgnoreCase("Corporate/Member Accounts"))
						|| (accountType.equalsIgnoreCase("Unit Owners"))) {
					clickYesOrNoOnPolicyChangePopup(driver, test_steps, isAccountPolicyApplicable);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("Travel Agent"))) {
					enter_MarketSegmentDetails(driver, test_steps, account, "", referral);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("House Account"))) {
					select_HouseAccoutAsPayment(driver, test_steps, account);
					enter_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
							altenativePhone, email, "", accountType, address1, address2, address3, city, country, state,
							postalCode, isGuesProfile);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("Gift Certificate"))) {
//					select_HouseAccoutAsPayment(driver, test_steps, account);
				}
			}
		} else {
			click_Next(driver, test_steps);
			enter_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, account, accountType, address1, address2, address3, city, country, state,
					postalCode, isGuesProfile);
			if (Utility.validateString(paymentMethod)) {
				enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
			}
			enter_MarketSegmentDetails(driver, test_steps, "", "", referral);
		}
		return data;
	}

	public HashMap<String, String> createNormalReservation(WebDriver driver, ArrayList<String> test_steps,
			String checkInDate, String checkOutDate, String adultsForRes, String childrenForRes, String ratePlan,
			String promoCode, String roomClass, String account, String salutation, String guestFirstName,
			String guestLastName, String phoneNumber, String altenativePhone, String email, String accountType,
			String address1, String address2, String address3, String city, String country, String state,
			String postalCode, String isGuesProfile, String referral, String paymentMethod, String cardNumber,
			String nameOnCard, String cardExpMonthAndYear, String isAccountPolicyApplicable, String sourceOfRes,
			String roomNumber) throws Exception {
		HashMap<String, String> data = new HashMap<>();
		test_steps.add("============== Creating a new reservation ==============");
		enterCheckInDate(driver, checkInDate);
		enterCheckOutDate(driver, checkOutDate);
		// select_CheckInDate(driver, test_steps, checkInDate);
		// select_CheckoutDate(driver, test_steps, checkOutDate);
		enter_Adults(driver, test_steps, adultsForRes);
		enter_Children(driver, test_steps, childrenForRes);
		select_Rateplan(driver, test_steps, ratePlan, promoCode);
		Wait.wait3Second();
		click_FindRooms(driver, test_steps);
		if (!Utility.validateString(roomNumber)) {
			ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass);
			selectRoomToReserve(driver, test_steps, roomClass, rooms.get(0));
			data.put("Room Number", rooms.get(0));
		} else {
			selectRoomToReserve(driver, test_steps, roomClass, roomNumber);
			data.put("Room Number", roomNumber);
		}
		if (Utility.validateString(account)) {
			if (sourceOfRes.equalsIgnoreCase("Account Reservation") || sourceOfRes.equalsIgnoreCase("Group")) {
				// clickYesOrNoOnPolicyChangePopup(driver, test_steps,
				// isAccountPolicyApplicable);
				click_Next(driver, test_steps);
				enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
				if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
					enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
							cardExpMonthAndYear);
				}
			} else if (sourceOfRes.equalsIgnoreCase("Associate Account")) {
				click_Next(driver, test_steps);
				if ((accountType.equalsIgnoreCase("Corporate/Member Accounts"))
						|| (accountType.equalsIgnoreCase("Unit Owners"))) {
					clickYesOrNoOnPolicyChangePopup(driver, test_steps, isAccountPolicyApplicable);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("Travel Agent"))) {
					enter_MarketSegmentDetails(driver, test_steps, account, "", referral);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("House Account"))) {
					select_HouseAccoutAsPayment(driver, test_steps, account);
					enter_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
							altenativePhone, email, "", accountType, address1, address2, address3, city, country, state,
							postalCode, isGuesProfile);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("Gift Certificate"))) {
					// select_HouseAccoutAsPayment(driver, test_steps, account);
				}
			}
		} else {
			click_Next(driver, test_steps);
			enter_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, account, accountType, address1, address2, address3, city, country, state,
					postalCode, isGuesProfile);
			if (Utility.validateString(paymentMethod)) {
				enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
			}
			enter_MarketSegmentDetails(driver, test_steps, "", "", referral);
		}
		return data;
	}

	private void createMRBReservation(WebDriver driver, ArrayList<String> test_steps, String checkInDate,
			String checkOutDate, String adultsForRes, String childrenForRes, String ratePlan, String promoCode,
			String roomClass, String account, String salutation, String guestFirstName, String guestLastName,
			String phoneNumber, String altenativePhone, String email, String accountType, String address1,
			String address2, String address3, String city, String country, String state, String postalCode,
			String isGuesProfile, String referral, String paymentMethod, String cardNumber, String nameOnCard,
			String cardExpMonthAndYear, String isAccountPolicyApplicable, String sourceOfRes) throws Exception {
		test_steps.add("============== Creating an MRB reservation ==============");
		select_Dates(driver, test_steps, checkInDate, checkOutDate, adultsForRes, childrenForRes, ratePlan, "", "");
		clickOnFindRooms(driver, test_steps);
		if (Utility.validateString(account)) {
			if (sourceOfRes.equalsIgnoreCase("accountReservation")) {
				ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
						roomClass.split("\\|")[0]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
				clickYesOrNoOnPolicyChangePopup(driver, test_steps, isAccountPolicyApplicable);
				rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
				click_Next(driver, test_steps);
				enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
				if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
					enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
							cardExpMonthAndYear);
				}
			} else if (sourceOfRes.equalsIgnoreCase("associateAccount")) {
				ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
						roomClass.split("\\|")[0]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
				rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
				click_Next(driver, test_steps);

				if ((accountType.equalsIgnoreCase("Corporate/Member Accounts"))
						|| (accountType.equalsIgnoreCase("Unit Owners"))) {
					associateAccountInReservation(driver, test_steps, account, accountType);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("Travel Agent"))) {
					enter_MarketSegmentDetails(driver, test_steps, account, "", referral);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("House Account"))) {
					select_HouseAccoutAsPayment(driver, test_steps, account);
					enter_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
							altenativePhone, email, "", accountType, address1, address2, address3, city, country, state,
							postalCode, isGuesProfile);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("Gift Certificate"))) {
//					select_HouseAccoutAsPayment(driver, test_steps, account);
				}
			}
		} else {
			ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
					roomClass.split("\\|")[0]);
			selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
			Wait.wait15Second();
			rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
			selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
			click_Next(driver, test_steps);
			ArrayList<String> roomNumber = new ArrayList<>();
			enter_MRB_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, "", accountType, address1, address2, address3, city, country, state,
					postalCode, isGuesProfile, "", "", roomNumber);
			if ((account.equalsIgnoreCase("") || account.isEmpty())) {
				enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
			}
			enter_MarketSegmentDetails(driver, test_steps, "", "", referral);
		}
	}

	private HashMap<String, String> createMRBReservation(WebDriver driver, ArrayList<String> test_steps,
			String checkInDate, String checkOutDate, String adultsForRes, String childrenForRes, String ratePlan,
			String promoCode, String roomClass, String account, String salutation, String guestFirstName,
			String guestLastName, String phoneNumber, String altenativePhone, String email, String accountType,
			String address1, String address2, String address3, String city, String country, String state,
			String postalCode, String isGuesProfile, String referral, String paymentMethod, String cardNumber,
			String nameOnCard, String cardExpMonthAndYear, String isAccountPolicyApplicable, String sourceOfRes,
			String roomNo) throws Exception {
		HashMap<String, String> data = new HashMap<>();
		test_steps.add("============== Creating an MRB reservation ==============");
		select_Dates(driver, test_steps, checkInDate, checkOutDate, adultsForRes, childrenForRes, ratePlan, "", "");
		clickOnFindRooms(driver, test_steps);
		if (Utility.validateString(account)) {
			if (sourceOfRes.equalsIgnoreCase("accountReservation")
					|| sourceOfRes.equalsIgnoreCase("Account Reservation") || sourceOfRes.equalsIgnoreCase("Group")) {
				if (!Utility.validateString(roomNo)) {
					ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
							roomClass.split("\\|")[0]);
					selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
					data.put("Room Number1", rooms.get(0));
				} else {
					selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], roomNo);
					data.put("Room Number1", roomNo);
				}
				clickYesOrNoOnPolicyChangePopup(driver, test_steps, isAccountPolicyApplicable);
				Wait.wait5Second();
				if (!Utility.validateString(roomNo)) {
					ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
							roomClass.split("\\|")[1]);
					selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(1));
					data.put("Room Number2", rooms.get(0));
				} else {
					selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], roomNo);
					data.put("Room Number2", roomNo);
				}
				click_Next(driver, test_steps);
				ArrayList<String> roomNumber = new ArrayList<>();
				Add_PrimaryRoom(driver, test_steps, roomNumber);
				Add_AdditionalRoom(driver, test_steps, roomNumber);
				enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);

				if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
					enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
							cardExpMonthAndYear);
				}
			} else if (sourceOfRes.equalsIgnoreCase("associateAccount")
					|| sourceOfRes.equalsIgnoreCase("Associate Account")) {
				if (!Utility.validateString(roomNo)) {
					ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
							roomClass.split("\\|")[0]);
					selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
					data.put("Room Number1", rooms.get(0));
				} else {
					selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], roomNo);
					data.put("Room Number1", roomNo);
				}
				clickYesOrNoOnPolicyChangePopup(driver, test_steps, isAccountPolicyApplicable);
				if (!Utility.validateString(roomNo)) {
					ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
							roomClass.split("\\|")[1]);
					selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(1));
					data.put("Room Number2", rooms.get(0));
				} else {
					selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], roomNo);
					data.put("Room Number2", roomNo);
				}
				click_Next(driver, test_steps);

				if ((accountType.equalsIgnoreCase("Corporate/Member Accounts"))
						|| (accountType.equalsIgnoreCase("Unit Owners"))) {
					associateAccountInReservation(driver, test_steps, account, accountType);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("Travel Agent"))) {
					enter_MarketSegmentDetails(driver, test_steps, account, "", referral);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("House Account"))) {
					select_HouseAccoutAsPayment(driver, test_steps, account);
					enter_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
							altenativePhone, email, "", accountType, address1, address2, address3, city, country, state,
							postalCode, isGuesProfile);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("Gift Certificate"))) {
					// select_HouseAccoutAsPayment(driver, test_steps, account);
				}
			}
		} else {
			if (!Utility.validateString(roomNo)) {
				ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
						roomClass.split("\\|")[0]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
				data.put("Room Number1", rooms.get(0));
			} else {
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], roomNo);
				data.put("Room Number1", roomNo);
			}
			try {
				clickYesOrNoOnPolicyChangePopup(driver, test_steps, isAccountPolicyApplicable);
			} catch (Exception e) {

			}
			Wait.wait10Second();
			if (!Utility.validateString(roomNo)) {
				ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
						roomClass.split("\\|")[1]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(1));
				data.put("Room Number2", rooms.get(0));
			} else {
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], roomNo);
				data.put("Room Number2", roomNo);
			}
			click_Next(driver, test_steps);
			ArrayList<String> roomNumber = new ArrayList<>();
			enter_MRB_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, "", accountType, address1, address2, address3, city, country, state,
					postalCode, isGuesProfile, "Yes", "", roomNumber);
			if ((account.equalsIgnoreCase("") || account.isEmpty())) {
				enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
			}
			enter_MarketSegmentDetails(driver, test_steps, "", "", referral);
		}
		return data;
	}

	public void clickYesOrNoOnPolicyChangePopup(WebDriver driver, ArrayList<String> test_steps,
			String isAccountPolicyApplicable) {
		try {
			if (isAccountPolicyApplicable.equalsIgnoreCase("Yes")) {
				clickNoInPolicyPopUp(driver);
				test_steps.add("Clicking No button from policy changes popup");
			} else if (isAccountPolicyApplicable.equalsIgnoreCase("No")) {
				clickYesInPolicyPopUp(driver);
				test_steps.add("Clicking Yes button from policy changes popup");
			}
		}

		catch (Exception e) {
			// TODO: handle exception
		}
	}

	public void selectRoomToReserve(WebDriver driver, ArrayList<String> test_steps, String RoomClass, String roomNumber)
			throws InterruptedException {

		String availability = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ RoomClass + "')]/../../div)[2]/span";

		Wait.WaitForElement(driver, availability);
		Wait.waitForElementToBeVisibile(By.xpath(availability), driver);
		int availableRooms = Integer
				.parseInt(driver.findElement(By.xpath(availability)).getText().split(" ")[0].trim());
		if (availableRooms > 0) {
			String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
			Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
			Utility.ScrollToElement(driver.findElement(By.xpath(expand)), driver);
			driver.findElement(By.xpath(expand)).click();

			String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass
					+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='"
					+ roomNumber + "'])";
			Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
			driver.findElement(By.xpath(assignRoomNo)).click();
			test_steps.add("Selecting room <b>" + roomNumber + "</b> from <b>" + RoomClass + "</b> room class");
			reslogger.info("Selecting room " + roomNumber + " from " + RoomClass + " room class");

			String selectButton = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div/div[3]//child::a";

			reslogger.info("Select found");
			Wait.WaitForElement(driver, selectButton);
			reslogger.info("Wait");
			List<WebElement> selectButtons = driver.findElements(By.xpath(selectButton));
			int size = selectButtons.size();
			reslogger.info(size);
			if (size == 1) {
				reslogger.info("Select found");
				driver.findElement(By.xpath(selectButton)).click();
			} else {
				driver.findElement(By.xpath(selectButton)).click();
			}
			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/following-sibling::span";
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					// String loading = "(//div[@class='ir-loader-in'])[2]";
					String loading = "(//div[@id='ReservationCreate']//div[contains(@data-bind,'showLoading')])//div";
					int counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}

		} else {
			test_steps.add("Rooms are not available to select for <b>" + RoomClass + "</b>");
		}
	}

	public void selectRoomToReserve(WebDriver driver, String RoomClass, String roomNumber, ArrayList<String> test_steps)
			throws InterruptedException {
		String availability = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ RoomClass + "')]/../../div[2]/span";

		Wait.waitForElementToBeVisibile(By.xpath(availability), driver);
		int availableRooms = Integer
				.parseInt(driver.findElement(By.xpath(availability)).getText().split(" ")[0].trim());
		if (availableRooms > 0) {
			String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
			Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
			driver.findElement(By.xpath(expand)).click();

			String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass
					+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='"
					+ roomNumber + "'])";
			Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
			driver.findElement(By.xpath(assignRoomNo)).click();
			test_steps.add("Selecting room <b>" + roomNumber + "</b> from <b>" + RoomClass + "</b> room class");
			reslogger.info("Selecting room " + roomNumber + " from " + RoomClass + " room class");

			String selectButton = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			reslogger.info("Select found");
			Wait.WaitForElement(driver, selectButton);
			driver.findElement(By.xpath(selectButton)).click();
			reslogger.info("Wait");

			// String loading = "(//div[@class='ir-loader-in'])[2]";
			String loading = "(//div[@id='ReservationCreate']//div[contains(@data-bind,'visible: showLoading')])[1]//div";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");
			/*
			 * List<WebElement> selectButtons = driver.findElements(By.xpath(selectButton));
			 * int size=selectButtons.size(); reslogger.info(size); if (size == 1) {
			 * reslogger.info("Select found");
			 * driver.findElement(By.xpath(selectButton)).click(); }
			 */
		} else {
			test_steps.add("Rooms are not available to select for <b>" + RoomClass + "</b>");
		}

		try {
			Wait.wait5Second();
			String xpath = "(//p[contains(text(),'Based on the changes made, new policies are applicable.')]/following::button)[2]";
			if (driver.findElements(By.xpath(xpath)).size() > 0) {
				driver.findElement(By.xpath(xpath)).click();
				reslogger.info(
						"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?");
			} else {
				reslogger.info("in else as policy not changing");
			}
		} catch (Exception e) {
			reslogger.info("in catch as policy not changing");
		}
		// Wait.waitForElementToBeInvisibile(By.xpath("(//div[@class='ir-loader-in'])[2]"),
		// driver);
	}

	public void associateAccountInReservation(WebDriver driver, ArrayList<String> test_steps, String accountName,
			String accountType) throws Exception {
		try {
			Elements_CPReservation reservationPage = new Elements_CPReservation(driver);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Account), driver);
			reservationPage.CP_NewReservation_Account.clear();
			reservationPage.CP_NewReservation_Account.sendKeys(accountName);
			test_steps.add("Entering Account name : <b>" + accountName + "</b>");
			reslogger.info("Entering Account name : <b>" + accountName + "</b>");
			String account = "//b[contains(text(),'" + accountName.trim() + "')]/../../..";
			Wait.waitForElementToBeVisibile(By.xpath(account), driver);
			driver.findElement(By.xpath(account)).click();
			String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]"
					+ "/following-sibling::div//button[contains(text(),'Yes')]";
			Wait.waitForElementToBeVisibile(By.xpath(dataYes), driver);
			driver.findElement(By.xpath(dataYes)).click();
			test_steps.add("Do you want to replace the guest info, payment method, marketing info and notes"
					+ " in this reservation with the information from the account? Clicking yes will save all "
					+ "the account info to the reservation. : Yes");
			reslogger.info("Do you want to replace the guest info, payment method, marketing info and notes"
					+ " in this reservation with the information from the account? Clicking yes will save all "
					+ "the account info to the reservation. : Yes");

			try {
				Wait.wait10Second();
				String xpath = "(//div[contains(text(),'Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?')]/following::button)[2]";
				if (driver.findElements(By.xpath(xpath)).size() > 0) {
					driver.findElement(By.xpath(xpath)).click();
					reslogger.info(
							"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?");
				} else {
					reslogger.info("in else as policy not changing");
				}
			} catch (Exception e) {
				reslogger.info("in catch as policy not changing");
			}

		} catch (Exception e) {

			Utility.app_logs.info(e);
		}
	}

	public ArrayList<String> getAllRoomNumbersFromRoomClassDropDown(WebDriver driver, ArrayList<String> test_steps,
			String roomClass) throws InterruptedException {
		ArrayList<String> returnNumbers = new ArrayList<>();
		Wait.wait10Second();
		String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + roomClass
				+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
		Wait.waitForElementToBeClickable(By.xpath(expand), driver, 30);
		Utility.ScrollToElement(driver.findElement(By.xpath(expand)), driver);
		driver.findElement(By.xpath(expand)).click();
		String list = "//span[contains(text(),'" + roomClass
				+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[@class='text']";
		List<WebElement> roomNumbers = driver.findElements(By.xpath(list));
		for (WebElement webElement : roomNumbers) {
			String roomNumber = webElement.getText();
			if (!(roomNumber.equalsIgnoreCase("Unassigned"))) {
				returnNumbers.add(roomNumber);
			} else if (roomNumber.equalsIgnoreCase("VirtualRoom")) {
				returnNumbers.add(roomNumber);
			}
		}
		driver.findElement(By.xpath(expand)).click();
		return returnNumbers;

	}

	public HashMap<String, String> getRoomChargesFromFolioBasedOnDates(WebDriver driver, ArrayList<String> test_steps,
			String checkInDate, String checkOutDate) throws Exception {
		HashMap<String, String> roomCharges = new HashMap<>();
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		ArrayList<String> dates = Utility.getAllDatesBetweenCheckInOutDates(checkInDate, checkOutDate);
		for (String date : dates) {
			String convertedDate = Utility.parseDate(date, "dd/MM/yyyy", "EE MMM dd, yyyy");
			String roomChargeXpath = "//span[text()='" + convertedDate + "']/../..//span[text()='Room Charge']/../.."
					+ "//td[@class='lineitem-amount']";
			String roomCharge = driver.findElement(By.xpath(roomChargeXpath)).getText();
			roomCharge = roomCharge.replace("$ ", "");
			test_steps.add("Room charge for the day <b>" + date + "</b> is captured as <b>" + roomCharge + "</b>");
			roomCharges.put(date, roomCharge);
		}
		return roomCharges;
	}

	public void makeReservationNoShowWithPaymentProcess(WebDriver driver, ArrayList<String> test_steps,
			String policyType, String payments, String noShowAmount) throws Exception {
		try {
			makeReservationNoShow(driver, test_steps);
			if (verifyPaymentsIsGreaterThanNoShowAmount(payments, noShowAmount)) {
				clickConfirmCancelButton(driver, test_steps);
				clickOnRefundButtonOnNoShowPopup(driver, test_steps);
			} else {
				clickProceedToNoShowPaymentButton(driver, test_steps);
				clickLogORPayAuthorizedButton(driver, test_steps);
				checkInPaymentSuccessPopupClose(driver, test_steps);
			}
			test_steps.add("===================== Verifying Reservation status after No Show =====================");
			verifyReservationStatusStatus(driver, test_steps, policyType);
		} catch (Exception e) {
			Utility.app_logs.info(e);
		}
	}

	public void clickOnRefundButtonOnNoShowPopup(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		List<WebElement> refundButton = driver.findElements(By.xpath(OR_Reservation.ConfirmDialog_YesButton));
		if (refundButton.size() > 0) {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ConfirmDialog_YesButton), driver);
			try {
				res.CP_Reservation_ConfirmNoShowYesButton.click();
				Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_Reservation_PanelNoShowStatus), driver);
			} catch (Exception e) {
				JavascriptExecutor js = (JavascriptExecutor) driver;
				js.executeScript("arguments[0].click()", res.CP_Reservation_ConfirmNoShowYesButton);
				test_steps.add("Clicking on <b>Yes, Confirm no show & refund later</b> button");
				Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_Reservation_PanelNoShowStatus), driver);
			}
		} else {
			driver.findElement(By.xpath("//button[@data-bind='visible:noShow.isFinalStep']")).click();
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_Reservation_PanelNoShowStatus), driver);
		}
	}

	public void verifyNoShowAmountAtFolio(WebDriver driver, ArrayList<String> test_steps,
			ArrayList<String> noShowAmounts) throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Folio folio = new Folio();
		folio.disableIncludeTaxesInLineItems(driver, test_steps);
		int j = 0;
		if (!noShowAmounts.isEmpty()) {
			for (String noShowAmount : noShowAmounts) {
				String noShowAmountDisplayed = null;
				List<WebElement> rooms = res.guestFolioAllGuestsFromDropDown;
				for (int i = 0; i < rooms.size(); i++) {
					j = i + 1;
					res.guestFolioGuestDropDown.click();
					Wait.wait1Second();
					rooms.get(i).click();
					noShowAmountDisplayed = driver.findElement(By.xpath(OR_Reservation.noShowLineItemXpath)).getText();
					noShowAmountDisplayed = noShowAmountDisplayed.replace("$ ", "");
					if (noShowAmountDisplayed.equalsIgnoreCase(noShowAmount)) {
						break;
					}
				}
				try {
					assertEquals(noShowAmountDisplayed, noShowAmount,
							"Failed to verify no show amount at folio line item");
					test_steps.add("Successfully verified no show amount in folio line items displayed as " + "<b>"
							+ noShowAmountDisplayed + "</b> for guest " + j);
				} catch (Exception e) {
					test_steps.add(e.toString());
				} catch (Error e) {
					test_steps.add(e.toString());
				}
			}
		} else {
			List<WebElement> rooms = res.guestFolioAllGuestsFromDropDown;
			for (int i = 0; i < rooms.size(); i++) {
				j = i + 1;
				res.guestFolioGuestDropDown.click();
				Wait.wait1Second();
				rooms.get(i).click();
				List<WebElement> noShowLineItems = driver.findElements(By.xpath(OR_Reservation.noShowLineItemXpath));
				try {
					assertEquals(noShowLineItems.size(), 0,
							"Failed to verify no show folio line item is not displayed");
					test_steps.add(
							"Successfully verified no show folio line item is not displayed at folio for guest " + j);
				} catch (Exception e) {
					test_steps.add(e.toString());
				} catch (Error e) {
					test_steps.add(e.toString());
				}
			}
		}
	}

	public boolean verifyPaymentsIsGreaterThanNoShowAmount(String payments, String noShowAmount) {
		boolean paymentsIsGreater = false;
		if (Double.parseDouble(payments) > Double.parseDouble(noShowAmount)) {
			paymentsIsGreater = true;
		}
		return paymentsIsGreater;
	}

	public void guestDetailsTabClick(WebDriver driver, ArrayList<String> test_steps) {
		String detailsTabXpath = "//a[contains(@data-bind,'ResDetails') and text()='Details']";
		Wait.waitForElementToBeClickable(By.xpath(detailsTabXpath), driver);
		driver.findElement(By.xpath(detailsTabXpath)).click();
		test_steps.add("Clicked on guest details tab");
	}

	public void clickNoInPolicyPopUp(WebDriver driver) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		try {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.noPolicyPopup), driver);
			element.noPolicyPopup.click();
		} catch (Exception e) {
			Utility.app_logs.info(e);
			JavascriptExecutor js = (JavascriptExecutor) driver;
			js.executeScript("arguments[0].click()", element.noPolicyPopup);
		}
	}

	public boolean checkPaymentMethodIsAvailableInReservationPage(WebDriver driver, String paymentMethod) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		boolean paymentMethodIsAvail = false;
		String paymentMethodSelected = driver
				.findElement(By.xpath(
						"//div[contains(@class,'payment-method')]//button[@class='btn dropdown-toggle btn-default']"))
				.getAttribute("title");
		if (paymentMethod.equalsIgnoreCase(paymentMethodSelected)) {
			paymentMethodIsAvail = true;
		}
		return paymentMethodIsAvail;
	}

	/*
	 * public String calculationOfDepositAmountToBePaidForRateV2(ArrayList<String>
	 * roomCharges, String type, String attrValue, String roomClassSize) throws
	 * Exception{ DecimalFormat df = new DecimalFormat("0.00");
	 * df.setMaximumFractionDigits(2); String amountToBePaid = null; double
	 * paidAmount = 0.00; double noOfNightCharges = 0.00; double
	 * totalRoomCharges=0.00; if (type.equalsIgnoreCase("number of nights")) {
	 * if(Integer.parseInt(attrValue)<roomCharges.size()) { for (int
	 * i=0;i<=Integer.parseInt(attrValue)-1;i++) {
	 * noOfNightCharges=noOfNightCharges+Double.valueOf(roomCharges.toArray()[i].
	 * toString()); paidAmount = noOfNightCharges; } } else
	 * if(Integer.parseInt(attrValue)>roomCharges.size()) { for(String str:
	 * roomCharges) { totalRoomCharges=totalRoomCharges+Double.parseDouble(str); }
	 * paidAmount=totalRoomCharges; } } else if (type.equalsIgnoreCase("flat fee"))
	 * { paidAmount = Double.parseDouble(attrValue) *Double.valueOf(roomClassSize);
	 * } else if (type.equalsIgnoreCase("percent of stay")) { for(String str:
	 * roomCharges) { totalRoomCharges=totalRoomCharges+Double.parseDouble(str); }
	 * paidAmount = (Double.parseDouble(attrValue) * totalRoomCharges) / 100; }
	 * amountToBePaid = df.format(paidAmount); return amountToBePaid; }
	 * 
	 * public String calculationOfDepositAmountToBePaidForRateV2(HashMap<String,
	 * String> roomCharges, String type, String attrValue) throws Exception{
	 * DecimalFormat df = new DecimalFormat("0.00"); df.setMaximumFractionDigits(2);
	 * String amountToBePaid = null; double paidAmount = 0.00; double
	 * noOfNightCharges = 0.00; double totalRoomCharges=0.00; if
	 * (type.equalsIgnoreCase("number of nights")) {
	 * if(Integer.parseInt(attrValue)<roomCharges.size()) { for (int
	 * i=0;i<=Integer.parseInt(attrValue)-1;i++) {
	 * noOfNightCharges=noOfNightCharges+Double.valueOf(roomCharges.values().toArray
	 * ()[i].toString()); paidAmount = noOfNightCharges; } } else
	 * if(Integer.parseInt(attrValue)>roomCharges.size()) { for(String str:
	 * roomCharges.values()) {
	 * totalRoomCharges=totalRoomCharges+Double.parseDouble(str); }
	 * paidAmount=totalRoomCharges; } } else if (type.equalsIgnoreCase("flat fee"))
	 * { paidAmount = Double.parseDouble(attrValue); } else if
	 * (type.equalsIgnoreCase("percent of stay")) { for(String str:
	 * roomCharges.values()) {
	 * totalRoomCharges=totalRoomCharges+Double.parseDouble(str); } paidAmount =
	 * (Double.parseDouble(attrValue) * totalRoomCharges) / 100; } amountToBePaid =
	 * df.format(paidAmount); return amountToBePaid; }
	 */
	/*
	 * public void includeTaxesinLineItems(WebDriver driver, ArrayList<String>
	 * test_steps, boolean value) throws InterruptedException { =======
	 * 
	 * 
	 * 
	 * 
	 * public void includeTaxesinLineItems(WebDriver driver, ArrayList<String>
	 * test_steps, boolean value) throws InterruptedException { >>>>>>>
	 * AUTOMATION-1809 Elements_CPReservation res = new
	 * Elements_CPReservation(driver);
	 * Wait.WaitForElement(driver,OR_Reservation.cP_Reservation_IncludeTaxCheckBox);
	 * if(value==true) { boolean isChecked =
	 * res.cP_Reservation_IncludeTaxCheckBox.isSelected(); if (!isChecked) {
	 * Utility.ScrollToViewElementINMiddle(driver,
	 * res.cP_Reservation_IncludeTaxCheckBox);
	 * res.cP_Reservation_IncludeTaxCheckBox.click();
	 * test_steps.add("Checked Include Taxes in Line Items Check Box ");
	 * reslogger.info("Checked Include Taxes in Line Items Check Box "); } else {
	 * test_steps.add("Include Taxes in Line Items Check Box is Already Checked ");
	 * reslogger.info("Include Taxes in Line Items Check Box is Already Checked ");
	 * }}else if(value==false) { boolean isChecked =
	 * res.cP_Reservation_IncludeTaxCheckBox.isSelected(); if (isChecked) {
	 * Utility.ScrollToViewElementINMiddle(driver,
	 * res.cP_Reservation_IncludeTaxCheckBox);
	 * res.cP_Reservation_IncludeTaxCheckBox.click();
	 * test_steps.add("UnChecked Include Taxes in Line Items Check Box ");
	 * reslogger.info("UnChecked Include Taxes in Line Items Check Box "); } else {
	 * test_steps.add("Include Taxes in Line Items Check Box is Already UnChecked "
	 * );
	 * reslogger.info("Include Taxes in Line Items Check Box is Already UnChecked "
	 * ); }
	 * 
	 * }
	 * 
	 * }
	 */

	private void createMRBReservation(WebDriver driver, ArrayList<String> test_steps, String checkInDate,
			String checkOutDate, String adultsForRes, String childrenForRes, String ratePlan, String promoCode,
			String roomClass, String account, String salutation, String guestFirstName, String guestLastName,
			String phoneNumber, String altenativePhone, String email, String accountType, String address1,
			String address2, String address3, String city, String country, String state, String postalCode,
			String isGuesProfile, String referral, String paymentMethod, String cardNumber, String nameOnCard,
			String cardExpMonthAndYear, String isAccountPolicyApplicable, String sourceOfRes,
			ArrayList<String> roomNumber) throws Exception {
		test_steps.add("============== Creating an MRB reservation ==============");
		select_Dates(driver, test_steps, checkInDate, checkOutDate, adultsForRes, childrenForRes, ratePlan, "", "");
		clickOnFindRooms(driver, test_steps);
		if (Utility.validateString(account)) {
			if (sourceOfRes.equalsIgnoreCase("accountReservation")) {
				ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
						roomClass.split("\\|")[0]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
				clickYesOrNoOnPolicyChangePopup(driver, test_steps, isAccountPolicyApplicable);
				rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(2));
				click_Next(driver, test_steps);
				enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
				if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
					enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
							cardExpMonthAndYear);
				}
			} else if (sourceOfRes.equalsIgnoreCase("associateAccount")) {
				ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
						roomClass.split("\\|")[0]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
				rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
				click_Next(driver, test_steps);

				if ((accountType.equalsIgnoreCase("Corporate/Member Accounts"))
						|| (accountType.equalsIgnoreCase("Unit Owners"))) {
					associateAccountInReservation(driver, test_steps, account, accountType);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("Travel Agent"))) {
					enter_MarketSegmentDetails(driver, test_steps, account, "", referral);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("House Account"))) {
					select_HouseAccoutAsPayment(driver, test_steps, account);
					enter_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
							altenativePhone, email, "", accountType, address1, address2, address3, city, country, state,
							postalCode, isGuesProfile);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("Gift Certificate"))) {
//					select_HouseAccoutAsPayment(driver, test_steps, account);

				}
			}
		} else {
			ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
					roomClass.split("\\|")[0]);
			selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
			rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
			selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
			click_Next(driver, test_steps);

			enter_MRB_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, "", accountType, address1, address2, address3, city, country, state,
					postalCode, isGuesProfile, "", "", roomNumber);
			if ((account.equalsIgnoreCase("") || account.isEmpty())) {
				enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
			}
			enter_MarketSegmentDetails(driver, test_steps, "", "", referral);
		}
	}

	public HashMap<String, String> getHighestAmountOfPolicy(WebDriver driver, ArrayList<String> test_steps,
			HashMap<String, ArrayList<String>> allPoliciesDetails, ArrayList<String> checkInDates,
			ArrayList<String> checkOutDates) throws Exception {
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		int index = 0;
		double highestPolicyAmount = 0;
		double paymentsFromFolio = 0;
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		HashMap<String, String> policyToValidate = new HashMap<>();
		ArrayList<String> policyAttrs = allPoliciesDetails.get("Attributes");
		ArrayList<String> policyAttrValues = allPoliciesDetails.get("AttributeValues");
		ArrayList<String> policyDescs = allPoliciesDetails.get("Descriptions");
		ArrayList<String> policyNamesGet = allPoliciesDetails.get("Names");
		ArrayList<String> allAmounts = new ArrayList<>();
		List<WebElement> rooms = elements.guestFolioAllGuestsFromDropDown;
		for (int i = 0; i < policyAttrs.size(); i++) {
			elements.guestFolioGuestDropDown.click();
			Wait.wait1Second();
			rooms.get(i).click();
			HashMap<String, String> roomCharges = getRoomChargesFromFolioBasedOnDates(driver, test_steps,
					checkInDates.get(i), checkOutDates.get(i));
			allAmounts.add(calculationOfDepositAmountToBePaidForRateV2(roomCharges, policyAttrs.get(i),
					policyAttrValues.get(i)));
			paymentsFromFolio = paymentsFromFolio + Double.parseDouble(get_Payments(driver, test_steps));
		}
		for (int i = 0; i < allAmounts.size(); i++) {
			if (highestPolicyAmount < Double.parseDouble(allAmounts.get(i))) {
				index = i;
			}
		}
		String payments = df.format(paymentsFromFolio);
		test_steps.add("Total payments from multiple folio guest charges is captured as <b>" + payments + "</b>");
		test_steps.add("Highest amount of no show policy name is captured as <b>" + policyNamesGet.get(index) + "</b>");
		test_steps
				.add("Highest amount of no show policy attribute is captured as <b>" + policyAttrs.get(index) + "</b>");
		test_steps.add("Highest amount of no show policy attribute value is captured as <b>"
				+ policyAttrValues.get(index) + "</b>");
		test_steps.add(
				"Highest amount of no show policy description is captured as <b>" + policyDescs.get(index) + "</b>");

		policyToValidate.put("Name", policyNamesGet.get(index));
		policyToValidate.put("Attribute", policyAttrs.get(index));
		policyToValidate.put("AttributeValue", policyAttrValues.get(index));
		policyToValidate.put("Description", policyDescs.get(index));
		policyToValidate.put("Payments", payments);
		return policyToValidate;
	}

	public ArrayList<String> getNoShowPaymentsForAllGuests(WebDriver driver, ArrayList<String> test_steps,
			ArrayList<String> checkInDates, ArrayList<String> checkOutDates, String attr, String attrValue)
			throws Exception {
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> allAmounts = new ArrayList<>();
		List<WebElement> rooms = elements.guestFolioAllGuestsFromDropDown;
		for (int i = 0; i < rooms.size(); i++) {
			int j = i + 1;
			elements.guestFolioGuestDropDown.click();
			Wait.wait1Second();
			rooms.get(i).click();
			HashMap<String, String> roomCharges = getRoomChargesFromFolioBasedOnDates(driver, test_steps,
					checkInDates.get(i), checkOutDates.get(i));
			String noShowPayment = calculationOfDepositAmountToBePaidForRateV2(roomCharges, attr, attrValue);
			test_steps.add("No Show payment is calculated for Guest" + j + " is <b>" + noShowPayment + "</b>");
			allAmounts.add(noShowPayment);
		}
		return allAmounts;
	}

	public String getTotalOfNoShowAmounts(ArrayList<String> noShowAmounts) throws Exception {
		String totalAmount = null;
		double amount = 0.00;
		for (String string : noShowAmounts) {
			amount = amount + Double.parseDouble(string);
		}
		totalAmount = Double.toString(amount);
		return totalAmount;
	}

	public void selectReservationPaymentType(WebDriver driver, String resNumber, ArrayList<String> test_steps)
			throws Exception {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
		res.CP_NewReservation_PaymentMethod.click();

		String paymentMethod = "//label[text()='Payment Method']/preceding-sibling::div//ul/li//span[contains(text(),'Reservation')]";

		Wait.WaitForElement(driver, paymentMethod);
		driver.findElement(By.xpath(paymentMethod)).click();

		String strResNumber = "//label[text()='Reservation']/preceding-sibling::input";
		Wait.WaitForElement(driver, strResNumber);
		driver.findElement(By.xpath(strResNumber)).sendKeys(resNumber);
		test_steps.add("Enter Reservation Number : " + resNumber);
		reslogger.info("Enter Reservation Number : " + resNumber);
		Wait.wait2Second();
		String acc = "//b[text()='" + resNumber.trim() + "']";
		Wait.WaitForElement(driver, acc);
		driver.findElement(By.xpath(acc)).click();

	}

	public void mrbChangeFolio(WebDriver driver, int i, ArrayList<String> test_steps) throws Exception {
		String folio = "//button[contains(@title,'Guest Folio For')]";
		String strFolios = "//span[contains(text(),'Guest Folio For')]";

		driver.findElement(By.xpath(folio)).click();
		Wait.wait1Second();
		List<WebElement> folios = driver.findElements(By.xpath(strFolios));
		reslogger.info("Folios size: " + folios.size());

		try {
			folios.get(i).click();
		} catch (Exception e) {
			reslogger.info("There are no multiple folios available");
		}

	}

	// For ReportsV2
	public void confirmReservation(WebDriver driver) throws InterruptedException {

		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Wait.wait1Second();
		Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
		Wait.wait1Second();
		elementReservation.ReservationStatusConfirmed.click();
		Wait.wait5Second();
		String s1 = elementReservation.ReservationCurrentStatusForAll.getText();
		if (s1.equals("Confirmed")) {
			System.out.println("Successfully changed Reservation status to confirmed");
		} else {
			System.out.println("Unable to change Reservation status to confirmed");
		}
	}

	public ArrayList<String> confirmingReservation(WebDriver driver, ArrayList<String> testSteps)
			throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Wait.wait1Second();
		Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
		Wait.wait1Second();
		elementReservation.ReservationStatusConfirmed.click();
		testSteps.add("Click on Reservedion Status Confirmed");
		Wait.wait5Second();
		String s1 = elementReservation.ReservationCurrentStatusForAll.getText();
		if (s1.equals("Confirmed")) {
			System.out.println("Successfully changed Reservation status to confirmed");
			testSteps.add("Successfully changed Reservation status to confirmed");
		} else {
			System.out.println("Unable to change Reservation status to confirmed");
			testSteps.add("Unable to change Reservation status to confirmed");
		}
		return testSteps;
	}

	public void cancelReservation(WebDriver driver, String itemStatus) throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait1Second();
		Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
		elementReservation.ReservationStatusCancel.click();
		Wait.waitForElementToBeVisibile(By.xpath("//*[contains(text(),'Cancel Reservation')]"), driver);
		elementReservation.CancellationReason.sendKeys("Cancel");
		reslogger.info("Entered Cancellation reason");
		if (itemStatus.equalsIgnoreCase("void")) {
			reslogger.info("Item Status is Void");
		} else {
			try {
				reslogger.info("Enterd into try");
				try {
					driver.findElement(
							By.xpath("//span[contains(text(),'Void Room Charges')]//preceding-sibling::span")).click();
				} catch (Exception e) {
					Utility.clickThroughAction(driver, driver.findElement(
							By.xpath("//span[contains(text(),'Void Room Charges')]//preceding-sibling::span")));
				}
				reslogger.info("Unchecked void Room charges");
				Wait.wait10Second();
			} catch (Exception e) {
				reslogger.info("In catch" + e.toString());
			}
		}
		try {
			Wait.wait5Second();
			elementReservation.ProceedToCancellationPayment.click();
		} catch (Exception e) {
			e.printStackTrace();

			try {
				provideReasonForCancelAndClickOnProceedToPayWithoutPayment(driver, test_steps, "Cancel",
						itemStatus.equalsIgnoreCase("void"));
			} catch (Exception ex) {
				ex.printStackTrace();
			}
		}
		try {
//			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.Log), driver);
//			Utility.ScrollToElement(elementReservation.Log, driver);
//			elementReservation.Log.click();

			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowPaymentPopup_LogANDPayButton), driver);
			String buttonName = res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().split(" ")[0];
			Utility.ScrollToElement(res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton, driver);
			Utility.clickThroughJavaScript(driver, res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton);
			JavascriptExecutor js = (JavascriptExecutor) driver;
			js.executeScript("arguments[0].click();", res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton);
			// res.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.click();
			test_steps.add("Clicking on " + buttonName + " Button ");
			reslogger.info("Clicking on " + buttonName + " Button ");
		} catch (Exception e) {
			e.printStackTrace();
		}
		try {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelledClose), 30, driver);
			elementReservation.CancelledClose.click();
		} catch (Exception e) {
			e.printStackTrace();
		}

		Wait.wait5Second();
		String s4 = elementReservation.ReservationCurrentStatus.getText();
		if (s4.equalsIgnoreCase("Cancelled")) {
			System.out.println("Successfully changed Reservation status to Cancelled");
		} else {
			System.out.println("Unable to change Reservation status to Cancelled");
		}

	}

	public void noShowReservation(WebDriver driver, String itemStatus) throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
		elementReservation.ReservationStatusNoShow.click();

		if (itemStatus.equalsIgnoreCase("void")) {
			reslogger.info("Item Status is Void");
		} else {
			try {
				reslogger.info("Enterd into try");
				try {
					driver.findElement(
							By.xpath("//span[contains(text(),'Void Room Charges')]//preceding-sibling::span")).click();
				} catch (Exception e1) {
					Utility.clickThroughAction(driver, driver.findElement(
							By.xpath("//span[contains(text(),'Void Room Charges')]//preceding-sibling::span")));
				}
				reslogger.info("Unchecked void Room charges");
				Wait.wait10Second();
			} catch (Exception e) {
				reslogger.info("In catch " + e.toString());
			}
		}
		try {
			Utility.clickThroughJavaScript(driver, elementReservation.ConfirmNoShow);
			reslogger.info("Clicked on Confirm NoShow");
		} catch (Exception e) {

		}
		try {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ProceedToPaymentButton), 10, driver);
			// Utility.clickThroughAction(driver,
			// driver.findElement(By.xpath(OR_Reservation.ProceedToPaymentButton)));
			Wait.wait2Second();
			driver.findElement(By.xpath(OR_Reservation.ProceedToPaymentButton)).click();
			reslogger.info("Clicked on Proceed to Paymanet");
		} catch (Exception e) {

		}
		try {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.Log), 10, driver);
			elementReservation.Log.click();
			reslogger.info("Clicked on Log payment");
		} catch (Exception e) {

		}

		try {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelledClose), 30, driver);
			Utility.clickThroughAction(driver, elementReservation.CancelledClose);
			reslogger.info("Clicked on Close button");
		} catch (Exception e) {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowClose), 30, driver);
			Utility.clickThroughAction(driver, elementReservation.NoShowClose);
			reslogger.info("Clicked on Close button");
		}

		// elementReservation.ConfirmNoShow.click();
		// elementReservation.NoShowClose.click();
		Wait.waitForElementToBeVisibile(By.xpath("//*[contains(@class,'ng-status') and contains(text(),'No Show')]"),
				driver);
		Wait.wait5Second();
		String s5 = elementReservation.ReservationCurrentStatus.getText();
		if (s5.equalsIgnoreCase("NO SHOW")) {
			System.out.println("Successfully changed Reservation status to No Show");
		} else {
			System.out.println("Unable to change Reservation status to No Show");
		}
	}

	public ArrayList<String> departedReservation(WebDriver driver) throws InterruptedException {
		ArrayList<String> testSteps = new ArrayList<>();
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		testSteps.addAll(CheckInReservation(driver));
		try {
			String yesButton = "(//button[text()='Yes'])[2]";
			Wait.wait3Second();
			driver.findElement(By.xpath(yesButton)).click();
		} catch (Exception e) {
			// TODO: handle exception
		}
		elementReservation.CheckOut.click();
		testSteps.add("Click On CheckOut Reservation");
		disableGuestReportToggle(driver, test_steps, "CheckOut");
		testSteps.add("Disable Guest Report Toggle");

		try {

			elementReservation.ProceedToCheckOutPayment.click();
			testSteps.add("Click on Proceed To CheckOut Payment");

			try {
				Wait.presenceOfElementLocated(driver, OR_Reservation.roomStatusDirtyMessage, 5);
				reslogger.info("Room is Dirty");
				testSteps.add("Room is Dirty");
				List<WebElement> ele = driver.findElements(By.xpath("//button[text()='Confirm']"));
				reslogger.info("Confirm buttons: " + ele.size());
				testSteps.add("Confirm buttons: " + ele.size());
				Utility.clickThroughJavaScript(driver, ele.get(ele.size() - 1));
				// Utility.clickThroughAction(driver, ele.get(ele.size()-1));
				reslogger.info("Clicked on Confirm button");
				testSteps.add("Clicked on Confirm Button");
				// elementReservation.confirmCheckInAtDirtyMessage.click();
				// Utility.clickThroughAction(driver,
				// elementReservation.confirmCheckInAtDirtyMessage);
			} catch (Exception e) {
				reslogger.info("Room is not dirty");
				testSteps.add("Room is not dirty");
			}
			String payButton = "//span[contains(@data-bind,'text: PaymentProcessButtonText()')]";
			Wait.waitForElementToBeClickable(By.xpath(payButton), driver);
			driver.findElement(By.xpath(payButton)).click();
			testSteps.add("Clicked on Pay Button");
			Wait.wait2Second();
			String closeButton = "(//button[contains(@class,'btn ir-btn btn-default ir-mb-btn-block md ')])[2]";
			Wait.waitForElementToBeClickable(By.xpath(closeButton), driver);
			driver.findElement(By.xpath(closeButton)).click();
			testSteps.add("Clicked on Close Button");

		} catch (Exception e) {
			reslogger.info("There is no CheckIn policy");
			testSteps.add("There is no CheckIn Policy");
			try {
				Utility.clickThroughAction(driver,
						driver.findElement(By.xpath(OR_Reservation.ReservationStatusConfirmCheckin)));

			} catch (Exception e1) {
				Utility.clickThroughJavaScript(driver,
						driver.findElement(By.xpath(OR_Reservation.ReservationStatusConfirmCheckin)));

			}
		}
		return testSteps;
	}

	public void guaranteeReservation(WebDriver driver) throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Wait.wait1Second();
		Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
		Wait.wait1Second();
		elementReservation.ReservationStatusGuaranteed.click();
		try {
			elementReservation.Log.click();
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelledClose), driver);
			elementReservation.CancelledClose.click();
		} catch (Exception e) {

		}
		Wait.wait5Second();
		String s2 = elementReservation.ReservationCurrentStatusForAll.getText();
		if (s2.equalsIgnoreCase("Guaranteed")) {
			System.out.println("Successfully changed Reservation status to Guaranteed");
		} else {
			System.out.println("Unable to change Reservation status to Guaranteed");
		}

	}

	public ArrayList<String> guaranteedReservation(WebDriver driver, ArrayList<String> testSteps)
			throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Wait.wait1Second();
		Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
		Wait.wait1Second();
		elementReservation.ReservationStatusGuaranteed.click();
		testSteps.add("Click on Reservation Status Guranteed");
		try {
			elementReservation.Log.click();
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelledClose), driver);
			elementReservation.CancelledClose.click();
			testSteps.add("Click on Cancelled Close");
		} catch (Exception e) {

		}
		Wait.wait5Second();
		String s2 = elementReservation.ReservationCurrentStatusForAll.getText();
		if (s2.equalsIgnoreCase("Guaranteed")) {
			System.out.println("Successfully changed Reservation status to Guaranteed");
			testSteps.add("Successfully changed Reservation status to Guaranteed");
		} else {
			System.out.println("Unable to change Reservation status to Guaranteed");
			testSteps.add("Unable to change Reservation status to Guaranteed");
		}
		return testSteps;
	}

	public void onHoldReservation(WebDriver driver) throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
		elementReservation.ReservationStatusOnHold.click();
		Wait.wait5Second();
		String s3 = elementReservation.ReservationCurrentStatusForAll.getText();
		if (s3.equalsIgnoreCase("On Hold")) {
			System.out.println("Successfully changed Reservation status to On Hold");
		} else {
			System.out.println("Unable to change Reservation status to On Hold");
		}

	}

	public ArrayList<String> onHoldingReservation(WebDriver driver, ArrayList<String> testSteps)
			throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
		elementReservation.ReservationStatusOnHold.click();
		testSteps.add("Click on Reservation Status on Hold");
		Wait.wait5Second();
		String s3 = elementReservation.ReservationCurrentStatusForAll.getText();
		if (s3.equalsIgnoreCase("On Hold")) {
			System.out.println("Successfully changed Reservation status to On Hold");
			testSteps.add("Successfully changed Reservation status to On Hold");
		} else {
			System.out.println("Unable to change Reservation status to On Hold");
			testSteps.add("Unable to change Reservation status to On Hold");
		}
		return testSteps;

	}

	public void cancelReservation(WebDriver driver) throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Wait.wait1Second();
		Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
		elementReservation.ReservationStatusCancel.click();
		elementReservation.CancellationReason.sendKeys("Cancel");
		try {
			elementReservation.ProceedToCancellationPayment.click();
		} catch (Exception e) {
			e.printStackTrace();
		}
		try {
			elementReservation.Log.click();
		} catch (Exception e) {
			e.printStackTrace();
		}
		try {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelledClose), 30, driver);
			elementReservation.CancelledClose.click();
		} catch (Exception e) {
			e.printStackTrace();
		}

		Wait.wait5Second();
		String s4 = elementReservation.ReservationCurrentStatus.getText();
		if (s4.equalsIgnoreCase("Cancelled")) {
			System.out.println("Successfully changed Reservation status to Cancelled");
		} else {
			System.out.println("Unable to change Reservation status to Cancelled");
		}

	}

	public ArrayList noShowingReservation(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
		elementReservation.ReservationStatusNoShow.click();
		testSteps.add("Click on Reservation No Show");
		try {
			Utility.clickThroughJavaScript(driver, elementReservation.ConfirmNoShow);
			reslogger.info("Clicked on Confirm NoShow");
			testSteps.add("Clicked on Confirm NoShow");
			String closeButton = "(//button[contains(text(),'Close')])[last()]";
			Wait.waitForElementToBeClickable(By.xpath(closeButton), driver);
			driver.findElement(By.xpath(closeButton)).click();
			testSteps.add("Click on Close Button");

		} catch (Exception e) {

		}
		try {
			Wait.wait5Second();
			String voidRoom = "//span[text()='Void Room Charges']";
			driver.findElement(By.xpath(voidRoom)).click();

			Wait.wait5Second();
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ProceedToNoShowPaymentButton), 10, driver);
			try {
				elementReservation.ProceedToNoShowPaymentButton.click();
				testSteps.add("Click on Proceed To No Show Payment");
				Wait.presenceOfElementLocated(driver, OR_Reservation.roomStatusDirtyMessage, 5);
				reslogger.info("Room is Dirty");
				testSteps.add("Room is Dirty");
				List<WebElement> ele = driver.findElements(By.xpath("//button[text()='Confirm']"));
				reslogger.info("Confirm buttons: " + ele.size());
				testSteps.add("Confirm buttons: " + ele.size());
				Utility.clickThroughJavaScript(driver, ele.get(ele.size() - 1));
				// Utility.clickThroughAction(driver, ele.get(ele.size()-1));
				reslogger.info("Clicked on Confirm button");
				testSteps.add("Clicked on Confirm button");
				// elementReservation.confirmCheckInAtDirtyMessage.click();
				// Utility.clickThroughAction(driver,
				// elementReservation.confirmCheckInAtDirtyMessage);
			} catch (Exception e) {
				reslogger.info("Room is not dirty");
				testSteps.add("Room is not dirty");
			}
			try {
				String payButton = "//span[contains(@data-bind,'text: PaymentProcessButtonText()')]";
				Wait.waitForElementToBeClickable(By.xpath(payButton), driver);
				driver.findElement(By.xpath(payButton)).click();
				testSteps.add("Click on Pay Button");
				Wait.wait10Second();
				String closeButton = "(//button[contains(text(),'CLOSE')])[2]";
				Wait.waitForElementToBeClickable(By.xpath(closeButton), driver);
				driver.findElement(By.xpath(closeButton)).click();
				testSteps.add("Click on Close Button");
			} catch (Exception e) {
				// TODO: handle exception
			}

		} catch (Exception e) {

			reslogger.info("There is no NoShow policy");
			testSteps.add("There is no NoShow policy");

		}

		// elementReservation.ConfirmNoShow.click();
		// elementReservation.NoShowClose.click();
		Wait.wait5Second();
		String s5 = elementReservation.ReservationCurrentStatusForAll.getText();
		if (s5.equalsIgnoreCase("NO SHOW")) {
			reslogger.info("Successfully changed Reservation status to No Show");
			testSteps.add("Successfully changed Reservation status to No Show");
		} else {
			reslogger.info("Unable to change Reservation status to No Show");
			testSteps.add("Unable to change Reservation status to No Show");
		}
		return testSteps;
	}

	public ArrayList<String> cancelingReservation(WebDriver driver, ArrayList<String> testSteps)
			throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Wait.wait1Second();
		Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
		elementReservation.ReservationStatusCancel.click();
		elementReservation.CancellationReason.sendKeys("Cancel");
		testSteps.add("Click on Cancel Reservation");

		try {
			Wait.wait5Second();
			if (!elementReservation.VoidRC_Chkbox_In_Popup.isEnabled()) {
				elementReservation.VoidRC_Chkbox_In_Popup.click();
				Wait.wait5Second();
				elementReservation.ProceedToCancellationPayment.click();
//				Wait.wait5Second();
//				String confirmCancellation="(//span[text()='CONFIRM CANCELLATION'])[2]";
//				driver.findElement(By.xpath(confirmCancellation)).click();
			} else {
				Wait.wait5Second();
				String confirmCancellation = "(//span[text()='CONFIRM CANCELLATION'])[1]";
				Wait.wait5Second();
				driver.findElement(By.xpath(confirmCancellation)).click();
			}

			try {
				Wait.presenceOfElementLocated(driver, OR_Reservation.roomStatusDirtyMessage, 5);
				reslogger.info("Room is Dirty");
				testSteps.add("Room is Dirty");
				List<WebElement> ele = driver.findElements(By.xpath("//button[text()='Confirm']"));
				reslogger.info("Confirm buttons: " + ele.size());
				testSteps.add("Confirm buttons: " + ele.size());
				Utility.clickThroughJavaScript(driver, ele.get(ele.size() - 1));
				// Utility.clickThroughAction(driver, ele.get(ele.size()-1));
				reslogger.info("Clicked on Confirm button");
				testSteps.add("Clicked on Confirm button");
				// elementReservation.confirmCheckInAtDirtyMessage.click();
				// Utility.clickThroughAction(driver,
				// elementReservation.confirmCheckInAtDirtyMessage);
			} catch (Exception e) {
				reslogger.info("Room is not dirty");
				testSteps.add("Room is not dirty");
			}
			try {
				String payButton = "//span[contains(@data-bind,'text: PaymentProcessButtonText()')]";
				Wait.waitForElementToBeClickable(By.xpath(payButton), driver);
				driver.findElement(By.xpath(payButton)).click();
				testSteps.add("Click on Pay Button");
				Wait.wait10Second();
				String closeButton = "//button[contains(@data-bind,'cancellationPostRenderEvents')]";
				Wait.waitForElementToBeClickable(By.xpath(closeButton), driver);
				driver.findElement(By.xpath(closeButton)).click();
				testSteps.add("Click on Close Button");
			} catch (Exception e) {
				// TODO: handle exception
			}

		} catch (Exception e) {

			reslogger.info("There is no Cancel policy");
		}
		String s4 = elementReservation.ReservationCurrentStatusForAll.getText();
		if (s4.equalsIgnoreCase("Cancelled")) {
			System.out.println("Successfully changed Reservation status to Cancelled");
			testSteps.add("Successfully changed Reservation status to Cancelled");
		} else {
			System.out.println("Unable to change Reservation status to Cancelled");
			testSteps.add("Unable to change Reservation status to Cancelled");
		}
		return testSteps;

	}

	public void noShowReservation(WebDriver driver) throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
		elementReservation.ReservationStatusNoShow.click();
		try {
			Utility.clickThroughJavaScript(driver, elementReservation.ConfirmNoShow);
			reslogger.info("Clicked on Confirm NoShow");
		} catch (Exception e) {

		}
		try {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ProceedToNoShowPaymentButton), 10, driver);
			// Utility.clickThroughAction(driver,
			// driver.findElement(By.xpath(OR_Reservation.ProceedToPaymentButton)));
			Wait.wait2Second();
			driver.findElement(By.xpath(OR_Reservation.ProceedToNoShowPaymentButton)).click();
			reslogger.info("Clicked on Proceed to Paymanet");
		} catch (Exception e) {

		}
		try {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.Log), 10, driver);
			elementReservation.Log.click();
			reslogger.info("Clicked on Log payment");
		} catch (Exception e) {

		}

		try {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelledClose), 30, driver);
			Utility.clickThroughAction(driver, elementReservation.CancelledClose);
			reslogger.info("Clicked on Close button");
		} catch (Exception e) {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.NoShowClose), 30, driver);
			Utility.clickThroughAction(driver, elementReservation.NoShowClose);
			reslogger.info("Clicked on Close button");
		}

		// elementReservation.ConfirmNoShow.click();
		// elementReservation.NoShowClose.click();
		Wait.wait5Second();
		String s5 = elementReservation.ReservationCurrentStatus.getText();
		if (s5.equalsIgnoreCase("NO SHOW")) {
			System.out.println("Successfully changed Reservation status to No Show");
		} else {
			System.out.println("Unable to change Reservation status to No Show");
		}
	}

	public ArrayList<String> CheckInReservation(WebDriver driver) throws InterruptedException {
		ArrayList<String> testSteps = new ArrayList<>();
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		elementReservation.CheckinReservation.click();
		testSteps.add("Click on Check In Reservation");
		disableGuestReportToggle(driver, test_steps, "CheckIn");
		testSteps.add("Disable Guest Report Toggle");
		// Utility.clickThroughJavaScript(driver,
		// driver.findElement(By.xpath(OR_Reservation.ReservationStatusConfirmCheckin)));

		try {

			elementReservation.ProceedToCheckInPayment.click();
			testSteps.add("Click On Proceed To CheckIn Payment");

			try {
				Wait.presenceOfElementLocated(driver, OR_Reservation.roomStatusDirtyMessage, 5);
				reslogger.info("Room is Dirty");
				testSteps.add("Room is Dirty");
				List<WebElement> ele = driver.findElements(By.xpath("//button[text()='Confirm']"));
				reslogger.info("Confirm buttons: " + ele.size());
				Utility.clickThroughJavaScript(driver, ele.get(ele.size() - 1));
				// Utility.clickThroughAction(driver, ele.get(ele.size()-1));
				reslogger.info("Clicked on Confirm button");
				testSteps.add("Clicked on Confirm button");
				// elementReservation.confirmCheckInAtDirtyMessage.click();
				// Utility.clickThroughAction(driver,
				// elementReservation.confirmCheckInAtDirtyMessage);
			} catch (Exception e) {
				reslogger.info("Room is not dirty");
				testSteps.add("Room is not dirty");
			}
			String payButton = "//span[contains(@data-bind,'text: PaymentProcessButtonText()')]";
			Wait.wait2Second();
			Wait.waitForElementToBeClickable(By.xpath(payButton), driver);
			driver.findElement(By.xpath(payButton)).click();
			testSteps.add("Click on Pay Button");
			Wait.wait2Second();
			String closeButton = "//button[contains(@data-bind,'onCloseCheckInPopup')]";
			Wait.wait2Second();
			WebElement close = driver.findElement(By.xpath(closeButton));
			Wait.waitForElementToBeVisibile(By.xpath(closeButton), driver);
			Wait.waitForElementToBeClickable(By.xpath(closeButton), driver);
			Wait.wait2Second();
			close.click();
			testSteps.add("Click on Close Button");

		} catch (Exception e) {
			// TODO: handle exception

			String confirmCheckInButton = "//span[text()='CONFIRM CHECK IN']";
			driver.findElement(By.xpath(confirmCheckInButton)).click();
			try {
				Wait.presenceOfElementLocated(driver, OR_Reservation.roomStatusDirtyMessage, 5);
				reslogger.info("Room is Dirty");
				testSteps.add("Room is Dirty");
				List<WebElement> ele = driver.findElements(By.xpath("//button[text()='Confirm']"));
				reslogger.info("Confirm buttons: " + ele.size());
				Utility.clickThroughJavaScript(driver, ele.get(ele.size() - 1));
// Utility.clickThroughAction(driver, ele.get(ele.size()-1));
				reslogger.info("Clicked on Confirm button");
				testSteps.add("Clicked on Confirm button");
// elementReservation.confirmCheckInAtDirtyMessage.click();
// Utility.clickThroughAction(driver,
// elementReservation.confirmCheckInAtDirtyMessage);
			} catch (Exception ex) {
				reslogger.info("Room is not dirty");
				testSteps.add("Room is not dirty");
			}
		}
		return testSteps;
	}

	public void inHouseReservation(WebDriver driver) throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);

		Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
		try {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ReservationStatusCheckin), driver, 60);
			elementReservation.ReservationStatusCheckin.click();
		} catch (Exception e) {
			elementReservation.CP_Reservation_CheckInAllButton.click();
		}
		generatGuestReportToggle(driver, test_steps, "No");
		// Utility.clickThroughJavaScript(driver,
		// driver.findElement(By.xpath(OR_Reservation.ReservationStatusConfirmCheckin)));
		try {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ProceedToCheckInPayment), driver);
			elementReservation.ProceedToCheckInPayment.click();
		} catch (Exception e) {
			reslogger.info("There is no CheckIn policy");
			try {
				Utility.clickThroughAction(driver,
						driver.findElement(By.xpath(OR_Reservation.ReservationStatusConfirmCheckin)));

			} catch (Exception e1) {
				Utility.clickThroughJavaScript(driver,
						driver.findElement(By.xpath(OR_Reservation.ReservationStatusConfirmCheckin)));
			}
		}
		Wait.wait5Second();
		try {
			Wait.presenceOfElementLocated(driver, OR_Reservation.roomStatusDirtyMessage, 20);
			reslogger.info("Room is Dirty");
			List<WebElement> ele = driver.findElements(By.xpath("//button[text()='Confirm']"));
			reslogger.info("Confirm buttons: " + ele.size());
			Utility.clickThroughJavaScript(driver, ele.get(ele.size() - 1));
			// Utility.clickThroughAction(driver, ele.get(ele.size()-1));
			reslogger.info("Clicked on Confirm button");
			// elementReservation.confirmCheckInAtDirtyMessage.click();
			// Utility.clickThroughAction(driver,
			// elementReservation.confirmCheckInAtDirtyMessage);
		} catch (Exception e) {
			reslogger.info("Room is not dirty");
		}
		try {
			String payButton = "//a[contains(text(),'Pay') and contains(@data-bind,'ready-to-process')]";
			Wait.waitForElementToBeClickable(By.xpath(payButton), driver);
			Utility.ScrollToElement(driver.findElement(By.xpath(payButton)), driver);
			driver.findElement(By.xpath(payButton)).click();
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.checkOutButtonClose), driver);
			elementReservation.checkOutButtonClose.click();
		} catch (Exception e) {

			try {
				selectPaymentMethod(driver, Amount);
			} catch (Exception e1) {
				// TODO: handle exception
			}
		}
		Wait.wait5Second();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ReservationCurrentStatus), driver);
		String s6 = elementReservation.ReservationCurrentStatus.getText();
		System.out.println("s6=" + s6);
		if (s6.equalsIgnoreCase("In-House")) {
			System.out.println("Successfully changed Reservation status to In-House");
		} else {
			System.out.println("Unable to change Reservation status to In-House");
		}
	}

	public void createMRBReservations(WebDriver driver, ArrayList<String> test_steps, String checkInDate,
			String checkOutDate, String adultsForRes, String childrenForRes, String ratePlan, String promoCode,
			String roomClass, String isAssign, String isaccount, String account, String salutation,
			String guestFirstName, String guestLastName, String phoneNumber, String altenativePhone, String email,
			String accountType, String address1, String address2, String address3, String city, String country,
			String state, String postalCode, String isGuesProfile, String referral, String paymentMethod,
			String cardNumber, String nameOnCard, String cardExpMonthAndYear, String isAccountPolicyApplicable,
			String sourceOfRes, ArrayList<String> roomNumber) throws Exception {
		test_steps.add("============== Creating an MRB reservation ==============");
		select_Dates(driver, test_steps, checkInDate, checkOutDate, adultsForRes, childrenForRes, ratePlan, "", "");
		clickOnFindRooms(driver, test_steps);
		if (Utility.validateString(account)) {
			if (sourceOfRes.equalsIgnoreCase("accountReservation")) {
				ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
						roomClass.split("\\|")[0]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
				clickYesOrNoOnPolicyChangePopup(driver, test_steps, isAccountPolicyApplicable);
				rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
				click_Next(driver, test_steps);
				enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
				if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
					enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
							cardExpMonthAndYear);
				}
			} else if (sourceOfRes.equalsIgnoreCase("associateAccount")) {
				ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
						roomClass.split("\\|")[0]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
				rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
				selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
				click_Next(driver, test_steps);

				if ((accountType.equalsIgnoreCase("Corporate/Member Accounts"))
						|| (accountType.equalsIgnoreCase("Unit Owners"))) {
					associateAccountInReservation(driver, test_steps, account, accountType);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("Travel Agent"))) {
					enter_MarketSegmentDetails(driver, test_steps, account, "", referral);
					enter_GuestName(driver, test_steps, salutation, guestFirstName, guestLastName);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("House Account"))) {
					select_HouseAccoutAsPayment(driver, test_steps, account);
					enter_MailingAddress(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
							altenativePhone, email, "", accountType, address1, address2, address3, city, country, state,
							postalCode, isGuesProfile);
					if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
						enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard,
								cardExpMonthAndYear);
					}
				} else if ((accountType.equalsIgnoreCase("Gift Certificate"))) {
//					select_HouseAccoutAsPayment(driver, test_steps, account);
				}
			}
		} else {
			/*
			 * ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver,
			 * test_steps, roomClass.split("\\|")[0]); selectRoomToReserve(driver,
			 * test_steps, roomClass.split("\\|")[0], rooms.get(0)); rooms =
			 * getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
			 * roomClass.split("\\|")[1]); selectRoomToReserve(driver, test_steps,
			 * roomClass.split("\\|")[1], rooms.get(0));
			 */

			select_MRBRooms(driver, test_steps, roomClass, isAssign, isaccount);
			click_Next(driver, test_steps);

			/*
			 * enter_MRB_MailingAddress(driver, test_steps, salutation, guestFirstName,
			 * guestLastName, phoneNumber, altenativePhone, email, "", accountType,
			 * address1, address2, address3, city, country, state, postalCode,
			 * isGuesProfile, "", "",roomNumber);
			 */
			enter_MRB_MailingAddressForMRB(driver, test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
					altenativePhone, email, "", accountType, address1, address2, address3, city, country, state,
					postalCode, isGuesProfile, "", "", roomNumber);
			if ((account.equalsIgnoreCase("") || account.isEmpty())) {
				enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
			}
			enter_MarketSegmentDetails(driver, test_steps, "", "", referral);
		}

	}

	public String getReservationNoShowPolicy(WebDriver driver) {
		String noShow = "//a[contains(@data-bind,'click:cancelNoShow')]/..";
		Wait.WaitForElement(driver, noShow);
		driver.findElement(By.xpath(noShow)).click();

		String noShowPolicy = "//a[contains(@data-bind,'click:cancelNoShow')]/../../..//label/../div/button/span";
		Wait.WaitForElement(driver, noShowPolicy);
		return driver.findElement(By.xpath(noShowPolicy)).getText();

	}

	public String getReservationDepositPolicy(WebDriver driver) {
		String deposit = "//div[@id='accordion']/div";
		Wait.WaitForElement(driver, deposit);
		driver.findElement(By.xpath(deposit)).click();

		String depositPolicy = "//div[@id='accordion']/div/div//label[text()='Deposit Policy']/following-sibling::div/button/span";
		Wait.WaitForElement(driver, depositPolicy);
		return driver.findElement(By.xpath(depositPolicy)).getText();

	}

	public ArrayList select_MRBRoomsRatePlanValidation1(WebDriver driver, ArrayList test_steps, String RoomClass,
			String IsAssign, String Account, String Adults, ArrayList<Boolean> isMinStayRuleMRB,
			ArrayList<Boolean> isMinStayRuleBrokenPopComeOrNotMRB, ArrayList<Integer> minStayRuleValueMRB,
			ArrayList<String> checkInColorMRB, ArrayList<String> checkOutColorMRB) throws InterruptedException {

		reslogger.info("isMinStayRuleMRB : " + isMinStayRuleMRB);
		reslogger.info("isMinStayRuleBrokenPopComeOrNotMRB : " + isMinStayRuleBrokenPopComeOrNotMRB);
		reslogger.info("minStayRuleValueMRB : " + minStayRuleValueMRB);
		reslogger.info("checkInColorMRB : " + checkInColorMRB);
		reslogger.info("checkOutColorMRB : " + checkOutColorMRB);
		ArrayList<String> minStayColorMRB = new ArrayList<String>();
		ArrayList<String> nocheckinColorMRB = new ArrayList<String>();
		ArrayList<String> nocheckoutColorMRB = new ArrayList<String>();

		String[] roomclass = RoomClass.split("\\|");
		String[] adults = Adults.split("\\|");
		int size = adults.length;
		ArrayList al = new ArrayList();
		for (int i = 1; i <= size; i++) {
			String Applypolicy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
			if (driver.findElements(By.xpath(Applypolicy)).size() > 0) {
				Wait.WaitForElement(driver, Applypolicy);
				Wait.wait3Second();
				driver.findElement(By.xpath(Applypolicy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");
			}
			Wait.wait5Second();
			String rm = "//span[text()='Room " + i + " of " + size + "']";
			if (driver.findElement(By.xpath(rm)).isDisplayed()) {
				test_steps.add("Room " + i + " of " + size + " is displayed");
				reslogger.info("Room " + i + " of " + size + " is displayed");
			} else {
				String clickOnPopUpYesBut = "(//div[@class='row']//button[contains(text(),'Yes')])[3]";
				driver.findElement(By.xpath(clickOnPopUpYesBut)).click();
			}
			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1].trim() + "')]/following-sibling::span";
			Wait.WaitForElement(driver, rulessize);
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();

			String room = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../div[2]/span)";
			reslogger.info(room);
			Wait.WaitForElement(driver, room);
			Wait.wait2Second();
			String rooms = driver.findElement(By.xpath(room)).getText();
			reslogger.info(rooms);
			String[] roomsCount = rooms.split(" ");
			int count = Integer.parseInt(roomsCount[0].trim());

			String cost = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/span)";

			Utility.ScrollToElement(driver.findElement(By.xpath(room)), driver);

			cost = driver.findElement(By.xpath(cost)).getText();
			cost = cost.trim();
			cost = cost.substring(1, cost.length());
			reslogger.info("cost : " + cost);

			al.add(cost);
			if (count > 0) {
				test_steps.add("Selecting room class : " + roomclass[i - 1]);
				reslogger.info("Selecting room class : " + roomclass[i - 1]);
				String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select";
				WebElement ele = driver.findElement(By.xpath(sel));

				String minStayColor = "";

				Utility.app_logs.info("isMinStayRuleMRB.get(i) : " + isMinStayRuleMRB.get(i - 1));

				if (isMinStayRuleMRB.get(i - 1)) {
					Utility.app_logs.info("!isMinStayRuleBrokenPopComeOrNotMRB.get(i-1) : "
							+ !isMinStayRuleBrokenPopComeOrNotMRB.get(i - 1));
					if (!isMinStayRuleBrokenPopComeOrNotMRB.get(i - 1)) {
						minStayColor = verifyMinStayLabel(driver, test_steps, roomclass[i - 1],
								minStayRuleValueMRB.get(i - 1));
						Utility.app_logs.info("minStayColor : " + minStayColor);
						try {
							assertTrue(minStayColor.equalsIgnoreCase("Red"),
									"Red color lable for minstay rule is not found for the room Class : "
											+ roomclass[i - 1]);
							reslogger.info(
									"Succesfully veried the red color lable for min stay rule for the room class : "
											+ roomclass[i - 1]);
							test_steps.add(
									"Succesfully veried the red color lable for min stay rule for the room class : "
											+ roomclass[i - 1]);
						} catch (Error e) {
							test_steps.add(e.toString());
						} catch (Exception e) {
							test_steps.add(e.toString());
						}
					} else {
						minStayColor = verifyMinStayLabel(driver, test_steps, roomclass[i - 1],
								minStayRuleValueMRB.get(i - 1));
						try {
							assertTrue(minStayColor.equalsIgnoreCase("green"),
									"green color lable for minstay rule is not found for the room class : "
											+ roomclass[i - 1]);
							reslogger.info(
									"Succesfully veried the green color lable for min stay rule for the room class : "
											+ roomclass[i - 1]);
							test_steps.add(
									"Succesfully veried the green color lable for min stay rule for the room class : "
											+ roomclass[i - 1]);
						} catch (Error e) {
							test_steps.add(e.toString());
						} catch (Exception e) {
							test_steps.add(e.toString());
						}
					}

				}

				minStayColorMRB.add(minStayColor);
				String noCheckinColor = "";
				if (checkInColorMRB.get(i - 1).equalsIgnoreCase("Red")) {
					try {
						noCheckinColor = verifyNoCheckinLabel(driver, test_steps, roomclass[i - 1]);
						Utility.app_logs.info("noCheckinColor");
						assertTrue(noCheckinColor.equalsIgnoreCase("Red"),
								"red color lable for no check in rule is not found for the room class : "
										+ roomclass[i - 1]);
						reslogger.info(
								"Succesfully verified the red color lable for no check in rule for the room class : "
										+ roomclass[i - 1]);
						test_steps.add(
								"Succesfully verified the red color lable for no check in rule for the room class : "
										+ roomclass[i - 1]);
					} catch (Error e) {
						test_steps.add(e.toString());
					} catch (Exception e) {
						test_steps.add(e.toString());
					}
				} else if (checkInColorMRB.get(i - 1).equalsIgnoreCase("Green")) {
					try {
						noCheckinColor = verifyNoCheckinLabel(driver, test_steps, roomclass[i - 1]);
						assertTrue(noCheckinColor.equalsIgnoreCase("green"),
								"green color lable for no check in rule is not found for the room class : "
										+ roomclass[i - 1]);
						reslogger.info(
								"Succesfully verified the green color lable for no check in rule for the room class : "
										+ roomclass[i - 1]);
						test_steps.add(
								"Succesfully verified the green color lable for no check in rule for the room class : "
										+ roomclass[i - 1]);
					} catch (Error e) {
						test_steps.add(e.toString());
					} catch (Exception e) {
						test_steps.add(e.toString());
					}
				} else {
					try {
						noCheckinColor = verifyNoCheckinLabel(driver, test_steps, roomclass[i - 1]);
						assertTrue(noCheckinColor.equalsIgnoreCase("no color"),
								"no check in rule label is displayed for the room class : " + roomclass[i - 1]);
						reslogger.info(
								"Succesfully verified the no check in rule label not displayed for the room class : "
										+ roomclass[i - 1]);
						test_steps.add(
								"Succesfully verified the no check in rule label not displayed for the room class : "
										+ roomclass[i - 1]);
					} catch (Error e) {
						test_steps.add(e.toString());
					} catch (Exception e) {
						test_steps.add(e.toString());
					}
				}

				nocheckinColorMRB.add(noCheckinColor);

				String noCheckoutColor = "";
				if (checkOutColorMRB.get(i - 1).equalsIgnoreCase("Red")) {
					try {
						noCheckoutColor = verifyNoCheckoutLabel(driver, test_steps, roomclass[i - 1]);
						assertTrue(noCheckoutColor.equalsIgnoreCase("Red"),
								"red color lable for no check out rule is not found for the room class : "
										+ roomclass[i - 1]);
						reslogger.info(
								"Succesfully verified the red color lable for no check out rule for the room class : "
										+ roomclass[i - 1]);
						test_steps.add(
								"Succesfully verified the red color lable for no check out rule for the room class : "
										+ roomclass[i - 1]);
					} catch (Error e) {
						test_steps.add(e.toString());
					} catch (Exception e) {
						test_steps.add(e.toString());
					}
				} else if (checkOutColorMRB.get(i - 1).equalsIgnoreCase("Green")) {
					try {
						noCheckoutColor = verifyNoCheckoutLabel(driver, test_steps, roomclass[i - 1]);
						assertTrue(noCheckoutColor.equalsIgnoreCase("green"),
								"green color lable for no check out rule is not found for the room class : "
										+ roomclass[i - 1]);
						reslogger.info(
								"Succesfully verified the green color lable for no check out rule for the room class : "
										+ roomclass[i - 1]);
						test_steps.add(
								"Succesfully verified the green color lable for no check out rule for the room class : "
										+ roomclass[i - 1]);
					} catch (Error e) {
						test_steps.add(e.toString());
					} catch (Exception e) {
						test_steps.add(e.toString());
					}
				} else {
					try {
						noCheckoutColor = verifyNoCheckoutLabel(driver, test_steps, roomclass[i - 1]);
						assertTrue(noCheckoutColor.equalsIgnoreCase("no color"),
								"no check out rule label is displayed for the room class : " + roomclass[i - 1]);
						reslogger.info(
								"Succesfully verified the no check out rule label not displayed for the room class : "
										+ roomclass[i - 1]);
						test_steps.add(
								"Succesfully verified the no check out rule label not displayed for the room class : "
										+ roomclass[i - 1]);
					} catch (Error e) {
						test_steps.add(e.toString());
					} catch (Exception e) {
						test_steps.add(e.toString());
					}
				}
				nocheckoutColorMRB.add(noCheckoutColor);

				if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
					Wait.WaitForElement(driver, unAssign);
					driver.findElement(By.xpath(unAssign)).click();
					test_steps.add("Selected room number : Unassigned");
					reslogger.info("Selected room number : Unassigned");

				} else {
					String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1] + "')]/../../../following-sibling::div/div/select/option";
					reslogger.info(roomnum);
					int count1 = driver.findElements(By.xpath(roomnum)).size();
					Random random = new Random();
					randomNumber = random.nextInt(count1 - 1) + 1;
					reslogger.info("count : " + count1);
					reslogger.info("randomNumber : " + randomNumber);
					Wait.WaitForElement(driver, sel);

					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.wait2Second();
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i - 1]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
							+ randomNumber + "]/a/span";
					Wait.WaitForElement(driver, roomNumber);
					driver.findElement(By.xpath(roomNumber)).click();
				}

				String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i - 1] + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();

				String loading = "(//div[@class='ir-loader-in'])[2]";
				int counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
				reslogger.info("Waited to loading symbol");

				reslogger.info("Rule Count : " + ruleCount);
				if (ruleCount > 1) {

					String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";
					counter = 0;
					Wait.wait3Second();
					if (driver.findElements(By.xpath(rules)).size() > 0) {

						Utility.app_logs.info("minStayRuleMRB.get(i-1) : " + minStayColorMRB.get(i - 1));

						if (minStayColorMRB.get(i - 1).equalsIgnoreCase("Red")) {
							String min = "//p[text()='Selecting this room will violate the following rules']/..//div[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'"
									+ minStayRuleValueMRB.get(i - 1) + " NIGHT')]";
							Wait.WaitForElement(driver, min);
							test_steps.add("Verified min stay rule in the rules broken pop up as : "
									+ minStayRuleValueMRB.get(i - 1) + " night");
							reslogger.info("Verified min stay rule in the rules broken pop up as : "
									+ minStayRuleValueMRB.get(i - 1) + " night");
						}

						if (nocheckinColorMRB.get(i - 1).equalsIgnoreCase("Red")) {
							String min = "//p[text()='Selecting this room will violate the following rules']/..//div";
							Wait.WaitForElement(driver, min);
							String nocheckin = driver.findElement(By.xpath(min)).getText();
							if (nocheckin.contains("No Check In")) {
								test_steps.add("Verified no check in rule in the rules broken pop up");
								reslogger.info("Verified no check in rule in the rules broken pop up");
							}
						}

						if (nocheckoutColorMRB.get(i - 1).equalsIgnoreCase("Red")) {
							String min = "//p[text()='Selecting this room will violate the following rules']/..//div";
							Wait.WaitForElement(driver, min);
							String nocheckin = driver.findElement(By.xpath(min)).getText();
							if (nocheckin.contains("No Check out")) {
								test_steps.add("Verified no check in rule in the rules broken pop up");
								reslogger.info("Verified no check in rule in the rules broken pop up");
							}

						}

						driver.findElement(By.xpath(rules)).click();
						test_steps.add(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
						reslogger.info(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

						loading = "(//div[@class='ir-loader-in'])[2]";
						counter = 0;
						while (true) {
							if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
								break;
							} else if (counter == 3) {
								break;
							} else {
								counter++;
								Wait.wait3Second();
							}
						}
					}
				}

				if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
					if (i == 1) {
						String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
						if (driver.findElements(By.xpath(policy)).size() > 0) {
							Wait.WaitForElement(driver, policy);
							driver.findElement(By.xpath(policy)).click();
							test_steps.add("Based on the changes made, new policies are applicable.? : yes");
							reslogger.info("Based on the changes made, new policies are applicable.? : yes");

							loading = "(//div[@class='ir-loader-in'])[2]";
							counter = 0;
							while (true) {
								if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
									break;
								} else if (counter == 3) {
									break;
								} else {
									counter++;
									Wait.wait2Second();
								}
							}
						}
					}
				}
			} else {
				test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
				reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
			}
		}
		return al;
	}

	public ArrayList<String> selectReservation(WebDriver driver, String reservationNumber) throws InterruptedException {
		ArrayList<String> testSteps = new ArrayList<>();
		String checkBoxPath = "//span[text()='" + reservationNumber
				+ "']//..//..//td[contains(@class,'bulkActionCheckbox')]//child::div[@data-bind='css: { checked: DeleteReservation }']";
		Wait.WaitForElement(driver, checkBoxPath);
		Wait.waitForElementToBeVisibile(By.xpath(checkBoxPath), driver);
		Wait.waitForElementToBeClickable(By.xpath(checkBoxPath), driver);
		WebElement checkElement = driver.findElement(By.xpath(checkBoxPath));
		Utility.ScrollToElement(checkElement, driver);
		checkElement.click();
		testSteps.add("Selected reservation with number (" + reservationNumber + ")");
		reslogger.info("Searched reservation with number (" + reservationNumber + ")");

		return testSteps;
	}

	public String calculationOfDepositAmountToBePaidForRateV2(HashMap<String, String> roomCharges, String type,
			String attrValue) throws Exception {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountToBePaid = null;
		double paidAmount = 0.00;
		double noOfNightCharges = 0.00;
		double totalRoomCharges = 0.00;
		if (type.equalsIgnoreCase("number of nights")) {
			if (Integer.parseInt(attrValue) < roomCharges.size()) {
				for (int i = 0; i <= Integer.parseInt(attrValue) - 1; i++) {
					noOfNightCharges = noOfNightCharges + Double.valueOf(roomCharges.values().toArray()[i].toString());
					paidAmount = noOfNightCharges;
				}
			} else if (Integer.parseInt(attrValue) > roomCharges.size()) {
				for (String str : roomCharges.values()) {
					totalRoomCharges = totalRoomCharges + Double.parseDouble(str);
				}
				paidAmount = totalRoomCharges;
			}
		} else if (type.equalsIgnoreCase("flat fee")) {
			paidAmount = Double.parseDouble(attrValue);
		} else if (type.equalsIgnoreCase("percent of stay")) {
			for (String str : roomCharges.values()) {
				totalRoomCharges = totalRoomCharges + Double.parseDouble(str);
			}
			paidAmount = (Double.parseDouble(attrValue) * totalRoomCharges) / 100;
		}
		amountToBePaid = df.format(paidAmount);
		return amountToBePaid;
	}

	/*
	 * private void createMRBReservations(WebDriver driver, ArrayList<String>
	 * test_steps, String checkInDate, String checkOutDate, String adultsForRes,
	 * String childrenForRes, String ratePlan, String promoCode, String roomClass,
	 * String isAssign, String isaccount,String account, String salutation, String
	 * guestFirstName, String guestLastName, String phoneNumber, String
	 * altenativePhone, String email, String accountType, String address1, String
	 * address2, String address3, String city, String country, String state, String
	 * postalCode, String isGuesProfile, String referral, String paymentMethod,
	 * String cardNumber, String nameOnCard, String cardExpMonthAndYear, String
	 * isAccountPolicyApplicable, String sourceOfRes,ArrayList<String> roomNumber )
	 * throws Exception {
	 * test_steps.add("============== Creating an MRB reservation ==============");
	 * select_Dates(driver, test_steps, checkInDate, checkOutDate, adultsForRes,
	 * childrenForRes, ratePlan, "",""); clickOnFindRooms(driver, test_steps); if
	 * (Utility.validateString(account)) { if
	 * (sourceOfRes.equalsIgnoreCase("accountReservation")) { ArrayList<String>
	 * rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
	 * roomClass.split("\\|")[0]); selectRoomToReserve(driver, test_steps,
	 * roomClass.split("\\|")[0], rooms.get(0));
	 * clickYesOrNoOnPolicyChangePopup(driver, test_steps,
	 * isAccountPolicyApplicable); rooms =
	 * getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
	 * roomClass.split("\\|")[1]); selectRoomToReserve(driver, test_steps,
	 * roomClass.split("\\|")[1], rooms.get(0)); click_Next(driver, test_steps);
	 * enter_GuestName(driver, test_steps, salutation, guestFirstName,
	 * guestLastName); if (!checkPaymentMethodIsAvailableInReservationPage(driver,
	 * paymentMethod)) { enter_PaymentDetails(driver, test_steps, paymentMethod,
	 * cardNumber, nameOnCard, cardExpMonthAndYear); } }else if
	 * (sourceOfRes.equalsIgnoreCase("associateAccount")) { ArrayList<String> rooms
	 * = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
	 * roomClass.split("\\|")[0]); selectRoomToReserve(driver, test_steps,
	 * roomClass.split("\\|")[0], rooms.get(0)); rooms =
	 * getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
	 * roomClass.split("\\|")[1]); selectRoomToReserve(driver, test_steps,
	 * roomClass.split("\\|")[1], rooms.get(0)); click_Next(driver, test_steps);
	 * 
	 * if ( (accountType.equalsIgnoreCase("Corporate/Member Accounts")) ||
	 * (accountType.equalsIgnoreCase("Unit Owners"))) {
	 * associateAccountInReservation(driver, test_steps, account, accountType);
	 * enter_GuestName(driver, test_steps, salutation, guestFirstName,
	 * guestLastName); if (!checkPaymentMethodIsAvailableInReservationPage(driver,
	 * paymentMethod)) { enter_PaymentDetails(driver, test_steps, paymentMethod,
	 * cardNumber, nameOnCard, cardExpMonthAndYear); } }else if (
	 * (accountType.equalsIgnoreCase("Travel Agent")) ) {
	 * enter_MarketSegmentDetails(driver, test_steps, account, "", referral);
	 * enter_GuestName(driver, test_steps, salutation, guestFirstName,
	 * guestLastName); if (!checkPaymentMethodIsAvailableInReservationPage(driver,
	 * paymentMethod)) { enter_PaymentDetails(driver, test_steps, paymentMethod,
	 * cardNumber, nameOnCard, cardExpMonthAndYear); } }else if (
	 * (accountType.equalsIgnoreCase("House Account")) ) {
	 * select_HouseAccoutAsPayment(driver, test_steps, account);
	 * enter_MailingAddress(driver, test_steps, salutation, guestFirstName,
	 * guestLastName, phoneNumber, altenativePhone, email, "", accountType,
	 * address1, address2, address3, city, country, state, postalCode,
	 * isGuesProfile); if (!checkPaymentMethodIsAvailableInReservationPage(driver,
	 * paymentMethod)) { enter_PaymentDetails(driver, test_steps, paymentMethod,
	 * cardNumber, nameOnCard, cardExpMonthAndYear); } }else if (
	 * (accountType.equalsIgnoreCase("Gift Certificate")) ) { //
	 * select_HouseAccoutAsPayment(driver, test_steps, account); } } }else {
	 * ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver,
	 * test_steps, roomClass.split("\\|")[0]); selectRoomToReserve(driver,
	 * test_steps, roomClass.split("\\|")[0], rooms.get(0)); rooms =
	 * getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
	 * roomClass.split("\\|")[1]); selectRoomToReserve(driver, test_steps,
	 * roomClass.split("\\|")[1], rooms.get(0));
	 * 
	 * select_MRBRooms(driver, test_steps, roomClass, isAssign, isaccount);
	 * click_Next(driver, test_steps);
	 * 
	 * enter_MRB_MailingAddress(driver, test_steps, salutation, guestFirstName,
	 * guestLastName, phoneNumber, altenativePhone, email, "", accountType,
	 * address1, address2, address3, city, country, state, postalCode,
	 * isGuesProfile, "", "",roomNumber); enter_MRB_MailingAddressForMRB(driver,
	 * test_steps, salutation, guestFirstName, guestLastName, phoneNumber,
	 * altenativePhone, email, "", accountType, address1, address2, address3, city,
	 * country, state, postalCode, isGuesProfile, "", "",roomNumber);
	 * if((account.equalsIgnoreCase("")||account.isEmpty())) {
	 * enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber,
	 * nameOnCard, cardExpMonthAndYear); } enter_MarketSegmentDetails(driver,
	 * test_steps, "", "", referral); } }
	 */

	public HashMap<String, String> getRoomChargesFromFolioBasedOnDates(WebDriver driver, ArrayList<String> test_steps,
			String checkInDate, String checkOutDate, boolean value) throws Exception {
		HashMap<String, String> roomCharges = new HashMap<>();
		includeTaxesinLineItems(driver, test_steps, value);
		ArrayList<String> dates = Utility.getAllDatesBetweenCheckInOutDates(checkInDate, checkOutDate);
		for (String date : dates) {
			String convertedDate = Utility.parseDate(date, "dd/MM/yyyy", "dd");
			String roomChargeXpath = "//span[contains(text(),'" + convertedDate
					+ "')]/../..//span[text()='Room Charge']/../..//td[@class='lineitem-amount']";
			String roomCharge = driver.findElement(By.xpath(roomChargeXpath)).getText();
			roomCharge = roomCharge.replace("$ ", "");
			roomCharges.put(date, roomCharge);
		}
		return roomCharges;
	}

	public void includeTaxesinLineItems(WebDriver driver, ArrayList<String> test_steps, boolean value)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.cP_Reservation_IncludeTaxCheckBox);
		if (value) {
			boolean isChecked = res.cP_Reservation_IncludeTaxCheckBox.isSelected();
			if (!isChecked) {
				Utility.ScrollToViewElementINMiddle(driver, res.cP_Reservation_IncludeTaxCheckBox);
				res.cP_Reservation_IncludeTaxCheckBox.click();
				test_steps.add("Checked Include Taxes in Line Items Check Box ");
				reslogger.info("Checked Include Taxes in Line Items Check Box ");
			} else {
				test_steps.add("Include Taxes in Line Items Check Box is Already Checked ");
				reslogger.info("Include Taxes in Line Items Check Box is Already Checked ");
			}
		} else {
			boolean isChecked = res.cP_Reservation_IncludeTaxCheckBox.isSelected();
			if (isChecked) {
				Utility.ScrollToViewElementINMiddle(driver, res.cP_Reservation_IncludeTaxCheckBox);
				res.cP_Reservation_IncludeTaxCheckBox.click();
				test_steps.add("UnChecked Include Taxes in Line Items Check Box ");
				reslogger.info("UnChecked Include Taxes in Line Items Check Box ");
			} else {
				test_steps.add("Include Taxes in Line Items Check Box is Already UnChecked ");
				reslogger.info("Include Taxes in Line Items Check Box is Already UnChecked ");
			}

		}

	}

	public boolean waitForReservationStatusToChangeTo(WebDriver driver, String status) throws InterruptedException {
		verifySpinerLoading(driver);
		try {
			String selector = "//span[@data-bind='text:confirmationNumber']//..//span[text()='" + status + "']";
			Wait.WaitForElement(driver, selector);
			Wait.waitForElementToBeVisibile(By.xpath(selector), driver);
			return true;
		} catch (Exception e) {
			return false;
		}
	}

	public boolean verifyIfDocumentIsAvailableOnReservationPage(WebDriver driver, ArrayList<String> test_steps,
			String documentName) throws InterruptedException {
		verifySpinerLoading(driver);
		try {
			String path = "//a[contains(text(), 'Reports')]";
			Wait.WaitForElement(driver, path);
			Wait.waitForElementToBeVisibile(By.xpath(path), driver);
			Wait.waitForElementToBeClickable(By.xpath(path), driver);
			WebElement element = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(element, driver);
			element.click();
			String letterSelector = String.format(
					"//a[contains(text(), 'Reports')]/parent::div//li/span[contains(text(),'%s')]", documentName);
			boolean isExist = Utility.isElementPresent(driver, By.xpath(letterSelector));
			element.click();
			return isExist;
		} catch (Exception e) {
			return false;
		}
	}

	public ArrayList<String> selectRoomInStayInfoSectionUpdated(WebDriver driver, String RoomClass, String IsAssign)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//div[2]//span";
		System.out.println("IsAssign: " + IsAssign);
		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]//..//..//..//following-sibling::div//div//select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"

					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);

			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			testSteps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				testSteps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else if (IsAssign.equalsIgnoreCase("Yes")) {

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div/button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				Wait.waitForElementToBeClickable(By.xpath(expand), driver);
				WebElement elementExpand = driver.findElement(By.xpath(expand));
				Utility.ScrollToElement_NoWait(elementExpand, driver);
				elementExpand.click();

				String roomnum = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]"
						+ "//..//..//..//following-sibling::div//div//select)[1]//following-sibling::div//ul//li//span[@class='text']";
				reslogger.info(roomnum);
				Wait.WaitForElement(driver, roomnum);
				List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
				Wait.wait2Second();
				System.out.println(getRoomNumber.size());
				String getMinimumNumber = getRoomNumber.get(1).getText();
				System.out.println("getMinimumNumber: " + getMinimumNumber);

				String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
				System.out.println("getMaxmumNumber: " + getMaxmumNumber);
				getMaxmumNumber = getMaxmumNumber.trim();
				int maxNumber = Integer.parseInt(getMaxmumNumber);
				int minNumber = Integer.parseInt(getMinimumNumber);

				System.out.println("maxNumber : " + maxNumber);
				System.out.println("maxNumber : " + maxNumber);

				Random random = new Random();
				int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
				IsAssign = String.valueOf(randomNumber);
				boolean isBreak = false;
				for (int j = 0; j < 5; j++) {
					System.out.println("randomNumber: " + randomNumber);
					for (int i = 1; i < getRoomNumber.size(); i++) {
						// System.out.println("in loop " + i);
						String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
						getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
						if (getRoomNumberFromOptions.equals(IsAssign)) {
							isBreak = true;
							break;
						}

					}
					if (isBreak == false) {
						random = new Random();
						randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
						IsAssign = String.valueOf(randomNumber);
					}
					if (isBreak) {
						break;
					}

				}
				System.out.print(" Random Number is :" + randomNumber);

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				testSteps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");

			} else {

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
				Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
				Wait.waitForElementToBeClickable(By.xpath(expand), driver);
				WebElement elementExpand = driver.findElement(By.xpath(expand));
				Utility.ScrollToElement_NoWait(elementExpand, driver);
				elementExpand.click();

				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
				System.out.println(roomnum);
				List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
				System.out.println(getRoomNumber.size());
				String getMinimumNumber = getRoomNumber.get(1).getText();
				System.out.println("getMinimumNumber: " + getMinimumNumber);

				String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
				System.out.println("getMaxmumNumber: " + getMaxmumNumber);
				getMaxmumNumber = getMaxmumNumber.trim();
				int maxNumber = Integer.parseInt(getMaxmumNumber);
				int minNumber = Integer.parseInt(getMinimumNumber);

				System.out.println("maxNumber : " + maxNumber);
				System.out.println("maxNumber : " + maxNumber);

				Random random = new Random();
				int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
				IsAssign = String.valueOf(randomNumber);
				boolean isBreak = false;
				for (int j = 0; j < 5; j++) {
					System.out.println("randomNumber: " + randomNumber);
					for (int i = 1; i < getRoomNumber.size(); i++) {
						System.out.println("in loop " + i);
						String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
						getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
						if (getRoomNumberFromOptions.equals(IsAssign)) {
							isBreak = true;
							break;
						}

					}
					if (isBreak == false) {
						random = new Random();
						randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
						IsAssign = String.valueOf(randomNumber);
					}
					if (isBreak) {
						break;
					}

				}
				System.out.print(" Random Number is :" + randomNumber);

				String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
						+ IsAssign + "'])";
				Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
				driver.findElement(By.xpath(assignRoomNo)).click();
				testSteps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");

			}
			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass
					+ "')]//..//..//..//following-sibling::div//span[contains(@data-bind,'text: ( isSelected()')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}

			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
		} else {
			testSteps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");

		}

		return testSteps;
	}

	public ArrayList<String> selectRoomInStayInfoSectionSplitRooms(WebDriver driver, String RoomClass, String IsAssign)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		String splitCountPath = "//div[contains(@class,'flex-container ir-split-parts')]//div";
		int splitsize = driver.findElements(By.xpath(splitCountPath)).size();
		for (int k = 1; k <= splitsize; k++) {
			String xpath = "//div[contains(@class,'flex-container ir-split-parts')]//div[" + k + "]";
			Wait.WaitForElement(driver, xpath);
			driver.findElement(By.xpath(xpath)).click();

			String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]//..//..//div[2]//span";
			System.out.println("IsAssign: " + IsAssign);
			Wait.WaitForElement(driver, room);
			String rooms = driver.findElement(By.xpath(room)).getText();
			reslogger.info(rooms);
			String[] roomsCount = rooms.split(" ");
			int count = Integer.parseInt(roomsCount[0].trim());
			if (count > 0) {
				String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]//..//..//..//following-sibling::div//div//select";

				String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"

						+ RoomClass.trim() + "')]/following-sibling::span";
				reslogger.info(rulessize);

				int ruleCount = driver.findElements(By.xpath(rulessize)).size();
				WebElement ele = driver.findElement(By.xpath(sel));
				testSteps.add("Selected room class : " + RoomClass);
				reslogger.info("Selected room class : " + RoomClass);
				if (IsAssign.equalsIgnoreCase("No")) {
					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ RoomClass
							+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ RoomClass
							+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='Unassigned'])";
					Wait.WaitForElement(driver, unAssign);
					driver.findElement(By.xpath(unAssign)).click();
					testSteps.add("Selected room number : Unassigned");
					reslogger.info("Selected room number : Unassigned");
				} else if (IsAssign.equalsIgnoreCase("Yes")) {

					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ RoomClass
							+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div/button";
					Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
					Wait.waitForElementToBeClickable(By.xpath(expand), driver);
					WebElement elementExpand = driver.findElement(By.xpath(expand));
					Utility.ScrollToElement_NoWait(elementExpand, driver);
					elementExpand.click();

					// String roomnum = "//section[@class='ir-roomClassDetails
					// manual-override']//span[contains(text(),'"
					// + RoomClass
					// +
					// "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
					String roomnum = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ RoomClass + "')]"
							+ "//..//..//..//following-sibling::div//div//select)[1]//following-sibling::div//ul//li//span[@class='text']";
					reslogger.info(roomnum);
					Wait.WaitForElement(driver, roomnum);
					List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
					Wait.wait2Second();
					System.out.println(getRoomNumber.size());
					String getMinimumNumber = getRoomNumber.get(1).getText();
					System.out.println("getMinimumNumber: " + getMinimumNumber);

					String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
					System.out.println("getMaxmumNumber: " + getMaxmumNumber);
					getMaxmumNumber = getMaxmumNumber.trim();
					int maxNumber = Integer.parseInt(getMaxmumNumber);
					int minNumber = Integer.parseInt(getMinimumNumber);

					System.out.println("maxNumber : " + maxNumber);
					System.out.println("maxNumber : " + maxNumber);

					Random random = new Random();
					int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
					IsAssign = String.valueOf(randomNumber);
					boolean isBreak = false;
					for (int j = 0; j < 5; j++) {
						System.out.println("randomNumber: " + randomNumber);
						for (int i = 1; i < getRoomNumber.size(); i++) {
							// System.out.println("in loop " + i);
							String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
							getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
							if (getRoomNumberFromOptions.equals(IsAssign)) {
								isBreak = true;
								break;
							}

						}
						if (isBreak == false) {
							random = new Random();
							randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
							IsAssign = String.valueOf(randomNumber);
						}
						if (isBreak) {
							break;
						}

					}
					System.out.print(" Random Number is :" + randomNumber);

					String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ RoomClass
							+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
							+ IsAssign + "'])";
					Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
					driver.findElement(By.xpath(assignRoomNo)).click();
					testSteps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
					reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");

				} else {

					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ RoomClass
							+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//button";
					Wait.waitForElementToBeClickable(By.xpath(expand), driver, 20);
					Wait.waitForElementToBeClickable(By.xpath(expand), driver);
					WebElement elementExpand = driver.findElement(By.xpath(expand));
					Utility.ScrollToElement_NoWait(elementExpand, driver);
					elementExpand.click();

					String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ RoomClass
							+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//li//span[@class='text']";
					System.out.println(roomnum);
					List<WebElement> getRoomNumber = driver.findElements(By.xpath(roomnum));
					System.out.println(getRoomNumber.size());
					String getMinimumNumber = getRoomNumber.get(1).getText();
					System.out.println("getMinimumNumber: " + getMinimumNumber);

					String getMaxmumNumber = getRoomNumber.get(getRoomNumber.size() - 1).getText();
					System.out.println("getMaxmumNumber: " + getMaxmumNumber);
					getMaxmumNumber = getMaxmumNumber.trim();
					int maxNumber = Integer.parseInt(getMaxmumNumber);
					int minNumber = Integer.parseInt(getMinimumNumber);

					System.out.println("maxNumber : " + maxNumber);
					System.out.println("maxNumber : " + maxNumber);

					Random random = new Random();
					int randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
					IsAssign = String.valueOf(randomNumber);
					boolean isBreak = false;
					for (int j = 0; j < 5; j++) {
						System.out.println("randomNumber: " + randomNumber);
						for (int i = 1; i < getRoomNumber.size(); i++) {
							System.out.println("in loop " + i);
							String getRoomNumberFromOptions = getRoomNumber.get(i).getText();
							getRoomNumberFromOptions = getRoomNumberFromOptions.trim();
							if (getRoomNumberFromOptions.equals(IsAssign)) {
								isBreak = true;
								break;
							}

						}
						if (isBreak == false) {
							random = new Random();
							randomNumber = random.nextInt(maxNumber - minNumber) + minNumber;
							IsAssign = String.valueOf(randomNumber);
						}
						if (isBreak) {
							break;
						}

					}
					System.out.print(" Random Number is :" + randomNumber);

					String assignRoomNo = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ RoomClass
							+ "')]//..//..//..//following-sibling::div//div//select//following-sibling::div//ul//span[text()='"
							+ IsAssign + "'])";
					Wait.waitForElementToBeClickable(By.xpath(assignRoomNo), driver, 10);
					driver.findElement(By.xpath(assignRoomNo)).click();
					testSteps.add("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
					reslogger.info("Selecting room <b>" + IsAssign + "</b> from <b>" + RoomClass + "</b> room class");
				}
				String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]//..//..//..//following-sibling::div//span[contains(@data-bind,'text: ( isSelected()')]";
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();

				String loading = "(//div[@class='ir-loader-in'])[2]";
				int counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 50) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}

				reslogger.info("Waited to loading symbol");

				reslogger.info("Rule Count : " + ruleCount);
			} else {
				testSteps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
				reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");

			}
		}

		return testSteps;
	}

	public String calculationOfDepositAmountToBePaidForRateV2(ArrayList<String> roomCharges, String type,
			String attrValue, String roomClassSize) throws Exception {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountToBePaid = null;
		double paidAmount = 0.00;
		double noOfNightCharges = 0.00;
		double totalRoomCharges = 0.00;
		if (type.equalsIgnoreCase("number of nights")) {
			if (Integer.parseInt(attrValue) < roomCharges.size()) {
				for (int i = 0; i <= Integer.parseInt(attrValue) - 1; i++) {
					noOfNightCharges = noOfNightCharges + Double.valueOf(roomCharges.toArray()[i].toString());
					paidAmount = noOfNightCharges;
				}
			} else if (Integer.parseInt(attrValue) > roomCharges.size()) {
				for (String str : roomCharges) {
					totalRoomCharges = totalRoomCharges + Double.parseDouble(str);
				}
				paidAmount = totalRoomCharges;
			}
		} else if (type.equalsIgnoreCase("flat fee")) {
			paidAmount = Double.parseDouble(attrValue) * Double.valueOf(roomClassSize);
		} else if (type.equalsIgnoreCase("percent of stay")) {
			for (String str : roomCharges) {
				totalRoomCharges = totalRoomCharges + Double.parseDouble(str);
			}
			paidAmount = (Double.parseDouble(attrValue) * totalRoomCharges) / 100;
		}
		amountToBePaid = df.format(paidAmount);
		return amountToBePaid;
	}

	public String getReservationCheckInPolicy(WebDriver driver) {
		String checkIn = "//a[contains(@data-bind,'click:cancelCheckin')]/..";
		Wait.WaitForElement(driver, checkIn);
		driver.findElement(By.xpath(checkIn)).click();

		String checkInPolicy = "//div[@id='accordion']/div/div//label[text()='Check-in Policy']/following-sibling::div/button/span";
		Wait.WaitForElement(driver, checkInPolicy);
		return driver.findElement(By.xpath(checkInPolicy)).getText();

	}

	public void clickFolioDetailOptions(WebDriver driver, ArrayList<String> test_steps, String accountName)
			throws InterruptedException {

		String path = "//a/span[@class='text'and contains(text(),'" + accountName + "')]";
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		element.click();
		test_steps.add("Select Account: <b>" + accountName + "</b>");
		reslogger.info("Select Account: " + accountName);
	}

	public void verifyFolioDetailOptions(WebDriver driver, ArrayList<String> test_steps, String accountName)
			throws InterruptedException {

		String path = "//a/span[@class='text'and contains(text(),'" + accountName + "')]";
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		assertTrue(element.isDisplayed(), "Failed tom verify folio option");
		test_steps.add("Verify folio option <b>" + accountName + "</b>");
		reslogger.info("Verify folio option " + accountName);
	}

	public String takePayment(WebDriver driver, ArrayList test_steps, String PaymentType, String CardNumber,
			String NameOnCard, String CardExpDate, String TakePaymentType, String IsChangeInPayAmount,
			String ChangedAmountValue, String IsSetAsMainPaymentMethod, String AddPaymentNotes)
			throws InterruptedException {
		test_steps.add("******************* Making payment **********************");
		reslogger.info("******************* Making payment **********************");
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment);

		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_Amount);
		// String amount =getAmountFromPaymentScreen(driver);
		String amount = res.CP_Reservation_Folio_TakePayment_Amount.getText().trim();
		reslogger.info("amount : " + amount);
		test_steps.add("Amount before Pay : " + amount);
		reslogger.info("Amount before Pay : " + amount);

		if (Utility.validateString(PaymentType)) {
			Utility.ScrollToElement(res.CP_Reservation_Folio_TakePayment_PaymentButton, driver);
			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_PaymentButton);
			Wait.wait10Second();
			res.CP_Reservation_Folio_TakePayment_PaymentButton.click();

			String CCNumber = "//h4[text()='Take Payment']/../..//label[text()='CARD NUMBER']/following-sibling::div/input";
			String name = "//h4[text()='Take Payment']/../..//label[text()='NAME ON CARD']/following-sibling::div/input";
			String exp = "//h4[text()='Take Payment']/../..//label[contains(text(),'EXPIRY')]/following-sibling::div/input";

			if (PaymentType.equalsIgnoreCase("Swipe")) {
				String CCCard = "(//h4[text()='Take Payment']/../..//label[text()='CARD NUMBER']/following-sibling::div/input)[2]";
				String swipe = "//h4[text()='Take Payment']/../..//button[text()='SWIPE']";
				Wait.WaitForElement(driver, swipe);
				driver.findElement(By.xpath(swipe)).click();
				test_steps.add("Clicking on Swipe");
				reslogger.info("Clicking on Swipe");
				Wait.WaitForElement(driver, CCCard);
				driver.findElement(By.xpath(CCCard)).sendKeys(CardNumber);
				test_steps.add("Enter Card Number : " + CardNumber);
				reslogger.info("Enter Card Number : " + CardNumber);
			} else {
				String payment = "//h4[text()='Take Payment']/../..//label[text()='PAYMENT METHOD']/..//div/div//span[text()='"
						+ PaymentType.trim() + "']";
				Wait.WaitForElement(driver, payment);
				driver.findElement(By.xpath(payment)).click();
				test_steps.add("Select Payment Type as : " + PaymentType);
				reslogger.info("Select Payment Type as : " + PaymentType);
				if (PaymentType.equalsIgnoreCase("MC") || PaymentType.equalsIgnoreCase("Visa")
						|| PaymentType.equalsIgnoreCase("Amex") || PaymentType.equalsIgnoreCase("Discover")) {

					Wait.WaitForElement(driver, CCNumber);
					JavascriptExecutor js = (JavascriptExecutor) driver;
					String CC = (String) js.executeScript("return arguments[0].value",
							driver.findElement(By.xpath(CCNumber)));
					reslogger.info(CC);
					if (CC.isEmpty() || CC.equalsIgnoreCase("")) {
						Wait.WaitForElement(driver, CCNumber);
						driver.findElement(By.xpath(CCNumber)).sendKeys(CardNumber);
						test_steps.add("Enter Card Number : " + CardNumber);
						reslogger.info("Enter Card Number : " + CardNumber);
						Wait.WaitForElement(driver, name);
						driver.findElement(By.xpath(name)).sendKeys(NameOnCard);
						test_steps.add("Enter Card Name : " + NameOnCard);
						reslogger.info("Enter Card Name : " + NameOnCard);
						Wait.WaitForElement(driver, exp);
						driver.findElement(By.xpath(exp)).sendKeys(CardExpDate);
						test_steps.add("Enter Card Exp Date : " + CardExpDate);
						reslogger.info("Enter Card Exp Date : " + CardExpDate);
					}
				}
			}
		}
		if (IsChangeInPayAmount.equalsIgnoreCase("Yes")) {
			test_steps.add("Change the pay amount value : Yes");
			reslogger.info("Change the pay amount value : Yes");
			res.CP_Reservation_Folio_TakePayment_Amount.clear();
			res.CP_Reservation_Folio_TakePayment_Amount.sendKeys(Keys.chord(Keys.CONTROL, "a"));
			res.CP_Reservation_Folio_TakePayment_Amount.sendKeys(ChangedAmountValue);
			test_steps.add("Enter the Change Amount Value : " + ChangedAmountValue);
			reslogger.info("Enter the Change Amount Value : " + ChangedAmountValue);
			amount = ChangedAmountValue;
		} else {
			test_steps.add("paying the amount : " + amount);
			reslogger.info("paying the amount : " + amount);
		}

		if (Utility.validateString(TakePaymentType)) {
			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_TypeButton);
			res.CP_Reservation_Folio_TakePayment_TypeButton.click();

			String type = "//h4[text()='Take Payment']/../..//label[text()='TYPE']/..//div/div//span[text()='"
					+ TakePaymentType.trim() + "']";
			Wait.WaitForElement(driver, type);
			driver.findElement(By.xpath(type)).click();
			test_steps.add("Select Take Payment Type : " + TakePaymentType);
			reslogger.info("Select Take Payment Type : " + TakePaymentType);

		}
		String setAsMainPaymentMethod = "//span[text()='Set As Main Payment Method']/../input";
		if (IsSetAsMainPaymentMethod.equalsIgnoreCase("Yes")) {
			if (!driver.findElement(By.xpath(setAsMainPaymentMethod)).isSelected()) {
				Wait.WaitForElement(driver, setAsMainPaymentMethod);
				driver.findElement(By.xpath("//span[text()='Set As Main Payment Method']")).click();
				test_steps.add("Select set As Main Payment Method");
				reslogger.info("Select set As Main Payment Method");
			} else {
				test_steps.add("Already Selected set As Main Payment Method");
				reslogger.info("Already Selected set As Main Payment Method");
			}
		}

		String addPaymentNotes = "//button[text()='ADD NOTES']";
		String notes = "//input[@placeholder='Add Notes']";

		if (!(AddPaymentNotes.isEmpty() || AddPaymentNotes.equalsIgnoreCase(""))) {
			Wait.WaitForElement(driver, addPaymentNotes);
			Utility.ScrollToElement(driver.findElement(By.xpath(addPaymentNotes)), driver);
			driver.findElement(By.xpath(addPaymentNotes)).click();
			test_steps.add("Clicking on Add Payment Notes");
			reslogger.info("Clicking on Add Payment Notes");
			Wait.WaitForElement(driver, notes);
			driver.findElement(By.xpath(notes)).sendKeys(AddPaymentNotes);
			test_steps.add("Adding payment notes : " + AddPaymentNotes);
			reslogger.info("Adding payment notes : " + AddPaymentNotes);
		}

		String button = "//h4[text()='Take Payment']/../..//a[contains(text(),'" + amount.trim()
				+ "')]|//h4[text()='Take Payment']/../..//a[contains(text(),'" + ChangedAmountValue.trim() + "')]";
		String button_1 = "//a[contains(text(),'Pay') and contains(@data-bind,'ready-to-process')]";
		// String button = "//h4[text()='Take Payment']/../..//button[contains(text(),'"
		// + amount.trim() + "')]|//h4[text()='Take
		// Payment']/../..//a[contains(text(),'" + ChangedAmountValue.trim() + "')]";
		/*
		 * Wait.WaitForElement(driver, button); Wait.WaitForElement(driver, button);
		 */
		Wait.wait10Second();

		try {
			Utility.ScrollToElement(driver.findElement(By.xpath(button)), driver);
			driver.findElement(By.xpath(button)).click();
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(button_1)));
		}
		/*
		 * try { driver.findElement(By.xpath(button_1)).click(); }catch (Exception e) {
		 * Utility.clickThroughJavaScript(driver,
		 * driver.findElement(By.xpath(button_1))); }
		 */
		// Utility.scrollAndClick(driver, By.xpath(button));
		test_steps.add("Click on Pay");
		reslogger.info("Click on Pay");

		if (Utility.validateString(TakePaymentType)) {
			String takePayType = "//h4[contains(text(),'Successful')]/../..//label[text()='TYPE']/following-sibling::span";

			Wait.WaitForElement(driver, takePayType);
			String paytype = driver.findElement(By.xpath(takePayType)).getText().trim();
			assertEquals(paytype, TakePaymentType.trim());
			test_steps.add("Take Payment Type validated after payment : " + TakePaymentType);
			reslogger.info("Take Payment Type validated after payment : " + TakePaymentType);
		}

		if (Utility.validateString(PaymentType)) {
			String paymentType = "//h4[contains(text(),'Successful')]/../..//label[text()='PAYMENT METHOD']/following-sibling::label/span[contains(text(),'"
					+ PaymentType.trim() + "')]";

			if (PaymentType.equalsIgnoreCase("Swipe")) {
				paymentType = "//h4[contains(text(),'Successful')]/../..//label[text()='PAYMENT METHOD']/following-sibling::label/span[contains(text(),'MC')]";
			}
			Wait.WaitForElement(driver, paymentType);
			if (driver.findElement(By.xpath(paymentType)).isDisplayed()) {
				test_steps.add("Payment Type validated after payment : " + PaymentType);
				reslogger.info("Payment Type validated after payment : " + PaymentType);
			} else {
				test_steps.add("Payment Type not displayed after payment : " + PaymentType);
				reslogger.info("Payment Type not displayed after payment : " + PaymentType);
			}
		}

		String status = "//h4[contains(text(),'Successful')]/../..//label[text()='Approved']";
		Wait.WaitForElement(driver, status);
		if (driver.findElement(By.xpath(status)).isDisplayed()) {
			test_steps.add("Transaction status is : Approved");
			reslogger.info("Transaction status is : Approved");
		} else {
			test_steps.add("Transaction status is not : Approved");
			reslogger.info("Transaction status is not : Approved");
		}

		if (Utility.validateString(AddPaymentNotes)) {
			String payNotes = "//h4[contains(text(),'Successful')]/../..//span[text()='" + AddPaymentNotes + "']";
			if (!(AddPaymentNotes.isEmpty() || AddPaymentNotes.equalsIgnoreCase(""))) {
				if (driver.findElement(By.xpath(payNotes)).isDisplayed()) {
					test_steps.add("Paymant notes displayed " + AddPaymentNotes);
					reslogger.info("Paymant notes displayed " + AddPaymentNotes);
				} else {
					test_steps.add("Paymant notes not displayed " + AddPaymentNotes);
					reslogger.info("Paymant notes not displayed " + AddPaymentNotes);
				}
			}
		}

		String close = "//h4[contains(text(),'Successful')]/../..//button[text()='Close']";
		Wait.WaitForElement(driver, close);
		/*
		 * Utility.ScrollToElement(driver.findElement(By.xpath(close)), driver);
		 * driver.findElement(By.xpath(close)).click();
		 */
		Utility.scrollAndClick(driver, By.xpath(close));
		test_steps.add("Click on Close");
		reslogger.info("Click on Close");
		try {
			// String saveFolio =
			// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
			String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
			Wait.WaitForElement(driver, saveFolio);
			Utility.ScrollToElement(driver.findElement(By.xpath(saveFolio)), driver);
			driver.findElement(By.xpath(saveFolio)).click();
			test_steps.add("Click on Save");
			reslogger.info("Click on Save");
		} catch (Exception e) {
		}
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
		return amount;
	}

	public void verifyFolioLineItemAmoutPaidAsperDescription(WebDriver driver, String paymentType,
			String amountToBePaid, ArrayList<String> testSteps) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String path = "//a[contains(text(), '" + paymentType
				+ "')]/../..//td[@class='lineitem-amount']/span[(text()='$ " + amountToBePaid + "')]";
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed to verify amount on folio line item");
		testSteps.add("Verified Folio Line Item amount  : <b>" + element.getText() + "</b>");
		reslogger.info("Verified Folio Line Item amount  :" + element.getText());
	}

	public void verifyFolioLineItem(WebDriver driver, String date, String category, String desc, String amount,
			ArrayList<String> test_steps) throws InterruptedException, ParseException {
		reslogger.info("******************* Verify Folio Details **********************");
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		amount = df.format(Double.parseDouble(amount));
		reslogger.info(amount);
		String convertedDate = Utility.parseDate(date, "dd/MM/yyyy", "dd");
		reslogger.info(convertedDate);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String LineItemSetMainPaymentPath = "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-date']/span[contains(text(),'"
				+ convertedDate + "')]" + "/../following-sibling::td[@class='lineitem-category']/span[contains(text(),'"
				+ category + "')]" + "/../following-sibling::td[@class='lineitem-description']//a[contains(text(),'"
				+ desc + "')]" + "/../following-sibling::td[@class='lineitem-amount']/span[contains(text(),'" + amount
				+ "')]";
		reslogger.info(LineItemSetMainPaymentPath);
		Wait.WaitForElement(driver, LineItemSetMainPaymentPath);
		WebElement SetLineItemElement = driver.findElement(By.xpath(LineItemSetMainPaymentPath));
		// Verified No Show Fee line item
		assertTrue(SetLineItemElement.isDisplayed(), "Failed: To Verify Line Item");
		test_steps.add(" Verified Date:<b>  " + date + "</b>");
		reslogger.info("Verified  Date: " + date);
		test_steps.add(" Verified  Category:<b>  " + category + "</b>");
		reslogger.info(" Verified  Category: " + category);
		test_steps.add("Verified  Description:<b>  " + desc + "</b>");
		reslogger.info(" Verified Description: " + desc);
		test_steps.add(" Verified Amount:<b>  " + amount + "</b>");
		reslogger.info(" Verified  Amount: " + amount);
	}

	public String calculationOfCheckInAmountToBePaidForRateV2(String balance, String attrValue) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountToBePaid = null;
		double paidAmount = 0.00;
		double totalRoomCharges = 0.00;
		paidAmount = (Double.parseDouble(attrValue) * Double.parseDouble(balance)) / 100;
		amountToBePaid = df.format(paidAmount);
		return amountToBePaid;
	}

	public void verifyRoomUnassignedOrAlreadyBookedOrDirty(WebDriver driver) throws InterruptedException {
		boolean isUnassigned = Utility.isElementPresent(driver,
				By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
		reslogger.info("isUnassigned:" + isUnassigned);
		// String path =
		// "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'checked
		// in to this room')]";
		String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'occupying')]";
		boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
		reslogger.info("isRoomBooked:" + isRoomBooked);
		boolean isRoomDirty = Utility.isElementPresent(driver, By.xpath(OR_Reservation.cP_ReservationDirtyMsg));
		reslogger.info("isRoomDirty:" + isRoomDirty);
		if (isUnassigned) {
			roomUnAssigned(driver, isUnassigned);
		}
		if (isRoomBooked) {
			roomOccupiedWithOtherReservation(driver, isRoomBooked);
		}
		if (isRoomDirty) {
			dirtyPopupModelClickConfirmButton(driver, test_steps, isRoomDirty);
		}
		Wait.waitUntilPageLoadNotCompleted(driver, 40);
	}

	public void verifyAmountOnPaymentScreen(WebDriver driver, String amountToBePaid, ArrayList<String> testSteps)
			throws InterruptedException {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amount = getAmountFromPaymentScreen(driver);
		amount = df.format(Double.parseDouble(amount));
		assertEquals(amount, amountToBePaid, "Failed to verify checkin Amount");
		testSteps.add("Verified chekecin amount paid : <b>" + amountToBePaid + "</b>");
		reslogger.info("Verified chekecin amount paid : " + amountToBePaid);
	}

	public String clickOnConfirmCheckInButton(WebDriver driver, ArrayList<String> testSteps)
			throws InterruptedException {
		String msg = null;
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CheckInConfirmButton);
		Utility.ScrollToElement(reservation.CheckInConfirmButton, driver);
		reservation.CheckInConfirmButton.click();
		testSteps.add("Click on confirm checkin button");
		reslogger.info("Click on confirm checkin button");
		//verifySpinerLoading(driver);
		Wait.wait60Second();
		try {
			Wait.waitForToasterToBeVisibile(By.xpath("//*[@id='toast-container']//div[@class='toast-title']"), driver);
			msg = Utility.getELementText(
					driver.findElement(By.xpath("//*[@id='toast-container']//div[@class='toast-title']")), false,
					"innerHTML");
			if (msg.toUpperCase().contains("FAIL")) {
				try {
					reservation.CheckInConfirmButton.click();
					testSteps.add("Click on confirm checkin button");
					reslogger.info("Click on confirm checkin button");
				} catch (Exception e) {
					e.printStackTrace();
					reservation.CheckInConfirmButton.click();
					testSteps.add("Click on confirm checkin button");
					reslogger.info("Click on confirm checkin button");
				}
			}
		} catch (Exception e1) {

		}
		return msg;

	}

	public String getAmountFromPaymentScreen(WebDriver driver) throws InterruptedException {
		String amount = null;
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopup_Amount);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount, driver);
		// Get Amount
		amount = CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		reslogger.info("Get Amount from Payment Page Is : " + amount);
		return amount;
	}

	public void verifyFolioLineItemAmoutPaid(WebDriver driver, String paymentType, String amountToBePaid,
			ArrayList<String> testSteps) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String path = "//span[contains(text(), '" + paymentType
				+ "')]/../..//td[@class='lineitem-amount']/span[(text()='$ " + amountToBePaid + "')]";
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed to verify amount on folio line item");
		testSteps.add("Verified Folio Line Item amount  : <b>" + element.getText() + "</b>");
		reslogger.info("Verified Folio Line Item amount  :" + element.getText());
	}

	public void verify_FolioPayment(WebDriver driver, ArrayList<String> testSteps, String expectedAmount)
			throws InterruptedException {

		String path = "//label[contains(text(),'Payments')]/following-sibling::span[@class='pamt']/span[@class='pamt' and contains(text(),'$ "
				+ expectedAmount + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed to verify payment");
		testSteps.add("Verified Payment On Folio Tab: <b>" + expectedAmount + "</b>");
		reslogger.info("Verified Payment On Folio Tab: " + expectedAmount);
	}

	public void verifyChekInReservationOnHistoryTab(WebDriver driver, ArrayList<String> testSteps) {
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkInReservation);
		assertTrue(elements.checkInReservation.isDisplayed(), "Failed to verify checkin reservation on history");
		testSteps.add("Verified Checked in this reservation displayed on history");
		reslogger.info("Verified Checked in this reservation displayed on history");

	}

	public void verifyHistoryWithCapturedPayment(WebDriver driver, ArrayList<String> test_steps, String amount,
			String paymentType, String paymentMethod) {
		String str = null;
		if (paymentMethod.equalsIgnoreCase("MC")) {
			str = "Captured payment for $" + amount + " using (" + paymentType + ")";
		} else if (paymentMethod.equalsIgnoreCase("Cash")) {
			str = "Made a payment $" + amount + " using " + paymentType + "";
		} else if (paymentMethod.equalsIgnoreCase("Deposit")) {
			str = "Made a deposit payment of $" + amount + " using " + paymentType + "";
		}
		String path = "//span[contains(text(),'" + str + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Description");
		test_steps.add("'History Tab' Verified Description: <b>" + element.getText() + "</b>");
		reslogger.info("'History Tab' Verified Description : " + element.getText());
	}

	public void verifyNoPaymentAtFolioLineItem(WebDriver driver, ArrayList<String> testSteps, String checkInDate,
			String paymentType) {
		String convertedDate = Utility.parseDate(checkInDate, "dd/MM/yyyy", "EE MMM dd, yyyy");
		String path = "//span[text()='" + convertedDate + "']/../..//span[text()='" + paymentType
				+ "']/../..//td[@class='lineitem-amount']";
		if (!(Utility.isElementPresent(driver, By.xpath(path)))) {
			testSteps.add("No Payment Aplied");
			reslogger.info("No Payment Aplied");
		}
	}

	public void verifyDepositAtHistoryTab(WebDriver driver, ArrayList<String> testSteps, String payment,
			String paymentType) {

		String depositText = "Made a deposit payment of $" + payment + " using " + paymentType + "";
		String path = "//span[contains(text(),'" + depositText + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed to verify deposit amopunt on History Screen");
		testSteps.add("Verified Payment On Folio Tab: <b>" + element.getText() + "</b>");
		reslogger.info("Verified Payment On Folio Tab: " + element.getText());

	}

	public ArrayList<String> verifyPopupChangeInCost1(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		reslogger.info("Verifying Popup Appear for Change In Cost");
		if (driver.findElements(By.xpath(OR_Reservation.CP_VerifyChangeCostPopup)).size() > 0) {
			Wait.wait2Second();
			Wait.explicit_wait_visibilityof_webelement(res.CP_VerifyChangeCostPopup, driver);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_VerifyChangeCostPopup), driver);
			String text = res.CP_VerifyChangeCostPopup.getText();
			Utility.app_logs.info(text);
			String[] parts = text.split("from");
			String message = parts[0];
			assertEquals(message, "Are you sure you wish to change the total cost of the stay ",
					"Failed : to verify amount change popup message");
			test_steps.add("Verified pop up displayed for Change in Total Cost");
			// Click on Yes Button
			// Wait.WaitForElement(driver,
			// OR_Reservation.CP_Reservation_CheckOutAllButton_ConfirmationMsg);
			String xpath = "//div[contains(text(),'Are you sure you wish to change the total cost of the stay from')]/..//button[text()='Yes']";
			Wait.wait10Second();
			if (driver.findElements(By.xpath(xpath)).size() > 0) {
				Wait.waitForElementToBeClickable(By.xpath(xpath), driver);
				driver.findElement(By.xpath(xpath)).click();
				test_steps.add("Click on Yes");
				Wait.waitForElementToBeInvisibile(By.xpath(OR.Toaster_Message_Xpath), driver);
			}
		}
		return test_steps;
	}

	public void VerifyFoliocalculateRate(WebDriver driver, ArrayList<String> test_steps, String folioOption)
			throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		WebDriverWait wait = new WebDriverWait(driver, 25);
		Wait.wait2Second();

		try {
			if (folioOption.equalsIgnoreCase("Recalculate Rate")) {
				driver.findElement(By.xpath("//*[contains(@name,'folio-option-radio-btn')]/..")).click();
			} else {
				reslogger.info("Recalculate Rate radio button is not selected");
			}
			if (folioOption.equalsIgnoreCase("Change only for added/removed dates")) {
				driver.findElement(By.xpath("(//*[contains(@name,'folio-option-radio-btn')])[2]/..")).click();
			} else {
				reslogger.info("Change only for added/removed dates radio button is not selected");
			}
			if (folioOption.equalsIgnoreCase("No Rate Change")) {
				driver.findElement(By.xpath("(//*[contains(@name,'folio-option-radio-btn')])[3]/..")).click();
			} else {
				reslogger.info("No Rate Change radio button is not selected");
			}

			// Click Save Button
			reslogger.info("Clicking Save Button");
			Wait.explicit_wait_visibilityof_webelement(res.CP_SaveRoomNo, driver);
			Utility.ScrollToElement(res.CP_SaveRoomNo, driver);
			res.CP_SaveRoomNo.click();
			test_steps.add("Click on Save Room Number Button");

		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

	public ArrayList<String> ClickEditStayInfoMRBLastLineItem(WebDriver driver, ArrayList<String> steps)
			throws InterruptedException, ParseException {
		String chnageStayDetailsButton = "//button[text()='Check In']/../button/span";
		Wait.WaitForElement(driver, chnageStayDetailsButton);
		int count = driver.findElements(By.xpath(chnageStayDetailsButton)).size();
		chnageStayDetailsButton = "(//button[text()='Check In']/../button/span)[" + count + "]";
		driver.findElement(By.xpath(chnageStayDetailsButton)).click();
		String chnageStayDetails = "//button[text()='Check In']/../button/span/../..//li[contains(text(),'Change Stay Details')]";
		count = driver.findElements(By.xpath(chnageStayDetails)).size();
		chnageStayDetails = "(//button[text()='Check In']/../button/span/../..//li[contains(text(),'Change Stay Details')])["
				+ count + "]";
		driver.findElement(By.xpath(chnageStayDetails)).click();
		reslogger.info("Click Stay Info Edit button");
		steps.add("Click Stay Info Edit button");
		return steps;
	}

	public void checkFolioLineItemsWithDates(WebDriver driver, ArrayList<String> test_steps, String checkInDate,
			String checkOutDate) throws Exception {
		ArrayList<String> dates = Utility.getAllDatesBetweenCheckInOutDates(checkInDate, checkOutDate);
		for (String string : dates) {
			String convertDate = Utility.parseDate(string, "dd/MM/yyyy", "EE MMM dd, yyyy");
			String lineItemXpath = "//td[@class='lineitem-date']/span[text()='" + convertDate
					+ "']/../../td[@class='lineitem-category']/span[text()='Room Charge']";
			List<WebElement> lineItems = driver.findElements(By.xpath(lineItemXpath));
			if (lineItems.size() > 0) {
				test_steps.add("<b>Room Charge</b> folio line item is displayed for the date <b>" + string + "</b>");
			} else {
				test_steps
						.add("<b>Room Charge</b> folio line item is not displayed for the date <b>" + string + "</b>");
			}
		}
	}

	public void selectMRBLastFolio(WebDriver driver, ArrayList<String> test_steps) {
		String folio = " //span[contains(text(),'Guest Folio For ')]/..";

		String lastFolio = "//span[contains(text(),'Guest Folio For ')]/../..";
		Wait.WaitForElement(driver, folio);
		driver.findElement(By.xpath(folio)).click();
		Wait.WaitForElement(driver, lastFolio);
		int count = driver.findElements(By.xpath(lastFolio)).size();
		lastFolio = "(//span[contains(text(),'Guest Folio For ')]/../..)[" + count + "]";
		driver.findElement(By.xpath(lastFolio)).click();
	}

	public void select_RoomWithRatePlanRulesValidationAccount(WebDriver driver, ArrayList test_steps, String RoomClass,
			String IsAssign, String Account, String isAccountPolicyApplicable, String checkinColor,
			String checkoutColor, String minStaycolor, int minNights) throws InterruptedException {
		reslogger.info(RoomClass);
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";
		reslogger.info(room);
		Wait.WaitForElement(driver, room);

		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				reslogger.info(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				Random random = new Random();
				int randomNumber = random.nextInt(count1 - 1) + 1;
				reslogger.info("count : " + count1);
				reslogger.info("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[text()='" + RoomClass
					+ "']/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			if (driver.findElements(By.xpath(select)).size() > 0) {
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();
			} else {
				String selected = "//section[@class='ir-roomClassDetails manual-override']//span[text()='" + RoomClass
						+ "']/../../../following-sibling::div/div//span[contains(@data-bind,'SELECT')]/..";
				Wait.WaitForElement(driver, selected);
				driver.findElement(By.xpath(selected)).click();
			}

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 10) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (minStaycolor.equalsIgnoreCase("Red")) {
					String min = "//p[text()='Selecting this room will violate the following rules']/..//div[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'"
							+ minNights + " NIGHT')]";
					Wait.WaitForElement(driver, min);
					test_steps.add("Verified min stay rule in the rules broken pop up as : " + minNights + " night");
					reslogger.info("Verified min stay rule in the rules broken pop up as : " + minNights + " night");
				}

				if (checkinColor.equalsIgnoreCase("Red")) {
					String min = "//p[text()='Selecting this room will violate the following rules']/..//div";
					Wait.WaitForElement(driver, min);
					String nocheckin = driver.findElement(By.xpath(min)).getText();
					if (nocheckin.contains("No Check In")) {
						test_steps.add("Verified no check in rule in the rules broken pop up");
						reslogger.info("Verified no check in rule in the rules broken pop up");
					}
				}

				if (checkoutColor.equalsIgnoreCase("Red")) {
					String min = "//p[text()='Selecting this room will violate the following rules']/..//div";
					Wait.WaitForElement(driver, min);
					String nocheckin = driver.findElement(By.xpath(min)).getText();
					if (nocheckin.contains("No Check out")) {
						test_steps.add("Verified no check in rule in the rules broken pop up");
						reslogger.info("Verified no check in rule in the rules broken pop up");
					}
				}

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}
			if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
				String policy = "";
				if (isAccountPolicyApplicable.equalsIgnoreCase("yes")) {
					policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
				} else {
					policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='No']";
				}
				Wait.WaitForElement(driver, policy);
				driver.findElement(By.xpath(policy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");

				loading = "(//div[@class='ir-loader-in'])[2]";
				counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
	}

	public void mrbPrimaryCheckOut(WebDriver driver) throws InterruptedException {
		// SearchandClickgivenReservationNumber(driver,reservation );
		List<WebElement> l = driver.findElements(By.xpath("//button[text()='Check Out']"));
		l.get(0).click();
		generatGuestReportToggle(driver, test_steps, "No");
		// Utility.clickThroughJavaScript(driver,
		// driver.findElement(By.xpath(OR_Reservation.ProceedToCheckOutPayment)));
		try {
			checkOutPayment(driver);
			clickOnPayButtonOnPaymentPopup(driver, test_steps);
			clickCloseButtonOfCheckoutSuccessfully(driver, test_steps);
		} catch (Exception e) {
			try {
				clickCloseButtonOfCheckoutSuccessfully(driver, test_steps);
			} catch (Exception e1) {
				// TODO: handle exception
			}
		}
	}

	// This method is to change the Reservation status
	public void changeReservationStatus(WebDriver driver, String reservationStatusOptions, String mrbStatus,
			ArrayList<String> test_steps) {

		// to change the Reservation status
		try {

			if (reservationStatusOptions.split(",").length == 1) {
				CPReservationPage cppage = new CPReservationPage();
				switch (reservationStatusOptions) {
				case "Confirmed":
					cppage.confirmReservation(driver);
					break;
				case "Guaranteed":
					cppage.guaranteeReservation(driver);
					break;
				case "OnHold":
				case "On Hold":
					cppage.onHoldReservation(driver);
					break;
				case "Cancelled":
					cppage.cancelReservation(driver);
					break;
				case "No Show":
				case "NoShow":
					cppage.noShowReservation(driver);
					break;
				case "InHouse":
				case "In-House":

					if (mrbStatus.equalsIgnoreCase("PrimaryCheckin")) {
						mrbPrimaryCheckin(driver);
					} else if (mrbStatus.equalsIgnoreCase("SecondaryCheckin")) {
						mrbSecondaryCheckin(driver);
					} else {
						cppage.inHouseReservation(driver);
					}
					break;
				case "Departed":
					if (mrbStatus.equalsIgnoreCase("PrimaryCheckOut")) {
						mrbPrimaryCheckOut(driver);
					} else if (mrbStatus.equalsIgnoreCase("SecondaryCheckOut")) {
						mrbSecondaryCheckOut(driver);
					} else {
						cppage.departedReservation(driver);
					}
					break;
				}

			} else {
				System.out.println("Enter only one option for Reservation status");
			}

		} catch (Exception e) {
			test_steps.add(e.toString());
		} catch (Error e) {
			test_steps.add(e.toString());
		}

	}

	public String getRoomChargesFromRoomClass(WebDriver driver, String roomClass) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		WebElement totalRateValueElement = null;

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));

		}
		String getAmount = String.format("%.0f",
				Double.parseDouble(Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText())));

		return getAmount;
	}

	public HashMap<String, String> getRoomChargesFromFolioBasedOnDates1(WebDriver driver, ArrayList<String> test_steps,
			String checkInDate, String checkOutDate, boolean value, int interval, boolean isProRateOn)
			throws Exception {
		HashMap<String, String> roomCharges = new HashMap<>();

		includeTaxesinLineItems(driver, test_steps, value);
		ArrayList<String> getIntervalDate = new ArrayList<>();

		ArrayList<String> getDates = Utility.getAllDatesBetweenCheckInOutDates(checkInDate, checkOutDate);
		reslogger.info("getDates: " + getDates);
		int totalDates = 0;

		int fullInetval = getDates.size() / interval;
		int halfInterval = getDates.size() % interval;
		if (!isProRateOn && halfInterval > 0) {
			System.out.println("in pro rate");
			totalDates = fullInetval + 1;
		} else {

			System.out.println("else is pro rate");

			if (fullInetval == 0) {
				System.out.println("else if pro rate");

				totalDates = fullInetval + 1;
			} else {
				System.out.println("else pro rate");

				totalDates = fullInetval + halfInterval;

			}

		}

		reslogger.info("totalDates: " + totalDates);
		int temp = 0;
		int incrementCounter = 0;
		for (int i = 0; i < totalDates; i++) {

			String getDate = ESTTimeZone.getDateonBasedOfDate("dd/MM/yyyy", checkInDate, incrementCounter,
					"US/Eastern");
			System.out.println(getDate);
			String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, "dd/MM/yyyy", "dd/MM/yyyy");
			System.out.println("dateInRequiredFormat: " + dateInRequiredFormat);
			getIntervalDate.add(dateInRequiredFormat);
			temp++;
			if (temp > fullInetval) {
				System.out.println(" Value of i if *****> " + i);
				incrementCounter = interval * fullInetval + 1;
				System.out.println(" Value of incrementCounter if *****> " + incrementCounter);

			}

			else {
				System.out.println(" Value of i else**** " + i);
				incrementCounter = incrementCounter + interval;
				System.out.println(" Value of incrementCounter if *****> " + incrementCounter);

			}

		}

		reslogger.info("getIntervalDate: " + getIntervalDate);
		for (String date : getIntervalDate) {

			String convertedDate = Utility.parseDate(date, "dd/MM/yyyy", "dd");
			String roomChargeXpath = "//span[contains(text(),'" + convertedDate
					+ "')]//..//..//span[text()='Room Charge']//..//..//td[@class='lineitem-amount']";
			reslogger.info("roomChargeXpath: " + roomChargeXpath);
			String roomCharge = driver.findElement(By.xpath(roomChargeXpath)).getText();
			roomCharge = roomCharge.replace("$ ", "");
			roomCharges.put(date, roomCharge);
		}
		return roomCharges;
	}

	public ArrayList<String> getdateBaseOnInterval(WebDriver driver, String checkInDate, String checkOutDate,
			int interval, String dateFormate, String timeZone) throws Exception {

		ArrayList<String> getIntervalDate = new ArrayList<>();
		ArrayList<String> getDates = Utility.getAllDatesBetweenCheckInOutDates(checkInDate, checkOutDate);
		int fullInterval = getDates.size() / interval;
		int halfInterval = getDates.size() % interval;
		int numberOfNight = fullInterval + halfInterval;
		int temp = 0;
		int incrementCounter = 0;
		for (int i = 0; i < numberOfNight; i++) {

			String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormate, checkInDate, incrementCounter, timeZone);
			getIntervalDate.add(getDate);
			temp++;
			if (temp > fullInterval) {
				System.out.println(" Value of i if *****> " + i);
				incrementCounter = interval * fullInterval + 1;
				System.out.println(" Value of incrementCounter if *****> " + incrementCounter);

			}

			else {
				System.out.println(" Value of i else**** " + i);
				incrementCounter = incrementCounter + interval;
				System.out.println(" Value of incrementCounter if *****> " + incrementCounter);

			}

		}

		reslogger.info("getIntervalDate: " + getIntervalDate);
		return getIntervalDate;
	}

	public HashMap<String, String> getHighestAmountOfPolicyForInterval(WebDriver driver, ArrayList<String> test_steps,
			HashMap<String, ArrayList<String>> allPoliciesDetails, ArrayList<String> checkInDates,
			ArrayList<String> checkOutDates, boolean value, int interval, boolean isProRateOn) throws Exception {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		int index = 0;
		double highestPolicyAmount = 0;
		double paymentsFromFolio = 0;
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		HashMap<String, String> policyToValidate = new HashMap<>();
		ArrayList<String> policyAttrs = allPoliciesDetails.get("Attributes");
		ArrayList<String> policyAttrValues = allPoliciesDetails.get("AttributeValues");
		ArrayList<String> policyDescs = allPoliciesDetails.get("Descriptions");
		ArrayList<String> policyNamesGet = allPoliciesDetails.get("Names");
		ArrayList<String> allAmounts = new ArrayList<>();
		List<WebElement> rooms = elements.guestFolioAllGuestsFromDropDown;
		for (int i = 0; i < policyAttrs.size(); i++) {
			elements.guestFolioGuestDropDown.click();
			Wait.wait1Second();
			rooms.get(i).click();

			HashMap<String, String> roomCharges = getRoomChargesFromFolioBasedOnDates1(driver, test_steps,
					checkInDates.get(i), checkOutDates.get(i), value, interval, isProRateOn);
			allAmounts.add(calculationOfDeposiAmountToBePaidForRateV2(roomCharges, policyAttrs.get(i),
					policyAttrValues.get(i)));
			paymentsFromFolio = paymentsFromFolio + Double.parseDouble(get_Payments(driver, test_steps));
		}
		for (int i = 0; i < allAmounts.size(); i++) {
			if (highestPolicyAmount < Double.parseDouble(allAmounts.get(i))) {
				index = i;
			}
		}
		String payments = df.format(paymentsFromFolio);
		test_steps.add("Total payments from multiple folio guest charges is captured as <b>" + payments + "</b>");
		test_steps.add("Highest amount of no show policy name is captured as <b>" + policyNamesGet.get(index) + "</b>");
		test_steps
				.add("Highest amount of no show policy attribute is captured as <b>" + policyAttrs.get(index) + "</b>");
		test_steps.add("Highest amount of no show policy attribute value is captured as <b>"
				+ policyAttrValues.get(index) + "</b>");
		test_steps.add(
				"Highest amount of no show policy description is captured as <b>" + policyDescs.get(index) + "</b>");

		policyToValidate.put("Name", policyNamesGet.get(index));
		policyToValidate.put("Attribute", policyAttrs.get(index));
		policyToValidate.put("AttributeValue", policyAttrValues.get(index));
		policyToValidate.put("Description", policyDescs.get(index));
		policyToValidate.put("Payments", payments);
		return policyToValidate;
	}

	public ArrayList<String> getNoShowPaymentsForAllGuestsForInterval(WebDriver driver, ArrayList<String> test_steps,
			ArrayList<String> checkInDates, ArrayList<String> checkOutDates, String attr, String attrValue,
			boolean value, int interval, boolean isProRateOn) throws Exception {
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> allAmounts = new ArrayList<>();
		List<WebElement> rooms = elements.guestFolioAllGuestsFromDropDown;
		for (int i = 0; i < rooms.size(); i++) {
			int j = i + 1;
			elements.guestFolioGuestDropDown.click();
			Wait.wait1Second();
			rooms.get(i).click();
			HashMap<String, String> roomCharges = getRoomChargesFromFolioBasedOnDates1(driver, test_steps,
					checkInDates.get(i), checkOutDates.get(i), value, interval, isProRateOn);
			String noShowPayment = calculationOfDeposiAmountToBePaidForRateV2(roomCharges, attr, attrValue);
			test_steps.add("No Show payment is calculated for Guest" + j + " is <b>" + noShowPayment + "</b>");
			allAmounts.add(noShowPayment);
		}
		return allAmounts;
	}

	public HashMap<String, String> getHighestAmountOfPolicyForInterval(WebDriver driver, ArrayList<String> test_steps,
			HashMap<String, ArrayList<String>> allPoliciesDetails, ArrayList<String> checkInDates,
			ArrayList<String> checkOutDates, boolean value, int interval, ArrayList<Boolean> isProRateOn)
			throws Exception {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		int index = 0;
		double highestPolicyAmount = 0;
		double paymentsFromFolio = 0;
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		HashMap<String, String> policyToValidate = new HashMap<>();
		ArrayList<String> policyAttrs = allPoliciesDetails.get("Attributes");
		ArrayList<String> policyAttrValues = allPoliciesDetails.get("AttributeValues");
		ArrayList<String> policyDescs = allPoliciesDetails.get("Descriptions");
		ArrayList<String> policyNamesGet = allPoliciesDetails.get("Names");
		ArrayList<String> allAmounts = new ArrayList<>();
		List<WebElement> rooms = elements.guestFolioAllGuestsFromDropDown;
		for (int i = 0; i < policyAttrs.size(); i++) {
			elements.guestFolioGuestDropDown.click();
			Wait.wait1Second();
			rooms.get(i).click();

			HashMap<String, String> roomCharges = getRoomChargesFromFolioBasedOnDates1(driver, test_steps,
					checkInDates.get(i), checkOutDates.get(i), value, interval, isProRateOn.get(i));
			allAmounts.add(calculationOfDeposiAmountToBePaidForRateV2(roomCharges, policyAttrs.get(i),
					policyAttrValues.get(i)));
			paymentsFromFolio = paymentsFromFolio + Double.parseDouble(get_Payments(driver, test_steps));
		}
		for (int i = 0; i < allAmounts.size(); i++) {
			if (highestPolicyAmount < Double.parseDouble(allAmounts.get(i))) {
				index = i;
			}
		}
		String payments = df.format(paymentsFromFolio);
		test_steps.add("Total payments from multiple folio guest charges is captured as <b>" + payments + "</b>");
		test_steps.add("Highest amount of no show policy name is captured as <b>" + policyNamesGet.get(index) + "</b>");
		test_steps
				.add("Highest amount of no show policy attribute is captured as <b>" + policyAttrs.get(index) + "</b>");
		test_steps.add("Highest amount of no show policy attribute value is captured as <b>"
				+ policyAttrValues.get(index) + "</b>");
		test_steps.add(
				"Highest amount of no show policy description is captured as <b>" + policyDescs.get(index) + "</b>");

		policyToValidate.put("Name", policyNamesGet.get(index));
		policyToValidate.put("Attribute", policyAttrs.get(index));
		policyToValidate.put("AttributeValue", policyAttrValues.get(index));
		policyToValidate.put("Description", policyDescs.get(index));
		policyToValidate.put("Payments", payments);
		return policyToValidate;
	}

	public void checkFolioLineItemsWithDatesInterval(WebDriver driver, ArrayList<String> test_steps, String checkInDate,
			String checkOutDate, int interval, boolean isProRateOn) throws Exception {

		ArrayList<String> getIntervalDate = new ArrayList<>();

		ArrayList<String> getDates = Utility.getAllDatesBetweenCheckInOutDates(checkInDate, checkOutDate);
		reslogger.info("getDates: " + getDates);
		int totalDates = 0;

		int fullInetval = getDates.size() / interval;
		int halfInterval = getDates.size() % interval;
		if (!isProRateOn && halfInterval > 0) {
			System.out.println("in pro rate");
			totalDates = fullInetval + 1;
		} else {

			System.out.println("else is pro rate");

			if (fullInetval == 0) {
				System.out.println("else if pro rate");

				totalDates = fullInetval + 1;
			} else {
				System.out.println("else pro rate");

				totalDates = fullInetval + halfInterval;

			}

		}

		reslogger.info("totalDates: " + totalDates);
		int temp = 0;
		int incrementCounter = 0;
		for (int i = 0; i < totalDates; i++) {

			String getDate = ESTTimeZone.getDateonBasedOfDate("dd/MM/yyyy", checkInDate, incrementCounter,
					"US/Eastern");
			System.out.println(getDate);
			String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, "dd/MM/yyyy", "dd/MM/yyyy");
			System.out.println("dateInRequiredFormat: " + dateInRequiredFormat);
			getIntervalDate.add(dateInRequiredFormat);
			if (i == 0) {
				// incrementCounter = 1;
			}
			temp++;
			if (temp > fullInetval) {
				// incrementCounter = interval * fullInetval + 1;
				incrementCounter = incrementCounter + 1;

			}

			else {
				incrementCounter = incrementCounter + interval;

			}

		}

		reslogger.info("getIntervalDate: " + getIntervalDate);

		// ArrayList<String> dates =
		// Utility.getAllDatesBetweenCheckInOutDates(checkInDate, checkOutDate);
		for (String string : getIntervalDate) {
			String convertDate = Utility.parseDate(string, "dd/MM/yyyy", "EE MMM dd, yyyy");
			String lineItemXpath = "//td[@class='lineitem-date']/span[text()='" + convertDate
					+ "']/../../td[@class='lineitem-category']/span[text()='Room Charge']";
			List<WebElement> lineItems = driver.findElements(By.xpath(lineItemXpath));
			if (lineItems.size() > 0) {
				test_steps.add("<b>Room Charge</b> folio line item is displayed for the date <b>" + string + "</b>");
			} else {
				test_steps
						.add("<b>Room Charge</b> folio line item is not displayed for the date <b>" + string + "</b>");
			}
		}
	}

	public ArrayList<String> intervalRateVerificationAfterStayDetailsChanged(WebDriver driver, String dateFormat,
			String checkInDate, String checkOutDate, String adults, String child, String roomClass,
			String intervalLength,

			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		} else {
			fullIntervals = 1;
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		String averagePerNight = "";
		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				System.out.println("**********************************Third if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						for (int i = 1; i < child_adults; i++) {
							System.out.println("i: " + i);
							child_adults = child_adults - 1;
							System.out.println("total: " + child_adults);
							System.out.println("max person: " + intMaxPerson);
							if (child_adults == intMaxPerson) {
								System.out.println("in total = max person");
								count = i;
								isTrue = true;
								break;
							}
						}

					}

					if (isTrue) {
						childDifference = count;
					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				System.out.println("**********************************4th if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						for (int i = 1; i < child_adults; i++) {
							System.out.println("i: " + i);
							child_adults = child_adults - 1;
							System.out.println("total: " + child_adults);
							System.out.println("max person: " + intMaxPerson);
							if (child_adults == intMaxPerson) {
								System.out.println("in total = max person");
								count = i;
								isTrue = true;
								break;
							}
						}

					}

					if (isTrue) {
						childDifference = count;
					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String isEqual = "no";
			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + rateApplied);

			testSteps.add("Expected rates: " + rateApplied);
			testSteps.add("Found: " + intial);
			if (getValue.equals(rateApplied)) {
				isEqual = "yes";

			} else {
				isEqual = "no";

			}

			testSteps.add("Verified interval rate value");

			averagePerNight = String.format("%.1f",
					(Double.parseDouble(Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText())))
							/ numberofDays);

			assertEquals(
					String.format("%.1f",
							(Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
									averagePerNightElement.getText().split(" ")[3])))),
					averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;
			int rateListLength = driver
					.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]")).size();

			for (int i = 1; i < rateListLength; i++) {

				reslogger.info("checkInDate: " + checkInDate);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate,

						incrementCounter, timeZone);
				reslogger.info("getDate: " + getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				String getRate = "//td[text()='" + dateInRequiredFormat
						+ "']//following-sibling::td[contains(@data-bind, 'showInnroadCurrency: { value:')]";
				Wait.WaitForElement(driver, getRate);
				Wait.waitForElementToBeVisibile(By.xpath(getRate), driver);
				Wait.waitForElementToBeClickable(By.xpath(getRate), driver);
				WebElement getRateElement = driver.findElement(By.xpath(getRate));
				Utility.ScrollToElement_NoWait(getRateElement, driver);
				String getAmount = getRateElement.getText();

				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				// If proRate/Additional Charges off
				if (!isProRateApplied && !isAdditionalChargesApplied) {

					String amount = String.format("%.2f", base_amount);
					assertEquals(Utility.RemoveDollarandSpaces(driver, getAmount), amount, "Failed: rate didn't match");
				}

				reslogger.info("Amount for date(" + dateInRequiredFormat + ") is " + getAmount);
				testSteps.add("Amount for date(" + dateInRequiredFormat + ") is " + getAmount);
				temp++;
				if (temp > fullIntervals) {
					System.out.println(" Value of i if *****> " + i);

					incrementCounter = Integer.parseInt(intervalLength) * fullIntervals + 1;
					reslogger.info(" Value of incrementCounter if *****> " + incrementCounter);

				}

				else {
					System.out.println(" Value of i else**** " + i);
					incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
					reslogger.info(" Value of incrementCounter if *****> " + incrementCounter);

				}

				// rateList.add(rateApplied);
				rateList.add(Utility.RemoveDollarandSpaces(driver, getAmount));

			}

			rateList.add(isEqual);
		}

		return rateList;

	}

	// SearchandClickgivenReservationNumber
	public void SearchandClickgivenReservationNumber(WebDriver driver, String reservation) throws InterruptedException {
		Elements_Reservation_SearchPage resservationSearch = new Elements_Reservation_SearchPage(driver);
		resservationSearch.Basic_Res_Number.clear();
		JavascriptExecutor js = (JavascriptExecutor) driver;

		js.executeScript("arguments[0].value='" + reservation + "';", resservationSearch.Basic_Res_Number);
		// resservationSearch.Basic_Res_Number.sendKeys(reservation);
		Wait.wait10Second();
		resservationSearch.Click_BasicSearch.click();
		Wait.wait5Second();
		Wait.WaitForElement(driver, "//span[text()='" + reservation + "']/../preceding-sibling::td[2]");
		driver.findElement(By.xpath("//span[text()='" + reservation + "']/../preceding-sibling::td[2]")).click();
	}

	/*
	 * #############################################################################
	 * #############################################################################
	 * ################ Method Name: <mrbPrimaryCheckin> Description: <This method
	 * checks in primary reservation in a MRB Reservation> Input parameters:
	 * <WebDriver driver> Return value: <void> Created By: <Naveen Kadthala> Created
	 * On: <09/16/2020>
	 * 
	 * #############################################################################
	 * #############################################################################
	 * ################
	 */

	public void mrbPrimaryCheckin(WebDriver driver) throws Exception {
		// SearchandClickgivenReservationNumber(driver,reservation );
		List<WebElement> l = driver.findElements(By.xpath("//button[text()='Check In']"));
		l.get(0).click();
		generatGuestReportToggle(driver, test_steps, "No");
		// driver.findElement(By.xpath("//span[text()='Generate Guest
		// Registration']/preceding-sibling::span")).click();
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Utility.clickThroughJavaScript(driver,
				driver.findElement(By.xpath(OR_Reservation.ReservationStatusConfirmCheckin)));
		try {
			elementReservation.confirmCheckInAtDirtyMessage.click();
		} catch (Exception e) {
			// TODO: handle exception
		}

	}

	/*
	 * #############################################################################
	 * #############################################################################
	 * ################ Method Name: <mrbPrimaryCheckOut> Description: <This method
	 * checks out primary reservation in a MRB Reservation> Input parameters:
	 * <WebDriver driver> Return value: <void> Created By: <Naveen Kadthala> Created
	 * On: <09/16/2020>
	 * 
	 * #############################################################################
	 * #############################################################################
	 * ################
	 */
	/*
	 * public void mrbPrimaryCheckOut(WebDriver driver) throws InterruptedException
	 * { //SearchandClickgivenReservationNumber(driver,reservation );
	 * List<WebElement> l =
	 * driver.findElements(By.xpath("//button[text()='Check Out']"));
	 * l.get(0).click(); driver.findElement(By.
	 * xpath("//span[text()='Generate Guest Registration']/preceding-sibling::span")
	 * ).click(); Utility.clickThroughJavaScript(driver,
	 * driver.findElement(By.xpath(OR_Reservation.ProceedToCheckOutPayment))); }
	 */

	/*
	 * #############################################################################
	 * #############################################################################
	 * ################ Method Name: <mrbSecondaryCheckin> Description: <This method
	 * checks in secondary reservation in a MRB Reservation which is last by
	 * default> Input parameters: <WebDriver driver> Return value: <void> Created
	 * By: <Naveen Kadthala> Created On: <09/16/2020>
	 * 
	 * #############################################################################
	 * #############################################################################
	 * ################
	 */
	public void mrbSecondaryCheckin(WebDriver driver) throws Exception {
		// SearchandClickgivenReservationNumber(driver,reservation );
		List<WebElement> l = driver.findElements(By.xpath("//button[text()='Check In']"));
		l.get(l.size() - 1).click();
		generatGuestReportToggle(driver, test_steps, "No");
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Utility.clickThroughJavaScript(driver,
				driver.findElement(By.xpath(OR_Reservation.ReservationStatusConfirmCheckin)));
		if (Utility.isElementDisplayed(driver, By.xpath(OR_Reservation.roomStatusDirtyMessage))) {
			elementReservation.confirmCheckInAtDirtyMessage.click();
		}
	}
	/*
	 * #############################################################################
	 * #############################################################################
	 * ################ Method Name: <mrbSecondaryCheckOut> Description: <This
	 * method checks out secondary reservation in a MRB Reservation which is last by
	 * default> Input parameters: <WebDriver driver> Return value: <void> Created
	 * By: <Naveen Kadthala> Created On: <09/16/2020>
	 * 
	 * #############################################################################
	 * #############################################################################
	 * ################
	 */

	public void mrbSecondaryCheckOut(WebDriver driver) throws InterruptedException {
		// SearchandClickgivenReservationNumber(driver,reservation );
		List<WebElement> l = driver.findElements(By.xpath("//button[text()='Check Out']"));
		l.get(l.size() - 1).click();
		try {
			Wait.wait5Second();
			List<WebElement> a = driver.findElements(By.xpath("//button[contains(text(),'Yes')]"));
			a.get(a.size() - 1).click();
		} catch (Exception e) {
			// TODO: handle exception
		}
		generatGuestReportToggle(driver, test_steps, "No");
		// Utility.clickThroughJavaScript(driver,
		// driver.findElement(By.xpath(OR_Reservation.ProceedToCheckOutPayment)));
		try {
			checkOutPayment(driver);
			clickOnPayButtonOnPaymentPopup(driver, test_steps);
			clickCloseButtonOfCheckoutSuccessfully(driver, test_steps);
		} catch (Exception e) {
			try {
				clickCloseButtonOfCheckoutSuccessfully(driver, test_steps);
			} catch (Exception e1) {
				// TODO: handle exception
			}
		}
	}

	public void mrbSecondaryCancel(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Wait.waitForElementToBeClickable(By.xpath("(//button[text()='Check In'])[1]"), driver);
		List<WebElement> l = driver.findElements(By.xpath(OR.threeDotsMRB));
		reslogger.info(l.size());
		l.get(l.size() - 1).click();
		Utility.ScrollToElement(res.cancelSecondaryRoom, driver);
		// res.cancelSecondaryRoom.click();
		Utility.clickThroughAction(driver, res.cancelSecondaryRoom);

		try {
			enableVoidRoomCharge(driver, test_steps, true);
			provideReasonForCancelAndClickOnProceedToPayWithoutPayment(driver, test_steps, "Cancel", true);
		} catch (Exception e) {
			provideReasonForCancelAndClickOnProceedToPay(driver, test_steps, "Cancel", true);
			clickOnPayButtonOnPaymentPopup(driver, test_steps);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelledClose), 30, driver);
			elementReservation.CancelledClose.click();
		}

	}

	/*
	 * #############################################################################
	 * #############################################################################
	 * ################ Method Name: <mrbSecondaryCheckOutThroughindex> Description:
	 * <This method checks out secondary reservation in a MRB Reservation through
	 * given index> Input parameters: <WebDriver driver> Return value: <void>
	 * Created By: <Naveen Kadthala> Created On: <09/16/2020>
	 * 
	 * #############################################################################
	 * #############################################################################
	 * ################
	 */

	public void mrbSecondaryCheckOutThroughindex(WebDriver driver, String reservation, int i)
			throws InterruptedException {
		SearchandClickgivenReservationNumber(driver, reservation);
		List<WebElement> l = driver.findElements(By.xpath("//button[text()='Check Out']"));
		l.get(i - 1).click();
		driver.findElement(By.xpath("//span[text()='Generate Guest Registration']/preceding-sibling::span")).click();
		Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(OR_Reservation.ProceedToCheckOutPayment)));
	}

	/*
	 * #############################################################################
	 * #############################################################################
	 * ################ Method Name: <mrbSecondaryCheckinThroughindex> Description:
	 * <This method checks in secondary reservation in a MRB Reservation through
	 * given index> Input parameters: <WebDriver driver> Return value: <void>
	 * Created By: <Naveen Kadthala> Created On: <09/16/2020>
	 * 
	 * #############################################################################
	 * #############################################################################
	 * ################
	 */
	public void mrbSecondaryCheckinThroughindex(WebDriver driver, String reservation, int i)
			throws InterruptedException {
		SearchandClickgivenReservationNumber(driver, reservation);
		List<WebElement> l = driver.findElements(By.xpath("//button[text()='Check In']"));
		l.get(i - 1).click();
		driver.findElement(By.xpath("//span[text()='Generate Guest Registration']/preceding-sibling::span")).click();
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Utility.clickThroughJavaScript(driver,
				driver.findElement(By.xpath(OR_Reservation.ReservationStatusConfirmCheckin)));
		if (Utility.isElementDisplayed(driver, By.xpath(OR_Reservation.roomStatusDirtyMessage))) {
			elementReservation.confirmCheckInAtDirtyMessage.click();
		}
	}

	// This method is to change the Reservation status
	public void changeReservationStatus(WebDriver driver, String reservationStatusOptions, String mrbStatus,
			String reservationNumber, String itemStatus, ArrayList<String> test_steps) {

		Navigation nav = new Navigation();

		reslogger.info("Reservation Number: " + reservationNumber);
		reslogger.info("Status need to update: " + reservationStatusOptions);

		// to change the Reservation status
		try {

			if (reservationStatusOptions.split(",").length == 1) {
				CPReservationPage cppage = new CPReservationPage();
				switch (reservationStatusOptions) {
				case "Confirmed":
					cppage.confirmReservation(driver);
					break;
				case "Guaranteed":
					cppage.guaranteeReservation(driver);
					break;
				case "On Hold":
					cppage.onHoldReservation(driver);
					break;
				case "Cancelled":
					cppage.cancelReservation(driver, itemStatus);
					break;
				case "NoShow":
					cppage.noShowReservation(driver, itemStatus);
					break;
				case "In-House":

					if (mrbStatus.equalsIgnoreCase("PrimaryCheckin")) {
						mrbPrimaryCheckin(driver);
					} else if (mrbStatus.equalsIgnoreCase("SecondaryCheckin")) {
						mrbSecondaryCheckin(driver);
					} else {
						cppage.inHouseReservation(driver);
					}
					break;
				case "Departed":
					if (mrbStatus.equalsIgnoreCase("PrimaryCheckOut")) {
						mrbPrimaryCheckOut(driver);
					} else if (mrbStatus.equalsIgnoreCase("SecondaryCheckOut")) {
						mrbSecondaryCheckOut(driver);
					} else {
						cppage.departedReservation(driver);
					}
					break;
				case "Deleted":
					nav.navigateToReservations(driver);
					cppage.SearchWithRes(driver, reservationNumber);
					cppage.deleteReservation(driver, test_steps);

				}

			} else {
				System.out.println("Enter only one option for Reservation status");
			}

		} catch (Exception e) {
			test_steps.add(e.toString());
		} catch (Error e) {
			test_steps.add(e.toString());
		}

	}

//
//	public void intervalRateVerificationAfterStayDetailsNoRateChange(WebDriver driver, String roomClass,
//			String expectedAmount, String avergerPerNight, ArrayList<String> testSteps)
//			throws InterruptedException, NumberFormatException, ParseException {
//
//		Elements_CPReservation res = new Elements_CPReservation(driver);
//		ArrayList<String> rateList = new ArrayList<>();
//
//		String totalRateValue = "//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";
//
//		String avgPerNight = "//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
//		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";
//
//		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
//		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
//
//		WebElement totalRateValueElement = null;
//		WebElement roomClassExpandElement = null;
//		WebElement averagePerNightElement = null;
//
//		Wait.WaitForElement(driver, avgPerNight);
//		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
//		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
//		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));
//
//		try {
//			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
//			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
//		} catch (Exception e) {
//			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
//			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));
//
//		}
//
//		String getTotalRate = totalRateValueElement.getText();
//		String getAvgPerNight = averagePerNightElement.getText();
//
//		String[] split = getTotalRate.split("\\$");
//		getTotalRate = split[1];
//
//		split = getAvgPerNight.split("\\$");
//		getAvgPerNight = split[1];
//
//		testSteps.add("Expected total rate: " + expectedAmount);
//		testSteps.add("Found: " + getTotalRate);
//
//		reslogger.info("Expected total rate: " + expectedAmount);
//		reslogger.info("Found: " + getTotalRate);
//
//		assertEquals(getTotalRate, expectedAmount, "Failed: total rate value is mismatching!");
//		testSteps.add("Verified total rate after perform no rate change");
//
//		// double convertStrIntodb = Double.parseDouble(getAvgPerNight);
//		// getAvgPerNight = String.format("%.2f", convertStrIntodb);
//		// testSteps.add("Expected averger per night: "+avergerPerNight);
//		// testSteps.add("Found: "+getAvgPerNight);
//		//
//		// reslogger.info("Expected averger per night: "+avergerPerNight);
//		// reslogger.info("Found: "+getAvgPerNight);
//		//
//		// assertEquals(getAvgPerNight, avergerPerNight,"Failed: averger per
//		// night is mismatching!");
//		// testSteps.add("Verified averger per night after perform no rate
//		// change");
//
//	}
//
//	public HashMap<String, ArrayList<String>> intervalRateVerificationAfterStayDetailsForDateChanged(WebDriver driver,
//			String dateFormat, String checkInDate, String checkOutDate, String adults, String child, String roomClass,
//			String intervalLength,
//
//			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
//			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
//			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
//			String proRateAdditionalChildCharges, ArrayList<String> testSteps)
//			throws InterruptedException, NumberFormatException, ParseException {
//
//		ArrayList<String> rateList = new ArrayList<>();
//		ArrayList<String> dates = new ArrayList<>();
//		ArrayList<String> status = new ArrayList<>();
//
//		double pro_rate = Double.parseDouble(proRatePerNight);
//		double base_amount = Double.parseDouble(baseAmount);
//		String isEqual = "no";
//
//		// Number of Days
//		int numberofDays = Integer
//				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, dateFormat),
//						Utility.parseDate(checkOutDate, dateFormat, dateFormat)));
//
//		String rateApplied = "";
//
//		int fullIntervals = 0;
//		int halfIntervals = 0;
//		reslogger.info("numberofDays: " + numberofDays);
//		if (numberofDays >= (Integer.parseInt(intervalLength))) {
//			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
//			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
//		}
//		System.out.println("Full Interval:" + fullIntervals);
//		System.out.println("Half Interval:" + halfIntervals);
//
//		testSteps.add("Interval lenght: " + intervalLength);
//		testSteps.add("Number of nights: " + numberofDays);
//		testSteps.add("Full interval: " + fullIntervals);
//		testSteps.add("Half interval: " + halfIntervals);
//
//		int interval = Integer.parseInt(intervalLength);
//		testSteps.add("");
//
//		String totalRateValue = "//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";
//
//		String avgPerNight = "//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
//		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";
//
//		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
//		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
//
//		WebElement totalRateValueElement = null;
//		WebElement roomClassExpandElement = null;
//		WebElement averagePerNightElement = null;
//
//		Wait.WaitForElement(driver, avgPerNight);
//		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
//		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
//		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));
//
//		try {
//			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
//			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
//		} catch (Exception e) {
//			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
//			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));
//
//		}
//
//		roomClassExpandElement.click();
//		Wait.wait2Second();
//		List<WebElement> rateList1 = driver
//				.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]"));
//
//		reslogger.info("rateList1 size: " + rateList1.size());
//		boolean isZero = true;
//
//		for (int i = 1; i < rateList1.size(); i++) {
//
//			String getRatePerInterval = rateList1.get(i).getText();
//			String[] splitStr = getRatePerInterval.split("\\$");
//			getRatePerInterval = splitStr[1].trim();
//			if (getRatePerInterval.equals("0.00")) {
//				isZero = false;
//				break;
//			}
//
//		}
//
//		reslogger.info("isZero: " + isZero);
//		if (!isZero) {
//			String bugId = "<a href='https://innroad.atlassian.net/browse/RATES-3850' target='_blank'>"
//					+ "Failed: Rate is showing incorrect when updating stay details with change only for added dates for interval rateplan.<br>Click here for more info: RATES-3850</a>";
//			testSteps.add("Failed: Click here for more info<br>");
//		} else {
//
//			String averagePerNight = "";
//			Double getFull = 0.00;
//			Double getHalf = 0.00;
//
//			reslogger.info("baseAmount: " + baseAmount);
//			double intial = 0;
//
//			if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
//				if (!isProRateApplied && !isAdditionalChargesApplied) {
//
//					if (fullIntervals == 0) {
//
//						intial = base_amount;
//						getFull = intial;
//
//					}
//
//					else if (fullIntervals > 0 && halfIntervals == 0) {
//
//						intial = base_amount * fullIntervals;
//						getFull = base_amount;
//
//					} else {
//
//						int total = fullIntervals + 1;
//						intial = base_amount * total;
//						getFull = base_amount;
//
//					}
//					reslogger.info("Calculated Rate:" + intial);
//
//				}
//				if (isProRateApplied && !isAdditionalChargesApplied) {
//
//					System.out.println("**********************************Second if:");
//					reslogger.info("======Pro stay only =======");
//
//					if (fullIntervals == 0) {
//
//						intial = base_amount;
//						getFull = base_amount;
//
//					} else if (fullIntervals > 0 && halfIntervals == 0) {
//
//						intial = base_amount * fullIntervals;
//						getFull = base_amount;
//					}
//
//					else {
//
//						double total_fullAmount = base_amount * fullIntervals;
//						reslogger.info("total_fullAmount: " + total_fullAmount);
//						getFull = base_amount;
//
//						double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
//						reslogger.info("total_halfAmount: " + total_halfAmount);
//						intial = total_fullAmount + total_halfAmount;
//						getHalf = Double.parseDouble(proRatePerNight);
//					}
//
//					reslogger.info("Calculated Rate:" + intial);
//
//				}
//
//				System.out.println("Number of Days:" + numberofDays);
//				System.out.println("intervalLength:" + intervalLength);
//				System.out.println("fullIntervals:" + fullIntervals);
//				System.out.println("half:" + halfIntervals);
//				int adultDifference = 0;
//				int childDifference = 0;
//				int personDifference = 0;
//
//				reslogger.info("child: " + child);
//				reslogger.info("adults: " + adults);
//				int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
//				reslogger.info("child_adults" + child_adults);
//
//				// if Additional Charges Applied ANd ProRate False
//				if (isAdditionalChargesApplied && !isProRateApplied) {
//					System.out.println("**********************************Third if:");
//
//					if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
//						if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
//							adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
//
//						child_adults = child_adults - adultDifference;
//						int count = 0;
//						boolean isTrue = false;
//						System.out.println("child_adults: " + child_adults);
//						int intMaxPerson = Integer.parseInt(maxPerson);
//						if (child_adults > intMaxPerson) {
//							System.out.println("child is also diff");
//							for (int i = 1; i < child_adults; i++) {
//								System.out.println("i: " + i);
//								child_adults = child_adults - 1;
//								System.out.println("total: " + child_adults);
//								System.out.println("max person: " + intMaxPerson);
//								if (child_adults == intMaxPerson) {
//									System.out.println("in total = max person");
//									count = i;
//									isTrue = true;
//									break;
//								}
//							}
//
//						}
//
//						if (isTrue) {
//							childDifference = count;
//						}
//						System.out.println("Additonal Adult:" + adultDifference);
//						System.out.println("Additonal Child:" + childDifference);
//
//						if (fullIntervals == 0) {
//
//							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//							getFull = intial;
//
//						}
//
//						else if (fullIntervals > 0 && halfIntervals == 0) {
//
//							double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//
//							getFull = one;
//							reslogger.info("one: " + one);
//							intial = one * fullIntervals;
//
//						} else {
//
//							int total = fullIntervals + 1;
//							double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//
//							reslogger.info("one: " + one);
//							intial = one * total;
//							getFull = one;
//
//						}
//						reslogger.info("expected rate: " + intial);
//
//					}
//
//				}
//				// if Additional Charges Applied And ProRate True
//				if (isAdditionalChargesApplied && isProRateApplied) {
//					System.out.println("**********************************4th if:");
//
//					if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
//							|| numberofDays < (Integer.parseInt(intervalLength))) {
//
//						if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
//							adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
//
//						child_adults = child_adults - adultDifference;
//						// 5
//						int count = 0;
//						boolean isTrue = false;
//						System.out.println("child_adults: " + child_adults);
//						int intMaxPerson = Integer.parseInt(maxPerson);
//						if (child_adults > intMaxPerson) {
//							System.out.println("child is also diff");
//							for (int i = 1; i < child_adults; i++) {
//								System.out.println("i: " + i);
//								child_adults = child_adults - 1;
//								System.out.println("total: " + child_adults);
//								System.out.println("max person: " + intMaxPerson);
//								if (child_adults == intMaxPerson) {
//									System.out.println("in total = max person");
//									count = i;
//									isTrue = true;
//									break;
//								}
//							}
//						}
//
//						if (isTrue) {
//							childDifference = count;
//						}
//
//						System.out.println("Additonal Adult:" + adultDifference);
//						System.out.println("Additonal Child:" + childDifference);
//
//						testSteps.add("Additonal Adult:" + adultDifference);
//						testSteps.add("Additonal Child:" + childDifference);
//
//						if (adultDifference > 0 || childDifference > 0) {
//
//							if (fullIntervals > 0 && halfIntervals > 0) {
//								//
//								reslogger.info("apply half and ful both");
//								double fullamount = base_amount
//										+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//										+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//
//								getFull = fullamount;
//								fullamount = fullIntervals * fullamount;
//
//								double half_amount = Double.parseDouble(proRatePerNight)
//										+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
//										+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));
//
//								getHalf = half_amount;
//
//								half_amount = half_amount * halfIntervals;
//								reslogger.info("fullamount: " + fullamount);
//								reslogger.info("half_amount: " + half_amount);
//
//								intial = fullamount + half_amount;
//								reslogger.info(intial);
//
//							}
//
//							if (fullIntervals > 0 && halfIntervals == 0) {
//								reslogger.info("apply full both");
//
//								intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//										+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//								getFull = intial;
//								intial = intial * fullIntervals;
//								reslogger.info(intial);
//
//							}
//
//							if (fullIntervals == 0) {
//
//								intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//										+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//								getFull = intial;
//								reslogger.info(intial);
//
//							}
//						} else {
//							if (fullIntervals == 0) {
//								intial = base_amount;
//								getFull = intial;
//							}
//							if (fullIntervals > 0 && halfIntervals > 0) {
//
//								double full = fullIntervals * base_amount;
//								reslogger.info(full);
//								getFull = full;
//								double half = halfIntervals * Double.parseDouble(proRatePerNight);
//								getHalf = half;
//								reslogger.info(half);
//								intial = full + half;
//								reslogger.info(intial);
//
//							}
//
//							if (fullIntervals > 0 && halfIntervals == 0) {
//								getFull = base_amount;
//								intial = fullIntervals * base_amount;
//								reslogger.info(intial);
//
//							}
//
//						}
//
//					}
//
//				}
//				String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
//				rateApplied = String.format("%.2f", intial);
//				reslogger.info("convert: " + getValue);
//				reslogger.info("rateApplied: " + rateApplied);
//
//				testSteps.add("Expected rates: " + rateApplied);
//				testSteps.add("Found: " + intial);
//				if (getValue.equals(rateApplied)) {
//					isEqual = "yes";
//
//				} else {
//					isEqual = "no";
//
//				}
//
//				testSteps.add("Verified interval rate value");
//
//				averagePerNight = String.format("%.1f",
//						(Double.parseDouble(Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText())))
//								/ numberofDays);
//
//				if (numberofDays > interval) {
//
//					double getText = Double.parseDouble(
//							Utility.RemoveDollarandSpaces(driver, averagePerNightElement.getText().split(" ")[3]));
//					String getAvg = String.format("%.1f", getText);
//					reslogger.info("getAvg: " + getAvg);
//					// assertEquals(
//					// String.format("%.1f",
//					// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
//					// averagePerNightElement.getText().split(" ")[3])))),
//					// averagePerNight, "Failed: rate didn't match");
//					//
//					if (getAvg.equals(averagePerNight)) {
//						reslogger.info("Avg per night showing as expected");
//						testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
//
//					} else {
//						reslogger.info("Bug added here: ");
//
//					}
//				} else {
//					testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + baseAmount);
//
//				}
//
//				// roomClassExpandElement.click();
//				String requiredDateFormat = "MMM dd yyyy";
//
//				// getting amounts for each date
//				Double amountInDouble = 0.0;
//				int fullIntervalCount = 0;
//				String timeZone = "US/Eastern";
//				int temp = 0;
//				int incrementCounter = 0;
//				int rateListLength = driver
//						.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]")).size();
//
//				ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate,
//						adults, child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
//						isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
//						isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
//						testSteps);
//				for (int i = 1; i < rateListLength; i++) {
//
//					String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter,
//							timeZone);
//					dates.add(getDate);
//
//					String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
//					reslogger.info(dateInRequiredFormat);
//					String getRate = "//td[text()='" + dateInRequiredFormat
//							+ "']//following-sibling::td[contains(@data-bind, 'showInnroadCurrency: { value:')]";
//					Wait.WaitForElement(driver, getRate);
//					Wait.waitForElementToBeVisibile(By.xpath(getRate), driver);
//					Wait.waitForElementToBeClickable(By.xpath(getRate), driver);
//					WebElement getRateElement = driver.findElement(By.xpath(getRate));
//					Utility.ScrollToElement_NoWait(getRateElement, driver);
//					String getAmount = getRateElement.getText();
//
//					amountInDouble = amountInDouble
//							+ Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));
//
//					// If proRate/Additional Charges off
//
//					reslogger.info("Amount for date(" + dateInRequiredFormat + ") is " + getAmount);
//					testSteps.add("Amount for date(" + dateInRequiredFormat + ") is " + getAmount);
//					temp++;
//					double total = 0.00;
//
//					if (temp > fullIntervals) {
//
//						incrementCounter = interval * fullIntervals + 1;
//						reslogger.info(getRates.get(0));
//						reslogger.info(getRates.get(1));
//
//						if (isProRateApplied) {
//							if (halfIntervals == 0) {
//								total = getRates.get(0);
//							} else {
//								total = getRates.get(1);
//							}
//						} else {
//							total = getRates.get(0);
//						}
//						reslogger.info("total: " + total);
//
//					}
//
//					else {
//
//						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
//						reslogger.info(getRates.get(0));
//						reslogger.info(getRates.get(1));
//						total = getRates.get(0);
//						reslogger.info("total: " + total);
//
//					}
//					// rateList.add(rateApplied);
//					rateList.add(Utility.RemoveDollarandSpaces(driver, String.format("%.2f", total)));
//
//				}
//			}
//
//		}
//		status.add(isEqual);
//		HashMap<String, ArrayList<String>> mapList = new HashMap<>();
//		mapList.put("dates", dates);
//		mapList.put("status", status);
//		mapList.put("rates", rateList);
//		return mapList;
//
//	}
//
//	public ArrayList<Double> intervalRateCalculation(WebDriver driver, String dateFormat, String checkInDate,
//			String checkOutDate, String adults, String child, String roomClass, String intervalLength,
//			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
//			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
//			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
//			String proRateAdditionalChildCharges, ArrayList<String> testSteps)
//			throws InterruptedException, NumberFormatException, ParseException {
//
//		Elements_CPReservation res = new Elements_CPReservation(driver);
//		ArrayList<Double> rateList = new ArrayList<>();
//
//		double pro_rate = Double.parseDouble(proRatePerNight);
//		double base_amount = Double.parseDouble(baseAmount);
//
//		int numberofDays = Integer
//				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
//						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));
//
//		int fullIntervals = 0;
//		int halfIntervals = 0;
//		if (numberofDays >= (Integer.parseInt(intervalLength))) {
//			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
//			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
//		}
//
//		testSteps.add("Interval lenght: " + intervalLength);
//		testSteps.add("Number of nights: " + numberofDays);
//		testSteps.add("Full interval: " + fullIntervals);
//		testSteps.add("Half interval: " + halfIntervals);
//
//		int interval = Integer.parseInt(intervalLength);
//
//		double intial = 0;
//		double fullIntervalAmount = 0.00;
//		double perNightAmount = 0.00;
//
//		int adultDifference = 0;
//		int childDifference = 0;
//		int personDifference = 0;
//
//		if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
//			adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
//		int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
//		child_adults = child_adults - adultDifference;
//		int count = 0;
//		boolean isTrue = false;
//		int intMaxPerson = Integer.parseInt(maxPerson);
//		if (child_adults > intMaxPerson) {
//			System.out.println("child is also diff");
//			for (int i = 1; i < child_adults; i++) {
//				child_adults = child_adults - 1;
//				if (child_adults == intMaxPerson) {
//					count = i;
//					isTrue = true;
//					break;
//				}
//			}
//
//		}
//
//		if (isTrue) {
//			childDifference = count;
//		}
//		System.out.println("Additonal Adult:" + adultDifference);
//		System.out.println("Additonal Child:" + childDifference);
//
//		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
//			if (!isProRateApplied && !isAdditionalChargesApplied) {
//
//				if (fullIntervals == 0) {
//
//					fullIntervalAmount = base_amount;
//				}
//
//				else if (fullIntervals > 0 && halfIntervals == 0) {
//
//					fullIntervalAmount = base_amount;
//
//				} else {
//					fullIntervalAmount = base_amount;
//				}
//
//			}
//			if (isProRateApplied && !isAdditionalChargesApplied) {
//
//				if (fullIntervals == 0) {
//
//					fullIntervalAmount = base_amount;
//
//				} else if (fullIntervals > 0 && halfIntervals == 0) {
//
//					fullIntervalAmount = base_amount;
//				}
//
//				else {
//
//					fullIntervalAmount = base_amount;
//					perNightAmount = Double.parseDouble(proRatePerNight);
//				}
//			}
//
//			// if Additional Charges Applied ANd ProRate False
//			if (isAdditionalChargesApplied && !isProRateApplied) {
//
//				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
//
//					if (fullIntervals == 0) {
//
//						fullIntervalAmount = base_amount
//								+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//								+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//					}
//
//					else if (fullIntervals > 0 && halfIntervals == 0) {
//
//						fullIntervalAmount = base_amount
//								+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//								+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//
//					} else {
//
//						fullIntervalAmount = base_amount
//								+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//								+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//
//					}
//					reslogger.info("expected rate: " + intial);
//
//				}
//
//			}
//			if (isAdditionalChargesApplied && isProRateApplied) {
//
//				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
//						|| numberofDays < (Integer.parseInt(intervalLength))) {
//
//					if (adultDifference > 0 || childDifference > 0) {
//
//						if (fullIntervals > 0 && halfIntervals > 0) {
//							fullIntervalAmount = base_amount
//									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//
//							perNightAmount = Double.parseDouble(proRatePerNight)
//									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
//									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));
//
//						}
//
//						if (fullIntervals > 0 && halfIntervals == 0) {
//
//							fullIntervalAmount = base_amount
//									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//						}
//
//						if (fullIntervals == 0) {
//
//							fullIntervalAmount = base_amount
//									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//
//						}
//					} else {
//						if (fullIntervals == 0) {
//							fullIntervalAmount = base_amount;
//						}
//						if (fullIntervals > 0 && halfIntervals > 0) {
//
//							fullIntervalAmount = base_amount;
//							perNightAmount = Double.parseDouble(proRatePerNight);
//						}
//
//						if (fullIntervals > 0 && halfIntervals == 0) {
//							fullIntervalAmount = fullIntervals * base_amount;
//
//						}
//
//					}
//
//				}
//
//			}
//		}
//		rateList.add(fullIntervalAmount);
//		rateList.add(perNightAmount);
//		return rateList;
//	}

	public ArrayList<Double> intervalRateCalculation(WebDriver driver, String dateFormat, String checkInDate,
			String checkOutDate, String adults, String child, String roomClass, String intervalLength,
			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<Double> rateList = new ArrayList<>();

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		int fullIntervals = 1;
		int halfIntervals = 0;
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);

		double intial = 0;
		double fullIntervalAmount = 0.00;
		double perNightAmount = 0.00;

		int adultDifference = 0;
		int childDifference = 0;
		int personDifference = 0;

		if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
			adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
		int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
		child_adults = child_adults - adultDifference;
		int count = 0;
		boolean isTrue = false;
		int intMaxPerson = Integer.parseInt(maxPerson);
		if (child_adults > intMaxPerson) {
			System.out.println("child is also diff");
			for (int i = 1; i < child_adults; i++) {
				child_adults = child_adults - 1;
				if (child_adults == intMaxPerson) {
					count = i;
					isTrue = true;
					break;
				}
			}

		}

		if (isTrue) {
			childDifference = count;
		}
		System.out.println("Additonal Adult:" + adultDifference);
		System.out.println("Additonal Child:" + childDifference);

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				if (fullIntervals == 0) {

					fullIntervalAmount = base_amount;
				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					fullIntervalAmount = base_amount;

				} else {
					fullIntervalAmount = base_amount;
				}

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				if (fullIntervals == 0) {

					fullIntervalAmount = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					fullIntervalAmount = base_amount;
				}

				else {

					fullIntervalAmount = base_amount;
					perNightAmount = Double.parseDouble(proRatePerNight);
				}
			}

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {

					if (fullIntervals == 0) {

						fullIntervalAmount = base_amount
								+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));
					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						fullIntervalAmount = base_amount
								+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					} else {

						fullIntervalAmount = base_amount
								+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}
					reslogger.info("expected rate: " + intial);

				}

			}
			if (isAdditionalChargesApplied && isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							fullIntervalAmount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							perNightAmount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

						}

						if (fullIntervals > 0 && halfIntervals == 0) {

							fullIntervalAmount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
						}

						if (fullIntervals == 0) {

							fullIntervalAmount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						}
					} else {
						if (fullIntervals == 0) {
							fullIntervalAmount = base_amount;
						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							fullIntervalAmount = base_amount;
							perNightAmount = Double.parseDouble(proRatePerNight);
						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							fullIntervalAmount = fullIntervals * base_amount;

						}

					}

				}

			}
		}
		rateList.add(fullIntervalAmount);
		rateList.add(perNightAmount);
		return rateList;
	}

	/*
	 * public ArrayList<ArrayList<String>>
	 * intervalRateVerificationInChangeStayDetails(WebDriver driver, String
	 * dateFormat, String checkInDate, String checkOutDate, String adults, String
	 * child, String roomClass, String intervalLength,
	 * 
	 * String baseAmount, String adultCapacity, String personCapacity, boolean
	 * isAdditionalChargesApplied, String maxAdult, String maxPerson, String
	 * additionalAdultCharges, String additionalChildCharges, boolean
	 * isProRateApplied, String proRatePerNight, String
	 * proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String
	 * folioName, ArrayList<String> testSteps) throws InterruptedException,
	 * NumberFormatException, ParseException {
	 * 
	 * Elements_CPReservation reservationElement = new
	 * Elements_CPReservation(driver); ArrayList<String> rateList = new
	 * ArrayList<>(); ArrayList<String> dates = new ArrayList<>(); String
	 * isRoomChargesEqual = "no";
	 * 
	 * double pro_rate = Double.parseDouble(proRatePerNight); double base_amount =
	 * Double.parseDouble(baseAmount);
	 * 
	 * if (pro_rate > base_amount) pro_rate = base_amount;
	 * 
	 * // Number of Days int numberofDays = Integer
	 * .parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate,
	 * dateFormat, "dd/MM/yyyy"), Utility.parseDate(checkOutDate, dateFormat,
	 * "dd/MM/yyyy")));
	 * 
	 * String rateApplied = "";
	 * 
	 * int fullIntervals = 0; int halfIntervals = 0; reslogger.info("numberofDays: "
	 * + numberofDays); if (numberofDays >= (Integer.parseInt(intervalLength))) {
	 * fullIntervals = numberofDays / Integer.parseInt(intervalLength);
	 * halfIntervals = numberofDays % Integer.parseInt(intervalLength); }
	 * System.out.println("Full Interval:" + fullIntervals);
	 * System.out.println("Half Interval:" + halfIntervals);
	 * 
	 * testSteps.add("Interval lenght: " + intervalLength);
	 * testSteps.add("Number of nights: " + numberofDays);
	 * testSteps.add("Full interval: " + fullIntervals);
	 * testSteps.add("Half interval: " + halfIntervals);
	 * 
	 * int interval = Integer.parseInt(intervalLength); testSteps.add("");
	 * 
	 * String totalRateValue =
	 * "//div[contains(@class,'room-search-result-container')]//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]"
	 * ;
	 * 
	 * String avgPerNight =
	 * "//div[contains(@class,'room-search-result-container')]//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]"
	 * ; String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]"
	 * ;
	 * 
	 * String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
	 * String roomClassExpand =
	 * "//div[contains(@class='room-search-result-container']//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
	 * 
	 * WebElement totalRateValueElement = null; WebElement roomClassExpandElement =
	 * null; WebElement averagePerNightElement = null;
	 * 
	 * Wait.WaitForElement(driver, avgPerNight);
	 * Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
	 * Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
	 * averagePerNightElement = driver.findElement(By.xpath(avgPerNight));
	 * 
	 * try { totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
	 * roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand)); }
	 * catch (Exception e) { totalRateValueElement =
	 * driver.findElement(By.xpath(totalRateValueMRB)); roomClassExpandElement =
	 * driver.findElement(By.xpath(roomClassMRBExpand));
	 * 
	 * }
	 * 
	 * String averagePerNight = ""; reslogger.info("baseAmount: " + baseAmount);
	 * double intial = 0;
	 * 
	 * if ((Integer.parseInt(adults) + Integer.parseInt(child)) <=
	 * Integer.parseInt(personCapacity)) { if (!isProRateApplied &&
	 * !isAdditionalChargesApplied) {
	 * 
	 * System.out.println("**********************************First if:");
	 * 
	 * if (fullIntervals == 0) {
	 * 
	 * intial = base_amount;
	 * 
	 * }
	 * 
	 * else if (fullIntervals > 0 && halfIntervals == 0) {
	 * 
	 * intial = base_amount * fullIntervals;
	 * 
	 * } else {
	 * 
	 * int total = fullIntervals + 1; intial = base_amount * total;
	 * 
	 * } reslogger.info("Calculated Rate:" + intial);
	 * 
	 * } if (isProRateApplied && !isAdditionalChargesApplied) {
	 * 
	 * System.out.println("**********************************Second if:");
	 * reslogger.info("======Pro stay only =======");
	 * 
	 * if (fullIntervals == 0) {
	 * 
	 * intial = base_amount;
	 * 
	 * } else if (fullIntervals > 0 && halfIntervals == 0) {
	 * 
	 * intial = base_amount * fullIntervals; }
	 * 
	 * else {
	 * 
	 * double total_fullAmount = base_amount * fullIntervals;
	 * reslogger.info("total_fullAmount: " + total_fullAmount);
	 * 
	 * double total_halfAmount = (Double.parseDouble(proRatePerNight) *
	 * halfIntervals); reslogger.info("total_halfAmount: " + total_halfAmount);
	 * intial = total_fullAmount + total_halfAmount;
	 * 
	 * }
	 * 
	 * reslogger.info("Calculated Rate:" + intial);
	 * 
	 * }
	 * 
	 * System.out.println("Number of Days:" + numberofDays);
	 * System.out.println("intervalLength:" + intervalLength);
	 * System.out.println("fullIntervals:" + fullIntervals);
	 * System.out.println("half:" + halfIntervals); int adultDifference = 0; int
	 * childDifference = 0; int personDifference = 0;
	 * 
	 * reslogger.info("child: " + child); reslogger.info("adults: " + adults); int
	 * child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
	 * reslogger.info("child_adults" + child_adults);
	 * 
	 * // if Additional Charges Applied ANd ProRate False if
	 * (isAdditionalChargesApplied && !isProRateApplied) {
	 * System.out.println("**********************************Third if:");
	 * 
	 * if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) { if
	 * (Integer.parseInt(adults) > Integer.parseInt(maxAdult)) adultDifference =
	 * Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
	 * 
	 * child_adults = child_adults - adultDifference; int count = 0; boolean isTrue
	 * = false; System.out.println("child_adults: " + child_adults); int
	 * intMaxPerson = Integer.parseInt(maxPerson); if (child_adults > intMaxPerson)
	 * { System.out.println("child is also diff"); for (int i = 1; i < child_adults;
	 * i++) { System.out.println("i: " + i); child_adults = child_adults - 1;
	 * System.out.println("total: " + child_adults);
	 * System.out.println("max person: " + intMaxPerson); if (child_adults ==
	 * intMaxPerson) { System.out.println("in total = max person"); count = i;
	 * isTrue = true; break; } }
	 * 
	 * }
	 * 
	 * if (isTrue) { childDifference = count; }
	 * System.out.println("Additonal Adult:" + adultDifference);
	 * System.out.println("Additonal Child:" + childDifference);
	 * 
	 * if (fullIntervals == 0) {
	 * 
	 * reslogger.info("adult: " + adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))); reslogger.info("child: " +
	 * childDifference * (Double.parseDouble(additionalChildCharges)));
	 * reslogger.info("base_amount: " + base_amount);
	 * reslogger.info("fullIntervals: 0");
	 * 
	 * intial = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * }
	 * 
	 * else if (fullIntervals > 0 && halfIntervals == 0) {
	 * 
	 * double one = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * reslogger.info("one: " + one); intial = one * fullIntervals;
	 * 
	 * } else {
	 * 
	 * int total = fullIntervals + 1; double one = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * reslogger.info("one: " + one); intial = one * total; }
	 * reslogger.info("expected rate: " + intial);
	 * 
	 * }
	 * 
	 * } // if Additional Charges Applied And ProRate True if
	 * (isAdditionalChargesApplied && isProRateApplied) {
	 * System.out.println("**********************************4th if:");
	 * 
	 * if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity) ||
	 * numberofDays < (Integer.parseInt(intervalLength))) {
	 * 
	 * if (Integer.parseInt(adults) > Integer.parseInt(maxAdult)) adultDifference =
	 * Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
	 * 
	 * child_adults = child_adults - adultDifference; // 5 int count = 0; boolean
	 * isTrue = false; System.out.println("child_adults: " + child_adults); int
	 * intMaxPerson = Integer.parseInt(maxPerson); if (child_adults > intMaxPerson)
	 * { System.out.println("child is also diff"); for (int i = 1; i < child_adults;
	 * i++) { System.out.println("i: " + i); child_adults = child_adults - 1;
	 * System.out.println("total: " + child_adults);
	 * System.out.println("max person: " + intMaxPerson); if (child_adults ==
	 * intMaxPerson) { System.out.println("in total = max person"); count = i;
	 * isTrue = true; break; } }
	 * 
	 * }
	 * 
	 * if (isTrue) { childDifference = count; }
	 * 
	 * System.out.println("Additonal Adult:" + adultDifference);
	 * System.out.println("Additonal Child:" + childDifference);
	 * 
	 * testSteps.add("Additonal Adult:" + adultDifference);
	 * testSteps.add("Additonal Child:" + childDifference);
	 * 
	 * if (adultDifference > 0 || childDifference > 0) {
	 * 
	 * if (fullIntervals > 0 && halfIntervals > 0) { //
	 * reslogger.info("apply half and ful both"); double fullamount = base_amount +
	 * (adultDifference * (Double.parseDouble(additionalAdultCharges))) +
	 * (childDifference * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * fullamount = fullIntervals * fullamount;
	 * 
	 * double half_amount = Double.parseDouble(proRatePerNight) + (adultDifference *
	 * Double.parseDouble(proRateAdditionalAdultCharges)) + (childDifference *
	 * (Double.parseDouble(proRateAdditionalChildCharges)));
	 * 
	 * half_amount = half_amount * halfIntervals; reslogger.info("fullamount: " +
	 * fullamount); reslogger.info("half_amount: " + half_amount);
	 * 
	 * intial = fullamount + half_amount; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * if (fullIntervals > 0 && halfIntervals == 0) {
	 * reslogger.info("apply full both");
	 * 
	 * intial = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * intial = intial * fullIntervals; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * if (fullIntervals == 0) {
	 * 
	 * intial = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * reslogger.info(intial);
	 * 
	 * } } else { if (fullIntervals == 0) { intial = base_amount;
	 * 
	 * } if (fullIntervals > 0 && halfIntervals > 0) {
	 * 
	 * double full = fullIntervals * base_amount; reslogger.info(full);
	 * 
	 * double half = halfIntervals * Double.parseDouble(proRatePerNight);
	 * reslogger.info(half); intial = full + half; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * if (fullIntervals > 0 && halfIntervals == 0) { intial = fullIntervals *
	 * base_amount; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * }
	 * 
	 * }
	 * 
	 * }
	 * 
	 * Folio folio = new Folio(); String getValue =
	 * folio.splitStringBySign(totalRateValueElement.getText(), "$").trim();
	 * rateApplied = String.format("%.2f", intial).trim();
	 * reslogger.info("convert: " + getValue); reslogger.info("rateApplied: " +
	 * rateApplied);
	 * 
	 * testSteps.add("Expected rates: " + rateApplied); testSteps.add("Found: " +
	 * intial); if (getValue.equals(rateApplied)) { isRoomChargesEqual = "yes";
	 * testSteps.add("Verified interval rate value is matching");
	 * 
	 * } else { isRoomChargesEqual = "no";
	 * testSteps.add("Verified interval rate value is not matching");
	 * 
	 * }
	 * 
	 * // averagePerNight = String.format("%.1f", //
	 * (Double.parseDouble(Utility.RemoveDollarandSpaces(driver, //
	 * totalRateValueElement.getText()))) // / numberofDays); // // assertEquals( //
	 * String.format("%.1f", //
	 * (Double.parseDouble(Utility.RemoveDollarandSpaces(driver, //
	 * averagePerNightElement.getText().split(" ")[3])))), // averagePerNight,
	 * "Failed: rate didn't match");
	 * 
	 * testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" +
	 * averagePerNight); reslogger.info("Verified total Amount:" + baseAmount +
	 * " Avg Per Night:" + averagePerNight); roomClassExpandElement.click(); String
	 * requiredDateFormat = "MMM dd yyyy";
	 * 
	 * // getting amounts for each date Double amountInDouble = 0.0; int
	 * fullIntervalCount = 0; String timeZone = "US/Eastern"; int temp = 0; int
	 * incrementCounter = 0; // int rateListLength = driver //
	 * .findElements(By.xpath("//td[contains(@data-bind, // 'showInnroadCurrency: {
	 * value:')]")).size();
	 */

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetails(WebDriver driver, String dateFormat,
			String checkInDate, String checkOutDate, String adults, String child, String roomClass,
			String intervalLength,

			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, String folioName, ArrayList<String> ratesList,
			String totalRoomCharges, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}
		// IF Pro-Rate/Addtional Charges off
		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				System.out.println("**********************************Third if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						for (int i = 1; i < child_adults; i++) {
							System.out.println("i: " + i);
							child_adults = child_adults - 1;
							System.out.println("total: " + child_adults);
							System.out.println("max person: " + intMaxPerson);
							if (child_adults == intMaxPerson) {
								System.out.println("in total = max person");
								count = i;
								isTrue = true;
								break;
							}
						}

					}

					if (isTrue) {
						childDifference = count;
					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				System.out.println("**********************************4th if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						for (int i = 1; i < child_adults; i++) {
							System.out.println("i: " + i);
							child_adults = child_adults - 1;
							System.out.println("total: " + child_adults);
							System.out.println("max person: " + intMaxPerson);
							if (child_adults == intMaxPerson) {
								System.out.println("in total = max person");
								count = i;
								isTrue = true;
								break;
							}
						}

					}

					if (isTrue) {
						childDifference = count;
					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + totalRoomCharges);

			testSteps.add("Expected rates: " + totalRoomCharges);
			testSteps.add("Found: " + getValue);
			if (getValue.equals(totalRoomCharges)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					testSteps);

			reslogger.info("Size of ratesList: " + ratesList.size());
			reslogger.info("Size of list: " + reservationElement.StartDate.size());

			for (int i = 0; i < reservationElement.StartDate.size(); i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					test_steps.add("Failed: Intervals are showing as per requirment");
					// assertEquals(startDate, dateInRequiredFormat,"Failed:
					// interval date is mismatching!");

				} else {
					test_steps.add("Failed: Intervals are not showing as per requirment");

				}

				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				testSteps.add(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				temp++;
				double total = 0.00;
				reslogger.info("ratesList: " + ratesList.size());
				reslogger.info("i: " + i);
				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						if (i < ratesList.size()) {

							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsForNoRateChangePerRoomPerNight(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength,

			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, String folioName, ArrayList<String> ratesList,
			String totalRoomCharges, HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * numberofDays;

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}
		// IF Pro-Rate/Addtional Charges off
		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				System.out.println("**********************************Third if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				System.out.println("**********************************4th if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);

					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + totalRoomCharges);

			testSteps.add("Expected rates: " + totalRoomCharges);
			testSteps.add("Found: " + getValue);
			if (getValue.equals(totalRoomCharges)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					testSteps);

			reslogger.info("Size of ratesList: " + ratesList.size());
			reslogger.info("Size of list: " + reservationElement.StartDate.size());

			for (int i = 0; i < reservationElement.StartDate.size(); i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					test_steps.add("Failed: Intervals are showing as per requirment");
					// assertEquals(startDate, dateInRequiredFormat,"Failed:
					// interval date is mismatching!");

				} else {
					test_steps.add("Failed: Intervals are not showing as per requirment");

				}

				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				testSteps.add(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				temp++;
				double total = 0.00;
				reslogger.info("ratesList: " + ratesList.size());
				reslogger.info("i: " + i);
				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						if (i < ratesList.size()) {

							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public void selectRoomWithRatePlanRulesValidation(WebDriver driver, ArrayList test_steps, String RoomClass,
			String IsAssign, String Account, String checkinColor, String checkoutColor, String minStaycolor,
			int minNights) throws InterruptedException {
		reslogger.info(RoomClass);
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";
		reslogger.info(room);
		Wait.WaitForElement(driver, room);

		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/following-sibling::span";
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				reslogger.info(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				Random random = new Random();
				int randomNumber = random.nextInt(count1 - 1) + 1;
				reslogger.info("count : " + count1);
				reslogger.info("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[text()='" + RoomClass
					+ "']/../../../following-sibling::div//a[contains(@class,'r-rc-select-btn')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 10) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (minStaycolor.equalsIgnoreCase("Red")) {
					String min = "//p[text()='Selecting this room will violate the following rules']/..//div[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'"
							+ minNights + " NIGHT')]";
					Wait.WaitForElement(driver, min);
					test_steps.add("Verified min stay rule in the rules broken pop up as : " + minNights + " night");
					reslogger.info("Verified min stay rule in the rules broken pop up as : " + minNights + " night");
				}

				if (checkinColor.equalsIgnoreCase("Red")) {
					String min = "//p[text()='Selecting this room will violate the following rules']/..//div";
					Wait.WaitForElement(driver, min);
					String nocheckin = driver.findElement(By.xpath(min)).getText();
					if (nocheckin.contains("No Check In")) {
						test_steps.add("Verified no check in rule in the rules broken pop up");
						reslogger.info("Verified no check in rule in the rules broken pop up");
					}
				}

				if (checkoutColor.equalsIgnoreCase("Red")) {
					String min = "//p[text()='Selecting this room will violate the following rules']/..//div";
					Wait.WaitForElement(driver, min);
					String nocheckin = driver.findElement(By.xpath(min)).getText();
					if (nocheckin.contains("No Check out")) {
						test_steps.add("Verified no check in rule in the rules broken pop up");
						reslogger.info("Verified no check in rule in the rules broken pop up");
					}
				}

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}
			if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
				String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
				// Wait.WaitForElement(driver, policy);
				try {
					Wait.wait5Second();
					driver.findElement(By.xpath(policy)).click();
					test_steps.add("Based on the changes made, new policies are applicable.? : yes");
					reslogger.info("Based on the changes made, new policies are applicable.? : yes");

				} catch (Exception e) {
					// TODO: handle exception
				}

				loading = "(//div[@class='ir-loader-in'])[2]";
				counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsForNoRateChangePerRoomPerStay(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength,

			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, String folioName, ArrayList<String> ratesList,
			String totalRoomCharges, HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = Double.parseDouble(productValue.get("amount"));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}
		// IF Pro-Rate/Addtional Charges off
		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				System.out.println("**********************************Third if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				System.out.println("**********************************4th if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + totalRoomCharges);

			testSteps.add("Expected rates: " + totalRoomCharges);
			testSteps.add("Found: " + getValue);
			if (getValue.equals(totalRoomCharges)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					testSteps);

			reslogger.info("Size of ratesList: " + ratesList.size());
			reslogger.info("Size of list: " + reservationElement.StartDate.size());

			for (int i = 0; i < reservationElement.StartDate.size(); i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					test_steps.add("Failed: Intervals are showing as per requirment");
					// assertEquals(startDate, dateInRequiredFormat,"Failed:
					// interval date is mismatching!");

				} else {
					test_steps.add("Failed: Intervals are not showing as per requirment");

				}

				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				testSteps.add(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				temp++;
				double total = 0.00;
				reslogger.info("ratesList: " + ratesList.size());
				reslogger.info("i: " + i);
				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						if (i < ratesList.size()) {

							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsForNoRateChangePerAdultPerStay(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength,

			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, String folioName, ArrayList<String> ratesList,
			String totalRoomCharges, HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(adults));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}
		// IF Pro-Rate/Addtional Charges off
		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				System.out.println("**********************************Third if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				System.out.println("**********************************4th if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + totalRoomCharges);

			testSteps.add("Expected rates: " + totalRoomCharges);
			testSteps.add("Found: " + getValue);
			if (getValue.equals(totalRoomCharges)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					testSteps);

			reslogger.info("Size of ratesList: " + ratesList.size());
			reslogger.info("Size of list: " + reservationElement.StartDate.size());

			for (int i = 0; i < reservationElement.StartDate.size(); i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					test_steps.add("Failed: Intervals are showing as per requirment");
					// assertEquals(startDate, dateInRequiredFormat,"Failed:
					// interval date is mismatching!");

				} else {
					test_steps.add("Failed: Intervals are not showing as per requirment");

				}

				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				testSteps.add(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				temp++;
				double total = 0.00;
				reslogger.info("ratesList: " + ratesList.size());
				reslogger.info("i: " + i);
				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						if (i < ratesList.size()) {

							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public boolean verifyEnterFindGuestProfilewithFirstName(WebDriver driver, String firstName, boolean expected,
			ArrayList<String> test_steps) throws Exception {
		boolean isResult = false;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.enterFindGuestProfile, driver);
		res.enterFindGuestProfile.clear();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterFindGuestProfile), driver);
		res.enterFindGuestProfile.sendKeys(firstName);
		test_steps.add("Verify find guest profile having result while searching with: " + firstName);
		try {
			if (res.resultGuestHistory.isDisplayed()) {
				isResult = true;

				String foundName = res.getAutosuggestName.getText().trim();
				try {
					assertEquals(foundName, firstName,
							"FAIL - No records shown due to the error" + "<br>"
									+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
									+ "Click here to open JIRA: NG-10480</a>");
					test_steps.add("Found and verified record with Name: " + firstName);
				} catch (Exception e) {
					test_steps.add("FAIL - No records shown due to the error" + "<br>"
							+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
							+ "Click here to open JIRA: NG-10480</a>" + e.toString());
				} catch (Error e) {
					test_steps.add("FAIL - No records shown due to the error" + "<br>"
							+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
							+ "Click here to open JIRA: NG-10480</a>" + e.toString());
				}
			}
		} catch (Exception e) {

		} catch (Error e) {

		}

		try {
			Assert.assertEquals(isResult, expected,
					"FAIL - No records shown due to the error" + "<br>"
							+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
							+ "Click here to open JIRA: NG-10480</a>");
		} catch (Exception e) {

			test_steps.add("FAIL - No records shown due to the error" + "<br>"
					+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
					+ "Click here to open JIRA: NG-10480</a>" + e.toString());
		} catch (Error e) {
			test_steps.add("FAIL - No records shown due to the error" + "<br>"
					+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
					+ "Click here to open JIRA: NG-10480</a>" + e.toString());
		}
		return isResult;
	}

	public void verifyEnterFindGuestProfilewithGuestName(WebDriver driver, String guestName, boolean expected,
			ArrayList<String> test_steps) throws Exception {
		boolean isResult = false;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.enterFindGuestProfile, driver);
		res.enterFindGuestProfile.clear();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterFindGuestProfile), driver);
		res.enterFindGuestProfile.sendKeys(guestName);
		// verifySpinerLoading(driver);
		test_steps.add("Verify find guest profile having result while searching with: " + guestName);
		// clickYesButtonRollBackMsg(driver, test_steps);
		// verifySpinerLoading(driver);
		try {
			if (res.resultGuestHistory.isDisplayed()) {
				isResult = true;

				String foundName = res.getAutosuggestName.getText().trim();
				try {
					assertEquals(foundName, guestName,
							"FAIL - No records shown due to the error" + "<br>"
									+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
									+ "Click here to open JIRA: NG-10480</a>");
					test_steps.add("Found and verified record with Name: " + guestName);
				} catch (Exception e) {
					test_steps.add("FAIL - No records shown due to the error" + "<br>"
							+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
							+ "Click here to open JIRA: NG-10480</a>" + e.toString());
				} catch (Error e) {
					test_steps.add("FAIL - No records shown due to the error" + "<br>"
							+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
							+ "Click here to open JIRA: NG-10480</a>" + e.toString());
				}
			}
		} catch (Exception e) {

		} catch (Error e) {

		}

		try {
			Assert.assertEquals(isResult, expected,
					"FAIL - No records shown due to the error" + "<br>"
							+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
							+ "Click here to open JIRA: NG-10480</a>");
		} catch (Exception e) {

			test_steps.add("FAIL - No records shown due to the error" + "<br>"
					+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
					+ "Click here to open JIRA: NG-10480</a>" + e.toString());
		} catch (Error e) {
			test_steps.add("FAIL - No records shown due to the error" + "<br>"
					+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
					+ "Click here to open JIRA: NG-10480</a>" + e.toString());
		}
	}

	public void verifyIncidentalsLineItemAmount(WebDriver driver, String description, String expectedAmount,
			ArrayList<String> test_steps, int lineNo) {
		// PackagePlanFolio - Per Stay Component(s)
		// PackagePlanFolio- Per Night Component(s)
		if (Float.parseFloat(expectedAmount) != Float.parseFloat("0")) {
			String path = "(//td[contains(text(),'" + description + "')]/following-sibling::td[1])[" + lineNo + "]";
			reslogger.info(path);
//				Wait.WaitForElement(driver, path);
			String foundAmount = driver.findElement(By.xpath(path)).getText();
			reslogger.info(foundAmount);
			foundAmount = Utility.convertDollarToNormalAmount(driver, foundAmount);
			reslogger.info(foundAmount);
			assertEquals(Float.parseFloat(foundAmount), Float.parseFloat(expectedAmount),
					"Failed to verify Incidentals Line Item " + description + " Amount");
			test_steps.add("Successfully Verified Incidental Line Item " + description + " Amount : " + expectedAmount);
			reslogger.info("Successfully Verified Incidental Line Item " + description + " Amount : " + expectedAmount);
		}
	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsForNoRateChangePerChildPerStay(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength,

			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, String folioName, ArrayList<String> ratesList,
			String totalRoomCharges, HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(child));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}
		// IF Pro-Rate/Addtional Charges off
		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				System.out.println("**********************************Third if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				System.out.println("**********************************4th if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + totalRoomCharges);

			testSteps.add("Expected rates: " + totalRoomCharges);
			testSteps.add("Found: " + getValue);
			if (getValue.equals(totalRoomCharges)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					testSteps);

			reslogger.info("Size of ratesList: " + ratesList.size());
			reslogger.info("Size of list: " + reservationElement.StartDate.size());

			for (int i = 0; i < reservationElement.StartDate.size(); i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					test_steps.add("Failed: Intervals are showing as per requirment");
					// assertEquals(startDate, dateInRequiredFormat,"Failed:
					// interval date is mismatching!");

				} else {
					test_steps.add("Failed: Intervals are not showing as per requirment");

				}

				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				testSteps.add(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				temp++;
				double total = 0.00;
				reslogger.info("ratesList: " + ratesList.size());
				reslogger.info("i: " + i);
				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						if (i < ratesList.size()) {

							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsForNoRateChangePerChildPerNight(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength,

			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, String folioName, ArrayList<String> ratesList,
			String totalRoomCharges, HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * numberofDays
				* (Integer.parseInt(child));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}
		// IF Pro-Rate/Addtional Charges off
		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				System.out.println("**********************************Third if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				System.out.println("**********************************4th if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + totalRoomCharges);

			testSteps.add("Expected rates: " + totalRoomCharges);
			testSteps.add("Found: " + getValue);
			if (getValue.equals(totalRoomCharges)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					testSteps);

			reslogger.info("Size of ratesList: " + ratesList.size());
			reslogger.info("Size of list: " + reservationElement.StartDate.size());

			for (int i = 0; i < reservationElement.StartDate.size(); i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					test_steps.add("Failed: Intervals are showing as per requirment");
					// assertEquals(startDate, dateInRequiredFormat,"Failed:
					// interval date is mismatching!");

				} else {
					test_steps.add("Failed: Intervals are not showing as per requirment");

				}

				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				testSteps.add(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				temp++;
				double total = 0.00;
				reslogger.info("ratesList: " + ratesList.size());
				reslogger.info("i: " + i);
				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						if (i < ratesList.size()) {

							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsForNoRateChangePerPersonPerNight(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength,

			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, String folioName, ArrayList<String> ratesList,
			String totalRoomCharges, HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = 0.00;
		totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * numberofDays
				* (Integer.parseInt(child) + Integer.parseInt(adults));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}
		// IF Pro-Rate/Addtional Charges off
		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				System.out.println("**********************************Third if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				System.out.println("**********************************4th if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + totalRoomCharges);

			testSteps.add("Expected rates: " + totalRoomCharges);
			testSteps.add("Found: " + getValue);
			if (getValue.equals(totalRoomCharges)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					testSteps);

			reslogger.info("Size of ratesList: " + ratesList.size());
			reslogger.info("Size of list: " + reservationElement.StartDate.size());

			for (int i = 0; i < reservationElement.StartDate.size(); i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					test_steps.add("Failed: Intervals are showing as per requirment");
					// assertEquals(startDate, dateInRequiredFormat,"Failed:
					// interval date is mismatching!");

				} else {
					test_steps.add("Failed: Intervals are not showing as per requirment");

				}

				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				testSteps.add(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				temp++;
				double total = 0.00;
				reslogger.info("ratesList: " + ratesList.size());
				reslogger.info("i: " + i);
				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						if (i < ratesList.size()) {

							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsForNoRateChangePerPersonPerStay(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength,

			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, String folioName, ArrayList<String> ratesList,
			String totalRoomCharges, HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = 0.00;
		totalAmountForPackage = Double.parseDouble(productValue.get("amount"))
				* (Integer.parseInt(child) + Integer.parseInt(adults));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}
		// IF Pro-Rate/Addtional Charges off
		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				System.out.println("**********************************Third if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				System.out.println("**********************************4th if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + totalRoomCharges);

			testSteps.add("Expected rates: " + totalRoomCharges);
			testSteps.add("Found: " + getValue);
			if (getValue.equals(totalRoomCharges)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					testSteps);

			reslogger.info("Size of ratesList: " + ratesList.size());
			reslogger.info("Size of list: " + reservationElement.StartDate.size());

			for (int i = 0; i < reservationElement.StartDate.size(); i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					test_steps.add("Failed: Intervals are showing as per requirment");
					// assertEquals(startDate, dateInRequiredFormat,"Failed:
					// interval date is mismatching!");

				} else {
					test_steps.add("Failed: Intervals are not showing as per requirment");

				}

				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				testSteps.add(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				temp++;
				double total = 0.00;
				reslogger.info("ratesList: " + ratesList.size());
				reslogger.info("i: " + i);
				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						if (i < ratesList.size()) {

							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsForNoRateChangePerRoomPerInterval(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength,

			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, String folioName, ArrayList<String> ratesList,
			String totalRoomCharges, HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}
		// IF Pro-Rate/Addtional Charges off
		String averagePerNight = "";
		double totalAmountForPackage = 0.00;
		String convertTotalPackageAmountIntoStr = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				System.out.println("**********************************Third if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				System.out.println("**********************************4th if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * fullIntervals;
			double halfIntervalPackageAmount = 0.00;
			if (halfIntervals > 0) {
				halfIntervalPackageAmount = Double.parseDouble(productValue.get("amount")) * halfIntervals;
			}
			totalAmountForPackage = totalAmountForPackage + halfIntervalPackageAmount;
			convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
			reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + totalRoomCharges);

			testSteps.add("Expected rates: " + totalRoomCharges);
			testSteps.add("Found: " + getValue);
			if (getValue.equals(totalRoomCharges)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					testSteps);

			reslogger.info("Size of ratesList: " + ratesList.size());
			reslogger.info("Size of list: " + reservationElement.StartDate.size());

			for (int i = 0; i < reservationElement.StartDate.size(); i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					test_steps.add("Failed: Intervals are showing as per requirment");
					// assertEquals(startDate, dateInRequiredFormat,"Failed:
					// interval date is mismatching!");

				} else {
					test_steps.add("Failed: Intervals are not showing as per requirment");

				}

				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				testSteps.add(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				temp++;
				double total = 0.00;
				reslogger.info("ratesList: " + ratesList.size());
				reslogger.info("i: " + i);
				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						if (i < ratesList.size()) {

							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsForNoRateChangePerChildPerInterval(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength,

			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, String folioName, ArrayList<String> ratesList,
			String totalRoomCharges, HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}
		// IF Pro-Rate/Addtional Charges off
		String averagePerNight = "";
		double totalAmountForPackage = 0.00;
		String convertTotalPackageAmountIntoStr = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				System.out.println("**********************************Third if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				System.out.println("**********************************4th if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(child));
			double halfIntervalPackageAmount = 0.00;
			if (halfIntervals > 0) {
				halfIntervalPackageAmount = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(child));
			}
			totalAmountForPackage = totalAmountForPackage + halfIntervalPackageAmount;
			convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
			reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + totalRoomCharges);

			testSteps.add("Expected rates: " + totalRoomCharges);
			testSteps.add("Found: " + getValue);
			if (getValue.equals(totalRoomCharges)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					testSteps);

			reslogger.info("Size of ratesList: " + ratesList.size());
			reslogger.info("Size of list: " + reservationElement.StartDate.size());

			for (int i = 0; i < reservationElement.StartDate.size(); i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					test_steps.add("Failed: Intervals are showing as per requirment");
					// assertEquals(startDate, dateInRequiredFormat,"Failed:
					// interval date is mismatching!");

				} else {
					test_steps.add("Failed: Intervals are not showing as per requirment");

				}

				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				testSteps.add(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				temp++;
				double total = 0.00;
				reslogger.info("ratesList: " + ratesList.size());
				reslogger.info("i: " + i);
				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						if (i < ratesList.size()) {

							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsForNoRateChangePerAdultPerInterval(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength,

			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, String folioName, ArrayList<String> ratesList,
			String totalRoomCharges, HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}
		// IF Pro-Rate/Addtional Charges off
		String averagePerNight = "";
		double totalAmountForPackage = 0.00;
		String convertTotalPackageAmountIntoStr = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				System.out.println("**********************************Third if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				System.out.println("**********************************4th if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(adults));
			double halfIntervalPackageAmount = 0.00;
			if (halfIntervals > 0) {
				halfIntervalPackageAmount = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(adults));
			}
			totalAmountForPackage = totalAmountForPackage + halfIntervalPackageAmount;
			convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
			reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + totalRoomCharges);

			testSteps.add("Expected rates: " + totalRoomCharges);
			testSteps.add("Found: " + getValue);
			if (getValue.equals(totalRoomCharges)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					testSteps);

			reslogger.info("Size of ratesList: " + ratesList.size());
			reslogger.info("Size of list: " + reservationElement.StartDate.size());

			for (int i = 0; i < reservationElement.StartDate.size(); i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					test_steps.add("Failed: Intervals are showing as per requirment");
					// assertEquals(startDate, dateInRequiredFormat,"Failed:
					// interval date is mismatching!");

				} else {
					test_steps.add("Failed: Intervals are not showing as per requirment");

				}

				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				testSteps.add(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				temp++;
				double total = 0.00;
				reslogger.info("ratesList: " + ratesList.size());
				reslogger.info("i: " + i);
				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						if (i < ratesList.size()) {

							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsForNoRateChangePerPersonPerInterval(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength,

			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, String folioName, ArrayList<String> ratesList,
			String totalRoomCharges, HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}
		// IF Pro-Rate/Addtional Charges off
		String averagePerNight = "";
		double totalAmountForPackage = 0.00;
		String convertTotalPackageAmountIntoStr = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				System.out.println("**********************************Third if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				System.out.println("**********************************4th if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			int persons = Integer.parseInt(child) + Integer.parseInt(adults);
			totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * persons;
			double halfIntervalPackageAmount = 0.00;
			if (halfIntervals > 0) {
				halfIntervalPackageAmount = Double.parseDouble(productValue.get("amount")) * persons;
			}
			totalAmountForPackage = totalAmountForPackage + halfIntervalPackageAmount;
			convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
			reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + totalRoomCharges);

			testSteps.add("Expected rates: " + totalRoomCharges);
			testSteps.add("Found: " + getValue);
			if (getValue.equals(totalRoomCharges)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					testSteps);

			reslogger.info("Size of ratesList: " + ratesList.size());
			reslogger.info("Size of list: " + reservationElement.StartDate.size());

			for (int i = 0; i < reservationElement.StartDate.size(); i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					test_steps.add("Failed: Intervals are showing as per requirment");
					// assertEquals(startDate, dateInRequiredFormat,"Failed:
					// interval date is mismatching!");

				} else {
					test_steps.add("Failed: Intervals are not showing as per requirment");

				}

				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				testSteps.add(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				temp++;
				double total = 0.00;
				reslogger.info("ratesList: " + ratesList.size());
				reslogger.info("i: " + i);
				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						if (i < ratesList.size()) {

							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public boolean sameAsMailingAddressCheckBox(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean isChecked = false;
		if (res.sameAsMailingAddr.isSelected()) {
			isChecked = true;
		}
		return isChecked;

	}

	public void sameAsMailing(WebDriver driver, String isChecked) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		JavascriptExecutor jse = (JavascriptExecutor) driver;
		if (res.sameAsmailing.isSelected() && isChecked.equalsIgnoreCase("Yes")) {
			reslogger.info("Check box already checked");
		} else if (res.sameAsmailing.isSelected() && !isChecked.equalsIgnoreCase("Yes")) {
			jse.executeScript("arguments[0].click();", res.sameAsmailing);

		} else if (!res.sameAsmailing.isSelected() && isChecked.equalsIgnoreCase("Yes")) {
			jse.executeScript("arguments[0].click();", res.sameAsmailing);
		} else if (!res.sameAsmailing.isSelected() && !isChecked.equalsIgnoreCase("Yes")) {

		}
	}

	public void enterBillingInfo(WebDriver driver, ArrayList<String> test_steps, String guestFirstName,
			String guestLastName) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.BillingFirstName);
		res.billingFirstName.sendKeys(Keys.CONTROL + "a");
		res.billingFirstName.sendKeys(Keys.DELETE);
		res.billingFirstName.sendKeys(guestFirstName);
		test_steps.add("Guest First billing address Name : <b>" + guestFirstName + "</b>");
		reslogger.info("Guest First Name : <b>" + guestFirstName + "</b>");

		Wait.WaitForElement(driver, OR_Reservation.BillingLastName);
		res.billingLastName.sendKeys(Keys.CONTROL + "a");
		res.billingLastName.sendKeys(Keys.DELETE);
		res.billingLastName.sendKeys(guestLastName);
		test_steps.add("Guest Last billing address Name : <b>" + guestLastName + "</b>");
		reslogger.info("Guest Last Name : <b>" + guestLastName + "</b>");

	}

	public void selectBillingCountry(WebDriver driver, ArrayList<String> test_steps, String Country) {
		String button = "//select[@name='country']/following-sibling::div/button";
		Wait.WaitForElement(driver, button);
		driver.findElement(By.xpath(button)).click();

		String cntry = "//select[@name='country']/following-sibling::div//ul/li//span[contains(text(),'"
				+ Country.trim() + "')]";
		Wait.WaitForElement(driver, cntry);
		driver.findElement(By.xpath(cntry)).click();
		test_steps.add("Selected Country : " + Country);
		reslogger.info("Selected Country : " + Country);
	}

	public ArrayList<Double> intervalRateCalculation(WebDriver driver, String dateFormat, String checkInDate,
			String checkOutDate, String adults, String child, String roomClass, String intervalLength,
			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, int numberofDays, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<Double> rateList = new ArrayList<>();

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		// int numberofDays = Integer
		// .parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate,
		// dateFormat, "dd/MM/yyyy"),
		// Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		int fullIntervals = 0;
		int halfIntervals = 0;
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);

		double intial = 0;
		double fullIntervalAmount = 0.00;
		double perNightAmount = 0.00;

		int adultDifference = 0;
		int childDifference = 0;
		int personDifference = 0;

		if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
			adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
		int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
		child_adults = child_adults - adultDifference;
		int count = 0;
		boolean isTrue = false;
		int intMaxPerson = Integer.parseInt(maxPerson);
		if (child_adults > intMaxPerson) {
			System.out.println("child is also diff");
			childDifference = Math.abs(child_adults - intMaxPerson);

//			for (int i = 1; i < child_adults; i++) {
//				child_adults = child_adults - 1;
//				if (child_adults == intMaxPerson) {
//					count = i;
//					isTrue = true;
//					break;
//				}
//			}

		}

//		if (isTrue) {
//			childDifference = count;
//		}
		System.out.println("Additonal Adult:" + adultDifference);
		System.out.println("Additonal Child:" + childDifference);

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				if (fullIntervals == 0) {

					fullIntervalAmount = base_amount;
				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					fullIntervalAmount = base_amount;

				} else {
					fullIntervalAmount = base_amount;
				}

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				if (fullIntervals == 0) {

					fullIntervalAmount = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					fullIntervalAmount = base_amount;
				}

				else {

					fullIntervalAmount = base_amount;
					perNightAmount = Double.parseDouble(proRatePerNight);
				}
			}

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {

					if (fullIntervals == 0) {

						fullIntervalAmount = base_amount
								+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));
					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						fullIntervalAmount = base_amount
								+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					} else {

						fullIntervalAmount = base_amount
								+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}
					reslogger.info("expected rate: " + intial);

				}

			}
			if (isAdditionalChargesApplied && isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							fullIntervalAmount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							perNightAmount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

						}

						if (fullIntervals > 0 && halfIntervals == 0) {

							fullIntervalAmount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
						}

						if (fullIntervals == 0) {

							fullIntervalAmount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						}
					} else {
						if (fullIntervals == 0) {
							fullIntervalAmount = base_amount;
						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							fullIntervalAmount = base_amount;
							perNightAmount = Double.parseDouble(proRatePerNight);
						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							fullIntervalAmount = fullIntervals * base_amount;

						}

					}

				}

			}
		}
		rateList.add(fullIntervalAmount);
		rateList.add(perNightAmount);
		return rateList;
	}

	public void closeReservationSearch(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.closeReservationSearch);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.closeReservationSearch), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.closeReservationSearch), driver);
		res.closeReservationSearch.click();
		test_steps.add("Close reseravtion search");
		reslogger.info("Close reseravtion search");
	}

	public String calculationOfDeposiAmountToBePaidForRateV2(HashMap<String, String> roomCharges, String type,
			String attrValue) throws Exception {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountToBePaid = null;
		double paidAmount = 0.00;
		double noOfNightCharges = 0.00;
		double totalRoomCharges = 0.00;
		if (type.equalsIgnoreCase("number of nights")) {
			if (Integer.parseInt(attrValue) < roomCharges.size()) {
				for (int i = 0; i <= Integer.parseInt(attrValue) - 1; i++) {
					noOfNightCharges = noOfNightCharges + Double.valueOf(roomCharges.values().toArray()[i].toString());
					paidAmount = noOfNightCharges;
				}
			} else if (Integer.parseInt(attrValue) > roomCharges.size()) {
				for (String str : roomCharges.values()) {
					totalRoomCharges = totalRoomCharges + Double.parseDouble(str);
				}
				paidAmount = totalRoomCharges;
			}
		} else if (type.equalsIgnoreCase("flat fee")) {
			paidAmount = Double.parseDouble(attrValue);
		} else if (type.equalsIgnoreCase("percent of stay")) {
			for (String str : roomCharges.values()) {
				totalRoomCharges = totalRoomCharges + Double.parseDouble(str);
			}
			paidAmount = (Double.parseDouble(attrValue) * totalRoomCharges) / 100;
		}
		amountToBePaid = df.format(paidAmount);
		return amountToBePaid;
	}

	public ArrayList<ArrayList<String>> intervalRateVerification(WebDriver driver, String dateFormat,
			String checkInDate, String checkOutDate, String adults, String child, String roomClass,
			String intervalLength,

			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, String folioName, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		reslogger.info("Full Interval:" + fullIntervals);
		reslogger.info("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}
		// IF Pro-Rate/Addtional Charges off
		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {
				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				reslogger.info("**********************************Third if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						for (int i = 1; i < child_adults; i++) {
							child_adults = child_adults - 1;
							if (child_adults == intMaxPerson) {
								count = i;
								isTrue = true;
								break;
							}
						}

					}

					if (isTrue) {
						childDifference = count;
					}
					reslogger.info("Additonal Adult:" + adultDifference);
					reslogger.info("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				System.out.println("**********************************4th if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						for (int i = 1; i < child_adults; i++) {
							child_adults = child_adults - 1;
							System.out.println("total: " + child_adults);
							System.out.println("max person: " + intMaxPerson);
							if (child_adults == intMaxPerson) {
								System.out.println("in total = max person");
								count = i;
								isTrue = true;
								break;
							}
						}

					}

					if (isTrue) {
						childDifference = count;
					}

					reslogger.info("Additonal Adult:" + adultDifference);
					reslogger.info("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							reslogger.info("adultDifference: " + adultDifference);
							reslogger.info("additionalAdultCharges: " + additionalAdultCharges);

							reslogger.info("childDifference: " + childDifference);
							reslogger.info("additionalChildCharges: " + additionalChildCharges);

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}
			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + rateApplied);

			testSteps.add("Expected rates: " + rateApplied);
			testSteps.add("Found: " + intial);
			if (getValue.equals(rateApplied)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			averagePerNight = String.format("%.1f",
					(Double.parseDouble(Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText())))
							/ numberofDays);

			assertEquals(
					String.format("%.1f",
							(Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
									averagePerNightElement.getText().split(" ")[3])))),
					averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;
			int rateListLength = driver
					.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]")).size();

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					testSteps);

			for (int i = 0; i < rateListLength; i++) {

				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();

				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");

				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info("Amount for date(" + dateInRequiredFormat + ") is " + getAmount);
				testSteps.add("Amount for date(" + dateInRequiredFormat + ") is " + getAmount);
				temp++;
				double total = 0.00;

				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		return ratesAlongWithDate;

	}

	public void verifyEnterFindGuestProfilewithFistName(WebDriver driver, String firstName, boolean expected,
			ArrayList<String> test_steps) throws Exception {
		boolean isResult = false;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.enterFindGuestProfile, driver);
		res.enterFindGuestProfile.clear();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterFindGuestProfile), driver);
		res.enterFindGuestProfile.sendKeys(firstName);
		test_steps.add("Verify find guest profile having result while searching with: " + firstName);
		try {
			if (res.resultGuestHistory.isDisplayed()) {
				isResult = true;

				String foundName = res.getAutosuggestName.getText().trim();
				try {
					assertEquals(foundName, firstName,
							"FAIL - No records shown due to the error" + "<br>"
									+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
									+ "Click here to open JIRA: NG-10480</a>");
					test_steps.add("Found and verified record with Name: " + firstName);
				} catch (Exception e) {
					test_steps.add("FAIL - No records shown due to the error" + "<br>"
							+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
							+ "Click here to open JIRA: NG-10480</a>" + e.toString());
				} catch (Error e) {
					test_steps.add("FAIL - No records shown due to the error" + "<br>"
							+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
							+ "Click here to open JIRA: NG-10480</a>" + e.toString());
				}
			}
		} catch (Exception e) {

		} catch (Error e) {

		}

		try {
			Assert.assertEquals(isResult, expected,
					"FAIL - No records shown due to the error" + "<br>"
							+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
							+ "Click here to open JIRA: NG-10480</a>");
		} catch (Exception e) {

			test_steps.add("FAIL - No records shown due to the error" + "<br>"
					+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
					+ "Click here to open JIRA: NG-10480</a>" + e.toString());
		} catch (Error e) {
			test_steps.add("FAIL - No records shown due to the error" + "<br>"
					+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
					+ "Click here to open JIRA: NG-10480</a>" + e.toString());
		}
	}

	public void verifyEnterFindGuestProfilewithLastName(WebDriver driver, String lastName, boolean expected,
			ArrayList<String> test_steps) throws Exception {
		boolean isResult = false;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.enterFindGuestProfile, driver);
		res.enterFindGuestProfile.clear();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterFindGuestProfile), driver);
		res.enterFindGuestProfile.sendKeys(lastName);
		test_steps.add("Verify find guest profile having result while searching with: " + lastName);
		try {
			if (res.resultGuestHistory.isDisplayed()) {
				isResult = true;

				String foundName = res.getAutosuggestName.getText().trim();
				try {
					Assert.assertEquals(foundName, lastName,
							"FAIL - No records shown due to the error" + "<br>"
									+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
									+ "Click here to open JIRA: NG-10480</a>");
				} catch (Exception e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
				test_steps.add("Found and verified record with Name: " + lastName);
			}
		} catch (Exception e) {
			test_steps.add("FAIL - No records shown due to the error" + "<br>"
					+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
					+ "Click here to open JIRA: NG-10480</a>" + e.toString());
		} catch (Error e) {
			test_steps.add("FAIL - No records shown due to the error" + "<br>"
					+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
					+ "Click here to open JIRA: NG-10480</a>" + e.toString());
		}

		try {

			Assert.assertEquals(isResult, expected,
					"FAIL - No records shown due to the error" + "<br>"
							+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
							+ "Click here to open JIRA: NG-10480</a>");
		} catch (Exception e) {
			test_steps.add("FAIL - No records shown due to the error" + "<br>"
					+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
					+ "Click here to open JIRA: NG-10480</a>" + e.toString());
		} catch (Error e) {
			test_steps.add("FAIL - No records shown due to the error" + "<br>"
					+ "<a href='https://innroad.atlassian.net/browse/NG-10480'>"
					+ "Click here to open JIRA: NG-10480</a>" + e.toString());
		}

	}

	public void clickAutoSuggestedGuest(WebDriver driver, String firstName) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.enterFindGuestProfile, driver);
		res.enterFindGuestProfile.clear();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EnterFindGuestProfile), driver);
		res.enterFindGuestProfile.sendKeys(firstName);

		try {
			if (res.resultGuestHistory.isEnabled()) {
				reslogger.info("Displayed autosuggest");
				Utility.scrollAndClick(driver, By.xpath(OR_Reservation.ResultGuestHistory));

				// res.resultGuestHistory.click();
				try {
					Wait.waitUntilPresenceOfElementLocated(OR_Reservation.GuestHistoryConfirmationPopup, driver);
					if (res.guestHistoryConfirmationPopup.isDisplayed()) {
						res.guestHistoryConfirmationPopup.click();
					}
				} catch (Exception e) {

				}
			}
		} catch (Exception e) {
			test_steps.add("No result found");
		}
	}

	public void verifyPaymentDetailAfterAssociateAccount(WebDriver driver, String paymentMethod, String cardNo,
			String nameOnCard, String expiry, ArrayList<String> test_steps) {
		// 'ArrayList<String> test_steps = new ArrayList<String>();
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.explicit_wait_visibilityof_webelement_120(res.getPaymentMethod, driver);
		String foundPayMethod = res.getPaymentMethod.getAttribute("title").toString();
		assertEquals(foundPayMethod, paymentMethod, "Failed To Verify Payment Method");
		reslogger.info("Successfully Verified Payment Method : " + foundPayMethod);
		test_steps.add("Successfully Verified Payment Method : " + foundPayMethod);

		Wait.explicit_wait_visibilityof_webelement_120(res.getCardNumber, driver);
		res.clickDecriptor.click();
		String foundCardNo = res.getCardNumber.getAttribute("value").toString();
		assertEquals(foundCardNo.substring(foundCardNo.length() - 4).trim(),
				cardNo.substring(cardNo.length() - 4).trim(), "Failed To Verify CardNo");
		reslogger.info("Successfully Verified CardNo : " + foundCardNo);
		test_steps.add("Successfully Verified CardNo : " + foundCardNo);

		Wait.explicit_wait_visibilityof_webelement_120(res.getNameOnCard, driver);
		String foundNameOnCard = res.getNameOnCard.getAttribute("value").toString();
		assertEquals(foundNameOnCard, nameOnCard, "Failed To Verify Name On Card");
		reslogger.info("Successfully Verified Name On Card : " + foundNameOnCard);
		test_steps.add("Successfully Verified Name On Card : " + foundNameOnCard);

		Wait.explicit_wait_visibilityof_webelement_120(res.getExpiryDate, driver);
		String foundExpiry = res.getExpiryDate.getAttribute("value").toString();
		assertEquals(foundExpiry, expiry, "Failed To Verify expiry");
		reslogger.info("Successfully Verified expiry : " + foundExpiry);
		test_steps.add("Successfully Verified expiry : " + foundExpiry);
	}

	public void verifyContactInfoAfterAssociateAccount(WebDriver driver, String guestfirstName, String guestLastName,
			String contactFirstName, String contactLastName, String email, String phone, String alternatePhone,
			ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.explicit_wait_visibilityof_webelement_120(res.getGuestFirstName, driver);
		String foundGuestFirstName = res.getGuestFirstName.getAttribute("value").toString();
		Assert.assertEquals(foundGuestFirstName, guestfirstName, "failed to verify");
		reslogger.info("Verify guest first Name: " + foundGuestFirstName);
		test_steps.add("Verify guest first Name: " + foundGuestFirstName);

		Wait.explicit_wait_visibilityof_webelement_120(res.getguestLastName, driver);
		String foundGuestLastName = res.getguestLastName.getAttribute("value").toString();
		Assert.assertEquals(foundGuestLastName, guestLastName, "failed to verify");
		reslogger.info("Verify guest last Name: " + foundGuestLastName);
		test_steps.add("Verify guest last Name: " + foundGuestLastName);

		Wait.explicit_wait_visibilityof_webelement_120(res.getContactFirstName, driver);
		String foundContactFirstName = res.getContactFirstName.getAttribute("value").toString();
		Assert.assertEquals(foundContactFirstName, contactFirstName, "failed to verify");
		reslogger.info("Verify contact first name: " + foundContactFirstName);
		test_steps.add("Verify contact first name: " + foundContactFirstName);

		Wait.explicit_wait_visibilityof_webelement_120(res.getContactLastName, driver);
		String foundContactLastName = res.getContactLastName.getAttribute("value").toString();
		Assert.assertEquals(foundContactLastName, contactLastName, "failed to verify");
		reslogger.info("Verify contact last name:  " + foundContactLastName);
		test_steps.add("Verify contact last name:  " + foundContactLastName);

		Wait.explicit_wait_visibilityof_webelement_120(res.getguestEmail, driver);
		String foundEmail = res.getguestEmail.getAttribute("value").toString();
		Assert.assertEquals(foundEmail, email, "failed to verify");
		reslogger.info("Verify guest email: " + foundEmail);
		test_steps.add("Verify guest email: " + foundEmail);

		Wait.explicit_wait_visibilityof_webelement_120(res.getPhone, driver);
		String foundPhone = res.getPhone.getAttribute("value").toString();
		Assert.assertEquals(Utility.removeExceptDigit(foundPhone), phone, "failed to verify");
		reslogger.info("Verify guest phone: " + foundPhone);
		test_steps.add("Verify guest phone: " + foundPhone);

		Wait.explicit_wait_visibilityof_webelement_120(res.getAlternamePhone, driver);
		String foundAlternamePhone = res.getAlternamePhone.getAttribute("value").toString();
		Assert.assertEquals(Utility.removeExceptDigit(foundAlternamePhone), alternatePhone, "failed to verify");
		reslogger.info("Verify guest alternate phone: " + foundAlternamePhone);
		test_steps.add("Verify guest alternate phone: " + foundAlternamePhone);

	}

	public void verifyNoteAddedFromAccount(WebDriver driver, String NoteType, String Subject, String Description,
			ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddNotes);
		test_steps.add("******************* Verify  Notes **********************");
		reslogger.info("******************* Verify Notes **********************");
		String noteverify = "(//td[text()='" + NoteType.trim() + "'])[1]";

		Wait.WaitForElement(driver, noteverify);
		String noteType = driver.findElement(By.xpath(noteverify)).getText().trim();
		Assert.assertEquals(noteType, NoteType, "Faled to verify");
		test_steps.add("Sucessfully verified NoteType : " + NoteType);
		reslogger.info("Sucessfully verified NoteType : " + NoteType);

		String noteSub = "(//td[text()='" + Subject.trim() + "'])[1]";
		Wait.WaitForElement(driver, noteverify);
		String sub = driver.findElement(By.xpath(noteSub)).getText().trim();
		Assert.assertEquals(sub, Subject, "Faled to verify");

		test_steps.add("Verified Note Subject : " + Subject);
		reslogger.info("Verified Note Subject : " + Subject);

		String noteDetails = "(//td[text()='" + Description.trim() + "'])[1]";
		Wait.WaitForElement(driver, noteverify);
		String details = driver.findElement(By.xpath(noteDetails)).getText();
		Assert.assertEquals(details, Description, "Faled to verify");
		test_steps.add("Verified Note Description : " + Description);
		reslogger.info("Verified Note Description : " + Description);
		test_steps.add("Success - Verify Note Fields validations" + "<br>"
				+ "<a href='https://innroad.atlassian.net/browse/NG-1167'>" + "Click here to open JIRA: NG-1167</a>");

	}

	public void verifyBillingFirstAndLastName(WebDriver driver, String salutation, String billingFirstName,
			String billingLastName, ArrayList<String> test_steps) {
		Elements_GuestHistory guest_his = new Elements_GuestHistory(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);

		String foundSalutation = new Select(res.getBillingSalutation).getFirstSelectedOption().getText();
		try {
			Assert.assertEquals(foundSalutation, salutation,
					"FAIL - verify billing salutation" + "<br>"
							+ "<a href='https://innroad.atlassian.net/browse/NG-9348 '>"
							+ "Click here to open JIRA: NG-9348 </a>");
			test_steps.add("Verify billing salutation: " + salutation);
		} catch (Exception e) {
			test_steps.add("FAIL - verify billing salutation" + "<br>"
					+ "<a href='https://innroad.atlassian.net/browse/NG-9348 '>"
					+ "Click here to open JIRA: NG-9348 </a>" + e.toString());
		} catch (Error e) {
			test_steps.add("FAIL - verify billing salutation" + "<br>"
					+ "<a href='https://innroad.atlassian.net/browse/NG-9348 '>"
					+ "Click here to open JIRA: NG-9348 </a>" + e.toString());
		}
		String firstName = res.biliingFirstName.getAttribute("value").toString();
		Assert.assertEquals(firstName, billingFirstName, "Failed to verify");
		test_steps.add("Verify billing first name: " + billingFirstName);

		String lastName = res.billingLastname.getAttribute("value").toString();
		Assert.assertEquals(lastName, billingLastName, "Failed to verify");
		test_steps.add("Verify billing last name: " + billingLastName);

	}

	public void clickSameAsMailingCheckbox(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		JavascriptExecutor jse = (JavascriptExecutor) driver;
		jse.executeScript("arguments[0].click();", res.sameAsmailing);
	}

	public String verifyStayInfoPromoCodeIsDisplayed(WebDriver driver, ArrayList<String> test_steps,
			boolean isDisplayed) {

		String path = "//div[@id='stayinfo']//span[contains(@data-bind,'text: promoCode')]";
		Wait.explicit_wait_xpath(path, driver);
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		String promoCode = driver.findElement(By.xpath(path)).getText();
		assertEquals(!promoCode.isEmpty(), isDisplayed, "Failed PromoCode Not Displayed");
		reslogger.info("Successfully Verified Promo Code is Displayed : " + promoCode);
		test_steps.add("Successfully Verified Promo Code is Displayed : " + promoCode);
		return promoCode;

	}

	public void clickCloseButtonOfCheckInSuccessfully(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkin_CloseButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.checkin_CloseButton), driver, 10);
		// res.CP_Reservation_NoShowSuccessCloseButton.click();
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", res.checkin_CloseButton);
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
	}

	public void verifyCancellationReservationOnHistoryTab(WebDriver driver, ArrayList<String> testSteps) {
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.cancellationReservation);
		assertTrue(elements.cancellationReservation.isDisplayed(), "Failed to verify checkin reservation on history");
		testSteps.add("Verified Cancelled this reservation displayed on history");
		reslogger.info("Verified Cancelled this reservation displayed on history");

	}

	public void verifyHistoryWithCancellationPayment(WebDriver driver, ArrayList<String> test_steps, String amount,
			String paymentType, String paymentMethod, String type) {
		String str = null;

		if (paymentMethod.equalsIgnoreCase("MC")) {
			if (type.equalsIgnoreCase("Refund")) {
				str = "Made a cancellation refund of $" + amount + " using " + paymentType + "";
			} else if (type.equalsIgnoreCase("Pay")) {
				str = "Made a cancellation payment of $" + amount + " using " + paymentType + "";
			}
		}
		String path = "//span[contains(text(),'" + str + "')]";
		WebElement element = driver.findElement(By.xpath(path));
		assertTrue(element.isDisplayed(), "Failed: To verify History Tab  Description");
		test_steps.add("'History Tab' Verified Description: <b>" + element.getText() + "</b>");
		reslogger.info("'History Tab' Verified Description : " + element.getText());
	}

	public void proceesToCancellationPayment(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait10Second();
		Wait.WaitForElement(driver, OR_Reservation.ProceedToPaymentButton);
		Utility.ScrollToElement(res.ProceedToPaymentButton, driver);
		res.ProceedToPaymentButton.click();
		test_steps.add("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
		reslogger.info("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);

	}

	public void clickPaybutton(WebDriver driver, ArrayList test_steps, String amount) throws InterruptedException {
		String path = "//a[text()='Pay $ " + amount + "' or text()='Log $ " + amount + "']";
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		element.click();
		test_steps.add("Clicking on " + element.getText());
		reslogger.info("Clicking on " + element.getText());
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
	}

	/*
	 * public void clickCloseButtonOfCancellationSuccessfully(WebDriver driver,
	 * ArrayList<String> test_steps) throws InterruptedException {
	 * Elements_CPReservation res = new Elements_CPReservation(driver);
	 * Wait.WaitForElement(driver, OR_Reservation.cancellation_CloseButton);
	 * Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.
	 * cancellation_CloseButton), driver, 10); JavascriptExecutor executor =
	 * (JavascriptExecutor) driver; executor.executeScript("arguments[0].click();",
	 * res.cancellation_CloseButton); test_steps.add("Click Close Button ");
	 * reslogger.info("Click Close Button "); String loading =
	 * "(//div[@class='ir-loader-in'])"; Wait.waitTillElementDisplayed(driver,
	 * loading); }
	 */

	public String createGroupReservation(WebDriver driver, ArrayList<String> test_steps, String roomClass,
			String isAssign, String account, String salutation, String guestFirstName, String guestLastName,
			String isGuesProfile, String paymentMethod, String cardNumber, String nameOnCard,
			String cardExpMonthAndYear, String isGroupPolicyApplicable, String reservationType,
			ArrayList<String> roomNumber, String reservationNo) throws Exception {
		if (reservationType.equalsIgnoreCase("Single")) {
			test_steps.add("============== Creating a new reservation ==============");

			// click_FindRooms(driver, test_steps);
			clickOnFindRooms(driver, test_steps);
			// selectRoom1(driver, test_steps, roomClass, isAssign, account);
			ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
					roomClass.split("\\|")[0]);
			// selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0],
			// rooms.get(0));
			selectRoomToReserve(driver, roomClass.split("\\|")[0], rooms.get(0), test_steps);
			clickYesOrNoOnPolicyChangePopup(driver, test_steps, isGroupPolicyApplicable);
			click_Next(driver, test_steps);
			clickYesOrNoOnPolicyChangePopup(driver, test_steps, isGroupPolicyApplicable);
			enter_MailingAddress_OnUnchecked_CreateGuestProfile(driver, test_steps, salutation, guestFirstName,
					guestLastName, isGuesProfile);
			if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
				enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
			}
		} else if (reservationType.equalsIgnoreCase("MRB")) {
			test_steps.add("============== Creating an MRB reservation ==============");
			clickOnAddARoomButton(driver, test_steps);
			reslogger.info("Clicking on add room");
			clickOnFindRooms(driver, test_steps);

			ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
					roomClass.split("\\|")[0]);
			selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
			clickYesOrNoOnPolicyChangePopup(driver, test_steps, isGroupPolicyApplicable);
			Wait.wait15Second();
			rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
			selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(0));
			click_Next(driver, test_steps);
			enter_MRB_MailingAddressForMRB(driver, test_steps, salutation, guestFirstName, guestLastName, isGuesProfile,
					roomNumber);
			if (!checkPaymentMethodIsAvailableInReservationPage(driver, paymentMethod)) {
				enter_PaymentDetails(driver, test_steps, paymentMethod, cardNumber, nameOnCard, cardExpMonthAndYear);
			}
		}

		clickBookNow(driver, test_steps);
		reservationNo = get_ReservationConfirmationNumber(driver, test_steps);
		clickCloseReservationSavePopup(driver, test_steps);
		return reservationNo;

	}

	public String calculationOfCancelletionAmountToBePaidForRateV2(ArrayList<String> roomCharges, String type,
			String attrValue, String roomClassSize, String paymentAmount) throws Exception {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountToBePaid = null;
		double paidAmount = 0.00;
		double noOfNightCharges = 0.00;
		double totalRoomCharges = 0.00;
		if (type.equalsIgnoreCase("number of nights")) {
			if (Integer.parseInt(attrValue) < roomCharges.size()) {
				for (int i = 0; i <= Integer.parseInt(attrValue) - 1; i++) {
					noOfNightCharges = noOfNightCharges + Double.valueOf(roomCharges.toArray()[i].toString());
					paidAmount = noOfNightCharges;
				}
			} else if (Integer.parseInt(attrValue) > roomCharges.size()) {
				for (String str : roomCharges) {
					totalRoomCharges = totalRoomCharges + Double.parseDouble(str);
				}
				paidAmount = totalRoomCharges;
			}

			if (Double.parseDouble(paymentAmount) < paidAmount) {
				paidAmount = paidAmount - Double.parseDouble(paymentAmount);
			} else if (Double.parseDouble(paymentAmount) > paidAmount) {
				paidAmount = Double.parseDouble(paymentAmount) - paidAmount;
			}
		} else if (type.equalsIgnoreCase("flat fee")) {
			paidAmount = Double.parseDouble(attrValue) * Double.valueOf(roomClassSize);
			if (Double.parseDouble(paymentAmount) < paidAmount) {
				paidAmount = paidAmount - Double.parseDouble(paymentAmount);
			} else if (Double.parseDouble(paymentAmount) > paidAmount) {
				paidAmount = Double.parseDouble(paymentAmount) - paidAmount;
			}
		} else if (type.equalsIgnoreCase("percent of stay")) {
			for (String str : roomCharges) {
				totalRoomCharges = totalRoomCharges + Double.parseDouble(str);
			}
			paidAmount = (Double.parseDouble(attrValue) * totalRoomCharges) / 100;
			if (Double.parseDouble(paymentAmount) < paidAmount) {
				paidAmount = paidAmount - Double.parseDouble(paymentAmount);
			} else if (Double.parseDouble(paymentAmount) > paidAmount) {
				paidAmount = Double.parseDouble(paymentAmount) - paidAmount;
			}
		}
		amountToBePaid = df.format(paidAmount);
		return amountToBePaid;

	}

	public void verifyTaxExempt(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CPTaxExempt, driver);
		boolean isExist = res.CPTaxExempt.isDisplayed();
		assertEquals(isExist, true, "Failed to verify tax Exempt");
		testSteps.add("Tax Exempt is Selected");
		reslogger.info("Tax Exempt is Selected");

	}

	public void clickAssignRoomNUmber(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_ClickAssignRoomNumber);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_ClickAssignRoomNumber), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_ClickAssignRoomNumber), driver);
		Utility.ScrollToElement(res.CP_ClickAssignRoomNumber.get(0), driver);
		res.CP_ClickAssignRoomNumber.get(0).click();
		testSteps.add("click Assign Room Number");
		reslogger.info("click  Assign Room Number ");
	}

	public String stayInfoAssignRoomNumberSingleReservation(WebDriver driver, ArrayList<String> testSteps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		clickEditReservation(driver);
		clickAssignRoomNUmber(driver, testSteps);
		Wait.waitforPageLoad(20, driver);
		// Click on room DropDown
		reslogger.info("Click on room dropdown");
		String part = "//div[contains(@class,'ir-flex-grow ir-flex-grow-3 ir-flex-mb-grow-3')]";
		By roomLocator = By.xpath(part);
		WebDriverWait wait = new WebDriverWait(driver, 25);
		WebElement elementRoom = wait.until(ExpectedConditions.elementToBeClickable(roomLocator));
		String roomNumber = elementRoom.getText();
		reslogger.info("Room Number :: " + roomNumber);

		elementRoom.click();
		test_steps.add("Click on room dropdown");

		// Select different room number
		String selectRoom = "//div[contains(@class,'ir-flex-grow ir-flex-grow-3 ir-flex-mb-grow-3')]//div//div//ul//li//a";
		int roomNum = driver.findElements(By.xpath(selectRoom)).size();
		String getRoomNumber = "";
		for (int i = 0; i < roomNum; i++) {
			getRoomNumber = res.CP_SelectResRoom.get(i).getText();
			if (!(getRoomNumber.equals(roomNumber)) && (!(getRoomNumber.equals("Unassigned")))) {
				res.CP_SelectResRoom.get(i).click();
				break;
			}
		}

		// Click Save Button
		reslogger.info("Clicking Save Button");
		Wait.explicit_wait_visibilityof_webelement(res.CP_SaveRoomNo, driver);
		Utility.ScrollToElement(res.CP_SaveRoomNo, driver);
		res.CP_SaveRoomNo.click();
		test_steps.add("Click on Save Room Number Button");

		return roomNumber + "-" + getRoomNumber;

	}

	public void verifyArivalDepartDate(WebDriver driver, String arivalDate, String departDate,
			ArrayList<String> test_step) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		JavascriptExecutor js = (JavascriptExecutor) driver;

		String ariveFound = (String) js.executeScript("return arguments[0].value",
				res.CP_NewReservation_CheckinTextBox);
		String departFound = (String) js.executeScript("return arguments[0].value",
				res.CP_NewReservation_CheckoutTextBox);
		reslogger.info("Arrival Date Found : " + ariveFound);
		reslogger.info("Departure Date Found : " + departFound);
		assertEquals(Utility.parseDate(ariveFound, "MM/dd/yyyy", "MMM dd, yyyy"),
				Utility.parseDate(arivalDate, "EE, MMMM dd, yyyy", "MMM dd, yyyy"));
		test_step.add("Successfully Verified Arival Date : " + ariveFound);
		reslogger.info("Successfully Verified Arival Date : " + ariveFound);
		assertEquals(Utility.parseDate(departFound, "MM/dd/yyyy", "MMM dd, yyyy"),
				Utility.parseDate(departDate, "EE, MMMM dd, yyyy", "MMM dd, yyyy"));
		test_step.add("Successfully Verified Depart Date : " + departFound);
		reslogger.info("Successfully Verified Depart Date : " + departFound);

	}

	public String verifyRatePerNight(WebDriver driver, String checkInDate, String checkoutDate,
			HashMap<String, String> rates) throws ParseException {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String rateIs = null;
		double amount = 0.00;
		ArrayList<String> dates = new ArrayList<String>();
		ArrayList<String> rate = new ArrayList<String>();
		dates = Utility.getAllDatesBetweenCheckInOutDates(checkInDate, checkoutDate);
		reslogger.info(dates);
		for (Map.Entry<String, String> entry : rates.entrySet()) {
			for (int i = 0; i < dates.size(); i++) {
				if (entry.getKey().equals(dates.get(i)))
					rate.add(entry.getValue());

			}
		}
		reslogger.info(rate);
		for (int i = 0; i < dates.size(); i++) {

			double value = Double.parseDouble(rate.get(i));
			reslogger.info(value);
			amount = amount + Double.parseDouble(rate.get(i));

		}
		rateIs = df.format(amount);
		reslogger.info(rateIs);
		return rateIs;

	}

	public void clickGuestInfo(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ClickEditGuestInFo), driver);
		// res.clickEditGuestInFo.click();
		JavascriptExecutor js = (JavascriptExecutor) driver;
		js.executeScript("arguments[0].click();", res.clickEditGuestInFo);
		test_steps.add("Click on Guest info Edit icon");
	}

	public void clickGuestProfileCheckbox(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_CreateGuestProfile);

		driver.findElement(By.xpath("//span[contains(text(),'Create Guest Profile')]/..")).click();
		test_steps.add("Create Guest Profile selected");
		reslogger.info("Create Guest Profile selected");

	}

	public void clickSaveGuestInfo(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.SaveGuestInfo), driver);
		res.saveGuestInfo.click();
	}

	public void clickUpdateGuestProfile(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.UpdateGuestProfile);
		res.updateGuestProfile.click();
		test_steps.add("Click Update Guest Profile checkbox");
	}

	public void clickRemoveGuestProfile(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.RemoveGuestProfile);
		try {
			res.removeGuestProfile.click();
		} catch (Exception e1) {
			Utility.clickThroughJavaScript(driver, res.removeGuestProfile);
		}
		test_steps.add("Click on Remove guest profile");

		Wait.WaitForElement(driver, OR_Reservation.ClickRemovePopupYes);
		try {
			res.clickRemovePopupYes.click();
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, res.clickRemovePopupYes);
		}

	}

	public void verifyUnneceessaryHistoryLog(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean log = true;
		try {
			if (!res.unneccesaryLog.isDisplayed()) {
				log = false;
			}
			assertEquals(log, false,
					"FAIL - Unneceessary log displayed" + "<br>"
							+ "<a href='https://innroad.atlassian.net/browse/NG-10726'>"
							+ "Click here to open JIRA: NG-10726</a>");
			test_steps.add("Verify that unnnecessary log not displayed in History log");
		} catch (Exception e) {

		} catch (Error e) {
			test_steps.add("FAIL - Unneceessary log displayed" + "<br>"
					+ "<a href='https://innroad.atlassian.net/browse/NG-10726'>"
					+ "Click here to open JIRA: NG-10726</a>" + e.toString());
		}
	}

	public void verifyPaymentRequiredBorder(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean log = true;
		try {
			if (!res.paymentRequiredBorder.isDisplayed()) {
				log = false;
			}
			try {
				assertEquals(log, false,
						"FAIL - Verify required red border showing" + "<br>"
								+ "<a href='https://innroad.atlassian.net/browse/NG-10561'>"
								+ "Click here to open JIRA: NG-10561</a>");
				test_steps.add("Verify that Red Border not showing for Payment method section");
			} catch (Exception e) {
				test_steps.add("FAIL - Verify required red border showing" + "<br>"
						+ "<a href='https://innroad.atlassian.net/browse/NG-10561'>"
						+ "Click here to open JIRA: NG-10561</a>" + e.toString());

			} catch (Error e) {
				test_steps.add("FAIL - Verify required red border showing" + "<br>"
						+ "<a href='https://innroad.atlassian.net/browse/NG-10561'>"
						+ "Click here to open JIRA: NG-10561</a>" + e.toString());
			}
		} catch (Exception e) {

		} catch (Error e) {

		}
	}

	public void verifyBillingInfo(WebDriver driver, String address1, String address2, String address3, String city,
			String state, String postalCode, String country, ArrayList<String> test_steps) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		String foundBillingAdd1 = res.billingAddress1.getAttribute("value").toString();
		Assert.assertEquals(foundBillingAdd1, address1, "Failed to verify");
		test_steps.add("Verify billing address1: " + address1);

		String foundBillingAdd2 = res.billingAddress2.getAttribute("value").toString();
		Assert.assertEquals(foundBillingAdd2, address2, "Failed to verify");
		test_steps.add("Verify billing address2: " + address2);

		String foundBillingAdd3 = res.billingAddress3.getAttribute("value").toString();
		Assert.assertEquals(foundBillingAdd3, address3, "Failed to verify");
		test_steps.add("Verify billing address3: " + address3);

		String foundBillingCity = res.billingCity.getAttribute("value").toString();
		Assert.assertEquals(foundBillingCity, city, "Failed to verify");
		test_steps.add("Verify billing city: " + city);

		String foundstate = res.getBillingState.getText();
		Assert.assertEquals(foundstate, state, "Failed to verify");
		test_steps.add("Verify billing state: " + foundstate);

		String foundCountry = res.getBillingCountry.getText();
		Assert.assertEquals(foundCountry, country, "Failed to verify");
		test_steps.add("Verify billing country: " + country);

		String foundBillingPostal = res.getBillingPostalCode.getAttribute("value").toString();
		Assert.assertEquals(foundBillingPostal, postalCode, "Failed to verify");
		test_steps.add("Verify billing postalCode: " + postalCode);

	}

	public boolean selectRoomClass(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean isRoomClassPresent = false;
		try {
			Wait.explicit_wait_elementToBeClickable(res.clickSelectFirstRoomClass, driver);

			Utility.ScrollToElement(res.clickSelectFirstRoomClass, driver);
			res.clickSelectFirstRoomClass.click();
			test_steps.add("Click at first room class select button");
			isRoomClassPresent = true;
			try {
				Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.OverBookingConfirmation), driver);
				res.overBookingConfirmation.click();
				Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ruleViolatingYesButton, driver);
				res.ruleViolatingYesButton.click();
				try {
					Wait.wait10Second();
					String xpath = "(//p[contains(text(),'Based on the changes made, new policies are applicable.')]/following::button)[2]";
					if (driver.findElements(By.xpath(xpath)).size() > 0) {
						driver.findElement(By.xpath(xpath)).click();
						reslogger.info(
								"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?");
					} else {
						reslogger.info("in else as policy not changing");
					}
				} catch (Exception e) {
					reslogger.info("in catch as policy not changing");
				}
			} catch (Exception e) {

				try {
					Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ruleViolatingYesButton, driver);
					res.ruleViolatingYesButton.click();
					try {
						Wait.wait10Second();
						String xpath = "(//p[contains(text(),'Based on the changes made, new policies are applicable.')]/following::button)[2]";
						if (driver.findElements(By.xpath(xpath)).size() > 0) {
							driver.findElement(By.xpath(xpath)).click();
							reslogger.info(
									"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?");
						} else {
							reslogger.info("in else as policy not changing");
						}
					} catch (Exception e1) {
						reslogger.info("in catch as policy not changing");
					}
				} catch (Exception e1) {
					test_steps.add("No overbooking/Rule present");
					try {
						Wait.wait10Second();
						String xpath = "(//p[contains(text(),'Based on the changes made, new policies are applicable.')]/following::button)[2]";
						if (driver.findElements(By.xpath(xpath)).size() > 0) {
							driver.findElement(By.xpath(xpath)).click();
							reslogger.info(
									"Based on the account chosen, new policies are applicable. Would you like to apply these policies to the reservation?");
						} else {
							reslogger.info("in else as policy not changing");
						}
					} catch (Exception e2) {
						reslogger.info("in catch as policy not changing");

					}
				}

			}
		} catch (Exception e) {

			test_steps.add("No room class Displayed in search result");
			isRoomClassPresent = false;
		}
		return isRoomClassPresent;
	}

	public void verifyAccountTabName(WebDriver driver, String guestName, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String geTabName = res.getHistoryAccoutResTabName.getText();
		String result = guestName.substring(0, 9) + "...";
		System.out.println(result);
		try {
			Assert.assertEquals(geTabName, result);
			test_steps.add("Verify the tab name After reservation saved: " + result);
		} catch (Exception e) {
			test_steps.add("FAIL - Open Guest History Account" + "<br>"
					+ "<a href='https://innroad.atlassian.net/browse/NG-900'>" + "Click here to open JIRA: NG-900</a>");
		} catch (Error e) {
			test_steps.add("FAIL - Open Guest History Account" + "<br>"
					+ "<a href='https://innroad.atlassian.net/browse/NG-900'>" + "Click here to open JIRA: NG-900</a>");
		}
	}

	public void clickRefundbutton(WebDriver driver, ArrayList test_steps, String amount) throws InterruptedException {
		String path = "//button[contains(text(),'Refund $ " + amount + "')]";
		Wait.WaitForElement(driver, path);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToElement(element, driver);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		element.click();
		test_steps.add("Clicking on " + element.getText());
		reslogger.info("Clicking on " + element.getText());
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);

	}

	public void enter_MRB_MailingAddressForMRB(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName, String IsGuesProfile, ArrayList al)
			throws InterruptedException {
		Add_PrimaryRoom(driver, test_steps, al);
		Add_AdditionalRoom(driver, test_steps, al);
		enter_GuestDetailsForMRB(driver, test_steps, Salutation, GuestFirstName, GuestLastName);
		uncheck_CreateGuestProfile(driver, test_steps, IsGuesProfile);

	}

	public void enter_GuestDetailsForMRB(WebDriver driver, ArrayList test_steps, String Salutation,
			String GuestFirstName, String GuestLastName) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		String[] salu = Salutation.split("\\|");
		String[] guestFName = GuestFirstName.split("\\|");
		String[] guestLName = GuestLastName.split("\\|");
		// String[] mail = Email.split("\\|");
		// String[] phone = PhoneNumber.split("\\|");

		int size = salu.length;

		for (int i = 1; i <= size; i++) {
			if (i == 1) {
				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
				res.CP_NewReservation_GuestSalutation.click();
				String sal = "//span[contains(text(),'" + salu[i - 1] + "')]/../..";
				Wait.WaitForElement(driver, sal);
				driver.findElement(By.xpath(sal)).click();

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
				res.CP_NewReservation_GuestFirstName.clear();

				Random random = new Random();
				int randomNumber = random.nextInt(900);
				reslogger.info("randomNumber : " + randomNumber);

				String FirstName = guestFName[i - 1] + randomNumber;
				Utility.guestFirstName = FirstName;
				res.CP_NewReservation_GuestFirstName.sendKeys(FirstName);
				test_steps.add("Guest First Name : " + FirstName);
				reslogger.info("Guest First Name : " + FirstName);

				Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);
				res.CP_NewReservation_GuestLastName.clear();

				String LastName = guestLName[i - 1] + randomNumber;
				Utility.guestLastName = LastName;
				res.CP_NewReservation_GuestLastName.sendKeys(LastName);
				test_steps.add("Guest Last Name : " + LastName);
				reslogger.info("Guest Last Name : " + LastName);

			} else {

				String additional = "(//span[text()='Additional Room'])";
				int count = driver.findElements(By.xpath(additional)).size();

				String saluta = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//span[text()='Select']/..";
				String slaut = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//span[text()='Select']/../following-sibling::div//li//span[text()='"
						+ salu[i - 1] + "']";
				Wait.WaitForElement(driver, saluta);
				driver.findElement(By.xpath(saluta)).click();
				reslogger.info(slaut);
				Wait.WaitForElement(driver, slaut);
				driver.findElement(By.xpath(slaut)).click();

				count = driver.findElements(By.xpath("//label[text()='Guest ']/../input")).size();
				String fname = "(//label[text()='Guest ']/../input)[" + i + "]";
				Wait.WaitForElement(driver, fname);
				driver.findElement(By.xpath(fname)).clear();
				driver.findElement(By.xpath(fname)).sendKeys(guestFName[i - 1]);
				test_steps.add("Guest First Name : " + guestFName[i - 1]);
				reslogger.info("Guest First Name : " + guestFName[i - 1]);

				count = driver.findElements(By.xpath(
						"(//span[text()='Additional Room'])/../../../../../..//label[text()='Last Name']/../input"))
						.size();
				String lname = "(//span[text()='Additional Room'])[" + (i - 1)
						+ "]/../../../../../..//label[text()='Last Name']/../input";
				Wait.WaitForElement(driver, lname);
				driver.findElement(By.xpath(lname)).clear();
				driver.findElement(By.xpath(lname)).sendKeys(guestLName[i - 1]);
				test_steps.add("Guest Last Name : " + guestLName[i - 1]);
				reslogger.info("Guest Last Name : " + guestLName[i - 1]);

			}
		}

	}

	public void makeReservationNoShowWithPayment(WebDriver driver, ArrayList<String> test_steps, String policyType,
			String payments, String noShowAmount) throws Exception {

		makeReservationNoShow(driver, test_steps);
		if (verifyPaymentsIsGreaterThanNoShowAmount(payments, noShowAmount)) {
			clickConfirmCancelButton(driver, test_steps);
			clickOnRefundButtonOnNoShowPopup(driver, test_steps);
		} else {
			clickProceedToNoShowPaymentButton(driver, test_steps);
			clickLogORPayAuthorizedButton(driver, test_steps);
			checkInPaymentSuccessPopupClose(driver, test_steps);
		}
		test_steps.add("===================== Verifying Reservation status after No Show =====================");
		verifyReservationStatusStatus(driver, test_steps, policyType);

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsBasedOnPackageBaseOnNewAndOldDatesPerRoomPerNight(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			ArrayList<String> ratesList, String totalRoomCharges, ArrayList<String> oldDates,
			ArrayList<String> OldRates, ArrayList<String> newDates, HashMap<String, String> productValue,
			ArrayList<String> oldPackageAmounts, String oldPackageAmount, ArrayList<String> testSteps)
			throws Exception {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * numberofDays;

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		roomClassExpandElement.click();
		Wait.wait2Second();
		List<WebElement> getRateList = driver
				.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]"));

		reslogger.info("rateList1 size: " + getRateList.size());
		boolean isZero = true;

		for (int i = 1; i < getRateList.size(); i++) {

			String getRatePerInterval = getRateList.get(i).getText();
			String[] splitStr = getRatePerInterval.split("\\$");
			getRatePerInterval = splitStr[1].trim();
			if (getRatePerInterval.equals("0.00")) {
				isZero = false;
				break;
			}

		}

		reslogger.info("isZero: " + isZero);

		if (!isZero) {
			String bugId = "<a href='https://innroad.atlassian.net/browse/RATES-3850' target='_blank'>"
					+ "Failed: Rate is showing incorrect when updating stay details with change only for added dates for interval rateplan.<br>Click here for more info: RATES-3850</a>";
			testSteps.add("Failed: Click here for more info<br>");
		}

		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {
				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);

			reslogger.info("old charges: " + totalRoomCharges);
			reslogger.info("new charges: " + intial);
			reslogger.info("old Package Amount : " + oldPackageAmount);
			reslogger.info("new Package Amount : " + totalAmountForPackage);
			double totalPackageAmount = Double.parseDouble(oldPackageAmount) + totalAmountForPackage;
			double old_new_charges = Double.parseDouble(totalRoomCharges) + intial;

			testSteps.add("Expected rates: " + old_new_charges);
			testSteps.add("Found: " + getValue);

			if (getValue.equals(String.format("%.2f", old_new_charges))) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					numberofDays, testSteps);

			reslogger.info("getRates: " + getRates);
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			if (!isProRateApplied && halfIntervals > 0) {
				fullIntervals = fullIntervals + 1;
			}
			reslogger.info("reservationElement.StartDate: " + reservationElement.StartDate.size());
			reslogger.info("new dates size: " + newDates.size());
			int totalSize = newDates.size() + OldRates.size();
			reslogger.info("totalSize: " + totalSize);
			if (totalSize != reservationElement.StartDate.size()) {
				testSteps.add("Failed: Interval date is not showing correctly");
			}
			for (int j = 0; j < oldDates.size(); j++) {
				rateList.add(OldRates.get(j));
				dates.add(oldDates.get(j));
			}

			for (int j = 0; j < oldPackageAmounts.size(); j++) {
				productRates.add(oldPackageAmounts.get(j));
			}

			productRates.add(String.valueOf(totalAmountForPackage));

			testSteps.add("Expected Package Amount : " + totalPackageAmount);

			String expectedPackageAmount = String.format("%.2f", totalPackageAmount);
			String foundPackageAmount = "";
			if (reservationElement.RatePerInterval.size() > 2) {
				foundPackageAmount = Utility.RemoveDollarandSpaces(driver,
						reservationElement.RatePerInterval.get(1).getText());
			} else {
				foundPackageAmount = Utility.RemoveDollarandSpaces(driver,
						reservationElement.RatePerInterval.get(0).getText());
			}
			testSteps.add("Found Package Amount : " + foundPackageAmount);
			if (expectedPackageAmount.equals(foundPackageAmount)) {
				testSteps.add("Verified package amount is matching.");

			} else {
				testSteps.add("Failed : package amount is mismatching.");

			}

			for (int i = oldDates.size(); i < totalSize; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				testSteps.add("Expected date: " + dateInRequiredFormat);
				testSteps.add("Found: " + startDate);

				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					testSteps.add("Interval date are showing as per requirment");

				} else {
					testSteps.add("Failed: Interval date is mismatching in add and remove dates");
				}
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				// testSteps.add(dateInRequiredFormat + " " + folioName + " " + getAmount);
				temp++;
				double total = 0.00;
				if (i == 0) {
					// incrementCounter = 1;
				}

				if (isRoomChargesEqual.equalsIgnoreCase("yes") || isRoomChargesEqual.equalsIgnoreCase("no")) {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							total = getRates.get(0);
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = getRates.get(0);

						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public void clickCloseButtonOfSuccessCheckInModelPopup(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait5Second();
		Wait.WaitForElement(driver, OR_Reservation.CheckInClosePopupButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CheckInClosePopupButton), driver, 10);
		// res.CP_Reservation_NoShowSuccessCloseButton.click();
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", res.CheckInClosePopupButton);
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
		verifySpinerLoading(driver);
	}

	/*
	 * public ArrayList<ArrayList<String>>
	 * intervalRateVerificationInChangeStayDetailsWithPackageForPerRoomPerStay(
	 * WebDriver driver, String dateFormat, String checkInDate, String checkOutDate,
	 * String adults, String child, String roomClass, String intervalLength, String
	 * baseAmount, String adultCapacity, String personCapacity, boolean
	 * isAdditionalChargesApplied, String maxAdult, String maxPerson, String
	 * additionalAdultCharges, String additionalChildCharges, boolean
	 * isProRateApplied, String proRatePerNight, String
	 * proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String
	 * folioName, HashMap<String, String> productValue, ArrayList<String> testSteps)
	 * throws InterruptedException, NumberFormatException, ParseException {
	 * 
	 * Elements_CPReservation reservationElement = new
	 * Elements_CPReservation(driver); ArrayList<String> rateList = new
	 * ArrayList<>(); ArrayList<String> dates = new ArrayList<>(); String
	 * isRoomChargesEqual = "no"; double pro_rate =
	 * Double.parseDouble(proRatePerNight); double base_amount =
	 * Double.parseDouble(baseAmount);
	 * 
	 * if (pro_rate > base_amount) pro_rate = base_amount;
	 * 
	 * // Number of Days int numberofDays = Integer
	 * .parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate,
	 * dateFormat, "dd/MM/yyyy"), Utility.parseDate(checkOutDate, dateFormat,
	 * "dd/MM/yyyy")));
	 * 
	 * double totalAmountForPackage =
	 * Double.parseDouble(productValue.get("amount"));
	 * 
	 * String convertTotalPackageAmountIntoStr = String.format("%.2f",
	 * totalAmountForPackage); reslogger.info("convertTotalPackageAmountIntoStr: " +
	 * convertTotalPackageAmountIntoStr);
	 * 
	 * String rateApplied = ""; int fullIntervals = 0; int halfIntervals = 0;
	 * reslogger.info("numberofDays: " + numberofDays); if (numberofDays >=
	 * (Integer.parseInt(intervalLength))) { fullIntervals = numberofDays /
	 * Integer.parseInt(intervalLength); halfIntervals = numberofDays %
	 * Integer.parseInt(intervalLength); } System.out.println("Full Interval:" +
	 * fullIntervals); System.out.println("Half Interval:" + halfIntervals);
	 * 
	 * testSteps.add("Interval lenght: " + intervalLength);
	 * testSteps.add("Number of nights: " + numberofDays);
	 * testSteps.add("Full interval: " + fullIntervals);
	 * testSteps.add("Half interval: " + halfIntervals);
	 * 
	 * int interval = Integer.parseInt(intervalLength); testSteps.add("");
	 * 
	 * String totalRateValue =
	 * "//div[contains(@class,'room-search-result-container')]//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]"
	 * ;
	 * 
	 * String avgPerNight =
	 * "//div[contains(@class,'room-search-result-container')]//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]"
	 * ; String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]"
	 * ;
	 * 
	 * String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
	 * String roomClassExpand =
	 * "//div[contains(@class='room-search-result-container']//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
	 * 
	 * WebElement totalRateValueElement = null; WebElement roomClassExpandElement =
	 * null; WebElement averagePerNightElement = null;
	 * 
	 * Wait.WaitForElement(driver, avgPerNight);
	 * Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
	 * Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
	 * averagePerNightElement = driver.findElement(By.xpath(avgPerNight));
	 * 
	 * try { totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
	 * roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand)); }
	 * catch (Exception e) { totalRateValueElement =
	 * driver.findElement(By.xpath(totalRateValueMRB)); roomClassExpandElement =
	 * driver.findElement(By.xpath(roomClassMRBExpand));
	 * 
	 * }
	 * 
	 * String averagePerNight = ""; reslogger.info("baseAmount: " + baseAmount);
	 * double intial = 0;
	 * 
	 * if ((Integer.parseInt(adults) + Integer.parseInt(child)) <=
	 * Integer.parseInt(personCapacity)) { if (!isProRateApplied &&
	 * !isAdditionalChargesApplied) {
	 * 
	 * System.out.println("**********************************First if:");
	 * 
	 * if (fullIntervals == 0) {
	 * 
	 * intial = base_amount;
	 * 
	 * }
	 * 
	 * else if (fullIntervals > 0 && halfIntervals == 0) {
	 * 
	 * intial = base_amount * fullIntervals;
	 * 
	 * } else {
	 * 
	 * int total = fullIntervals + 1; intial = base_amount * total;
	 * 
	 * } reslogger.info("Calculated Rate:" + intial);
	 * 
	 * } if (isProRateApplied && !isAdditionalChargesApplied) {
	 * 
	 * System.out.println("**********************************Second if:");
	 * reslogger.info("======Pro stay only =======");
	 * 
	 * if (fullIntervals == 0) {
	 * 
	 * intial = base_amount;
	 * 
	 * } else if (fullIntervals > 0 && halfIntervals == 0) {
	 * 
	 * intial = base_amount * fullIntervals; }
	 * 
	 * else {
	 * 
	 * double total_fullAmount = base_amount * fullIntervals;
	 * reslogger.info("total_fullAmount: " + total_fullAmount);
	 * 
	 * double total_halfAmount = (Double.parseDouble(proRatePerNight) *
	 * halfIntervals); reslogger.info("total_halfAmount: " + total_halfAmount);
	 * intial = total_fullAmount + total_halfAmount;
	 * 
	 * }
	 * 
	 * reslogger.info("Calculated Rate:" + intial);
	 * 
	 * }
	 * 
	 * System.out.println("Number of Days:" + numberofDays);
	 * System.out.println("intervalLength:" + intervalLength);
	 * System.out.println("fullIntervals:" + fullIntervals);
	 * System.out.println("half:" + halfIntervals); int adultDifference = 0; int
	 * childDifference = 0; int personDifference = 0;
	 * 
	 * reslogger.info("child: " + child); reslogger.info("adults: " + adults); int
	 * child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
	 * reslogger.info("child_adults" + child_adults);
	 * 
	 * // if Additional Charges Applied ANd ProRate False if
	 * (isAdditionalChargesApplied && !isProRateApplied) { if
	 * (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) { if
	 * (Integer.parseInt(adults) > Integer.parseInt(maxAdult)) adultDifference =
	 * Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
	 * 
	 * child_adults = child_adults - adultDifference; int count = 0; boolean isTrue
	 * = false; int intMaxPerson = Integer.parseInt(maxPerson); if (child_adults >
	 * intMaxPerson) { System.out.println("child is also diff"); childDifference =
	 * Math.abs(child_adults - intMaxPerson);
	 * 
	 * for (int i = 1; i < child_adults; i++) { System.out.println("i: " + i);
	 * child_adults = child_adults - 1; System.out.println("total: " +
	 * child_adults); System.out.println("max person: " + intMaxPerson); if
	 * (child_adults == intMaxPerson) { System.out.println("in total = max person");
	 * count = i; isTrue = true; break; } }
	 * 
	 * 
	 * }
	 * 
	 * 
	 * if (isTrue) { childDifference = count; }
	 * 
	 * System.out.println("Additional Adult:" + adultDifference);
	 * System.out.println("Additional Child:" + childDifference);
	 * 
	 * if (fullIntervals == 0) {
	 * 
	 * reslogger.info("adult: " + adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))); reslogger.info("child: " +
	 * childDifference * (Double.parseDouble(additionalChildCharges)));
	 * reslogger.info("base_amount: " + base_amount);
	 * reslogger.info("fullIntervals: 0");
	 * 
	 * intial = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * }
	 * 
	 * else if (fullIntervals > 0 && halfIntervals == 0) {
	 * 
	 * double one = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * reslogger.info("one: " + one); intial = one * fullIntervals;
	 * 
	 * } else {
	 * 
	 * int total = fullIntervals + 1; double one = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * reslogger.info("one: " + one); intial = one * total; }
	 * reslogger.info("expected rate: " + intial);
	 * 
	 * }
	 * 
	 * } // if Additional Charges Applied And ProRate True if
	 * (isAdditionalChargesApplied && isProRateApplied) { if
	 * (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity) || numberofDays
	 * < (Integer.parseInt(intervalLength))) {
	 * 
	 * if (Integer.parseInt(adults) > Integer.parseInt(maxAdult)) adultDifference =
	 * Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
	 * 
	 * child_adults = child_adults - adultDifference; // 5 int count = 0; boolean
	 * isTrue = false; System.out.println("child_adults: " + child_adults); int
	 * intMaxPerson = Integer.parseInt(maxPerson); if (child_adults > intMaxPerson)
	 * { System.out.println("child is also diff"); childDifference =
	 * Math.abs(child_adults - intMaxPerson);
	 * 
	 * for (int i = 1; i < child_adults; i++) { System.out.println("i: " + i);
	 * child_adults = child_adults - 1; System.out.println("total: " +
	 * child_adults); System.out.println("max person: " + intMaxPerson); if
	 * (child_adults == intMaxPerson) { System.out.println("in total = max person");
	 * count = i; isTrue = true; break; } }
	 * 
	 * 
	 * }
	 * 
	 * 
	 * if (isTrue) { childDifference = count; }
	 * 
	 * 
	 * System.out.println("Additonal Adult:" + adultDifference);
	 * System.out.println("Additonal Child:" + childDifference);
	 * 
	 * testSteps.add("Additonal Adult:" + adultDifference);
	 * testSteps.add("Additonal Child:" + childDifference);
	 * 
	 * if (adultDifference > 0 || childDifference > 0) {
	 * 
	 * if (fullIntervals > 0 && halfIntervals > 0) { //
	 * reslogger.info("apply half and ful both"); double fullamount = base_amount +
	 * (adultDifference * (Double.parseDouble(additionalAdultCharges))) +
	 * (childDifference * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * fullamount = fullIntervals * fullamount;
	 * 
	 * double half_amount = Double.parseDouble(proRatePerNight) + (adultDifference *
	 * Double.parseDouble(proRateAdditionalAdultCharges)) + (childDifference *
	 * (Double.parseDouble(proRateAdditionalChildCharges)));
	 * 
	 * half_amount = half_amount * halfIntervals; reslogger.info("fullamount: " +
	 * fullamount); reslogger.info("half_amount: " + half_amount);
	 * 
	 * intial = fullamount + half_amount; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * if (fullIntervals > 0 && halfIntervals == 0) {
	 * reslogger.info("apply full both");
	 * 
	 * intial = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * intial = intial * fullIntervals; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * if (fullIntervals == 0) {
	 * 
	 * intial = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * reslogger.info(intial);
	 * 
	 * } } else { if (fullIntervals == 0) { intial = base_amount;
	 * 
	 * } if (fullIntervals > 0 && halfIntervals > 0) {
	 * 
	 * double full = fullIntervals * base_amount; reslogger.info(full);
	 * 
	 * double half = halfIntervals * Double.parseDouble(proRatePerNight);
	 * reslogger.info(half); intial = full + half; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * if (fullIntervals > 0 && halfIntervals == 0) { intial = fullIntervals *
	 * base_amount; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * }
	 * 
	 * }
	 * 
	 * }
	 * 
	 * Folio folio = new Folio(); String getValue =
	 * folio.splitStringBySign(totalRateValueElement.getText(), "$").trim(); intial
	 * = intial + totalAmountForPackage; rateApplied = String.format("%.2f",
	 * intial).trim(); reslogger.info("convert: " + getValue);
	 * reslogger.info("rateApplied: " + rateApplied);
	 * 
	 * testSteps.add("Expected rates: " + rateApplied); testSteps.add("Found: " +
	 * intial); if (getValue.equals(rateApplied)) { isRoomChargesEqual = "yes";
	 * testSteps.add("Verified interval rate value is matching");
	 * 
	 * } else { isRoomChargesEqual = "no";
	 * testSteps.add("Verified interval rate value is not matching");
	 * 
	 * }
	 * 
	 * intial = intial - totalAmountForPackage; // averagePerNight =
	 * String.format("%.1f", //
	 * (Double.parseDouble(Utility.RemoveDollarandSpaces(driver, //
	 * totalRateValueElement.getText()))) // / numberofDays); // // assertEquals( //
	 * String.format("%.1f", //
	 * (Double.parseDouble(Utility.RemoveDollarandSpaces(driver, //
	 * averagePerNightElement.getText().split(" ")[3])))), // averagePerNight,
	 * "Failed: rate didn't match");
	 * 
	 * testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" +
	 * averagePerNight); reslogger.info("Verified total Amount:" + baseAmount +
	 * " Avg Per Night:" + averagePerNight); roomClassExpandElement.click(); String
	 * requiredDateFormat = "MMM dd yyyy";
	 * 
	 * // getting amounts for each date Double amountInDouble = 0.0; int
	 * fullIntervalCount = 0; String timeZone = "US/Eastern"; int temp = 0; int
	 * incrementCounter = 0; // int rateListLength = driver //
	 * .findElements(By.xpath("//td[contains(@data-bind, // 'showInnroadCurrency: {
	 * value:')]")).size();
	 * 
	 * ArrayList<Double> getRates = new ArrayList<Double>(); //
	 * getRates.add(totalAmountForPackage); ArrayList<Double> getratesForInterval =
	 * intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate,
	 * adults, child, roomClassExpand, intervalLength, baseAmount, adultCapacity,
	 * personCapacity, isAdditionalChargesApplied, maxAdult, maxPerson,
	 * additionalAdultCharges, additionalChildCharges, isProRateApplied,
	 * proRatePerNight, proRateAdditionalAdultCharges,
	 * proRateAdditionalChildCharges, testSteps); for (int i = 0; i <
	 * getratesForInterval.size(); i++) { getRates.add(getratesForInterval.get(i));
	 * } reslogger.info("Size of list: " + reservationElement.StartDate.size()); int
	 * size = reservationElement.StartDate.size();
	 * testSteps.add("Expected package rate for per room and per night: " +
	 * convertTotalPackageAmountIntoStr); String getAmount =
	 * reservationElement.RatePerInterval.get(0).getText(); amountInDouble =
	 * Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount)); String
	 * convertPackageAmount = String.format("%.2f", amountInDouble);
	 * testSteps.add("Found: " + amountInDouble); if
	 * (convertPackageAmount.equals(convertTotalPackageAmountIntoStr)) {
	 * testSteps.add("Verified package amount"); } else {
	 * testSteps.add("Failed: Package amount is mismatching!");
	 * 
	 * } boolean isOneTime = true; for (int i = 1; i < size; i++) {
	 * 
	 * reslogger.info("i: " + i); String getDate =
	 * ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter,
	 * timeZone); dates.add(getDate);
	 * 
	 * String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat,
	 * requiredDateFormat); reslogger.info(dateInRequiredFormat);
	 * Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName),
	 * driver); Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i),
	 * driver); String startDate = reservationElement.StartDate.get(i).getText();
	 * String rateName = reservationElement.RateDisplayName.get(i).getText();
	 * assertEquals(startDate, dateInRequiredFormat,
	 * "Failed: interval date is mismatching!"); assertEquals(rateName, folioName,
	 * "Failed: rate name is mismatching!"); getAmount =
	 * reservationElement.RatePerInterval.get(i).getText(); amountInDouble =
	 * Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));
	 * 
	 * reslogger.info(dateInRequiredFormat + "            " + folioName +
	 * "               " + getAmount); testSteps.add(dateInRequiredFormat +
	 * "             " + folioName + "               " + getAmount); temp++; double
	 * total = 0.00;
	 * 
	 * if (isRoomChargesEqual.equalsIgnoreCase("yes")) { if (temp > fullIntervals) {
	 * 
	 * incrementCounter = interval * fullIntervals + 1;
	 * reslogger.info(getRates.get(0)); reslogger.info(getRates.get(1));
	 * 
	 * if (isProRateApplied) { if (halfIntervals == 0) { total = getRates.get(0); }
	 * else { total = getRates.get(1); } } else { total = getRates.get(0); }
	 * reslogger.info("total: " + total); assertEquals(amountInDouble, total,
	 * "Failed: interval amount is mismatching!");
	 * 
	 * }
	 * 
	 * else {
	 * 
	 * incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
	 * reslogger.info(getRates.get(0)); reslogger.info(getRates.get(1)); total =
	 * getRates.get(0); reslogger.info("total: " + total);
	 * assertEquals(amountInDouble, total,
	 * "Failed: interval amount is mismatching!");
	 * 
	 * } } else { if (temp > fullIntervals) {
	 * 
	 * incrementCounter = interval * fullIntervals + 1;
	 * reslogger.info(getRates.get(0)); reslogger.info(getRates.get(1));
	 * 
	 * if (isProRateApplied) { if (halfIntervals == 0) { total = getRates.get(0); }
	 * else { total = getRates.get(1); } } else { total = getRates.get(0); }
	 * reslogger.info("total: " + total); }
	 * 
	 * else {
	 * 
	 * incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
	 * reslogger.info(getRates.get(0)); reslogger.info(getRates.get(1)); total =
	 * getRates.get(0); reslogger.info("total: " + total);
	 * 
	 * }
	 * 
	 * }
	 * 
	 * // rateList.add(rateApplied);
	 * 
	 * String amount = String.format("%.2f", total); rateList.add("" + total);
	 * 
	 * }
	 * 
	 * }
	 * 
	 * ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
	 * ArrayList<String> productRates = new ArrayList<String>();
	 * productRates.add(convertTotalPackageAmountIntoStr);
	 * ratesAlongWithDate.add(rateList); ratesAlongWithDate.add(dates);
	 * ArrayList<String> roomCharges = new ArrayList<>();
	 * 
	 * roomCharges.add(isRoomChargesEqual); ratesAlongWithDate.add(roomCharges);
	 * ratesAlongWithDate.add(productRates); return ratesAlongWithDate;
	 * 
	 * }
	 */

	/*
	 * public void cancellationReservation(WebDriver driver, ArrayList<String>
	 * test_steps, boolean voidcheckedReuired) throws InterruptedException {
	 * cancelReservation(driver, test_steps); if (!voidcheckedReuired) {
	 * unCheckedVoidRoomChargeCheckBox(driver, test_steps);
	 * 
	 * } enterCancellationReasons(driver, test_steps, "test"); try {
	 * proceesToCancellationPayment(driver, test_steps);
	 * clickRefundsORPaybutton(driver, test_steps);
	 * clickCloseButtonOfCancellationSuccessfully(driver, test_steps); } catch
	 * (Exception e) { clickConfirmCancelButton(driver, test_steps); }
	 * 
	 * }
	 */

	/*
	 * public void clickPaybutton(WebDriver driver, ArrayList test_steps, String
	 * amount) throws InterruptedException { String path =
	 * "//button[contains(text(),'Pay $ " + amount + "')]";
	 * Wait.WaitForElement(driver, path); WebElement element =
	 * driver.findElement(By.xpath(path)); Utility.ScrollToElement(element, driver);
	 * Wait.waitForElementToBeClickable(By.xpath(path), driver); element.click();
	 * test_steps.add("Clicking on " + element.getText());
	 * reslogger.info("Clicking on " + element.getText()); String loading =
	 * "(//div[@class='ir-loader-in'])"; Wait.waitTillElementDisplayed(driver,
	 * loading); }
	 */

	public void clickCloseButtonOfCancellationSuccessfully(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.cancellation_CloseButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.cancellation_CloseButton), driver, 10);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", res.cancellation_CloseButton);
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsWithPackageForPerAdultPerNight(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";
		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * numberofDays
				* (Integer.parseInt(adults));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";
		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		String averagePerNight = "";
		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
						/*
						 * for (int i = 1; i < child_adults; i++) { System.out.println("i: " + i);
						 * child_adults = child_adults - 1; System.out.println("total: " +
						 * child_adults); System.out.println("max person: " + intMaxPerson); if
						 * (child_adults == intMaxPerson) { System.out.println("in total = max person");
						 * count = i; isTrue = true; break; } }
						 */

					}

					/*
					 * if (isTrue) { childDifference = count; }
					 */
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
						/*
						 * for (int i = 1; i < child_adults; i++) { System.out.println("i: " + i);
						 * child_adults = child_adults - 1; System.out.println("total: " +
						 * child_adults); System.out.println("max person: " + intMaxPerson); if
						 * (child_adults == intMaxPerson) { System.out.println("in total = max person");
						 * count = i; isTrue = true; break; } }
						 */

					}

					/*
					 * if (isTrue) { childDifference = count; }
					 */

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			Folio folio = new Folio();
			String getValue = folio.splitStringBySign(totalRateValueElement.getText(), "$").trim();
			intial = intial + totalAmountForPackage;
			rateApplied = String.format("%.2f", intial).trim();
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + rateApplied);

			testSteps.add("Expected rates: " + rateApplied);
			testSteps.add("Found: " + intial);
			if (getValue.equals(rateApplied)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			intial = intial - totalAmountForPackage;
			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;
			// int rateListLength = driver
			// .findElements(By.xpath("//td[contains(@data-bind,
			// 'showInnroadCurrency: { value:')]")).size();

			ArrayList<Double> getRates = new ArrayList<Double>();
			// getRates.add(totalAmountForPackage);
			ArrayList<Double> getratesForInterval = intervalRateCalculation(driver, dateFormat, checkInDate,
					checkOutDate, adults, child, roomClassExpand, intervalLength, baseAmount, adultCapacity,
					personCapacity, isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges,
					additionalChildCharges, isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges,
					proRateAdditionalChildCharges, testSteps);
			for (int i = 0; i < getratesForInterval.size(); i++) {
				getRates.add(getratesForInterval.get(i));
			}
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			int size = reservationElement.StartDate.size();
			testSteps.add("Expected package rate for per room and per night: " + convertTotalPackageAmountIntoStr);
			String getAmount = reservationElement.RatePerInterval.get(0).getText();
			amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));
			String convertPackageAmount = String.format("%.2f", amountInDouble);
			testSteps.add("Found: " + amountInDouble);
			if (convertPackageAmount.equals(convertTotalPackageAmountIntoStr)) {
				testSteps.add("Verified package amount");
			} else {
				testSteps.add("Failed: Package amount is mismatching!");

			}
			boolean isOneTime = true;
			for (int i = 1; i < size; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
				getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "            " + folioName + "               " + getAmount);
				testSteps.add(dateInRequiredFormat + "             " + folioName + "               " + getAmount);
				temp++;
				double total = 0.00;

				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);

				String amount = String.format("%.2f", total);
				rateList.add("" + total);

			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	/*
	 * public void clickCloseButtonOfSuccessCheckInModelPopup(WebDriver driver,
	 * ArrayList<String> test_steps) throws InterruptedException {
	 * Elements_CPReservation res = new Elements_CPReservation(driver);
	 * Wait.wait5Second(); Wait.WaitForElement(driver,
	 * OR_Reservation.CheckInClosePopupButton);
	 * Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.
	 * CheckInClosePopupButton), driver, 10); //
	 * res.CP_Reservation_NoShowSuccessCloseButton.click(); JavascriptExecutor
	 * executor = (JavascriptExecutor) driver;
	 * executor.executeScript("arguments[0].click();", res.CheckInClosePopupButton);
	 * test_steps.add("Click Close Button "); reslogger.info("Click Close Button ");
	 * String loading = "(//div[@class='ir-loader-in'])";
	 * Wait.waitTillElementDisplayed(driver, loading); verifySpinerLoading(driver);
	 * }
	 */

	public void clickRefundsORPaybutton(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		try {
			// String path = "//button[contains(text(),'Refund $')]";
			String path = "//a[contains(text(),'Refund $')]";
			Wait.waitForElementToBeVisibile(By.xpath(path), driver);

			WebElement element = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(element, driver);
			Wait.waitForElementToBeClickable(By.xpath(path), driver);
			element.click();
			test_steps.add("Clicking on " + element.getText());
			reslogger.info("Clicking on " + element.getText());
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
		} catch (Exception e) {
			reslogger.info("Refund button not present..Checking Pay button");
			String path = "(//a[contains(text(),'Log') or contains(text(),'Pay')])[4]";

			// String path = "//a[contains(text(),'Pay $ ')]";

			Wait.WaitForElement(driver, path);
			WebElement element = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(element, driver);
			Wait.waitForElementToBeClickable(By.xpath(path), driver);
			element.click();
			test_steps.add("Clicking on " + element.getText());
			reslogger.info("Clicking on " + element.getText());
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
		}
	}

	public void proceesOrConfirmToCancellationPayment(WebDriver driver, ArrayList test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait10Second();
		Wait.WaitForElement(driver, OR_Reservation.ProceedToPaymentButton);
		Utility.ScrollToElement(res.ProceedToPaymentButton, driver);
		res.ProceedToPaymentButton.click();
		test_steps.add("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
		reslogger.info("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);

	}

	/*
	 * ======= >>>>>>> AUTOMATION-2246 if (fullIntervals > 0 && halfIntervals > 0) {
	 * // reslogger.info("apply half and ful both"); double fullamount = base_amount
	 * + (adultDifference * (Double.parseDouble(additionalAdultCharges))) +
	 * (childDifference * (Double.parseDouble(additionalChildCharges))); <<<<<<<
	 * HEAD ======= >>>>>>> develop >>>>>>> AUTOMATION-2246
	 * 
	 * fullamount = fullIntervals * fullamount;
	 * 
	 * double half_amount = Double.parseDouble(proRatePerNight) + (adultDifference *
	 * Double.parseDouble(proRateAdditionalAdultCharges)) + (childDifference *
	 * (Double.parseDouble(proRateAdditionalChildCharges)));
	 * 
	 * half_amount = half_amount * halfIntervals; reslogger.info("fullamount: " +
	 * fullamount); reslogger.info("half_amount: " + half_amount);
	 * 
	 * intial = fullamount + half_amount; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * if (fullIntervals > 0 && halfIntervals == 0) {
	 * reslogger.info("apply full both");
	 * 
	 * intial = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * intial = intial * fullIntervals; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * if (fullIntervals == 0) {
	 * 
	 * intial = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * reslogger.info(intial);
	 * 
	 * } } else { if (fullIntervals == 0) { intial = base_amount;
	 * 
	 * } if (fullIntervals > 0 && halfIntervals > 0) {
	 * 
	 * double full = fullIntervals * base_amount; reslogger.info(full);
	 * 
	 * double half = halfIntervals * Double.parseDouble(proRatePerNight);
	 * reslogger.info(half); intial = full + half; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * if (fullIntervals > 0 && halfIntervals == 0) { intial = fullIntervals *
	 * base_amount; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * }
	 * 
	 * }
	 * 
	 * }
	 * 
	 * Folio folio = new Folio(); String getValue =
	 * folio.splitStringBySign(totalRateValueElement.getText(), "$").trim(); intial
	 * = intial + totalAmountForPackage; rateApplied = String.format("%.2f",
	 * intial).trim(); reslogger.info("convert: " + getValue);
	 * reslogger.info("rateApplied: " + rateApplied);
	 * 
	 * testSteps.add("Expected rates: " + rateApplied); testSteps.add("Found: " +
	 * intial); if (getValue.equals(rateApplied)) { isRoomChargesEqual = "yes";
	 * testSteps.add("Verified interval rate value is matching");
	 * 
	 * } else { isRoomChargesEqual = "no";
	 * testSteps.add("Verified interval rate value is not matching");
	 * 
	 * }
	 * 
	 * intial = intial - totalAmountForPackage; // averagePerNight =
	 * String.format("%.1f", //
	 * (Double.parseDouble(Utility.RemoveDollarandSpaces(driver, //
	 * totalRateValueElement.getText()))) // / numberofDays); // // assertEquals( //
	 * String.format("%.1f", //
	 * (Double.parseDouble(Utility.RemoveDollarandSpaces(driver, //
	 * averagePerNightElement.getText().split(" ")[3])))), // averagePerNight,
	 * "Failed: rate didn't match");
	 * 
	 * testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" +
	 * averagePerNight); reslogger.info("Verified total Amount:" + baseAmount +
	 * " Avg Per Night:" + averagePerNight); roomClassExpandElement.click(); String
	 * requiredDateFormat = "MMM dd yyyy";
	 * 
	 * // getting amounts for each date Double amountInDouble = 0.0; int
	 * fullIntervalCount = 0; String timeZone = "US/Eastern"; int temp = 0; int
	 * incrementCounter = 0; // int rateListLength = driver //
	 * .findElements(By.xpath("//td[contains(@data-bind, // 'showInnroadCurrency: {
	 * value:')]")).size();
	 * 
	 * ArrayList<Double> getRates = new ArrayList<Double>(); //
	 * getRates.add(totalAmountForPackage); ArrayList<Double> getratesForInterval =
	 * intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate,
	 * adults, child, roomClassExpand, intervalLength, baseAmount, adultCapacity,
	 * personCapacity, isAdditionalChargesApplied, maxAdult, maxPerson,
	 * additionalAdultCharges, additionalChildCharges, isProRateApplied,
	 * proRatePerNight, proRateAdditionalAdultCharges,
	 * proRateAdditionalChildCharges, testSteps); for (int i = 0; i <
	 * getratesForInterval.size(); i++) { getRates.add(getratesForInterval.get(i));
	 * } reslogger.info("Size of list: " + reservationElement.StartDate.size()); int
	 * size = reservationElement.StartDate.size();
	 * testSteps.add("Expected package rate for per room and per night: " +
	 * convertTotalPackageAmountIntoStr); String getAmount =
	 * reservationElement.RatePerInterval.get(0).getText(); amountInDouble =
	 * Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount)); String
	 * convertPackageAmount = String.format("%.2f", amountInDouble);
	 * testSteps.add("Found: " + amountInDouble); if
	 * (convertPackageAmount.equals(convertTotalPackageAmountIntoStr)) {
	 * testSteps.add("Verified package amount"); } else {
	 * testSteps.add("Failed: Package amount is mismatching!");
	 * 
	 * } boolean isOneTime = true; for (int i = 1; i < size; i++) {
	 * 
	 * reslogger.info("i: " + i); String getDate =
	 * ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter,
	 * timeZone); dates.add(getDate);
	 * 
	 * String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat,
	 * requiredDateFormat); reslogger.info(dateInRequiredFormat);
	 * Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName),
	 * driver); Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i),
	 * driver); String startDate = reservationElement.StartDate.get(i).getText();
	 * String rateName = reservationElement.RateDisplayName.get(i).getText();
	 * assertEquals(startDate, dateInRequiredFormat,
	 * "Failed: interval date is mismatching!"); assertEquals(rateName, folioName,
	 * "Failed: rate name is mismatching!"); getAmount =
	 * reservationElement.RatePerInterval.get(i).getText(); amountInDouble =
	 * Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));
	 * 
	 * reslogger.info(dateInRequiredFormat + "            " + folioName +
	 * "               " + getAmount); testSteps.add(dateInRequiredFormat +
	 * "             " + folioName + "               " + getAmount); temp++; double
	 * total = 0.00;
	 * 
	 * if (isRoomChargesEqual.equalsIgnoreCase("yes")) { if (temp > fullIntervals) {
	 * 
	 * incrementCounter = interval * fullIntervals + 1;
	 * reslogger.info(getRates.get(0)); reslogger.info(getRates.get(1));
	 * 
	 * if (isProRateApplied) { if (halfIntervals == 0) { total = getRates.get(0); }
	 * else { total = getRates.get(1); } } else { total = getRates.get(0); }
	 * reslogger.info("total: " + total); assertEquals(amountInDouble, total,
	 * "Failed: interval amount is mismatching!");
	 * 
	 * }
	 * 
	 * else {
	 * 
	 * incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
	 * reslogger.info(getRates.get(0)); reslogger.info(getRates.get(1)); total =
	 * getRates.get(0); reslogger.info("total: " + total);
	 * assertEquals(amountInDouble, total,
	 * "Failed: interval amount is mismatching!");
	 * 
	 * } } else { if (temp > fullIntervals) {
	 * 
	 * incrementCounter = interval * fullIntervals + 1;
	 * reslogger.info(getRates.get(0)); reslogger.info(getRates.get(1));
	 * 
	 * if (isProRateApplied) { if (halfIntervals == 0) { total = getRates.get(0); }
	 * else { total = getRates.get(1); } } else { total = getRates.get(0); }
	 * reslogger.info("total: " + total); }
	 * 
	 * else {
	 * 
	 * incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
	 * reslogger.info(getRates.get(0)); reslogger.info(getRates.get(1)); total =
	 * getRates.get(0); reslogger.info("total: " + total);
	 * 
	 * }
	 * 
	 * }
	 * 
	 * // rateList.add(rateApplied);
	 * 
	 * String amount = String.format("%.2f", total); rateList.add("" + total);
	 * 
	 * }
	 * 
	 * }
	 * 
	 * ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
	 * ArrayList<String> productRates = new ArrayList<String>();
	 * productRates.add(convertTotalPackageAmountIntoStr);
	 * ratesAlongWithDate.add(rateList); ratesAlongWithDate.add(dates);
	 * ArrayList<String> roomCharges = new ArrayList<>();
	 * 
	 * roomCharges.add(isRoomChargesEqual); ratesAlongWithDate.add(roomCharges);
	 * ratesAlongWithDate.add(productRates); return ratesAlongWithDate;
	 * 
	 * } <<<<<<< HEAD
	 * 
	 * public ArrayList<ArrayList<String>>
	 * intervalRateVerificationInChangeStayDetailsWithPackageForPerAdultPerStay(
	 * =======
	 */
	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsWithPackageForPerRoomPerNight(

			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";
		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(adults));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";
		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		String averagePerNight = "";
		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
						/*
						 * for (int i = 1; i < child_adults; i++) { System.out.println("i: " + i);
						 * child_adults = child_adults - 1; System.out.println("total: " +
						 * child_adults); System.out.println("max person: " + intMaxPerson); if
						 * (child_adults == intMaxPerson) { System.out.println("in total = max person");
						 * count = i; isTrue = true; break; } }
						 */

					}

					/*
					 * if (isTrue) { childDifference = count; }
					 */
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
						/*
						 * for (int i = 1; i < child_adults; i++) { System.out.println("i: " + i);
						 * child_adults = child_adults - 1; System.out.println("total: " +
						 * child_adults); System.out.println("max person: " + intMaxPerson); if
						 * (child_adults == intMaxPerson) { System.out.println("in total = max person");
						 * count = i; isTrue = true; break; } }
						 */

					}

					/*
					 * if (isTrue) { childDifference = count; }
					 */

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			Folio folio = new Folio();
			String getValue = folio.splitStringBySign(totalRateValueElement.getText(), "$").trim();
			intial = intial + totalAmountForPackage;
			rateApplied = String.format("%.2f", intial).trim();
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + rateApplied);

			testSteps.add("Expected rates: " + rateApplied);
			testSteps.add("Found: " + intial);
			if (getValue.equals(rateApplied)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			intial = intial - totalAmountForPackage;
			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;
			// int rateListLength = driver
			// .findElements(By.xpath("//td[contains(@data-bind,
			// 'showInnroadCurrency: { value:')]")).size();

			ArrayList<Double> getRates = new ArrayList<Double>();
			// getRates.add(totalAmountForPackage);
			ArrayList<Double> getratesForInterval = intervalRateCalculation(driver, dateFormat, checkInDate,
					checkOutDate, adults, child, roomClassExpand, intervalLength, baseAmount, adultCapacity,
					personCapacity, isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges,
					additionalChildCharges, isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges,
					proRateAdditionalChildCharges, testSteps);
			for (int i = 0; i < getratesForInterval.size(); i++) {
				getRates.add(getratesForInterval.get(i));
			}
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			int size = reservationElement.StartDate.size();
			testSteps.add("Expected package rate for per room and per night: " + convertTotalPackageAmountIntoStr);
			String getAmount = reservationElement.RatePerInterval.get(0).getText();
			amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));
			String convertPackageAmount = String.format("%.2f", amountInDouble);
			testSteps.add("Found: " + amountInDouble);
			if (convertPackageAmount.equals(convertTotalPackageAmountIntoStr)) {
				testSteps.add("Verified package amount");
			} else {
				testSteps.add("Failed: Package amount is mismatching!");

			}
			boolean isOneTime = true;
			for (int i = 1; i < size; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
				getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "            " + folioName + "               " + getAmount);
				testSteps.add(dateInRequiredFormat + "             " + folioName + "               " + getAmount);
				temp++;
				double total = 0.00;

				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);

				String amount = String.format("%.2f", total);
				rateList.add("" + total);

			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsWithPackageForPerChildPerStay(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";
		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(child));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";
		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		String averagePerNight = "";
		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
						/*
						 * for (int i = 1; i < child_adults; i++) { System.out.println("i: " + i);
						 * child_adults = child_adults - 1; System.out.println("total: " +
						 * child_adults); System.out.println("max person: " + intMaxPerson); if
						 * (child_adults == intMaxPerson) { System.out.println("in total = max person");
						 * count = i; isTrue = true; break; } }
						 */

					}

					/*
					 * if (isTrue) { childDifference = count; }
					 */
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
						/*
						 * for (int i = 1; i < child_adults; i++) { System.out.println("i: " + i);
						 * child_adults = child_adults - 1; System.out.println("total: " +
						 * child_adults); System.out.println("max person: " + intMaxPerson); if
						 * (child_adults == intMaxPerson) { System.out.println("in total = max person");
						 * count = i; isTrue = true; break; } }
						 */

					}

					/*
					 * if (isTrue) { childDifference = count; }
					 */

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			Folio folio = new Folio();
			String getValue = folio.splitStringBySign(totalRateValueElement.getText(), "$").trim();
			intial = intial + totalAmountForPackage;
			rateApplied = String.format("%.2f", intial).trim();
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + rateApplied);

			testSteps.add("Expected rates: " + rateApplied);
			testSteps.add("Found: " + intial);
			if (getValue.equals(rateApplied)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			intial = intial - totalAmountForPackage;
			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;
			// int rateListLength = driver
			// .findElements(By.xpath("//td[contains(@data-bind,
			// 'showInnroadCurrency: { value:')]")).size();

			ArrayList<Double> getRates = new ArrayList<Double>();
			// getRates.add(totalAmountForPackage);
			ArrayList<Double> getratesForInterval = intervalRateCalculation(driver, dateFormat, checkInDate,
					checkOutDate, adults, child, roomClassExpand, intervalLength, baseAmount, adultCapacity,
					personCapacity, isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges,
					additionalChildCharges, isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges,
					proRateAdditionalChildCharges, testSteps);
			for (int i = 0; i < getratesForInterval.size(); i++) {
				getRates.add(getratesForInterval.get(i));
			}
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			int size = reservationElement.StartDate.size();
			testSteps.add("Expected package rate for per room and per night: " + convertTotalPackageAmountIntoStr);
			String getAmount = reservationElement.RatePerInterval.get(0).getText();
			amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));
			String convertPackageAmount = String.format("%.2f", amountInDouble);
			testSteps.add("Found: " + amountInDouble);
			if (convertPackageAmount.equals(convertTotalPackageAmountIntoStr)) {
				testSteps.add("Verified package amount");
			} else {
				testSteps.add("Failed: Package amount is mismatching!");

			}
			boolean isOneTime = true;
			for (int i = 1; i < size; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
				getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "            " + folioName + "               " + getAmount);
				testSteps.add(dateInRequiredFormat + "             " + folioName + "               " + getAmount);
				temp++;
				double total = 0.00;

				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);

				String amount = String.format("%.2f", total);
				rateList.add("" + total);

			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsWithPackageForPerChildPerNight(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";
		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * numberofDays
				* (Integer.parseInt(child));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";
		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		String averagePerNight = "";
		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
						/*
						 * for (int i = 1; i < child_adults; i++) { System.out.println("i: " + i);
						 * child_adults = child_adults - 1; System.out.println("total: " +
						 * child_adults); System.out.println("max person: " + intMaxPerson); if
						 * (child_adults == intMaxPerson) { System.out.println("in total = max person");
						 * count = i; isTrue = true; break; } }
						 */

					}

					/*
					 * if (isTrue) { childDifference = count; }
					 */
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
						/*
						 * for (int i = 1; i < child_adults; i++) { System.out.println("i: " + i);
						 * child_adults = child_adults - 1; System.out.println("total: " +
						 * child_adults); System.out.println("max person: " + intMaxPerson); if
						 * (child_adults == intMaxPerson) { System.out.println("in total = max person");
						 * count = i; isTrue = true; break; } }
						 */

					}

					/*
					 * if (isTrue) { childDifference = count; }
					 */

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			Folio folio = new Folio();
			String getValue = folio.splitStringBySign(totalRateValueElement.getText(), "$").trim();
			intial = intial + totalAmountForPackage;
			rateApplied = String.format("%.2f", intial).trim();
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + rateApplied);

			testSteps.add("Expected rates: " + rateApplied);
			testSteps.add("Found: " + intial);
			if (getValue.equals(rateApplied)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			intial = intial - totalAmountForPackage;
			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;
			// int rateListLength = driver
			// .findElements(By.xpath("//td[contains(@data-bind,
			// 'showInnroadCurrency: { value:')]")).size();

			ArrayList<Double> getRates = new ArrayList<Double>();
			// getRates.add(totalAmountForPackage);
			Wait.wait2Second();
			ArrayList<Double> getratesForInterval = intervalRateCalculation(driver, dateFormat, checkInDate,
					checkOutDate, adults, child, roomClassExpand, intervalLength, baseAmount, adultCapacity,
					personCapacity, isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges,
					additionalChildCharges, isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges,
					proRateAdditionalChildCharges, testSteps);
			for (int i = 0; i < getratesForInterval.size(); i++) {
				getRates.add(getratesForInterval.get(i));
			}
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			int size = reservationElement.StartDate.size();
			testSteps.add("Expected package rate for per room and per night: " + convertTotalPackageAmountIntoStr);
			String getAmount = reservationElement.RatePerInterval.get(0).getText();
			amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));
			String convertPackageAmount = String.format("%.2f", amountInDouble);
			testSteps.add("Found: " + amountInDouble);
			if (convertPackageAmount.equals(convertTotalPackageAmountIntoStr)) {
				testSteps.add("Verified package amount");
			} else {
				testSteps.add("Failed: Package amount is mismatching!");

			}
			boolean isOneTime = true;
			for (int i = 1; i < size; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
				getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "            " + folioName + "               " + getAmount);
				testSteps.add(dateInRequiredFormat + "             " + folioName + "               " + getAmount);
				temp++;
				double total = 0.00;

				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);

				String amount = String.format("%.2f", total);
				rateList.add("" + total);

			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsWithPackageForPerPersonPerNight(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";
		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));
		double totalAmountForPackage = 0.00;
		totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * numberofDays
				* (Integer.parseInt(child) + Integer.parseInt(adults));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";
		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		String averagePerNight = "";
		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
						/*
						 * for (int i = 1; i < child_adults; i++) { System.out.println("i: " + i);
						 * child_adults = child_adults - 1; System.out.println("total: " +
						 * child_adults); System.out.println("max person: " + intMaxPerson); if
						 * (child_adults == intMaxPerson) { System.out.println("in total = max person");
						 * count = i; isTrue = true; break; } }
						 */

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			Folio folio = new Folio();
			String getValue = folio.splitStringBySign(totalRateValueElement.getText(), "$").trim();
			intial = intial + totalAmountForPackage;
			rateApplied = String.format("%.2f", intial).trim();
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + rateApplied);

			testSteps.add("Expected rates: " + rateApplied);
			testSteps.add("Found: " + intial);
			if (getValue.equals(rateApplied)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			intial = intial - totalAmountForPackage;
			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;
			// int rateListLength = driver
			// .findElements(By.xpath("//td[contains(@data-bind,
			// 'showInnroadCurrency: { value:')]")).size();

			ArrayList<Double> getRates = new ArrayList<Double>();
			// getRates.add(totalAmountForPackage);
			Wait.wait2Second();
			ArrayList<Double> getratesForInterval = intervalRateCalculation(driver, dateFormat, checkInDate,
					checkOutDate, adults, child, roomClassExpand, intervalLength, baseAmount, adultCapacity,
					personCapacity, isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges,
					additionalChildCharges, isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges,
					proRateAdditionalChildCharges, testSteps);
			for (int i = 0; i < getratesForInterval.size(); i++) {
				getRates.add(getratesForInterval.get(i));
			}
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			int size = reservationElement.StartDate.size();
			testSteps.add("Expected package rate for per room and per night: " + convertTotalPackageAmountIntoStr);
			String getAmount = reservationElement.RatePerInterval.get(0).getText();
			amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));
			String convertPackageAmount = String.format("%.2f", amountInDouble);
			testSteps.add("Found: " + amountInDouble);
			if (convertPackageAmount.equals(convertTotalPackageAmountIntoStr)) {
				testSteps.add("Verified package amount");
			} else {
				testSteps.add("Failed: Package amount is mismatching!");

			}
			boolean isOneTime = true;
			boolean sizeGreaterThenTwo = size > 2 ? true : false;
			for (int i = sizeGreaterThenTwo ? 0 : 1; i < size; i++) {
				if (sizeGreaterThenTwo && i == 1) {
					i = i + 1;
				}

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
				getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "            " + folioName + "               " + getAmount);
				testSteps.add(dateInRequiredFormat + "             " + folioName + "               " + getAmount);
				temp++;
				double total = 0.00;

				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);

				String amount = String.format("%.2f", total);
				rateList.add("" + total);

			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsWithPackageForPerPersonPerStay(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";
		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));
		double totalAmountForPackage = 0.00;
		totalAmountForPackage = Double.parseDouble(productValue.get("amount"))
				* (Integer.parseInt(child) + Integer.parseInt(adults));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";
		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		String averagePerNight = "";
		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			Folio folio = new Folio();
			String getValue = folio.splitStringBySign(totalRateValueElement.getText(), "$").trim();
			intial = intial + totalAmountForPackage;
			rateApplied = String.format("%.2f", intial).trim();
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + rateApplied);

			testSteps.add("Expected rates: " + rateApplied);
			testSteps.add("Found: " + intial);
			if (getValue.equals(rateApplied)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			intial = intial - totalAmountForPackage;
			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;
			// int rateListLength = driver
			// .findElements(By.xpath("//td[contains(@data-bind,
			// 'showInnroadCurrency: { value:')]")).size();

			ArrayList<Double> getRates = new ArrayList<Double>();
			// getRates.add(totalAmountForPackage);
			Wait.wait2Second();
			ArrayList<Double> getratesForInterval = intervalRateCalculation(driver, dateFormat, checkInDate,
					checkOutDate, adults, child, roomClassExpand, intervalLength, baseAmount, adultCapacity,
					personCapacity, isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges,
					additionalChildCharges, isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges,
					proRateAdditionalChildCharges, testSteps);
			for (int i = 0; i < getratesForInterval.size(); i++) {
				getRates.add(getratesForInterval.get(i));
			}
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			int size = reservationElement.StartDate.size();
			testSteps.add("Expected package rate for per room and per night: " + convertTotalPackageAmountIntoStr);
			String getAmount = reservationElement.RatePerInterval.get(0).getText();
			amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));
			String convertPackageAmount = String.format("%.2f", amountInDouble);
			testSteps.add("Found: " + amountInDouble);
			if (convertPackageAmount.equals(convertTotalPackageAmountIntoStr)) {
				testSteps.add("Verified package amount");
			} else {
				testSteps.add("Failed: Package amount is mismatching!");

			}
			boolean isOneTime = true;
			for (int i = 1; i < size; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
				getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "            " + folioName + "               " + getAmount);
				testSteps.add(dateInRequiredFormat + "             " + folioName + "               " + getAmount);
				temp++;
				double total = 0.00;

				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);

				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsWithPackageForPerRoomPerInterval(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";
		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		String rateApplied = "";
		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}
		double totalAmountForPackage = 0.00;
		String convertTotalPackageAmountIntoStr = "";
		String averagePerNight = "";
		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * fullIntervals;
			double halfIntervalPackageAmount = 0.00;
			if (halfIntervals > 0) {
				halfIntervalPackageAmount = Double.parseDouble(productValue.get("amount")) * halfIntervals;
			}
			totalAmountForPackage = totalAmountForPackage + halfIntervalPackageAmount;
			convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
			reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

			Folio folio = new Folio();
			String getValue = folio.splitStringBySign(totalRateValueElement.getText(), "$").trim();
			intial = intial + totalAmountForPackage;
			rateApplied = String.format("%.2f", intial).trim();
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + rateApplied);

			testSteps.add("Expected rates: " + rateApplied);
			testSteps.add("Found: " + intial);
			if (getValue.equals(rateApplied)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			intial = intial - totalAmountForPackage;
			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;
			// int rateListLength = driver
			// .findElements(By.xpath("//td[contains(@data-bind,
			// 'showInnroadCurrency: { value:')]")).size();

			ArrayList<Double> getRates = new ArrayList<Double>();
			// getRates.add(totalAmountForPackage);
			Wait.wait2Second();
			ArrayList<Double> getratesForInterval = intervalRateCalculation(driver, dateFormat, checkInDate,
					checkOutDate, adults, child, roomClassExpand, intervalLength, baseAmount, adultCapacity,
					personCapacity, isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges,
					additionalChildCharges, isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges,
					proRateAdditionalChildCharges, testSteps);
			for (int i = 0; i < getratesForInterval.size(); i++) {
				getRates.add(getratesForInterval.get(i));
			}
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			int size = reservationElement.StartDate.size();
			testSteps.add("Expected package rate for per room and per night: " + convertTotalPackageAmountIntoStr);
			String getAmount = reservationElement.RatePerInterval.get(0).getText();
			amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));
			String convertPackageAmount = String.format("%.2f", amountInDouble);
			testSteps.add("Found: " + amountInDouble);

			boolean isOneTime = true;
			String productAmount = String.format("%.2f", Double.parseDouble(productValue.get("amount")));
			for (int i = 0; i < size; i += 2) {
				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();

				getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "            " + folioName + "               " + productAmount);
				testSteps.add("Expected: " + dateInRequiredFormat + "             " + folioName + "               "
						+ productAmount);
				testSteps.add("Found: " + dateInRequiredFormat + "             " + folioName + "               "
						+ amountInDouble);

				assertEquals(String.format("%.2f", amountInDouble), productAmount,
						"Failed: Product amount is mismatching!");
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
				temp++;
				double total = 0.00;

				if (temp > fullIntervals) {
					incrementCounter = interval * fullIntervals + 1;
				}

				else {
					incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
				}
			}

			temp = 0;
			incrementCounter = 0;
			for (int i = 1; i < size; i += 2) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
				getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "            " + folioName + "               " + getAmount);
				testSteps.add(dateInRequiredFormat + "             " + folioName + "               " + getAmount);
				temp++;
				double total = 0.00;

				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);

				String amount = String.format("%.2f", total);
				rateList.add("" + total);

			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsWithPackageForChildPerInterval(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";
		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		String rateApplied = "";
		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}
		double totalAmountForPackage = 0.00;
		String convertTotalPackageAmountIntoStr = "";
		String averagePerNight = "";
		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(child));
			double halfIntervalPackageAmount = 0.00;
			if (halfIntervals > 0) {
				halfIntervalPackageAmount = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(child));
			}
			totalAmountForPackage = totalAmountForPackage + halfIntervalPackageAmount;
			convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
			reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

			Folio folio = new Folio();
			String getValue = folio.splitStringBySign(totalRateValueElement.getText(), "$").trim();
			intial = intial + totalAmountForPackage;
			rateApplied = String.format("%.2f", intial).trim();
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + rateApplied);

			testSteps.add("Expected rates: " + rateApplied);
			testSteps.add("Found: " + intial);
			if (getValue.equals(rateApplied)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			intial = intial - totalAmountForPackage;
			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;
			// int rateListLength = driver
			// .findElements(By.xpath("//td[contains(@data-bind,
			// 'showInnroadCurrency: { value:')]")).size();

			ArrayList<Double> getRates = new ArrayList<Double>();
			// getRates.add(totalAmountForPackage);
			Wait.wait2Second();
			ArrayList<Double> getratesForInterval = intervalRateCalculation(driver, dateFormat, checkInDate,
					checkOutDate, adults, child, roomClassExpand, intervalLength, baseAmount, adultCapacity,
					personCapacity, isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges,
					additionalChildCharges, isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges,
					proRateAdditionalChildCharges, testSteps);
			for (int i = 0; i < getratesForInterval.size(); i++) {
				getRates.add(getratesForInterval.get(i));
			}
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			int size = reservationElement.StartDate.size();
			testSteps.add("Expected package rate for per room and per night: " + convertTotalPackageAmountIntoStr);
			String productAmount = String.format("%.2f",
					Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(child)));
			for (int i = 0; i < size; i += 2) {
				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();

				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "            " + folioName + "               " + productAmount);
				testSteps.add("Expected: " + dateInRequiredFormat + "             " + folioName + "               "
						+ productAmount);
				testSteps.add("Found: " + dateInRequiredFormat + "             " + folioName + "               "
						+ amountInDouble);

				assertEquals(String.format("%.2f", amountInDouble), productAmount,
						"Failed: Product amount is mismatching!");
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
				temp++;
				double total = 0.00;

				if (temp > fullIntervals) {
					incrementCounter = interval * fullIntervals + 1;
				}

				else {
					incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
				}
			}
			boolean isOneTime = true;
			incrementCounter = 0;
			temp = 0;
			for (int i = 1; i < size; i += 2) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "            " + folioName + "               " + getAmount);
				testSteps.add(dateInRequiredFormat + "             " + folioName + "               " + getAmount);
				temp++;
				double total = 0.00;

				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);

				String amount = String.format("%.2f", total);
				rateList.add("" + total);

			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsWithPackageForAdultPerInterval(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";
		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		String rateApplied = "";
		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}
		double totalAmountForPackage = 0.00;
		String convertTotalPackageAmountIntoStr = "";
		String averagePerNight = "";
		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(adults));
			double halfIntervalPackageAmount = 0.00;
			if (halfIntervals > 0) {
				halfIntervalPackageAmount = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(adults));
			}
			totalAmountForPackage = totalAmountForPackage + halfIntervalPackageAmount;
			convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
			reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

			Folio folio = new Folio();
			String getValue = folio.splitStringBySign(totalRateValueElement.getText(), "$").trim();
			intial = intial + totalAmountForPackage;
			rateApplied = String.format("%.2f", intial).trim();
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + rateApplied);

			testSteps.add("Expected rates: " + rateApplied);
			testSteps.add("Found: " + intial);
			if (getValue.equals(rateApplied)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			intial = intial - totalAmountForPackage;
			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;
			// int rateListLength = driver
			// .findElements(By.xpath("//td[contains(@data-bind,
			// 'showInnroadCurrency: { value:')]")).size();

			ArrayList<Double> getRates = new ArrayList<Double>();
			// getRates.add(totalAmountForPackage);
			Wait.wait2Second();
			ArrayList<Double> getratesForInterval = intervalRateCalculation(driver, dateFormat, checkInDate,
					checkOutDate, adults, child, roomClassExpand, intervalLength, baseAmount, adultCapacity,
					personCapacity, isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges,
					additionalChildCharges, isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges,
					proRateAdditionalChildCharges, testSteps);
			for (int i = 0; i < getratesForInterval.size(); i++) {
				getRates.add(getratesForInterval.get(i));
			}
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			int size = reservationElement.StartDate.size();

			String productAmount = String.format("%.2f",
					Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(adults)));
			for (int i = 0; i < size; i += 2) {
				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();

				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "            " + folioName + "               " + productAmount);
				testSteps.add("Expected: " + dateInRequiredFormat + "             " + folioName + "               "
						+ productAmount);
				testSteps.add("Found: " + dateInRequiredFormat + "             " + folioName + "               "
						+ amountInDouble);

				assertEquals(String.format("%.2f", amountInDouble), productAmount,
						"Failed: Product amount is mismatching!");
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
				temp++;
				double total = 0.00;

				if (temp > fullIntervals) {
					incrementCounter = interval * fullIntervals + 1;
				}

				else {
					incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
				}
			}

			boolean isOneTime = true;
			incrementCounter = 0;
			temp = 0;
			for (int i = 1; i < size; i += 2) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "            " + folioName + "               " + getAmount);
				testSteps.add(dateInRequiredFormat + "             " + folioName + "               " + getAmount);
				temp++;
				double total = 0.00;

				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);

				String amount = String.format("%.2f", total);
				rateList.add("" + total);

			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsWithPackageForPersonPerInterval(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";
		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		String rateApplied = "";
		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}
		double totalAmountForPackage = 0.00;
		String convertTotalPackageAmountIntoStr = "";
		String averagePerNight = "";
		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			int persons = Integer.parseInt(child) + Integer.parseInt(adults);
			totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * persons;
			double halfIntervalPackageAmount = 0.00;
			if (halfIntervals > 0) {
				halfIntervalPackageAmount = Double.parseDouble(productValue.get("amount")) * persons;
			}
			totalAmountForPackage = totalAmountForPackage + halfIntervalPackageAmount;
			convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
			reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

			Folio folio = new Folio();
			String getValue = folio.splitStringBySign(totalRateValueElement.getText(), "$").trim();
			intial = intial + totalAmountForPackage;
			rateApplied = String.format("%.2f", intial).trim();
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + rateApplied);

			testSteps.add("Expected rates: " + rateApplied);
			testSteps.add("Found: " + intial);
			if (getValue.equals(rateApplied)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			intial = intial - totalAmountForPackage;
			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;
			// int rateListLength = driver
			// .findElements(By.xpath("//td[contains(@data-bind,
			// 'showInnroadCurrency: { value:')]")).size();

			ArrayList<Double> getRates = new ArrayList<Double>();
			// getRates.add(totalAmountForPackage);
			Wait.wait2Second();
			ArrayList<Double> getratesForInterval = intervalRateCalculation(driver, dateFormat, checkInDate,
					checkOutDate, adults, child, roomClassExpand, intervalLength, baseAmount, adultCapacity,
					personCapacity, isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges,
					additionalChildCharges, isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges,
					proRateAdditionalChildCharges, testSteps);
			for (int i = 0; i < getratesForInterval.size(); i++) {
				getRates.add(getratesForInterval.get(i));
			}
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			int size = reservationElement.StartDate.size();
			testSteps.add("Expected package rate for per room and per night: " + convertTotalPackageAmountIntoStr);
			String productAmount = String.format("%.2f", Double.parseDouble(productValue.get("amount")) * persons);
			for (int i = 0; i < size; i += 2) {
				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();

				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "            " + folioName + "               " + productAmount);
				testSteps.add("Expected: " + dateInRequiredFormat + "             " + folioName + "               "
						+ productAmount);
				testSteps.add("Found: " + dateInRequiredFormat + "             " + folioName + "               "
						+ amountInDouble);

				assertEquals(String.format("%.2f", amountInDouble), productAmount,
						"Failed: Product amount is mismatching!");
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
				temp++;
				double total = 0.00;

				if (temp > fullIntervals) {
					incrementCounter = interval * fullIntervals + 1;
				}

				else {
					incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
				}
			}

			boolean isOneTime = true;
			incrementCounter = 0;
			temp = 0;
			isOneTime = true;
			for (int i = 1; i < size; i += 2) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "            " + folioName + "               " + getAmount);
				testSteps.add(dateInRequiredFormat + "             " + folioName + "               " + getAmount);
				temp++;
				double total = 0.00;

				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);

				String amount = String.format("%.2f", total);
				rateList.add("" + total);

			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public HashMap<String, ArrayList<String>> verifyMRBForIntervalRatePlan(WebDriver driver, ArrayList test_steps,
			String RoomClass, String IsAssign, String Account, String Adults, boolean isMinStayRuleMRB,
			boolean isMinStayRuleBrokenPopComeOrNotMRB, int minStayRuleValueMRB, String checkInColorMRB,
			String checkOutColorMRB,

			String childs, String checkIn, String checkOut, int roomcount, int size)

			throws InterruptedException, NumberFormatException, ParseException {
		ArrayList al = new ArrayList();
		ArrayList<String> getRates = new ArrayList<>();
		HashMap<String, ArrayList<String>> getRate = new HashMap<>();
		// roomcount+= 1;
		ArrayList<String> minStayColorMRB = new ArrayList<String>();
		ArrayList<String> nocheckinColorMRB = new ArrayList<String>();
		ArrayList<String> nocheckoutColorMRB = new ArrayList<String>();

		String Applypolicy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
		if (driver.findElements(By.xpath(Applypolicy)).size() > 0) {
			Wait.WaitForElement(driver, Applypolicy);
			Wait.wait3Second();
			driver.findElement(By.xpath(Applypolicy)).click();
			test_steps.add("Based on the changes made, new policies are applicable.? : yes");
			reslogger.info("Based on the changes made, new policies are applicable.? : yes");
		}
		Wait.wait5Second();
		String rm = "//span[text()='Room " + roomcount + " of " + size + "']";
		if (driver.findElement(By.xpath(rm)).isDisplayed()) {
			test_steps.add("Room " + roomcount + " of " + size + " is displayed");
			reslogger.info("Room " + roomcount + " of " + size + " is displayed");
		} else {
			String clickOnPopUpYesBut = "(//div[@class='row']//button[contains(text(),'Yes')])[3]";
			driver.findElement(By.xpath(clickOnPopUpYesBut)).click();
		}
		roomcount = roomcount + 1;
		String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ RoomClass.trim() + "')]/following-sibling::span";
		Wait.WaitForElement(driver, rulessize);
		reslogger.info(rulessize);
		int ruleCount = driver.findElements(By.xpath(rulessize)).size();

		String room = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ RoomClass.trim() + "')]/../../div[2]/span)";
		reslogger.info(room);
		Wait.WaitForElement(driver, room);
		Wait.wait2Second();
		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());

		String cost = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
				+ RoomClass.trim() + "')]/../../../following-sibling::div/div/span)";

// here to verify interval verification

		Utility.ScrollToElement(driver.findElement(By.xpath(room)), driver);

		cost = driver.findElement(By.xpath(cost)).getText();
		cost = cost.trim();
		cost = cost.substring(1, cost.length());
		reslogger.info("cost : " + cost);

		al.add(cost);
		if (count > 0) {
			test_steps.add("Selecting room class : " + RoomClass.trim());
			reslogger.info("Selecting room class : " + RoomClass.trim());
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/../../../following-sibling::div/div/select";
			WebElement ele = driver.findElement(By.xpath(sel));

			String minStayColor = "";

			System.out.println("isMinStayRuleMRB.get(i) : " + isMinStayRuleMRB);
			if (isMinStayRuleMRB) {
				System.out.println(
						"!isMinStayRuleBrokenPopComeOrNotMRB.get(i-1) : " + !isMinStayRuleBrokenPopComeOrNotMRB);
				if (!isMinStayRuleBrokenPopComeOrNotMRB) {
					minStayColor = verifyMinStayLabel(driver, test_steps, RoomClass.trim(), minStayRuleValueMRB);
					System.out.println("minStayColor : " + minStayColor);
					try {
						assertTrue(minStayColor.equalsIgnoreCase("Red"),
								"Red color lable for minstay rule is not found for the room Class : "
										+ RoomClass.trim());
						reslogger.info("Succesfully veried the red color lable for min stay rule for the room class : "
								+ RoomClass.trim());
						test_steps.add("Succesfully veried the red color lable for min stay rule for the room class : "
								+ RoomClass.trim());
					} catch (Error e) {
						test_steps.add(e.toString());
					} catch (Exception e) {
						test_steps.add(e.toString());
					}
				} else {
					minStayColor = verifyMinStayLabel(driver, test_steps, RoomClass.trim(), minStayRuleValueMRB);
					try {
						assertTrue(minStayColor.equalsIgnoreCase("green"),
								"green color lable for minstay rule is not found for the room class : "
										+ RoomClass.trim());
						reslogger
								.info("Succesfully veried the green color lable for min stay rule for the room class : "
										+ RoomClass.trim());
						test_steps
								.add("Succesfully veried the green color lable for min stay rule for the room class : "
										+ RoomClass.trim());
					} catch (Error e) {
						test_steps.add(e.toString());
					} catch (Exception e) {
						test_steps.add(e.toString());
					}
				}

			}

			minStayColorMRB.add(minStayColor);

			String noCheckinColor = "";
			if (checkInColorMRB.equalsIgnoreCase("Red")) {
				try {
					noCheckinColor = verifyNoCheckinLabel(driver, test_steps, RoomClass.trim());
					System.out.println("noCheckinColor");
					assertTrue(noCheckinColor.equalsIgnoreCase("Red"),
							"red color lable for no check in rule is not found for the room class : "
									+ RoomClass.trim());
					reslogger.info("Succesfully verified the red color lable for no check in rule for the room class : "
							+ RoomClass.trim());
					test_steps.add("Succesfully verified the red color lable for no check in rule for the room class : "
							+ RoomClass.trim());
				} catch (Error e) {
					test_steps.add(e.toString());
				} catch (Exception e) {
					test_steps.add(e.toString());
				}
			} else if (checkInColorMRB.equalsIgnoreCase("Green")) {
				try {
					noCheckinColor = verifyNoCheckinLabel(driver, test_steps, RoomClass.trim());
					assertTrue(noCheckinColor.equalsIgnoreCase("green"),
							"green color lable for no check in rule is not found for the room class : "
									+ RoomClass.trim());
					reslogger.info(
							"Succesfully verified the green color lable for no check in rule for the room class : "
									+ RoomClass.trim());
					test_steps
							.add("Succesfully verified the green color lable for no check in rule for the room class : "
									+ RoomClass.trim());
				} catch (Error e) {
					test_steps.add(e.toString());
				} catch (Exception e) {
					test_steps.add(e.toString());
				}
			} else {
				try {
					noCheckinColor = verifyNoCheckinLabel(driver, test_steps, RoomClass.trim());
					assertTrue(noCheckinColor.equalsIgnoreCase("no color"),
							"no check in rule label is displayed for the room class : " + RoomClass.trim());
					reslogger.info("Succesfully verified the no check in rule label not displayed for the room class : "
							+ RoomClass.trim());
					test_steps.add("Succesfully verified the no check in rule label not displayed for the room class : "
							+ RoomClass.trim());
				} catch (Error e) {
					test_steps.add(e.toString());
				} catch (Exception e) {
					test_steps.add(e.toString());
				}
			}

			nocheckinColorMRB.add(noCheckinColor);

			String noCheckoutColor = "";
			if (checkOutColorMRB.equalsIgnoreCase("Red")) {
				try {
					noCheckoutColor = verifyNoCheckoutLabel(driver, test_steps, RoomClass.trim());
					assertTrue(noCheckoutColor.equalsIgnoreCase("Red"),
							"red color lable for no check out rule is not found for the room class : "
									+ RoomClass.trim());
					reslogger
							.info("Succesfully verified the red color lable for no check out rule for the room class : "
									+ RoomClass.trim());
					test_steps
							.add("Succesfully verified the red color lable for no check out rule for the room class : "
									+ RoomClass.trim());
				} catch (Error e) {
					test_steps.add(e.toString());
				} catch (Exception e) {
					test_steps.add(e.toString());
				}
			} else if (checkOutColorMRB.equalsIgnoreCase("Green")) {
				try {
					noCheckoutColor = verifyNoCheckoutLabel(driver, test_steps, RoomClass.trim());
					assertTrue(noCheckoutColor.equalsIgnoreCase("green"),
							"green color lable for no check out rule is not found for the room class : "
									+ RoomClass.trim());
					reslogger.info(
							"Succesfully verified the green color lable for no check out rule for the room class : "
									+ RoomClass.trim());
					test_steps.add(
							"Succesfully verified the green color lable for no check out rule for the room class : "
									+ RoomClass.trim());
				} catch (Error e) {
					test_steps.add(e.toString());
				} catch (Exception e) {
					test_steps.add(e.toString());
				}
			} else {
				try {
					noCheckoutColor = verifyNoCheckoutLabel(driver, test_steps, RoomClass.trim());
					assertTrue(noCheckoutColor.equalsIgnoreCase("no color"),
							"no check out rule label is displayed for the room class : " + RoomClass.trim());
					reslogger
							.info("Succesfully verified the no check out rule label not displayed for the room class : "
									+ RoomClass.trim());
					test_steps
							.add("Succesfully verified the no check out rule label not displayed for the room class : "
									+ RoomClass.trim());
				} catch (Error e) {
					test_steps.add(e.toString());
				} catch (Exception e) {
					test_steps.add(e.toString());
				}
			}
			nocheckoutColorMRB.add(noCheckoutColor);

			if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass.trim()
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass.trim()
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");

			} else {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass.trim() + "')]/../../../following-sibling::div/div/select/option";
				reslogger.info(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				Random random = new Random();
				randomNumber = random.nextInt(count1 - 1) + 1;
				reslogger.info("count : " + count1);
				reslogger.info("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass.trim()
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.wait2Second();
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass.trim()
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li[" + randomNumber
						+ "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			}

//				getRates = intervalRateVerification(driver, dateFormat, checkIn, checkOut, Adults, childs,
//						RoomClass.trim(), interval, baseRate, adultCapacity, personCapacity,
//						isAdditonalAdultChild, maxAdult, maxPerson, adultRate,
//						childRate, isProStayRate, customRatePerNight, adultRatePerNight,
//						childRatePerNight, ratePlanName, test_steps);
//
//				getRate.put(RoomClass.trim(), getRates);

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 3) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");

			reslogger.info("Rule Count : " + ruleCount);
			if (ruleCount > 1) {

				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";
				counter = 0;
				Wait.wait3Second();
				reslogger.info("minStayColorMRB: " + minStayColorMRB.toString());
				reslogger.info("nocheckinColorMRB: " + nocheckinColorMRB.toString());
				reslogger.info("nocheckoutColorMRB: " + nocheckoutColorMRB.toString());

				if (driver.findElements(By.xpath(rules)).size() > 0) {

					if (minStayColorMRB.get(0).equalsIgnoreCase("Red")) {
						String min = "//p[text()='Selecting this room will violate the following rules']/..//div[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'"
								+ minStayRuleValueMRB + " NIGHT')]";
						Wait.WaitForElement(driver, min);
						test_steps.add("Verified min stay rule in the rules broken pop up as : " + minStayRuleValueMRB
								+ " night");
						reslogger.info("Verified min stay rule in the rules broken pop up as : " + minStayRuleValueMRB
								+ " night");
					}

					if (nocheckinColorMRB.get(0).equalsIgnoreCase("Red")) {
						String min = "//p[text()='Selecting this room will violate the following rules']/..//div";
						Wait.WaitForElement(driver, min);
						String nocheckin = driver.findElement(By.xpath(min)).getText();
						if (nocheckin.contains("No Check In")) {
							test_steps.add("Verified no check in rule in the rules broken pop up");
							reslogger.info("Verified no check in rule in the rules broken pop up");
						}
					}

					if (nocheckoutColorMRB.get(0).equalsIgnoreCase("Red")) {
						String min = "//p[text()='Selecting this room will violate the following rules']/..//div";
						Wait.WaitForElement(driver, min);
						String nocheckin = driver.findElement(By.xpath(min)).getText();
						if (nocheckin.contains("No Check out")) {
							test_steps.add("Verified no check in rule in the rules broken pop up");
							reslogger.info("Verified no check in rule in the rules broken pop up");
						}

					}

					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 3) {
							break;
						} else {
							counter++;
							Wait.wait3Second();
						}
					}
				}
			}

			if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
				try {
					String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
					if (driver.findElements(By.xpath(policy)).size() > 0) {
						Wait.WaitForElement(driver, policy);
						driver.findElement(By.xpath(policy)).click();
						test_steps.add("Based on the changes made, new policies are applicable.? : yes");
						reslogger.info("Based on the changes made, new policies are applicable.? : yes");

						loading = "(//div[@class='ir-loader-in'])[2]";
						counter = 0;
						while (true) {
							if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
								break;
							} else if (counter == 3) {
								break;
							} else {
								counter++;
								Wait.wait2Second();
							}
						}
					}

				} catch (Exception e) {
					// TODO: handle exception
				}

			}
		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
		return getRate;
	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsBasedOnPackageBaseOnNewAndOldDatesPerRoomPerStay(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			ArrayList<String> ratesList, String totalRoomCharges, ArrayList<String> oldDates,
			ArrayList<String> OldRates, ArrayList<String> newDates, HashMap<String, String> productValue,
			ArrayList<String> oldPackageAmounts, String oldPackageAmount, ArrayList<String> testSteps)
			throws Exception {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = Double.parseDouble(productValue.get("amount"));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		roomClassExpandElement.click();
		Wait.wait2Second();
		List<WebElement> getRateList = driver
				.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]"));

		reslogger.info("rateList1 size: " + getRateList.size());
		boolean isZero = true;

		for (int i = 1; i < getRateList.size(); i++) {

			String getRatePerInterval = getRateList.get(i).getText();
			String[] splitStr = getRatePerInterval.split("\\$");
			getRatePerInterval = splitStr[1].trim();
			if (getRatePerInterval.equals("0.00")) {
				isZero = false;
				break;
			}

		}

		reslogger.info("isZero: " + isZero);

		if (!isZero) {
			String bugId = "<a href='https://innroad.atlassian.net/browse/RATES-3850' target='_blank'>"
					+ "Failed: Rate is showing incorrect when updating stay details with change only for added dates for interval rateplan.<br>Click here for more info: RATES-3850</a>";
			testSteps.add("Failed: Click here for more info<br>");
		}

		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {
				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);

			reslogger.info("old charges: " + totalRoomCharges);
			reslogger.info("new charges: " + intial);
			reslogger.info("old Package Amount : " + oldPackageAmount);
			reslogger.info("new Package Amount : " + totalAmountForPackage);
			double totalPackageAmount = Double.parseDouble(oldPackageAmount) + totalAmountForPackage;
			double old_new_charges = Double.parseDouble(totalRoomCharges) + intial;

			testSteps.add("Expected rates: " + old_new_charges);
			testSteps.add("Found: " + getValue);

			if (getValue.equals(String.format("%.2f", old_new_charges))) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					numberofDays, testSteps);

			reslogger.info("getRates: " + getRates);
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			if (!isProRateApplied && halfIntervals > 0) {
				fullIntervals = fullIntervals + 1;
			}
			reslogger.info("reservationElement.StartDate: " + reservationElement.StartDate.size());
			reslogger.info("new dates size: " + newDates.size());
			int totalSize = newDates.size() + OldRates.size();
			reslogger.info("totalSize: " + totalSize);
			if (totalSize != reservationElement.StartDate.size()) {
				testSteps.add("Failed: Interval date is not showing correctly");
			}
			for (int j = 0; j < oldDates.size(); j++) {
				rateList.add(OldRates.get(j));
				dates.add(oldDates.get(j));
			}

			for (int j = 0; j < oldPackageAmounts.size(); j++) {
				productRates.add(oldPackageAmounts.get(j));
			}

			productRates.add(String.valueOf(totalAmountForPackage));

			testSteps.add("Expected Package Amount : " + totalPackageAmount);

			String expectedPackageAmount = String.format("%.2f", totalPackageAmount);
			String foundPackageAmount = "";
			if (reservationElement.RatePerInterval.size() > 2) {
				foundPackageAmount = Utility.RemoveDollarandSpaces(driver,
						reservationElement.RatePerInterval.get(1).getText());
			} else {
				foundPackageAmount = Utility.RemoveDollarandSpaces(driver,
						reservationElement.RatePerInterval.get(0).getText());
			}
			testSteps.add("Found Package Amount : " + foundPackageAmount);
			if (expectedPackageAmount.equals(foundPackageAmount)) {
				testSteps.add("Verified package amount is matching.");

			} else {
				testSteps.add("Failed : package amount is mismatching.");

			}

			for (int i = oldDates.size(); i < totalSize; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				testSteps.add("Expected date: " + dateInRequiredFormat);
				testSteps.add("Found: " + startDate);

				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					testSteps.add("Interval date are showing as per requirment");

				} else {
					testSteps.add("Failed: Interval date is mismatching in add and remove dates");
				}
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				// testSteps.add(dateInRequiredFormat + " " + folioName + " " + getAmount);
				temp++;
				double total = 0.00;
				if (i == 0) {
					// incrementCounter = 1;
				}

				if (isRoomChargesEqual.equalsIgnoreCase("yes") || isRoomChargesEqual.equalsIgnoreCase("no")) {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							total = getRates.get(0);
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = getRates.get(0);

						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsBasedOnPackageBaseOnNewAndOldDatesPerRoomPerInterval(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			ArrayList<String> ratesList, String totalRoomCharges, ArrayList<String> oldDates,
			ArrayList<String> OldRates, ArrayList<String> newDates, HashMap<String, String> productValue,
			ArrayList<String> oldPackageAmounts, String oldPackageAmount, ArrayList<String> testSteps)
			throws Exception {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		roomClassExpandElement.click();
		Wait.wait2Second();
		List<WebElement> getRateList = driver
				.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]"));

		reslogger.info("rateList1 size: " + getRateList.size());
		boolean isZero = true;

		for (int i = 1; i < getRateList.size(); i++) {

			String getRatePerInterval = getRateList.get(i).getText();
			String[] splitStr = getRatePerInterval.split("\\$");
			getRatePerInterval = splitStr[1].trim();
			if (getRatePerInterval.equals("0.00")) {
				isZero = false;
				break;
			}

		}

		reslogger.info("isZero: " + isZero);

		if (!isZero) {
			String bugId = "<a href='https://innroad.atlassian.net/browse/RATES-3850' target='_blank'>"
					+ "Failed: Rate is showing incorrect when updating stay details with change only for added dates for interval rateplan.<br>Click here for more info: RATES-3850</a>";
			testSteps.add("Failed: Click here for more info<br>");
		}

		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {
				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			double totalAmountForPackage = 0.00;
			totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * fullIntervals;
			double halfIntervalPackageAmount = 0.00;
			if (halfIntervals > 0) {
				halfIntervalPackageAmount = Double.parseDouble(productValue.get("amount")) * halfIntervals;
			}
			totalAmountForPackage = totalAmountForPackage + halfIntervalPackageAmount;
			String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
			reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);

			reslogger.info("old charges: " + totalRoomCharges);
			reslogger.info("new charges: " + intial);
			reslogger.info("old Package Amount : " + oldPackageAmount);
			reslogger.info("new Package Amount : " + totalAmountForPackage);
			double totalPackageAmount = Double.parseDouble(oldPackageAmount) + totalAmountForPackage;
			double old_new_charges = Double.parseDouble(totalRoomCharges) + intial;

			testSteps.add("Expected rates: " + old_new_charges);
			testSteps.add("Found: " + getValue);

			if (getValue.equals(String.format("%.2f", old_new_charges))) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					numberofDays, testSteps);

			reslogger.info("getRates: " + getRates);
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			if (!isProRateApplied && halfIntervals > 0) {
				fullIntervals = fullIntervals + 1;
			}
			reslogger.info("reservationElement.StartDate: " + reservationElement.StartDate.size());
			reslogger.info("new dates size: " + newDates.size());
			int totalSize = newDates.size() + OldRates.size();
			reslogger.info("totalSize: " + totalSize);
			if (totalSize != reservationElement.StartDate.size()) {
				testSteps.add("Failed: Interval date is not showing correctly");
			}
			for (int j = 0; j < oldDates.size(); j++) {
				rateList.add(OldRates.get(j));
				dates.add(oldDates.get(j));
			}

			for (int j = 0; j < oldPackageAmounts.size(); j++) {
				productRates.add(oldPackageAmounts.get(j));
			}

			productRates.add(String.valueOf(totalAmountForPackage));

			testSteps.add("Expected Package Amount : " + totalPackageAmount);

			String expectedPackageAmount = String.format("%.2f", totalPackageAmount);
			String foundPackageAmount = "";
			if (reservationElement.RatePerInterval.size() > 2) {
				foundPackageAmount = reservationElement.RatePerInterval.get(1).getText();
			} else {
				foundPackageAmount = reservationElement.RatePerInterval.get(0).getText();
			}
			testSteps.add("Found Package Amount : " + foundPackageAmount);
			if (expectedPackageAmount.equals(String.format("%.2f", foundPackageAmount))) {
				testSteps.add("Verified package amount is matching.");

			} else {
				testSteps.add("Failed : package amount is mismatching.");

			}

			for (int i = oldDates.size(); i < totalSize; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				testSteps.add("Expected date: " + dateInRequiredFormat);
				testSteps.add("Found: " + startDate);

				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					testSteps.add("Interval date are showing as per requirment");

				} else {
					testSteps.add("Failed: Interval date is mismatching in add and remove dates");
				}
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				// testSteps.add(dateInRequiredFormat + " " + folioName + " " + getAmount);
				temp++;
				double total = 0.00;
				if (i == 0) {
					// incrementCounter = 1;
				}

				if (isRoomChargesEqual.equalsIgnoreCase("yes") || isRoomChargesEqual.equalsIgnoreCase("no")) {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							total = getRates.get(0);
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = getRates.get(0);

						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;
	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsBasedOnPackageBaseOnNewAndOldDatesPerAdultPerNight(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			ArrayList<String> ratesList, String totalRoomCharges, ArrayList<String> oldDates,
			ArrayList<String> OldRates, ArrayList<String> newDates, HashMap<String, String> productValue,
			ArrayList<String> oldPackageAmounts, String oldPackageAmount, ArrayList<String> testSteps)
			throws Exception {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * numberofDays
				* (Integer.parseInt(adults));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		roomClassExpandElement.click();
		Wait.wait2Second();
		List<WebElement> getRateList = driver
				.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]"));

		reslogger.info("rateList1 size: " + getRateList.size());
		boolean isZero = true;

		for (int i = 1; i < getRateList.size(); i++) {

			String getRatePerInterval = getRateList.get(i).getText();
			String[] splitStr = getRatePerInterval.split("\\$");
			getRatePerInterval = splitStr[1].trim();
			if (getRatePerInterval.equals("0.00")) {
				isZero = false;
				break;
			}

		}

		reslogger.info("isZero: " + isZero);

		if (!isZero) {
			String bugId = "<a href='https://innroad.atlassian.net/browse/RATES-3850' target='_blank'>"
					+ "Failed: Rate is showing incorrect when updating stay details with change only for added dates for interval rateplan.<br>Click here for more info: RATES-3850</a>";
			testSteps.add("Failed: Click here for more info<br>");
		}

		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {
				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);

			reslogger.info("old charges: " + totalRoomCharges);
			reslogger.info("new charges: " + intial);
			reslogger.info("old Package Amount : " + oldPackageAmount);
			reslogger.info("new Package Amount : " + totalAmountForPackage);
			double totalPackageAmount = Double.parseDouble(oldPackageAmount) + totalAmountForPackage;
			double old_new_charges = Double.parseDouble(totalRoomCharges) + intial;

			testSteps.add("Expected rates: " + old_new_charges);
			testSteps.add("Found: " + getValue);

			if (getValue.equals(String.format("%.2f", old_new_charges))) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					numberofDays, testSteps);

			reslogger.info("getRates: " + getRates);
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			if (!isProRateApplied && halfIntervals > 0) {
				fullIntervals = fullIntervals + 1;
			}
			reslogger.info("reservationElement.StartDate: " + reservationElement.StartDate.size());
			reslogger.info("new dates size: " + newDates.size());
			int totalSize = newDates.size() + OldRates.size();
			reslogger.info("totalSize: " + totalSize);
			if (totalSize != reservationElement.StartDate.size()) {
				testSteps.add("Failed: Interval date is not showing correctly");
			}
			for (int j = 0; j < oldDates.size(); j++) {
				rateList.add(OldRates.get(j));
				dates.add(oldDates.get(j));
			}

			for (int j = 0; j < oldPackageAmounts.size(); j++) {
				productRates.add(oldPackageAmounts.get(j));
			}

			productRates.add(String.valueOf(totalAmountForPackage));

			testSteps.add("Expected Package Amount : " + totalPackageAmount);

			String expectedPackageAmount = String.format("%.2f", totalPackageAmount);
			String foundPackageAmount = "";
			if (reservationElement.RatePerInterval.size() > 2) {
				foundPackageAmount = reservationElement.RatePerInterval.get(1).getText();
			} else {
				foundPackageAmount = reservationElement.RatePerInterval.get(0).getText();
			}
			testSteps.add("Found Package Amount : " + foundPackageAmount);
			if (expectedPackageAmount.equals(String.format("%.2f", foundPackageAmount))) {
				testSteps.add("Verified package amount is matching.");

			} else {
				testSteps.add("Failed : package amount is mismatching.");

			}

			for (int i = oldDates.size(); i < totalSize; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				testSteps.add("Expected date: " + dateInRequiredFormat);
				testSteps.add("Found: " + startDate);

				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					testSteps.add("Interval date are showing as per requirment");

				} else {
					testSteps.add("Failed: Interval date is mismatching in add and remove dates");
				}
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				// testSteps.add(dateInRequiredFormat + " " + folioName + " " + getAmount);
				temp++;
				double total = 0.00;
				if (i == 0) {
					// incrementCounter = 1;
				}

				if (isRoomChargesEqual.equalsIgnoreCase("yes") || isRoomChargesEqual.equalsIgnoreCase("no")) {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							total = getRates.get(0);
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = getRates.get(0);

						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;
	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsBasedOnPackageBaseOnNewAndOldDatesPerAdultPerStay(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			ArrayList<String> ratesList, String totalRoomCharges, ArrayList<String> oldDates,
			ArrayList<String> OldRates, ArrayList<String> newDates, HashMap<String, String> productValue,
			ArrayList<String> oldPackageAmounts, String oldPackageAmount, ArrayList<String> testSteps)
			throws Exception {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(adults));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		roomClassExpandElement.click();
		Wait.wait2Second();
		List<WebElement> getRateList = driver
				.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]"));

		reslogger.info("rateList1 size: " + getRateList.size());
		boolean isZero = true;

		for (int i = 1; i < getRateList.size(); i++) {

			String getRatePerInterval = getRateList.get(i).getText();
			String[] splitStr = getRatePerInterval.split("\\$");
			getRatePerInterval = splitStr[1].trim();
			if (getRatePerInterval.equals("0.00")) {
				isZero = false;
				break;
			}

		}

		reslogger.info("isZero: " + isZero);

		if (!isZero) {
			String bugId = "<a href='https://innroad.atlassian.net/browse/RATES-3850' target='_blank'>"
					+ "Failed: Rate is showing incorrect when updating stay details with change only for added dates for interval rateplan.<br>Click here for more info: RATES-3850</a>";
			testSteps.add("Failed: Click here for more info<br>");
		}

		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {
				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);

			reslogger.info("old charges: " + totalRoomCharges);
			reslogger.info("new charges: " + intial);
			reslogger.info("old Package Amount : " + oldPackageAmount);
			reslogger.info("new Package Amount : " + totalAmountForPackage);
			double totalPackageAmount = Double.parseDouble(oldPackageAmount) + totalAmountForPackage;
			double old_new_charges = Double.parseDouble(totalRoomCharges) + intial;

			testSteps.add("Expected rates: " + old_new_charges);
			testSteps.add("Found: " + getValue);

			if (getValue.equals(String.format("%.2f", old_new_charges))) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					numberofDays, testSteps);

			reslogger.info("getRates: " + getRates);
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			if (!isProRateApplied && halfIntervals > 0) {
				fullIntervals = fullIntervals + 1;
			}
			reslogger.info("reservationElement.StartDate: " + reservationElement.StartDate.size());
			reslogger.info("new dates size: " + newDates.size());
			int totalSize = newDates.size() + OldRates.size();
			reslogger.info("totalSize: " + totalSize);
			if (totalSize != reservationElement.StartDate.size()) {
				testSteps.add("Failed: Interval date is not showing correctly");
			}
			for (int j = 0; j < oldDates.size(); j++) {
				rateList.add(OldRates.get(j));
				dates.add(oldDates.get(j));
			}

			for (int j = 0; j < oldPackageAmounts.size(); j++) {
				productRates.add(oldPackageAmounts.get(j));
			}

			productRates.add(String.valueOf(totalAmountForPackage));

			testSteps.add("Expected Package Amount : " + totalPackageAmount);

			String expectedPackageAmount = String.format("%.2f", totalPackageAmount);
			String foundPackageAmount = "";
			if (reservationElement.RatePerInterval.size() > 2) {
				foundPackageAmount = reservationElement.RatePerInterval.get(1).getText();
			} else {
				foundPackageAmount = reservationElement.RatePerInterval.get(0).getText();
			}
			testSteps.add("Found Package Amount : " + foundPackageAmount);
			if (expectedPackageAmount.equals(String.format("%.2f", foundPackageAmount))) {
				testSteps.add("Verified package amount is matching.");

			} else {
				testSteps.add("Failed : package amount is mismatching.");

			}

			for (int i = oldDates.size(); i < totalSize; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				testSteps.add("Expected date: " + dateInRequiredFormat);
				testSteps.add("Found: " + startDate);

				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					testSteps.add("Interval date are showing as per requirment");

				} else {
					testSteps.add("Failed: Interval date is mismatching in add and remove dates");
				}
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				// testSteps.add(dateInRequiredFormat + " " + folioName + " " + getAmount);
				temp++;
				double total = 0.00;
				if (i == 0) {
					// incrementCounter = 1;
				}

				if (isRoomChargesEqual.equalsIgnoreCase("yes") || isRoomChargesEqual.equalsIgnoreCase("no")) {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							total = getRates.get(0);
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = getRates.get(0);

						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;
	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsBasedOnPackageBaseOnNewAndOldDatesPerAdultPerInterval(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			ArrayList<String> ratesList, String totalRoomCharges, ArrayList<String> oldDates,
			ArrayList<String> OldRates, ArrayList<String> newDates, HashMap<String, String> productValue,
			ArrayList<String> oldPackageAmounts, String oldPackageAmount, ArrayList<String> testSteps)
			throws Exception {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		roomClassExpandElement.click();
		Wait.wait2Second();
		List<WebElement> getRateList = driver
				.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]"));

		reslogger.info("rateList1 size: " + getRateList.size());
		boolean isZero = true;

		for (int i = 1; i < getRateList.size(); i++) {

			String getRatePerInterval = getRateList.get(i).getText();
			String[] splitStr = getRatePerInterval.split("\\$");
			getRatePerInterval = splitStr[1].trim();
			if (getRatePerInterval.equals("0.00")) {
				isZero = false;
				break;
			}

		}

		reslogger.info("isZero: " + isZero);

		if (!isZero) {
			String bugId = "<a href='https://innroad.atlassian.net/browse/RATES-3850' target='_blank'>"
					+ "Failed: Rate is showing incorrect when updating stay details with change only for added dates for interval rateplan.<br>Click here for more info: RATES-3850</a>";
			testSteps.add("Failed: Click here for more info<br>");
		}

		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {
				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(adults));
			double halfIntervalPackageAmount = 0.00;
			if (halfIntervals > 0) {
				halfIntervalPackageAmount = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(adults));
			}
			totalAmountForPackage = totalAmountForPackage + halfIntervalPackageAmount;
			String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
			reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);

			reslogger.info("old charges: " + totalRoomCharges);
			reslogger.info("new charges: " + intial);
			reslogger.info("old Package Amount : " + oldPackageAmount);
			reslogger.info("new Package Amount : " + totalAmountForPackage);
			double totalPackageAmount = Double.parseDouble(oldPackageAmount) + totalAmountForPackage;
			double old_new_charges = Double.parseDouble(totalRoomCharges) + intial;

			testSteps.add("Expected rates: " + old_new_charges);
			testSteps.add("Found: " + getValue);

			if (getValue.equals(String.format("%.2f", old_new_charges))) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					numberofDays, testSteps);

			reslogger.info("getRates: " + getRates);
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			if (!isProRateApplied && halfIntervals > 0) {
				fullIntervals = fullIntervals + 1;
			}
			reslogger.info("reservationElement.StartDate: " + reservationElement.StartDate.size());
			reslogger.info("new dates size: " + newDates.size());
			int totalSize = newDates.size() + OldRates.size();
			reslogger.info("totalSize: " + totalSize);
			if (totalSize != reservationElement.StartDate.size()) {
				testSteps.add("Failed: Interval date is not showing correctly");
			}
			for (int j = 0; j < oldDates.size(); j++) {
				rateList.add(OldRates.get(j));
				dates.add(oldDates.get(j));
			}

			for (int j = 0; j < oldPackageAmounts.size(); j++) {
				productRates.add(oldPackageAmounts.get(j));
			}

			productRates.add(String.valueOf(totalAmountForPackage));

			testSteps.add("Expected Package Amount : " + totalPackageAmount);

			String expectedPackageAmount = String.format("%.2f", totalPackageAmount);
			String foundPackageAmount = "";
			if (reservationElement.RatePerInterval.size() > 2) {
				foundPackageAmount = reservationElement.RatePerInterval.get(1).getText();
			} else {
				foundPackageAmount = reservationElement.RatePerInterval.get(0).getText();
			}
			testSteps.add("Found Package Amount : " + foundPackageAmount);
			if (expectedPackageAmount.equals(String.format("%.2f", foundPackageAmount))) {
				testSteps.add("Verified package amount is matching.");

			} else {
				testSteps.add("Failed : package amount is mismatching.");

			}

			for (int i = oldDates.size(); i < totalSize; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				testSteps.add("Expected date: " + dateInRequiredFormat);
				testSteps.add("Found: " + startDate);

				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					testSteps.add("Interval date are showing as per requirment");

				} else {
					testSteps.add("Failed: Interval date is mismatching in add and remove dates");
				}
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				// testSteps.add(dateInRequiredFormat + " " + folioName + " " + getAmount);
				temp++;
				double total = 0.00;
				if (i == 0) {
					// incrementCounter = 1;
				}

				if (isRoomChargesEqual.equalsIgnoreCase("yes") || isRoomChargesEqual.equalsIgnoreCase("no")) {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							total = getRates.get(0);
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = getRates.get(0);

						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;
	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsBasedOnPackageBaseOnNewAndOldDatesPerChildPerNight(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			ArrayList<String> ratesList, String totalRoomCharges, ArrayList<String> oldDates,
			ArrayList<String> OldRates, ArrayList<String> newDates, HashMap<String, String> productValue,
			ArrayList<String> oldPackageAmounts, String oldPackageAmount, ArrayList<String> testSteps)
			throws Exception {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * numberofDays
				* (Integer.parseInt(child));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		roomClassExpandElement.click();
		Wait.wait2Second();
		List<WebElement> getRateList = driver
				.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]"));

		reslogger.info("rateList1 size: " + getRateList.size());
		boolean isZero = true;

		for (int i = 1; i < getRateList.size(); i++) {

			String getRatePerInterval = getRateList.get(i).getText();
			String[] splitStr = getRatePerInterval.split("\\$");
			getRatePerInterval = splitStr[1].trim();
			if (getRatePerInterval.equals("0.00")) {
				isZero = false;
				break;
			}

		}

		reslogger.info("isZero: " + isZero);

		if (!isZero) {
			String bugId = "<a href='https://innroad.atlassian.net/browse/RATES-3850' target='_blank'>"
					+ "Failed: Rate is showing incorrect when updating stay details with change only for added dates for interval rateplan.<br>Click here for more info: RATES-3850</a>";
			testSteps.add("Failed: Click here for more info<br>");
		}

		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {
				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);

			reslogger.info("old charges: " + totalRoomCharges);
			reslogger.info("new charges: " + intial);
			reslogger.info("old Package Amount : " + oldPackageAmount);
			reslogger.info("new Package Amount : " + totalAmountForPackage);
			double totalPackageAmount = Double.parseDouble(oldPackageAmount) + totalAmountForPackage;
			double old_new_charges = Double.parseDouble(totalRoomCharges) + intial;

			testSteps.add("Expected rates: " + old_new_charges);
			testSteps.add("Found: " + getValue);

			if (getValue.equals(String.format("%.2f", old_new_charges))) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					numberofDays, testSteps);

			reslogger.info("getRates: " + getRates);
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			if (!isProRateApplied && halfIntervals > 0) {
				fullIntervals = fullIntervals + 1;
			}
			reslogger.info("reservationElement.StartDate: " + reservationElement.StartDate.size());
			reslogger.info("new dates size: " + newDates.size());
			int totalSize = newDates.size() + OldRates.size();
			reslogger.info("totalSize: " + totalSize);
			if (totalSize != reservationElement.StartDate.size()) {
				testSteps.add("Failed: Interval date is not showing correctly");
			}
			for (int j = 0; j < oldDates.size(); j++) {
				rateList.add(OldRates.get(j));
				dates.add(oldDates.get(j));
			}

			for (int j = 0; j < oldPackageAmounts.size(); j++) {
				productRates.add(oldPackageAmounts.get(j));
			}
			productRates.add(String.valueOf(totalAmountForPackage));

			testSteps.add("Expected Package Amount : " + totalPackageAmount);

			String expectedPackageAmount = String.format("%.2f", totalPackageAmount);
			String foundPackageAmount = "";
			if (reservationElement.RatePerInterval.size() > 2) {
				foundPackageAmount = reservationElement.RatePerInterval.get(1).getText();
			} else {
				foundPackageAmount = reservationElement.RatePerInterval.get(0).getText();
			}
			testSteps.add("Found Package Amount : " + foundPackageAmount);
			if (expectedPackageAmount.equals(String.format("%.2f", foundPackageAmount))) {
				testSteps.add("Verified package amount is matching.");

			} else {
				testSteps.add("Failed : package amount is mismatching.");

			}

			for (int i = oldDates.size(); i < totalSize; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				testSteps.add("Expected date: " + dateInRequiredFormat);
				testSteps.add("Found: " + startDate);

				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					testSteps.add("Interval date are showing as per requirment");

				} else {
					testSteps.add("Failed: Interval date is mismatching in add and remove dates");
				}
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				// testSteps.add(dateInRequiredFormat + " " + folioName + " " + getAmount);
				temp++;
				double total = 0.00;
				if (i == 0) {
					// incrementCounter = 1;
				}

				if (isRoomChargesEqual.equalsIgnoreCase("yes") || isRoomChargesEqual.equalsIgnoreCase("no")) {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							total = getRates.get(0);
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = getRates.get(0);

						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;
	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsBasedOnPackageBaseOnNewAndOldDatesPerChildPerStay(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			ArrayList<String> ratesList, String totalRoomCharges, ArrayList<String> oldDates,
			ArrayList<String> OldRates, ArrayList<String> newDates, HashMap<String, String> productValue,
			ArrayList<String> oldPackageAmounts, String oldPackageAmount, ArrayList<String> testSteps)
			throws Exception {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(child));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		roomClassExpandElement.click();
		Wait.wait2Second();
		List<WebElement> getRateList = driver
				.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]"));

		reslogger.info("rateList1 size: " + getRateList.size());
		boolean isZero = true;

		for (int i = 1; i < getRateList.size(); i++) {

			String getRatePerInterval = getRateList.get(i).getText();
			String[] splitStr = getRatePerInterval.split("\\$");
			getRatePerInterval = splitStr[1].trim();
			if (getRatePerInterval.equals("0.00")) {
				isZero = false;
				break;
			}

		}

		reslogger.info("isZero: " + isZero);

		if (!isZero) {
			String bugId = "<a href='https://innroad.atlassian.net/browse/RATES-3850' target='_blank'>"
					+ "Failed: Rate is showing incorrect when updating stay details with change only for added dates for interval rateplan.<br>Click here for more info: RATES-3850</a>";
			testSteps.add("Failed: Click here for more info<br>");
		}

		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {
				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);

			reslogger.info("old charges: " + totalRoomCharges);
			reslogger.info("new charges: " + intial);
			reslogger.info("old Package Amount : " + oldPackageAmount);
			reslogger.info("new Package Amount : " + totalAmountForPackage);
			double totalPackageAmount = Double.parseDouble(oldPackageAmount) + totalAmountForPackage;
			double old_new_charges = Double.parseDouble(totalRoomCharges) + intial;

			testSteps.add("Expected rates: " + old_new_charges);
			testSteps.add("Found: " + getValue);

			if (getValue.equals(String.format("%.2f", old_new_charges))) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					numberofDays, testSteps);

			reslogger.info("getRates: " + getRates);
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			if (!isProRateApplied && halfIntervals > 0) {
				fullIntervals = fullIntervals + 1;
			}
			reslogger.info("reservationElement.StartDate: " + reservationElement.StartDate.size());
			reslogger.info("new dates size: " + newDates.size());
			int totalSize = newDates.size() + OldRates.size();
			reslogger.info("totalSize: " + totalSize);
			if (totalSize != reservationElement.StartDate.size()) {
				testSteps.add("Failed: Interval date is not showing correctly");
			}
			for (int j = 0; j < oldDates.size(); j++) {
				rateList.add(OldRates.get(j));
				dates.add(oldDates.get(j));
			}

			for (int j = 0; j < oldPackageAmounts.size(); j++) {
				productRates.add(oldPackageAmounts.get(j));
			}

			productRates.add(String.valueOf(totalAmountForPackage));

			testSteps.add("Expected Package Amount : " + totalPackageAmount);

			String expectedPackageAmount = String.format("%.2f", totalPackageAmount);
			String foundPackageAmount = "";
			if (reservationElement.RatePerInterval.size() > 2) {
				foundPackageAmount = reservationElement.RatePerInterval.get(1).getText();
			} else {
				foundPackageAmount = reservationElement.RatePerInterval.get(0).getText();
			}
			testSteps.add("Found Package Amount : " + foundPackageAmount);
			if (expectedPackageAmount.equals(String.format("%.2f", foundPackageAmount))) {
				testSteps.add("Verified package amount is matching.");

			} else {
				testSteps.add("Failed : package amount is mismatching.");

			}

			for (int i = oldDates.size(); i < totalSize; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				testSteps.add("Expected date: " + dateInRequiredFormat);
				testSteps.add("Found: " + startDate);

				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					testSteps.add("Interval date are showing as per requirment");

				} else {
					testSteps.add("Failed: Interval date is mismatching in add and remove dates");
				}
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				// testSteps.add(dateInRequiredFormat + " " + folioName + " " + getAmount);
				temp++;
				double total = 0.00;
				if (i == 0) {
					// incrementCounter = 1;
				}

				if (isRoomChargesEqual.equalsIgnoreCase("yes") || isRoomChargesEqual.equalsIgnoreCase("no")) {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							total = getRates.get(0);
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = getRates.get(0);

						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;
	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsBasedOnPackageBaseOnNewAndOldDatesPerChildPerInterval(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			ArrayList<String> ratesList, String totalRoomCharges, ArrayList<String> oldDates,
			ArrayList<String> OldRates, ArrayList<String> newDates, HashMap<String, String> productValue,
			ArrayList<String> oldPackageAmounts, String oldPackageAmount, ArrayList<String> testSteps)
			throws Exception {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		roomClassExpandElement.click();
		Wait.wait2Second();
		List<WebElement> getRateList = driver
				.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]"));

		reslogger.info("rateList1 size: " + getRateList.size());
		boolean isZero = true;

		for (int i = 1; i < getRateList.size(); i++) {

			String getRatePerInterval = getRateList.get(i).getText();
			String[] splitStr = getRatePerInterval.split("\\$");
			getRatePerInterval = splitStr[1].trim();
			if (getRatePerInterval.equals("0.00")) {
				isZero = false;
				break;
			}

		}

		reslogger.info("isZero: " + isZero);

		if (!isZero) {
			String bugId = "<a href='https://innroad.atlassian.net/browse/RATES-3850' target='_blank'>"
					+ "Failed: Rate is showing incorrect when updating stay details with change only for added dates for interval rateplan.<br>Click here for more info: RATES-3850</a>";
			testSteps.add("Failed: Click here for more info<br>");
		}

		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {
				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(child));
			double halfIntervalPackageAmount = 0.00;
			if (halfIntervals > 0) {
				halfIntervalPackageAmount = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(child));
			}
			totalAmountForPackage = totalAmountForPackage + halfIntervalPackageAmount;
			String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
			reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);

			reslogger.info("old charges: " + totalRoomCharges);
			reslogger.info("new charges: " + intial);
			reslogger.info("old Package Amount : " + oldPackageAmount);
			reslogger.info("new Package Amount : " + totalAmountForPackage);
			double totalPackageAmount = Double.parseDouble(oldPackageAmount) + totalAmountForPackage;
			double old_new_charges = Double.parseDouble(totalRoomCharges) + intial;

			testSteps.add("Expected rates: " + old_new_charges);
			testSteps.add("Found: " + getValue);

			if (getValue.equals(String.format("%.2f", old_new_charges))) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					numberofDays, testSteps);

			reslogger.info("getRates: " + getRates);
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			if (!isProRateApplied && halfIntervals > 0) {
				fullIntervals = fullIntervals + 1;
			}
			reslogger.info("reservationElement.StartDate: " + reservationElement.StartDate.size());
			reslogger.info("new dates size: " + newDates.size());
			int totalSize = newDates.size() + OldRates.size();
			reslogger.info("totalSize: " + totalSize);
			if (totalSize != reservationElement.StartDate.size()) {
				testSteps.add("Failed: Interval date is not showing correctly");
			}
			for (int j = 0; j < oldDates.size(); j++) {
				rateList.add(OldRates.get(j));
				dates.add(oldDates.get(j));
			}

			for (int j = 0; j < oldPackageAmounts.size(); j++) {
				productRates.add(oldPackageAmounts.get(j));
			}

			productRates.add(String.valueOf(totalAmountForPackage));

			testSteps.add("Expected Package Amount : " + totalPackageAmount);

			String expectedPackageAmount = String.format("%.2f", totalPackageAmount);
			String foundPackageAmount = "";
			if (reservationElement.RatePerInterval.size() > 2) {
				foundPackageAmount = reservationElement.RatePerInterval.get(1).getText();
			} else {
				foundPackageAmount = reservationElement.RatePerInterval.get(0).getText();
			}
			testSteps.add("Found Package Amount : " + foundPackageAmount);
			if (expectedPackageAmount.equals(String.format("%.2f", foundPackageAmount))) {
				testSteps.add("Verified package amount is matching.");

			} else {
				testSteps.add("Failed : package amount is mismatching.");

			}

			for (int i = oldDates.size(); i < totalSize; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				testSteps.add("Expected date: " + dateInRequiredFormat);
				testSteps.add("Found: " + startDate);

				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					testSteps.add("Interval date are showing as per requirment");

				} else {
					testSteps.add("Failed: Interval date is mismatching in add and remove dates");
				}
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				// testSteps.add(dateInRequiredFormat + " " + folioName + " " + getAmount);
				temp++;
				double total = 0.00;
				if (i == 0) {
					// incrementCounter = 1;
				}

				if (isRoomChargesEqual.equalsIgnoreCase("yes") || isRoomChargesEqual.equalsIgnoreCase("no")) {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							total = getRates.get(0);
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = getRates.get(0);

						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;
	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsBasedOnPackageBaseOnNewAndOldDatesPerPersonPerNight(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			ArrayList<String> ratesList, String totalRoomCharges, ArrayList<String> oldDates,
			ArrayList<String> OldRates, ArrayList<String> newDates, HashMap<String, String> productValue,
			ArrayList<String> oldPackageAmounts, String oldPackageAmount, ArrayList<String> testSteps)
			throws Exception {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = totalAmountForPackage = Double.parseDouble(productValue.get("amount"))
				* numberofDays * (Integer.parseInt(child) + Integer.parseInt(adults));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		roomClassExpandElement.click();
		Wait.wait2Second();
		List<WebElement> getRateList = driver
				.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]"));

		reslogger.info("rateList1 size: " + getRateList.size());
		boolean isZero = true;

		for (int i = 1; i < getRateList.size(); i++) {

			String getRatePerInterval = getRateList.get(i).getText();
			String[] splitStr = getRatePerInterval.split("\\$");
			getRatePerInterval = splitStr[1].trim();
			if (getRatePerInterval.equals("0.00")) {
				isZero = false;
				break;
			}

		}

		reslogger.info("isZero: " + isZero);

		if (!isZero) {
			String bugId = "<a href='https://innroad.atlassian.net/browse/RATES-3850' target='_blank'>"
					+ "Failed: Rate is showing incorrect when updating stay details with change only for added dates for interval rateplan.<br>Click here for more info: RATES-3850</a>";
			testSteps.add("Failed: Click here for more info<br>");
		}

		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {
				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);

			reslogger.info("old charges: " + totalRoomCharges);
			reslogger.info("new charges: " + intial);
			reslogger.info("old Package Amount : " + oldPackageAmount);
			reslogger.info("new Package Amount : " + totalAmountForPackage);
			double totalPackageAmount = Double.parseDouble(oldPackageAmount) + totalAmountForPackage;
			double old_new_charges = Double.parseDouble(totalRoomCharges) + intial;

			testSteps.add("Expected rates: " + old_new_charges);
			testSteps.add("Found: " + getValue);

			if (getValue.equals(String.format("%.2f", old_new_charges))) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					numberofDays, testSteps);

			reslogger.info("getRates: " + getRates);
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			if (!isProRateApplied && halfIntervals > 0) {
				fullIntervals = fullIntervals + 1;
			}
			reslogger.info("reservationElement.StartDate: " + reservationElement.StartDate.size());
			reslogger.info("new dates size: " + newDates.size());
			int totalSize = newDates.size() + OldRates.size();
			reslogger.info("totalSize: " + totalSize);
			if (totalSize != reservationElement.StartDate.size()) {
				testSteps.add("Failed: Interval date is not showing correctly");
			}
			for (int j = 0; j < oldDates.size(); j++) {
				rateList.add(OldRates.get(j));
				dates.add(oldDates.get(j));
			}

			for (int j = 0; j < oldPackageAmounts.size(); j++) {
				productRates.add(oldPackageAmounts.get(j));
			}

			productRates.add(String.valueOf(totalAmountForPackage));

			testSteps.add("Expected Package Amount : " + totalPackageAmount);

			String expectedPackageAmount = String.format("%.2f", totalPackageAmount);
			String foundPackageAmount = "";
			if (reservationElement.RatePerInterval.size() > 2) {
				foundPackageAmount = reservationElement.RatePerInterval.get(1).getText();
			} else {
				foundPackageAmount = reservationElement.RatePerInterval.get(0).getText();
			}
			testSteps.add("Found Package Amount : " + foundPackageAmount);
			if (expectedPackageAmount.equals(String.format("%.2f", foundPackageAmount))) {
				testSteps.add("Verified package amount is matching.");

			} else {
				testSteps.add("Failed : package amount is mismatching.");

			}

			for (int i = oldDates.size(); i < totalSize; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				testSteps.add("Expected date: " + dateInRequiredFormat);
				testSteps.add("Found: " + startDate);

				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					testSteps.add("Interval date are showing as per requirment");

				} else {
					testSteps.add("Failed: Interval date is mismatching in add and remove dates");
				}
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				// testSteps.add(dateInRequiredFormat + " " + folioName + " " + getAmount);
				temp++;
				double total = 0.00;
				if (i == 0) {
					// incrementCounter = 1;
				}

				if (isRoomChargesEqual.equalsIgnoreCase("yes") || isRoomChargesEqual.equalsIgnoreCase("no")) {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							total = getRates.get(0);
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = getRates.get(0);

						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;
	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsBasedOnPackageBaseOnNewAndOldDatesPerPersonPerStay(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			ArrayList<String> ratesList, String totalRoomCharges, ArrayList<String> oldDates,
			ArrayList<String> OldRates, ArrayList<String> newDates, HashMap<String, String> productValue,
			ArrayList<String> oldPackageAmounts, String oldPackageAmount, ArrayList<String> testSteps)
			throws Exception {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = 0.00;
		totalAmountForPackage = Double.parseDouble(productValue.get("amount"))
				* (Integer.parseInt(child) + Integer.parseInt(adults));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		roomClassExpandElement.click();
		Wait.wait2Second();
		List<WebElement> getRateList = driver
				.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]"));

		reslogger.info("rateList1 size: " + getRateList.size());
		boolean isZero = true;

		for (int i = 1; i < getRateList.size(); i++) {

			String getRatePerInterval = getRateList.get(i).getText();
			String[] splitStr = getRatePerInterval.split("\\$");
			getRatePerInterval = splitStr[1].trim();
			if (getRatePerInterval.equals("0.00")) {
				isZero = false;
				break;
			}

		}

		reslogger.info("isZero: " + isZero);

		if (!isZero) {
			String bugId = "<a href='https://innroad.atlassian.net/browse/RATES-3850' target='_blank'>"
					+ "Failed: Rate is showing incorrect when updating stay details with change only for added dates for interval rateplan.<br>Click here for more info: RATES-3850</a>";
			testSteps.add("Failed: Click here for more info<br>");
		}

		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {
				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);

			reslogger.info("old charges: " + totalRoomCharges);
			reslogger.info("new charges: " + intial);
			reslogger.info("old Package Amount : " + oldPackageAmount);
			reslogger.info("new Package Amount : " + totalAmountForPackage);
			double totalPackageAmount = Double.parseDouble(oldPackageAmount) + totalAmountForPackage;
			double old_new_charges = Double.parseDouble(totalRoomCharges) + intial;

			testSteps.add("Expected rates: " + old_new_charges);
			testSteps.add("Found: " + getValue);

			if (getValue.equals(String.format("%.2f", old_new_charges))) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					numberofDays, testSteps);

			reslogger.info("getRates: " + getRates);
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			if (!isProRateApplied && halfIntervals > 0) {
				fullIntervals = fullIntervals + 1;
			}
			reslogger.info("reservationElement.StartDate: " + reservationElement.StartDate.size());
			reslogger.info("new dates size: " + newDates.size());
			int totalSize = newDates.size() + OldRates.size();
			reslogger.info("totalSize: " + totalSize);
			if (totalSize != reservationElement.StartDate.size()) {
				testSteps.add("Failed: Interval date is not showing correctly");
			}
			for (int j = 0; j < oldDates.size(); j++) {
				rateList.add(OldRates.get(j));
				dates.add(oldDates.get(j));
			}

			for (int j = 0; j < oldPackageAmounts.size(); j++) {
				productRates.add(oldPackageAmounts.get(j));
			}

			productRates.add(String.valueOf(totalAmountForPackage));

			testSteps.add("Expected Package Amount : " + totalPackageAmount);

			String expectedPackageAmount = String.format("%.2f", totalPackageAmount);
			String foundPackageAmount = "";
			if (reservationElement.RatePerInterval.size() > 2) {
				foundPackageAmount = reservationElement.RatePerInterval.get(1).getText();
			} else {
				foundPackageAmount = reservationElement.RatePerInterval.get(0).getText();
			}
			testSteps.add("Found Package Amount : " + foundPackageAmount);
			if (expectedPackageAmount.equals(String.format("%.2f", foundPackageAmount))) {
				testSteps.add("Verified package amount is matching.");

			} else {
				testSteps.add("Failed : package amount is mismatching.");

			}

			for (int i = oldDates.size(); i < totalSize; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				testSteps.add("Expected date: " + dateInRequiredFormat);
				testSteps.add("Found: " + startDate);

				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					testSteps.add("Interval date are showing as per requirment");

				} else {
					testSteps.add("Failed: Interval date is mismatching in add and remove dates");
				}
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				// testSteps.add(dateInRequiredFormat + " " + folioName + " " + getAmount);
				temp++;
				double total = 0.00;
				if (i == 0) {
					// incrementCounter = 1;
				}

				if (isRoomChargesEqual.equalsIgnoreCase("yes") || isRoomChargesEqual.equalsIgnoreCase("no")) {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							total = getRates.get(0);
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = getRates.get(0);

						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;
	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsBasedOnPackageBaseOnNewAndOldDatesPerPersonPerInterval(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			ArrayList<String> ratesList, String totalRoomCharges, ArrayList<String> oldDates,
			ArrayList<String> OldRates, ArrayList<String> newDates, HashMap<String, String> productValue,
			ArrayList<String> oldPackageAmounts, String oldPackageAmount, ArrayList<String> testSteps)
			throws Exception {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		roomClassExpandElement.click();
		Wait.wait2Second();
		List<WebElement> getRateList = driver
				.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]"));

		reslogger.info("rateList1 size: " + getRateList.size());
		boolean isZero = true;

		for (int i = 1; i < getRateList.size(); i++) {

			String getRatePerInterval = getRateList.get(i).getText();
			String[] splitStr = getRatePerInterval.split("\\$");
			getRatePerInterval = splitStr[1].trim();
			if (getRatePerInterval.equals("0.00")) {
				isZero = false;
				break;
			}

		}

		reslogger.info("isZero: " + isZero);

		if (!isZero) {
			String bugId = "<a href='https://innroad.atlassian.net/browse/RATES-3850' target='_blank'>"
					+ "Failed: Rate is showing incorrect when updating stay details with change only for added dates for interval rateplan.<br>Click here for more info: RATES-3850</a>";
			testSteps.add("Failed: Click here for more info<br>");
		}

		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {
				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//						for (int i = 1; i < child_adults; i++) {
//							System.out.println("i: " + i);
//							child_adults = child_adults - 1;
//							System.out.println("total: " + child_adults);
//							System.out.println("max person: " + intMaxPerson);
//							if (child_adults == intMaxPerson) {
//								System.out.println("in total = max person");
//								count = i;
//								isTrue = true;
//								break;
//							}
//						}

					}

//					if (isTrue) {
//						childDifference = count;
//					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			int persons = Integer.parseInt(child) + Integer.parseInt(adults);
			double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * persons;
			double halfIntervalPackageAmount = 0.00;
			if (halfIntervals > 0) {
				halfIntervalPackageAmount = Double.parseDouble(productValue.get("amount")) * persons;
			}
			totalAmountForPackage = totalAmountForPackage + halfIntervalPackageAmount;
			String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
			reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);

			reslogger.info("old charges: " + totalRoomCharges);
			reslogger.info("new charges: " + intial);
			reslogger.info("old Package Amount : " + oldPackageAmount);
			reslogger.info("new Package Amount : " + totalAmountForPackage);
			double totalPackageAmount = Double.parseDouble(oldPackageAmount) + totalAmountForPackage;
			double old_new_charges = Double.parseDouble(totalRoomCharges) + intial;

			testSteps.add("Expected rates: " + old_new_charges);
			testSteps.add("Found: " + getValue);

			if (getValue.equals(String.format("%.2f", old_new_charges))) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					numberofDays, testSteps);

			reslogger.info("getRates: " + getRates);
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			if (!isProRateApplied && halfIntervals > 0) {
				fullIntervals = fullIntervals + 1;
			}
			reslogger.info("reservationElement.StartDate: " + reservationElement.StartDate.size());
			reslogger.info("new dates size: " + newDates.size());
			int totalSize = newDates.size() + OldRates.size();
			reslogger.info("totalSize: " + totalSize);
			if (totalSize != reservationElement.StartDate.size()) {
				testSteps.add("Failed: Interval date is not showing correctly");
			}
			for (int j = 0; j < oldDates.size(); j++) {
				rateList.add(OldRates.get(j));
				dates.add(oldDates.get(j));
			}

			for (int j = 0; j < oldPackageAmounts.size(); j++) {
				productRates.add(oldPackageAmounts.get(j));
			}

			productRates.add(String.valueOf(totalAmountForPackage));

			testSteps.add("Expected Package Amount : " + totalPackageAmount);

			String expectedPackageAmount = String.format("%.2f", totalPackageAmount);
			String foundPackageAmount = "";
			if (reservationElement.RatePerInterval.size() > 2) {
				foundPackageAmount = reservationElement.RatePerInterval.get(1).getText();
			} else {
				foundPackageAmount = reservationElement.RatePerInterval.get(0).getText();
			}
			testSteps.add("Found Package Amount : " + foundPackageAmount);
			if (expectedPackageAmount.equals(String.format("%.2f", foundPackageAmount))) {
				testSteps.add("Verified package amount is matching.");

			} else {
				testSteps.add("Failed : package amount is mismatching.");

			}

			for (int i = oldDates.size(); i < totalSize; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				testSteps.add("Expected date: " + dateInRequiredFormat);
				testSteps.add("Found: " + startDate);

				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					testSteps.add("Interval date are showing as per requirment");

				} else {
					testSteps.add("Failed: Interval date is mismatching in add and remove dates");
				}
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				// testSteps.add(dateInRequiredFormat + " " + folioName + " " + getAmount);
				temp++;
				double total = 0.00;
				if (i == 0) {
					// incrementCounter = 1;
				}

				if (isRoomChargesEqual.equalsIgnoreCase("yes") || isRoomChargesEqual.equalsIgnoreCase("no")) {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							total = getRates.get(0);
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = getRates.get(0);

						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;
	}

	public void select_Roomm(WebDriver driver, ArrayList test_steps, String RoomClass, String IsAssign, String Account)
			throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../div[2]/span";

		Wait.WaitForElement(driver, room);

		String rooms = driver.findElement(By.xpath(room)).getText();
		System.out.println(rooms);
		String[] roomsCount = rooms.split(" ");
		int count = Integer.parseInt(roomsCount[0].trim());
		if (count > 0) {
			String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
					+ "')]/../../../following-sibling::div/div/select";

			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass.trim() + "')]/following-sibling::span";
			System.out.println(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();
			WebElement ele = driver.findElement(By.xpath(sel));
			test_steps.add("Selected room class : " + RoomClass);
			reslogger.info("Selected room class : " + RoomClass);
			if (IsAssign.equalsIgnoreCase("No")) {
				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass
						+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
				Wait.WaitForElement(driver, unAssign);
				driver.findElement(By.xpath(unAssign)).click();
				test_steps.add("Selected room number : Unassigned");
				reslogger.info("Selected room number : Unassigned");
			} else {
				String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/option";
				System.out.println(roomnum);
				int count1 = driver.findElements(By.xpath(roomnum)).size();
				Random random = new Random();
				int randomNumber = random.nextInt(count1 - 1) + 1;
				System.out.println("count : " + count1);
				System.out.println("randomNumber : " + randomNumber);
				Wait.WaitForElement(driver, sel);

				String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
				Wait.WaitForElement(driver, expand);
				driver.findElement(By.xpath(expand)).click();

				String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ RoomClass + "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
						+ randomNumber + "]/a/span";
				Wait.WaitForElement(driver, roomNumber);
				driver.findElement(By.xpath(roomNumber)).click();
			}

			String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ RoomClass + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
			Wait.WaitForElement(driver, select);
			driver.findElement(By.xpath(select)).click();

			String loading = "(//div[@class='ir-loader-in'])[2]";
			int counter = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (counter == 50) {
					break;
				} else {
					counter++;
					Wait.wait2Second();
				}
			}
			System.out.println("Waited to loading symbol");

			System.out.println("Rule Count : " + ruleCount);
			if (ruleCount > 1) {
				Wait.wait5Second();
				String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";

				if (driver.findElements(By.xpath(rules)).size() > 0) {
					Wait.wait2Second();
					driver.findElement(By.xpath(rules)).click();
					test_steps.add(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
					reslogger.info(
							"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

					loading = "(//div[@class='ir-loader-in'])[2]";
					counter = 0;
					while (true) {
						if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
							break;
						} else if (counter == 4) {
							break;
						} else {
							counter++;
							Wait.wait2Second();
						}
					}
				}
			}
			if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
				String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
				Wait.WaitForElement(driver, policy);
				driver.findElement(By.xpath(policy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");

				loading = "(//div[@class='ir-loader-in'])[2]";
				counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
			}

		} else {
			test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
			reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
		}
	}

	public void verifyNoRoomClassesAvailable(WebDriver driver, ArrayList<String> testSteps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR.noRoomClassAvailable);
		Wait.waitForElementToBeVisibile(By.xpath(OR.noRoomClassAvailable), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR.noRoomClassAvailable), driver);
		Utility.ScrollToElement(res.noRoomClassAvailable, driver);
		assertTrue(res.noRoomClassAvailable.isDisplayed(), "Failed : No Room class message is not diplsaying");
		testSteps.add(
				"Verified 'Room Classes are not available for the search criteria. Please change the criteria and try again' is  displaying");
		reslogger.info(
				"Verified 'Room Classes are not available for the search criteria. Please change the criteria and try again' is  displaying");
	}

	public void verifyNoRateCombinationMessage(WebDriver driver, ArrayList<String> testSteps, boolean isDisplay)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait10Second();
		List<WebElement> noRoomAvailableList = driver.findElements(By.xpath(OR.noRateCombinationMessage));
		reslogger.info("noRoomAvailableList.size(): " + noRoomAvailableList.size());
		if (isDisplay) {
			assertTrue(noRoomAvailableList.size() > 0,
					"Failed : 'No rate combination can be found!' message is not displaying");
			testSteps.add("Verified 'No rate combination can be found!' is displaying");
			reslogger.info("Verified 'No rate combination can be found!' is displaying");

		} else {
			assertTrue(noRoomAvailableList.size() == 0,
					"Failed : 'No rate combination can be found!' message is displaying");
			testSteps.add("Verified 'No rate combination can be found!' is not displaying");
			reslogger.info("Verified 'No rate combination can be found!' is not displaying");
		}
	}

	public void verifyRoomClasses(WebDriver driver, ArrayList<String> testSteps, boolean isDisplay)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait10Second();
		List<WebElement> noRoomAvailableList = driver.findElements(By.xpath(OR.roomClassSection));
		if (isDisplay) {
			assertTrue(noRoomAvailableList.size() > 0, "Failed : Room classes is not displaying");
			testSteps.add("Verified room classes is displaying");
			reslogger.info("Verified room classes is displaying");

		} else {
			assertTrue(noRoomAvailableList.size() == 0, "Failed : No Room classes is displaying");
			testSteps.add("Verified room classes is not displaying");
			reslogger.info("Verified room classes is not displaying");
		}
	}

	public void clickStayInfoEditOptions(WebDriver driver, ArrayList<String> testSteps, int index) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String rateOptionPath = "(//input[@name='folio-option-radio-btn']//following-sibling::span)[" + index + "]";
		Wait.WaitForElement(driver, rateOptionPath);
		Wait.waitForElementToBeVisibile(By.xpath(rateOptionPath), driver);
		Wait.waitForElementToBeClickable(By.xpath(rateOptionPath), driver);
		WebElement rateOption = driver.findElement(By.xpath(rateOptionPath));
		Utility.clickThroughJavaScript(driver, rateOption);
		if (index == 1) {
			reslogger.info("Click 'Recalculate Rate' stay info edit section");
			testSteps.add("Click 'Recalculate Rate' stay info edit section");
		} else if (index == 2) {
			reslogger.info("Click 'Change only for added/removed dates' stay info edit section");
			testSteps.add("Click 'Change only for added/removed dates' stay info edit section");
		} else if (index == 3) {
			reslogger.info("Click 'No Rate Change' stay info edit section");
			testSteps.add("Click 'No Rate Change' stay info edit section");
		}

	}

	public void clickCloseStayInfo(WebDriver driver, ArrayList<String> testSteps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR.closeStayInfo);
		Wait.waitForElementToBeVisibile(By.xpath(OR.closeStayInfo), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR.closeStayInfo), driver);
		Utility.clickThroughJavaScript(driver, res.closeStayInfo);
		reslogger.info("Click close stay info edit section");
		testSteps.add("Click close stay info edit section");
	}

	public void clickCloseMrbStayInfo(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR.closeMrbStayInfo);
		Wait.waitForElementToBeVisibile(By.xpath(OR.closeMrbStayInfo), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR.closeMrbStayInfo), driver);
		Utility.ScrollToElement(res.closeMrbStayInfo, driver);
		Utility.clickThroughJavaScript(driver, res.closeMrbStayInfo);

		reslogger.info("Click close stay info edit section");
		testSteps.add("Click close stay info edit section");
	}

	public void verifyDeletedTaskInReservation(WebDriver driver, String TaskType, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_Reservation ReservationPage = new Elements_Reservation(driver);

		String path = "//span[text()='Tasks ']/../..//td//span[text()='" + TaskType.trim() + "']";
		boolean isExist = Utility.isElementPresent(driver, By.xpath(path));
		assertEquals(isExist, false, "Failed : TaskType Matched");
		reslogger.info("Verified Task Doesn't Exist :" + TaskType);
		test_steps.add("Verified Task Doesn't Exist :" + TaskType);
	}

	public ArrayList<String> updateTask(WebDriver driver, int taskIndex, String TaskStatus)
			throws InterruptedException {

		ArrayList<String> testSteps = new ArrayList<>();

		String taskPath = "(//tr[contains(@data-bind, 'UpdateTaskDetails')])[" + taskIndex + "]";

		Wait.WaitForElement(driver, taskPath);
		Wait.waitForElementToBeVisibile(By.xpath(taskPath), driver);
		Wait.waitForElementToBeClickable(By.xpath(taskPath), driver);
		WebElement taskToEdit = driver.findElement(By.xpath(taskPath));
		Utility.ScrollToElement(taskToEdit, driver);
		taskToEdit.click();
		testSteps.add("Opend Task at " + taskIndex + " index");
		reslogger.info("Opend Task at " + taskIndex + " index");

		String taskStatus = "(//label[text()='Status']/..//button)[2]";
		Wait.WaitForElement(driver, taskStatus);
		driver.findElement(By.xpath(taskStatus)).click();
		String status = "(//label[text()='Status']/..//button)[2]/following-sibling::div//li//span[text()='"
				+ TaskStatus.trim() + "']";
		Wait.WaitForElement(driver, status);
		driver.findElement(By.xpath(status)).click();
		testSteps.add("Select Task Status : " + TaskStatus);
		reslogger.info("Select Task Status : " + TaskStatus);

		String save = "//h4[text()='Edit Task']/../..//button[text()='Save']";
		Wait.WaitForElement(driver, save);
		driver.findElement(By.xpath(save)).click();
		testSteps.add("Click on Save");
		reslogger.info("Click on Save");

		String stat = "//span[text()='Tasks ']/../..//td[contains(text(),'" + TaskStatus.trim() + "')]";
		Wait.WaitForElement(driver, stat);
		testSteps.add("Verified task status updated : " + TaskStatus);
		reslogger.info("Verified task status updated : " + TaskStatus);

		return testSteps;
	}

	public ArrayList<String> enterTask(WebDriver driver, String IsTask, String TaskCategory, String TaskType,
			String TaskDetails, String TaskRemarks, String TaskDueon, String TaskAssignee, String TaskStatus)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddTask);
		ArrayList test_steps = new ArrayList<>();
		test_steps.add("===== Adding Task =====");
		reslogger.info("===== Adding Task =====");
		if (IsTask.equalsIgnoreCase("Yes")) {
			res.CP_AddTask.click();
			test_steps.add("Click on Add Task");
			reslogger.info("Click on Add Task");

			String taskCategoryArrow = "//label[text()='Category']/..//button";
			Wait.WaitForElement(driver, taskCategoryArrow);
			driver.findElement(By.xpath(taskCategoryArrow)).click();

			String taskCategory = "//label[text()='Category']/..//div/ul//span[text()='" + TaskCategory.trim() + "']";
			Wait.WaitForElement(driver, taskCategory);
			driver.findElement(By.xpath(taskCategory)).click();
			test_steps.add("Select Task Category : " + TaskCategory);
			reslogger.info("Select Task Category : " + TaskCategory);

			String taskType = "";
			try {
				taskType = "(//label[text()='Type']/..//button)[1]";
				Wait.WaitForElement(driver, taskType);
				driver.findElement(By.xpath(taskType)).click();

			} catch (Exception e) {
				taskType = "(//label[text()='Type']/..//button)[2]";
				Wait.WaitForElement(driver, taskType);
				driver.findElement(By.xpath(taskType)).click();

			}

			Wait.wait2Second();
			taskType = "(//label[text()='Type']//..//ul//span[text()='" + TaskType.trim() + "'])[1]";
			Wait.WaitForElement(driver, taskType);
			driver.findElement(By.xpath(taskType)).click();
			test_steps.add("Select Task Type : " + TaskType);
			reslogger.info("Select Task Type : " + TaskType);

			String taskDetails = "//label[text()='Details']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, taskDetails);
			driver.findElement(By.xpath(taskDetails)).sendKeys(TaskDetails);
			test_steps.add("Select Task Details : " + TaskDetails);
			reslogger.info("Select Task Details : " + TaskDetails);

			String taskRemarks = "//label[text()='Remarks']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, taskRemarks);
			driver.findElement(By.xpath(taskRemarks)).sendKeys(TaskRemarks);
			test_steps.add("Enter Task Remarks : " + TaskRemarks);
			reslogger.info("Enter Task Remarks : " + TaskRemarks);

			String dueCalender = "//label[text()='Due On']/..//i";
			Wait.WaitForElement(driver, dueCalender);
			driver.findElement(By.xpath(dueCalender)).click();
			String monthYear = Utility.get_MonthYear(TaskDueon);
			String day = Utility.getDay(TaskDueon);
			reslogger.info(monthYear);
			String header = null, headerText = null, next = null, date;
			for (int i = 1; i <= 12; i++) {
				header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
				headerText = driver.findElement(By.xpath(header)).getText();
				if (headerText.equalsIgnoreCase(monthYear)) {
					date = "//td[contains(@class,'day') and text()='" + day + "']";
					Wait.WaitForElement(driver, date);
					int size = driver.findElements(By.xpath(date)).size();
					for (int k = 1; k <= size; k++) {
						date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + k + "]";
						String classText = driver.findElement(By.xpath(date)).getAttribute("class");
						if (!classText.contains("old")) {
							driver.findElement(By.xpath(date)).click();
							test_steps.add("Selecting due on date : " + TaskDueon);
							reslogger.info("Selecting due on date : " + TaskDueon);
							break;
						}
					}
					break;
				} else {
					next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
					Wait.WaitForElement(driver, next);
					driver.findElement(By.xpath(next)).click();
					Wait.wait2Second();
				}
			}

			String taskAssignee = "//label[text()='Assignee']/..//input";
			Wait.WaitForElement(driver, taskAssignee);
			driver.findElement(By.xpath(taskAssignee)).sendKeys(TaskAssignee);
			Wait.wait2Second();
			String taskassgin = "//label[text()='Assignee']/..//div/ul/li/div";
			Wait.WaitForElement(driver, taskassgin);
			driver.findElement(By.xpath(taskassgin)).click();
			test_steps.add("Enter Task Assignee : " + TaskAssignee);
			reslogger.info("Enter Task Assignee : " + TaskAssignee);

			String taskStatus = "(//label[text()='Status']/..//button)[2]";
			Wait.WaitForElement(driver, taskStatus);
			driver.findElement(By.xpath(taskStatus)).click();
			String status = "(//label[text()='Status']/..//button)[2]/following-sibling::div//li//span[text()='"
					+ TaskStatus.trim() + "']";
			Wait.WaitForElement(driver, status);
			driver.findElement(By.xpath(status)).click();
			test_steps.add("Select Task Status : " + TaskStatus);
			reslogger.info("Select Task Status : " + TaskStatus);

			String save = "//h4[text()='Add Task']/../..//button[text()='Save']";
			Wait.WaitForElement(driver, save);
			driver.findElement(By.xpath(save)).click();
			test_steps.add("Click on Save");
			reslogger.info("Click on Save");

			String taskVerify = "//span[text()='Tasks ']/../..//td//span[text()='" + TaskType.trim() + "']";
			Wait.WaitForElement(driver, taskVerify);
			test_steps.add("Sucessfully added Task : " + TaskType);
			reslogger.info("Sucessfully added Task : " + TaskType);

			test_steps.add("Verified Task Type : " + TaskType);
			reslogger.info("Verified Task Type : " + TaskType);

			test_steps.add("Verified Task Type : " + TaskType);
			reslogger.info("Verified Task Type : " + TaskType);

			taskDetails = "//span[text()='Tasks ']/../..//td[text()='" + TaskDetails.trim() + "']";
			Wait.WaitForElement(driver, taskDetails);
			test_steps.add("Verified Task details : " + TaskDetails);
			reslogger.info("Verified Task details : " + TaskDetails);

			String[] taskdue = TaskDueon.split("/");
			String due = "//span[text()='Tasks ']/../..//td[contains(text(),'" + taskdue[1] + "/" + taskdue[0] + "')]";
			Wait.WaitForElement(driver, due);
			test_steps.add("Verified Task due on : " + TaskDueon);
			reslogger.info("Verified Task due on : " + TaskDueon);

			String stat = "//span[text()='Tasks ']/../..//td[contains(text(),'" + TaskStatus.trim() + "')]";
			Wait.WaitForElement(driver, stat);
			test_steps.add("Verified Tsak Status : " + TaskStatus);
			reslogger.info("Verified Task Status : " + TaskStatus);

		}

		return test_steps;
	}

	public ArrayList<String> verifyReportContent(String reportData, String dataToVerify) {
		ArrayList testSteps = new ArrayList<>();

		// assertTrue(reportData.contains(dataToVerify), "Failed : Report didn't
		// contains '"+ dataToVerify +"'");
		if (reportData.contains(dataToVerify)) {
			testSteps.add("Verified (" + dataToVerify + ") in report");
			reslogger.info("Verified (" + dataToVerify + ") in report");

		} else {
			// assertTrue(false, "Failed : '"+ dataToVerify +"' didn't found in report");
			testSteps.add("Failed : '" + dataToVerify + "' didn't found in report");
			reslogger.info("Failed : '" + dataToVerify + "' didn't found in report");
		}
		return testSteps;

	}

	public ArrayList<String> verifyTaskIconColour(WebDriver driver, boolean isBlueIconDisplay)
			throws InterruptedException {

		ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation cpReservation = new Elements_CPReservation(driver);
		if (isBlueIconDisplay) {
			Wait.WaitForElement(driver, OR_Reservation.ngExclamationMarkB);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ngExclamationMarkB), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ngExclamationMarkB), driver);
			cpReservation.ngExclamationMarkB.getAttribute("style");
			assertTrue(cpReservation.ngExclamationMarkB.isDisplayed(), "Failed : Task icon colour is not blue");
			reslogger.info("Verified that task icon with blue colour is displaying");
			testSteps.add("Verified that task icon with blue colour is displaying");

		} else {

			Wait.WaitForElement(driver, OR_Reservation.ngExclamationMark);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ngExclamationMark), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ngExclamationMark), driver);
			cpReservation.ngExclamationMark.click();
			assertTrue(cpReservation.ngExclamationMark.isDisplayed(), "Failed : Task icon colour is not transparent");
			reslogger.info("Verified that task icon with transparent colour is displaying");
			testSteps.add("Verified that task icon with transparent colour is displaying");
		}

		return testSteps;
	}

//	
//	public void intervalRateVerificationAfterStayDetailsNoRateChange(WebDriver driver, String roomClass,
//			String expectedAmount, String avergerPerNight, ArrayList<String> testSteps)
//			throws InterruptedException, NumberFormatException, ParseException {
//
//		Elements_CPReservation res = new Elements_CPReservation(driver);
//		ArrayList<String> rateList = new ArrayList<>();
//
//		String totalRateValue = "//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";
//
//		String avgPerNight = "//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
//		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";
//
//		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
//		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
//
//		WebElement totalRateValueElement = null;
//		WebElement roomClassExpandElement = null;
//		WebElement averagePerNightElement = null;
//
//		Wait.WaitForElement(driver, avgPerNight);
//		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
//		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
//		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));
//
//		try {
//			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
//			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
//		} catch (Exception e) {
//			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
//			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));
//
//		}
//
//		String getTotalRate = totalRateValueElement.getText();
//		String getAvgPerNight = averagePerNightElement.getText();
//
//		String[] split = getTotalRate.split("\\$");
//		getTotalRate = split[1];
//
//		split = getAvgPerNight.split("\\$");
//		getAvgPerNight = split[1];
//
//		testSteps.add("Expected total rate: " + expectedAmount);
//		testSteps.add("Found: " + getTotalRate);
//
//		reslogger.info("Expected total rate: " + expectedAmount);
//		reslogger.info("Found: " + getTotalRate);
//
//		assertEquals(getTotalRate, expectedAmount, "Failed: total rate value is mismatching!");
//		testSteps.add("Verified total rate after perform no rate change");
//
//		// double convertStrIntodb = Double.parseDouble(getAvgPerNight);
//		// getAvgPerNight = String.format("%.2f", convertStrIntodb);
//		// testSteps.add("Expected averger per night: "+avergerPerNight);
//		// testSteps.add("Found: "+getAvgPerNight);
//		//
//		// reslogger.info("Expected averger per night: "+avergerPerNight);
//		// reslogger.info("Found: "+getAvgPerNight);
//		//
//		// assertEquals(getAvgPerNight, avergerPerNight,"Failed: averger per
//		// night is mismatching!");
//		// testSteps.add("Verified averger per night after perform no rate
//		// change");
//
//	}
//
//	public HashMap<String, ArrayList<String>> intervalRateVerificationAfterStayDetailsForDateChanged(WebDriver driver,
//			String dateFormat, String checkInDate, String checkOutDate, String adults, String child, String roomClass,
//			String intervalLength,
//
//			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
//			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
//			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
//			String proRateAdditionalChildCharges, ArrayList<String> testSteps)
//			throws InterruptedException, NumberFormatException, ParseException {
//
//		ArrayList<String> rateList = new ArrayList<>();
//		ArrayList<String> dates = new ArrayList<>();
//		ArrayList<String> status = new ArrayList<>();
//
//		double pro_rate = Double.parseDouble(proRatePerNight);
//		double base_amount = Double.parseDouble(baseAmount);
//		String isEqual = "no";
//
//		// Number of Days
//		int numberofDays = Integer
//				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, dateFormat),
//						Utility.parseDate(checkOutDate, dateFormat, dateFormat)));
//
//		String rateApplied = "";
//
//		int fullIntervals = 0;
//		int halfIntervals = 0;
//		reslogger.info("numberofDays: " + numberofDays);
//		if (numberofDays >= (Integer.parseInt(intervalLength))) {
//			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
//			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
//		}
//		System.out.println("Full Interval:" + fullIntervals);
//		System.out.println("Half Interval:" + halfIntervals);
//
//		testSteps.add("Interval lenght: " + intervalLength);
//		testSteps.add("Number of nights: " + numberofDays);
//		testSteps.add("Full interval: " + fullIntervals);
//		testSteps.add("Half interval: " + halfIntervals);
//
//		int interval = Integer.parseInt(intervalLength);
//		testSteps.add("");
//
//		String totalRateValue = "//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";
//
//		String avgPerNight = "//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
//		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";
//
//		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
//		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
//				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
//
//		WebElement totalRateValueElement = null;
//		WebElement roomClassExpandElement = null;
//		WebElement averagePerNightElement = null;
//
//		Wait.WaitForElement(driver, avgPerNight);
//		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
//		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
//		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));
//
//		try {
//			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
//			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
//		} catch (Exception e) {
//			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
//			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));
//
//		}
//
//		roomClassExpandElement.click();
//		Wait.wait2Second();
//		List<WebElement> rateList1 = driver
//				.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]"));
//
//		reslogger.info("rateList1 size: " + rateList1.size());
//		boolean isZero = true;
//
//		for (int i = 1; i < rateList1.size(); i++) {
//
//			String getRatePerInterval = rateList1.get(i).getText();
//			String[] splitStr = getRatePerInterval.split("\\$");
//			getRatePerInterval = splitStr[1].trim();
//			if (getRatePerInterval.equals("0.00")) {
//				isZero = false;
//				break;
//			}
//
//		}
//
//		reslogger.info("isZero: " + isZero);
//		if (!isZero) {
//			String bugId = "<a href='https://innroad.atlassian.net/browse/RATES-3850' target='_blank'>"
//					+ "Failed: Rate is showing incorrect when updating stay details with change only for added dates for interval rateplan.<br>Click here for more info: RATES-3850</a>";
//			testSteps.add("Failed: Click here for more info<br>");
//		} else {
//
//			String averagePerNight = "";
//			Double getFull = 0.00;
//			Double getHalf = 0.00;
//
//			reslogger.info("baseAmount: " + baseAmount);
//			double intial = 0;
//
//			if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
//				if (!isProRateApplied && !isAdditionalChargesApplied) {
//
//					if (fullIntervals == 0) {
//
//						intial = base_amount;
//						getFull = intial;
//
//					}
//
//					else if (fullIntervals > 0 && halfIntervals == 0) {
//
//						intial = base_amount * fullIntervals;
//						getFull = base_amount;
//
//					} else {
//
//						int total = fullIntervals + 1;
//						intial = base_amount * total;
//						getFull = base_amount;
//
//					}
//					reslogger.info("Calculated Rate:" + intial);
//
//				}
//				if (isProRateApplied && !isAdditionalChargesApplied) {
//
//					System.out.println("**********************************Second if:");
//					reslogger.info("======Pro stay only =======");
//
//					if (fullIntervals == 0) {
//
//						intial = base_amount;
//						getFull = base_amount;
//
//					} else if (fullIntervals > 0 && halfIntervals == 0) {
//
//						intial = base_amount * fullIntervals;
//						getFull = base_amount;
//					}
//
//					else {
//
//						double total_fullAmount = base_amount * fullIntervals;
//						reslogger.info("total_fullAmount: " + total_fullAmount);
//						getFull = base_amount;
//
//						double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
//						reslogger.info("total_halfAmount: " + total_halfAmount);
//						intial = total_fullAmount + total_halfAmount;
//						getHalf = Double.parseDouble(proRatePerNight);
//					}
//
//					reslogger.info("Calculated Rate:" + intial);
//
//				}
//
//				System.out.println("Number of Days:" + numberofDays);
//				System.out.println("intervalLength:" + intervalLength);
//				System.out.println("fullIntervals:" + fullIntervals);
//				System.out.println("half:" + halfIntervals);
//				int adultDifference = 0;
//				int childDifference = 0;
//				int personDifference = 0;
//
//				reslogger.info("child: " + child);
//				reslogger.info("adults: " + adults);
//				int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
//				reslogger.info("child_adults" + child_adults);
//
//				// if Additional Charges Applied ANd ProRate False
//				if (isAdditionalChargesApplied && !isProRateApplied) {
//					System.out.println("**********************************Third if:");
//
//					if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
//						if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
//							adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
//
//						child_adults = child_adults - adultDifference;
//						int count = 0;
//						boolean isTrue = false;
//						System.out.println("child_adults: " + child_adults);
//						int intMaxPerson = Integer.parseInt(maxPerson);
//						if (child_adults > intMaxPerson) {
//							System.out.println("child is also diff");
//							for (int i = 1; i < child_adults; i++) {
//								System.out.println("i: " + i);
//								child_adults = child_adults - 1;
//								System.out.println("total: " + child_adults);
//								System.out.println("max person: " + intMaxPerson);
//								if (child_adults == intMaxPerson) {
//									System.out.println("in total = max person");
//									count = i;
//									isTrue = true;
//									break;
//								}
//							}
//
//						}
//
//						if (isTrue) {
//							childDifference = count;
//						}
//						System.out.println("Additonal Adult:" + adultDifference);
//						System.out.println("Additonal Child:" + childDifference);
//
//						if (fullIntervals == 0) {
//
//							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//							getFull = intial;
//
//						}
//
//						else if (fullIntervals > 0 && halfIntervals == 0) {
//
//							double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//
//							getFull = one;
//							reslogger.info("one: " + one);
//							intial = one * fullIntervals;
//
//						} else {
//
//							int total = fullIntervals + 1;
//							double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//
//							reslogger.info("one: " + one);
//							intial = one * total;
//							getFull = one;
//
//						}
//						reslogger.info("expected rate: " + intial);
//
//					}
//
//				}
//				// if Additional Charges Applied And ProRate True
//				if (isAdditionalChargesApplied && isProRateApplied) {
//					System.out.println("**********************************4th if:");
//
//					if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
//							|| numberofDays < (Integer.parseInt(intervalLength))) {
//
//						if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
//							adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
//
//						child_adults = child_adults - adultDifference;
//						// 5
//						int count = 0;
//						boolean isTrue = false;
//						System.out.println("child_adults: " + child_adults);
//						int intMaxPerson = Integer.parseInt(maxPerson);
//						if (child_adults > intMaxPerson) {
//							System.out.println("child is also diff");
//							for (int i = 1; i < child_adults; i++) {
//								System.out.println("i: " + i);
//								child_adults = child_adults - 1;
//								System.out.println("total: " + child_adults);
//								System.out.println("max person: " + intMaxPerson);
//								if (child_adults == intMaxPerson) {
//									System.out.println("in total = max person");
//									count = i;
//									isTrue = true;
//									break;
//								}
//							}
//						}
//
//						if (isTrue) {
//							childDifference = count;
//						}
//
//						System.out.println("Additonal Adult:" + adultDifference);
//						System.out.println("Additonal Child:" + childDifference);
//
//						testSteps.add("Additonal Adult:" + adultDifference);
//						testSteps.add("Additonal Child:" + childDifference);
//
//						if (adultDifference > 0 || childDifference > 0) {
//
//							if (fullIntervals > 0 && halfIntervals > 0) {
//								//
//								reslogger.info("apply half and ful both");
//								double fullamount = base_amount
//										+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//										+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//
//								getFull = fullamount;
//								fullamount = fullIntervals * fullamount;
//
//								double half_amount = Double.parseDouble(proRatePerNight)
//										+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
//										+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));
//
//								getHalf = half_amount;
//
//								half_amount = half_amount * halfIntervals;
//								reslogger.info("fullamount: " + fullamount);
//								reslogger.info("half_amount: " + half_amount);
//
//								intial = fullamount + half_amount;
//								reslogger.info(intial);
//
//							}
//
//							if (fullIntervals > 0 && halfIntervals == 0) {
//								reslogger.info("apply full both");
//
//								intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//										+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//								getFull = intial;
//								intial = intial * fullIntervals;
//								reslogger.info(intial);
//
//							}
//
//							if (fullIntervals == 0) {
//
//								intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//										+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//								getFull = intial;
//								reslogger.info(intial);
//
//							}
//						} else {
//							if (fullIntervals == 0) {
//								intial = base_amount;
//								getFull = intial;
//							}
//							if (fullIntervals > 0 && halfIntervals > 0) {
//
//								double full = fullIntervals * base_amount;
//								reslogger.info(full);
//								getFull = full;
//								double half = halfIntervals * Double.parseDouble(proRatePerNight);
//								getHalf = half;
//								reslogger.info(half);
//								intial = full + half;
//								reslogger.info(intial);
//
//							}
//
//							if (fullIntervals > 0 && halfIntervals == 0) {
//								getFull = base_amount;
//								intial = fullIntervals * base_amount;
//								reslogger.info(intial);
//
//							}
//
//						}
//
//					}
//
//				}
//				String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
//				rateApplied = String.format("%.2f", intial);
//				reslogger.info("convert: " + getValue);
//				reslogger.info("rateApplied: " + rateApplied);
//
//				testSteps.add("Expected rates: " + rateApplied);
//				testSteps.add("Found: " + intial);
//				if (getValue.equals(rateApplied)) {
//					isEqual = "yes";
//
//				} else {
//					isEqual = "no";
//
//				}
//
//				testSteps.add("Verified interval rate value");
//
//				averagePerNight = String.format("%.1f",
//						(Double.parseDouble(Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText())))
//								/ numberofDays);
//
//				if (numberofDays > interval) {
//
//					double getText = Double.parseDouble(
//							Utility.RemoveDollarandSpaces(driver, averagePerNightElement.getText().split(" ")[3]));
//					String getAvg = String.format("%.1f", getText);
//					reslogger.info("getAvg: " + getAvg);
//					// assertEquals(
//					// String.format("%.1f",
//					// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
//					// averagePerNightElement.getText().split(" ")[3])))),
//					// averagePerNight, "Failed: rate didn't match");
//					//
//					if (getAvg.equals(averagePerNight)) {
//						reslogger.info("Avg per night showing as expected");
//						testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
//
//					} else {
//						reslogger.info("Bug added here: ");
//
//					}
//				} else {
//					testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + baseAmount);
//
//				}
//
//				// roomClassExpandElement.click();
//				String requiredDateFormat = "MMM dd yyyy";
//
//				// getting amounts for each date
//				Double amountInDouble = 0.0;
//				int fullIntervalCount = 0;
//				String timeZone = "US/Eastern";
//				int temp = 0;
//				int incrementCounter = 0;
//				int rateListLength = driver
//						.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]")).size();
//
//				ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate,
//						adults, child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
//						isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
//						isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
//						testSteps);
//				for (int i = 1; i < rateListLength; i++) {
//
//					String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter,
//							timeZone);
//					dates.add(getDate);
//
//					String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
//					reslogger.info(dateInRequiredFormat);
//					String getRate = "//td[text()='" + dateInRequiredFormat
//							+ "']//following-sibling::td[contains(@data-bind, 'showInnroadCurrency: { value:')]";
//					Wait.WaitForElement(driver, getRate);
//					Wait.waitForElementToBeVisibile(By.xpath(getRate), driver);
//					Wait.waitForElementToBeClickable(By.xpath(getRate), driver);
//					WebElement getRateElement = driver.findElement(By.xpath(getRate));
//					Utility.ScrollToElement_NoWait(getRateElement, driver);
//					String getAmount = getRateElement.getText();
//
//					amountInDouble = amountInDouble
//							+ Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));
//
//					// If proRate/Additional Charges off
//
//					reslogger.info("Amount for date(" + dateInRequiredFormat + ") is " + getAmount);
//					testSteps.add("Amount for date(" + dateInRequiredFormat + ") is " + getAmount);
//					temp++;
//					double total = 0.00;
//
//					if (temp > fullIntervals) {
//
//						incrementCounter = interval * fullIntervals + 1;
//						reslogger.info(getRates.get(0));
//						reslogger.info(getRates.get(1));
//
//						if (isProRateApplied) {
//							if (halfIntervals == 0) {
//								total = getRates.get(0);
//							} else {
//								total = getRates.get(1);
//							}
//						} else {
//							total = getRates.get(0);
//						}
//						reslogger.info("total: " + total);
//
//					}
//
//					else {
//
//						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
//						reslogger.info(getRates.get(0));
//						reslogger.info(getRates.get(1));
//						total = getRates.get(0);
//						reslogger.info("total: " + total);
//
//					}
//					// rateList.add(rateApplied);
//					rateList.add(Utility.RemoveDollarandSpaces(driver, String.format("%.2f", total)));
//
//				}
//			}
//
//		}
//		status.add(isEqual);
//		HashMap<String, ArrayList<String>> mapList = new HashMap<>();
//		mapList.put("dates", dates);
//		mapList.put("status", status);
//		mapList.put("rates", rateList);
//		return mapList;
//
//	}
//
//	public ArrayList<Double> intervalRateCalculation(WebDriver driver, String dateFormat, String checkInDate,
//			String checkOutDate, String adults, String child, String roomClass, String intervalLength,
//			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
//			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
//			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
//			String proRateAdditionalChildCharges, ArrayList<String> testSteps)
//			throws InterruptedException, NumberFormatException, ParseException {
//
//		Elements_CPReservation res = new Elements_CPReservation(driver);
//		ArrayList<Double> rateList = new ArrayList<>();
//
//		double pro_rate = Double.parseDouble(proRatePerNight);
//		double base_amount = Double.parseDouble(baseAmount);
//
//		int numberofDays = Integer
//				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
//						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));
//
//		int fullIntervals = 0;
//		int halfIntervals = 0;
//		if (numberofDays >= (Integer.parseInt(intervalLength))) {
//			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
//			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
//		}
//
//		testSteps.add("Interval lenght: " + intervalLength);
//		testSteps.add("Number of nights: " + numberofDays);
//		testSteps.add("Full interval: " + fullIntervals);
//		testSteps.add("Half interval: " + halfIntervals);
//
//		int interval = Integer.parseInt(intervalLength);
//
//		double intial = 0;
//		double fullIntervalAmount = 0.00;
//		double perNightAmount = 0.00;
//
//		int adultDifference = 0;
//		int childDifference = 0;
//		int personDifference = 0;
//
//		if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
//			adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
//		int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
//		child_adults = child_adults - adultDifference;
//		int count = 0;
//		boolean isTrue = false;
//		int intMaxPerson = Integer.parseInt(maxPerson);
//		if (child_adults > intMaxPerson) {
//			System.out.println("child is also diff");
//			for (int i = 1; i < child_adults; i++) {
//				child_adults = child_adults - 1;
//				if (child_adults == intMaxPerson) {
//					count = i;
//					isTrue = true;
//					break;
//				}
//			}
//
//		}
//
//		if (isTrue) {
//			childDifference = count;
//		}
//		System.out.println("Additonal Adult:" + adultDifference);
//		System.out.println("Additonal Child:" + childDifference);
//
//		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
//			if (!isProRateApplied && !isAdditionalChargesApplied) {
//
//				if (fullIntervals == 0) {
//
//					fullIntervalAmount = base_amount;
//				}
//
//				else if (fullIntervals > 0 && halfIntervals == 0) {
//
//					fullIntervalAmount = base_amount;
//
//				} else {
//					fullIntervalAmount = base_amount;
//				}
//
//			}
//			if (isProRateApplied && !isAdditionalChargesApplied) {
//
//				if (fullIntervals == 0) {
//
//					fullIntervalAmount = base_amount;
//
//				} else if (fullIntervals > 0 && halfIntervals == 0) {
//
//					fullIntervalAmount = base_amount;
//				}
//
//				else {
//
//					fullIntervalAmount = base_amount;
//					perNightAmount = Double.parseDouble(proRatePerNight);
//				}
//			}
//
//			// if Additional Charges Applied ANd ProRate False
//			if (isAdditionalChargesApplied && !isProRateApplied) {
//
//				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
//
//					if (fullIntervals == 0) {
//
//						fullIntervalAmount = base_amount
//								+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//								+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//					}
//
//					else if (fullIntervals > 0 && halfIntervals == 0) {
//
//						fullIntervalAmount = base_amount
//								+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//								+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//
//					} else {
//
//						fullIntervalAmount = base_amount
//								+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//								+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//
//					}
//					reslogger.info("expected rate: " + intial);
//
//				}
//
//			}
//			if (isAdditionalChargesApplied && isProRateApplied) {
//
//				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
//						|| numberofDays < (Integer.parseInt(intervalLength))) {
//
//					if (adultDifference > 0 || childDifference > 0) {
//
//						if (fullIntervals > 0 && halfIntervals > 0) {
//							fullIntervalAmount = base_amount
//									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//
//							perNightAmount = Double.parseDouble(proRatePerNight)
//									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
//									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));
//
//						}
//
//						if (fullIntervals > 0 && halfIntervals == 0) {
//
//							fullIntervalAmount = base_amount
//									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//						}
//
//						if (fullIntervals == 0) {
//
//							fullIntervalAmount = base_amount
//									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
//									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
//
//						}
//					} else {
//						if (fullIntervals == 0) {
//							fullIntervalAmount = base_amount;
//						}
//						if (fullIntervals > 0 && halfIntervals > 0) {
//
//							fullIntervalAmount = base_amount;
//							perNightAmount = Double.parseDouble(proRatePerNight);
//						}
//
//						if (fullIntervals > 0 && halfIntervals == 0) {
//							fullIntervalAmount = fullIntervals * base_amount;
//
//						}
//
//					}
//
//				}
//
//			}
//		}
//		rateList.add(fullIntervalAmount);
//		rateList.add(perNightAmount);
//		return rateList;
//	}

	// Added By Adhnan Ghaffar 11/11/2020
	public String getReserationCancellationPolicy(WebDriver driver) throws ParseException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.cancelPolicyCollapseInDetailsTab), driver, 20);
		res.cancelPolicyCollapseInDetailsTab.click();

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.cancelPolicyNameInDetailsTab), driver);
		String cancelPolicyName = res.cancelPolicyNameInDetailsTab.getText();

		return cancelPolicyName;

	}

	// Added By Adhnan Ghaffar 11/11/2020
	public String getReserationPolicy(WebDriver driver, String policyType) throws ParseException {

		if (policyType.equals("Deposit")) {
			return getReservationDepositPolicy(driver);
		} else if (policyType.equals("No Show")) {
			return getReservationNoShowPolicy(driver);
		} else if (policyType.equals("Cancellation")) {
			return getReserationCancellationPolicy(driver);
		} else if (policyType.equals("Check-in")) {
			return getReservationCheckInPolicy(driver);
		}
		return null;
	}

	public void clickOnOpenedReservationTab(WebDriver driver, String guestName) {
		if (guestName.length() > 7) {
			guestName = guestName.substring(0, 7);
		}
		driver.findElement(
				By.xpath("//span[contains(@data-bind,'trimText: ValueText') and contains(text(),'" + guestName + "')]"))
				.click();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_Reservation_PanelGuestProfileName), driver);
	}

	public void clickCloseButtonOfCheckInAllWindow(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkIn_CloseButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.checkIn_CloseButton), driver, 10);
		Utility.ScrollToElement(res.checkIn_CloseButton, driver);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", res.checkIn_CloseButton);
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
	}

	public void clickCloseButtonOfNoShowSuccessfullyWithoutPayment(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.noShowCloseButtonWithoutPayment);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.noShowCloseButtonWithoutPayment), driver, 10);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", res.noShowCloseButtonWithoutPayment);
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
	}

	public void clickManualEmail(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		verifySpinerLoading(driver);
		Elements_Reservation ReservationPage = new Elements_Reservation(driver);
		Wait.explicit_wait_visibilityof_webelement(ReservationPage.Click_Email_icon, driver);
		Utility.ScrollToElement(ReservationPage.Click_Email_icon, driver);
		ReservationPage.Click_Email_icon.click();
		Utility.app_logs.info("Click Mail Icon");
		Wait.explicit_wait_xpath(OR.Verify_Send_Email_Popup, driver);
		Wait.explicit_wait_absenceofelement(OR.Verify_loading_popup_mailContentPopUp, driver);
		Wait.wait3Second();
	}

	public void sendManualEmail(WebDriver driver, ArrayList<String> test_steps) {
		Elements_Reservation ReservationPage = new Elements_Reservation(driver);
		ReservationPage.Click_Send_Email.click();
	}

	public String getManualEmailEditorText(WebDriver driver, ArrayList<String> test_steps) {
		String content = "";
		driver.switchTo().frame(driver.findElement(By.xpath("//iframe[contains(@title,'Rich Text Editor')]")));
		try {
			String locator = "//body/div[last()]|//body";
			Wait.WaitForElement(driver, locator);
			WebElement element = driver.findElement(By.xpath(locator));
			JavascriptExecutor executor = (JavascriptExecutor) driver;
			content = (String) executor.executeScript("return arguments[0].innerHTML", element);
		} catch (Exception e) {

		}
		driver.switchTo().defaultContent();
		return content;
	}

	public void verifyManualEmailDefaultBodyIsSelected(WebDriver driver, ArrayList<String> test_steps,
			String bodyText) {
		String locator = "//span[text()='New Email']/parent::a/parent::li[contains(@class, 'selected')]";
		if (Utility.isElementDisplayed(driver, By.xpath(locator))) {

		} else {

		}
	}

	public void verifyManualEmailBodySortOrder(WebDriver driver, ArrayList<String> test_steps,
			ArrayList<String> bodyList) {
		String locator = "";
		Wait.WaitForElement(driver, locator);
		Wait.waitForElementToBeVisibile(By.xpath(locator), driver);
		Wait.waitForElementToBeClickable(By.xpath(locator), driver);
		List<WebElement> elements = driver.findElements(By.xpath(locator));
		if (elements.size() == bodyList.size()) {
			for (int i = 0; i < bodyList.size(); i++) {
				if (bodyList.get(i).equals(elements.get(i))) {

				} else {
					test_steps.add("https://innroad.atlassian.net/browse/NG-8812#icft=NG-8812");
				}
			}
		} else {

		}
	}

	public boolean isRatePlanPresent(WebDriver driver, String ratePlanName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Rateplan);
		res.CP_NewReservation_Rateplan.click();
		String rate = "//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[text()='"
				+ ratePlanName + "']";

		boolean ispresent = false;
		try {
			driver.findElement(By.xpath(rate)).click();
			ispresent = true;
		} catch (Exception e) {
			ispresent = false;
		}
		return ispresent;
	}

	public void clickOnEditReservation(WebDriver driver) {
		Elements_CPReservation cpReservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ClickOnEditReservationIcon);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ClickOnEditReservationIcon), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ClickOnEditReservationIcon), driver);
		cpReservation.ClickOnEditReservationIcon.click();
	}

	public boolean clickSaveButton(WebDriver driver) {
		// Click Save Button
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean isButtonEnabled = false;
		try {

			Wait.explicit_wait_visibilityof_webelement(res.CP_SaveRoomNo, driver);
			Utility.ScrollToElement(res.CP_SaveRoomNo, driver);
			isButtonEnabled = res.CP_SaveRoomNo.isEnabled();
			reslogger.info("isButtonEnabled: " + isButtonEnabled);
			res.CP_SaveRoomNo.click();
			reslogger.info("Clicking Save Button");
		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			reslogger.info("Fail to Click on Save Button");
		}

		String loading = "(//*[@id='ReservationDetail_CP']//div[@class='ir-loader-in'])";
		int count = 0;
		unsavedDataYesClick(driver, test_steps);
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				try {
					Wait.wait1Second();
				} catch (InterruptedException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		}

		reslogger.info("Waited to loading symbol");

		return isButtonEnabled;
	}

	public HashMap<String, ArrayList<ArrayList<String>>> verifyMRBForIntervalRatePlan(WebDriver driver,
			ArrayList test_steps, String RoomClass,

			String IsAssign, String Account, String Adults, ArrayList<Boolean> isMinStayRuleMRB,
			ArrayList<Boolean> isMinStayRuleBrokenPopComeOrNotMRB, ArrayList<Integer> minStayRuleValueMRB,
			ArrayList<String> checkInColorMRB, ArrayList<String> checkOutColorMRB,

			String childs, String checkIn, String checkOut, String interval, ArrayList<String> baseRate,
			ArrayList<String> adultCapacity, ArrayList<String> personCapacity, ArrayList<Boolean> isAdditonalAdultChild,
			ArrayList<String> maxAdult, ArrayList<String> maxPerson, ArrayList<String> adultRate,
			ArrayList<String> childRate, ArrayList<Boolean> isProStayRate, ArrayList<String> customRatePerNight,
			ArrayList<String> adultRatePerNight, ArrayList<String> childRatePerNight, String dateFormat,
			String folioName)

			throws InterruptedException, NumberFormatException, ParseException {
		String[] roomclass = RoomClass.split("\\" + Utility.DELIM);
		String[] adults = Adults.split("\\" + Utility.DELIM);
		String[] child = childs.split("\\" + Utility.DELIM);

		String[] checkin = checkIn.split("\\" + Utility.DELIM);
		String[] checkout = checkOut.split("\\" + Utility.DELIM);

		int size = adults.length;
		ArrayList al = new ArrayList();
		// ArrayList<ArrayList<String>> getRates = new ArrayList<>();
		// HashMap<String, ArrayList<String>> getRate = new HashMap<>();
		HashMap<String, ArrayList<ArrayList<String>>> getRates = new HashMap<>();
		int roomcount = 1;
		for (int i = 0; i < size; i++) {
			String Applypolicy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
			if (driver.findElements(By.xpath(Applypolicy)).size() > 0) {
				Wait.WaitForElement(driver, Applypolicy);
				Wait.wait3Second();
				driver.findElement(By.xpath(Applypolicy)).click();
				test_steps.add("Based on the changes made, new policies are applicable.? : yes");
				reslogger.info("Based on the changes made, new policies are applicable.? : yes");
			}
			Wait.wait5Second();
			String rm = "//span[text()='Room " + roomcount + " of " + size + "']";
			if (driver.findElement(By.xpath(rm)).isDisplayed()) {
				test_steps.add("Room " + roomcount + " of " + size + " is displayed");
				reslogger.info("Room " + roomcount + " of " + size + " is displayed");
			} else {
				String clickOnPopUpYesBut = "(//div[@class='row']//button[contains(text(),'Yes')])[3]";
				driver.findElement(By.xpath(clickOnPopUpYesBut)).click();
			}
			roomcount = roomcount + 1;
			String rulessize = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i].trim() + "')]/following-sibling::span";
			Wait.WaitForElement(driver, rulessize);
			reslogger.info(rulessize);
			int ruleCount = driver.findElements(By.xpath(rulessize)).size();

			String room = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i] + "')]/../../div[2]/span)";
			reslogger.info(room);
			Wait.WaitForElement(driver, room);
			Wait.wait2Second();
			String rooms = driver.findElement(By.xpath(room)).getText();
			reslogger.info(rooms);
			String[] roomsCount = rooms.split(" ");
			int count = Integer.parseInt(roomsCount[0].trim());

			String cost = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
					+ roomclass[i] + "')]/../../../following-sibling::div/div/span)";

			// here to verify interval verification

			Utility.ScrollToElement(driver.findElement(By.xpath(room)), driver);

			cost = driver.findElement(By.xpath(cost)).getText();
			cost = cost.trim();
			cost = cost.substring(1, cost.length());
			reslogger.info("cost : " + cost);

			ArrayList<String> minStayColorMRB = new ArrayList<String>();
			ArrayList<String> nocheckinColorMRB = new ArrayList<String>();
			ArrayList<String> nocheckoutColorMRB = new ArrayList<String>();
			al.add(cost);
			if (count > 0) {
				test_steps.add("Selecting room class : " + roomclass[i]);
				reslogger.info("Selecting room class : " + roomclass[i]);
				String sel = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i] + "')]/../../../following-sibling::div/div/select";
				WebElement ele = driver.findElement(By.xpath(sel));

				String minStayColor = "";

				System.out.println("isMinStayRuleMRB.get(i) : " + isMinStayRuleMRB.get(i));
				if (isMinStayRuleMRB.get(i)) {
					System.out.println("!isMinStayRuleBrokenPopComeOrNotMRB.get(i-1) : "
							+ !isMinStayRuleBrokenPopComeOrNotMRB.get(i));
					if (!isMinStayRuleBrokenPopComeOrNotMRB.get(i)) {
						minStayColor = verifyMinStayLabel(driver, test_steps, roomclass[i], minStayRuleValueMRB.get(i));
						System.out.println("minStayColor : " + minStayColor);
						try {
							assertTrue(minStayColor.equalsIgnoreCase("Red"),
									"Red color lable for minstay rule is not found for the room Class : "
											+ roomclass[i]);
							reslogger.info(
									"Succesfully veried the red color lable for min stay rule for the room class : "
											+ roomclass[i]);
							test_steps.add(
									"Succesfully veried the red color lable for min stay rule for the room class : "
											+ roomclass[i]);
						} catch (Error e) {
							test_steps.add(e.toString());
						} catch (Exception e) {
							test_steps.add(e.toString());
						}
					} else {
						minStayColor = verifyMinStayLabel(driver, test_steps, roomclass[i], minStayRuleValueMRB.get(i));
						try {
							assertTrue(minStayColor.equalsIgnoreCase("green"),
									"green color lable for minstay rule is not found for the room class : "
											+ roomclass[i]);
							reslogger.info(
									"Succesfully veried the green color lable for min stay rule for the room class : "
											+ roomclass[i]);
							test_steps.add(
									"Succesfully veried the green color lable for min stay rule for the room class : "
											+ roomclass[i]);
						} catch (Error e) {
							test_steps.add(e.toString());
						} catch (Exception e) {
							test_steps.add(e.toString());
						}
					}

				}

				minStayColorMRB.add(minStayColor);

				String noCheckinColor = "";
				if (checkInColorMRB.get(i).equalsIgnoreCase("Red")) {
					try {
						noCheckinColor = verifyNoCheckinLabel(driver, test_steps, roomclass[i]);
						System.out.println("noCheckinColor");
						assertTrue(noCheckinColor.equalsIgnoreCase("Red"),
								"red color lable for no check in rule is not found for the room class : "
										+ roomclass[i]);
						reslogger.info(
								"Succesfully verified the red color lable for no check in rule for the room class : "
										+ roomclass[i]);
						test_steps.add(
								"Succesfully verified the red color lable for no check in rule for the room class : "
										+ roomclass[i]);
					} catch (Error e) {
						test_steps.add(e.toString());
					} catch (Exception e) {
						test_steps.add(e.toString());
					}
				} else if (checkInColorMRB.get(i).equalsIgnoreCase("Green")) {
					try {
						noCheckinColor = verifyNoCheckinLabel(driver, test_steps, roomclass[i]);
						assertTrue(noCheckinColor.equalsIgnoreCase("green"),
								"green color lable for no check in rule is not found for the room class : "
										+ roomclass[i]);
						reslogger.info(
								"Succesfully verified the green color lable for no check in rule for the room class : "
										+ roomclass[i]);
						test_steps.add(
								"Succesfully verified the green color lable for no check in rule for the room class : "
										+ roomclass[i]);
					} catch (Error e) {
						test_steps.add(e.toString());
					} catch (Exception e) {
						test_steps.add(e.toString());
					}
				} else {
					try {
						noCheckinColor = verifyNoCheckinLabel(driver, test_steps, roomclass[i]);
						assertTrue(noCheckinColor.equalsIgnoreCase("no color"),
								"no check in rule label is displayed for the room class : " + roomclass[i]);
						reslogger.info(
								"Succesfully verified the no check in rule label not displayed for the room class : "
										+ roomclass[i]);
						test_steps.add(
								"Succesfully verified the no check in rule label not displayed for the room class : "
										+ roomclass[i]);
					} catch (Error e) {
						test_steps.add(e.toString());
					} catch (Exception e) {
						test_steps.add(e.toString());
					}
				}

				nocheckinColorMRB.add(noCheckinColor);

				String noCheckoutColor = "";
				if (checkOutColorMRB.get(i).equalsIgnoreCase("Red")) {
					try {
						noCheckoutColor = verifyNoCheckoutLabel(driver, test_steps, roomclass[i]);
						assertTrue(noCheckoutColor.equalsIgnoreCase("Red"),
								"red color lable for no check out rule is not found for the room class : "
										+ roomclass[i]);
						reslogger.info(
								"Succesfully verified the red color lable for no check out rule for the room class : "
										+ roomclass[i]);
						test_steps.add(
								"Succesfully verified the red color lable for no check out rule for the room class : "
										+ roomclass[i]);
					} catch (Error e) {
						test_steps.add(e.toString());
					} catch (Exception e) {
						test_steps.add(e.toString());
					}
				} else if (checkOutColorMRB.get(i).equalsIgnoreCase("Green")) {
					try {
						noCheckoutColor = verifyNoCheckoutLabel(driver, test_steps, roomclass[i]);
						assertTrue(noCheckoutColor.equalsIgnoreCase("green"),
								"green color lable for no check out rule is not found for the room class : "
										+ roomclass[i]);
						reslogger.info(
								"Succesfully verified the green color lable for no check out rule for the room class : "
										+ roomclass[i]);
						test_steps.add(
								"Succesfully verified the green color lable for no check out rule for the room class : "
										+ roomclass[i]);
					} catch (Error e) {
						test_steps.add(e.toString());
					} catch (Exception e) {
						test_steps.add(e.toString());
					}
				} else {
					try {
						noCheckoutColor = verifyNoCheckoutLabel(driver, test_steps, roomclass[i]);
						assertTrue(noCheckoutColor.equalsIgnoreCase("no color"),
								"no check out rule label is displayed for the room class : " + roomclass[i]);
						reslogger.info(
								"Succesfully verified the no check out rule label not displayed for the room class : "
										+ roomclass[i]);
						test_steps.add(
								"Succesfully verified the no check out rule label not displayed for the room class : "
										+ roomclass[i]);
					} catch (Error e) {
						test_steps.add(e.toString());
					} catch (Exception e) {
						test_steps.add(e.toString());
					}
				}
				nocheckoutColorMRB.add(noCheckoutColor);

				if (!(IsAssign.equalsIgnoreCase("Yes")) || IsAssign.isEmpty() || IsAssign.equalsIgnoreCase("")) {
					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String unAssign = "(//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul//span[text()='Unassigned'])";
					Wait.WaitForElement(driver, unAssign);
					driver.findElement(By.xpath(unAssign)).click();
					test_steps.add("Selected room number : Unassigned");
					reslogger.info("Selected room number : Unassigned");

				} else {
					String roomnum = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i] + "')]/../../../following-sibling::div/div/select/option";
					reslogger.info(roomnum);
					int count1 = driver.findElements(By.xpath(roomnum)).size();
					Random random = new Random();
					randomNumber = random.nextInt(count1 - 1) + 1;
					reslogger.info("count : " + count1);
					reslogger.info("randomNumber : " + randomNumber);
					Wait.WaitForElement(driver, sel);

					String expand = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div/button";
					Wait.wait2Second();
					Wait.WaitForElement(driver, expand);
					driver.findElement(By.xpath(expand)).click();

					String roomNumber = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
							+ roomclass[i]
							+ "')]/../../../following-sibling::div/div/select/following-sibling::div//ul/li["
							+ randomNumber + "]/a/span";
					Wait.WaitForElement(driver, roomNumber);
					driver.findElement(By.xpath(roomNumber)).click();
				}

				// here verify interval rate plan
				reslogger.info("checkin: " + checkin[i]);
				reslogger.info("checkout: " + checkout[i]);

				ArrayList<ArrayList<String>> getValue = intervalRateVerification(driver, dateFormat, checkin[i],
						checkout[i], adults[i], child[i], roomclass[i], interval, baseRate.get(i), adultCapacity.get(i),
						personCapacity.get(i), isAdditonalAdultChild.get(i), maxAdult.get(i), maxPerson.get(i),
						adultRate.get(i), childRate.get(i), isProStayRate.get(i), customRatePerNight.get(i),
						adultRatePerNight.get(i), childRatePerNight.get(i), folioName, test_steps);

				getRates.put(roomclass[i], getValue);

				String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'"
						+ roomclass[i] + "')]/../../../following-sibling::div//span[contains(text(),'SELECT')]";
				Wait.WaitForElement(driver, select);
				driver.findElement(By.xpath(select)).click();

				String loading = "(//div[@class='ir-loader-in'])[2]";
				int counter = 0;
				while (true) {
					if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
						break;
					} else if (counter == 3) {
						break;
					} else {
						counter++;
						Wait.wait2Second();
					}
				}
				reslogger.info("Waited to loading symbol");

				reslogger.info("Rule Count : " + ruleCount);
				if (ruleCount > 1) {

					String rules = "//p[text()='Selecting this room will violate the following rules']/../..//button[text()='Yes']";
					counter = 0;
					Wait.wait3Second();
					if (driver.findElements(By.xpath(rules)).size() > 0) {

//						if (minStayColorMRB.get(i).equalsIgnoreCase("Red")) {
//							String min = "//p[text()='Selecting this room will violate the following rules']/..//div[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'"
//									+ minStayRuleValueMRB.get(i) + " NIGHT')]";
//							Wait.WaitForElement(driver, min);
//							test_steps.add("Verified min stay rule in the rules broken pop up as : "
//									+ minStayRuleValueMRB.get(i) + " night");
//							reslogger.info("Verified min stay rule in the rules broken pop up as : "
//									+ minStayRuleValueMRB.get(i) + " night");
//						}
//
//						if (nocheckinColorMRB.get(i).equalsIgnoreCase("Red")) {
//							String min = "//p[text()='Selecting this room will violate the following rules']/..//div";
//							Wait.WaitForElement(driver, min);
//							String nocheckin = driver.findElement(By.xpath(min)).getText();
//							if (nocheckin.contains("No Check In")) {
//								test_steps.add("Verified no check in rule in the rules broken pop up");
//								reslogger.info("Verified no check in rule in the rules broken pop up");
//							}
//						}
//
//						if (nocheckoutColorMRB.get(i).equalsIgnoreCase("Red")) {
//							String min = "//p[text()='Selecting this room will violate the following rules']/..//div";
//							Wait.WaitForElement(driver, min);
//							String nocheckin = driver.findElement(By.xpath(min)).getText();
//							if (nocheckin.contains("No Check out")) {
//								test_steps.add("Verified no check in rule in the rules broken pop up");
//								reslogger.info("Verified no check in rule in the rules broken pop up");
//							}
//
//						}

						driver.findElement(By.xpath(rules)).click();
						test_steps.add(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");
						reslogger.info(
								"Selecting this room will violate the following rules : Are you sure you want to proceed? : yes");

						loading = "(//div[@class='ir-loader-in'])[2]";
						counter = 0;
						while (true) {
							if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
								break;
							} else if (counter == 3) {
								break;
							} else {
								counter++;
								Wait.wait3Second();
							}
						}
					}
				}

				if (!(Account.isEmpty() || Account.equalsIgnoreCase(""))) {
					if (i == 1) {
						String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
						if (driver.findElements(By.xpath(policy)).size() > 0) {
							Wait.WaitForElement(driver, policy);
							driver.findElement(By.xpath(policy)).click();
							test_steps.add("Based on the changes made, new policies are applicable.? : yes");
							reslogger.info("Based on the changes made, new policies are applicable.? : yes");

							loading = "(//div[@class='ir-loader-in'])[2]";
							counter = 0;
							while (true) {
								if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
									break;
								} else if (counter == 3) {
									break;
								} else {
									counter++;
									Wait.wait2Second();
								}
							}
						}
					}
				}
			} else {
				test_steps.add("Rooms Count <=0 for " + RoomClass + " for specified date");
				reslogger.info("Rooms Count <=0 for " + RoomClass + " for specified date");
			}
		}
		return getRates;
	}

	public ArrayList<String> getIntervalDuration(String dateFormat, String checkInDate, String Checkout,
			String requiredDateFormat, String timeZone, int interval, boolean isProRateOn) throws Exception {

		int fullIntervals = 0;
		int halfIntervals = 0;
		int numberOfDays = Utility.getNumberofDays(checkInDate, Checkout);

		fullIntervals = numberOfDays / interval;
		halfIntervals = numberOfDays % interval;

		ArrayList<String> dates = new ArrayList<String>();
		int temp = 0;
		int incrementCounter = 0;
		if (halfIntervals > 0) {
			fullIntervals = fullIntervals + 1;
		}

		for (int i = 0; i < fullIntervals; i++) {
			reslogger.info("i: " + i);
			String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);

			String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
			temp++;
			double total = 0.00;
			if (temp > fullIntervals) {
				incrementCounter = incrementCounter + 1;
				if (isProRateOn) {
					dates.add(getDate);
				}

			} else {
				incrementCounter = incrementCounter + interval;
				dates.add(getDate);

			}
		}

		return dates;
	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsBaseOnNewAndOldDates(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			ArrayList<String> ratesList, String totalRoomCharges, ArrayList<String> oldDates,
			ArrayList<String> OldRates, ArrayList<String> newDates, ArrayList<String> testSteps) throws Exception {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Utility.getNumberofDays(checkInDate, checkOutDate);
		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		roomClassExpandElement.click();
		Wait.wait2Second();
		List<WebElement> getRateList = driver
				.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]"));

		reslogger.info("rateList1 size: " + getRateList.size());
		boolean isZero = true;

		for (int i = 1; i < getRateList.size(); i++) {

			String getRatePerInterval = getRateList.get(i).getText();
			String[] splitStr = getRatePerInterval.split("\\$");
			getRatePerInterval = splitStr[1].trim();
			if (getRatePerInterval.equals("0.00")) {
				isZero = false;
				break;
			}

		}

		reslogger.info("isZero: " + isZero);
		if (!isZero) {
			String bugId = "<a href='https://innroad.atlassian.net/browse/RATES-3850' target='_blank'>"
					+ "Failed: Rate is showing incorrect when updating stay details with change only for added dates for interval rateplan.<br>Click here for more info: RATES-3850</a>";
			testSteps.add("Failed: Click here for more info<br>");
		}

		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {
				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						for (int i = 1; i < child_adults; i++) {
							System.out.println("i: " + i);
							child_adults = child_adults - 1;
							System.out.println("total: " + child_adults);
							System.out.println("max person: " + intMaxPerson);
							if (child_adults == intMaxPerson) {
								System.out.println("in total = max person");
								count = i;
								isTrue = true;
								break;
							}
						}

					}

					if (isTrue) {
						childDifference = count;
					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						for (int i = 1; i < child_adults; i++) {
							System.out.println("i: " + i);
							child_adults = child_adults - 1;
							System.out.println("total: " + child_adults);
							System.out.println("max person: " + intMaxPerson);
							if (child_adults == intMaxPerson) {
								System.out.println("in total = max person");
								count = i;
								isTrue = true;
								break;
							}
						}

					}

					if (isTrue) {
						childDifference = count;
					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);

			reslogger.info("old charges: " + totalRoomCharges);
			reslogger.info("new charges: " + intial);
			double old_new_charges = Double.parseDouble(totalRoomCharges) + intial;
			testSteps.add("Expected rates: " + old_new_charges);
			testSteps.add("Found: " + getValue);

			if (getValue.equals(String.format("%.2f", old_new_charges))) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					numberofDays, testSteps);

			reslogger.info("getRates: " + getRates);
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			if (!isProRateApplied && halfIntervals > 0) {
				fullIntervals = fullIntervals + 1;
			}
			reslogger.info("reservationElement.StartDate: " + reservationElement.StartDate.size());
			reslogger.info("new dates size: " + newDates.size());
			int totalSize = newDates.size() + OldRates.size();
			reslogger.info("totalSize: " + totalSize);
			if (totalSize != reservationElement.StartDate.size()) {
				testSteps.add("Failed: Interval date is not showing correctly");
			}
			for (int j = 0; j < oldDates.size(); j++) {
				rateList.add(OldRates.get(j));
				dates.add(oldDates.get(j));
			}

			for (int i = oldDates.size(); i < totalSize; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				testSteps.add("Expected date: " + dateInRequiredFormat);
				testSteps.add("Found: " + startDate);

				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					testSteps.add("Interval date are showing as per requirment");

				} else {
					testSteps.add("Failed: Interval date is mismatching in add and remove dates");
				}
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				// testSteps.add(dateInRequiredFormat + " " + folioName + " " + getAmount);
				temp++;
				double total = 0.00;
				if (i == 0) {
					// incrementCounter = 1;
				}

				if (isRoomChargesEqual.equalsIgnoreCase("yes") || isRoomChargesEqual.equalsIgnoreCase("no")) {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						} else {
							total = getRates.get(0);
							// assertEquals(amountInDouble, total, "Failed: interval amount is
							// mismatching!");
							if (!amountInDouble.equals(total)) {
								testSteps.add("Expected amount: " + total);
								testSteps.add("Found: " + amountInDouble);
								testSteps.add("Failed: amount is mismatching on date: " + dateInRequiredFormat);
							}

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = getRates.get(0);

						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		return ratesAlongWithDate;

	}

	public void selectDates(WebDriver driver, ArrayList test_steps, String CheckInDate, String CheckoutDate,
			String Adults, String Children, String RatePlan, String PromoCode, String IsSplitRes)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		String loading = "(//div[@class='ir-loader-in'])[2]";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");

		String[] checkin = CheckInDate.split("\\|");
		String[] checkout = CheckoutDate.split("\\|");
		String[] adu = Adults.split("\\|");
		String[] child = Children.split("\\|");
		String[] rate = RatePlan.split("\\|");
		String[] promoCode = PromoCode.split("\\|");
		Boolean flag = false;
		reslogger.info(CheckInDate);
		int size = adu.length;

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_AddRoom);
		reslogger.info("MRB size : " + size);
		if (size > 1) {
			for (int i = 1; i <= size; i++) {
				List<WebElement> checkInInput = driver.findElements(By.xpath(OR_Reservation.EnterCheckinDate));
				checkInInput.get(i - 1).clear();
				checkInInput.get(i - 1).sendKeys(checkin[i - 1]);

				List<WebElement> checkOutInput = driver.findElements(By.xpath(OR_Reservation.EnterCheckout));
				checkOutInput.get(i - 1).clear();
				checkOutInput.get(i - 1).sendKeys(checkout[i - 1]);
				if (!IsSplitRes.equalsIgnoreCase("Yes")) {

					String adults = "(//label[text()='Adults']/preceding-sibling::input)[" + i + "]";
					Wait.WaitForElement(driver, adults);
					driver.findElement(By.xpath(adults)).clear();
					driver.findElement(By.xpath(adults)).sendKeys(adu[i - 1]);
					test_steps.add("Enter Number of Adults : " + adu[(i - 1)]);
					reslogger.info("Enter Number of Adults : " + adu[(i - 1)]);

					String children = "(//label[text()='Children']/preceding-sibling::input)[" + i + "]";
					Wait.WaitForElement(driver, children);
					driver.findElement(By.xpath(children)).clear();
					driver.findElement(By.xpath(children)).sendKeys(child[i - 1]);
					test_steps.add("Enter Number of Children : " + child[(i - 1)]);
					reslogger.info("Enter Number of Children : " + child[(i - 1)]);

					// res.CP_NewReservation_Rateplan.click();
					String ratebutton = "(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div/button)["
							+ i + "]";
					Wait.WaitForElement(driver, ratebutton);
					driver.findElement(By.xpath(ratebutton)).click();

					int rateCount = driver.findElements(By.xpath(
							"(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[contains(text(),'"
									+ rate[i - 1].trim() + "')]/..)"))
							.size();
					String rateLoc = "(//label[contains(text(),'Rate Plan / Promo')]/preceding-sibling::div//span[contains(text(),'"
							+ rate[i - 1].trim() + "')]/..)[" + rateCount + "]";
					reslogger.info(rateLoc);
					Wait.WaitForElement(driver, rateLoc);
					driver.findElement(By.xpath(rateLoc)).click();
					test_steps.add("Selecting the rateplan : " + rate[i - 1]);
					reslogger.info("Selecting the rateplan : " + rate[i - 1]);
					if (RatePlan.contains("Promo")) {
						String promo = "(//label[contains(text(),'Enter Code')]/preceding-sibling::input)[" + i + "]";
						Wait.WaitForElement(driver, promo);
						res.CP_NewReservation_PromoCode.clear();
						res.CP_NewReservation_PromoCode.sendKeys(promoCode[i - 1]);
						test_steps.add("Enter promocode : " + promoCode[i]);
						reslogger.info("Enter promocode : " + promoCode[i]);
					}
				}
				if (!(i == size)) {
					clickOnAddARoomButton(driver, test_steps);
					reslogger.info("Clicking on add room");
					if (IsSplitRes.equalsIgnoreCase("Yes") && !flag) {
						res.CP_NewReservation_SplitReservation.click();
						test_steps.add("Clicking on split reservation");
						reslogger.info("Clicking on split reservation");
					}
					flag = true;
				}
			}
		} else {
			test_steps.add("Data for mrb reservation is not valid");
			reslogger.info("Data for mrb reservation is not valid");

		}
	}

	public void enterNoteInFolioTab(WebDriver driver, String voidNote) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.HeaderNotes, driver);
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.EnterNote, driver);
		res.EnterNote.sendKeys(voidNote);
		test_steps.add("Entered void Note");
		reslogger.info("Entered void Note");
	}

	public void clickVoidButtonOnNotePopup(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.HeaderNotes, driver);
		Wait.explicit_wait_elementToBeClickable(res.clickVoidButtonOnNotePopup, driver);
		res.clickVoidButtonOnNotePopup.click();
		test_steps.add("Click Void Button On Note Popup");
		reslogger.info("Click Void Button On Note Popup");
	}

	public void voidAllLineItemsInReservation(WebDriver driver, String category, String voidNote) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		if (driver
				.findElements(By.xpath("//span[text()='" + category
						+ "']/ancestor::td/../td[@class='text-center lineitems-select']/span/following-sibling::input"))
				.size() > 0) {
			List<WebElement> lineItems = driver.findElements(By.xpath("//span[text()='" + category
					+ "']/ancestor::td/../td[@class='text-center lineitems-select']/span/following-sibling::input"));
			for (int i = 0; i < lineItems.size(); i++) {
				lineItems.get(i).click();
			}
			test_steps.add("selected all line item: " + category);
			reslogger.info("selected all line item: " + category);
		} else {
			test_steps.add("No line item present: " + category);
			reslogger.info("No line item present: " + category);
		}
		clickVoidButton(driver);
		enterNoteInFolioTab(driver, voidNote);
		clickVoidButtonOnNotePopup(driver);
		clickSaveButtonUnderFolioTab(driver);
	}

	public void clickVoidButton(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ClickVoidButton, driver);
		if (res.clickVoidButton.isEnabled()) {
			res.clickVoidButton.click();
			test_steps.add("Click at Void Button");
			reslogger.info("Click at Void Button");
		}
	}

	public void verifyErrorMessage(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		/*
		 * try { Wait.WaitForElement(driver, OR_Reservation.roomSearchError);
		 * Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.roomSearchError),
		 * driver);
		 * Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.roomSearchError),
		 * driver); Utility.ScrollToElement(res.roomSearchError, driver);
		 * }catch(Exception e) { assertTrue(res.roomSearchError.isDisplayed(),
		 * "Failed : Error message 'Reservation cannot be created as the selected arrival date is locked. Please select other arrival date' is not displaying"
		 * ); }
		 */
		List<WebElement> eleList = driver.findElements(By.xpath(OR_Reservation.roomSearchError));
		reslogger.info(eleList.size());
		assertTrue(eleList.size() > 0,
				"Failed : Error message 'Reservation cannot be created as the selected arrival date is locked. Please select other arrival date' is not displaying");
		testSteps.add(
				"Verified Error message 'Reservation cannot be created as the selected arrival date is locked. Please select other arrival date' is displaying");
		reslogger.info(
				"Verified Error message 'Reservation cannot be created as the selected arrival date is locked. Please select other arrival date' is displaying");

	}

	public void deleteReservation(WebDriver driver, String confirmationNum, String voidNote, String actionCategory,
			String guestName, ArrayList<String> test_steps) throws Exception {
		SearchandClickgivenReservationNumber(driver, confirmationNum);
		click_Folio(driver, test_steps);
		// String voidNote = "Testing void note";
		voidAllLineItemsInReservation(driver, "Room Charge", voidNote);
		test_steps.add("Add void note: " + voidNote);
		test_steps.add("Void all Room Charge line item of reservation");
		Wait.wait5Second();
		close_FirstOpenedReservation(driver, test_steps);
		searchWithGuestName(driver, test_steps, guestName);
		test_steps.add("searched resrevation created from tape chart: " + guestName);
		selectAllSearchedReservationCheckBox(driver, test_steps);
		test_steps.add("Selected reservation: " + guestName);
		clickBulkOptionCancelAction(driver, actionCategory, test_steps);
		clickOnProcessButtonInBulkCheckInPopUp(driver, test_steps);
		closeBulkActionPopUp(driver, test_steps);

	}

	public void clickOnProcessButtonInBulkCheckInPopUp(WebDriver driver, ArrayList<String> test_steps)
			throws Exception {
		// ArrayList<String> test_steps = new ArrayList<>();
		Elements_CPReservation cpResElm = new Elements_CPReservation(driver);
		Wait.explicit_wait_visibilityof_webelement_120(cpResElm.clickProcessButtonOnBulkActions, driver);
		try {
			Wait.wait5Second();
			JavascriptExecutor js = (JavascriptExecutor) driver;
			js.executeScript("arguments[0].click();", cpResElm.clickProcessButtonOnBulkActions);
		} catch (Exception e) {
			cpResElm.clickProcessButtonOnBulkActions.click();
		}

		reslogger.info("Process Button is Pressed Successfully");
		test_steps.add("Process Button is Pressed Successfully");

	}

	public void clickBulkOptionCancelAction(WebDriver driver, String actionCategory, ArrayList<String> test_steps)
			throws Exception {
		// ArrayList<String> test_steps = new ArrayList<>();
		Elements_Reservation_SearchPage resservationSearch = new Elements_Reservation_SearchPage(driver);
		Wait.waitUntilPresenceOfElementLocated(OR.Click_Bulk_Action, driver);
		resservationSearch.Click_Bulk_Action.click();
		test_steps.add("Click Bulk Action");
		String action = "//a/span[.='" + actionCategory + "']";

		Wait.waitUntilPresenceOfElementLocated(action, driver);
		driver.findElement(By.xpath(action)).click();
		test_steps.add("Click at: " + actionCategory);
		reslogger.info("Click at: " + actionCategory);

	}

	public void selectAllSearchedReservationCheckBox(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		// ArrayList<String> testSteps = new ArrayList<>();

		Wait.WaitForElement(driver, OR_Reservation.ClickOnCheckBoxProperty);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ClickOnCheckBoxProperty), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ClickOnCheckBoxProperty), driver);
		element.clickOnCheckBoxProperty.click();
		test_steps.add("Successfully all reservations are selected ");

	}

	public void closeBulkActionPopUp(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		// ArrayList<String> testSteps = new ArrayList<>();
		Elements_CPReservation elementsReservation = new Elements_CPReservation(driver);
		try {
			Wait.WaitForElement(driver, OR_Reservation.CLOSEBULKACTIONPOPUP);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CLOSEBULKACTIONPOPUP), driver);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CLOSEBULKACTIONPOPUP), driver);
			Utility.ScrollToElement_NoWait(elementsReservation.CLOSEBULKACTIONPOPUP, driver);
			elementsReservation.CLOSEBULKACTIONPOPUP.click();
		} catch (Exception e) {
			Utility.ScrollToElement_NoWait(elementsReservation.CloseBulkActionPopUp, driver);
			elementsReservation.CloseBulkActionPopUp.click();
		}
		test_steps.add("Bulk Action PopUp Closed Successfully");
		reslogger.info("Bulk Action PopUp Closed Successfully");

	}

	public void clickCloseButtonOfNoShowSuccessfully(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.noShow_CloseButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.noShow_CloseButton), driver, 10);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", res.noShow_CloseButton);
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
	}

	public void clickCloseButtonOfCheckoutSuccessfully(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.checkout_CloseButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.checkout_CloseButton), driver, 10);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", res.checkout_CloseButton);
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
	}

	public void clickCloseButtonOfCancelSuccessfully(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.cancel_CloseButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.cancel_CloseButton), driver, 10);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", res.cancel_CloseButton);
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
	}

	/*
	 * public String getFirstRoomNumberFromRoomsDropDown(WebDriver driver, String
	 * roomClass) { // String roomPath = "(//section[@class='ir-roomClassDetails //
	 * manual-override']//span[contains(text(),'"+roomClass+"')]/../../../following-
	 * sibling::div/div/select/option)[2]"; String roomPath =
	 * "//span[text()='Double Bed']/../../../../div//button"; String roomNumber;
	 * 
	 * // roomNumber = driver.findElement(By.xpath(roomPath)).getText(); roomNumber
	 * = driver.findElement(By.xpath(roomPath)).getAttribute("title");
	 * 
	 * return roomNumber; }
	 */

	public void clickOnAddMoreGuestInfo(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_AddMoreGuestInfo), driver);
			res.CP_NewReservation_AddMoreGuestInfo.click();
		} catch (Exception e) {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_AddMoreGuestInfo2), driver);
			res.CP_NewReservation_AddMoreGuestInfo2.click();
		}
		test_steps.add("Clicking on Add More Guest Info");
		reslogger.info("Clicking on Add More Guest Info");
		String warn = "//div[contains(text(),'The number of guest names added surpasses the number of"
				+ " guests booked in the room.')]/..//button[text()='Yes']";
		try {
			Wait.waitForElementToBeClickable(By.xpath(warn), driver);
			driver.findElement(By.xpath(warn)).click();
		} catch (Exception e) {

		}
	}

	public void enterAddMoreGuestInfoDetails(WebDriver driver, ArrayList<String> test_steps, int guests,
			ArrayList<String> firstNames, ArrayList<String> lastNames) {
		for (int i = 0; i < guests; i++) {
			clickOnAddMoreGuestInfo(driver, test_steps);
			List<WebElement> firstNameFields = driver
					.findElements(By.xpath("//input[contains(@data-bind,'value:firstName, valueUpdate')]"));
			List<WebElement> lastNameFields = driver
					.findElements(By.xpath("//input[contains(@data-bind,'value:lastName, valueUpdate')]"));
			firstNameFields.get(firstNameFields.size() - 1).sendKeys(firstNames.get(i));
			lastNameFields.get(lastNameFields.size() - 1).sendKeys(lastNames.get(i));
		}
	}

	public void copyReservation(WebDriver driver, ArrayList<String> test_steps, String oldGuestname, String firstName,
			String lastName) throws Exception {
		// navigateToReservationPage(driver);
		// String confirmationNo = guestUnlimitedSearchAndOpen(driver, test_steps,
		// oldGuestname, null, true, 12);
		clickCopyButton(driver, oldGuestname);
		enterGuestNameWhileCopy(driver, test_steps, firstName);
		enterGuestLastNameWhileCopy(driver, test_steps, lastName);
		enter_PaymentDetails1(driver, test_steps, "MC", "5454545454545454", "Auto User", "06/25");
		clickBookNow(driver, test_steps);
		clickCloseReservationSavePopup(driver, test_steps);
	}

	public String guestUnlimitedSearchAndOpen(WebDriver driver, ArrayList<String> test_steps, String guestName,
			String status, boolean openGuestProfile, int searchCount) throws InterruptedException {
		String getGuestName = null, reservationConfirmNum = null;
		for (int i = 0; i < searchCount; i++) {
			getGuestName = basicSearch_WithGuestName(driver, test_steps, guestName);
			if (getGuestName != null && getGuestName.equalsIgnoreCase(guestName)) {
				String statusDisplayed = driver
						.findElement(By.xpath("//td/span[contains(@data-bind,'text: StatusName')]")).getText();
				if (Utility.validateString(status)) {
					if (statusDisplayed.equalsIgnoreCase(status)) {
						reservationConfirmNum = clickOnGuestName(driver, test_steps, guestName, openGuestProfile);
						break;
					} else {
						Wait.wait5Second();
					}
				} else {
					reservationConfirmNum = clickOnGuestName(driver, test_steps, guestName, openGuestProfile);
					break;
				}
			} else {
				Wait.wait5Second();
			}
		}
		return reservationConfirmNum;
	}

	public void validateGuestInfo(WebDriver driver, ArrayList test_steps, String Salutation, String GuestFirstName,
			String GuestLastName, String PhoneNumber, String AlternatePhone, String Email, String Country,
			String Account, String Address1, String Address2, String Address3, String State, String City,
			String PostalCode) throws ParseException {
		test_steps.add("******************* Guest Info fields verification **********************");
		reslogger.info("******************* Guest Info fields verification **********************");

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_GuestInfo_GuestName);

		String name = Salutation.trim() + " " + GuestFirstName.trim() + " " + GuestLastName.trim();
		String name1 = GuestFirstName.trim() + " " + GuestLastName.trim();
		String guestname = res.CP_GuestInfo_GuestName.getText().trim();
		reslogger.info(guestname);
		if (guestname.equalsIgnoreCase(name.trim()) || guestname.contains(name1.trim())) {
			test_steps.add("Reservation Guest Info GuestName field verified : " + name);
			reslogger.info("Reservation Guest Info GuestName field verified : " + name);
		} else {
			test_steps.add("Reservation Guest Info GuestName field not found : " + name);
			reslogger.info("Reservation Guest Info GuestName field not found : " + name);
		}

		String contactname = res.CP_GuestInfo_ContactName.getText().trim();
		String contactName = Salutation.trim();
		reslogger.info(contactname);
		if (contactname.equalsIgnoreCase(name.trim()) || contactname.contains(contactName)) {
			test_steps.add("Reservation Guest Info ContactName field verified : " + name);
			reslogger.info("Reservation Guest Info ContactName field verified : " + name);
		} else {
			test_steps.add("Reservation Guest Info ContactName field not found : " + name);
			reslogger.info("Reservation Guest Info ContactName field not found : " + name);
		}

		String phone = res.CP_GuestInfo_Phone.getText().trim();
		if (phone.equalsIgnoreCase(PhoneNumber) || phone.contains(PhoneNumber)) {
			test_steps.add("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
			reslogger.info("Reservation Guest Info PhoneNumber field verified : " + PhoneNumber);
		} else {
			test_steps.add("Reservation Guest Info PhoneNumber field not found : " + PhoneNumber);
			reslogger.info("Reservation Guest Info PhoneNumber field not found : " + PhoneNumber);
		}

		String mail = res.CP_GuestInfo_Email.getText().trim();
		reslogger.info(mail);
		if (mail.equalsIgnoreCase(Email.trim())) {
			test_steps.add("Reservation Guest Info Email field verified : " + Email);
			reslogger.info("Reservation Guest Info Email field verified : " + Email);
		} else {
			test_steps.add("Reservation Guest Info Email field not found : " + Email);
			reslogger.info("Reservation Guest Info Email field not found : " + Email);
		}

		String address1 = res.CP_GuestInfo_Address1.getText().trim();
		reslogger.info(address1);
		if (address1.equalsIgnoreCase(Address1.trim())) {
			test_steps.add("Reservation Guest Info Address1 field verified : " + Address1);
			reslogger.info("Reservation Guest Info Address1 field verified : " + Address1);
		} else {
			test_steps.add("Reservation Guest Info Address1 field not found : " + Address1);
			reslogger.info("Reservation Guest Info Address1 field not found : " + Address1);
		}

		String city = res.CP_GuestInfo_City.getText().trim();
		reslogger.info(city);
		if (city.equalsIgnoreCase(City.trim())) {
			test_steps.add("Reservation Guest Info City field verified : " + City);
			reslogger.info("Reservation Guest Info City field verified : " + City);
		} else {
			test_steps.add("Reservation Guest Info City field not found : " + City);
			reslogger.info("Reservation Guest Info City field not found : " + City);
		}

		String postalcode = res.CP_GuestInfo_PostalCode.getText().trim();
		reslogger.info(postalcode);
		if (postalcode.equalsIgnoreCase(PostalCode.trim())) {
			test_steps.add("Reservation Guest Info PostalCode field verified : " + PostalCode);
			reslogger.info("Reservation Guest Info PostalCode field verified : " + PostalCode);
		} else {
			test_steps.add("Reservation Guest Info PostalCode field not found : " + PostalCode);
			reslogger.info("Reservation Guest Info PostalCode field not found : " + PostalCode);
		}

		String country = res.CP_GuestInfo_Country.getText().trim();
		reslogger.info(country);
		if (country.equalsIgnoreCase(Country.trim())) {
			test_steps.add("Reservation Guest Info Country field verified : " + Country);
			reslogger.info("Reservation Guest Info Country field verified : " + Country);
		} else {
			test_steps.add("Reservation Guest Info Country field not found : " + Country);
			reslogger.info("Reservation Guest Info Country field not found : " + Country);
		}

		String state = res.CP_GuestInfo_State.getText().trim();
		reslogger.info(state);

		if (!(state.equalsIgnoreCase("") || state.isEmpty())) {
			if (state.equalsIgnoreCase(State.trim())) {
				test_steps.add("Reservation Guest Info State field verified : " + State);
				reslogger.info("Reservation Guest Info State field verified : " + State);
			} else {
				test_steps.add("Reservation Guest Info State field not found : " + State);
				reslogger.info("Reservation Guest Info State field not found : " + State);
			}
		}
	}

	public void verifyMarketingInfo(WebDriver driver, String market, String referral, String source, String extRes,
			ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		assertEquals(market.toLowerCase().trim(),
				cpelements.MarketSegment_GuestInfo.getAttribute("title").toLowerCase().trim());
		reslogger.info("Marketing Info Market: " + market + " :Verified");
		test_steps.add("Marketing Info Market: " + market + " :Verified");

		assertEquals(referral.toLowerCase().trim(),
				cpelements.Referral_GuestInfo.getAttribute("title").toLowerCase().trim());
		reslogger.info("Marketing Info Referral: " + referral + " :Verified");
		test_steps.add("Marketing Info Referral: " + referral + " :Verified");

		assertEquals(source.toLowerCase().trim(), cpelements.CP_Reservation_Source.getText().toLowerCase().trim());
		reslogger.info("Marketing Info Source: " + source + " :Verified");
		test_steps.add("Marketing Info Source: " + source + " :Verified");

		assertEquals(extRes.toLowerCase().trim(),
				cpelements.CP_Reservation_ExtCnf.getAttribute("title").toLowerCase().trim());
		reslogger.info("Marketing Info EXT RES#: " + source + " :Verified");
		test_steps.add("Marketing Info EXT RES#: " + source + " :Verified");

	}

	public String calculateFeeAdjustment(WebDriver driver, ArrayList<String> feeAmountsInnceter,
			ArrayList<String> feeAmountOTAs, String otaFeeExist, String innFeeExist) {
		String feeAdjustment = null;
		double sumofInncenterAmount = 0.00, sumofOtaAmount = 0.00;
		if (innFeeExist.equalsIgnoreCase("Yes")) {
			for (int i = 0; i < feeAmountsInnceter.size(); i++) {
				Double result = Double.parseDouble(feeAmountsInnceter.get(i));
				sumofInncenterAmount = sumofInncenterAmount + result;
				sumofInncenterAmount = Double
						.parseDouble(Utility.convertDecimalFormat(String.valueOf(sumofInncenterAmount)));
			}
		}
		if (otaFeeExist.equalsIgnoreCase("Yes")) {
			for (int i = 0; i < feeAmountOTAs.size(); i++) {
				Double result = Double.parseDouble(feeAmountOTAs.get(i));
				sumofOtaAmount = sumofOtaAmount + result;
				sumofOtaAmount = Double.parseDouble(Utility.convertDecimalFormat(String.valueOf(sumofOtaAmount)));
			}
		}

		if (otaFeeExist.equalsIgnoreCase("Yes") && innFeeExist.equalsIgnoreCase("Yes")) {
			if (sumofInncenterAmount > sumofOtaAmount) {
				feeAdjustment = "-"
						+ Utility.convertDecimalFormat(String.valueOf(sumofInncenterAmount - sumofOtaAmount));

			} else {
				feeAdjustment = "+"
						+ Utility.convertDecimalFormat(String.valueOf(sumofOtaAmount - sumofInncenterAmount));
			}
		} else if (otaFeeExist.equalsIgnoreCase("Yes")) {
			feeAdjustment = Utility.convertDecimalFormat(String.valueOf(sumofOtaAmount));
		} else if (innFeeExist.equalsIgnoreCase("Yes")) {
			feeAdjustment = "-" + Utility.convertDecimalFormat(String.valueOf(sumofInncenterAmount));
		}

		return feeAdjustment;
	}

	public String calculateFeeAdjustment(WebDriver driver, ArrayList<String> feeAmountsInnceter,
			ArrayList<String> feeAmountOTAs) {
		String feeAdjustment = null;
		double sumofInncenterAmount = 0.00, sumofOtaAmount = 0.00;
		for (int i = 0; i < feeAmountsInnceter.size(); i++) {
			Double result = Double.parseDouble(feeAmountsInnceter.get(i));
			sumofInncenterAmount = sumofInncenterAmount + result;
			sumofInncenterAmount = Double
					.parseDouble(Utility.convertDecimalFormat(String.valueOf(sumofInncenterAmount)));
		}
		for (int i = 0; i < feeAmountOTAs.size(); i++) {
			Double result = Double.parseDouble(feeAmountOTAs.get(i));
			sumofOtaAmount = sumofOtaAmount + result;
			sumofOtaAmount = Double.parseDouble(Utility.convertDecimalFormat(String.valueOf(sumofOtaAmount)));
		}
		if (sumofInncenterAmount > sumofOtaAmount) {
			// feeAdjustment="-"+Math.round(Double.parseDouble(String.valueOf(sumofInncenterAmount-sumofOtaAmount)));
			feeAdjustment = "-" + Utility.convertDecimalFormat(String.valueOf(sumofInncenterAmount - sumofOtaAmount));

		} else {
			// feeAdjustment="+"+Math.round(Double.parseDouble(String.valueOf(sumofOtaAmount-sumofInncenterAmount)));
			feeAdjustment = "+" + Utility.convertDecimalFormat(String.valueOf(sumofOtaAmount - sumofInncenterAmount));

		}
		return feeAdjustment;
	}

	public String calculateAdjustmentFee(WebDriver driver, String feeCategory, String roomCharge,
			String feeCategoryValue) {
		String fee = null;
		if (feeCategory.equalsIgnoreCase("percent")) {
			Double result = (double) Math.round(Double.parseDouble(roomCharge) * Double.parseDouble(feeCategoryValue))
					/ 100;
			fee = String.valueOf(result);
		} else if (feeCategory.equalsIgnoreCase("flat")) {
			fee = String.valueOf(feeCategoryValue);
		}
		return fee;

	}

	public void clickFolioDescription(WebDriver driver, String description) throws InterruptedException {
		String path = "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-category']/span[contains(text(),'"
				+ description + "')]/../following-sibling::td[@class='lineitem-description']";
		try {
			Wait.WaitForElement(driver, path);
			WebElement element = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(element, driver);
			element.click();
			String path1 = "//h4[@class='modal-title' and contains(text(),'Item Detail')]";
			Wait.WaitForElement(driver, path1);
		} catch (Exception e) {
			path = "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-description']/a[contains(text(),'"
					+ description + "')]";
			Wait.WaitForElement(driver, path);
			WebElement element = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(element, driver);
			element.click();
			String path1 = "//span[contains(text(),'Payment Details')]";
			Wait.WaitForElement(driver, path1);
		}
	}

	public void verifyItemDetails(WebDriver driver, String date, String category, String desc, String amount,
			ArrayList<String> test_steps) throws InterruptedException {
		reslogger.info("******************* Verify Item Details **********************");
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		amount = df.format(Double.parseDouble(amount));
		reslogger.info(amount);
		String convertedDate = Utility.parseDate(date, "dd/MM/yyyy", "E, dd-MMM-yyyy");
		reslogger.info(convertedDate);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String LineItemSetMainPaymentPath = "//table[contains(@class,'popGrdFx')]//td"
				+ "/span[contains(@data-bind,'EffectiveDate')and contains(text(),'" + convertedDate + "')]"
				+ "/../following-sibling::td/span[contains(@data-bind,'Category')and contains(text(),'" + category
				+ "')]" + "/../following-sibling::td/a[contains(@data-bind,'Description')and contains(text(),'" + desc
				+ "')]" + "/../following-sibling::td/span[contains(@data-bind,'Amount')and contains(text(),'" + amount
				+ "')]";
		Wait.WaitForElement(driver, LineItemSetMainPaymentPath);
		WebElement SetLineItemElement = driver.findElement(By.xpath(LineItemSetMainPaymentPath));
		assertTrue(SetLineItemElement.isDisplayed(), "Failed: To Verify Line Item");
		test_steps.add(" Verified line item Date:<b>  " + date + "</b>");
		reslogger.info("Verified  line item Date: " + date);
		test_steps.add(" Verified  line item Category:<b>  " + category + "</b>");
		reslogger.info(" Verified  line item Category: " + category);
		test_steps.add("Verified  line item Description:<b>  " + desc + "</b>");
		reslogger.info(" Verified line item Description: " + desc);
		test_steps.add(" Verified line item Amount:<b>  " + amount + "</b>");
		reslogger.info(" Verified line item Amount: " + amount);

	}

	public void verifyNotes(WebDriver driver, String type, String subject, String description,
			ArrayList<String> test_steps) throws InterruptedException {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);
		Elements_Reservation ReservationPage = new Elements_Reservation(driver);
		WebElement notesType = null;
		WebElement notesSubject = null;
		WebElement notesDesctiption = null;
		try {
			if (Utility.validateString(type)) {
				notesType = driver
						.findElement(By.xpath("//div[text()='Notes']/parent::div//td[text()='" + type + "']"));
				Utility.ScrollToElement(notesType, driver);
				assertEquals(notesType.getText().toLowerCase().trim(), type.toLowerCase().trim(),
						"Failed : NotesType missmatched");
				reslogger.info("Verified Notes Type :" + type);
				test_steps.add("Verified Notes Type :" + type);
			}
			if (Utility.validateString(subject)) {
				notesSubject = driver.findElement(
						By.xpath("//td[contains(@data-bind,'text: subject') and contains(text(),'" + subject + "')]"));
				assertEquals(notesSubject.getText().toLowerCase().trim(), subject.toLowerCase().trim(),
						"Failed : Detail missmatched");
				reslogger.info("Verified Notes Subject :" + subject);

				test_steps.add("Verified Notes Subject :" + subject);
			}
			if (Utility.validateString(description)) {
				notesDesctiption = driver.findElement(
						By.xpath("//td[contains(@data-bind,'text: de') and contains(text(),'" + description + "')]"));
				assertEquals(notesDesctiption.getText().toLowerCase().trim(), description.toLowerCase().trim(),
						"Failed : Status missmatched");
				reslogger.info("Verified Notes Description :" + description);
				test_steps.add("Verified Notes Description :" + description);
			}
		} catch (Exception e) {
			e.printStackTrace();
		}

	}

	public String perDayRoomCharge(double totalRoomCharge, int stay) {
		double roomcharge = (double) Math.round(totalRoomCharge) / stay;
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		return df.format(roomcharge);
	}

	public HashMap<String, String> calculateTaxes(String oneDayRoomCharge, ArrayList<String> updatedTaxName,

			ArrayList<String> intaxValue, ArrayList<String> categoryTaxs, ArrayList<String> taxesAmountInReq,
			int days) {
		ArrayList<String> calcTaxes = new ArrayList<String>();
		HashMap<String, String> taxVal = new HashMap<String, String>();
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		for (int i = 0; i < intaxValue.size(); i++) {
			if (categoryTaxs.get(i).equalsIgnoreCase("percent")) {
				Double result = (double) Math
						.round(Double.parseDouble(oneDayRoomCharge) * Double.parseDouble(intaxValue.get(i))) / 100;

				calcTaxes.add(df.format(result));
			} else {
				calcTaxes.add(intaxValue.get(i));
			}
			taxVal.put(updatedTaxName.get(i), calcTaxes.get(i));
		}
		return taxVal;
	}

	public ArrayList<HashMap<String, HashMap<String, String>>> verifyVrBoTaxAdjustMent(WebDriver driver,
			ArrayList<String> test_steps, String taxLedgeraccount, HashMap<String, String> taxNameWithValue,
			ArrayList<String> taxName, ArrayList<String> TaxAmountInXml, ArrayList<String> datesRangeList,
			String IsTaxAddInXml) throws InterruptedException {
		ArrayList<HashMap<String, HashMap<String, String>>> taxAdjust = new ArrayList<HashMap<String, HashMap<String, String>>>();

		Elements_CPReservation res = new Elements_CPReservation(driver);
		DecimalFormat df = new DecimalFormat("##.00");
		Double calculatedRecieved = 0.00;
		double totalTaxinFolios = 0.0;
		int roomChargesFolioCount = getRoomChargeFolioItemCountInRes(driver);
		for (int i = 1; i <= roomChargesFolioCount; i++) {
			reslogger.info("=====================================================");
			test_steps.add("=====================================================");
			String xpath = "(//tbody[starts-with(@data-bind,'getElement: ComputedFolioItemsElement')]/tr/td/span[text()='"
					+ taxLedgeraccount + "']/../following-sibling::td/a)[" + i + "]";
			if (roomChargesFolioCount != i) {
				Wait.waitUntilPresenceOfElementLocated(xpath, driver);
				Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(xpath)), driver);
				driver.findElement(By.xpath(xpath)).click();
				test_steps.add("Click at Room Charge folio line item of Date: " + datesRangeList.get(i - 1));
				reslogger.info("Click at Room Charge folio line item of Date: " + datesRangeList.get(i - 1));
				Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);
				Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ItemDetailOnFolioPopup, driver);
				String taxSize = "//table[@class='table table-striped table-bordered table-hover popGrdFx']/thead/following::tbody[1]/tr";
				int size = driver.findElements(By.xpath(taxSize)).size() - 1;
				for (int j = 1; j <= size; j++) {
					double folioValue = 0.00;
					String xpath1 = "(//a[text()='" + taxName.get(j - 1).trim()
							+ "'])[1]/ancestor::td/following-sibling::td/span";
					Wait.waitUntilPresenceOfElementLocated(xpath1, driver);
					String val = driver.findElement(By.xpath(xpath1)).getText();
					folioValue = Double.parseDouble(val.replace("$", "").trim());
					totalTaxinFolios = totalTaxinFolios + folioValue;
					System.out.println(totalTaxinFolios);
					String taxsetup = df.format(Double.parseDouble(taxNameWithValue.get(taxName.get(j - 1))));
					assertEquals(taxsetup, df.format(folioValue));
					reslogger.info("Verified Tax for :" + taxName.get(j - 1) + " - " + taxsetup);
					test_steps.add("Verified Tax  for :" + taxName.get(j - 1) + " - " + taxsetup);
					HashMap<String, String> prodHashMap = new HashMap<String, String>();
					HashMap<String, HashMap<String, String>> hashMaps = new HashMap<String, HashMap<String, String>>();
					prodHashMap.put(taxName.get(j - 1), taxsetup);
					hashMaps.put(datesRangeList.get(i - 1), prodHashMap);
					taxAdjust.add(hashMaps);
				}

			} else {
				Wait.waitUntilPresenceOfElementLocated(xpath, driver);
				Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(xpath)), driver);
				driver.findElement(By.xpath(xpath)).click();
				test_steps.add("Click at Room Charge folio line item of Date: " + datesRangeList.get(i - 1));
				reslogger.info("Click at Room Charge folio line item of Date: " + datesRangeList.get(i - 1));
				Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);
				Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ItemDetailOnFolioPopup, driver);
				String taxSize = "//table[@class='table table-striped table-bordered table-hover popGrdFx']/thead/following::tbody[1]/tr";
				int size = driver.findElements(By.xpath(taxSize)).size() - 1;
				for (int j = 1; j <= size; j++) {
					Double substractAmount = 0.00;
					double folioValue = 0.00;
					String xpath1 = "(//a[text()='" + taxName.get(j - 1).trim()
							+ "'])[1]/ancestor::td/following-sibling::td/span";

					if (size != j) {
						Wait.waitUntilPresenceOfElementLocated(xpath1, driver);
						String val = driver.findElement(By.xpath(xpath1)).getText();
						folioValue = Double.parseDouble(val.replace("$", "").trim());
						totalTaxinFolios = totalTaxinFolios + folioValue;
						System.out.println(totalTaxinFolios);
						String taxsetup = df.format(Double.parseDouble(taxNameWithValue.get(taxName.get(j - 1))));
						assertEquals(taxsetup, df.format(folioValue));
						reslogger.info("Verified Tax  for :" + taxName.get(j - 1) + " - " + taxsetup);
						test_steps.add("Verified Tax  for :" + taxName.get(j - 1) + " - " + taxsetup);
						HashMap<String, String> prodHashMap = new HashMap<String, String>();
						HashMap<String, HashMap<String, String>> hashMaps = new HashMap<String, HashMap<String, String>>();
						prodHashMap.put(taxName.get(j - 1), taxsetup);
						hashMaps.put(datesRangeList.get(i - 1), prodHashMap);
						taxAdjust.add(hashMaps);
					} else {
						Wait.waitUntilPresenceOfElementLocated(xpath1, driver);
						String val = driver.findElement(By.xpath(xpath1)).getText();
						folioValue = Double.parseDouble(val.replace("$", "").trim());
						if (IsTaxAddInXml.equalsIgnoreCase("Yes")) {
							calculatedRecieved = Double.parseDouble(getSumOfArrayListItem(TaxAmountInXml));
						}
						if (calculatedRecieved > totalTaxinFolios) {
							substractAmount = calculatedRecieved - totalTaxinFolios;
							assertEquals(df.format(folioValue), df.format(substractAmount));
						} else {
							if (!IsTaxAddInXml.equalsIgnoreCase("Yes") && size == 1 && roomChargesFolioCount == 1) {
								// substractAmount = totalTaxinFolios - calculatedRecieved;
								assertEquals(calculatedRecieved, totalTaxinFolios);
							} else {
								substractAmount = totalTaxinFolios - calculatedRecieved;
								assertEquals(df.format(folioValue), "-" + df.format(substractAmount));
							}

						}

						reslogger.info("Verified Tax  for :" + taxName.get(j - 1) + " - " + df.format(folioValue));
						test_steps.add("Verified Tax  for :" + taxName.get(j - 1) + " - " + df.format(folioValue));
						HashMap<String, String> prodHashMap = new HashMap<String, String>();
						HashMap<String, HashMap<String, String>> hashMaps = new HashMap<String, HashMap<String, String>>();
						prodHashMap.put(taxName.get(j - 1), df.format(folioValue));
						hashMaps.put(datesRangeList.get(i - 1), prodHashMap);
						taxAdjust.add(hashMaps);
					}
				}

			}
			clickFolioPopupCancel(driver);
			test_steps.add("Close open folio line item");
			reslogger.info("Close open folio line item");
		}
		return taxAdjust;

	}

	public String getSumOfArrayListItem(ArrayList<String> Items) {
		DecimalFormat df = new DecimalFormat("##.00");
		Double sum = 0.00;
		for (String item : Items) {
			sum = sum + Double.parseDouble(item);

		}
		String calcAmount = df.format(sum);
		return calcAmount;
	}

	public String perDayRoomChargeIncludingExtraAdultChild(String isExtraAdultInXml, String isExtraChildInXml,
			String roomchargeAmount, String extraAdultAmount, String extraChildAmount, int days) {
		double totalRoomCharge = 0.00;
		if (isExtraAdultInXml.equalsIgnoreCase("Yes") && isExtraChildInXml.equalsIgnoreCase("Yes")) {
			totalRoomCharge = Double.parseDouble(roomchargeAmount) + Double.parseDouble(extraAdultAmount)
					+ Double.parseDouble(extraChildAmount);
		} else if (!isExtraAdultInXml.equalsIgnoreCase("Yes") && !isExtraChildInXml.equalsIgnoreCase("Yes")) {
			totalRoomCharge = Double.parseDouble(roomchargeAmount);
		} else if (!isExtraAdultInXml.equalsIgnoreCase("Yes") && isExtraChildInXml.equalsIgnoreCase("Yes")) {
			totalRoomCharge = Double.parseDouble(roomchargeAmount) + Double.parseDouble(extraChildAmount);
		} else if (isExtraAdultInXml.equalsIgnoreCase("Yes") && !isExtraChildInXml.equalsIgnoreCase("Yes")) {
			totalRoomCharge = Double.parseDouble(roomchargeAmount) + Double.parseDouble(extraAdultAmount);
		} else {

		}
		String oneDayRoomCharge = perDayRoomCharge(totalRoomCharge, days);
		return oneDayRoomCharge;

	}

	public HashMap<String, Double> getVrboTaxesInRoomChargeFolio(WebDriver driver, String taxLedgeraccount,
			ArrayList<String> taxName) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		HashMap<String, Double> taxvalue = new HashMap<String, Double>();
		DecimalFormat df = new DecimalFormat("##.00");
		Double calculatedRecieved = 0.00;
		double totalTaxinFolios = 0.0;
		int roomChargesFolioCount = getRoomChargeFolioItemCountInRes(driver);
		ArrayList<ArrayList<Double>> total = new ArrayList<ArrayList<Double>>();
		for (int i = 1; i <= roomChargesFolioCount; i++) {

			String xpath = "(//tbody[starts-with(@data-bind,'getElement: ComputedFolioItemsElement')]/tr/td/span[text()='"
					+ taxLedgeraccount + "']/../following-sibling::td/a)[" + i + "]";

			Wait.waitUntilPresenceOfElementLocated(xpath, driver);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(xpath)), driver);
			driver.findElement(By.xpath(xpath)).click();
			Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);
			Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ItemDetailOnFolioPopup, driver);
			String taxSize = "//table[@class='table table-striped table-bordered table-hover popGrdFx']/thead/following::tbody[1]/tr";
			int size = driver.findElements(By.xpath(taxSize)).size() - 1;

			ArrayList<Double> folioValue = new ArrayList<Double>();
			for (int j = 1; j <= size; j++) {
				double value = 0.00;
				String xpath1 = "(//a[text()='" + taxName.get(j - 1).trim()
						+ "'])[1]/ancestor::td/following-sibling::td/span";
				Wait.waitUntilPresenceOfElementLocated(xpath1, driver);
				String val = driver.findElement(By.xpath(xpath1)).getText();
				value = Double.parseDouble(val.replace("$", "").trim());
				folioValue.add(value);
			}
			total.add(i - 1, folioValue);

			clickFolioPopupCancel(driver);
			reslogger.info("Close open folio line item");
		}
		ArrayList<Double> calculated = addMultipleArrayListData(total);
		int j = 0;
		for (Double calcval : calculated) {
			if (calcval != 0) {
				taxvalue.put(taxName.get(j), calcval);
			}

			j++;
		}
		reslogger.info("Tax Value: " + taxvalue);
		return taxvalue;
	}

	public ArrayList<Double> addMultipleArrayListData(ArrayList<ArrayList<Double>> total) {
		DecimalFormat df = new DecimalFormat("##.00");
		int listSize = total.size();
		ArrayList<Double> sum = new ArrayList<Double>();
		int j = 0, k = 0;
		while (j < total.get(k).size()) {
			Double calc = 0.00;
			for (int i = 0; i < listSize; i++) {
				calc = Double.parseDouble(df.format(calc + total.get(i).get(j)));
			}
			sum.add(calc);
			j++;
		}

		return sum;

	}

	public HashMap<String, Double> getVrboFeeInFolio(WebDriver driver, ArrayList<String> feeDescription, int days)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		HashMap<String, Double> getFee = new HashMap<String, Double>();
		for (int j = 1; j <= feeDescription.size(); j++) {
			Double sum = 0.00;
			for (int i = 1; i <= days; i++) {
				driver.findElement(By.xpath("(//a[text()='" + feeDescription.get(j - 1) + "'])[" + i + "]")).click();
				Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);
				Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ItemDetailOnFolioPopup, driver);
				String getAmount = driver
						.findElement(By.xpath(
								"(//span[contains(text(),'" + feeDescription.get(j - 1) + "')]/following::td/span)[1]"))
						.getText();
				sum = sum + Double.parseDouble(getAmount.replace("$", "").trim());

				clickFolioPopupCancel(driver);
				test_steps.add("Close open folio line item");
				reslogger.info("Close open folio line item");
			}
			getFee.put(feeDescription.get(j - 1), sum);
		}
		try {
			if (driver.findElements(By.xpath("(//a[text()='Fee Adjustment'])[1]")).size() > 0) {
				driver.findElement(By.xpath("(//a[text()='Fee Adjustment'])[1]")).click();
				Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);
				Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ItemDetailOnFolioPopup, driver);
				String getAmount = driver.findElement(By.xpath(
						"(//span[contains(@data-bind,'text: $data.Description,visible')]/following::td/span)[1]"))
						.getText();
				clickFolioPopupCancel(driver);
				test_steps.add("Close open folio line item");
				reslogger.info("Close open folio line item");
				double adjustAmt = Double.parseDouble(getAmount.replace("$", "").trim());
				getFee.put("Fee Adjustment", adjustAmt);
			} else {
				reslogger.info("else part when adjustment for fee not available");
			}
		} catch (Exception e) {
			e.printStackTrace();
			reslogger.info("exception part when adjustment for fee not available");
		}
		return getFee;
	}

	/*
	 * public String getPhoneNumber(WebDriver driver) { String path =
	 * "//div[contains(@data-bind,'with:GuestInfo')]//span[contains(@data-bind,'mailing_formattedPhoneNumber')]";
	 * Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(
	 * path)), driver); String foundNo =
	 * driver.findElement(By.xpath(path)).getText(); return foundNo; }
	 * 
	 * public void selectContactSalutation(WebDriver driver, String salutation)
	 * throws InterruptedException { Elements_CPReservation res = new
	 * Elements_CPReservation(driver); ArrayList<String> test_steps = new
	 * ArrayList<String>(); Wait.WaitForElement(driver,
	 * OR_Reservation.CP_NewReservation_GuestSalutation);
	 * Wait.explicit_wait_visibilityof_webelement(res.
	 * CP_NewReservation_GuestSalutation, driver);
	 * Wait.explicit_wait_elementToBeClickable(res.
	 * CP_NewReservation_GuestSalutation, driver);
	 * Utility.ScrollToElement(res.CP_NewReservation_GuestSalutation, driver);
	 * res.clickContactSalutation.click(); String sal =
	 * "(//span[text()='"+salutation+"']/../..)[2]"; Wait.WaitForElement(driver,
	 * sal);
	 * 
	 * driver.findElement(By.xpath(sal)).click();
	 * test_steps.add("Selected Salutation : " + salutation);
	 * reslogger.info("Selected Salutation : " + salutation);
	 * 
	 * }
	 */

	public String basicSearch_WithGuestName(WebDriver driver, ArrayList<String> test_steps, String guestName)
			throws InterruptedException {
		Elements_Reservation_SearchPage resservationSearch = new Elements_Reservation_SearchPage(driver);
		String getGuestName = null;
		Wait.waitForElementToBeVisibile(By.xpath(OR.BasicGuestName), driver);
		resservationSearch.BasicGuestName.clear();
		resservationSearch.BasicGuestName.sendKeys(guestName);
		resservationSearch.Click_BasicSearch.click();
		Wait.wait3Second();
		if (resservationSearch.noRecordAlertMessage.isDisplayed()) {
			for (int i = 0; i < 5; i++) {
				resservationSearch.Click_BasicSearch.click();
				Wait.wait3Second();
				if (!resservationSearch.noRecordAlertMessage.isDisplayed()) {
					getGuestName = resservationSearch.Get_Guest_Name.getAttribute("title");
					test_steps.add("Searching for a reservation with guest name as : " + guestName);
					reslogger.info("Searching for a reservation with guest name as : " + guestName);
					break;
				}
			}
		} else {
			getGuestName = resservationSearch.Get_Guest_Name.getAttribute("title");
		}
		return getGuestName;
	}

	public String clickOnGuestName(WebDriver driver, ArrayList<String> test_steps, String guestName,
			boolean guestClick) {
		Elements_Reservation_SearchPage we = new Elements_Reservation_SearchPage(driver);
		Wait.explicit_wait_10sec(we.Get_Res_Number, driver);
		String reservationConfirmNum = we.Get_Res_Number.getText();
		test_steps.add("Displaying inncenter reservation confirmation number is : " + reservationConfirmNum);
		reslogger.info("Displaying inncenter reservation confirmation number is : " + reservationConfirmNum);
		if (guestClick) {
			we.Get_Guest_Name.click();
			try {
				Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_Reservation_PanelGuestProfileName), driver);

			} catch (Exception e) {
				try {
					clickOnOpenedReservationTab(driver, guestName);
				} catch (Exception e1) {
					Utility.refreshPage(driver);
					try {
						Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_Reservation_PanelGuestProfileName),
								driver);
					} catch (Exception e2) {
						String path = "//span[contains(@data-bind,'statusbarModel.guestName')][@class='ir-textTrim']";
						Wait.waitForElementToBeVisibile(By.xpath(path), driver);
					}
				}
			}
			test_steps.add("Clicking on guest name");
			reslogger.info("Clicking on guest name");
		}
		return reservationConfirmNum;
	}

	public void checkInGuestFromGuestProfileWithOrWithoutPayment(WebDriver driver, ArrayList<String> test_steps,
			String guestName) throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			navigateToReservationPage(driver);
			guestUnlimitedSearchAndOpen(driver, test_steps, guestName, true, 12);
			clickPencilIconOnPM(driver);
			if (!res.CP_NewReservation_SameAsMailingAddressCheckBox.isSelected()) {
				uncheck_BillingAddresSameAsMailingAddress(driver, test_steps, "Yes");
				savePaymentMethod(driver);
			}
			checkInGuestFromGuestProfile(driver, test_steps);
		} catch (Exception e) {
			System.out.println(e);
		}
	}

	public String guestUnlimitedSearchAndOpen(WebDriver driver, ArrayList<String> test_steps, String guestName,
			boolean openGuestProfile, int searchCount) throws InterruptedException {
		String reservationConfirmNum = null;
		String getGuestName = null;
		int searchedCount = 0;
		int refreshCount = 0;
		do {
			Wait.wait2Second();
			if (refreshCount == 2) {
				driver.navigate().refresh();
				Wait.wait2Second();
			}
			getGuestName = basicSearch_WithGuestName(driver, test_steps, guestName);
			searchedCount++;
			refreshCount++;

		} while (getGuestName == null && searchedCount < searchCount);

		if (getGuestName.contains(guestName)) {

			// if (getGuestName.equals(guestName)) {
			reservationConfirmNum = clickOnGuestName(driver, test_steps, guestName, openGuestProfile);
		} else {
			for (int i = 0; i < 5; i++) {
				getGuestName = basicSearch_WithGuestName(driver, test_steps, guestName);
				if (getGuestName.equals(guestName)) {
					reservationConfirmNum = clickOnGuestName(driver, test_steps, guestName, openGuestProfile);
					break;
				}
			}
		}
		driver.findElement(By.xpath("//ul[@class='sec_nav']//li[5]//i"));
		return reservationConfirmNum;
	}

	public void clickPencilIconOnPM(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_PencilIcon_PaymentMethod), driver);
		Utility.ScrollToElement(res.CP_NewReservation_PencilIcon_PaymentMethod, driver);
		res.CP_NewReservation_PencilIcon_PaymentMethod.click();
	}

	public void savePaymentMethod(WebDriver driver) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_Save_PaymentMethod), driver);
		res.CP_NewReservation_Save_PaymentMethod.click();
	}

	public void checkInGuestFromGuestProfile(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		test_steps.add("*******************  CHECK-IN A RESERVATION FROM GUEST PROFILE **********************");
		reslogger.info("*******************  CHECK-IN A RESERVATION FROM GUEST PROFILE **********************");
		Click_CheckInButton(driver, test_steps);
		// selectRoomAtPaymentCheckInPopup(driver, test_steps, roomNumbers);
		disableGenerateGuestReportToggle(driver, test_steps);
		try {
			clickOnProceedToCheckInPaymentButton(driver, test_steps);
		} catch (Exception e) {
			clickOnConfirmCheckInButton(driver, test_steps);
		}
		/*
		 * selectCashOnPaymentPopup(driver, test_steps);
		 * clickOnPayButtonOnPaymentPopup(driver, test_steps);
		 * checkInPaymentSuccessPopupClose(driver, test_steps);
		 */
		roomStatusDirty(driver, test_steps);
	}

	public void roomStatusDirty(WebDriver driver, ArrayList<String> test_steps) {
		String dirtyRoom = "//div[text()='The room status is dirty. Do you wish to proceed with check in?']";
		try {
			if (driver.findElements(By.xpath(dirtyRoom)).size() > 0) {
				driver.findElement(By.xpath("//button[text()='Confirm']")).click();
				test_steps.add("Clicking on  roomClass Dirty confirmation");
				reslogger.info("Clicking on  roomClass Dirty confirmation");
			}
		} catch (Exception e) {
			test_steps.add("Room Class dirty confirmation popup not came");
			reslogger.info("Room Class dirty confirmation popup not came");
		}
	}

	public void checkOutGuestFromGuestProfileWithOrWithoutPayment(WebDriver driver, ArrayList<String> test_steps,
			String guestName) throws Exception {
		checkInGuestFromGuestProfileWithOrWithoutPayment(driver, test_steps, guestName);
		clickCheckOutButton(driver, test_steps);
//		Click_CheckOutButton(driver, test_steps);
		disableGenerateGuestReportToggle(driver, test_steps);
		proceedToCheckOutPayment(driver, test_steps);
		// cpRes.inputAmountWhileCheckINAndCheckOut(driver, test_steps, zeroAmount);
		// clickCheckoutPayButton(driver, test_steps);
		payCheckinPaymentAndClickOnPay(driver, test_steps);
		clickCloseonSuccessfullCheckout(driver);
		test_steps.add("Click Close on Successfull Checkout");
		verifyReservationStatusStatus(driver, test_steps, "DEPARTED");
	}

	public void payCheckinPaymentAndClickOnPay(WebDriver driver, ArrayList<String> test_steps) {
		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			String path = "(//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@class='btn dropdown-toggle btn-default']/span)[2]";
			Wait.WaitForElement(driver, path);
			WebElement PaymentMethodElement = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(PaymentMethodElement, driver);
			Utility.clickThroughJavaScript(driver, PaymentMethodElement);
			PaymentMethodElement.click();
			// PaymentMethodElement.click();
			test_steps.add("Click Payment Method");
			reslogger.info("Click CPayment Method");
			String options = "//paymentmethod//div[contains(@class,'open')]/ul//li/a//span[@class='text'][contains(text(),'Cash')]";
			Wait.WaitForElement(driver, options);
			WebElement PaymentMethodOptions = driver.findElement(By.xpath(options));
			Utility.ScrollToElement(PaymentMethodOptions, driver);
			Utility.clickThroughJavaScript(driver, PaymentMethodOptions);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.checkOutPaymentPayButton), driver);
			res.checkOutPaymentPayButton.click();
			test_steps.add("Clicking on Pssay Button");
			reslogger.info("Clicking on Pay Button");

		} catch (Exception e) {
			System.out.println(e);
		}
	}

	public void clickCloseonSuccessfullCheckout(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CheckoutSuccessfulClose);
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.CheckoutSuccessfulClose, driver);
		res.checkoutSuccessfulClose.click();
		reslogger.info("Clicking on  Close Button");
	}

	public void updateReservationFromStayInfo(WebDriver driver, ArrayList<String> test_steps, String guestFullName,
			String action, ArrayList<String> checkInOutDates, String roomClass) throws Exception {
		navigateToReservationPage(driver);
		guestUnlimitedSearchAndOpen(driver, test_steps, guestFullName, true, 12);
		// searchWithGuestNameAndOpenProfile(driver, test_steps, guestFullName);
		ClickEditStayInfo(driver, test_steps);
		ClickStayInfo_ChangeDetails(driver, test_steps);
		editExpediaStayInfoConfrimation(driver, test_steps);
		String checkInDate = checkInOutDates.get(0);
		String checkOutDate = Utility.addDays(checkInOutDates.get(checkInOutDates.size() - 1), 1);
		test_steps.add("============ Updating reservation details from stay info =================");
		if (action.contains("update")) {
			EnterDate(driver, "start", Utility.parseDate(checkInDate, "dd/MM/yyyy", "MM/dd/yyyy"));
			test_steps.add("Updating CheckIn date as : <b>" + Utility.parseDate(checkInDate, "dd/MM/yyyy", "MM/dd/yyyy")
					+ "</b>");
		}
		if ((action.contains("update")) || (action.contains("extend")) || (action.contains("reduce"))) {
			EnterDate(driver, "end", Utility.parseDate(checkOutDate, "dd/MM/yyyy", "MM/dd/yyyy"));
			test_steps.add("Updating Checkout date : <b>" + Utility.parseDate(checkOutDate, "dd/MM/yyyy", "MM/dd/yyyy")
					+ "</b>");
		}
		click_FindRooms(driver, test_steps);
		if (action.contains("assign to unassign")) {
			selectRoomToReserve(driver, test_steps, roomClass, "Unassigned");
		}
		clickSaveButton(driver);
		try {
			changeTotalCostofStayConfrimation(driver, test_steps);
			verifySpinerLoading(driver);
		} catch (Exception f) {
			test_steps.add("Change the total cost of the stay Confirmation popup not Appear");
		}
		closeAllOpenedReservations(driver);
	}

	public void cancelReservationFromGuestDetails(WebDriver driver, ArrayList<String> test_steps, String guestFullName,
			String cancelReason) throws Exception {
		navigateToReservationPage(driver);
		guestUnlimitedSearchAndOpen(driver, test_steps, guestFullName, true, 12);
		test_steps.add("============ Cancel reservation =================");
		cancelReservation(driver, test_steps);
		enableVoidRoomCharge(driver, test_steps, true);
		try {
			provideReasonForCancelAndClickOnProceedToPayWithoutPayment(driver, test_steps, cancelReason, true);
		} catch (Exception e) {
			provideReasonForCancelAndClickOnProceedToPay(driver, test_steps, cancelReason, true);
			clickOnPayButtonOnPaymentPopup(driver, test_steps);
			checkInPaymentSuccessPopupClose(driver, test_steps);
		}
		verifyStatusAfterReservation(driver, test_steps, "CANCELLED");
		closeAllOpenedReservations(driver);
	}

	public void noShowReservationFromGuestDetails(WebDriver driver, ArrayList<String> test_steps, String guestFullName)
			throws Exception {
		navigateToReservationPage(driver);
		guestUnlimitedSearchAndOpen(driver, test_steps, guestFullName, true, 12);
		test_steps.add("============ No Show reservation =================");
		makeReservationNoShow(driver, test_steps);
		enableVoidRoomCharge(driver, test_steps, true);
		try {
			clickOnConfirmNoShowWithoutPayment(driver, test_steps);
		} catch (Exception e) {
			clickProceedToNoShowPaymentButton(driver, test_steps);
			checkInPaymentSuccessPopupClose(driver, test_steps);
		}
		verifyStatusAfterReservation(driver, test_steps, "NO SHOW");
		closeAllOpenedReservations(driver);
	}

	public void editExpediaStayInfoConfrimation(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		String confirmationText = "//span[contains(text(),' This reservation was booked on ')]";
		List<WebElement> confirm = driver.findElements(By.xpath(confirmationText));
		if (confirm.size() > 0) {
			Wait.WaitForElement(driver, confirmationText);
			WebElement confirmationTextElement = driver.findElement(By.xpath(confirmationText));
			assertEquals(confirmationTextElement.isDisplayed(), true);
			test_steps.add("Edit Expedia Reservation Stay info Confirmation popup Displayed ");
			reslogger.info("Edit Expedia Reservation Stay info Confirmation popup Displayed ");
			WebElement yesButton = driver.findElement(By.xpath(
					"//span[contains(text(),' This reservation was booked on ')]/ancestor::div[@class='modal-content']//button[text()='Yes']"));

			Utility.ScrollToElement(yesButton, driver);
			yesButton.click();
			test_steps.add("Edit Expedia Reservation Stay info Confirmation popup: Yes Button Clicked ");
			reslogger.info("Edit Expedia Reservation Stay info Confirmation popup: Yes Button Clicked  ");
		}
	}

	public void changeTotalCostofStayConfrimation(WebDriver driver, ArrayList test_steps) throws InterruptedException {

		String confirmationText = "//div[contains(text(),'Are you sure you wish to change the total cost of the stay')]";
		// Wait.WaitForElement(driver, confirmationText);
		Wait.explicit_wait_visibilityof_webelement(driver.findElement(By.xpath(confirmationText)), driver);
		WebElement confirmationTextElement = driver.findElement(By.xpath(confirmationText));
		assertEquals(confirmationTextElement.isDisplayed(), true);
		test_steps.add("Change the total cost of the stay Confirmation popup Displayed ");
		reslogger.info("Change the total cost of the stay Confirmation popup Displayed ");
		WebElement yesButton = driver.findElement(By.xpath(
				"//div[contains(text(),'Are you sure you wish to change the total cost of the stay')]/ancestor::div[@class='modal-content']//button[text()='Yes']"));

		Utility.ScrollToElement(yesButton, driver);
		yesButton.click();
		test_steps.add("Change the total cost of the stay Confirmation popup: Yes Button Clicked ");
		reslogger.info("Change the total cost of the stay Confirmation popup: Yes Button Clicked  ");

	}

	public void provideReasonForCancelAndClickOnProceedToPayWithoutPayment(WebDriver driver,
			ArrayList<String> test_steps, String reason, boolean voidRoomCharges) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		inputReason(driver, test_steps, reason);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.ProceedToPaymentButton2), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.ProceedToPaymentButton2), driver);
		Utility.ScrollToElement_NoWait(res.ProceedToPaymentButton2, driver);
		res.ProceedToPaymentButton2.click();
		test_steps.add("Clicking on '<b>PROCEED TO CANCELLATION PAYMENT</b>' Button");
		reslogger.info("Click 'PROCEED TO CANCELLATION PAYMENT' Button");

	}

	public void clickOnConfirmNoShowWithoutPayment(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.noShowConfirmPopupConfirmButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.noShowConfirmPopupConfirmButton), driver);
		res.noShowConfirmPopupConfirmButton.click();
		test_steps.add("Click on Confirm No Show Button");
		reslogger.info("Click on Confirm No Show Button");

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.noShowSuccessPopupClose2), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.noShowSuccessPopupClose2), driver);
		res.noShowSuccessPopupClose2.click();
		test_steps.add("Click on Close Button");
		reslogger.info("Click on Close Button");
	}

	/*
	 * public void verifyStatusAfterReservation(WebDriver driver, ArrayList<String>
	 * test_steps, String status) { Elements_CPReservation res = new
	 * Elements_CPReservation(driver);
	 * Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.
	 * HeaderStatus_AfterReservation), driver); String foundTxt =
	 * res.HeaderStatus_AfterReservation.getText();
	 * 
	 * assertEquals(foundTxt.toUpperCase(), status.toUpperCase(),
	 * "Failed to verify Status");
	 * test_steps.add("Successfully Verified Status is : <b>" + status + "</b>");
	 * reslogger.info("Successfully Verified Status is : <b>" + status + "</b>"); }
	 */

	public void updateReservationFromStayInfoForMRB(WebDriver driver, ArrayList<String> test_steps,
			ArrayList<String> guestNames, String action, ArrayList<String> checkInOutDates, String roomClass,
			String incOtherRoomClass, int guest) throws Exception {
		navigateToReservationPage(driver);
//		searchWithGuestNameAndOpenProfile(driver, test_steps, guestNames.get(0));
		guestUnlimitedSearchAndOpen(driver, test_steps, guestNames.get(0), true, 12);
		if (guest > 0) {
			clickEditStayInfoForMRB(driver, guestNames.get(guest));
			clickStayInfoChangeDetailsForMRB(driver, test_steps);
			editExpediaStayInfoConfrimation(driver, test_steps);
			String checkInDate = checkInOutDates.get(0);
			String checkOutDate = Utility.addDays(checkInOutDates.get(checkInOutDates.size() - 1), 1);
			test_steps.add("============ Updating reservation details from stay info =================");
			if (action.contains("update")) {
				EnterDate(driver, "start", Utility.parseDate(checkInDate, "dd/MM/yyyy", "MM/dd/yyyy"));
				test_steps.add("Updating CheckIn date as : <b>"
						+ Utility.parseDate(checkInDate, "dd/MM/yyyy", "MM/dd/yyyy") + "</b>");
			}
			if ((action.contains("update")) || (action.contains("extend"))) {
				EnterDate(driver, "end", Utility.parseDate(checkOutDate, "dd/MM/yyyy", "MM/dd/yyyy"));
				test_steps.add("Updating Checkout date : <b>"
						+ Utility.parseDate(checkOutDate, "dd/MM/yyyy", "MM/dd/yyyy") + "</b>");
			}
			if ((action.contains("reduce"))) {
				checkOutDate = checkInOutDates.get(checkInOutDates.size() - 1);
				EnterDate(driver, "end", Utility.parseDate(checkOutDate, "dd/MM/yyyy", "MM/dd/yyyy"));
				test_steps.add("Updating Checkout date : <b>"
						+ Utility.parseDate(checkOutDate, "dd/MM/yyyy", "MM/dd/yyyy") + "</b>");
			}

			click_FindRooms(driver, test_steps);
			if (action.contains("assign to unassign")) {
				selectRoomToReserve(driver, test_steps, roomClass, "Unassigned");
			}
			if (action.contains("room class change")) {
				ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, incOtherRoomClass);
				selectRoomToReserve(driver, test_steps, incOtherRoomClass, rooms.get(guest));
			}
			clickSaveButton(driver);
			try {
				changeTotalCostofStayConfrimation(driver, test_steps);
				verifySpinerLoading(driver);
			} catch (Exception f) {
				test_steps.add("Change the total cost of the stay Confirmation popup not Appear");
			}
		} else {
			for (int i = 0; i < guestNames.size(); i++) {
				clickEditStayInfoForMRB(driver, guestNames.get(i));
				clickStayInfoChangeDetailsForMRB(driver, test_steps);
				editExpediaStayInfoConfrimation(driver, test_steps);
				String checkInDate = checkInOutDates.get(0);
				String checkOutDate = Utility.addDays(checkInOutDates.get(checkInOutDates.size() - 1), 1);
				test_steps.add("============ Updating reservation details from stay info =================");
				if (action.contains("update")) {
					EnterDate(driver, "start", Utility.parseDate(checkInDate, "dd/MM/yyyy", "MM/dd/yyyy"));
					test_steps.add("Updating CheckIn date as : <b>"
							+ Utility.parseDate(checkInDate, "dd/MM/yyyy", "MM/dd/yyyy") + "</b>");
				}
				if ((action.contains("update")) || (action.contains("extend"))) {
					EnterDate(driver, "end", Utility.parseDate(checkOutDate, "dd/MM/yyyy", "MM/dd/yyyy"));
					test_steps.add("Updating Checkout date : <b>"
							+ Utility.parseDate(checkOutDate, "dd/MM/yyyy", "MM/dd/yyyy") + "</b>");
				}
				if ((action.contains("reduce"))) {
					checkOutDate = checkInOutDates.get(checkInOutDates.size() - 1);
					EnterDate(driver, "end", Utility.parseDate(checkOutDate, "dd/MM/yyyy", "MM/dd/yyyy"));
					test_steps.add("Updating Checkout date : <b>"
							+ Utility.parseDate(checkOutDate, "dd/MM/yyyy", "MM/dd/yyyy") + "</b>");
				}

				click_FindRooms(driver, test_steps);
				if (action.contains("assign to unassign")) {
					selectRoomToReserve(driver, test_steps, roomClass, "Unassigned");
				}
				if (action.contains("room class change")) {
					ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps,
							incOtherRoomClass);
					selectRoomToReserve(driver, test_steps, incOtherRoomClass, rooms.get(i));
				}
				clickSaveButton(driver);
				try {
					changeTotalCostofStayConfrimation(driver, test_steps);
					verifySpinerLoading(driver);
				} catch (Exception f) {
					test_steps.add("Change the total cost of the stay Confirmation popup not Appear");
				}
			}
		}
		closeAllOpenedReservations(driver);
	}

	public void clickEditStayInfoForMRB(WebDriver driver, String guestFullName)
			throws InterruptedException, ParseException {
		String editIconXpath = null;
		try {
			editIconXpath = "//span[contains(text(),'" + guestFullName + "')]/../../../.."
					+ "//button[@class='ir-iconCircle btn ir-btn ir-no-space pull-right']";
			Wait.waitForElementToBeVisibile(By.xpath(editIconXpath), driver);
			driver.findElement(By.xpath(editIconXpath)).click();
		} catch (Exception e) {
			// TODO: handle exception
		}
	}

	public void clickStayInfoChangeDetailsForMRB(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		try {
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.stayInfoChangeDetails2), driver, 15);
			element.stayInfoChangeDetails2.click();
			reslogger.info("Click Stay Info 'Change Stay Details");
			test_steps.add("Clicking on 'Change Stay Details' from Stay Info ");
		} catch (Exception e) {
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.stayInfoChangeDetails3), driver, 20);
			element.stayInfoChangeDetails3.click();
			reslogger.info("Click Stay Info 'Change Stay Details");
			test_steps.add("Clicking on 'Change Stay Details' from Stay Info ");
		}
	}

	public void rollBackReservation(WebDriver driver, ArrayList<String> test_steps, String guestFullName,
			String statusAfterRollBack) throws Exception {
		navigateToReservationPage(driver);
		guestUnlimitedSearchAndOpen(driver, test_steps, guestFullName, true, 12);
//		searchWithGuestNameAndOpenProfile(driver, test_steps, guestFullName);
		test_steps.add("============ Rollback the reservation =================");
		click_RollBackButton(driver, test_steps);
		try {
			clickYesButtonRollBackMsg(driver, test_steps);
		} catch (Exception e) {
			try {
				clickYesButtonRollBackWithoutPayment(driver, test_steps);
			} catch (Exception e1) {
				clickYesButtonRollBackWithoutPaymentForMRB(driver, test_steps);
			}
		}
		verifyStatusAfterReservation(driver, test_steps, statusAfterRollBack);
	}

	public void clickYesButtonRollBackWithoutPayment(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.RollBacktPopupYesButton2);
		Utility.ScrollToElement(res.RollBacktPopupYesButton2, driver);
		res.RollBacktPopupYesButton2.click();
		test_steps.add("Click Yes Button");
		reslogger.info("Click  Yes Button");
	}

	public void clickYesButtonRollBackWithoutPaymentForMRB(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.rollBacktPopupYesButtonForMRB), driver);
		res.rollBacktPopupYesButtonForMRB.click();
		test_steps.add("Clicking on 'Yes' Button");
		reslogger.info("Clicking on 'Yes' Button");
		try {
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_Reservation_CheckInAllButton), driver);
		} catch (Exception e) {
			System.out.println(e);
		}
	}

	public void makingBulkActions(WebDriver driver, String fullName, String actionCategory, String reason,
			ArrayList<String> test_steps) throws Exception {
		guestUnlimitedSearchAndOpen(driver, test_steps, fullName, true, 12);
		test_steps.add("searched resrevation created from tape chart: " + fullName);
		selectAllSearchedReservationCheckBox(driver, test_steps);
		if (actionCategory.equalsIgnoreCase("Cancel")) {
			test_steps.add("**********MAKING BULK CANCEL ON CREATED RESERVATION************");
			System.out.println("ENTER BULK CANCEL");
			clickBulkOptionCancelAction(driver, actionCategory, test_steps);
			enterBulkCancelReason(driver, reason);
			clickOnProcessButtonInBulkCheckInPopUp(driver, test_steps);
			closeBulkActionPopUp(driver, test_steps);
		} else if (actionCategory.equalsIgnoreCase("No Show")) {
			test_steps.add("**********MAKING BULK NO SHOW ON CREATED RESERVATION************");
			System.out.println("ENTER BULK NO SHOW");
			clickNoShowInBulkDropdown(driver, actionCategory, test_steps);
			clickOnProcessButtonInBulkCheckInPopUp(driver, test_steps);
			closeBulkNoShow(driver, test_steps);
		}
	}

	public void enterBulkCancelReason(WebDriver driver, String reason) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.BulkCancelReason, driver);
		element.bulkCancelReason.sendKeys(reason);
	}

	public void clickNoShowInBulkDropdown(WebDriver driver, String actionCategory, ArrayList<String> test_steps) {
		Elements_Reservation_SearchPage resservationSearch = new Elements_Reservation_SearchPage(driver);
		Wait.waitUntilPresenceOfElementLocated(OR.Click_Bulk_Action, driver);
		resservationSearch.Click_Bulk_Action.click();
		test_steps.add("Click Bulk Action");
		String action = "(//a/span[.='" + actionCategory + "'])[2]";
		Wait.waitUntilPresenceOfElementLocated(action, driver);
		driver.findElement(By.xpath(action)).click();
		test_steps.add("Click at: " + actionCategory);
		reslogger.info("Click at: " + actionCategory);
	}

	public void closeBulkNoShow(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation elementsReservation = new Elements_CPReservation(driver);
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.CloseBulNoShowPopup, driver);
		elementsReservation.closeBulNoShowPopup.click();
		test_steps.add("Bulk Action PopUp Closed Successfully");
		reslogger.info("Bulk Action PopUp Closed Successfully");
	}

	public void clickCloseButtonOfSuccessModelPopupAfterCheckIn(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.closeButtonCheckin);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.closeButtonCheckin), driver, 10);
		// res.CP_Reservation_NoShowSuccessCloseButton.click();
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", res.closeButtonCheckin);
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
		verifySpinerLoading(driver);
	}

	public ArrayList<String> getNoShowPaymentsForAllGuestsForInterval(WebDriver driver, ArrayList<String> test_steps,
			ArrayList<String> checkInDates, ArrayList<String> checkOutDates, String attr, String attrValue,
			boolean value, int interval, ArrayList<Boolean> isProRateOn) throws Exception {
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> allAmounts = new ArrayList<>();
		List<WebElement> rooms = elements.guestFolioAllGuestsFromDropDown;
		for (int i = 0; i < rooms.size(); i++) {
			int j = i + 1;
			elements.guestFolioGuestDropDown.click();
			Wait.wait1Second();
			rooms.get(i).click();
			HashMap<String, String> roomCharges = getRoomChargesFromFolioBasedOnDates1(driver, test_steps,
					checkInDates.get(i), checkOutDates.get(i), value, interval, isProRateOn.get(i));
			String noShowPayment = calculationOfDeposiAmountToBePaidForRateV2(roomCharges, attr, attrValue);
			test_steps.add("No Show payment is calculated for Guest" + j + " is <b>" + noShowPayment + "</b>");
			allAmounts.add(noShowPayment);
		}
		return allAmounts;
	}

	public void clickStayInfoCheckIn(WebDriver driver, ArrayList<String> test_steps, String roomNO)
			throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		String path = "//div[contains(@data-bind,'ReservationStatusLookup')]/div//div[contains(@class,'ir-roomInfo')]//span[contains(text(),'"
				+ roomNO + "')]"
				+ "/ancestor::div/div[contains(@class,'detailsbox')]/following-sibling::div//button[contains(text(),'Check In')]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		WebElement element = driver.findElement(By.xpath(path));
		Utility.ScrollToViewElementINMiddle(driver, element);
		element.click();

		test_steps.add("Room <b>" + roomNO + "</b> in the MRB Reservation Click CheckIn Button");
		reslogger.info("Room " + roomNO + " in the MRB Reservation Click CheckIn Button");

	}

	public double calculattionRatesAsPerAdultsAndChildCapacityMRB(WebDriver driver,
			HashMap<String, String> ratePerNight, String ratePlanAdult, String ratePlanChild,
			HashMap<String, String> addAdultPerNight, HashMap<String, String> addChildPerNight, String roomClassPersons,
			String roomClassAdult, String reservationAdult, String reservationChild, ArrayList<String> testSteps,
			String message, String roomClass, List<Date> dates, String format)
			throws InterruptedException, NumberFormatException, ParseException {

		double sumValue = 0.00;
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		ArrayList<Double> rateAdultChild = new ArrayList<Double>();
		double rate = 0.00;
		int reservationTotalAdultAndChild = Integer.parseInt(reservationAdult) + Integer.parseInt(reservationChild);

		if (!reservationAdult.equals("0") && !reservationChild.equals("0")) {
			if (Integer.parseInt(reservationAdult) <= Integer.parseInt(ratePlanAdult)
					&& reservationTotalAdultAndChild <= Integer.parseInt(ratePlanChild)) {
				for (int i = 0; i < dates.size() - 1; i++) {
					rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
							format);
					sumValue = sumValue + rateAdultChild.get(0);
					rate = sumValue;
				}
				reslogger.info(rate);
				verifyRoomClassCurrency(driver, testSteps, roomClass, String.valueOf(rate));

			} else if (Integer.parseInt(reservationAdult) <= Integer.parseInt(ratePlanAdult)
					&& reservationTotalAdultAndChild > Integer.parseInt(ratePlanChild)
					&& !(reservationTotalAdultAndChild > Integer.parseInt(roomClassPersons))) {
				int child = reservationTotalAdultAndChild - Integer.parseInt(ratePlanChild);
				for (int i = 0; i < dates.size() - 1; i++) {
					rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
							format);
					double alwaysChild = rateAdultChild.get(0) + (child * rateAdultChild.get(2));
					sumValue = sumValue + alwaysChild;
					rate = sumValue;
				}
				reslogger.info(rate);
				verifyRoomClassCurrency(driver, testSteps, roomClass, String.valueOf(rate));
			} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(ratePlanAdult)
					&& Integer.parseInt(reservationChild) <= Integer.parseInt(ratePlanAdult)
					&& !(Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult))) {
				int adult = Integer.parseInt(reservationAdult) - Integer.parseInt(ratePlanAdult);
				for (int i = 0; i < dates.size() - 1; i++) {
					rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
							format);
					double alwaysAdult = rateAdultChild.get(0) + (adult * rateAdultChild.get(1));
					sumValue = sumValue + alwaysAdult;
					rate = sumValue;
				}
				reslogger.info(rate);
				verifyRoomClassCurrency(driver, testSteps, roomClass, String.valueOf(rate));
			} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(ratePlanAdult)
					&& reservationTotalAdultAndChild <= Integer.parseInt(ratePlanChild)
					&& !(Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult))) {
				int adult = Integer.parseInt(reservationAdult) - Integer.parseInt(ratePlanAdult);
				for (int i = 0; i < dates.size() - 1; i++) {
					rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
							format);
					double alwaysAdult = rateAdultChild.get(0) + (adult * rateAdultChild.get(1));
					sumValue = sumValue + alwaysAdult;
					rate = sumValue;
				}
				reslogger.info(rate);
				verifyRoomClassCurrency(driver, testSteps, roomClass, String.valueOf(rate));
			} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(ratePlanAdult)
					&& reservationTotalAdultAndChild > Integer.parseInt(ratePlanChild)
					&& !(Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult))
					&& !(reservationTotalAdultAndChild > Integer.parseInt(roomClassPersons))) {
				int adult = Integer.parseInt(reservationAdult) - Integer.parseInt(ratePlanAdult);
				int child = reservationTotalAdultAndChild - Integer.parseInt(ratePlanChild);
				if (adult == child) {
					for (int i = 0; i < dates.size() - 1; i++) {
						rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
								format);
						double alwaysAdult = rateAdultChild.get(0) + (adult * rateAdultChild.get(1));
						sumValue = sumValue + alwaysAdult;
						rate = sumValue;
					}
				} else if (child > adult) {
					int newChild = child - adult;
					for (int i = 0; i < dates.size() - 1; i++) {
						rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
								format);
						double couldBeChildAndAdult = rateAdultChild.get(0) + (adult * rateAdultChild.get(1))
								+ (newChild * rateAdultChild.get(2));
						sumValue = sumValue + couldBeChildAndAdult;
						rate = sumValue;
					}
				}

				reslogger.info(rate);
				verifyRoomClassCurrency(driver, testSteps, roomClass, String.valueOf(rate));
			} else if (Integer.parseInt(reservationAdult) == Integer.parseInt(ratePlanAdult)
					&& reservationTotalAdultAndChild > Integer.parseInt(ratePlanChild)
					&& !(reservationTotalAdultAndChild > Integer.parseInt(roomClassPersons))) {
				int child = reservationTotalAdultAndChild - Integer.parseInt(ratePlanChild);
				for (int i = 0; i < dates.size() - 1; i++) {
					rateAdultChild = calculationDateWise(ratePerNight, addAdultPerNight, addChildPerNight, dates, i,
							format);
					double alwaysChild = rateAdultChild.get(0) + (child * rateAdultChild.get(2));
					sumValue = sumValue + alwaysChild;
					rate = sumValue;
				}
				reslogger.info(rate);
				verifyRoomClassCurrency(driver, testSteps, roomClass, String.valueOf(rate));
			}
		} else if (reservationAdult.equals("0") && reservationChild.equals("0")) {
			verify_errorMessage(driver, testSteps, message);
		} else if (reservationAdult.equals("0")
				&& Integer.parseInt(reservationChild) > Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver, testSteps, message);
		} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult)
				&& reservationChild.equals("0")) {
			verify_errorMessage(driver, testSteps, message);
		} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult)
				&& Integer.parseInt(reservationChild) > Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver, testSteps, message);
		} else if (Integer.parseInt(reservationAdult) < Integer.parseInt(roomClassAdult)
				&& Integer.parseInt(reservationChild) > Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver, testSteps, message);
		} else if (Integer.parseInt(reservationAdult) > Integer.parseInt(roomClassAdult)
				&& Integer.parseInt(reservationChild) < Integer.parseInt(roomClassPersons)) {
			verify_errorMessage(driver, testSteps, message);
		}
		return rate;

	}

	public ArrayList<String> bookReservationFromQuote(WebDriver driver, ArrayList<String> testSteps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.bookQuote);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.bookQuote), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.bookQuote), driver);
		Utility.ScrollToElement(res.bookQuote, driver);
		res.bookQuote.click();
		reslogger.info("Click on Book");
		testSteps.add("Click on Book");

		Wait.WaitForElement(driver, OR_Reservation.confirmBooking);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.confirmBooking), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.confirmBooking), driver);
		Utility.ScrollToElement(res.confirmBooking, driver);
		res.confirmBooking.click();
		reslogger.info("Click on 'Confirm Booking'");
		testSteps.add("Click on 'Confirm Booking'");

		Wait.WaitForElement(driver, OR_Reservation.closeBookingSuccessfullPopup);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.closeBookingSuccessfullPopup), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.closeBookingSuccessfullPopup), driver);
		Utility.ScrollToElement(res.closeBookingSuccessfullPopup, driver);
		res.closeBookingSuccessfullPopup.click();
		reslogger.info("Click on 'Close' booking successfull popup");
		testSteps.add("Click on 'Close' booking successfull popup");

		Wait.WaitForElement(driver, OR_Reservation.CP_GuestInfo_GuestName);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_GuestInfo_GuestName), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_GuestInfo_GuestName), driver);

		return testSteps;

	}

	public String getRoomChargesFromTripSummary(WebDriver driver) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.RoomChargesInTripSummary);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.RoomChargesInTripSummary), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RoomChargesInTripSummary), driver);
		String getAmount = String.format("%.0f",
				Double.parseDouble(Utility.RemoveDollarandSpaces(driver, element.RoomChargesInTripSummary.getText())));

		return getAmount;
	}

	/*
	 * public ArrayList<ArrayList<String>>
	 * intervalRateVerificationInChangeStayDetails(WebDriver driver, String
	 * dateFormat, String checkInDate, String checkOutDate, String adults, String
	 * child, String roomClass, String intervalLength,
	 * 
	 * String baseAmount, String adultCapacity, String personCapacity, boolean
	 * isAdditionalChargesApplied, String maxAdult, String maxPerson, String
	 * additionalAdultCharges, String additionalChildCharges, boolean
	 * isProRateApplied, String proRatePerNight, String
	 * proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String
	 * folioName, ArrayList<String> ratesList, String totalRoomCharges,
	 * ArrayList<String> testSteps) throws InterruptedException,
	 * NumberFormatException, ParseException {
	 * 
	 * Elements_CPReservation reservationElement = new
	 * Elements_CPReservation(driver); ArrayList<String> rateList = new
	 * ArrayList<>(); ArrayList<String> dates = new ArrayList<>(); String
	 * isRoomChargesEqual = "no";
	 * 
	 * double pro_rate = Double.parseDouble(proRatePerNight); double base_amount =
	 * Double.parseDouble(baseAmount);
	 * 
	 * if (pro_rate > base_amount) pro_rate = base_amount;
	 * 
	 * // Number of Days int numberofDays = Integer
	 * .parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate,
	 * dateFormat, "dd/MM/yyyy"), Utility.parseDate(checkOutDate, dateFormat,
	 * "dd/MM/yyyy")));
	 * 
	 * String rateApplied = "";
	 * 
	 * int fullIntervals = 0; int halfIntervals = 0; reslogger.info("numberofDays: "
	 * + numberofDays); if (numberofDays >= (Integer.parseInt(intervalLength))) {
	 * fullIntervals = numberofDays / Integer.parseInt(intervalLength);
	 * halfIntervals = numberofDays % Integer.parseInt(intervalLength); }
	 * System.out.println("Full Interval:" + fullIntervals);
	 * System.out.println("Half Interval:" + halfIntervals);
	 * 
	 * testSteps.add("Interval lenght: " + intervalLength);
	 * testSteps.add("Number of nights: " + numberofDays);
	 * testSteps.add("Full interval: " + fullIntervals);
	 * testSteps.add("Half interval: " + halfIntervals);
	 * 
	 * int interval = Integer.parseInt(intervalLength); testSteps.add("");
	 * 
	 * String totalRateValue =
	 * "//div[contains(@class,'room-search-result-container')]//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]"
	 * ;
	 * 
	 * String avgPerNight =
	 * "//div[contains(@class,'room-search-result-container')]//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]"
	 * ; String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]"
	 * ;
	 * 
	 * String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
	 * String roomClassExpand =
	 * "//div[contains(@class='room-search-result-container']//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
	 * 
	 * WebElement totalRateValueElement = null; WebElement roomClassExpandElement =
	 * null; WebElement averagePerNightElement = null;
	 * 
	 * Wait.WaitForElement(driver, avgPerNight);
	 * Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
	 * Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
	 * averagePerNightElement = driver.findElement(By.xpath(avgPerNight));
	 * 
	 * try { totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
	 * roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand)); }
	 * catch (Exception e) { totalRateValueElement =
	 * driver.findElement(By.xpath(totalRateValueMRB)); roomClassExpandElement =
	 * driver.findElement(By.xpath(roomClassMRBExpand));
	 * 
	 * } // IF Pro-Rate/Addtional Charges off String averagePerNight = "";
	 * 
	 * reslogger.info("baseAmount: " + baseAmount); double intial = 0;
	 * 
	 * if ((Integer.parseInt(adults) + Integer.parseInt(child)) <=
	 * Integer.parseInt(personCapacity)) { if (!isProRateApplied &&
	 * !isAdditionalChargesApplied) {
	 * 
	 * System.out.println("**********************************First if:");
	 * 
	 * if (fullIntervals == 0) {
	 * 
	 * intial = base_amount;
	 * 
	 * }
	 * 
	 * else if (fullIntervals > 0 && halfIntervals == 0) {
	 * 
	 * intial = base_amount * fullIntervals;
	 * 
	 * } else {
	 * 
	 * int total = fullIntervals + 1; intial = base_amount * total;
	 * 
	 * } reslogger.info("Calculated Rate:" + intial);
	 * 
	 * } if (isProRateApplied && !isAdditionalChargesApplied) {
	 * 
	 * System.out.println("**********************************Second if:");
	 * reslogger.info("======Pro stay only =======");
	 * 
	 * if (fullIntervals == 0) {
	 * 
	 * intial = base_amount;
	 * 
	 * } else if (fullIntervals > 0 && halfIntervals == 0) {
	 * 
	 * intial = base_amount * fullIntervals; }
	 * 
	 * else {
	 * 
	 * double total_fullAmount = base_amount * fullIntervals;
	 * reslogger.info("total_fullAmount: " + total_fullAmount);
	 * 
	 * double total_halfAmount = (Double.parseDouble(proRatePerNight) *
	 * halfIntervals); reslogger.info("total_halfAmount: " + total_halfAmount);
	 * intial = total_fullAmount + total_halfAmount;
	 * 
	 * }
	 * 
	 * reslogger.info("Calculated Rate:" + intial);
	 * 
	 * }
	 * 
	 * System.out.println("Number of Days:" + numberofDays);
	 * System.out.println("intervalLength:" + intervalLength);
	 * System.out.println("fullIntervals:" + fullIntervals);
	 * System.out.println("half:" + halfIntervals); int adultDifference = 0; int
	 * childDifference = 0; int personDifference = 0;
	 * 
	 * reslogger.info("child: " + child); reslogger.info("adults: " + adults); int
	 * child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
	 * reslogger.info("child_adults" + child_adults);
	 * 
	 * // if Additional Charges Applied ANd ProRate False if
	 * (isAdditionalChargesApplied && !isProRateApplied) {
	 * System.out.println("**********************************Third if:");
	 * 
	 * if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) { if
	 * (Integer.parseInt(adults) > Integer.parseInt(maxAdult)) adultDifference =
	 * Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
	 * 
	 * child_adults = child_adults - adultDifference; int count = 0; boolean isTrue
	 * = false; System.out.println("child_adults: " + child_adults); int
	 * intMaxPerson = Integer.parseInt(maxPerson); if (child_adults > intMaxPerson)
	 * { System.out.println("child is also diff"); for (int i = 1; i < child_adults;
	 * i++) { System.out.println("i: " + i); child_adults = child_adults - 1;
	 * System.out.println("total: " + child_adults);
	 * System.out.println("max person: " + intMaxPerson); if (child_adults ==
	 * intMaxPerson) { System.out.println("in total = max person"); count = i;
	 * isTrue = true; break; } }
	 * 
	 * }
	 * 
	 * if (isTrue) { childDifference = count; }
	 * System.out.println("Additonal Adult:" + adultDifference);
	 * System.out.println("Additonal Child:" + childDifference);
	 * 
	 * if (fullIntervals == 0) {
	 * 
	 * reslogger.info("adult: " + adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))); reslogger.info("child: " +
	 * childDifference * (Double.parseDouble(additionalChildCharges)));
	 * reslogger.info("base_amount: " + base_amount);
	 * reslogger.info("fullIntervals: 0");
	 * 
	 * intial = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * }
	 * 
	 * else if (fullIntervals > 0 && halfIntervals == 0) {
	 * 
	 * double one = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * reslogger.info("one: " + one); intial = one * fullIntervals;
	 * 
	 * } else {
	 * 
	 * int total = fullIntervals + 1; double one = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * reslogger.info("one: " + one); intial = one * total; }
	 * reslogger.info("expected rate: " + intial);
	 * 
	 * }
	 * 
	 * } // if Additional Charges Applied And ProRate True if
	 * (isAdditionalChargesApplied && isProRateApplied) {
	 * System.out.println("**********************************4th if:");
	 * 
	 * if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity) ||
	 * numberofDays < (Integer.parseInt(intervalLength))) {
	 * 
	 * if (Integer.parseInt(adults) > Integer.parseInt(maxAdult)) adultDifference =
	 * Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
	 * 
	 * child_adults = child_adults - adultDifference; // 5 int count = 0; boolean
	 * isTrue = false; System.out.println("child_adults: " + child_adults); int
	 * intMaxPerson = Integer.parseInt(maxPerson); if (child_adults > intMaxPerson)
	 * { System.out.println("child is also diff"); for (int i = 1; i < child_adults;
	 * i++) { System.out.println("i: " + i); child_adults = child_adults - 1;
	 * System.out.println("total: " + child_adults);
	 * System.out.println("max person: " + intMaxPerson); if (child_adults ==
	 * intMaxPerson) { System.out.println("in total = max person"); count = i;
	 * isTrue = true; break; } }
	 * 
	 * }
	 * 
	 * if (isTrue) { childDifference = count; }
	 * 
	 * System.out.println("Additonal Adult:" + adultDifference);
	 * System.out.println("Additonal Child:" + childDifference);
	 * 
	 * testSteps.add("Additonal Adult:" + adultDifference);
	 * testSteps.add("Additonal Child:" + childDifference);
	 * 
	 * if (adultDifference > 0 || childDifference > 0) {
	 * 
	 * if (fullIntervals > 0 && halfIntervals > 0) { //
	 * reslogger.info("apply half and ful both"); double fullamount = base_amount +
	 * (adultDifference * (Double.parseDouble(additionalAdultCharges))) +
	 * (childDifference * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * fullamount = fullIntervals * fullamount;
	 * 
	 * double half_amount = Double.parseDouble(proRatePerNight) + (adultDifference *
	 * Double.parseDouble(proRateAdditionalAdultCharges)) + (childDifference *
	 * (Double.parseDouble(proRateAdditionalChildCharges)));
	 * 
	 * half_amount = half_amount * halfIntervals; reslogger.info("fullamount: " +
	 * fullamount); reslogger.info("half_amount: " + half_amount);
	 * 
	 * intial = fullamount + half_amount; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * if (fullIntervals > 0 && halfIntervals == 0) {
	 * reslogger.info("apply full both");
	 * 
	 * intial = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * intial = intial * fullIntervals; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * if (fullIntervals == 0) {
	 * 
	 * intial = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * reslogger.info(intial);
	 * 
	 * } } else { if (fullIntervals == 0) { intial = base_amount;
	 * 
	 * } if (fullIntervals > 0 && halfIntervals > 0) {
	 * 
	 * double full = fullIntervals * base_amount; reslogger.info(full);
	 * 
	 * double half = halfIntervals * Double.parseDouble(proRatePerNight);
	 * reslogger.info(half); intial = full + half; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * if (fullIntervals > 0 && halfIntervals == 0) { intial = fullIntervals *
	 * base_amount; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * }
	 * 
	 * }
	 * 
	 * }
	 * 
	 * String getValue = Utility.RemoveDollarandSpaces(driver,
	 * totalRateValueElement.getText()).trim(); // rateApplied =
	 * String.format("%.2f", intial); reslogger.info("convert: " + getValue);
	 * reslogger.info("rateApplied: " + totalRoomCharges);
	 * 
	 * testSteps.add("Expected rates: " + totalRoomCharges); testSteps.add("Found: "
	 * + getValue); if (getValue.equals(totalRoomCharges)) { isRoomChargesEqual =
	 * "yes"; testSteps.add("Verified interval rate value is matching");
	 * 
	 * } else { isRoomChargesEqual = "no";
	 * testSteps.add("Verified interval rate value is not matching");
	 * 
	 * }
	 * 
	 * reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);
	 * 
	 * // averagePerNight = String.format("%.1f", //
	 * (Double.parseDouble(Utility.RemoveDollarandSpaces(driver, //
	 * totalRateValueElement.getText()))) // / numberofDays); // // assertEquals( //
	 * String.format("%.1f", //
	 * (Double.parseDouble(Utility.RemoveDollarandSpaces(driver, //
	 * averagePerNightElement.getText().split(" ")[3])))), // averagePerNight,
	 * "Failed: rate didn't match");
	 * 
	 * testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" +
	 * averagePerNight); reslogger.info("Verified total Amount:" + baseAmount +
	 * " Avg Per Night:" + averagePerNight); roomClassExpandElement.click(); String
	 * requiredDateFormat = "MMM dd yyyy";
	 * 
	 * // getting amounts for each date Double amountInDouble = 0.0; int
	 * fullIntervalCount = 0; String timeZone = "US/Eastern"; int temp = 0; int
	 * incrementCounter = 0;
	 * 
	 * ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat,
	 * checkInDate, checkOutDate, adults, child, roomClassExpand, intervalLength,
	 * baseAmount, adultCapacity, personCapacity, isAdditionalChargesApplied,
	 * maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
	 * isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges,
	 * proRateAdditionalChildCharges, testSteps);
	 * 
	 * reslogger.info("Size of ratesList: " + ratesList.size());
	 * reslogger.info("Size of list: " + reservationElement.StartDate.size());
	 * 
	 * for (int i = 0; i < reservationElement.StartDate.size(); i++) {
	 * 
	 * reslogger.info("i: " + i); String getDate =
	 * ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter,
	 * timeZone); dates.add(getDate);
	 * 
	 * String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat,
	 * requiredDateFormat); reslogger.info(dateInRequiredFormat);
	 * Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName),
	 * driver); Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i),
	 * driver); String startDate = reservationElement.StartDate.get(i).getText();
	 * String rateName = reservationElement.RateDisplayName.get(i).getText(); if
	 * (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
	 * test_steps.add("Failed: Intervals are showing as per requirment"); //
	 * assertEquals(startDate, dateInRequiredFormat,"Failed: // interval date is
	 * mismatching!");
	 * 
	 * } else {
	 * test_steps.add("Failed: Intervals are not showing as per requirment");
	 * 
	 * }
	 * 
	 * String getAmount = reservationElement.RatePerInterval.get(i).getText();
	 * amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
	 * getAmount));
	 * 
	 * reslogger.info(dateInRequiredFormat + "        " + folioName + "            "
	 * + getAmount); testSteps.add(dateInRequiredFormat + "        " + folioName +
	 * "            " + getAmount); temp++; double total = 0.00;
	 * reslogger.info("ratesList: " + ratesList.size()); reslogger.info("i: " + i);
	 * if (isRoomChargesEqual.equalsIgnoreCase("yes")) { if (temp > fullIntervals) {
	 * 
	 * incrementCounter = interval * fullIntervals + 1;
	 * reslogger.info(getRates.get(0)); reslogger.info(getRates.get(1));
	 * 
	 * if (isProRateApplied) { if (halfIntervals == 0) { total = getRates.get(0); }
	 * else { total = getRates.get(1); } } else { total = getRates.get(0); } if (i <
	 * ratesList.size()) {
	 * 
	 * total = Double.parseDouble(ratesList.get(i)); reslogger.info("total: " +
	 * total); assertEquals(rateName, folioName,
	 * "Failed: rate name is mismatching!"); assertEquals(amountInDouble, total,
	 * "Failed: interval amount is mismatching!");
	 * 
	 * } else { total = 0.00; assertEquals(rateName, "*No Rate Change",
	 * "Failed: rate name is mismatching!"); assertEquals(amountInDouble, total,
	 * "Failed: interval amount is mismatching!"); }
	 * 
	 * }
	 * 
	 * else {
	 * 
	 * incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
	 * reslogger.info(getRates.get(0)); reslogger.info(getRates.get(1)); if (i <
	 * ratesList.size()) { total = Double.parseDouble(ratesList.get(i));
	 * reslogger.info("total: " + total); assertEquals(rateName, folioName,
	 * "Failed: rate name is mismatching!"); assertEquals(amountInDouble, total,
	 * "Failed: interval amount is mismatching!");
	 * 
	 * } else { total = 0.00; assertEquals(rateName, "*No Rate Change",
	 * "Failed: rate name is mismatching!"); assertEquals(amountInDouble, total,
	 * "Failed: interval amount is mismatching!");
	 * 
	 * }
	 * 
	 * } } else { if (temp > fullIntervals) {
	 * 
	 * incrementCounter = interval * fullIntervals + 1; if (i < ratesList.size()) {
	 * total = Double.parseDouble(ratesList.get(i)); reslogger.info("total: " +
	 * total);
	 * 
	 * } else { total = 0.00; } reslogger.info("total: " + total); }
	 * 
	 * else {
	 * 
	 * incrementCounter = incrementCounter + Integer.parseInt(intervalLength); if (i
	 * < ratesList.size()) { total = Double.parseDouble(ratesList.get(i)); } else {
	 * total = 0.00; } reslogger.info("total: " + total);
	 * 
	 * }
	 * 
	 * }
	 * 
	 * // rateList.add(rateApplied); String amount = String.format("%.2f", total);
	 * rateList.add("" + total); }
	 * 
	 * }
	 * 
	 * ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
	 * ratesAlongWithDate.add(rateList); ratesAlongWithDate.add(dates);
	 * ArrayList<String> roomCharges = new ArrayList<>();
	 * 
	 * roomCharges.add(isRoomChargesEqual); ratesAlongWithDate.add(roomCharges);
	 * return ratesAlongWithDate;
	 * 
	 * }
	 */

	public void selectContactSalutation(WebDriver driver, String salutation) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> test_steps = new ArrayList<String>();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
		Wait.explicit_wait_visibilityof_webelement(res.CP_NewReservation_GuestSalutation, driver);
		Wait.explicit_wait_elementToBeClickable(res.CP_NewReservation_GuestSalutation, driver);
		Utility.ScrollToElement(res.CP_NewReservation_GuestSalutation, driver);
		res.clickContactSalutation.click();
		String sal = "(//span[text()='" + salutation + "']/../..)[2]";
		Wait.WaitForElement(driver, sal);

		driver.findElement(By.xpath(sal)).click();
		test_steps.add("Selected Salutation : " + salutation);
		reslogger.info("Selected Salutation : " + salutation);

	}

	public ArrayList<String> verifyPrimaryUserFolioDetails(WebDriver driver, String roomNumber1, String roomClass,
			ArrayList<String> test_steps) {

		Folio folio = new Folio();
		driver.findElement(
				By.xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]")).click();
		WebElement roomsToSelect = driver.findElement(By.xpath(
				"(//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]/..//a/span[@class='text'])[1]"));
		roomsToSelect.click();
		double folioRoomChargeLineItems = 0.00;
		String noShowFee = null;
		/*
		 * List<WebElement> rooms = driver.findElements(By.
		 * xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]/..//a/span[@class='text']"
		 * )); Utility.app_logs.info(rooms.size()); for (WebElement roomsToSelect :
		 * rooms) { driver.findElement(By.
		 * xpath("//button[@class='btn dropdown-toggle btn-default'][contains(@title,'Guest Folio')]"
		 * )).click(); Wait.wait1Second(); roomsToSelect.click();
		 */
		List<WebElement> roomChargesAmount = driver
				.findElements(By.xpath("//span[contains(text(), 'Room Charge')]/../..//td[@class='lineitem-amount']"));
		if (roomChargesAmount.size() != 0) {
			for (WebElement getRoomCharges : roomChargesAmount) {
				double roomCharge = Double.parseDouble(getRoomCharges.getText().replace("$ ", ""));
				folioRoomChargeLineItems = folioRoomChargeLineItems + roomCharge;
			}
		}
		noShowFee = folio.getNoShowFeeAmount(driver, "No Show Fee", test_steps);

		folio.clikOnLineItemDescription(driver, "No Show Fee", test_steps);
		folio.verifyLineItemDetails(driver, roomNumber1, roomClass, noShowFee, test_steps);
		;

		return test_steps;

	}

	/*
	 * public void takePayment(WebDriver driver, String amount, String
	 * paymentMethod, String takePaymentType, ArrayList<String> test_steps) throws
	 * InterruptedException, ParseException { Elements_Reservation ReservationFolio
	 * = new Elements_Reservation(driver); Elements_CPReservation CPReservationPage
	 * = new Elements_CPReservation(driver); // try {
	 * Wait.explicit_wait_visibilityof_webelement(ReservationFolio.Click_Pay_Button,
	 * driver); Utility.ScrollToElement(ReservationFolio.Click_Pay_Button, driver);
	 * Wait.explicit_wait_elementToBeClickable(ReservationFolio.Click_Pay_Button,
	 * driver); ReservationFolio.Click_Pay_Button.click(); } catch (Exception e) {
	 * WebDriverWait wait = new WebDriverWait(driver, 30);
	 * wait.until(ExpectedConditions .elementToBeClickable(By.xpath(
	 * "//*[@id='bpjscontainer_102']//button[contains(text(),'Pay')]"))) .click(); }
	 * Wait.explicit_wait_xpath(OR.Verify_Payment_Details_poup, driver);
	 * Wait.explicit_wait_visibilityof_webelement(
	 * CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount,
	 * driver); if (Utility.validateString(amount)) {
	 * CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.
	 * clear(); reslogger.info("Clear Amount Field");
	 * CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount
	 * .sendKeys(Keys.chord(Keys.CONTROL, "a"), amount);
	 * test_steps.add("Entered Amount :" + amount);
	 * reslogger.info("Entered Amount :" + amount); } if
	 * (Utility.validateString(takePaymentType)) { Wait.WaitForElement(driver,
	 * OR_Reservation.CP_Reservation_Folio_TakePayment_TypeButton);
	 * CPReservationPage.CP_Reservation_Folio_TakePayment_TypeButton.click(); String
	 * type =
	 * "//h4[text()='Take Payment']/../..//label[text()='TYPE']/..//div/div//span[text()='"
	 * + takePaymentType.trim() + "']"; Wait.WaitForElement(driver, type);
	 * driver.findElement(By.xpath(type)).click();
	 * test_steps.add("Select Take Payment Type : " + takePaymentType);
	 * reslogger.info("Select Take Payment Type : " + takePaymentType); } if
	 * (Utility.validateString(paymentMethod)) { String path =
	 * "(//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@class='btn dropdown-toggle btn-default']/span)[2]"
	 * ; Wait.WaitForElement(driver, path); WebElement PaymentMethodElement =
	 * driver.findElement(By.xpath(path));
	 * Utility.ScrollToElement(PaymentMethodElement, driver);
	 * Utility.clickThroughJavaScript(driver, PaymentMethodElement);
	 * test_steps.add("Click Payment Method");
	 * reslogger.info("Click CPayment Method");
	 * 
	 * String options =
	 * "//paymentmethod//div[contains(@class,'open')]/ul//li/a//span[@class='text'][contains(text(),'"
	 * + paymentMethod + "')]"; Wait.WaitForElement(driver, options); WebElement
	 * PaymentMethodOptions = driver.findElement(By.xpath(options));
	 * Utility.ScrollToElement(PaymentMethodOptions, driver);
	 * Utility.clickThroughJavaScript(driver, PaymentMethodOptions); } String
	 * buttonName = CPReservationPage.payButton.getText().split(" ")[0];
	 * 
	 * Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.payButton), driver);
	 * Utility.ScrollToElement(CPReservationPage.payButton, driver);
	 * Utility.clickThroughJavaScript(driver, CPReservationPage.payButton);
	 * test_steps.add("Clicking on " + buttonName + " Button ");
	 * reslogger.info("Clicking on " + buttonName + " Button ");
	 * Wait.waitUntilPageLoadNotCompleted(driver, 20); Wait.WaitForElement(driver,
	 * OR_Reservation.NoShowSuccess_CloseButton); JavascriptExecutor executor =
	 * (JavascriptExecutor) driver; executor.executeScript("arguments[0].click();",
	 * CPReservationPage.CP_Reservation_NoShowSuccessCloseButton);
	 * test_steps.add("Click Close Button "); reslogger.info("Click Close Button ");
	 * Wait.waitUntilPageLoadNotCompleted(driver, 30); }
	 * 
	 * public String getPhoneNumber(WebDriver driver) { String path =
	 * "//div[contains(@data-bind,'with:GuestInfo')]//span[contains(@data-bind,'mailing_formattedPhoneNumber')]";
	 * Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(
	 * path)), driver); String foundNo =
	 * driver.findElement(By.xpath(path)).getText(); return foundNo; }
	 * 
	 * public void clickVrboPopupYes(WebDriver driver) { Elements_CPReservation res
	 * = new Elements_CPReservation(driver); String popup =
	 * "//span[contains(text(),' This reservation was booked on ')]"; try { if
	 * (driver.findElements(By.xpath(popup)).size() > 0) {
	 * res.clickYesVrboPopup.click(); } } catch (Exception e) { } }
	 * 
	 * public HashMap<String, String> getStayInfoCheckInCheckOutDate(WebDriver
	 * driver) { HashMap<String, String> dates = new HashMap<String, String>();
	 * String checkinDatePath =
	 * "//div[contains(text(),'Stay')]/..//div[@class='checkin']/span[1]"; String
	 * checkOutDatePath =
	 * "//div[contains(text(),'Stay')]/..//div[@class='checkout']/span[1]"; String
	 * valueCheckIn =
	 * driver.findElement(By.xpath(checkinDatePath)).getText().trim(); String
	 * valueCheckOut =
	 * driver.findElement(By.xpath(checkOutDatePath)).getText().trim();
	 * dates.put("CheckIN", valueCheckIn); dates.put("ChecOUT", valueCheckOut);
	 * return dates;
	 * 
	 * }
	 */
	public void cancelReservationFromGuestDetailsWithPayment(WebDriver driver, ArrayList<String> test_steps,
			String guestFullName, String cancelReason) throws Exception {
		test_steps.add(
				"<b>******************* CANCEL RESERVATION WITH CANCEL POLICY AND PAYMENTS **********************</b>");
		navigateToReservationPage(driver);
		searchWithGuestNameAndOpenProfile(driver, test_steps, guestFullName);
		cancelReservation(driver, test_steps);
		enableVoidRoomCharge(driver, test_steps, true);
		provideReasonForCancelAndClickOnProceedToPay(driver, test_steps, cancelReason, true);
		clickOnPayButtonOnPaymentPopup(driver, test_steps);
		closeCancellationSuccessfull(driver, test_steps);
		test_steps.add(
				"<b>******************* VERIFYING RESERVATION STATUS AFTER CANCELLATION **********************</b>");
		verifyStatusAfterReservation(driver, test_steps, "CANCELLED");
		closeAllOpenedReservations(driver);
	}

	public void closeCancellationSuccessfull(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CloseCancellationSuccessfull);
		CPReservationPage.closeCancellationSuccessfull.click();
		test_steps.add("Close Cancellation Successfull popup");
		reslogger.info("Close Cancellation Successfull popup");
	}

	public void verifyStatusAfterReservation(WebDriver driver, ArrayList<String> test_steps, String status) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.HeaderStatus_AfterReservation), driver);
		String foundTxt = res.HeaderStatus_AfterReservation.getText();

		assertEquals(foundTxt.toUpperCase(), status.toUpperCase(), "Failed to verify Status");
		test_steps.add("Successfully Verified Status is : <b>" + status + "</b>");
		reslogger.info("Successfully Verified Status is : <b>" + status + "</b>");
	}

	private void searchWithGuestNameAndOpenProfile(WebDriver driver, ArrayList<String> test_steps, String guestFullName)
			throws InterruptedException {
		searchWithGuestName(driver, test_steps, guestFullName);
		clickOnGuestName(driver, test_steps);
	}

	public void makeReservationNoShowWithPaymentProcess(WebDriver driver, ArrayList<String> test_steps, String payments,
			String noShowAmount) throws Exception {
		test_steps.add(
				"<b>******************* NO SHOW RESERVATION WITH NO SHOW POLICY AND PAYMENTS **********************</b>");
		try {
			makeReservationNoShow(driver, test_steps);
			try {
				enableVoidRoomCharge(driver, test_steps, true);
				clickProceedToNoShowPaymentButton(driver, test_steps);
				clickLogORPayAuthorizedButton(driver, test_steps);
				clickCloseButtonOfSuccessModelPopup(driver, test_steps);
			} catch (Exception e) {
				clickConfirmCancelButton(driver, test_steps);
				clickOnRefundButtonOnNoShowPopup(driver, test_steps);
			}

//			if (Utility.validateString(payments) && Utility.validateString(noShowAmount)) {
//				if (verifyPaymentsIsGreaterThanNoShowAmount(payments, noShowAmount)) {
//					clickConfirmCancelButton(driver, test_steps);
//					clickOnRefundButtonOnNoShowPopup(driver, test_steps);
//				} else {
//					clickProceedToNoShowPaymentButton(driver, test_steps);
//					clickLogORPayAuthorizedButton(driver, test_steps);
//					clickCloseButtonOfSuccessModelPopup(driver, test_steps);
//				}
//			} else {
//				enableVoidRoomCharge(driver, test_steps, true);
//				clickProceedToNoShowPaymentButton(driver, test_steps);
////				selectCashOnPaymentPopup(driver, test_steps);
//				clickLogORPayAuthorizedButton(driver, test_steps);
//				clickCloseButtonOfSuccessModelPopup(driver, test_steps);					
//			}
		} catch (Exception e) {
			e.printStackTrace();
			Utility.app_logs.info(e);
		}
		test_steps.add("<b>******************* VERIFYING RESERVATION STATUS AFTER NO SHOW **********************</b>");
		verifyReservationStatusStatus(driver, test_steps, "No Show");
	}

	public void changeExternalConfirmation(WebDriver driver, String updateConf, ArrayList<String> testSteps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		res.enterExternalConfirmation.clear();
		res.enterExternalConfirmation.sendKeys(updateConf);
		// JavascriptExecutor jse = (JavascriptExecutor)driver;
		// jse.executeScript("arguments[0].value='updateConf';",
		// res.enterExternalConfirmation);
		testSteps.add("Enter updated external confirmation Number");
		Wait.wait10Second();
		res.enterExternalConfirmation.sendKeys(Keys.TAB);
	}

	public String getContactTitle(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		//// span[@data-bind='text: $parent.mailingAddress.contact.salutation']
		String getTitle = res.getContactTitle.getText();
		return getTitle;
	}

	public double amount = 0.00;

	public void commonMethodForPaymentPopUpVerification(WebDriver driver, ArrayList<String> test_steps, String Title,
			String expiryDate, String nameOnCard, String cardNo, String PaymentType, String Type, String totalFee,
			String tripTax, String Percentage, String PolicyType, String TripPaid) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.NoShowPaymentPopupTitle);
		Utility.ScrollToElement(CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle, driver);
		// Verified No Show Payment Page Title
		assertEquals(CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText().toLowerCase()
				.trim(), (Title.toLowerCase().trim()), "Failed: To verify  Payment Page Title");
		test_steps.add(" Verified Title:<b> " + Title + "</b>");
		reslogger.info(" Verified Title: " + Title);
		String path = "//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + PaymentType + "']";
		WebElement paymentElement = driver.findElement(By.xpath(path));

		// Get Amount
		Amount = CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText();
		double noshowPaymentAmount = Double.valueOf(Amount);
		int amt = (int) noshowPaymentAmount;
		Amount = String.valueOf(amt);
		reslogger.info(Amount);
		amount = noshowPaymentAmount;
		reslogger.info(amount);

		String balance = "";
		if (PolicyType.equals("No Show") || PolicyType.equals("Cancel")) {
			balance = CPReservationPage.NoShowCancelPaymentPopup_Balance.getText().replace("$", "");
			Balance = balance;
		} else if (PolicyType.equals("Check In")) {
			balance = CPReservationPage.CheckInPaymentPopup_Balance.getText().replace("$", "");
			Balance = balance;
		}

		double balanceDouble = Double.valueOf(balance);
		int balanceInt = (int) balanceDouble;
		balance = String.valueOf(balanceInt);
		if (Amount.equals(totalFee)) {
			assertEquals(Amount, (totalFee), "Failed: To verify Payment Page Amount: " + totalFee);
			test_steps.add("Verified Amount : <b> " + totalFee + "</b>");
			reslogger.info(" Verified Amount: " + totalFee);
			assertEquals(balance, (totalFee), "Failed: To verify Payment Page Balance: " + totalFee);
			test_steps.add("Verified Balance : <b> " + totalFee + "</b>");
			reslogger.info(" Verified Balance: " + totalFee);
		} else if (Amount.equals(tripTax)) {
			assertEquals(Amount, (tripTax), "Failed: To verify Payment Page Amount: " + tripTax);
			test_steps.add(" Verified Amount : <b> " + tripTax + "</b>");
			reslogger.info(" Verified Amount: " + tripTax);
			assertEquals(balance, (tripTax), "Failed: To verify  Payment Page Balance: " + tripTax);
			test_steps.add(" Verified Balance : <b> " + tripTax + "</b>");
			reslogger.info(" Verified Balance: " + tripTax);
		}

		else if (Amount.equals(Percentage)) {
			assertEquals(Amount, (Percentage), "Failed: To verify Payment Page Amount: " + Percentage);
			test_steps.add(" Verified Amount : <b> " + Percentage + "</b>");
			reslogger.info(" Verified Amount: " + Percentage);
			assertEquals(balance, (Percentage), "Failed: To verify  Payment Page Balance: " + Percentage);
			test_steps.add(" Verified Balance : <b> " + Percentage + "</b>");
			reslogger.info(" Verified Balance: " + Percentage);
		} else if (Amount.equals(TripPaid)) {
			assertEquals(Amount, (TripPaid), "Failed: To verify Payment Page Amount: " + TripPaid);
			test_steps.add(" Verified Amount : <b> " + TripPaid + "</b>");
			reslogger.info(" Verified Amount: " + TripPaid);
			assertEquals(balance, (TripPaid), "Failed: To verify  Payment Page Balance: " + TripPaid);
			test_steps.add(" Verified Balance : <b> " + TripPaid + "</b>");
			reslogger.info(" Verified Balance: " + TripPaid);
		}

		// Verified Type
		type = CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.getText().toLowerCase()
				.trim();
		assertEquals(type, (Type.toLowerCase().trim()), "Failed: To verify  Page Type: " + Type);
		test_steps.add(" Verified Type : <b> " + Type + "</b>");
		reslogger.info(" Verified Type: " + Type);

		if (PaymentType.equals("MC")) {
			// Verified No Show Payment Page Payment Method
			assertTrue(paymentElement.isDisplayed(), "Failed: To verify Payment Method");
			test_steps.add(" Verified Payment Method:<b> " + PaymentType + "</b> ");
			reslogger.info(" Verified Payment Method: " + PaymentType);

			// Verified No Show Payment Page Card No
			JavascriptExecutor executor = (JavascriptExecutor) driver;
			String CardNo = (String) executor.executeScript("return arguments[0].value",
					CPReservationPage.CP_Reservation_NoShowPaymentPopup_CardNumber);
			reslogger.info(CardNo);
			// Verify Card Number
			assertTrue(CardNo.contains(cardNo), "Failed: To verify Card Number");
			test_steps.add(" Verified Card Number: <b>" + CardNo + "</b>");
			reslogger.info(" Verified Card Number");
			String NameOnCard = (String) executor.executeScript("return arguments[0].value",
					CPReservationPage.CP_Reservation_NoShowPaymentPopup_NameOnCard);
			reslogger.info(NameOnCard);

			// Verify Name on Card Number
			assertEquals(NameOnCard.toLowerCase().trim(), (nameOnCard.toLowerCase().trim()),
					"Failed: To verify Name on Card ");
			test_steps.add("Verified Name on Card:<b>  " + nameOnCard + "</b>");
			reslogger.info(" Verified Name on Card");

			String ExpiryDate = (String) executor.executeScript("return arguments[0].value",
					CPReservationPage.CP_Reservation_NoShowPaymentPopup_Expiry);
			reslogger.info(ExpiryDate);

			// Verify Expiry Date
			assertEquals(ExpiryDate, (expiryDate), "Failed: To verify Expiry Date ");
			test_steps.add(" Verified Expiry Date:<b> " + ExpiryDate + "</b>");
			reslogger.info(" Verified Expiry Date");
		}
		if (PolicyType.equals("No Show") || PolicyType.equals("Cancel")) {
			// Verified Log as External Payment
			boolean isExistLogAsExternal = CPReservationPage.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox
					.isEnabled();
			if (isExistLogAsExternal) {
				if (!CPReservationPage.NoShowPaymentPopup_Date.isEnabled()) {
					test_steps.add(" Verified  Date Field Disabled ");
					reslogger.info(" Verified  Date Field Disabled ");
				}
				if (!CPReservationPage.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox.isSelected()) {
					CPReservationPage.CP_Reservation_NoShowPaymentPopup_ExternalPaymentCheckBox.click();
					reslogger.info("Click  Log as External Payment Check Box");
					// Verified No Show Payment Log Button
					assertTrue(CPReservationPage.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.isDisplayed(),
							"Failed: To verify Payment Page Log Button");
					test_steps.add(" Verified  Log/Pay Button ");
					reslogger.info("' Verified  Log/Pay Button ");
					assertTrue(CPReservationPage.NoShowPaymentPopup_Date.isEnabled(),
							"Failed: To verify Payment Page Date Field");
					test_steps.add(" Verified  Date Field  Enabled");
					reslogger.info(" Verified  Date Field  Enabled ");
				}

			}
		}
		if (PolicyType.equals("Check In")) {
			// Verified Override Check-In Amount
			res.CP_OverrideCheckInAmountCheckBox.click();
			test_steps.add(" Checked Override Check-In Amount Check Box");
			reslogger.info(" Checked Override Check-In Amount Check Box");
			boolean isAmountEnabled = CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount
					.isEnabled();
			assertEquals(isAmountEnabled, true, "Failed : to verify Amount field Enabled");
			test_steps.add(" Amount Field  Enabled");
			reslogger.info(" Amount Field  Enabled");
			boolean isTypeEnabled = CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType
					.isEnabled();
			assertEquals(isTypeEnabled, true, "Failed : to verify Type field Enabled");
			test_steps.add(" Type Field  Enabled");
			reslogger.info(" Type Field  Enabled");
			CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
			test_steps.add(" Click on Type Drop Down Box");
			reslogger.info(" Click on Type Drop Down Box");
			String[] type = { "Authorization Only", "Capture" };
			for (int i = 0; i < res.CP_CheckInTypeOptions.size(); i++) {
				assertTrue(res.CP_CheckInTypeOptions.get(i).getText().toLowerCase().trim()
						.equals(type[i].toLowerCase().trim()), "Failed: To verify Type Field");
				test_steps.add(" Verified  Type Option: <b>" + res.CP_CheckInTypeOptions.get(i).getText() + "</b>");
				reslogger.info(" Verified  Date Field  Enabled " + res.CP_CheckInTypeOptions.get(i).getText());
			}

			CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupType.click();
			test_steps.add(" Click on Type Drop Down Box");
			reslogger.info(" Click on Type Drop Down Box");

			boolean iExist = CPReservationPage.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.isDisplayed();
			assertEquals(iExist, true, "Failed : to verify Authrozied Button");
			test_steps.add(" Authrozied Button  Enabled");
			reslogger.info(" Authrozied Button  Enabled");
		}

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetails(WebDriver driver, String dateFormat,
			String checkInDate, String checkOutDate, String adults, String child, String roomClass,
			String intervalLength,

			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, String folioName, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		String averagePerNight = "";
		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				System.out.println("**********************************Third if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						for (int i = 1; i < child_adults; i++) {
							System.out.println("i: " + i);
							child_adults = child_adults - 1;
							System.out.println("total: " + child_adults);
							System.out.println("max person: " + intMaxPerson);
							if (child_adults == intMaxPerson) {
								System.out.println("in total = max person");
								count = i;
								isTrue = true;
								break;
							}
						}

					}

					if (isTrue) {
						childDifference = count;
					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				System.out.println("**********************************4th if:");

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						for (int i = 1; i < child_adults; i++) {
							System.out.println("i: " + i);
							child_adults = child_adults - 1;
							System.out.println("total: " + child_adults);
							System.out.println("max person: " + intMaxPerson);
							if (child_adults == intMaxPerson) {
								System.out.println("in total = max person");
								count = i;
								isTrue = true;
								break;
							}
						}

					}

					if (isTrue) {
						childDifference = count;
					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			Folio folio = new Folio();
			String getValue = folio.splitStringBySign(totalRateValueElement.getText(), "$").trim();
			rateApplied = String.format("%.2f", intial).trim();
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + rateApplied);

			testSteps.add("Expected rates: " + rateApplied);
			testSteps.add("Found: " + intial);
			if (getValue.equals(rateApplied)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;
			// int rateListLength = driver
			// .findElements(By.xpath("//td[contains(@data-bind,
			// 'showInnroadCurrency: { value:')]")).size();

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					testSteps);

			reslogger.info("Size of list: " + reservationElement.StartDate.size());

			for (int i = 0; i < reservationElement.StartDate.size(); i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "            " + folioName + "               " + getAmount);
				testSteps.add(dateInRequiredFormat + "             " + folioName + "               " + getAmount);
				temp++;
				double total = 0.00;

				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		return ratesAlongWithDate;

	}

	/*
	 * public ArrayList<ArrayList<String>>
	 * intervalRateVerificationInChangeStayDetails(WebDriver driver, String
	 * dateFormat, String checkInDate, String checkOutDate, String adults, String
	 * child, String roomClass, String intervalLength,
	 * 
	 * String baseAmount, String adultCapacity, String personCapacity, boolean
	 * isAdditionalChargesApplied, String maxAdult, String maxPerson, String
	 * additionalAdultCharges, String additionalChildCharges, boolean
	 * isProRateApplied, String proRatePerNight, String
	 * proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String
	 * folioName, ArrayList<String> ratesList, String totalRoomCharges,
	 * ArrayList<String> testSteps) throws InterruptedException,
	 * NumberFormatException, ParseException {
	 * 
	 * Elements_CPReservation reservationElement = new
	 * Elements_CPReservation(driver); ArrayList<String> rateList = new
	 * ArrayList<>(); ArrayList<String> dates = new ArrayList<>(); String
	 * isRoomChargesEqual = "no";
	 * 
	 * double pro_rate = Double.parseDouble(proRatePerNight); double base_amount =
	 * Double.parseDouble(baseAmount);
	 * 
	 * if (pro_rate > base_amount) pro_rate = base_amount;
	 * 
	 * // Number of Days int numberofDays = Integer
	 * .parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate,
	 * dateFormat, "dd/MM/yyyy"), Utility.parseDate(checkOutDate, dateFormat,
	 * "dd/MM/yyyy")));
	 * 
	 * String rateApplied = "";
	 * 
	 * int fullIntervals = 0; int halfIntervals = 0; reslogger.info("numberofDays: "
	 * + numberofDays); if (numberofDays >= (Integer.parseInt(intervalLength))) {
	 * fullIntervals = numberofDays / Integer.parseInt(intervalLength);
	 * halfIntervals = numberofDays % Integer.parseInt(intervalLength); }
	 * System.out.println("Full Interval:" + fullIntervals);
	 * System.out.println("Half Interval:" + halfIntervals);
	 * 
	 * testSteps.add("Interval lenght: " + intervalLength);
	 * testSteps.add("Number of nights: " + numberofDays);
	 * testSteps.add("Full interval: " + fullIntervals);
	 * testSteps.add("Half interval: " + halfIntervals);
	 * 
	 * int interval = Integer.parseInt(intervalLength); testSteps.add("");
	 * 
	 * String totalRateValue =
	 * "//div[contains(@class,'room-search-result-container')]//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]"
	 * ;
	 * 
	 * String avgPerNight =
	 * "//div[contains(@class,'room-search-result-container')]//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]"
	 * ; String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]"
	 * ;
	 * 
	 * String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
	 * String roomClassExpand =
	 * "//div[contains(@class='room-search-result-container']//span[text()='" +
	 * roomClass +
	 * "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
	 * 
	 * WebElement totalRateValueElement = null; WebElement roomClassExpandElement =
	 * null; WebElement averagePerNightElement = null;
	 * 
	 * Wait.WaitForElement(driver, avgPerNight);
	 * Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
	 * Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
	 * averagePerNightElement = driver.findElement(By.xpath(avgPerNight));
	 * 
	 * try { totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
	 * roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand)); }
	 * catch (Exception e) { totalRateValueElement =
	 * driver.findElement(By.xpath(totalRateValueMRB)); roomClassExpandElement =
	 * driver.findElement(By.xpath(roomClassMRBExpand));
	 * 
	 * } // IF Pro-Rate/Addtional Charges off String averagePerNight = "";
	 * 
	 * reslogger.info("baseAmount: " + baseAmount); double intial = 0;
	 * 
	 * if ((Integer.parseInt(adults) + Integer.parseInt(child)) <=
	 * Integer.parseInt(personCapacity)) { if (!isProRateApplied &&
	 * !isAdditionalChargesApplied) {
	 * 
	 * System.out.println("**********************************First if:");
	 * 
	 * if (fullIntervals == 0) {
	 * 
	 * intial = base_amount;
	 * 
	 * }
	 * 
	 * else if (fullIntervals > 0 && halfIntervals == 0) {
	 * 
	 * intial = base_amount * fullIntervals;
	 * 
	 * } else {
	 * 
	 * int total = fullIntervals + 1; intial = base_amount * total;
	 * 
	 * } reslogger.info("Calculated Rate:" + intial);
	 * 
	 * } if (isProRateApplied && !isAdditionalChargesApplied) {
	 * 
	 * System.out.println("**********************************Second if:");
	 * reslogger.info("======Pro stay only =======");
	 * 
	 * if (fullIntervals == 0) {
	 * 
	 * intial = base_amount;
	 * 
	 * } else if (fullIntervals > 0 && halfIntervals == 0) {
	 * 
	 * intial = base_amount * fullIntervals; }
	 * 
	 * else {
	 * 
	 * double total_fullAmount = base_amount * fullIntervals;
	 * reslogger.info("total_fullAmount: " + total_fullAmount);
	 * 
	 * double total_halfAmount = (Double.parseDouble(proRatePerNight) *
	 * halfIntervals); reslogger.info("total_halfAmount: " + total_halfAmount);
	 * intial = total_fullAmount + total_halfAmount;
	 * 
	 * }
	 * 
	 * reslogger.info("Calculated Rate:" + intial);
	 * 
	 * }
	 * 
	 * System.out.println("Number of Days:" + numberofDays);
	 * System.out.println("intervalLength:" + intervalLength);
	 * System.out.println("fullIntervals:" + fullIntervals);
	 * System.out.println("half:" + halfIntervals); int adultDifference = 0; int
	 * childDifference = 0; int personDifference = 0;
	 * 
	 * reslogger.info("child: " + child); reslogger.info("adults: " + adults); int
	 * child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
	 * reslogger.info("child_adults" + child_adults);
	 * 
	 * // if Additional Charges Applied ANd ProRate False if
	 * (isAdditionalChargesApplied && !isProRateApplied) {
	 * System.out.println("**********************************Third if:");
	 * 
	 * if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) { if
	 * (Integer.parseInt(adults) > Integer.parseInt(maxAdult)) adultDifference =
	 * Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
	 * 
	 * child_adults = child_adults - adultDifference; int count = 0; boolean isTrue
	 * = false; System.out.println("child_adults: " + child_adults); int
	 * intMaxPerson = Integer.parseInt(maxPerson); if (child_adults > intMaxPerson)
	 * { System.out.println("child is also diff"); for (int i = 1; i < child_adults;
	 * i++) { System.out.println("i: " + i); child_adults = child_adults - 1;
	 * System.out.println("total: " + child_adults);
	 * System.out.println("max person: " + intMaxPerson); if (child_adults ==
	 * intMaxPerson) { System.out.println("in total = max person"); count = i;
	 * isTrue = true; break; } }
	 * 
	 * }
	 * 
	 * if (isTrue) { childDifference = count; }
	 * System.out.println("Additonal Adult:" + adultDifference);
	 * System.out.println("Additonal Child:" + childDifference);
	 * 
	 * if (fullIntervals == 0) {
	 * 
	 * reslogger.info("adult: " + adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))); reslogger.info("child: " +
	 * childDifference * (Double.parseDouble(additionalChildCharges)));
	 * reslogger.info("base_amount: " + base_amount);
	 * reslogger.info("fullIntervals: 0");
	 * 
	 * intial = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * }
	 * 
	 * else if (fullIntervals > 0 && halfIntervals == 0) {
	 * 
	 * double one = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * reslogger.info("one: " + one); intial = one * fullIntervals;
	 * 
	 * } else {
	 * 
	 * int total = fullIntervals + 1; double one = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * reslogger.info("one: " + one); intial = one * total; }
	 * reslogger.info("expected rate: " + intial);
	 * 
	 * }
	 * 
	 * } // if Additional Charges Applied And ProRate True if
	 * (isAdditionalChargesApplied && isProRateApplied) {
	 * System.out.println("**********************************4th if:");
	 * 
	 * if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity) ||
	 * numberofDays < (Integer.parseInt(intervalLength))) {
	 * 
	 * if (Integer.parseInt(adults) > Integer.parseInt(maxAdult)) adultDifference =
	 * Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
	 * 
	 * child_adults = child_adults - adultDifference; // 5 int count = 0; boolean
	 * isTrue = false; System.out.println("child_adults: " + child_adults); int
	 * intMaxPerson = Integer.parseInt(maxPerson); if (child_adults > intMaxPerson)
	 * { System.out.println("child is also diff"); for (int i = 1; i < child_adults;
	 * i++) { System.out.println("i: " + i); child_adults = child_adults - 1;
	 * System.out.println("total: " + child_adults);
	 * System.out.println("max person: " + intMaxPerson); if (child_adults ==
	 * intMaxPerson) { System.out.println("in total = max person"); count = i;
	 * isTrue = true; break; } }
	 * 
	 * }
	 * 
	 * if (isTrue) { childDifference = count; }
	 * 
	 * System.out.println("Additonal Adult:" + adultDifference);
	 * System.out.println("Additonal Child:" + childDifference);
	 * 
	 * testSteps.add("Additonal Adult:" + adultDifference);
	 * testSteps.add("Additonal Child:" + childDifference);
	 * 
	 * if (adultDifference > 0 || childDifference > 0) {
	 * 
	 * if (fullIntervals > 0 && halfIntervals > 0) { //
	 * reslogger.info("apply half and ful both"); double fullamount = base_amount +
	 * (adultDifference * (Double.parseDouble(additionalAdultCharges))) +
	 * (childDifference * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * fullamount = fullIntervals * fullamount;
	 * 
	 * double half_amount = Double.parseDouble(proRatePerNight) + (adultDifference *
	 * Double.parseDouble(proRateAdditionalAdultCharges)) + (childDifference *
	 * (Double.parseDouble(proRateAdditionalChildCharges)));
	 * 
	 * half_amount = half_amount * halfIntervals; reslogger.info("fullamount: " +
	 * fullamount); reslogger.info("half_amount: " + half_amount);
	 * 
	 * intial = fullamount + half_amount; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * if (fullIntervals > 0 && halfIntervals == 0) {
	 * reslogger.info("apply full both");
	 * 
	 * intial = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * intial = intial * fullIntervals; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * if (fullIntervals == 0) {
	 * 
	 * intial = base_amount + (adultDifference *
	 * (Double.parseDouble(additionalAdultCharges))) + (childDifference *
	 * (Double.parseDouble(additionalChildCharges)));
	 * 
	 * reslogger.info(intial);
	 * 
	 * } } else { if (fullIntervals == 0) { intial = base_amount;
	 * 
	 * } if (fullIntervals > 0 && halfIntervals > 0) {
	 * 
	 * double full = fullIntervals * base_amount; reslogger.info(full);
	 * 
	 * double half = halfIntervals * Double.parseDouble(proRatePerNight);
	 * reslogger.info(half); intial = full + half; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * if (fullIntervals > 0 && halfIntervals == 0) { intial = fullIntervals *
	 * base_amount; reslogger.info(intial);
	 * 
	 * }
	 * 
	 * }
	 * 
	 * }
	 * 
	 * }
	 * 
	 * String getValue = Utility.RemoveDollarandSpaces(driver,
	 * totalRateValueElement.getText()).trim(); // rateApplied =
	 * String.format("%.2f", intial); reslogger.info("convert: " + getValue);
	 * reslogger.info("rateApplied: " + totalRoomCharges);
	 * 
	 * testSteps.add("Expected rates: " + totalRoomCharges); testSteps.add("Found: "
	 * + getValue); if (getValue.equals(totalRoomCharges)) { isRoomChargesEqual =
	 * "yes"; testSteps.add("Verified interval rate value is matching");
	 * 
	 * } else { isRoomChargesEqual = "no";
	 * testSteps.add("Verified interval rate value is not matching");
	 * 
	 * }
	 * 
	 * reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);
	 * 
	 * // averagePerNight = String.format("%.1f", //
	 * (Double.parseDouble(Utility.RemoveDollarandSpaces(driver, //
	 * totalRateValueElement.getText()))) // / numberofDays); // // assertEquals( //
	 * String.format("%.1f", //
	 * (Double.parseDouble(Utility.RemoveDollarandSpaces(driver, //
	 * averagePerNightElement.getText().split(" ")[3])))), // averagePerNight,
	 * "Failed: rate didn't match");
	 * 
	 * testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" +
	 * averagePerNight); reslogger.info("Verified total Amount:" + baseAmount +
	 * " Avg Per Night:" + averagePerNight); roomClassExpandElement.click(); String
	 * requiredDateFormat = "MMM dd yyyy";
	 * 
	 * // getting amounts for each date Double amountInDouble = 0.0; int
	 * fullIntervalCount = 0; String timeZone = "US/Eastern"; int temp = 0; int
	 * incrementCounter = 0;
	 * 
	 * ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat,
	 * checkInDate, checkOutDate, adults, child, roomClassExpand, intervalLength,
	 * baseAmount, adultCapacity, personCapacity, isAdditionalChargesApplied,
	 * maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
	 * isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges,
	 * proRateAdditionalChildCharges, testSteps);
	 * 
	 * reslogger.info("Size of ratesList: " + ratesList.size());
	 * reslogger.info("Size of list: " + reservationElement.StartDate.size());
	 * 
	 * for (int i = 0; i < reservationElement.StartDate.size(); i++) {
	 * 
	 * reslogger.info("i: " + i); String getDate =
	 * ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter,
	 * timeZone); dates.add(getDate);
	 * 
	 * String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat,
	 * requiredDateFormat); reslogger.info(dateInRequiredFormat);
	 * Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName),
	 * driver); Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i),
	 * driver); String startDate = reservationElement.StartDate.get(i).getText();
	 * String rateName = reservationElement.RateDisplayName.get(i).getText(); if
	 * (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
	 * test_steps.add("Failed: Intervals are showing as per requirment"); //
	 * assertEquals(startDate, dateInRequiredFormat,"Failed: // interval date is
	 * mismatching!");
	 * 
	 * } else {
	 * test_steps.add("Failed: Intervals are not showing as per requirment");
	 * 
	 * }
	 * 
	 * String getAmount = reservationElement.RatePerInterval.get(i).getText();
	 * amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
	 * getAmount));
	 * 
	 * reslogger.info(dateInRequiredFormat + "        " + folioName + "            "
	 * + getAmount); testSteps.add(dateInRequiredFormat + "        " + folioName +
	 * "            " + getAmount); temp++; double total = 0.00;
	 * reslogger.info("ratesList: " + ratesList.size()); reslogger.info("i: " + i);
	 * if (isRoomChargesEqual.equalsIgnoreCase("yes")) { if (temp > fullIntervals) {
	 * 
	 * incrementCounter = interval * fullIntervals + 1;
	 * reslogger.info(getRates.get(0)); reslogger.info(getRates.get(1));
	 * 
	 * if (isProRateApplied) { if (halfIntervals == 0) { total = getRates.get(0); }
	 * else { total = getRates.get(1); } } else { total = getRates.get(0); } if (i <
	 * ratesList.size()) {
	 * 
	 * total = Double.parseDouble(ratesList.get(i)); reslogger.info("total: " +
	 * total); assertEquals(rateName, folioName,
	 * "Failed: rate name is mismatching!"); assertEquals(amountInDouble, total,
	 * "Failed: interval amount is mismatching!");
	 * 
	 * } else { total = 0.00; assertEquals(rateName, "*No Rate Change",
	 * "Failed: rate name is mismatching!"); assertEquals(amountInDouble, total,
	 * "Failed: interval amount is mismatching!"); }
	 * 
	 * }
	 * 
	 * else {
	 * 
	 * incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
	 * reslogger.info(getRates.get(0)); reslogger.info(getRates.get(1)); if (i <
	 * ratesList.size()) { total = Double.parseDouble(ratesList.get(i));
	 * reslogger.info("total: " + total); assertEquals(rateName, folioName,
	 * "Failed: rate name is mismatching!"); assertEquals(amountInDouble, total,
	 * "Failed: interval amount is mismatching!");
	 * 
	 * } else { total = 0.00; assertEquals(rateName, "*No Rate Change",
	 * "Failed: rate name is mismatching!"); assertEquals(amountInDouble, total,
	 * "Failed: interval amount is mismatching!");
	 * 
	 * }
	 * 
	 * } } else { if (temp > fullIntervals) {
	 * 
	 * incrementCounter = interval * fullIntervals + 1; if (i < ratesList.size()) {
	 * total = Double.parseDouble(ratesList.get(i)); reslogger.info("total: " +
	 * total);
	 * 
	 * } else { total = 0.00; } reslogger.info("total: " + total); }
	 * 
	 * else {
	 * 
	 * incrementCounter = incrementCounter + Integer.parseInt(intervalLength); if (i
	 * < ratesList.size()) { total = Double.parseDouble(ratesList.get(i)); } else {
	 * total = 0.00; } reslogger.info("total: " + total);
	 * 
	 * }
	 * 
	 * }
	 * 
	 * // rateList.add(rateApplied); String amount = String.format("%.2f", total);
	 * rateList.add("" + total); }
	 * 
	 * }
	 * 
	 * ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
	 * ratesAlongWithDate.add(rateList); ratesAlongWithDate.add(dates);
	 * ArrayList<String> roomCharges = new ArrayList<>();
	 * 
	 * roomCharges.add(isRoomChargesEqual); ratesAlongWithDate.add(roomCharges);
	 * return ratesAlongWithDate;
	 * 
	 * }
	 */
	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetails(WebDriver driver, String dateFormat,
			String checkInDate, String checkOutDate, String adults, String child, String roomClass,
			String intervalLength,

			String baseAmount, String adultCapacity, String personCapacity, boolean isAdditionalChargesApplied,
			String maxAdult, String maxPerson, String additionalAdultCharges, String additionalChildCharges,
			boolean isProRateApplied, String proRatePerNight, String proRateAdditionalAdultCharges,
			String proRateAdditionalChildCharges, String folioName, ArrayList<String> ratesList,
			String totalRoomCharges, int newDays, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";

		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = newDays;
		// Integer
		// .parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate,
		// dateFormat, "dd/MM/yyyy"),
		// Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		String rateApplied = "";

		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		roomClassExpandElement.click();
		Wait.wait2Second();
		List<WebElement> getRateList = driver
				.findElements(By.xpath("//td[contains(@data-bind, 'showInnroadCurrency: { value:')]"));

		reslogger.info("rateList1 size: " + getRateList.size());
		boolean isZero = true;

		for (int i = 1; i < getRateList.size(); i++) {

			String getRatePerInterval = getRateList.get(i).getText();
			String[] splitStr = getRatePerInterval.split("\\$");
			getRatePerInterval = splitStr[1].trim();
			if (getRatePerInterval.equals("0.00")) {
				isZero = false;
				break;
			}

		}

		reslogger.info("isZero: " + isZero);
		if (!isZero) {
			String bugId = "<a href='https://innroad.atlassian.net/browse/RATES-3850' target='_blank'>"
					+ "Failed: Rate is showing incorrect when updating stay details with change only for added dates for interval rateplan.<br>Click here for more info: RATES-3850</a>";
			testSteps.add("Failed: Click here for more info<br>");
		}

		String averagePerNight = "";

		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {
				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						for (int i = 1; i < child_adults; i++) {
							System.out.println("i: " + i);
							child_adults = child_adults - 1;
							System.out.println("total: " + child_adults);
							System.out.println("max person: " + intMaxPerson);
							if (child_adults == intMaxPerson) {
								System.out.println("in total = max person");
								count = i;
								isTrue = true;
								break;
							}
						}

					}

					if (isTrue) {
						childDifference = count;
					}
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {

				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						for (int i = 1; i < child_adults; i++) {
							System.out.println("i: " + i);
							child_adults = child_adults - 1;
							System.out.println("total: " + child_adults);
							System.out.println("max person: " + intMaxPerson);
							if (child_adults == intMaxPerson) {
								System.out.println("in total = max person");
								count = i;
								isTrue = true;
								break;
							}
						}

					}

					if (isTrue) {
						childDifference = count;
					}

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);

			reslogger.info("old charges: " + totalRoomCharges);
			reslogger.info("new charges: " + intial);
			double old_new_charges = Double.parseDouble(totalRoomCharges) + intial;
			testSteps.add("Expected rates: " + old_new_charges);
			testSteps.add("Found: " + getValue);

			if (getValue.equals(String.format("%.2f", old_new_charges))) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);

			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;

			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					newDays, testSteps);

			reslogger.info("getRates: " + getRates);
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			if (!isProRateApplied && halfIntervals > 0) {
				fullIntervals = fullIntervals + 1;
			}
			for (int i = 0; i < reservationElement.StartDate.size(); i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				test_steps.add("Failed: Intervals are showing as per requirment");
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");

				// assertEquals(rateName, "*No Rate Change", "Failed: rate name
				// is mismatching!");

				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				testSteps.add(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				temp++;
				double total = 0.00;
				if (i == 0) {
					// incrementCounter = 1;
				}

				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(String.valueOf(amountInDouble), String.valueOf(total),
									"Failed: interval amount is mismatching!");

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
							assertEquals(String.valueOf(amountInDouble), String.valueOf(total),
									"Failed: interval amount is mismatching!");
						}

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(String.valueOf(amountInDouble), String.valueOf(total),
									"Failed: interval amount is mismatching!");

						} else {
							total = getRates.get(0);
							assertEquals(String.valueOf(amountInDouble), String.valueOf(total),
									"Failed: interval amount is mismatching!");

						}

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = incrementCounter + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);

						} else {
							if (isProRateApplied) {
								if (halfIntervals == 0) {
									total = getRates.get(0);
								} else {
									total = getRates.get(1);
								}
							} else {
								total = getRates.get(0);
							}
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = getRates.get(0);

						}
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		return ratesAlongWithDate;

	}

	/*
	 * public ArrayList<Double>
	 * addMultipleArrayListData(ArrayList<ArrayList<Double>> total) { DecimalFormat
	 * df = new DecimalFormat("##.00"); int listSize = total.size();
	 * ArrayList<Double> sum = new ArrayList<Double>(); int j = 0, k = 0; while (j <
	 * total.get(k).size()) { Double calc = 0.00; for (int i = 0; i < listSize; i++)
	 * { calc = Double.parseDouble(df.format(calc + total.get(i).get(j))); }
	 * sum.add(calc); j++; } return sum; }
	 */
	public void cancellationReservation(WebDriver driver, ArrayList<String> test_steps, boolean voidcheckedReuired)
			throws InterruptedException {
		cancelReservation(driver, test_steps);
		if (!voidcheckedReuired) {
			unCheckedVoidRoomChargeCheckBox(driver, test_steps);

		}
		enterCancellationReasons(driver, test_steps, "test");
		try {
			proceesToCancellationPayment(driver, test_steps);
			clickRefundsORPaybutton(driver, test_steps);
			clickCloseButtonOfCancellationSuccessfully(driver, test_steps);
		} catch (Exception e) {
			clickConfirmCancelButton(driver, test_steps);
		}

	}

	/*
	 * public void selectcheckInAndCheckoutInTapeCharts(WebDriver driver, String
	 * checkinDate, String checkoutDate, String timeZone, ArrayList<String>
	 * test_steps) throws InterruptedException, ParseException { Elements_TapeChart
	 * TapeChart = new Elements_TapeChart(driver); Elements_CPReservation elements =
	 * new Elements_CPReservation(driver); boolean isCheckinPassed = false; String
	 * checkinDay = checkinDate; // ArrayList<String> testSteps = new ArrayList<>();
	 * Wait.WaitForElement(driver, OR.Select_Arrival_Date);
	 * Wait.explicit_wait_visibilityof_webelement(TapeChart.Select_Arrival_Date,
	 * driver);
	 * Wait.explicit_wait_elementToBeClickable(TapeChart.Select_Arrival_Date,
	 * driver); TapeChart.Select_Arrival_Date.click();
	 * test_steps.add("Click on checkin Calander on tape chart");
	 * TapeChart.checkinTapeChart.clear(); // String checkInDate =
	 * ESTTimeZone.DateFormateForLineItem(Days); reslogger.info(checkinDate + " : "
	 * + checkoutDate); if (!checkinDate.equalsIgnoreCase("NA")) { isCheckinPassed =
	 * Utility.isGivenDatePassed(checkinDate, timeZone); checkinDate =
	 * Utility.parseDate(checkinDate, "dd/MM/yyyy", "MM/dd/yyyy"); }
	 * reslogger.info(checkinDate + " : " + checkoutDate);
	 * 
	 * if (checkinDate.equalsIgnoreCase("NA") || isCheckinPassed == true ||
	 * checkoutDate.equalsIgnoreCase("NA")) { checkinDate = Utility.getNextDate(0,
	 * "MM/dd/yyyy", timeZone); } reslogger.info(checkinDate + " : " +
	 * checkoutDate);
	 * 
	 * TapeChart.checkinTapeChart.sendKeys(checkinDate);
	 * test_steps.add("CheckIn date: " + checkinDate);
	 * 
	 * Wait.WaitForElement(driver, NewTapeChart.ClickCalanderDepartDate);
	 * Wait.explicit_wait_visibilityof_webelement(TapeChart.clickCalanderDepartDate,
	 * driver);
	 * Wait.explicit_wait_elementToBeClickable(TapeChart.clickCalanderDepartDate,
	 * driver); TapeChart.clickCalanderDepartDate.click();
	 * test_steps.add("Click on checkout Calander on tape chart");
	 * TapeChart.checkOutTapeChart.clear(); if (!checkoutDate.equalsIgnoreCase("NA")
	 * && !checkinDay.equalsIgnoreCase("NA")) { checkoutDate =
	 * Utility.parseDate(checkoutDate, "dd/MM/yyyy", "MM/dd/yyyy"); }
	 * reslogger.info(checkinDate + " : " + checkoutDate);
	 * 
	 * if (checkinDay.equalsIgnoreCase("NA") || isCheckinPassed == true ||
	 * checkoutDate.equalsIgnoreCase("NA")) { checkoutDate = Utility.getNextDate(2,
	 * "MM/dd/yyyy", timeZone); } reslogger.info(checkinDate + " : " +
	 * checkoutDate); TapeChart.checkOutTapeChart.sendKeys(checkoutDate);
	 * test_steps.add("Checkout date: " + checkoutDate); }
	 */

	public ArrayList<String> verifyNoShowPaymentPopUp(WebDriver driver, String title, String expiryDate,
			String nameOnCard, String cardNo, String paymentMethod, String type, String percentage,
			ArrayList<String> baseAmount, ArrayList<String> totalNights, String taxes, ArrayList<String> test_steps) {

		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		ArrayList<String> details = new ArrayList<>();
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle), driver);
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		String amountDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText()
				.trim();
		String balanceDisplayed = reservation.CheckInPaymentPopup_Balance.getText().replace("$ ", "");
		if (amountDisplayed.equals(amount)) {
			assertEquals(amountDisplayed, amount, "Faild to verify calculated amount");
			test_steps.add("Successfull verified amount as : <b>" + amountDisplayed + "</b>");
		} else {
			test_steps.add("Existing issue in CP: Convert WCF Service to in-process calls - PolicyService"
					+ "<br/><a href='https://innroad.atlassian.net/browse/REF-62'>" + "Verified : REF-62</a><br/>");
			reslogger.info("Existing issue in CP: Convert WCF Service to in-process calls - PolicyService"
					+ "<br/><a href='https://innroad.atlassian.net/browse/REF-62'>" + "Verified : REF-62</a><br/>");
			// assertEquals(amountDisplayed,amount,"Faild to verify calculated
			// amount");
		}
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle), driver);
		String titleDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText();
		reslogger.info(" Verified Payment Page Title : " + titleDisplayed);
		assertEquals(titleDisplayed, title, "Failed: To verify Payment Page Title");
		test_steps.add(" Verified Payment Page Title :<b> " + title + "</b>");
		WebElement paymentElement = driver.findElement(
				By.xpath("//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + paymentMethod + "']"));
		String paymentMethodDisplayed = paymentElement.getText().trim();
		assertEquals(paymentMethodDisplayed, paymentMethod, "Failed: To verify Payment Method");
		test_steps.add(" Verified Payment Method:<b> " + paymentMethodDisplayed + "</b> ");
		reslogger.info(" Verified Payment Method: " + paymentMethodDisplayed);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.folioBalance), driver);
		String folioBalence = reservation.folioBalance.getText().replace("$", "").trim();
		test_steps.add(" Verified folio Balence<b> " + folioBalence + "</b> ");
		reslogger.info(" Verifiedfolio Balence: " + folioBalence);

		String currentdate = Utility.getCurrentDate("MM/dd/yyyy");
		String date = "(//input[contains(@data-bind,'value:PaymentDate')])[2]";
		Wait.waitForElementToBeVisibile(By.xpath(date), driver);
		String checkOutDate = driver.findElement(By.xpath(date)).getAttribute("value");
		test_steps.add(" Verified checkOutDate: " + checkOutDate);
		reslogger.info(" Verified checkOutDate :" + checkOutDate);
		assertEquals(checkOutDate, currentdate, "Failed: To verify Account Details");

		String cardNoDisplayed = ((String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_CardNumber)).trim();
		assertEquals(cardNoDisplayed, cardNo, "Failed: To verify Card Number");
		test_steps.add(" Verified Card Number: <b>" + cardNoDisplayed + "</b>");
		reslogger.info(" Verified Card Number");

		String nameOnCardDisplayed = (String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_NameOnCard);
		assertEquals(nameOnCardDisplayed, nameOnCard, "Failed: To verify Name on Card ");
		test_steps.add("Verified Name on Card:<b>  " + nameOnCard + "</b>");
		reslogger.info(" Verified Name on Card");

		String expiryDateDisplayed = (String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_Expiry);
		assertEquals(expiryDateDisplayed, expiryDate, "Failed: To verify Expiry Date ");
		test_steps.add(" Verified Expiry Date:<b> " + expiryDateDisplayed + "</b>");
		reslogger.info(" Verified Expiry Date");

		String buttonDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().trim();
		buttonDisplayed = buttonDisplayed.replace("$", "").replace("PAY", "").trim();
		test_steps.add(" Verified button displayed  Amount:<b> " + buttonDisplayed + "</b>");
		reslogger.info(" Verified button displayed  Amount:<b> " + buttonDisplayed + "</b>");
		assertEquals(buttonDisplayed, folioBalence, "Failed: To verify Payment Type");

		return test_steps;

	}

	public ArrayList<String> verifyNoShowPaymentPopUp(WebDriver driver, String title, String Amount, String expiryDate,
			String nameOnCard, String cardNo, String paymentMethod, String type, ArrayList<String> test_steps) {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.NoShowPaymentPopupTitle), driver);
		String titleDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupTitle.getText();
		reslogger.info(" Verified Payment Page Title : " + titleDisplayed);
		assertEquals(titleDisplayed, title, "Failed: To verify Payment Page Title");
		test_steps.add(" Verified Payment Page Title :<b> " + title + "</b>");
		WebElement paymentElement = driver.findElement(
				By.xpath("//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@title='" + paymentMethod + "']"));
		String paymentMethodDisplayed = paymentElement.getText().trim();
		assertEquals(paymentMethodDisplayed, paymentMethod, "Failed: To verify Payment Method");
		test_steps.add(" Verified Payment Method:<b> " + paymentMethodDisplayed + "</b> ");
		reslogger.info(" Verified Payment Method: " + paymentMethodDisplayed);

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.folioBalance), driver);
		String folioBalence = reservation.folioBalance.getText().replace("$", "").replace(".00", "").trim();
		test_steps.add(" Verified folio Balance<b> " + folioBalence + "</b> ");
		reslogger.info(" Verified folio Balance: " + folioBalence);
		assertEquals(Double.parseDouble(folioBalence), Double.parseDouble(Amount),
				"Mismatch actuval value different than expected value");

		String currentdate = Utility.getCurrentDate("MM/dd/yyyy");
		String date = "(//input[contains(@data-bind,'value:PaymentDate')])[2]";
		Wait.waitForElementToBeVisibile(By.xpath(date), driver);
		String checkOutDate = driver.findElement(By.xpath(date)).getAttribute("value");
		test_steps.add(" Verified checkOutDate: " + checkOutDate);
		reslogger.info(" Verified checkOutDate :" + checkOutDate);
		assertEquals(checkOutDate, currentdate, "Failed: To No-Show Payment date");

		String cardNoDisplayed = ((String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_CardNumber)).trim();
		assertEquals(cardNoDisplayed, cardNo, "Failed: To verify Card Number");
		test_steps.add(" Verified Card Number: <b>" + cardNoDisplayed + "</b>");
		reslogger.info(" Verified Card Number");

		String nameOnCardDisplayed = (String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_NameOnCard);
		assertEquals(nameOnCardDisplayed, nameOnCard, "Failed: To verify Name on Card ");
		test_steps.add("Verified Name on Card:<b>  " + nameOnCard + "</b>");
		reslogger.info(" Verified Name on Card");

		String expiryDateDisplayed = (String) executor.executeScript("return arguments[0].value",
				reservation.CP_Reservation_NoShowPaymentPopup_Expiry);
		assertEquals(expiryDateDisplayed, expiryDate, "Failed: To verify Expiry Date ");
		test_steps.add(" Verified Expiry Date:<b> " + expiryDateDisplayed + "</b>");
		reslogger.info(" Verified Expiry Date");

		String buttonDisplayed = reservation.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.getText().trim();
		buttonDisplayed = buttonDisplayed.replace("$", "").replace("PAY", "").replace(".00", "").trim();
		test_steps.add(" Verified button displayed  Amount:<b> " + buttonDisplayed + "</b>");
		reslogger.info(" Verified button displayed  Amount:<b> " + buttonDisplayed + "</b>");
		assertEquals(buttonDisplayed, folioBalence, "Failed: To verify Payment Type");

		reservation.CP_Reservation_NoShowPaymentPopup_LogAndPayButton.click();
		test_steps.add(" Click on pament button");
		reslogger.info("  Click on pament button");

		return test_steps;

	}
	/*
	 * public String takePayment(WebDriver driver, ArrayList test_steps, String
	 * PaymentType, String CardNumber, String NameOnCard, String CardExpDate, String
	 * TakePaymentType, String IsChangeInPayAmount, String ChangedAmountValue,
	 * String IsSetAsMainPaymentMethod, String AddPaymentNotes) throws
	 * InterruptedException {
	 * test_steps.add("******************* Making payment **********************");
	 * reslogger.info("******************* Making payment **********************");
	 * Elements_CPReservation res = new Elements_CPReservation(driver);
	 * Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment);
	 * 
	 * Wait.WaitForElement(driver,
	 * OR_Reservation.CP_Reservation_Folio_TakePayment_Amount); String amount =
	 * res.CP_Reservation_Folio_TakePayment_Amount.getText().trim();
	 * reslogger.info("amount : " + amount); test_steps.add("Amount before Pay : " +
	 * amount); reslogger.info("Amount before Pay : " + amount);
	 * 
	 * Wait.WaitForElement(driver,
	 * OR_Reservation.CP_Reservation_Folio_TakePayment_PaymentButton);
	 * res.CP_Reservation_Folio_TakePayment_PaymentButton.click();
	 * 
	 * String CCNumber =
	 * "//h4[text()='Take Payment']/../..//label[text()='CARD NUMBER']/following-sibling::div/input"
	 * ; String name =
	 * "//h4[text()='Take Payment']/../..//label[text()='NAME ON CARD']/following-sibling::div/input"
	 * ; String exp =
	 * "//h4[text()='Take Payment']/../..//label[contains(text(),'EXPIRY')]/following-sibling::div/input"
	 * ; if (PaymentType.equalsIgnoreCase("Swipe")) { String CCCard =
	 * "(//h4[text()='Take Payment']/../..//label[text()='CARD NUMBER']/following-sibling::div/input)[2]"
	 * ; String swipe = "//h4[text()='Take Payment']/../..//button[text()='SWIPE']";
	 * Wait.WaitForElement(driver, swipe);
	 * driver.findElement(By.xpath(swipe)).click();
	 * test_steps.add("Clicking on Swipe"); reslogger.info("Clicking on Swipe");
	 * Wait.WaitForElement(driver, CCCard);
	 * driver.findElement(By.xpath(CCCard)).sendKeys(CardNumber);
	 * test_steps.add("Enter Card Number : " + CardNumber);
	 * reslogger.info("Enter Card Number : " + CardNumber); } else { String payment
	 * =
	 * "//h4[text()='Take Payment']/../..//label[text()='PAYMENT METHOD']/..//div/div//span[text()='"
	 * + PaymentType.trim() + "']"; Wait.WaitForElement(driver, payment);
	 * driver.findElement(By.xpath(payment)).click();
	 * test_steps.add("Select Payment Type as : " + PaymentType);
	 * reslogger.info("Select Payment Type as : " + PaymentType); if
	 * (PaymentType.equalsIgnoreCase("MC") || PaymentType.equalsIgnoreCase("Visa")
	 * || PaymentType.equalsIgnoreCase("Amex") ||
	 * PaymentType.equalsIgnoreCase("Discover")) {
	 * 
	 * Wait.WaitForElement(driver, CCNumber); JavascriptExecutor js =
	 * (JavascriptExecutor) driver; String CC = (String)
	 * js.executeScript("return arguments[0].value",
	 * driver.findElement(By.xpath(CCNumber))); reslogger.info(CC); if (CC.isEmpty()
	 * || CC.equalsIgnoreCase("")) { Wait.WaitForElement(driver, CCNumber);
	 * driver.findElement(By.xpath(CCNumber)).sendKeys(CardNumber);
	 * test_steps.add("Enter Card Number : " + CardNumber);
	 * reslogger.info("Enter Card Number : " + CardNumber);
	 * Wait.WaitForElement(driver, name);
	 * driver.findElement(By.xpath(name)).sendKeys(NameOnCard);
	 * test_steps.add("Enter Card Name : " + NameOnCard);
	 * reslogger.info("Enter Card Name : " + NameOnCard);
	 * Wait.WaitForElement(driver, exp);
	 * driver.findElement(By.xpath(exp)).sendKeys(CardExpDate);
	 * test_steps.add("Enter Card Exp Date : " + CardExpDate);
	 * reslogger.info("Enter Card Exp Date : " + CardExpDate); } } } if
	 * (IsChangeInPayAmount.equalsIgnoreCase("Yes")) {
	 * test_steps.add("Change the pay amount value : Yes");
	 * reslogger.info("Change the pay amount value : Yes");
	 * res.CP_Reservation_Folio_TakePayment_Amount.clear();
	 * res.CP_Reservation_Folio_TakePayment_Amount.sendKeys(Keys.chord(Keys.CONTROL,
	 * "a"));
	 * res.CP_Reservation_Folio_TakePayment_Amount.sendKeys(ChangedAmountValue);
	 * test_steps.add("Enter the Change Amount Value : " + ChangedAmountValue);
	 * reslogger.info("Enter the Change Amount Value : " + ChangedAmountValue);
	 * amount = ChangedAmountValue; } else { test_steps.add("paying the amount : " +
	 * amount); reslogger.info("paying the amount : " + amount); }
	 * 
	 * Wait.WaitForElement(driver,
	 * OR_Reservation.CP_Reservation_Folio_TakePayment_TypeButton);
	 * res.CP_Reservation_Folio_TakePayment_TypeButton.click();
	 * 
	 * String type =
	 * "//h4[text()='Take Payment']/../..//label[text()='TYPE']/..//div/div//span[text()='"
	 * + TakePaymentType.trim() + "']"; Wait.WaitForElement(driver, type);
	 * driver.findElement(By.xpath(type)).click();
	 * test_steps.add("Select Take Payment Type : " + TakePaymentType);
	 * reslogger.info("Select Take Payment Type : " + TakePaymentType);
	 * 
	 * String setAsMainPaymentMethod =
	 * "//span[text()='Set As Main Payment Method']/../input"; if
	 * (IsSetAsMainPaymentMethod.equalsIgnoreCase("Yes")) { if
	 * (!driver.findElement(By.xpath(setAsMainPaymentMethod)).isSelected()) {
	 * Wait.WaitForElement(driver, setAsMainPaymentMethod);
	 * driver.findElement(By.xpath("//span[text()='Set As Main Payment Method']")).
	 * click(); test_steps.add("Select set As Main Payment Method");
	 * reslogger.info("Select set As Main Payment Method"); } else {
	 * test_steps.add("Already Selected set As Main Payment Method");
	 * reslogger.info("Already Selected set As Main Payment Method"); } }
	 * 
	 * String addPaymentNotes = "//button[text()='ADD NOTES']"; String notes =
	 * "//input[@placeholder='Add Notes']";
	 * 
	 * if (!(AddPaymentNotes.isEmpty() || AddPaymentNotes.equalsIgnoreCase(""))) {
	 * Wait.WaitForElement(driver, addPaymentNotes);
	 * driver.findElement(By.xpath(addPaymentNotes)).click();
	 * test_steps.add("Clicking on Add Payment Notes");
	 * reslogger.info("Clicking on Add Payment Notes"); Wait.WaitForElement(driver,
	 * notes); driver.findElement(By.xpath(notes)).sendKeys(AddPaymentNotes);
	 * test_steps.add("Adding payment notes : " + AddPaymentNotes);
	 * reslogger.info("Adding payment notes : " + AddPaymentNotes); }
	 * 
	 * String button = "//h4[text()='Take Payment']/../..//button[contains(text(),'"
	 * + amount.trim() + "')]"; Wait.WaitForElement(driver, button);
	 * driver.findElement(By.xpath(button)).click(); test_steps.add("Click on Pay");
	 * reslogger.info("Click on Pay");
	 * 
	 * String takePayType =
	 * "//h4[contains(text(),'Successful')]/../..//label[text()='TYPE']/following-sibling::span";
	 * Wait.WaitForElement(driver, takePayType); String paytype =
	 * driver.findElement(By.xpath(takePayType)).getText().trim();
	 * assertEquals(paytype, TakePaymentType.trim());
	 * test_steps.add("Take Payment Type validated after payment : " +
	 * TakePaymentType);
	 * reslogger.info("Take Payment Type validated after payment : " +
	 * TakePaymentType);
	 * 
	 * String paymentType =
	 * "//h4[contains(text(),'Successful')]/../..//label[text()='PAYMENT METHOD']/following-sibling::label/span[contains(text(),'"
	 * + PaymentType.trim() + "')]";
	 * 
	 * if (PaymentType.equalsIgnoreCase("Swipe")) { paymentType =
	 * "//h4[contains(text(),'Successful')]/../..//label[text()='PAYMENT METHOD']/following-sibling::label/span[contains(text(),'MC')]"
	 * ; } Wait.WaitForElement(driver, paymentType); if
	 * (driver.findElement(By.xpath(paymentType)).isDisplayed()) {
	 * test_steps.add("Payment Type validated after payment : " + PaymentType);
	 * reslogger.info("Payment Type validated after payment : " + PaymentType); }
	 * else { test_steps.add("Payment Type not displayed after payment : " +
	 * PaymentType); reslogger.info("Payment Type not displayed after payment : " +
	 * PaymentType); }
	 * 
	 * String status =
	 * "//h4[contains(text(),'Successful')]/../..//label[text()='Approved']";
	 * Wait.WaitForElement(driver, status); if
	 * (driver.findElement(By.xpath(status)).isDisplayed()) {
	 * test_steps.add("Transaction status is : Approved");
	 * reslogger.info("Transaction status is : Approved"); } else {
	 * test_steps.add("Transaction status is not : Approved");
	 * reslogger.info("Transaction status is not : Approved"); }
	 * 
	 * String payNotes = "//h4[contains(text(),'Successful')]/../..//span[text()='"
	 * + AddPaymentNotes + "']"; if (!(AddPaymentNotes.isEmpty() ||
	 * AddPaymentNotes.equalsIgnoreCase(""))) { if
	 * (driver.findElement(By.xpath(payNotes)).isDisplayed()) {
	 * test_steps.add("Paymant notes displayed " + AddPaymentNotes);
	 * reslogger.info("Paymant notes displayed " + AddPaymentNotes); } else {
	 * test_steps.add("Paymant notes not displayed " + AddPaymentNotes);
	 * reslogger.info("Paymant notes not displayed " + AddPaymentNotes); } }
	 * 
	 * String close =
	 * "//h4[contains(text(),'Successful')]/../..//button[text()='Close']";
	 * Wait.WaitForElement(driver, close);
	 * driver.findElement(By.xpath(close)).click();
	 * test_steps.add("Click on Close"); reslogger.info("Click on Close");
	 * 
	 * String saveFolio =
	 * "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
	 * Wait.WaitForElement(driver, saveFolio);
	 * driver.findElement(By.xpath(saveFolio)).click();
	 * test_steps.add("Click on Save"); reslogger.info("Click on Save"); String
	 * loading = "(//div[@class='ir-loader-in'])"; int count = 0; while (true) { if
	 * (!driver.findElement(By.xpath(loading)).isDisplayed()) { break; } else if
	 * (count == 20) { break; } else { count++; Wait.wait2Second(); } }
	 * reslogger.info("Waited to loading symbol"); return amount; }
	 * 
	 */

	public String getPhoneNumber(WebDriver driver) {
		String path = "//div[contains(@data-bind,'with:GuestInfo')]//span[contains(@data-bind,'mailing_formattedPhoneNumber')]";
		Wait.explicit_wait_visibilityof_webelement_120(driver.findElement(By.xpath(path)), driver);
		String foundNo = driver.findElement(By.xpath(path)).getText();
		return foundNo;
	}

	public void clickVrboPopupYes(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String popup = "//span[contains(text(),' This reservation was booked on ')]";

		try {
			Wait.WaitForElement(driver, popup);
			if (driver.findElements(By.xpath(popup)).size() > 0) {
				Utility.ScrollToElement(res.clickYesVrboPopup, driver);
				res.clickYesVrboPopup.click();
			}
		} catch (Exception e) {
		}

		String loading = "(//div[@class='ir-loader-in'])[2]";
		int counter = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (counter == 40) {
				break;
			} else {
				counter++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
		Wait.wait25Second();
	}

	public void clickVrboPopupYesPopup(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String popup = "//span[contains(text(),' This reservation was booked on ')]";

		try {
			Wait.WaitForElement(driver, popup);
			if (driver.findElements(By.xpath(popup)).size() > 0) {
				Utility.ScrollToElement(res.clickYesVrboPopup, driver);
				res.clickYesVrboPopup.click();
				reslogger.info("Waited to loading symbol");
				Wait.wait15Second();
			}
		} catch (Exception e) {
			reslogger.info("Waited to loading symbol in catch");
		}

		reslogger.info("Waited to loading symbol outside");
	}

	public HashMap<String, String> getStayInfoCheckInCheckOutDate(WebDriver driver) {
		HashMap<String, String> dates = new HashMap<String, String>();
		String checkinDatePath = "//div[contains(text(),'Stay')]/..//div[@class='checkin']/span[1]";
		String checkOutDatePath = "//div[contains(text(),'Stay')]/..//div[@class='checkout']/span[1]";
		String valueCheckIn = driver.findElement(By.xpath(checkinDatePath)).getText().trim();
		String valueCheckOut = driver.findElement(By.xpath(checkOutDatePath)).getText().trim();
		dates.put("CheckIN", valueCheckIn);
		dates.put("ChecOUT", valueCheckOut);
		return dates;

	}

	public void selectChangeOnlyForAddedRemovedDates(WebDriver driver, boolean isSelected, ArrayList<String> testSteps)
			throws InterruptedException {

		String popup = "(//label[@class='ir-radiobtn']/input)[2]";
		WebElement element = driver.findElement(By.xpath(popup));
		Wait.WaitForElement(driver, popup);
		Utility.ScrollToElement(element, driver);
		if (isSelected) {
			boolean isElementSelected = element.isSelected();
			if (!isElementSelected) {
				Utility.ScrollToElement(element, driver);
				Utility.clickThroughJavaScript(driver, element);
				reslogger.info("Selected Change only for added/removed dates");
				testSteps.add("Selected Change only for added/removed dates");
			} else {
				reslogger.info("Already Selected Change only for added/removed dates");
				testSteps.add("Already Selected Change only for added/removed dates");
			}
		} else {
			boolean isElementSelected = element.isSelected();
			if (isElementSelected) {
				Utility.ScrollToElement(element, driver);
				Utility.clickThroughJavaScript(driver, element);
				reslogger.info("DeSelected Change only for added/removed dates");
				testSteps.add("DeSelected Change only for added/removed dates");
			} else {
				reslogger.info("Already DeSelected Change only for added/removed dates");
				testSteps.add("Already DeSelected Change only for added/removed dates");
			}
		}
	}

	public void longStayCheckbox(WebDriver driver, ArrayList<String> testSteps, boolean isEnabled)
			throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.longStayCheckBox);
		Utility.ScrollToElement(reservation.longStayCheckBox, driver);
		if (isEnabled) {
			if (!reservation.longStayCheckBox.isSelected()) {

				reservation.longStayCheckBox.click();
				testSteps.add("long stay checkbox is checked");
				reslogger.info("long stay checkbox is checked");
			} else {
				testSteps.add("long stay checkbox is already checked");
				reslogger.info("long stay checkbox is already checked");
			}
		} else {
			if (reservation.longStayCheckBox.isSelected()) {
				// Utility.ScrollToElement(reservation.longStayCheckBox, driver);
				reservation.longStayCheckBox.click();
				testSteps.add("long stay checkbox is Unchecked");
				reslogger.info("long stay checkbox is Unchecked");
			} else {
				testSteps.add("long stay checkbox is already Unchecked");
				reslogger.info("long stay checkbox is already Unchecked");
			}
		}

	}

	public void clicksetExemptanyWay(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {

		Elements_CPReservation element = new Elements_CPReservation(driver);

		String path = "(//div[@class='modal-dialog modal-md']//h4[contains(@class,'modal-title') and text()='Long Stay- Tax Exempt'])[2]";
		Wait.WaitForElement(driver, path);
		String buttonText = "(//button[contains(@data-bind,'longStaySetExemptAnywayText')])[2]";
		WebElement elements = driver.findElement(By.xpath(buttonText));
		Utility.ScrollToElement(elements, driver);
		elements.click();
		testSteps.add("Click Set Exempt ");
		reslogger.info("Click Set Exempt");
		Wait.wait10Second();
		Wait.waitforPageLoad(30, driver);
	}

	public void clickSaveButtonAfterEditPaymentMethods(WebDriver driver, ArrayList<String> steps)
			throws InterruptedException {
		// Click Save Button
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.PAYMENTMETHOD_SAVEBUTTON);
		Utility.ScrollToElement(res.PAYMENTMETHOD_SAVEBUTTON, driver);
		res.PAYMENTMETHOD_SAVEBUTTON.click();
		reslogger.info("Clicked Save Button After Updating Payment Method");
		test_steps.add("Clicked Save Button After Updating Payment Method");

	}

	public void clickSaveButtonUnderFolioTab(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean isSaveEnabled = Utility.isElementEnabled(driver, By.xpath(OR_Reservation.ClickSaveButtonUnderFolioTab));
		if (isSaveEnabled) {
			Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ClickSaveButtonUnderFolioTab, driver);
			Wait.explicit_wait_elementToBeClickable(res.clickSaveButtonUnderFolioTab, driver);
			res.clickSaveButtonUnderFolioTab.click();
			test_steps.add("Click On save button");
			reslogger.info("Click On save button");
			Wait.waitforPageLoad(30, driver);
		}
	}

	public void changeReservationStayDetails(WebDriver driver, ArrayList test_steps, String checkinDate,
			String checkoutDate, String adults, String children, String ratePlanName, String ratePlanPromoCode,
			String recalculateOption, String roomClass) throws Exception {

		ClickEditStayInfo(driver, test_steps);
		ClickStayInfo_ChangeDetails(driver, test_steps);
		try {
			Wait.waitForElementToBeVisibile(By.xpath("//div[contains(@id,'rcDtails')]"), driver);
		} catch (Exception e) {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_CheckinCal), driver);
		}

		select_CheckInDate(driver, test_steps, checkinDate);
		select_CheckoutDate(driver, test_steps, checkoutDate);
		enter_Adults(driver, test_steps, adults);
		enter_Children(driver, test_steps, children);
		select_Rateplan(driver, test_steps, ratePlanName, ratePlanPromoCode);
		VerifyFoliocalculateRate(driver, test_steps, recalculateOption);
		clickOnFindRooms(driver, test_steps);
		select_RoomWhileChnageDates(driver, test_steps, roomClass, "Yes", "");
		String save = "//button[text()='Save']";
		Wait.WaitForElement(driver, save);
		driver.findElement(By.xpath(save)).click();
		reslogger.info("Clicking on save");
		test_steps.add("Clicking on save");

		test_steps.add("===Verifying Pop up display dialog for Cost change===");
		reslogger.info("===Verifying Pop up display dialog for Cost change===");
		String yes = "//div[contains(text(),'Are you sure you wish to change the total cost of the stay from')]/..//button[text()='Yes']";
		try {
			Wait.WaitForElement(driver, yes);
			Wait.waitForElementToBeVisibile(By.xpath(yes), driver);
			driver.findElement(By.xpath(yes)).click();
		} catch (Exception e) {
			Wait.WaitForElement(driver, yes);
			Wait.waitForElementToBeVisibile(By.xpath(yes), driver);
			driver.findElement(By.xpath(yes)).click();
		}
	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsForNoRateChangePerAdultPerNight(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			ArrayList<String> ratesList, String totalRoomCharges, HashMap<String, String> productValue,
			ArrayList<String> testSteps) throws InterruptedException, NumberFormatException, ParseException {
		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";
		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);
		if (pro_rate > base_amount)
			pro_rate = base_amount;
		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * numberofDays
				* (Integer.parseInt(adults));
		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";
		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);
		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);
		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");
		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";
		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";
		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;
		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));
		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));
		}
		// IF Pro-Rate/Addtional Charges off
		String averagePerNight = "";
		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;
		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {
				System.out.println("**********************************First if:");
				if (fullIntervals == 0) {
					intial = base_amount;
				} else if (fullIntervals > 0 && halfIntervals == 0) {
					intial = base_amount * fullIntervals;
				} else {
					int total = fullIntervals + 1;
					intial = base_amount * total;
				}
				reslogger.info("Calculated Rate:" + intial);
			}
			if (isProRateApplied && !isAdditionalChargesApplied) {
				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");
				if (fullIntervals == 0) {
					intial = base_amount;
				} else if (fullIntervals > 0 && halfIntervals == 0) {
					intial = base_amount * fullIntervals;
				} else {
					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);
					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;
				}
				reslogger.info("Calculated Rate:" + intial);
			}
			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;
			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);
			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				System.out.println("**********************************Third if:");
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//                      for (int i = 1; i < child_adults; i++) {
//                          System.out.println("i: " + i);
//                          child_adults = child_adults - 1;
//                          System.out.println("total: " + child_adults);
//                          System.out.println("max person: " + intMaxPerson);
//                          if (child_adults == intMaxPerson) {
//                              System.out.println("in total = max person");
//                              count = i;
//                              isTrue = true;
//                              break;
//                          }
//                      }
					}
//                  if (isTrue) {
//                      childDifference = count;
//                  }
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);
					if (fullIntervals == 0) {
						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");
						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));
					} else if (fullIntervals > 0 && halfIntervals == 0) {
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("one: " + one);
						intial = one * fullIntervals;
					} else {
						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);
				}
			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				System.out.println("**********************************4th if:");
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
//                      for (int i = 1; i < child_adults; i++) {
//                          System.out.println("i: " + i);
//                          child_adults = child_adults - 1;
//                          System.out.println("total: " + child_adults);
//                          System.out.println("max person: " + intMaxPerson);
//                          if (child_adults == intMaxPerson) {
//                              System.out.println("in total = max person");
//                              count = i;
//                              isTrue = true;
//                              break;
//                          }
//                      }
					}
//                  if (isTrue) {
//                      childDifference = count;
//                  }
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);
					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);
					if (adultDifference > 0 || childDifference > 0) {
						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
							fullamount = fullIntervals * fullamount;
							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));
							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);
							intial = fullamount + half_amount;
							reslogger.info(intial);
						}
						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");
							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
							intial = intial * fullIntervals;
							reslogger.info(intial);
						}
						if (fullIntervals == 0) {
							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
							reslogger.info(intial);
						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;
						}
						if (fullIntervals > 0 && halfIntervals > 0) {
							double full = fullIntervals * base_amount;
							reslogger.info(full);
							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);
						}
						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);
						}
					}
				}
			}
			String getValue = Utility.RemoveDollarandSpaces(driver, totalRateValueElement.getText()).trim();
			// rateApplied = String.format("%.2f", intial);
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + totalRoomCharges);
			testSteps.add("Expected rates: " + totalRoomCharges);
			testSteps.add("Found: " + getValue);
			if (getValue.equals(totalRoomCharges)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");
			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");
			}
			reslogger.info("isRoomChargesEqual: " + isRoomChargesEqual);
			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");
			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";
			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;
			ArrayList<Double> getRates = intervalRateCalculation(driver, dateFormat, checkInDate, checkOutDate, adults,
					child, roomClassExpand, intervalLength, baseAmount, adultCapacity, personCapacity,
					isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges, additionalChildCharges,
					isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges, proRateAdditionalChildCharges,
					testSteps);
			reslogger.info("Size of ratesList: " + ratesList.size());
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			for (int i = 0; i < reservationElement.StartDate.size(); i++) {
				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);
				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				if (startDate.equalsIgnoreCase(dateInRequiredFormat)) {
					test_steps.add("Failed: Intervals are showing as per requirment");
					// assertEquals(startDate, dateInRequiredFormat,"Failed:
					// interval date is mismatching!");
				} else {
					test_steps.add("Failed: Intervals are not showing as per requirment");
				}
				String getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));
				reslogger.info(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				testSteps.add(dateInRequiredFormat + "        " + folioName + "            " + getAmount);
				temp++;
				double total = 0.00;
				reslogger.info("ratesList: " + ratesList.size());
				reslogger.info("i: " + i);
				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {
						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
						}
					} else {
						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
							assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
						} else {
							total = 0.00;
							assertEquals(rateName, "*No Rate Change", "Failed: rate name is mismatching!");
							assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
						}
					}
				} else {
					if (temp > fullIntervals) {
						incrementCounter = interval * fullIntervals + 1;
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
							reslogger.info("total: " + total);
						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);
					} else {
						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						if (i < ratesList.size()) {
							total = Double.parseDouble(ratesList.get(i));
						} else {
							total = 0.00;
						}
						reslogger.info("total: " + total);
					}
				}
				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}
		}
		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ArrayList<String> roomCharges = new ArrayList<>();
		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;
	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsWithPackageForPerRoomPerStay(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {
		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";
		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);
		if (pro_rate > base_amount)
			pro_rate = base_amount;
		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));
		double totalAmountForPackage = Double.parseDouble(productValue.get("amount"));
		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);
		String rateApplied = "";
		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);
		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);
		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");
		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";
		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";
		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;
		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));
		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));
		}
		String averagePerNight = "";
		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;
		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {
				System.out.println("**********************************First if:");
				if (fullIntervals == 0) {
					intial = base_amount;
				} else if (fullIntervals > 0 && halfIntervals == 0) {
					intial = base_amount * fullIntervals;
				} else {
					int total = fullIntervals + 1;
					intial = base_amount * total;
				}
				reslogger.info("Calculated Rate:" + intial);
			}
			if (isProRateApplied && !isAdditionalChargesApplied) {
				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");
				if (fullIntervals == 0) {
					intial = base_amount;
				} else if (fullIntervals > 0 && halfIntervals == 0) {
					intial = base_amount * fullIntervals;
				} else {
					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);
					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;
				}
				reslogger.info("Calculated Rate:" + intial);
			}
			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;
			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);
			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
						/*
						 * for (int i = 1; i < child_adults; i++) { System.out.println("i: " + i);
						 * child_adults = child_adults - 1; System.out.println("total: " +
						 * child_adults); System.out.println("max person: " + intMaxPerson); if
						 * (child_adults == intMaxPerson) { System.out.println("in total = max person");
						 * count = i; isTrue = true; break; } }
						 */
					}
					/*
					 * if (isTrue) { childDifference = count; }
					 */
					System.out.println("Additional Adult:" + adultDifference);
					System.out.println("Additional Child:" + childDifference);
					if (fullIntervals == 0) {
						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");
						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));
					} else if (fullIntervals > 0 && halfIntervals == 0) {
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("one: " + one);
						intial = one * fullIntervals;
					} else {
						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);
				}
			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));
					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
						/*
						 * for (int i = 1; i < child_adults; i++) { System.out.println("i: " + i);
						 * child_adults = child_adults - 1; System.out.println("total: " +
						 * child_adults); System.out.println("max person: " + intMaxPerson); if
						 * (child_adults == intMaxPerson) { System.out.println("in total = max person");
						 * count = i; isTrue = true; break; } }
						 */
					}
					/*
					 * if (isTrue) { childDifference = count; }
					 */
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);
					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);
					if (adultDifference > 0 || childDifference > 0) {
						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
							fullamount = fullIntervals * fullamount;
							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));
							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);
							intial = fullamount + half_amount;
							reslogger.info(intial);
						}
						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");
							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
							intial = intial * fullIntervals;
							reslogger.info(intial);
						}
						if (fullIntervals == 0) {
							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));
							reslogger.info(intial);
						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;
						}
						if (fullIntervals > 0 && halfIntervals > 0) {
							double full = fullIntervals * base_amount;
							reslogger.info(full);
							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);
						}
						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);
						}
					}
				}
			}
			Folio folio = new Folio();
			String getValue = folio.splitStringBySign(totalRateValueElement.getText(), "$").trim();
			intial = intial + totalAmountForPackage;
			rateApplied = String.format("%.2f", intial).trim();
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + rateApplied);
			testSteps.add("Expected rates: " + rateApplied);
			testSteps.add("Found: " + intial);
			if (getValue.equals(rateApplied)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");
			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");
			}
			intial = intial - totalAmountForPackage;
			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");
			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";
			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;
			// int rateListLength = driver
			// .findElements(By.xpath("//td[contains(@data-bind,
			// 'showInnroadCurrency: { value:')]")).size();
			ArrayList<Double> getRates = new ArrayList<Double>();
			// getRates.add(totalAmountForPackage);
			ArrayList<Double> getratesForInterval = intervalRateCalculation(driver, dateFormat, checkInDate,
					checkOutDate, adults, child, roomClassExpand, intervalLength, baseAmount, adultCapacity,
					personCapacity, isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges,
					additionalChildCharges, isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges,
					proRateAdditionalChildCharges, testSteps);
			for (int i = 0; i < getratesForInterval.size(); i++) {
				getRates.add(getratesForInterval.get(i));
			}
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			int size = reservationElement.StartDate.size();
			testSteps.add("Expected package rate for per room and per night: " + convertTotalPackageAmountIntoStr);
			String getAmount = reservationElement.RatePerInterval.get(0).getText();
			amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));
			String convertPackageAmount = String.format("%.2f", amountInDouble);
			testSteps.add("Found: " + amountInDouble);
			if (convertPackageAmount.equals(convertTotalPackageAmountIntoStr)) {
				testSteps.add("Verified package amount");
			} else {
				testSteps.add("Failed: Package amount is mismatching!");
			}
			boolean isOneTime = true;
			for (int i = 1; i < size; i++) {
				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);
				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
				getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));
				reslogger.info(dateInRequiredFormat + "            " + folioName + "               " + getAmount);
				testSteps.add(dateInRequiredFormat + "             " + folioName + "               " + getAmount);
				temp++;
				double total = 0.00;
				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {
						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
					} else {
						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");
					}
				} else {
					if (temp > fullIntervals) {
						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
					} else {
						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);
					}
				}
				// rateList.add(rateApplied);
				String amount = String.format("%.2f", total);
				rateList.add("" + total);
			}
		}
		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();
		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;
	}

	public void selectcheckInAndCheckoutInTapeCharts(WebDriver driver, String checkinDate, String checkoutDate,
			String timeZone, ArrayList<String> test_steps) throws InterruptedException, ParseException {
		Elements_TapeChart TapeChart = new Elements_TapeChart(driver);
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		boolean isCheckinPassed = false;
		String checkinDay = checkinDate;
		// ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR.Select_Arrival_Date);
		Wait.explicit_wait_visibilityof_webelement(TapeChart.Select_Arrival_Date, driver);
		Wait.explicit_wait_elementToBeClickable(TapeChart.Select_Arrival_Date, driver);
		TapeChart.Select_Arrival_Date.click();
		test_steps.add("Click on checkin Calander on tape chart");
		TapeChart.checkinTapeChart.clear();
		// String checkInDate = ESTTimeZone.DateFormateForLineItem(Days);
		reslogger.info(checkinDate + " : " + checkoutDate);
		if (!checkinDate.equalsIgnoreCase("NA")) {
			isCheckinPassed = Utility.isGivenDatePassed(checkinDate, timeZone);
			checkinDate = Utility.parseDate(checkinDate, "dd/MM/yyyy", "MM/dd/yyyy");
		}
		reslogger.info(checkinDate + " : " + checkoutDate);

		if (checkinDate.equalsIgnoreCase("NA") || isCheckinPassed == true || checkoutDate.equalsIgnoreCase("NA")) {
			checkinDate = Utility.getNextDate(0, "MM/dd/yyyy", timeZone);
		}
		reslogger.info(checkinDate + " : " + checkoutDate);

		TapeChart.checkinTapeChart.sendKeys(checkinDate);
		test_steps.add("CheckIn date: " + checkinDate);

		Wait.WaitForElement(driver, NewTapeChart.ClickCalanderDepartDate);
		Wait.explicit_wait_visibilityof_webelement(TapeChart.clickCalanderDepartDate, driver);
		Wait.explicit_wait_elementToBeClickable(TapeChart.clickCalanderDepartDate, driver);
		TapeChart.clickCalanderDepartDate.click();
		test_steps.add("Click on checkout Calander on tape chart");
		TapeChart.checkOutTapeChart.clear();
		if (!checkoutDate.equalsIgnoreCase("NA") && !checkinDay.equalsIgnoreCase("NA")) {
			checkoutDate = Utility.parseDate(checkoutDate, "dd/MM/yyyy", "MM/dd/yyyy");
		}
		reslogger.info(checkinDate + " : " + checkoutDate);

		if (checkinDay.equalsIgnoreCase("NA") || isCheckinPassed == true || checkoutDate.equalsIgnoreCase("NA")) {
			checkoutDate = Utility.getNextDate(2, "MM/dd/yyyy", timeZone);
		}
		reslogger.info(checkinDate + " : " + checkoutDate);
		TapeChart.checkOutTapeChart.sendKeys(checkoutDate);
		test_steps.add("Checkout date: " + checkoutDate);
	}

	public void selectCheckInAndCheckoutInTapeCharts(WebDriver driver, String checkinDate, String checkoutDate,
			String timeZone, ArrayList<String> test_steps) throws InterruptedException, ParseException {
		Elements_TapeChart TapeChart = new Elements_TapeChart(driver);
		Elements_CPReservation elements = new Elements_CPReservation(driver);
		boolean isCheckinPassed = false;
		String checkinDay = checkinDate;
		Wait.WaitForElement(driver, OR.Select_Arrival_Date);
		Wait.explicit_wait_visibilityof_webelement(TapeChart.Select_Arrival_Date, driver);
		Wait.explicit_wait_elementToBeClickable(TapeChart.Select_Arrival_Date, driver);
		TapeChart.Select_Arrival_Date.click();
		test_steps.add("Click on checkin Calander on tape chart");
		TapeChart.checkinTapeChart.clear();
		reslogger.info(checkinDate + " : " + checkoutDate);

		TapeChart.checkinTapeChart.sendKeys(checkinDate);
		test_steps.add("CheckIn date: " + checkinDate);
		reslogger.info("CheckIn date: " + checkinDate);

		Wait.WaitForElement(driver, NewTapeChart.ClickCalanderDepartDate);
		Wait.explicit_wait_visibilityof_webelement(TapeChart.clickCalanderDepartDate, driver);
		Wait.explicit_wait_elementToBeClickable(TapeChart.clickCalanderDepartDate, driver);
		TapeChart.clickCalanderDepartDate.click();
		test_steps.add("Click on checkout Calander on tape chart");
		TapeChart.checkOutTapeChart.clear();
		TapeChart.checkOutTapeChart.sendKeys(checkoutDate);
		test_steps.add("Checkout date: " + checkoutDate);
		reslogger.info("Checkout date: " + checkoutDate);

	}

	public ArrayList<ArrayList<String>> intervalRateVerificationInChangeStayDetailsWithPackageForPerAdultPerStay(
			WebDriver driver, String dateFormat, String checkInDate, String checkOutDate, String adults, String child,
			String roomClass, String intervalLength, String baseAmount, String adultCapacity, String personCapacity,
			boolean isAdditionalChargesApplied, String maxAdult, String maxPerson, String additionalAdultCharges,
			String additionalChildCharges, boolean isProRateApplied, String proRatePerNight,
			String proRateAdditionalAdultCharges, String proRateAdditionalChildCharges, String folioName,
			HashMap<String, String> productValue, ArrayList<String> testSteps)
			throws InterruptedException, NumberFormatException, ParseException {

		Elements_CPReservation reservationElement = new Elements_CPReservation(driver);
		ArrayList<String> rateList = new ArrayList<>();
		ArrayList<String> dates = new ArrayList<>();
		String isRoomChargesEqual = "no";
		double pro_rate = Double.parseDouble(proRatePerNight);
		double base_amount = Double.parseDouble(baseAmount);

		if (pro_rate > base_amount)
			pro_rate = base_amount;

		// Number of Days
		int numberofDays = Integer
				.parseInt(Utility.differenceBetweenDates(Utility.parseDate(checkInDate, dateFormat, "dd/MM/yyyy"),
						Utility.parseDate(checkOutDate, dateFormat, "dd/MM/yyyy")));

		double totalAmountForPackage = Double.parseDouble(productValue.get("amount")) * (Integer.parseInt(adults));

		String convertTotalPackageAmountIntoStr = String.format("%.2f", totalAmountForPackage);
		reslogger.info("convertTotalPackageAmountIntoStr: " + convertTotalPackageAmountIntoStr);

		String rateApplied = "";
		int fullIntervals = 0;
		int halfIntervals = 0;
		reslogger.info("numberofDays: " + numberofDays);
		if (numberofDays >= (Integer.parseInt(intervalLength))) {
			fullIntervals = numberofDays / Integer.parseInt(intervalLength);
			halfIntervals = numberofDays % Integer.parseInt(intervalLength);
		}
		System.out.println("Full Interval:" + fullIntervals);
		System.out.println("Half Interval:" + halfIntervals);

		testSteps.add("Interval lenght: " + intervalLength);
		testSteps.add("Number of nights: " + numberofDays);
		testSteps.add("Full interval: " + fullIntervals);
		testSteps.add("Half interval: " + halfIntervals);

		int interval = Integer.parseInt(intervalLength);
		testSteps.add("");

		String totalRateValue = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrencySymbol')]";

		String avgPerNight = "//div[contains(@class,'room-search-result-container')]//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/div[2]/div/span[contains(text(),'Avg per night')]";
		String totalRateValueMRB = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]/div/following-sibling::div/div/span[contains(@data-bind,'text: $root.GetCurrency')]";

		String roomClassMRBExpand = "//div[@id='rcDtails']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";
		String roomClassExpand = "//div[contains(@class='room-search-result-container']//span[text()='" + roomClass
				+ "']/ancestor::div[contains(@data-bind,'click: expandRoomClassRateInfo')]";

		WebElement totalRateValueElement = null;
		WebElement roomClassExpandElement = null;
		WebElement averagePerNightElement = null;

		Wait.WaitForElement(driver, avgPerNight);
		Wait.waitForElementToBeInVisibile(By.xpath(avgPerNight), driver);
		Wait.waitForElementToBeClickable(By.xpath(avgPerNight), driver);
		averagePerNightElement = driver.findElement(By.xpath(avgPerNight));

		try {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValue));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassExpand));
		} catch (Exception e) {
			totalRateValueElement = driver.findElement(By.xpath(totalRateValueMRB));
			roomClassExpandElement = driver.findElement(By.xpath(roomClassMRBExpand));

		}

		String averagePerNight = "";
		reslogger.info("baseAmount: " + baseAmount);
		double intial = 0;

		if ((Integer.parseInt(adults) + Integer.parseInt(child)) <= Integer.parseInt(personCapacity)) {
			if (!isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************First if:");

				if (fullIntervals == 0) {

					intial = base_amount;

				}

				else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;

				} else {

					int total = fullIntervals + 1;
					intial = base_amount * total;

				}
				reslogger.info("Calculated Rate:" + intial);

			}
			if (isProRateApplied && !isAdditionalChargesApplied) {

				System.out.println("**********************************Second if:");
				reslogger.info("======Pro stay only =======");

				if (fullIntervals == 0) {

					intial = base_amount;

				} else if (fullIntervals > 0 && halfIntervals == 0) {

					intial = base_amount * fullIntervals;
				}

				else {

					double total_fullAmount = base_amount * fullIntervals;
					reslogger.info("total_fullAmount: " + total_fullAmount);

					double total_halfAmount = (Double.parseDouble(proRatePerNight) * halfIntervals);
					reslogger.info("total_halfAmount: " + total_halfAmount);
					intial = total_fullAmount + total_halfAmount;

				}

				reslogger.info("Calculated Rate:" + intial);

			}

			System.out.println("Number of Days:" + numberofDays);
			System.out.println("intervalLength:" + intervalLength);
			System.out.println("fullIntervals:" + fullIntervals);
			System.out.println("half:" + halfIntervals);
			int adultDifference = 0;
			int childDifference = 0;
			int personDifference = 0;

			reslogger.info("child: " + child);
			reslogger.info("adults: " + adults);
			int child_adults = Integer.parseInt(child) + Integer.parseInt(adults);
			reslogger.info("child_adults" + child_adults);

			// if Additional Charges Applied ANd ProRate False
			if (isAdditionalChargesApplied && !isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)) {
					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					int count = 0;
					boolean isTrue = false;
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
						/*
						 * for (int i = 1; i < child_adults; i++) { System.out.println("i: " + i);
						 * child_adults = child_adults - 1; System.out.println("total: " +
						 * child_adults); System.out.println("max person: " + intMaxPerson); if
						 * (child_adults == intMaxPerson) { System.out.println("in total = max person");
						 * count = i; isTrue = true; break; } }
						 */

					}

					/*
					 * if (isTrue) { childDifference = count; }
					 */
					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					if (fullIntervals == 0) {

						reslogger.info("adult: " + adultDifference * (Double.parseDouble(additionalAdultCharges)));
						reslogger.info("child: " + childDifference * (Double.parseDouble(additionalChildCharges)));
						reslogger.info("base_amount: " + base_amount);
						reslogger.info("fullIntervals: 0");

						intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

					}

					else if (fullIntervals > 0 && halfIntervals == 0) {

						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * fullIntervals;

					} else {

						int total = fullIntervals + 1;
						double one = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
								+ (childDifference * (Double.parseDouble(additionalChildCharges)));

						reslogger.info("one: " + one);
						intial = one * total;
					}
					reslogger.info("expected rate: " + intial);

				}

			}
			// if Additional Charges Applied And ProRate True
			if (isAdditionalChargesApplied && isProRateApplied) {
				if (Integer.parseInt(adults) <= Integer.parseInt(adultCapacity)
						|| numberofDays < (Integer.parseInt(intervalLength))) {

					if (Integer.parseInt(adults) > Integer.parseInt(maxAdult))
						adultDifference = Math.abs(Integer.parseInt(maxAdult) - Integer.parseInt(adults));

					child_adults = child_adults - adultDifference;
					// 5
					int count = 0;
					boolean isTrue = false;
					System.out.println("child_adults: " + child_adults);
					int intMaxPerson = Integer.parseInt(maxPerson);
					if (child_adults > intMaxPerson) {
						System.out.println("child is also diff");
						childDifference = Math.abs(child_adults - intMaxPerson);
						/*
						 * for (int i = 1; i < child_adults; i++) { System.out.println("i: " + i);
						 * child_adults = child_adults - 1; System.out.println("total: " +
						 * child_adults); System.out.println("max person: " + intMaxPerson); if
						 * (child_adults == intMaxPerson) { System.out.println("in total = max person");
						 * count = i; isTrue = true; break; } }
						 */

					}

					/*
					 * if (isTrue) { childDifference = count; }
					 */

					System.out.println("Additonal Adult:" + adultDifference);
					System.out.println("Additonal Child:" + childDifference);

					testSteps.add("Additonal Adult:" + adultDifference);
					testSteps.add("Additonal Child:" + childDifference);

					if (adultDifference > 0 || childDifference > 0) {

						if (fullIntervals > 0 && halfIntervals > 0) {
							//
							reslogger.info("apply half and ful both");
							double fullamount = base_amount
									+ (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							fullamount = fullIntervals * fullamount;

							double half_amount = Double.parseDouble(proRatePerNight)
									+ (adultDifference * Double.parseDouble(proRateAdditionalAdultCharges))
									+ (childDifference * (Double.parseDouble(proRateAdditionalChildCharges)));

							half_amount = half_amount * halfIntervals;
							reslogger.info("fullamount: " + fullamount);
							reslogger.info("half_amount: " + half_amount);

							intial = fullamount + half_amount;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							reslogger.info("apply full both");

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							intial = intial * fullIntervals;
							reslogger.info(intial);

						}

						if (fullIntervals == 0) {

							intial = base_amount + (adultDifference * (Double.parseDouble(additionalAdultCharges)))
									+ (childDifference * (Double.parseDouble(additionalChildCharges)));

							reslogger.info(intial);

						}
					} else {
						if (fullIntervals == 0) {
							intial = base_amount;

						}
						if (fullIntervals > 0 && halfIntervals > 0) {

							double full = fullIntervals * base_amount;
							reslogger.info(full);

							double half = halfIntervals * Double.parseDouble(proRatePerNight);
							reslogger.info(half);
							intial = full + half;
							reslogger.info(intial);

						}

						if (fullIntervals > 0 && halfIntervals == 0) {
							intial = fullIntervals * base_amount;
							reslogger.info(intial);

						}

					}

				}

			}

			Folio folio = new Folio();
			String getValue = folio.splitStringBySign(totalRateValueElement.getText(), "$").trim();
			intial = intial + totalAmountForPackage;
			rateApplied = String.format("%.2f", intial).trim();
			reslogger.info("convert: " + getValue);
			reslogger.info("rateApplied: " + rateApplied);

			testSteps.add("Expected rates: " + rateApplied);
			testSteps.add("Found: " + intial);
			if (getValue.equals(rateApplied)) {
				isRoomChargesEqual = "yes";
				testSteps.add("Verified interval rate value is matching");

			} else {
				isRoomChargesEqual = "no";
				testSteps.add("Verified interval rate value is not matching");

			}

			intial = intial - totalAmountForPackage;
			// averagePerNight = String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// totalRateValueElement.getText())))
			// / numberofDays);
			//
			// assertEquals(
			// String.format("%.1f",
			// (Double.parseDouble(Utility.RemoveDollarandSpaces(driver,
			// averagePerNightElement.getText().split(" ")[3])))),
			// averagePerNight, "Failed: rate didn't match");

			testSteps.add("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			reslogger.info("Verified total Amount:" + baseAmount + " Avg Per Night:" + averagePerNight);
			roomClassExpandElement.click();
			String requiredDateFormat = "MMM dd yyyy";

			// getting amounts for each date
			Double amountInDouble = 0.0;
			int fullIntervalCount = 0;
			String timeZone = "US/Eastern";
			int temp = 0;
			int incrementCounter = 0;
			// int rateListLength = driver
			// .findElements(By.xpath("//td[contains(@data-bind,
			// 'showInnroadCurrency: { value:')]")).size();

			ArrayList<Double> getRates = new ArrayList<Double>();
			// getRates.add(totalAmountForPackage);
			ArrayList<Double> getratesForInterval = intervalRateCalculation(driver, dateFormat, checkInDate,
					checkOutDate, adults, child, roomClassExpand, intervalLength, baseAmount, adultCapacity,
					personCapacity, isAdditionalChargesApplied, maxAdult, maxPerson, additionalAdultCharges,
					additionalChildCharges, isProRateApplied, proRatePerNight, proRateAdditionalAdultCharges,
					proRateAdditionalChildCharges, testSteps);
			for (int i = 0; i < getratesForInterval.size(); i++) {
				getRates.add(getratesForInterval.get(i));
			}
			reslogger.info("Size of list: " + reservationElement.StartDate.size());
			int size = reservationElement.StartDate.size();
			testSteps.add("Expected package rate for per room and per night: " + convertTotalPackageAmountIntoStr);
			String getAmount = reservationElement.RatePerInterval.get(0).getText();
			amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));
			String convertPackageAmount = String.format("%.2f", amountInDouble);
			testSteps.add("Found: " + amountInDouble);
			if (convertPackageAmount.equals(convertTotalPackageAmountIntoStr)) {
				testSteps.add("Verified package amount");
			} else {
				testSteps.add("Failed: Package amount is mismatching!");

			}
			boolean isOneTime = true;
			for (int i = 1; i < size; i++) {

				reslogger.info("i: " + i);
				String getDate = ESTTimeZone.getDateonBasedOfDate(dateFormat, checkInDate, incrementCounter, timeZone);
				dates.add(getDate);

				String dateInRequiredFormat = ESTTimeZone.reformatDate(getDate, dateFormat, requiredDateFormat);
				reslogger.info(dateInRequiredFormat);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RateDisplayName), driver);
				Utility.ScrollToElement_NoWait(reservationElement.StartDate.get(i), driver);
				String startDate = reservationElement.StartDate.get(i).getText();
				String rateName = reservationElement.RateDisplayName.get(i).getText();
				assertEquals(startDate, dateInRequiredFormat, "Failed: interval date is mismatching!");
				assertEquals(rateName, folioName, "Failed: rate name is mismatching!");
				getAmount = reservationElement.RatePerInterval.get(i).getText();
				amountInDouble = Double.parseDouble(Utility.RemoveDollarandSpaces(driver, getAmount));

				reslogger.info(dateInRequiredFormat + "            " + folioName + "               " + getAmount);
				testSteps.add(dateInRequiredFormat + "             " + folioName + "               " + getAmount);
				temp++;
				double total = 0.00;

				if (isRoomChargesEqual.equalsIgnoreCase("yes")) {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);
						assertEquals(amountInDouble, total, "Failed: interval amount is mismatching!");

					}
				} else {
					if (temp > fullIntervals) {

						incrementCounter = interval * fullIntervals + 1;
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));

						if (isProRateApplied) {
							if (halfIntervals == 0) {
								total = getRates.get(0);
							} else {
								total = getRates.get(1);
							}
						} else {
							total = getRates.get(0);
						}
						reslogger.info("total: " + total);
					}

					else {

						incrementCounter = incrementCounter + Integer.parseInt(intervalLength);
						reslogger.info(getRates.get(0));
						reslogger.info(getRates.get(1));
						total = getRates.get(0);
						reslogger.info("total: " + total);

					}

				}

				// rateList.add(rateApplied);

				String amount = String.format("%.2f", total);
				rateList.add("" + total);

			}

		}

		ArrayList<ArrayList<String>> ratesAlongWithDate = new ArrayList<>();
		ArrayList<String> productRates = new ArrayList<String>();
		productRates.add(convertTotalPackageAmountIntoStr);
		ratesAlongWithDate.add(rateList);
		ratesAlongWithDate.add(dates);
		ArrayList<String> roomCharges = new ArrayList<>();

		roomCharges.add(isRoomChargesEqual);
		ratesAlongWithDate.add(roomCharges);
		ratesAlongWithDate.add(productRates);
		return ratesAlongWithDate;

	}

	public ArrayList<String> takePayment(WebDriver driver, String paymentMethod, String amount, String takePaymentType)
			throws InterruptedException, ParseException {
		ArrayList<String> test_steps = new ArrayList<String>();

		Elements_Reservation ReservationFolio = new Elements_Reservation(driver);
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		//
		try {
			Wait.explicit_wait_visibilityof_webelement(ReservationFolio.Click_Pay_Button, driver);
			Utility.ScrollToElement(ReservationFolio.Click_Pay_Button, driver);
			Wait.explicit_wait_elementToBeClickable(ReservationFolio.Click_Pay_Button, driver);
			ReservationFolio.Click_Pay_Button.click();
		} catch (Exception e) {
			WebDriverWait wait = new WebDriverWait(driver, 30);
			wait.until(ExpectedConditions
					.elementToBeClickable(By.xpath("//*[@id='bpjscontainer_102']//button[contains(text(),'Pay')]")))
					.click();
		}
		Wait.explicit_wait_xpath(OR.Verify_Payment_Details_poup, driver);
		if (Utility.validateString(amount)) {
			Wait.explicit_wait_visibilityof_webelement(
					CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount, driver);
			CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.clear();
			reslogger.info("Clear Amount Field");
			CPReservationPage.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount
					.sendKeys(Keys.chord(Keys.CONTROL, "a"), amount);
			test_steps.add("Entered Amount :" + amount);
			reslogger.info("Entered Amount :" + amount);
		}

		if (Utility.validateString(takePaymentType)) {
			Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_Folio_TakePayment_TypeButton);
			CPReservationPage.CP_Reservation_Folio_TakePayment_TypeButton.click();
			String type = "//h4[text()='Take Payment']/../..//label[text()='TYPE']/..//div/div//span[text()='"
					+ takePaymentType.trim() + "']";
			Wait.WaitForElement(driver, type);
			driver.findElement(By.xpath(type)).click();
			test_steps.add("Select Take Payment Type : " + takePaymentType);
			reslogger.info("Select Take Payment Type : " + takePaymentType);
		}

		if (Utility.validateString(paymentMethod)) {
			String path = "(//div[contains(@data-bind,'IsSplitPaymentEnable')]//button[@class='btn dropdown-toggle btn-default']/span)[2]";
			Wait.WaitForElement(driver, path);
			WebElement PaymentMethodElement = driver.findElement(By.xpath(path));
			Utility.ScrollToElement(PaymentMethodElement, driver);
			Utility.clickThroughJavaScript(driver, PaymentMethodElement);
			test_steps.add("Click Payment Method");
			reslogger.info("Click CPayment Method");

			String options = "//paymentmethod//div[contains(@class,'open')]/ul//li/a//span[@class='text'][contains(text(),'"
					+ paymentMethod + "')]";
			Wait.WaitForElement(driver, options);
			WebElement PaymentMethodOptions = driver.findElement(By.xpath(options));
			Utility.ScrollToElement(PaymentMethodOptions, driver);
			Utility.clickThroughJavaScript(driver, PaymentMethodOptions);
		}
		String buttonName = CPReservationPage.payButton.getText().split(" ")[0];

		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.payButton), driver);
		Utility.ScrollToElement(CPReservationPage.payButton, driver);
		Utility.clickThroughJavaScript(driver, CPReservationPage.payButton);
		test_steps.add("Clicking on " + buttonName + " Button ");
		reslogger.info("Clicking on " + buttonName + " Button ");
		Wait.waitUntilPageLoadNotCompleted(driver, 20);
		Wait.WaitForElement(driver, OR_Reservation.NoShowSuccess_CloseButton);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", CPReservationPage.CP_Reservation_NoShowSuccessCloseButton);
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");

		Wait.waitUntilPageLoadNotCompleted(driver, 30);
		return test_steps;
	}

	public void adjust_LineItem(WebDriver driver, ArrayList test_steps, String adjustLineItem, String adjustamount,
			String desc, String itemDesc) throws InterruptedException {
		test_steps.add("******************* Adjust Room Charge  Item folio**********************");
		reslogger.info("******************* Adjust Room Charge Line Item folio**********************");
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
		String line = "(//td[@class='lineitem-category']/span[text()='Room Charge'])/following::td[@class='lineitem-description']/a[text()='"
				+ desc + "']";
		Wait.WaitForElement(driver, line);
		Utility.ScrollToElement(driver.findElement(By.xpath(line)), driver);
		driver.findElement(By.xpath(line)).click();
		test_steps.add("Click Room Charge line item ");
		reslogger.info("Click Room Charge line item ");
		Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ItemDetailOnFolioPopup, driver);
		new Select(driver.findElement(By.xpath("//Select[@class='form-control taxID']")))
				.selectByVisibleText(adjustLineItem);
		test_steps.add("Select Catgory :" + adjustLineItem);
		reslogger.info("Select Catgory " + adjustLineItem);
		String descrription = "//input[@class='form-control taxID'  and @data-bind='value: $parent.NewFolioDescription, enable: $parent.AllowEdit']";
		driver.findElement(By.xpath(descrription)).sendKeys(itemDesc);
		test_steps.add("Entered Description:  " + itemDesc);
		reslogger.info("Entered Description:  " + itemDesc);
		String amountAdd = "//input[@class='form-control taxID'  and @data-bind='value: $parent.NewFolioAmount,enable:$parent.AllowEdit']";
		driver.findElement(By.xpath(amountAdd)).sendKeys(adjustamount);
		test_steps.add("Entered Adjustment:  " + adjustamount);
		reslogger.info("Entered Adjustment:  " + adjustamount);
		String clickAdd = "//button[contains(@data-bind,'click: $parent.btnAdd_Click') and text()='Add']";
		driver.findElement(By.xpath(clickAdd)).click();
		test_steps.add("Click Add Button");
		reslogger.info("Click Add Button");
		Wait.wait5Second();
		String clickContinue = "//button[contains(@data-bind,'click: ClickContinueButton') and text()='Continue']";
		driver.findElement(By.xpath(clickContinue)).click();
		Wait.waitForElementToBeInvisibile(By.xpath(OR_Reservation.ItemDetailOnFolioPopup), driver);
		Wait.wait2Second();
		test_steps.add("Click Continue Button");
		reslogger.info("Click Continue Button");
		// String saveFolio =
		// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save Folio");
		reslogger.info("Click on Save Folio");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");
	}

	public String perDayChargeWithTax(WebDriver driver, String oneDayRoomCharge, ArrayList<String> perDayTax) {
		String perDayChargewithTaxDayWise = null;

		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		Double taxCal = 0.00;
		Double chargewithtaxCal = 0.00;
		for (int j = 0; j < perDayTax.size(); j++) {
			taxCal = taxCal + Double.parseDouble(perDayTax.get(j));
			chargewithtaxCal = Double.parseDouble(oneDayRoomCharge) + taxCal;
			perDayChargewithTaxDayWise = df.format(chargewithtaxCal);
		}
		return perDayChargewithTaxDayWise;

	}

	public void adjust_LineItem(WebDriver driver, ArrayList test_steps, String adjustLineItem, String adjustamount,
			String desc) throws InterruptedException {
		test_steps.add("******************* Ajust Room Charge  Item folio**********************");
		reslogger.info("******************* Adjust Room Charge Line Item folio**********************");
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
		String line = "(//td[@class='lineitem-category']/span[text()='Room Charge'])/following::td[@class='lineitem-description']/a[text()='"
				+ desc + "']";
		Wait.WaitForElement(driver, line);
		Utility.ScrollToElement(driver.findElement(By.xpath(line)), driver);
		driver.findElement(By.xpath(line)).click();
		test_steps.add("Click Room Charge line item ");
		reslogger.info("Click Room Charge line item ");
		Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ItemDetailOnFolioPopup, driver);
		new Select(driver.findElement(By.xpath("//Select[@class='form-control taxID']")))
				.selectByVisibleText(adjustLineItem);
		test_steps.add("Select Catgory :" + adjustLineItem);
		reslogger.info("Select Catgory " + adjustLineItem);
		String descrription = "//input[@class='form-control taxID'  and @data-bind='value: $parent.NewFolioDescription, enable: $parent.AllowEdit']";
		driver.findElement(By.xpath(descrription)).sendKeys("adjust");
		test_steps.add("Entered Description:  " + desc);
		reslogger.info("Entered Description:  " + desc);
		String amountAdd = "//input[@class='form-control taxID'  and @data-bind='value: $parent.NewFolioAmount,enable:$parent.AllowEdit']";
		driver.findElement(By.xpath(amountAdd)).sendKeys(adjustamount);
		test_steps.add("Entered Adjustment:  " + adjustamount);
		reslogger.info("Entered Adjustment:  " + adjustamount);
		String clickAdd = "//button[contains(@data-bind,'click: $parent.btnAdd_Click') and text()='Add']";
		driver.findElement(By.xpath(clickAdd)).click();
		test_steps.add("Click Add Button");
		reslogger.info("Click Add Button");
		Wait.wait5Second();
		String clickContinue = "//button[contains(@data-bind,'click: ClickContinueButton') and text()='Continue']";
		driver.findElement(By.xpath(clickContinue)).click();
		Wait.waitForElementToBeInvisibile(By.xpath(OR_Reservation.ItemDetailOnFolioPopup), driver);
		Wait.wait2Second();
		test_steps.add("Click Continue Button");
		reslogger.info("Click Continue Button");
		// String saveFolio =
		// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save Folio");
		reslogger.info("Click on Save Folio");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");
	}

	public String getRoomClass(WebDriver driver, String roomClass) {
		String path = "//span[contains(@data-bind, 'text: roomClass.name')]";
		Wait.WaitForElement(driver, path);
		String getText = "";
		List<WebElement> roomList = driver.findElements(By.xpath(path));
		for (WebElement ele : roomList) {
			getText = ele.getText().trim();
			if (!roomClass.equalsIgnoreCase(getText))
				break;
		}

		return getText;
	}

	public ArrayList<String> changingReservationStatus(WebDriver driver, String itemStatus)
			throws InterruptedException {
		ArrayList<String> test_steps = new ArrayList<>();
		Navigation nav = new Navigation();
		switch (itemStatus) {
		case "Confirmed":
			test_steps.addAll(confirmingReservation(driver, test_steps));
			break;
		case "Guaranteed":
			test_steps.addAll(guaranteedReservation(driver, test_steps));
			break;
		case "On Hold":
			test_steps.addAll(onHoldingReservation(driver, test_steps));
			break;
		case "Cancelled":
			test_steps.addAll(cancelingReservation(driver, test_steps));
			break;
		case "No Show":
			test_steps.addAll(noShowingReservation(driver, test_steps));
			break;

		}

		return test_steps;
	}

	public void changeReservationStatus(WebDriver driver, ArrayList test_steps, String ResStatus)
			throws InterruptedException {

		try {
			Elements_CPReservation res = new Elements_CPReservation(driver);
			JavascriptExecutor jse = (JavascriptExecutor) driver;

			String expand = "//div[@class='ng-statusChnage ir-statusMenu ul']//span";
			Wait.WaitForElement(driver, expand);
			WebElement expandElement = driver.findElement(By.xpath(expand));
			Wait.explicit_wait_elementToBeClickable(expandElement, driver);
			try {
				expandElement.click();
			} catch (Exception e) {
				JavascriptExecutor executor = (JavascriptExecutor) driver;
				executor.executeScript("arguments[0].click();", expandElement);
			}
			String status = "//div[@class='ng-statusChnage ir-statusMenu ul']//span//ul//span[text()='" + ResStatus
					+ "']";
			try {
				Wait.WaitForElement(driver, status);
				driver.findElement(By.xpath(status)).click();
			} catch (Exception e) {
				JavascriptExecutor executor = (JavascriptExecutor) driver;
				executor.executeScript("arguments[0].click();", driver.findElement(By.xpath(status)));
			}
			test_steps.add("Reservation status changes to : " + ResStatus);
			reslogger.info("Reservation status changes to : " + ResStatus);
			if (ResStatus.equals("Cancel")) {
				Utility.app_logs.info("ResStatus: " + ResStatus);
				Wait.WaitForElement(driver, OR_Reservation.CancelReservation_Reason);
				Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CancelReservation_Reason), driver);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelReservation_Reason), driver);
				res.CancelReservation_Reason.sendKeys(ResStatus);
				test_steps.add("Cancel Reason : " + ResStatus);
				reslogger.info("Cancel Reason: " + ResStatus);
				String cancelReservation = "//button[text()='PROCEED TO CANCELLATION PAYMENT']|//button[text()='CONFIRM CANCELLATION ']";
				String mainPaymentCheckbox = "//div[contains(@data-bind,'IsPaymentSetAsMainMethodVisible')]//span[@class='ir-check-box']";
				String PaymentRefund = "(//button[@class='btn ir-btn btn-success btn-block'])[1]";
				try {
					Utility.ScrollToElement(res.ProceedToPaymentButton, driver);
					res.ProceedToPaymentButton.sendKeys(Keys.ENTER);
					Utility.clickThroughJavaScript(driver, res.ProceedToPaymentButton);
					test_steps.add("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
					reslogger.info("Click 'PROCEED TO CANCELLATION PAYMENT' Button");
					String loading = "(//div[@class='ir-loader-in'])";
					Wait.waitTillElementDisplayed(driver, loading);
				} catch (Exception e) {
					reslogger.info("Button with text  'PROCEED TO CANCELLATION PAYMENT' is not clicked");

				}
				try {

					Wait.WaitForElement(driver, cancelReservation);
					Wait.waitForElementToBeVisibile(By.xpath(cancelReservation), driver);
					Wait.waitForElementToBeClickable(By.xpath(cancelReservation), driver);
					driver.findElement(By.xpath(cancelReservation)).click();
				} catch (Exception e) {
					reslogger.info("Button with text  'Confirm CANCELLATION' not showing");
				}
				try {
					/// (//span[@class='ir-check-box'])[5]
					Wait.WaitForElement(driver, mainPaymentCheckbox);
					Wait.waitForElementToBeVisibile(By.xpath(mainPaymentCheckbox), driver);
					Wait.waitForElementToBeClickable(By.xpath(mainPaymentCheckbox), driver);
					Wait.wait5Second();
					driver.findElement(By.xpath(mainPaymentCheckbox)).click();

					Wait.WaitForElement(driver, PaymentRefund);
					Wait.waitForElementToBeVisibile(By.xpath(PaymentRefund), driver);
					Wait.waitForElementToBeClickable(By.xpath(PaymentRefund), driver);
					driver.findElement(By.xpath(PaymentRefund)).click();
				} catch (Exception e) {
					e.printStackTrace();
				}
				try {

					Wait.WaitForElement(driver, OR_Reservation.CancelReservation_Successful);
					Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CancelReservation_Successful), driver);
					Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelReservation_Successful), driver);
					Wait.wait5Second();
					Utility.ScrollToElement(res.CancelReservation_Successful, driver);
					res.CancelReservation_Successful.click();
					test_steps.add("Confirm Close Button Clicked");
					reslogger.info("Confirm Close Button Clicked");

				} catch (Exception e) {
					e.printStackTrace();
					// TODO: handle exception
				}

			}
			String loading = "(//div[@class='ir-loader-in'])";
			int count = 0;
			while (true) {
				if (driver.findElements(By.xpath(loading)).size() > 4) {
					break;
				} else if (count == 20) {
					break;
				} else {
					count++;
					Wait.wait2Second();

				}
				reslogger.info("Waited to loading symbol");
			}
		} catch (Exception e) {
			e.printStackTrace();
			// reslogger.info(e);
		}

	}

	public ArrayList<String> verifyTransactionDeclinedMessageInTakePaymentPopup(WebDriver driver)
			throws InterruptedException, ParseException {
		ArrayList<String> testSteps = new ArrayList<String>();

		Elements_Reservation ReservationFolio = new Elements_Reservation(driver);
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		try {
			Wait.WaitForElement(driver, OR.Click_Pay_Button);
			Wait.waitForElementToBeVisibile(By.xpath(OR.Click_Pay_Button), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR.Click_Pay_Button), driver);
			Utility.ScrollToElement(ReservationFolio.Click_Pay_Button, driver);
			ReservationFolio.Click_Pay_Button.click();
		} catch (Exception e) {
			WebDriverWait wait = new WebDriverWait(driver, 30);
			wait.until(ExpectedConditions
					.elementToBeClickable(By.xpath("//*[@id='bpjscontainer_102']//button[contains(text(),'Pay')]")))
					.click();
		}

		Wait.WaitForElement(driver, OR_Reservation.PayButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.PayButton), driver);
		String buttonName = CPReservationPage.PayButton.getText().split(" ")[0];
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.PayButton), driver);
		Utility.ScrollToElement(CPReservationPage.PayButton, driver);
		Utility.clickThroughJavaScript(driver, CPReservationPage.PayButton);
		testSteps.add("Clicking on " + buttonName + " Button ");
		reslogger.info("Clicking on " + buttonName + " Button ");

		testSteps.add(
				"Verify that Error Message 'Transaction Declined. Please try again or enter a different payment method.' is diplaying");
		reslogger.info(
				"Verify that Error Message 'Transaction Declined. Please try again or enter a different payment method.' is diplaying");

		Wait.WaitForElement(driver, OR_Reservation.transactionDeclinedErrorMessage);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.transactionDeclinedErrorMessage), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.transactionDeclinedErrorMessage), driver);
		assertTrue(CPReservationPage.transactionDeclinedErrorMessage.isDisplayed(), "Failed : is Element Dipslayed");
		String getText = CPReservationPage.transactionDeclinedErrorMessage.getText().trim();
		assertEquals(getText, "Transaction Declined. Please try again or enter a different payment method.",
				"Failed : Transaction declined. Please try again");

		testSteps.add(
				"Verified that Error Message 'Transaction Declined. Please try again or enter a different payment method.' is diplaying");
		reslogger.info(
				"Verified that Error Message 'Transaction Declined. Please try again or enter a different payment method.' is diplaying");

		Wait.WaitForElement(driver, OR_Reservation.closeTakePaymentPopup);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.closeTakePaymentPopup), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.closeTakePaymentPopup), driver);
		CPReservationPage.closeTakePaymentPopup.click();
		testSteps.add("Clicking on close Button.");
		reslogger.info("Clicking on close Button.");

		return testSteps;
	}

	public void cancelPaymentLineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory,
			String cancelNote) throws InterruptedException {
		test_steps.add("******************* CANCEL PAYMENT LINE ITEM **********************");
		reslogger.info("******************* CANCEL PAYMENT LINE ITEM **********************");

		Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);

		String paymentLineItem = "//tbody[starts-with(@data-bind,'getElement: ComputedFolioItemsElement')]/tr/td/span[text()='"
				+ LineItemCategory + "']/../following-sibling::td/a";

		Wait.WaitForElement(driver, paymentLineItem);
		driver.findElement(By.xpath(paymentLineItem)).click();
		Wait.explicit_wait_10sec(ReservationPage.paymentPopup, driver);
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.PaymentPopup, driver);
		ReservationPage.addNotesWhileCancelPayment.sendKeys(cancelNote);
		test_steps.add("Enter cancel notes as : Test Notes");
		reslogger.info("Enter cancel notes as : Test Notes");
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ClickProcessButtonOnPayMentPopup, driver);
		Wait.waitUntilButtonIsEnabledByLocator(By.xpath(OR_Reservation.ClickProcessButtonOnPayMentPopup), driver, 30);
		ReservationPage.clickProcessButtonOnPayMentPopup.click();
		test_steps.add("Click Process");
		reslogger.info("Click Process");
		Wait.waitUntilButtonIsEnabledByLocator(By.xpath(OR_Reservation.ClickContinueButton), driver, 30);
		ReservationPage.clickContinueButton.click();
		test_steps.add("Click Continue");
		reslogger.info("Click Continue");

		Wait.wait2Second();
		// ReservationPage.Commit_LineItem.click();

		// String saveFolio =
		// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save Folio");
		reslogger.info("Click on Save Folio");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");

	}

	public void addLineItem(WebDriver driver, ArrayList test_steps, String date, String LineItemCategory,
			String LineItemCategoryAmount) throws InterruptedException {
		test_steps.add("******************* Add Line Item to folio**********************");
		reslogger.info("******************* Add Line Item to folio**********************");

		String[] item = LineItemCategory.split("\\|");
		String[] amt = LineItemCategoryAmount.split("\\|");
		for (int i = 0; i < item.length; i++) {

			Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
			Wait.explicit_wait_visibilityof_webelement_150(ReservationPage.Add_LineItem, driver);
			Utility.ScrollToElement(ReservationPage.Add_LineItem, driver);
			ReservationPage.Add_LineItem.click();
			test_steps.add("Click Add");
			reslogger.info("Click Add");
			Wait.wait2Second();
			Utility.ScrollToElement(ReservationPage.Select_LineItem_Category, driver);
			Wait.wait2Second();
			String path = "//td//div[contains(@class,'ng-calendarIcon')]//i";
			Wait.WaitForElement(driver, path);
			driver.findElement(By.xpath(path)).click();
			Utility.selectStartDate(driver, test_steps, date);
			Wait.explicit_wait_visibilityof_webelement(ReservationPage.Select_LineItem_Category, driver);
			new Select(ReservationPage.Select_LineItem_Category).selectByVisibleText(item[i]);
			test_steps.add("Adding line item to folio : " + item[i]);
			reslogger.info("Adding line item to folio : " + item[i]);

			test_steps.add("Line Item Quantity : 1");
			reslogger.info("Line Item Quantity : 1");

			ReservationPage.Enter_LineItem_Amount.sendKeys(amt[i]);
			test_steps.add("Add Line Item Amount : " + amt[i]);
			reslogger.info("Add Line Item Amount : " + amt[i]);

			Wait.wait2Second();
			ReservationPage.Commit_LineItem.click();
			test_steps.add("Click Commit");
			reslogger.info("Click Commit");
			Wait.wait2Second();
		}
		// String saveFolio =
		// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save Folio");
		reslogger.info("Click on Save Folio");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");
	}

	public void ChangeGuestInfoLastName(WebDriver driver, ArrayList<String> steps, String lastName)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.GuestInfo_Editbutton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GuestInfo_Editbutton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GuestInfo_Editbutton), driver);
		Utility.ScrollToElement(element.GuestInfo_Editbutton, driver);
		Utility.clickThroughJavaScript(driver, element.GuestInfo_Editbutton);
		reslogger.info("Click Guest Info Edit button");
		steps.add("Click Guest Info Edit button");
		driver.findElement(By.xpath("//input[contains(@data-bind,'contact.lastName')]")).clear();
		reslogger.info("copy" + element.COPY_CP_GuestInfo_LastName1.getAttribute("value").toString().trim());
		driver.findElement(By.xpath("//input[contains(@data-bind,'contact.lastName')]")).sendKeys(lastName);
		try {
			Wait.WaitForElement(driver, OR_Reservation.GuestInfo_Savebutton);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.GuestInfo_Savebutton), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.GuestInfo_Savebutton), driver);
			Utility.ScrollToElement(element.GuestInfo_Savebutton, driver);
			element.GuestInfo_Savebutton.click();

		} catch (Exception e) {

			Utility.clickThroughJavaScript(driver, element.GuestInfo_Savebutton);
		}

		reslogger.info("Click Guest Info Save button");
		steps.add("Click Guest Info Save button");

	}

	public void clickYesButtonRoomWhileChnageDatesMsg(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.RoomWhileChangeDatesPopupYesButton);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RoomWhileChangeDatesPopupYesButton), 60, driver);
		Utility.ScrollToElement(res.RoomWhileChangeDatesPopupYesButton, driver);
		try {
			res.RoomWhileChangeDatesPopupYesButton.click();
			Wait.waitForElementToBeGone(driver, res.RoomWhileChangeDatesPopupYesButton, 5);
			Utility.clickThroughJavaScript(driver, res.RoomWhileChangeDatesPopupYesButton);
			test_steps.add("Click Yes Button");
			reslogger.info("Click Yes Button");
		} catch (Exception e) {
			// TODO: handle exception
			res.RoomWhileChangeDatesPopupYesButton.click();
			test_steps.add("Click Yes Button");
			reslogger.info("Click Yes Button");
		}
		verifySpinerLoading(driver);
	}

	public void void_LineItemFromRoomCharge(WebDriver driver, ArrayList test_steps, String adjustLineItem,
			String adjustamount, String desc, String itemDesc) throws InterruptedException {
		test_steps.add("******************* Void Room Charge  Item folio**********************");
		reslogger.info("******************* Void Room Charge Line Item folio**********************");
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
		String line = "(//td[@class='lineitem-category']/span[text()='Room Charge'])/following::td[@class='lineitem-description']/a[text()='"
				+ desc + "']";
		Wait.WaitForElement(driver, line);
		Utility.ScrollToElement(driver.findElement(By.xpath(line)), driver);
		driver.findElement(By.xpath(line)).click();
		test_steps.add("Click Room Charge line item ");
		reslogger.info("Click Room Charge line item ");
		Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);
		Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ItemDetailOnFolioPopup, driver);
		new Select(driver.findElement(By.xpath("//Select[@class='form-control taxID']")))
				.selectByVisibleText(adjustLineItem);
		test_steps.add("Select Catgory :" + adjustLineItem);
		reslogger.info("Select Catgory " + adjustLineItem);
		String descrription = "//input[@class='form-control taxID'  and @data-bind='value: $parent.NewFolioDescription, enable: $parent.AllowEdit']";
		driver.findElement(By.xpath(descrription)).sendKeys(itemDesc);
		test_steps.add("Entered Description:  " + itemDesc);
		reslogger.info("Entered Description:  " + itemDesc);
		String amountAdd = "//input[@class='form-control taxID'  and @data-bind='value: $parent.NewFolioAmount,enable:$parent.AllowEdit']";
		driver.findElement(By.xpath(amountAdd)).sendKeys(adjustamount);
		test_steps.add("Entered Amount:  " + adjustamount);
		reslogger.info("Entered Amount:  " + adjustamount);
		String notes = "//textarea[contains(@data-bind,'parent.NewFolioNotes')]";
		Wait.WaitForElement(driver, notes);
		driver.findElement(By.xpath(notes)).sendKeys(itemDesc);
		test_steps.add("Enter Void notes as :" + itemDesc);
		reslogger.info("Enter Void notes as :" + itemDesc);

		String clickAdd = "(//button[contains(@data-bind,'click: $parent.btnVoid_Click') and text()='Void'])[2]";
		driver.findElement(By.xpath(clickAdd)).click();
		test_steps.add("Click Void Button");
		reslogger.info("Click Void Button");
		Wait.wait5Second();
		String clickContinue = "//button[contains(@data-bind,'click: ClickContinueButton') and text()='Continue']";
		driver.findElement(By.xpath(clickContinue)).click();
		Wait.waitForElementToBeInvisibile(By.xpath(OR_Reservation.ItemDetailOnFolioPopup), driver);
		Wait.wait2Second();
		test_steps.add("Click Continue Button");
		reslogger.info("Click Continue Button");
		// String saveFolio =
		// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save Folio");
		reslogger.info("Click on Save Folio");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");

	}

	public boolean verifyOverideDepositToggle(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean toggleExists = false;
		try {

			toggleExists = driver.findElements(By.xpath(OR_Reservation.CP_NewReservation_OverrideDeposit)).size() != 0;
		} catch (Exception e) {
			reslogger.info(e);
			toggleExists = false;
		}
		return toggleExists;

	}

	public String createBasicReservation(WebDriver driver, String checkInDate, String checkOutDate, String adults,
			String children, String ratePlanName, String salutation, String guestFirstName, String guestLastName,
			String isGuesProfile, String paymentType, String cardNumber, String nameOnCard, String marketSegment,
			String referral, String roomClassNames, boolean isReservation, boolean closeReservation) throws Exception {
		ArrayList<String> test_steps = new ArrayList<String>();
		Navigation navigation = new Navigation();
		String reservationNo = null;
		try {
			if (isReservation) {
				navigation.cpReservation_Backward(driver);
			}
		} catch (Exception e) {
			if (isReservation) {
				navigation.reservation_Backward_2(driver);
			}
		}
		test_steps = click_NewReservation(driver, test_steps);
		select_CheckInDate(driver, test_steps, checkInDate);
		select_CheckoutDate(driver, test_steps, checkOutDate);
		test_steps = enter_Adults(driver, test_steps, adults);
		test_steps = enter_Children(driver, test_steps, children);
		test_steps = select_Rateplan(driver, test_steps, ratePlanName, "");
		test_steps = clickOnFindRooms(driver, test_steps);
		ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClassNames);
		selectRoomToReserve(driver, test_steps, roomClassNames, rooms.get(0));
		clickNext(driver, test_steps);
		String yearDate = Utility.getFutureMonthAndYearForMasterCard();
		Utility.expiryDate = yearDate;
		enter_MailingAddress_OnUnchecked_CreateGuestProfile(driver, test_steps, salutation, guestFirstName,
				guestLastName, isGuesProfile);
		enter_PaymentDetails(driver, test_steps, paymentType, cardNumber, nameOnCard, yearDate);
		enter_MarketSegmentDetails(driver, test_steps, "", marketSegment, referral);
		clickBookNow(driver, test_steps);
		reservationNo = get_ReservationConfirmationNumber(driver, test_steps);
		clickCloseReservationSavePopup(driver, test_steps);
		if (closeReservation) {
			closeReservationTab(driver);
		}
		return reservationNo;
	}

	public void dirtyPopupModelClickCancelButton(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckIn_ModelPopCancelButton);
		Utility.ScrollToElement(res.CP_Reservation_CheckIn_ModelPopCancelButton, driver);
		res.CP_Reservation_CheckIn_ModelPopCancelButton.click();
		test_steps.add("Click Cancel Button");
		reslogger.info("Click Cancel Button");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
		reslogger.info("Loading Done");

	}

	public void updateTaskFromReservation(WebDriver driver, String taskName, String taskCategoryName,
			String taskTypeName, String taskDetailsName, String taskRemarksName, String dueOnDate,
			String taskAssigneeName, String taskStatusName, ArrayList<String> test_steps) throws InterruptedException {
		String path = "//span[text()='Tasks ']/../..//td//span[text()='" + taskName + "']";
		Wait.WaitForElement(driver, path);
		Utility.ScrollToElement(driver.findElement(By.xpath(path)), driver);
		driver.findElement(By.xpath(path)).click();
		test_steps.add("Open Task " + taskName);
		reslogger.info("Open Task " + taskName);

		Wait.wait5Second();
		try {
			String taskCategoryArrow = "(//label[text()='Category']/..//button)[2]";
			Wait.WaitForElement(driver, taskCategoryArrow);
			driver.findElement(By.xpath(taskCategoryArrow)).click();
		} catch (Exception e) {
			String taskCategoryArrow = "//label[text()='Category']/..//button";
			Wait.WaitForElement(driver, taskCategoryArrow);
			driver.findElement(By.xpath(taskCategoryArrow)).click();
		}

		String taskCategory = "//label[text()='Category']/..//div/ul//span[text()='" + taskCategoryName.trim() + "']";
		Wait.WaitForElement(driver, taskCategory);
		driver.findElement(By.xpath(taskCategory)).click();
		test_steps.add("Select Task Category : " + taskCategoryName);
		reslogger.info("Select Task Category : " + taskCategoryName);

		String taskType = "";
		try {
			taskType = "(//label[text()='Type']/..//button)[1]";
			Wait.WaitForElement(driver, taskType);
			driver.findElement(By.xpath(taskType)).click();

		} catch (Exception e) {
			taskType = "(//label[text()='Type']/..//button)[2]";
			Wait.WaitForElement(driver, taskType);
			driver.findElement(By.xpath(taskType)).click();

		}

		taskType = "(//label[text()='Type']//..//ul//span[text()='" + taskTypeName.trim() + "'])[1]";
		Wait.WaitForElement(driver, taskType);
		driver.findElement(By.xpath(taskType)).click();
		test_steps.add("Select Task Type : " + taskTypeName);
		reslogger.info("Select Task Type : " + taskTypeName);

		if (Utility.validateString(taskDetailsName)) {
			try {
				String taskDetails = "//label[text()='Details']/preceding-sibling::textarea";
				Wait.WaitForElement(driver, taskDetails);
				driver.findElement(By.xpath(taskDetails)).clear();
				driver.findElement(By.xpath(taskDetails)).sendKeys(taskDetailsName);

			} catch (Exception e) {
				String taskDetails = "(//label[text()='Details']/preceding-sibling::textarea)[2]";
				Wait.WaitForElement(driver, taskDetails);
				driver.findElement(By.xpath(taskDetails)).clear();
				driver.findElement(By.xpath(taskDetails)).sendKeys(taskDetailsName);

			}
			test_steps.add("Select Task Details : " + taskDetailsName);
			reslogger.info("Select Task Details : " + taskDetailsName);
		}

		if (Utility.validateString(taskRemarksName)) {
			try {
				String taskRemarks = "//label[text()='Remarks']/preceding-sibling::textarea";
				Wait.WaitForElement(driver, taskRemarks);
				driver.findElement(By.xpath(taskRemarks)).clear();
				driver.findElement(By.xpath(taskRemarks)).sendKeys(taskRemarksName);
			} catch (Exception e) {
				String taskRemarks = "(//label[text()='Remarks']/preceding-sibling::textarea)[2]";
				Wait.WaitForElement(driver, taskRemarks);
				driver.findElement(By.xpath(taskRemarks)).clear();
				driver.findElement(By.xpath(taskRemarks)).sendKeys(taskRemarksName);
			}
			test_steps.add("Enter Task Remarks : " + taskRemarksName);
			reslogger.info("Enter Task Remarks : " + taskRemarksName);
		}
		if (Utility.validateString(dueOnDate)) {
			try {
				String dueCalender = "//label[text()='Due On']/..//i";
				Wait.WaitForElement(driver, dueCalender);
				driver.findElement(By.xpath(dueCalender)).click();
			} catch (Exception e) {
				String dueCalender = "(//label[text()='Due On']/..//i)[2]";
				Wait.WaitForElement(driver, dueCalender);
				driver.findElement(By.xpath(dueCalender)).click();
			}
			Utility.selectStartDate(driver, test_steps, dueOnDate);
		}

		if (Utility.validateString(taskAssigneeName)) {
			try {
				String taskAssignee = "//label[text()='Assignee']/..//input";
				Wait.WaitForElement(driver, taskAssignee);
				driver.findElement(By.xpath(taskAssignee)).sendKeys(taskAssigneeName);
			} catch (Exception e) {
				String taskAssignee = "(//label[text()='Assignee']/..//input)[2]";
				Wait.WaitForElement(driver, taskAssignee);
				driver.findElement(By.xpath(taskAssignee)).sendKeys(taskAssigneeName);
			}
			Wait.wait2Second();
			String taskassgin = "//label[text()='Assignee']/..//div/ul/li/div";
			Wait.WaitForElement(driver, taskassgin);
			driver.findElement(By.xpath(taskassgin)).click();
			test_steps.add("Enter Task Assignee : " + taskAssigneeName);
			reslogger.info("Enter Task Assignee : " + taskAssigneeName);
		}

		if (Utility.validateString(taskStatusName)) {
			String taskStatus = "(//label[text()='Status']/..//button)[2]";
			Wait.WaitForElement(driver, taskStatus);
			driver.findElement(By.xpath(taskStatus)).click();
			String status = "(//label[text()='Status']/..//button)[2]/following-sibling::div//li//span[text()='"
					+ taskStatusName.trim() + "']";
			Wait.WaitForElement(driver, status);
			driver.findElement(By.xpath(status)).click();
			test_steps.add("Select Task Status : " + taskStatusName);
			reslogger.info("Select Task Status : " + taskStatusName);
		}

		String save = "//h4[text()='Edit Task']/../..//button[text()='Save']";
		Wait.WaitForElement(driver, save);
		driver.findElement(By.xpath(save)).click();
		test_steps.add("Click on Save");
		reslogger.info("Click on Save");
		verifySpinerLoading(driver);
	}

	public ArrayList<String> selectPaymentMethod(WebDriver driver, String AccountName) throws InterruptedException {
		ArrayList<String> testSteps = new ArrayList<String>();
		String paymentType = "//div[contains(@class,'payment-method')]/button/..//a/span[contains(text(),'"
				+ AccountName + "')]";
		Wait.waitForElementToBeVisibile(By.xpath(paymentType), driver);
		Utility.ScrollToElement(driver.findElement(By.xpath(paymentType)), driver);
		Wait.wait3Second();
		driver.findElement(By.xpath(paymentType)).click();
		testSteps.add("Select Payment Method " + AccountName);
		return testSteps;

	}

	public boolean reservationTaskshouldNotAppeared(WebDriver driver, String taskName) throws InterruptedException {
		Elements_Reservation reservationPage = new Elements_Reservation(driver);
		String path = null;
		path = "//task-info//span[contains(text(),'" + taskName + "')]";
		boolean isExist = Utility.isElementPresent(driver, By.xpath(path));
		if (isExist) {
			test_steps.add("Task Exist");
			reslogger.info("Task  Exist");
		} else {
			test_steps.add("Task Doesn't Exist");
			reslogger.info("Task Doesn't Exist");
		}
		return isExist;
	}

	public String createBasicMRBReservation(WebDriver driver, boolean isClickReservationMenu, String checkInDate,
			String checkOutDate, String adults, String children, String ratePlan, String roomClass, String salutation,
			String guestFirstName, String guestLastName, String isGuesProfile, ArrayList<String> roomNumber,
			String paymentType, String cardNumber, String nameOnCard, String referral, boolean closeReservation,
			ArrayList<String> test_steps) throws Exception {

		test_steps.add("============== Creating an MRB reservation ==============");
		Navigation navigation = new Navigation();
		String reservationNo = null;
		try {
			if (isClickReservationMenu) {
				navigation.cpReservation_Backward(driver);
			}
		} catch (Exception e) {
			if (isClickReservationMenu) {
				navigation.reservation_Backward_2(driver);
			}
		}
		click_NewReservation(driver, test_steps);
		select_Dates(driver, test_steps, checkInDate, checkOutDate, adults, children, ratePlan, "", "");
		clickOnFindRooms(driver, test_steps);
		verifySpinerLoading(driver);
		ArrayList<String> rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[0]);
		selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[0], rooms.get(0));
		verifySpinerLoading(driver);
		rooms = getAllRoomNumbersFromRoomClassDropDown(driver, test_steps, roomClass.split("\\|")[1]);
		selectRoomToReserve(driver, test_steps, roomClass.split("\\|")[1], rooms.get(1));
		verifySpinerLoading(driver);
		clickNext(driver, test_steps);
		enter_MRB_MailingAddressForMRB(driver, test_steps, salutation, guestFirstName, guestLastName, "", "", "", "",
				"", "", "", "", "", "", "", "", isGuesProfile, "", "", roomNumber);
		String yearDate = Utility.getFutureMonthAndYearForMasterCard();
		Utility.expiryDate = yearDate;
		enter_PaymentDetails(driver, test_steps, paymentType, cardNumber, nameOnCard, yearDate);
		enter_MarketSegmentDetails(driver, test_steps, "", "", referral);
		clickBookNow(driver, test_steps);
		reservationNo = get_ReservationConfirmationNumber(driver, test_steps);
		clickCloseReservationSavePopup(driver, test_steps);
		if (closeReservation) {
			closeReservationTab(driver);
		}
		return reservationNo;
	}

	public String getCheckInDates(WebDriver driver, int i) {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.waitForElementByXpath(driver, OR_Reservation.EnterCheckinDate);
		List<WebElement> getCheckIn = driver.findElements(By.xpath(OR_Reservation.EnterCheckinDate));
		String getText = Utility.getELementText(getCheckIn.get(i), true, "value");
		System.out.println("getText : " + getText);
		return getText.trim();
	}

	public String getCheckOutDates(WebDriver driver, int i) {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.waitForElementByXpath(driver, OR_Reservation.EnterCheckout);
		List<WebElement> getCheckIn = driver.findElements(By.xpath(OR_Reservation.EnterCheckout));
		String getText = Utility.getELementText(getCheckIn.get(i), true, "value");
		System.out.println("getText : " + getText);
		return getText.trim();
	}

	public boolean isSplitResErrorDiplayed(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementByXpath(driver, OR_Reservation.splitResError);
		return Utility.isElementDisplayed_1(driver, By.xpath(OR_Reservation.splitResError));

	}

	public ArrayList<String> clickSaveAfterEditStayInfo2(WebDriver driver) throws InterruptedException {
		verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		WebElement ele = driver.findElement(By.xpath("//button[contains(@data-bind, 'roomSearch.enableSave')]"));
		Utility.ScrollToElement(ele, driver);
		ele.click();
		testSteps.add("click save");
		reslogger.info("click save");
		verifySpinerLoading(driver);
		return testSteps;
	}

	public ArrayList<String> verifyGustInfoField(WebDriver driver) {
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);

		return testSteps;
	}

	public void clickOnEditButtonGuestInfo(WebDriver driver) throws InterruptedException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EditGuestInfoIcon);
		Utility.ScrollToElement(element.EditGuestInfoIcon, driver);
		element.EditGuestInfoIcon.click();

	}

	public void clickOnReservationStatusDropDownIcon(WebDriver driver) throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
	}

	public void changeReservationStatus(WebDriver driver, String reservationStatus) {
		String path = "//span[text()='Rollback']";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		driver.findElement(By.xpath(path)).click();

	}

	public ArrayList<String> roolBackReservationPopup(WebDriver driver) throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		ArrayList<String> testStep = new ArrayList<String>();
		Wait.WaitForElement(driver, OR_Reservation.RollbackReservationPopupMessage);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.RollbackReservationPopupMessage), driver);
		String getMessge = elementReservation.RollbackReservationPopupMessage.getText();
		if (getMessge.equals("Are you sure you want to re-open this reservation?")) {
			testStep.add("Verified roll  back message on popup");
		} else {
			testStep.add("Failed: Roll  back message on popup is mismatching");

		}
		elementReservation.RollbackReservationPopupYesButton.click();
		testStep.add("Click on Yes button");
		return testStep;
	}

	// div[contains(@class,'rollback-rules')]//p
	public ArrayList<String> guaranteedReservation(WebDriver driver) throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Wait.wait3Second();
		ArrayList<String> testSteps = new ArrayList<String>();
		Utility.clickThroughAction(driver, driver.findElement(By.xpath(OR_Reservation.ReservationStatusDropDown)));
		Wait.wait1Second();
		elementReservation.ReservationStatusGuaranteed.click();
		testSteps.add("Click on Reservation Status Guranteed");
		Wait.wait10Second();
//		String button="(//button[@title='--Select--'])[last()]//span[2]";
//		Wait.WaitForElement(driver, button);
//		driver.findElement(By.xpath(button)).click();
//		Wait.wait2Second();
//		
//		driver.findElement(By.xpath("//span[contains(text(),'- Account')]")).click();
//		String paymentMethod="(//select[@class='selectpicker form-control ir-frm-ctrl bs-select-hidden payment-method'])[2]";
//		WebElement element=driver.findElement(By.xpath(paymentMethod));
//		Select select=new Select(element);
//		select.selectByValue("156614@-1");
		try {
			elementReservation.Log.click();
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelledClose), driver);
			elementReservation.CancelledClose.click();
			testSteps.add("Click on Cancelled Close");
		} catch (Exception e) {

		}
		Wait.wait5Second();
		String s2 = elementReservation.ReservationCurrentStatusForAll.getText();
		if (s2.equalsIgnoreCase("Guaranteed")) {
			System.out.println("Successfully changed Reservation status to Guaranteed");
			testSteps.add("Successfully changed Reservation status to Guaranteed");
		} else {
			System.out.println("Unable to change Reservation status to Guaranteed");
			testSteps.add("Unable to change Reservation status to Guaranteed");
		}
		return testSteps;
	}

	public ArrayList<String> clickonPaymentMetod(WebDriver driver) throws InterruptedException {
		ArrayList<String> testSteps = new ArrayList<String>();
		String selectPaymentDropDown = "(//div[contains(@class,'payment-method')]/button)";
		// div[contains(@class,'payment-method
		// dropup')]/button";
		Wait.waitForElementToBeVisibile(By.xpath(selectPaymentDropDown), driver);
		// Wait.wait3Second();
		driver.findElement(By.xpath(selectPaymentDropDown)).click();
		testSteps.add("click on Payment method successfully");
		reslogger.info("click on Payment method successfully");

		return testSteps;

	}

	public void updatetaskStatus(WebDriver driver, String taskName, String updatedStatus, ArrayList<String> test_steps)
			throws InterruptedException {

		String path = "//span[text()='Tasks ']/../..//td//span[text()='" + taskName + "']";
		Wait.WaitForElement(driver, path);
		Utility.ScrollToElement(driver.findElement(By.xpath(path)), driver);
		driver.findElement(By.xpath(path)).click();
		test_steps.add("Open Task " + taskName);
		reslogger.info("Open Task " + taskName);
		Wait.wait10Second();
		String taskStatus = "(//label[text()='Status']/..//button)[2]";
		Wait.WaitForElement(driver, taskStatus);
		driver.findElement(By.xpath(taskStatus)).click();
		String status = "(//label[text()='Status']/..//button)[2]/following-sibling::div//li//span[text()='"
				+ updatedStatus.trim() + "']";
		Wait.WaitForElement(driver, status);
		driver.findElement(By.xpath(status)).click();
		test_steps.add("Select Task Status : " + updatedStatus);
		reslogger.info("Select Task Status : " + updatedStatus);
		String save = "//h4[text()='Edit Task']/../..//button[text()='Save']";
		Wait.WaitForElement(driver, save);
		driver.findElement(By.xpath(save)).click();
		test_steps.add("Click on Save");
		reslogger.info("Click on Save");
		verifySpinerLoading(driver);
	}

	public void checkoutRoom(WebDriver driver, String roomClassName, ArrayList<String> test_steps)
			throws InterruptedException {
		String path = "//div//span[contains(text(),'" + roomClassName + "')]/..//parent::div//parent::div"
				+ "/following-sibling::div//button[contains(text(),'Check Out')]";
		Wait.WaitForElement(driver, path);
		Utility.ScrollToElement(driver.findElement(By.xpath(path)), driver);
		driver.findElement(By.xpath(path)).click();
		test_steps.add("Checkout Room" + roomClassName);
		reslogger.info("Checkout Room" + roomClassName);
	}

	public void verifyBookNow(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Book);
		Wait.explicit_wait_elementToBeClickable(res.CP_NewReservation_Book, driver);
		Utility.ScrollToElement(res.CP_NewReservation_Book, driver);
		Utility.customAssert(res.CP_NewReservation_Book.isEnabled() + "", "true", true,
				"Successfully Verified Book Now Button", "Failed To Verify Book Now Button", true, testSteps);
		reslogger.info("Successfully Verified Book Now Button");
	}

	public void verifySaveButton(WebDriver driver, ArrayList<String> testSteps) {
		// Click Save Button
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean isButtonEnabled = false;
		try {

			Wait.explicit_wait_visibilityof_webelement(res.CP_SaveRoomNo, driver);
			Utility.ScrollToElement(res.CP_SaveRoomNo, driver);
			isButtonEnabled = res.CP_SaveRoomNo.isEnabled();
			reslogger.info("isButtonEnabled: " + isButtonEnabled);
			Utility.customAssert(isButtonEnabled + "", "true", true, "Successfully Verified Save Now Button",
					"Failed To Verify Save Now Button", true, testSteps);
			reslogger.info("Verifing Save Button");
		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			reslogger.info("Failed to Verify Save Button");
		}

	}

	public void clickEditPaymentInfo(WebDriver driver, ArrayList<String> testSteps)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		ArrayList<String> testStep = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.editPaymentInfoButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.editPaymentInfoButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.editPaymentInfoButton), driver);
		Utility.ScrollToElement_NoWait(element.editPaymentInfoButton, driver);
		element.editPaymentInfoButton.click();
		testStep.add("Click on edit payment info");
		reslogger.info("Click on edit payment info");
	}

	public void verifyPaymentInfoSaveButton(WebDriver driver, ArrayList<String> testSteps, boolean isEnabled) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean isButtonEnabled = false;
		try {
			Wait.explicit_wait_visibilityof_webelement(res.paymentInfoSaveButton, driver);
			Utility.ScrollToElement(res.paymentInfoSaveButton, driver);
			isButtonEnabled = res.paymentInfoSaveButton.isEnabled();
			reslogger.info("isButtonEnabled: " + isButtonEnabled);
			Utility.customAssert(isButtonEnabled + "", isEnabled + "", true,
					"Successfully Verified payment info Save Now Button",
					"Failed To Verify payment info Save Now Button", true, testSteps);
			reslogger.info("Verifing payment info Save Button");
		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			reslogger.info("Failed to Verify payment info Save Button");
		}
	}

	public void clickPaymentInfoSaveButton(WebDriver driver, ArrayList<String> testSteps) {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.paymentInfoSaveButton);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.paymentInfoSaveButton), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.paymentInfoSaveButton), driver);
		element.paymentInfoSaveButton.click();
		testSteps.add("Click on payment info save button");
		reslogger.info("Click on payment info save button");
	}

	public void verifySaveMarketingInfoButton(WebDriver driver, ArrayList<String> testSteps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		boolean isButtonEnabled = false;
		try {
			Wait.explicit_wait_visibilityof_webelement(res.SaveMarketingInfo, driver);
			Utility.ScrollToElement(res.SaveMarketingInfo, driver);
			isButtonEnabled = res.SaveMarketingInfo.isEnabled();
			reslogger.info("isButtonEnabled: " + isButtonEnabled);
			Utility.customAssert(isButtonEnabled + "", "true", true,
					"Successfully Verified Marketing info Save Now Button",
					"Failed To Verify Marketing info Save Now Button", true, testSteps);
			reslogger.info("Verifing Marketing info Save Button");
		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			reslogger.info("Failed to Verify Marketing info Save Button");
		}

	}

	public void verifyRoomClassSearchDetails(WebDriver driver, ArrayList<String> test_steps) {
		String mainPath = "(//section[@class='ir-roomClassDetails manual-override']//div[contains(@data-bind,'rateDetails')]/div[contains(@data-bind,'expandRoomClassRateInfo')])";

		String roomClassNamePath = "//span[contains(@data-bind,'roomClass.name')]";
		String availableRoomPath = "//span[contains(@data-bind,'roomClass.roomAvailabilityCount')]";
		String totalRatePath = "//span[contains(@data-bind,'total')]";
		String roomSelectPath = "//../../../following-sibling::div/div/div/button";
		String selectButtonPath = "//../../../following-sibling::div//span[contains(text(),'SELECT')]";

		for (int i = 1; i <= driver.findElements(By.xpath(mainPath)).size(); i++) {

			String indexPath = "[" + i + "]";

			Utility.customAssert(
					driver.findElement(By.xpath(mainPath + indexPath + roomClassNamePath)).isDisplayed() + "", "true",
					true, "Successfully Verified Room Class Name Visible", "Failed to Verified Room Class Name Visible",
					true, test_steps);
			Utility.customAssert(
					driver.findElement(By.xpath(mainPath + indexPath + availableRoomPath)).isDisplayed() + "", "true",
					true, "Successfully Verified Available Rooms Visible", "Failed to Verified Available Rooms Visible",
					true, test_steps);
			Utility.customAssert(driver.findElement(By.xpath(mainPath + indexPath + totalRatePath)).isDisplayed() + "",
					"true", true, "Successfully Verified Total Room Rate Visible",
					"Failed to Verified Total Room Rate Visible", true, test_steps);
			Utility.customAssert(driver.findElement(By.xpath(mainPath + indexPath + roomSelectPath)).isDisplayed() + "",
					"true", true, "Successfully Verified Room Select Visible", "Failed to Verified Room Select Visible",
					true, test_steps);
			Utility.customAssert(
					driver.findElement(By.xpath(mainPath + indexPath + selectButtonPath)).isDisplayed() + "", "true",
					true, "Successfully Verified Select Button Visible", "Failed to Verified Select Button Visible",
					true, test_steps);
		}
	}

	public void verifyAllActiveSources(WebDriver driver, ArrayList<String> activeSourceList)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_SOURCE);
		Wait.wait3Second();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_SOURCE), driver);

		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_SOURCE), driver);
		Utility.ScrollToElement(res.CP_NewReservation_SOURCE, driver);

		Utility.customAssert(res.CP_NewReservation_SOURCE.isDisplayed() + "", "true", true,
				"Successfully Verified Source Select Menu Visible", "Failed to Verified Source Select Menu Visible",
				true, test_steps);

		res.CP_NewReservation_SOURCE.click();

		// Wait.wait1Second();
		String sourcesPath = OR_Reservation.CP_NewReservation_SOURCE + "//following-sibling::div//ul/li/a/span[1]";
		reslogger.info(sourcesPath);
		int index = 0;
		for (WebElement ele : driver.findElements(By.xpath(sourcesPath))) {
			Utility.customAssert(ele.isDisplayed() + "", "true", true,
					"Successfully Verified Source " + ele.getText() + " Visible",
					"Failed to Verified Source " + ele.getText() + " Visible", true, test_steps);
			Utility.customAssert(ele.getText().toUpperCase(), activeSourceList.get(index++).toUpperCase(), true,
					"Successfully Verified Source " + ele.getText() + " Matched With Distribution Source",
					"Failed to Verified Source " + ele.getText() + " Matched With Distribution Source", true,
					test_steps);
		}
		res.CP_NewReservation_SOURCE.click();
	}

	public void selectSource(WebDriver driver, String source, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_SOURCE);
		Wait.wait3Second();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_SOURCE), driver);

		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_SOURCE), driver);
		Utility.ScrollToElement(res.CP_NewReservation_SOURCE, driver);

		res.CP_NewReservation_SOURCE.click();

		String sourcesPath = OR_Reservation.CP_NewReservation_SOURCE
				+ "//following-sibling::div//ul/li/a/span[(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ')='"
				+ source.toUpperCase() + "')]";
		reslogger.info(sourcesPath);

		Wait.waitForElementToBeClickable(By.xpath(sourcesPath), 10, driver);
		Utility.ScrollToElement(driver.findElement(By.xpath(sourcesPath)), driver);

		driver.findElement(By.xpath(sourcesPath)).click();
		test_steps.add("Selected Source as : " + source);
		reslogger.info("Selected Source as : " + source);
	}

	public void selectReservationStatus(WebDriver driver, String status, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Status);
		Wait.wait3Second();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_Status), driver);

		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_Status), driver);
		Utility.ScrollToElement(res.CP_NewReservation_Status, driver);

		Utility.customAssert(res.CP_NewReservation_Status.isDisplayed() + "", "true", true,
				"Successfully Verified Select Status Visible", "Failed to Verified Select Status Visible", true,
				test_steps);

		res.CP_NewReservation_Status.click();

		String sourcesPath = OR_Reservation.CP_NewReservation_Status
				+ "//following-sibling::ul/li[contains(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'"
				+ status.toUpperCase() + "')]";
		reslogger.info(sourcesPath);

		Wait.waitForElementToBeClickable(By.xpath(sourcesPath), 10, driver);
		Utility.ScrollToElement(driver.findElement(By.xpath(sourcesPath)), driver);

		driver.findElement(By.xpath(sourcesPath)).click();
		test_steps.add("Selected Status as : " + status);
		reslogger.info("Selected Status as : " + status);
	}

	public void verifyGuestInfoRedBoarderOnRequiredFeildError(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
//
//		clickCheckOutButton(driver, test_steps);
//		test_steps.add("Click on checkout button");
//		verifyCheckOutPopup(driver, test_steps);
//		generatGuestReportToggle(driver, test_steps, "No");
//		test_steps.add("Disable guest report toggle");
//		checkedVoidRoomChargeCheckBox(driver, test_steps);
//		verifySpinerLoading(driver);

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
		res.CP_NewReservation_GuestFirstName.clear();
		Utility.clearValue(driver, res.CP_NewReservation_GuestFirstName);
		res.CP_NewReservation_GuestFirstName.sendKeys(Keys.TAB);

		String boarderPath = "//guest-info/div[contains(@class,'ir-missing-required-info-outline')]";

		try {
			int size = driver.findElements(By.xpath(boarderPath)).size();

			if (size > 0) {
				Utility.customAssert(driver.findElement(By.xpath(boarderPath)).isDisplayed() + "", "true", true,
						"Successfully Verified Guest info Missing Required Info Red Boarder is Visible",
						"Failed to Verified Guest info Missing Required Info Red Boarder is not Visible", true,
						test_steps);
			}

		} catch (Exception e) {
			// TODO: handle exception
		}

		Utility.clickThroughJavaScript(driver,
				driver.findElement(By.xpath("//a[contains(@data-bind, 'click:CollapseGuestInfoEdit')]")));
	}

	public void AddTask(WebDriver driver, ArrayList test_steps, String IsTask, String TaskCategory, String TaskType,
			String TaskDetails, String TaskRemarks, String TaskDueon, String TaskAssignee, String TaskStatus)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddTask);
		test_steps.add("******************* Adding Task **********************");
		reslogger.info("******************* Adding Task **********************");
		if (IsTask.equalsIgnoreCase("Yes")) {
			Utility.ScrollToElement(res.CP_AddTask, driver);
			res.CP_AddTask.click();
			test_steps.add("Click on Add Task");
			reslogger.info("Click on Add Task");

			String taskCategoryArrow = "//label[text()='Category']/..//button";
			Wait.WaitForElement(driver, taskCategoryArrow);
			driver.findElement(By.xpath(taskCategoryArrow)).click();

			String taskCategory = "//label[text()='Category']/..//div/ul//span[text()='" + TaskCategory.trim() + "']";
			Wait.WaitForElement(driver, taskCategory);
			driver.findElement(By.xpath(taskCategory)).click();
			test_steps.add("Select Task Category : " + TaskCategory);
			reslogger.info("Select Task Category : " + TaskCategory);
			Wait.wait2Second();

			String taskType = "//label[text()='Type']//..//div//button";
			reslogger.info(taskType);
			Wait.WaitForElement(driver, taskType);
			driver.findElement(By.xpath(taskType)).click();
			Wait.wait2Second();
			taskType = "//label[text()='Type']//..//div/ul//span[text()='" + TaskType.trim() + "']";
			Wait.WaitForElement(driver, taskType);
			driver.findElement(By.xpath(taskType)).click();
			test_steps.add("Select Task Type : " + TaskType);
			reslogger.info("Select Task Type : " + TaskType);

			String taskDetails = "//label[text()='Details']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, taskDetails);
			driver.findElement(By.xpath(taskDetails)).sendKeys(TaskDetails);
			test_steps.add("Select Task Details : " + TaskDetails);
			reslogger.info("Select Task Details : " + TaskDetails);

			String taskRemarks = "//label[text()='Remarks']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, taskRemarks);
			driver.findElement(By.xpath(taskRemarks)).sendKeys(TaskRemarks);
			test_steps.add("Enter Task Remarks : " + TaskRemarks);
			reslogger.info("Enter Task Remarks : " + TaskRemarks);

			if (!TaskAssignee.isEmpty()) {
				String taskAssignee = "//label[text()='Assignee']/..//input";
				WebElement elementAssigneeInput = driver.findElement(By.xpath(taskAssignee));

				// elementAssigneeInput.sendKeys(TaskAssignee);
				TaskAssignee = "auto";
				String[] splitString = TaskAssignee.split(" ");
				TaskAssignee = splitString[0];
				String noDataFound = "//label[text()='Assignee']//..//div//div";
				for (int i = 0; i < 5; i++) {
					elementAssigneeInput.click();
					elementAssigneeInput.clear();
					for (int j = 0; j < TaskAssignee.length(); j++) {
						elementAssigneeInput.sendKeys(String.valueOf(TaskAssignee.charAt(j)));
						Wait.wait1Second();
					}
					try {
						reslogger.info("in try");
						Wait.wait1Second();
						String taskassgin = "(//label[text()='Assignee']/..//div//ul//li//div/span)[2]";
						// Wait.WaitForElement(driver, taskassgin);
						WebElement elementTaskAssign = driver.findElement(By.xpath(taskassgin));
						elementTaskAssign.click();
						break;
					} catch (Exception e) {
						reslogger.info("in catch");
					}

				}
			}

			String taskStatus = "(//label[text()='Status']/..//button)[2]";
			Wait.WaitForElement(driver, taskStatus);
			driver.findElement(By.xpath(taskStatus)).click();
			String status = "(//label[text()='Status']/..//button)[2]/following-sibling::div//li//span[text()='"
					+ TaskStatus.trim() + "']";
			Wait.WaitForElement(driver, status);
			driver.findElement(By.xpath(status)).click();
			test_steps.add("Select Task Status : " + TaskStatus);
			reslogger.info("Select Task Status : " + TaskStatus);

			String save = "//h4[text()='Add Task']/../..//button[text()='Save']";
			Wait.WaitForElement(driver, save);
			driver.findElement(By.xpath(save)).click();
			test_steps.add("Click on Save");
			reslogger.info("Click on Save");
		}
	}

	public String editTask(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {
		String task = "//tbody[contains(@data-bind,'tasks')]/tr";
		Wait.WaitForElement(driver, task);
		driver.findElement(By.xpath(task)).click();
		test_steps.add("Clicking on task to edit");
		reslogger.info("Clicking on task to edit");
		Wait.wait10Second();
		String expandTask = "//h4[text()='Edit Task']/../..//select[contains(@data-bind,'selectedCategory')]/..//button/..";

		driver.findElement(By.xpath(expandTask)).click();
		test_steps.add("Open task category drop down");
		reslogger.info("Open task category drop down");

		String taskty = null;

		Wait.wait5Second();
		String taskCategory = "//h4[text()='Edit Task']/../..//select[contains(@data-bind,'selectedCategory')]/..//ul/li";
		Wait.WaitForElement(driver, taskCategory);
		int count = driver.findElements(By.xpath(taskCategory)).size();
		if (count > 2) {
			taskCategory = "//h4[text()='Edit Task']/../..//select[contains(@data-bind,'selectedCategory')]/..//ul/li[3]";

			String taskcat = driver.findElement(By.xpath(taskCategory)).getText();
			driver.findElement(By.xpath(taskCategory)).click();
			test_steps.add("selected task category : " + taskcat);
			reslogger.info("selected task category : " + taskcat);

			Wait.wait5Second();
			String taskType = "//h4[text()='Edit Task']/../..//select[contains(@data-bind,'selectedType')]/..//button/..";
			driver.findElement(By.xpath(taskType)).click();
			test_steps.add("Open task type drop down");
			reslogger.info("Open task type drop down");

			taskType = " //h4[text()='Edit Task']/../..//select[contains(@data-bind,'selectedType')]/..//ul/li[2]";
			taskty = driver.findElement(By.xpath(taskType)).getText();
			driver.findElement(By.xpath(taskType)).click();
			test_steps.add("selected task type : " + taskty);
			reslogger.info("selected task type : " + taskty);

			String details = "//h4[text()='Edit Task']/../..//label[text()='Details']/preceding-sibling::textarea";

			driver.findElement(By.xpath(details)).clear();
			driver.findElement(By.xpath(details)).sendKeys("Sample task deatils");

			test_steps.add("Entered task details as : Sample task deatils");
			reslogger.info("Entered task details as : Sample task deatils");

			String save = "//h4[text()='Edit Task']/../..//button[text()='Save']";
			driver.findElement(By.xpath(save)).click();
			test_steps.add("clicking on save");
			reslogger.info("clicking on save");

			String taskVerify = "//span[text()='Tasks ']/../..//div//tbody/tr//span[contains(text(),'" + taskty.trim()
					+ "')]";
			try {
				Wait.WaitForElement(driver, taskVerify);
				test_steps.add("suscessfully verified task type in reservation");
				reslogger.info("suscessfully verified task type in reservation");

				String taskDetails = "//span[text()='Tasks ']/../..//div//tbody/tr//td[contains(text(),'Sample task deatils')]";
				Wait.WaitForElement(driver, taskVerify);
				test_steps.add("suscessfully verified task details in reservation");
				reslogger.info("suscessfully verified task details in reservation");
			} catch (Exception e) {
				test_steps.add("Failed to verify task details in reservation");
				reslogger.info("Failed to verify task details in reservation");
			}

		}
		return taskty;

	}

	public void deleteTask(WebDriver driver, ArrayList<String> testSteps, String taskType) throws InterruptedException {
		String deleteTask = "//span[text()='Tasks ']/../..//div//tbody/tr//span[contains(text(),'" + taskType
				+ "')]/../..//following-sibling::td[4]//button";
		Wait.WaitForElement(driver, deleteTask);

		driver.findElement(By.xpath(deleteTask)).click();
		test_steps.add("clicking on delete task : " + taskType);
		reslogger.info("clicking on delete task : " + taskType);

		Wait.wait5Second();
		String yes = "//div[text()='Are you sure you want to delete this task?']/..//button[text()='Yes']";
		Wait.WaitForElement(driver, deleteTask);

		driver.findElement(By.xpath(yes)).click();
		test_steps.add("Are you sure you want to delete this task? : Yes");
		reslogger.info("Are you sure you want to delete this task? : Yes");

		Wait.wait5Second();
		deleteTask = "//span[text()='Tasks ']/../..//div//tbody/tr//span[contains(text(),'" + taskType + "')]";
		if (driver.findElements(By.xpath(deleteTask)).size() <= 0) {
			test_steps.add("Veriffied task deleted successfully : " + taskType);
			reslogger.info("Veriffied task deleted successfully : " + taskType);
		} else {
			test_steps.add("Failed to delete the task : " + taskType);
			reslogger.info("Failed to delete the task : " + taskType);
		}

	}

	public boolean verifyDeleteTaskIsDisabled(WebDriver driver, ArrayList<String> testSteps, String taskType)
			throws InterruptedException {
		String deleteTask = "//span[text()='Tasks ']/../..//div//tbody/tr//span[contains(text(),'" + taskType
				+ "')]/../..//following-sibling::td[4]//button";
		Wait.WaitForElement(driver, deleteTask);
		if (!driver.findElement(By.xpath(deleteTask)).isEnabled()) {
			test_steps.add("Verified delete task button is disabled");
			reslogger.info("Verified delete task button is disabled");
			return true;
		} else {
			test_steps.add("Failed to verify delete task button is disabled");
			reslogger.info("Failed to verify delete task button is disabled");
			return false;
		}
	}

	public ArrayList<String> select_RateplanWithManualOverRide(WebDriver driver, ArrayList<String> test_steps,
			String Rateplan, String RateAmount, String PromoCode) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Rateplan);
		res.CP_NewReservation_Rateplan.click();
		String rate = "//label[contains(text(),'Rate Plan / Promo')]//..//preceding-sibling::div//span[contains(text(),'"
				+ Rateplan + "')]/..";
		reslogger.info(rate);
		Wait.WaitForElement(driver, rate);
		driver.findElement(By.xpath(rate)).click();
		test_steps.add("Selecting the rateplan : " + Rateplan);
		reslogger.info("Selecting the rateplan : " + Rateplan);

		String rateAmount = "//label[text()='Rate Amount']/preceding-sibling::input";
		Wait.WaitForElement(driver, rateAmount);
		driver.findElement(By.xpath(rateAmount)).clear();
		Wait.wait2Second();
		driver.findElement(By.xpath(rateAmount)).sendKeys(RateAmount);
		test_steps.add("Enter rate amount : " + RateAmount);
		reslogger.info("Enter rate amount : " + RateAmount);

		if (Rateplan.contains("Promo")) {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PromoCode);
			res.CP_NewReservation_PromoCode.clear();
			res.CP_NewReservation_PromoCode.sendKeys(PromoCode);
			test_steps.add("Enter promocode : " + PromoCode);
			reslogger.info("Enter promocode : " + PromoCode);
		}
		return test_steps;
	}

	public boolean verifyManualOverrideAmountInReservationFolio(WebDriver driver, ArrayList<String> test_steps,
			String RateAmount) {
		String roomCharge = get_RoomCharge(driver, test_steps);

		if (RateAmount.trim().equalsIgnoreCase(roomCharge.trim())) {
			test_steps.add("Manual override amount is verified in folio room charge" + roomCharge);
			reslogger.info("Manual override amount is verified in folio room charge" + roomCharge);
			return true;
		} else {
			test_steps.add("Failed to verify manual override amount in folio, expected " + RateAmount + " but found "
					+ roomCharge);
			reslogger.info("Failed to verify manual override amount in folio, expected " + RateAmount + " but found "
					+ roomCharge);
			return false;
		}
	}

	public boolean verifyManualOverrideRateplanInReservation(WebDriver driver, ArrayList<String> test_steps,
			String RatePlan) {
		String rateplan = get_RatePlan(driver, test_steps);

		if (RatePlan.trim().equalsIgnoreCase(rateplan.trim())) {
			test_steps.add("Manual override amount is verified in folio room charge" + RatePlan);
			reslogger.info("Manual override amount is verified in folio room charge" + RatePlan);
			return true;
		} else {
			test_steps.add("Failed to verify manual override amount in folio, expected " + RatePlan + " but found "
					+ rateplan);
			reslogger.info("Failed to verify manual override amount in folio, expected " + RatePlan + " but found "
					+ rateplan);
			return false;
		}
	}

	public void createNewFolio(WebDriver driver, ArrayList<String> test_steps, String FolioName,
			String FolioDescription) throws InterruptedException {
		String newFolio = "//i[contains(@data-bind,'NewFolio')]";
		Wait.WaitForElement(driver, newFolio);
		driver.findElement(By.xpath(newFolio)).click();
		test_steps.add("Click on create new folio");
		reslogger.info("Click on create new folio");

		String folioName = "//h4[text()='Folio details']/../..//input";
		Wait.WaitForElement(driver, folioName);
		driver.findElement(By.xpath(folioName)).sendKeys(FolioName);
		test_steps.add("Enter Folio Name : " + FolioName);
		reslogger.info("Enter Folio Name : " + FolioName);

		String folioDetails = "//h4[text()='Folio details']/../..//textarea";
		Wait.WaitForElement(driver, folioDetails);
		driver.findElement(By.xpath(folioDetails)).sendKeys(FolioDescription);
		test_steps.add("Enter Folio description : " + FolioDescription);
		reslogger.info("Enter Folio description : " + FolioDescription);

		String save = "//h4[text()='Folio details']/../..//button[text()='Save']";
		Wait.WaitForElement(driver, save);
		driver.findElement(By.xpath(save)).click();
		test_steps.add("Click on save new folio");
		reslogger.info("Click on save new folio");

		// String saveFolio =
		// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save");
		reslogger.info("Click on Save");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
	}

	public void verifyCreatedFolio(WebDriver driver, ArrayList<String> test_steps, String FolioName) {
		String guestFolio = "//span[text()='Guest Folio']//..";
		Wait.WaitForElement(driver, guestFolio);
		driver.findElement(By.xpath(guestFolio)).click();
		test_steps.add("Click on guest folio");
		reslogger.info("Click on guest folio");
		try {
			String customFolio = "//span[text()='" + FolioName + "']/..";
			Wait.WaitForElement(driver, customFolio);
			driver.findElement(By.xpath(customFolio)).click();
			test_steps.add("Click on " + FolioName + " folio");
			reslogger.info("Click on " + FolioName + " folio");

			customFolio = "//span[text()='" + FolioName + "']/..";
			Wait.WaitForElement(driver, customFolio);
			driver.findElement(By.xpath(customFolio)).click();
			guestFolio = "//span[text()='Guest Folio']//..";
			Wait.WaitForElement(driver, guestFolio);
			driver.findElement(By.xpath(guestFolio)).click();

			test_steps.add("Successfully verified newly created folio : " + FolioName);
			reslogger.info("Successfully verified newly created folio : " + FolioName);
		} catch (Exception e) {
			test_steps.add("failed to find " + FolioName + " folio");
			reslogger.info("failed to find " + FolioName + " folio");
		}
	}

	public void updateCustomFolio(WebDriver driver, ArrayList<String> test_steps, String FolioName,
			String UpdatedFolioName, String UpdatedFolioDescription) throws InterruptedException {
		String guestFolio = "//span[text()='Guest Folio']//..";
		Wait.WaitForElement(driver, guestFolio);
		driver.findElement(By.xpath(guestFolio)).click();
		test_steps.add("Click on guest folio");
		reslogger.info("Click on guest folio");
		String customFolio = "//span[text()='" + FolioName + "']/..";
		Wait.WaitForElement(driver, customFolio);
		driver.findElement(By.xpath(customFolio)).click();
		test_steps.add("Click on " + FolioName + " folio");
		reslogger.info("Click on " + FolioName + " folio");

		String editFolio = "//i[contains(@data-bind,'EditFolio')]";
		Wait.WaitForElement(driver, editFolio);
		driver.findElement(By.xpath(editFolio)).click();
		test_steps.add("Click on edit folio");
		reslogger.info("Click on edit folio");

		String folioName = "//h4[text()='Folio details']/../..//input";
		Wait.WaitForElement(driver, folioName);

		driver.findElement(By.xpath(folioName)).clear();
		driver.findElement(By.xpath(folioName)).sendKeys(UpdatedFolioName);
		test_steps.add("Update Folio Name : " + UpdatedFolioName);
		reslogger.info("Update Folio Name : " + UpdatedFolioName);

		String folioDetails = "//h4[text()='Folio details']/../..//textarea";
		Wait.WaitForElement(driver, folioDetails);
		driver.findElement(By.xpath(folioDetails)).clear();
		driver.findElement(By.xpath(folioDetails)).sendKeys(UpdatedFolioDescription);
		test_steps.add("Update Folio description : " + UpdatedFolioDescription);
		reslogger.info("Update Folio description : " + UpdatedFolioDescription);

		String save = "//h4[text()='Folio details']/../..//button[text()='Save']";
		Wait.WaitForElement(driver, save);
		driver.findElement(By.xpath(save)).click();
		test_steps.add("Click on save new folio");
		reslogger.info("Click on save new folio");

		// String saveFolio =
		// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save");
		reslogger.info("Click on Save");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");
	}

	public void deleteFolio(WebDriver driver, ArrayList<String> test_steps, String FolioName) {
		String guestFolio = "//span[text()='Guest Folio']//..";
		Wait.WaitForElement(driver, guestFolio);
		driver.findElement(By.xpath(guestFolio)).click();
		test_steps.add("Click on guest folio");
		reslogger.info("Click on guest folio");
		try {
			String customFolio = "//span[text()='" + FolioName + "']/..";
			Wait.WaitForElement(driver, customFolio);
			driver.findElement(By.xpath(customFolio)).click();
			test_steps.add("Click on " + FolioName + " folio");
			reslogger.info("Click on " + FolioName + " folio");

			customFolio = "//span[text()='" + FolioName + "']/..";
			Wait.WaitForElement(driver, customFolio);
			driver.findElement(By.xpath(customFolio)).click();

			String delete = "//i[contains(@data-bind,'DeleteFolio')]";
			Wait.WaitForElement(driver, delete);
			driver.findElement(By.xpath(delete)).click();
			test_steps.add("Click on delete " + FolioName + " folio");
			reslogger.info("Click on delete " + FolioName + " folio");
			// String saveFolio =
			// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
			String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
			Wait.WaitForElement(driver, saveFolio);
			driver.findElement(By.xpath(saveFolio)).click();
			test_steps.add("Click on Save");
			reslogger.info("Click on Save");
			String loading = "(//div[@class='ir-loader-in'])";
			int count = 0;
			while (true) {
				if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
					break;
				} else if (count == 20) {
					break;
				} else {
					count++;
					Wait.wait2Second();
				}
			}
			reslogger.info("Waited to loading symbol");

			Wait.WaitForElement(driver, guestFolio);
			driver.findElement(By.xpath(guestFolio)).click();
			test_steps.add("Click on guest folio");
			reslogger.info("Click on guest folio");

			if (driver.findElements(By.xpath(customFolio)).size() <= 0) {
				test_steps.add("Successfully verified delete folio : " + FolioName);
				reslogger.info("Successfully verified delete folio : " + FolioName);
			} else {
				test_steps.add("failed to  verify delete folio : " + FolioName);
				reslogger.info("failed to  verify delete folio : " + FolioName);
			}

		} catch (Exception e) {
			test_steps.add("failed to find " + FolioName + " folio");
			reslogger.info("failed to find " + FolioName + " folio");
		}
	}

	public void click_ReservationMainMenu(WebDriver driver, ArrayList<String> test_steps) {
		String res = "(//span[text()='Reservations']/..)[3]";
		Wait.WaitForElement(driver, res);
		driver.findElement(By.xpath(res)).click();
	}

	public void editPaymentInfoAndMakeReservationAsPayment(WebDriver driver, ArrayList<String> test_steps,
			String reservation) {

		String editPaymentInfo = "//span[contains(@data-bind,'editPaymentInfo')]";
		Wait.WaitForElement(driver, editPaymentInfo);
		driver.findElement(By.xpath(editPaymentInfo)).click();
		test_steps.add("Click on edit payment info");
		reslogger.info("Click on edit payment info");

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
		res.CP_NewReservation_PaymentMethod.click();

		String respayment = "//label[text()='Payment Method']/../../../..//span[text()='Reservation']/..";
		Wait.WaitForElement(driver, respayment);
		driver.findElement(By.xpath(respayment)).click();
		test_steps.add("Click on Reservation as payment info");
		reslogger.info("Click on Reservation as payment info");

		String resnum = "//input[@name='reservation-autocomplete']";
		Wait.WaitForElement(driver, resnum);
		driver.findElement(By.xpath(resnum)).sendKeys(reservation);
		test_steps.add("Enter reservation number : " + reservation);
		reslogger.info("Enter reservation number : " + reservation);

		String paymentres = "//b[text()='" + reservation + "']/../..";
		Wait.WaitForElement(driver, paymentres);
		driver.findElement(By.xpath(paymentres)).click();

		String save = "//button[contains(@data-bind,'savePaymentInfo')]";
		Wait.WaitForElement(driver, save);
		driver.findElement(By.xpath(save)).click();
		test_steps.add("Click on save payment info");
		reslogger.info("Click on save payment info");

	}

	public void verifyReservationAspaymentDetailsInDetailsPage(WebDriver driver, ArrayList<String> test_steps,
			String reservation) throws InterruptedException {
		String payInfo = "//div[contains(@data-bind,'PaymentDetail')]//span[text()='" + reservation + "']";
		Wait.wait5Second();
		try {
			Wait.WaitForElement(driver, payInfo);

			test_steps.add("Successfully verified payment info in reservation details page as : " + reservation);
			reslogger.info("Successfully verified payment info in reservation details page as : " + reservation);
		} catch (Exception e) {
			test_steps.add("Failed to verify payment info reservation details page as : " + reservation);
			reslogger.info("Failed to verify payment info reservation details page as : " + reservation);
		}
	}

	public String paywithRes(WebDriver driver, ArrayList<String> test_steps, String reservation)
			throws InterruptedException {
		String pay = "//button[text()='Pay']";
		Wait.WaitForElement(driver, pay);
		driver.findElement(By.xpath(pay)).click();
		test_steps.add("Click on pay button");
		reslogger.info("Click on pay button");
		Wait.wait10Second();
		String paybutton = "(//h4[text()='Take Payment']/../..//a[contains(text(),'Pay')])[3]";
		Wait.WaitForElement(driver, paybutton);
		driver.findElement(By.xpath(paybutton)).click();
		test_steps.add("Click on pay button in take payment");
		reslogger.info("Click on pay button in take payment");

		String respay = "//span[text()='Reservation - " + reservation + "']";
		Wait.WaitForElement(driver, respay);
		test_steps.add("Reservation number verified in payment success page as : " + reservation);
		reslogger.info("Reservation number verified in payment success page as : " + reservation);

		String close = "//h4[text()='Payment Successful']/../..//button[text()='Close']";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		test_steps.add("Click on close");
		reslogger.info("Click on close");
		// String saveFolio =
		// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save");
		reslogger.info("Click on Save");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		reslogger.info("Waited to loading symbol");

		String paymentinfo = "//td/span[text()='Reservation']/../following-sibling::td/a[text()='Reservation - "
				+ reservation + "']";
		Wait.WaitForElement(driver, paymentinfo);
		test_steps.add("Successfully verified payment line item with reservation in folio : " + reservation);
		reslogger.info("Successfully verified payment line item with reservation in folio : " + reservation);

		String paymentAmount = "//td/span[text()='Reservation']/../following-sibling::td[contains(@class,'lineitem-amount')]/span";
		Wait.WaitForElement(driver, paymentAmount);
		String amount = driver.findElement(By.xpath(paymentAmount)).getText();
		amount = amount.trim();
		amount = amount.substring(1, amount.length());
		test_steps.add("paid amount through reservation is : " + amount);
		reslogger.info("paid amount through reservation is : " + amount);

		return amount;
	}

	public void verifyRespaymentinPaidReservation(WebDriver driver, ArrayList<String> test_steps, String reservation,
			String amountPaid) {
		String payLine = "//td/span[text()='Reservation']/../following-sibling::td/a[contains(text(),'Res #"
				+ reservation + "')]";
		Wait.WaitForElement(driver, payLine);
		test_steps.add("Successfully verified payment paid line item with reservation in folio : " + reservation);
		reslogger.info("Successfully verified payment paid line item with reservation in folio : " + reservation);
		String paymentAmount = "//td/span[text()='Reservation']/../following-sibling::td[contains(@class,'lineitem-amount')]/span";
		Wait.WaitForElement(driver, paymentAmount);
		String amount = driver.findElement(By.xpath(paymentAmount)).getText();
		amount = amount.trim();
		amount = amount.substring(1, amount.length());
		test_steps.add("paid amount for reservation is : " + amount);
		reslogger.info("paid amount for reservation is : " + amount);

		System.out.println(amount.trim());
		System.out.println("-" + amountPaid.trim());
		if (amount.trim().equalsIgnoreCase("-" + amountPaid.trim())) {
			test_steps.add("Sucessfully verified amount paid to reservation : " + amountPaid);
			reslogger.info("Sucessfully verified amount paid to reservation : " + amountPaid);
		} else {
			test_steps.add("failed to verify amount paid to reservation : " + amountPaid);
			reslogger.info("failed to verify amount paid to reservation : " + amountPaid);
		}
	}

	public void verifyStayInforCheckInDate(WebDriver driver, ArrayList<String> test_steps, String checkInDate) {

		String[] in = checkInDate.split("\\|");
		int count = in.length;

		for (int i = 0; i < count; i++) {
			String[] checkIn = in[i].split("/");
			if (checkIn[0].charAt(0) == '0') {
				checkIn[0] = checkIn[0].replace("" + checkIn[0].charAt(0), "");
			}
			String checkInMonth = Utility.get_Month(in[i]);
			String checkInDays = checkInMonth + " " + checkIn[0] + ", " + checkIn[2];
			String checkInDay = "//div[contains(text(),'Stay')]/..//div[@class='checkin']/span[text()='" + checkInDays
					+ "']";
			assertTrue(driver.findElement(By.xpath(checkInDay)).isDisplayed(), "Failed to verify checkin date");
			test_steps.add("Reservation Stay Info checkin date verified : " + checkInDate);
			reslogger.info("Reservation Stay Info checkin date verified : " + checkInDate);
		}
	}

	public void clickCloseButtonOfCheckoutModelPopup(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CPCheckoutClose);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CPCheckoutClose), driver, 10);
		JavascriptExecutor executor = (JavascriptExecutor) driver;
		executor.executeScript("arguments[0].click();", res.CPCheckoutClose);
		test_steps.add("Click Close Button ");
		reslogger.info("Click Close Button ");
		String loading = "(//div[@class='ir-loader-in'])";
		Wait.waitTillElementDisplayed(driver, loading);
		verifySpinerLoading(driver);
	}

	public void clickStayInfoThreeDots(WebDriver driver, ArrayList<String> test_steps, String status, String roomNO)
			throws InterruptedException {

		String path = "//div[contains(@data-bind,'ReservationStatusLookup')]/div//div[contains(@class,'ir-roomInfo')]"
				+ "//span[contains(text(),'" + roomNO + "')]/ancestor::div/div[contains(@class,'detailsbox')]"
				+ "/following-sibling::div//button[contains(@class,'ir-iconCircle')]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		Utility.ScrollToElement(driver.findElement(By.xpath(path)), driver);
		try {
			Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(path)));
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(path)));
		}
		reslogger.info("Click Three Dots ");
		// String pathCancel = "//ul//li[contains(text(),'" + status + "')]";
		String pathCancel = "//div[contains(@data-bind,'ReservationStatusLookup')]"
				+ "/div//div[contains(@class,'ir-roomInfo')]//span[contains(text(),'" + roomNO + "')]"
				+ "/ancestor::div/div[contains(@class,'detailsbox')]/following-sibling::div//ul//li[contains(text(),'"
				+ status + "')]";
		WebDriverWait wait = new WebDriverWait(driver, 25);
		By locator = By.xpath(pathCancel);
		WebElement elementCancel = wait.until(ExpectedConditions.elementToBeClickable(locator));
		elementCancel.click();
		test_steps.add("Click : <b>" + status + "</b>");
		reslogger.info("Click : " + status);
	}

	public void verifyInvalidExpiryDate(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {
		String path = "(//span[contains(@data-bind,'validationMessage') and contains(text(),'Invalid/expired date')])[2]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		Utility.ScrollToElement(driver.findElement(By.xpath(path)), driver);
		assertTrue(driver.findElement(By.xpath(path)).isDisplayed(), "Failed to verify invalid expiry date");
		test_steps.add("Verified Invalid/expired date");
		reslogger.info("Verified Invalid/expired date");

	}

	public boolean isTaxPresentAfterTaxExemptForAccount(WebDriver driver, ArrayList<String> test_steps,
			String taxLedgeraccount, String TaxDescriptions) throws InterruptedException {
		boolean isTaxExist = true;
		Elements_CPReservation res = new Elements_CPReservation(driver);
		int roomChargesFolioCount = getRoomChargeFolioItemCountInRes(driver);
		for (int i = 1; i <= roomChargesFolioCount; i++) {
			String xpath = "(//tbody[starts-with(@data-bind,'getElement: ComputedFolioItemsElement')]/tr/td/span[text()='"
					+ taxLedgeraccount + "']/../following-sibling::td/a)[" + i + "]";
			// clickroomChargeFolioItems
			Wait.waitUntilPresenceOfElementLocated(xpath, driver);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(xpath)), driver);
			driver.findElement(By.xpath(xpath)).click();
			test_steps.add("Click at folio line item: " + i + " of" + " " + taxLedgeraccount);

			String xpath1 = "(//a[text()='" + TaxDescriptions + "'])[1]/ancestor::td/following-sibling::td/span";

			isTaxExist = verifySizeOfChildLineItems(driver, xpath1);
			test_steps.add(
					"Get if the created tax is present under folio after tax exempt: " + "<b>" + isTaxExist + "</b>");
			clickFolioPopupCancel(driver);
			test_steps.add("Close folio popup");
		}

		return isTaxExist;

	}

	public void verify_CancelButtonInReservationStatusDropdown(WebDriver driver, ArrayList<String> test_steps) {
		String statusDrpdw = "//i[contains(@data-bind,'ReservationUpdate')]";
		Wait.WaitForElement(driver, statusDrpdw);
		driver.findElement(By.xpath(statusDrpdw)).click();
		test_steps.add("Clicking on expand reservation status drop down");
		reslogger.info("Clicking on expand reservation status drop down");

		String cancel = "//span[text()='Cancel' and contains(@data-bind,'reservationStatusItem')]";
		try {
			Wait.WaitForElement(driver, cancel);
			assertTrue(driver.findElement(By.xpath(cancel)).isDisplayed(), "Failed to verify cancel status");
			test_steps.add("Successfully verified cancel button in reservation staus drop down");
			reslogger.info("Successfully verified cancel button in reservation staus drop down");
		} catch (Exception e) {
			test_steps.add("Assertion error : failed to verify cancel button in reservation staus drop down");
			reslogger.info("Assertion error : failed to verify cancel button in reservation staus drop down");
		}

	}

	public void click_SelectRoomWithoutSelectingRoomNumber(WebDriver driver, ArrayList<String> test_steps,
			String RoomClass) {
		String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//..//following-sibling::div//span[contains(text(),'SELECT')]";
		Wait.WaitForElement(driver, select);
		driver.findElement(By.xpath(select)).click();
	}

	public boolean verify_OverBookingPopupAndClickYes(WebDriver driver, ArrayList<String> test_steps,
			String RoomClass) {

		String overBooking = "//div[contains(text(),'There are 0 rooms available for " + RoomClass
				+ ",')]/..//button[text()='Yes']";
		System.out.println(overBooking);
		try {
			Wait.waitForElementByXpath(driver, overBooking);
			driver.findElement(By.xpath(overBooking)).click();
			test_steps.add("Successfully verified over booking pop up and clicked on yes");
			reslogger.info("Successfully verified over booking pop up and clicked on yes");
			return true;
		} catch (Exception e) {
			test_steps.add("Assertion error : failed to verify over booking pop up");
			reslogger.info("Assertion error : failed to verify over booking pop up");
			return false;
		}
	}

	public boolean verify_OverBookingPopupAndClickYes1(WebDriver driver, ArrayList<String> test_steps,
			String RoomClass) {

		String overBooking = "//div[contains(text(),'There are 0 rooms available for the " + RoomClass
				+ ",')]/..//button[text()='Yes']";
		System.out.println(overBooking);
		try {
			Wait.waitForElementByXpath(driver, overBooking);
			driver.findElement(By.xpath(overBooking)).click();
			test_steps.add("Successfully verified over booking pop up and clicked on yes");
			reslogger.info("Successfully verified over booking pop up and clicked on yes");
			return true;
		} catch (Exception e) {
			test_steps.add("Assertion error : failed to verify over booking pop up");
			reslogger.info("Assertion error : failed to verify over booking pop up");
			return false;
		}
	}

	public boolean verifyRoomClass(WebDriver driver, ArrayList<String> test_steps, String RoomClass) {
		String roomcls = "//span[contains(@data-bind,'roomClassName')]";
		Wait.waitForElementByXpath(driver, roomcls);
		String room = driver.findElement(By.xpath(roomcls)).getText();
		if (room.trim().equalsIgnoreCase(RoomClass)) {
			test_steps.add("Successfully verified room class : " + RoomClass);
			reslogger.info("Successfully verified room class : " + RoomClass);
			return true;
		} else {
			test_steps.add("Assertion error : failed to verify room class");
			reslogger.info("Assertion error : failed to verify room class");
			return false;
		}
	}

	public boolean verifyOverBookErrorMsgAtCheckIn(WebDriver driver, ArrayList<String> test_steps) {

		String overBook = "//div[contains(text(),'The current room class is overbooked. Please select a different room below.')]";
		Wait.WaitForElement(driver, overBook);
		if (driver.findElement(By.xpath(overBook)).isDisplayed()) {
			test_steps.add(
					"Successfully verified Error Message : The current room class is overbooked. Please select a different room below.");
			reslogger.info(
					"Successfully verified Error Message : The current room class is overbooked. Please select a different room below.");
			return true;
		} else {
			test_steps.add(
					"Assertion error : failed to verify Error Message : The current room class is overbooked. Please select a different room below.");
			reslogger.info(
					"Assertion error : failed to verify Error Message : The current room class is overbooked. Please select a different room below.");
			return false;
		}

	}

	public boolean verify_OverBookingAtReservationModification(WebDriver driver, ArrayList<String> test_steps,
			String RoomClass) throws InterruptedException, ParseException {

		String date = Utility.parseDate(Utility.getDatePast_FutureDate(2), "MM/dd/yyyy", "dd/MM/yyyy");
		select_CheckoutDate(driver, test_steps, date);

		String splitRoom = "//button[contains(@data-bind,'RoomAssignmentEditType')]";
		Wait.WaitForElement(driver, splitRoom);
		driver.findElement(By.xpath(splitRoom)).click();
		test_steps.add("Clicking on split Room");
		reslogger.info("Clicking on split Room");
		click_FindRooms(driver, test_steps);
		String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../../..//span[contains(@data-bind,'SELECT')]";
		Wait.WaitForElement(driver, select);
		driver.findElement(By.xpath(select)).click();
		test_steps.add("Clicking on select Room");
		reslogger.info("Clicking on select room");
		Wait.wait5Second();
		click_SelectRoomWithoutSelectingRoomNumber(driver, test_steps, RoomClass);
		boolean flag = verify_OverBookingPopupAndClickYes(driver, test_steps, RoomClass);
		return flag;
	}

	public void select_CheckInDateSplit(WebDriver driver, ArrayList<String> test_steps, String CheckInDate)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		reslogger.info("Waited to loading symbol");
		String cal = "(//label[text()='Check In']/following-sibling::i|//label[text()='check In']/following-sibling::i)[2]";
		Wait.WaitForElement(driver, cal);
		Utility.ScrollToElement(driver.findElement(By.xpath(cal)), driver);
		driver.findElement(By.xpath(cal)).click();
		String monthYear = Utility.get_MonthYear(CheckInDate);
		String day = Utility.getDay(CheckInDate);
		reslogger.info(monthYear);
		String header = null, headerText = null, next = null, date;
		for (int i = 1; i <= 12; i++) {
			header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
			headerText = driver.findElement(By.xpath(header)).getText();
			if (headerText.equalsIgnoreCase(monthYear)) {
				date = "//td[contains(@class,'day') and text()='" + day + "']";
				Wait.WaitForElement(driver, date);
				int size = driver.findElements(By.xpath(date)).size();
				for (int k = 1; k <= size; k++) {
					date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + k + "]";
					String classText = driver.findElement(By.xpath(date)).getAttribute("class");
					if (!classText.contains("old")) {
						driver.findElement(By.xpath(date)).click();
						test_steps.add("Selecting checkin date : " + CheckInDate);
						reslogger.info("Selecting checkin date : " + CheckInDate);
						break;
					}
				}
				break;
			} else {
				next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
				Wait.WaitForElement(driver, next);
				driver.findElement(By.xpath(next)).click();
				Wait.wait2Second();
			}
		}
	}

	public void select_CheckoutDateSplit(WebDriver driver, ArrayList test_steps, String CheckoutDate)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		String checkout = "(//label[text()='check Out']/following-sibling::i|//label[text()='Check Out']/following-sibling::i)[2]";
		Wait.WaitForElement(driver, checkout);
		Utility.ScrollToElement(driver.findElement(By.xpath(checkout)), driver);
		driver.findElement(By.xpath(checkout)).click();
		String monthYear = Utility.get_MonthYear(CheckoutDate);
		String day = Utility.getDay(CheckoutDate);
		reslogger.info(monthYear);
		String header = null, headerText = null, next = null, date;
		for (int i = 1; i <= 12; i++) {
			header = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[2]";
			headerText = driver.findElement(By.xpath(header)).getText();
			if (headerText.equalsIgnoreCase(monthYear)) {
				date = "//td[contains(@class,'day') and text()='" + day + "']";
				Wait.WaitForElement(driver, date);
				int size = driver.findElements(By.xpath(date)).size();
				for (int k = 1; k <= size; k++) {
					date = "(//td[contains(@class,'day') and text()='" + day + "'])[" + k + "]";
					String classText = driver.findElement(By.xpath(date)).getAttribute("class");
					if (!classText.contains("old")) {
						driver.findElement(By.xpath(date)).click();
						test_steps.add("Selecting checkout date : " + CheckoutDate);
						reslogger.info("Selecting checkout date : " + CheckoutDate);
						break;
					}
				}

				break;
			} else {
				next = "//table[@class='datepicker-table-condensed table-condensed']/thead/tr/th[3]/div";
				Wait.WaitForElement(driver, next);
				driver.findElement(By.xpath(next)).click();
				Wait.wait2Second();
			}
		}
	}

	public boolean verify_OverBookPopupForSplitRes(WebDriver driver, ArrayList test_steps, String RoomClass)
			throws InterruptedException {
		String select = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]/../../../..//span[contains(@data-bind,'SELECT')]";
		Wait.WaitForElement(driver, select);
		driver.findElement(By.xpath(select)).click();
		test_steps.add("Clicking on select Room");
		reslogger.info("Clicking on select room");
		Wait.wait5Second();
		click_SelectRoomWithoutSelectingRoomNumber(driver, test_steps, RoomClass);
		boolean flag = verify_OverBookingPopupAndClickYes(driver, test_steps, RoomClass);
		return flag;
	}

	public boolean verifyallPaymentMethodInFolio(WebDriver driver, ArrayList<String> test_steps,
			ArrayList<String> PaymentMethod) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Elements_CPReservation CPReservationPage = new Elements_CPReservation(driver);
		String selectedPaymentMethod = "((//div[contains(@class,'payment-method')])[2]//span)[1]//i";
		Wait.WaitForElement(driver, selectedPaymentMethod);
		driver.findElement(By.xpath(selectedPaymentMethod)).click();
		String paymentMethods = "(//div[contains(@class,'payment-method')])[2]//div//a//span[@class='text']";
		Wait.WaitForElement(driver, paymentMethods);
		String payMethod = null;
		ArrayList<String> allPaymentMethods = new ArrayList<>();

		List<WebElement> elementMethods = driver.findElements(By.xpath(paymentMethods));
		for (int i = 1; i <= elementMethods.size() - 1; i++) {
			payMethod = elementMethods.get(i).getText();
			allPaymentMethods.add(payMethod);

		}
		reslogger.info(allPaymentMethods);
		boolean isAvialble = PaymentMethod.equals(allPaymentMethods);

		Wait.WaitForElement(driver, OR_Reservation.closeTakePaymentPopup);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.closeTakePaymentPopup), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.closeTakePaymentPopup), driver);
		CPReservationPage.closeTakePaymentPopup.click();
		test_steps.add("Clicking on close Button.");
		reslogger.info("Clicking on close Button.");

		return isAvialble;
	}

	public void verifySearchedGuestProfile(WebDriver driver, ArrayList<String> test_steps, String guestName,
			boolean isSelect, boolean isReplaceDetail) {
		String inputPath = "//input[contains(@data-bind,'GuestProfileName')]";
		String suggestionPath = "//div[contains(@data-bind,'GuestProfileName')]//div[contains(@class,'auto-suggest')]";
		String listItemPath = suggestionPath
				+ "/ul/li/div/div[1]/span/b[contains((translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ')),'"
				+ guestName.toUpperCase() + "')]";

		Wait.WaitForElement(driver, inputPath);
		driver.findElement(By.xpath(inputPath)).clear();
		driver.findElement(By.xpath(inputPath)).sendKeys(guestName);
		test_steps.add("Search Guest Profile : " + guestName);
		reslogger.info("Search Guest Profile : " + guestName);

		if (driver.findElements(By.xpath(suggestionPath)).size() > 0) {
			Utility.customAssert(driver.findElement(By.xpath(suggestionPath)).isDisplayed() + "", "true", true,
					"Successfully Verified Guest Profile Suggestion Displayed on Search",
					"Failed to Verify Guest Profile Suggestion not Displayed on Search", true, test_steps);
		}

		if (isSelect) {
			Utility.customAssert(driver.findElement(By.xpath(listItemPath)).isDisplayed() + "", "true", true,
					"Successfully Verified Auto Suggestion Popup dropdown Displayed on Search",
					"Failed to Verify Auto Suggestion Popup dropdown not Displayed on Search", true, test_steps);
//			Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(listItemPath)));
			driver.findElement(By.xpath(listItemPath)).click();
			test_steps.add("Item Selected : " + guestName);
			reslogger.info("Item Selected : " + guestName);
			if (isReplaceDetail) {
				try {
					Utility.clickThroughJavaScript(driver, driver.findElement(
							By.xpath("//div[contains(text(),'replace the guest info')]/..//button[text()='Yes']")));
					test_steps.add("Replace Guest Info Detail Yes Click");
					reslogger.info("Replace Guest Info Detail Yes Click");
				} catch (Exception e) {
					// TODO: handle exception
				}
			} else {
				try {
					Utility.clickThroughJavaScript(driver, driver.findElement(
							By.xpath("//div[contains(text(),'replace the guest info')]/..//button[text()='No']")));
					test_steps.add("Replace Guest Info Detail No Click");
					reslogger.info("Replace Guest Info Detail No Click");
				} catch (Exception e) {
					// TODO: handle exception
				}
			}
		}
	}

	public void verifyAccountSearch(WebDriver driver, ArrayList<String> test_steps, String accName, boolean isSelect,
			boolean isReplaceDetail) {
		String inputPath = "//input[contains(@data-bind,'guestInfo-account-autoComplete')]";
		String suggestionPath = inputPath + "/..//div[contains(@class,'auto-suggest')]";
		String listItemPath = suggestionPath
				+ "/ul/li/div/div[1]/span/b[contains((translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ')),'"
				+ accName.toUpperCase() + "')]";
		System.out.println(inputPath);
		Wait.WaitForElement(driver, inputPath);
		driver.findElement(By.xpath(inputPath)).clear();
		driver.findElement(By.xpath(inputPath)).sendKeys(accName);
		test_steps.add("Search Accout Name : " + accName);
		reslogger.info("Search Accout Name : " + accName);

		if (driver.findElements(By.xpath(suggestionPath)).size() > 0) {
			Utility.customAssert(driver.findElement(By.xpath(suggestionPath)).isDisplayed() + "", "true", true,
					"Successfully Verified Accout Suggestion Displayed on Search",
					"Failed to Verify Accout Suggestion not Displayed on Search", true, test_steps);
		}

		if (isSelect) {
//			Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(listItemPath)));
			driver.findElement(By.xpath(listItemPath)).click();
			test_steps.add("Item Selected : " + accName);
			reslogger.info("Item Selected : " + accName);
			if (isReplaceDetail) {
				try {
					Utility.customAssert(driver.findElement(By.xpath(listItemPath)).isDisplayed() + "", "true", true,
							"Successfully Verified Auto Suggestion Popup dropdown Displayed on Search",
							"Failed to Verify Auto Suggestion Popup dropdown not Displayed on Search", true,
							test_steps);
					Utility.clickThroughJavaScript(driver, driver.findElement(
							By.xpath("//div[contains(text(),'replace the guest info')]/..//button[text()='Yes']")));
					test_steps.add("Replace Guest Info Detail Yes Click");
					reslogger.info("Replace Guest Info Detail Yes Click");
					String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
					if (driver.findElements(By.xpath(policy)).size() > 0) {
						Wait.WaitForElement(driver, policy);
						driver.findElement(By.xpath(policy)).click();
						test_steps.add("Based on the changes made, new policies are applicable.? : yes");
						reslogger.info("Based on the changes made, new policies are applicable.? : yes");

						String loading = "(//div[@class='ir-loader-in'])[2]";
						int counter = 0;
						while (true) {
							if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
								break;
							} else if (counter == 3) {
								break;
							} else {
								counter++;
								Wait.wait2Second();
							}
						}
					}
				} catch (Exception e) {
					// TODO: handle exception
				}
			} else {
				try {
					Utility.clickThroughJavaScript(driver, driver.findElement(
							By.xpath("//div[contains(text(),'replace the guest info')]/..//button[text()='No']")));
					test_steps.add("Replace Guest Info Detail No Click");
					reslogger.info("Replace Guest Info Detail No Click");
				} catch (Exception e) {
					// TODO: handle exception
				}
			}
		}

	}

	public void verifyAddressSearch(WebDriver driver, ArrayList<String> test_steps, String address, boolean isSelect,
			boolean isReplaceDetail) {
		String inputPath = "//input[contains(@data-bind,'guestInfo-address-autoComplete')]";
		String suggestionPath = inputPath + "/..//div[contains(@class,'auto-suggest')]";
		String listItemPath = suggestionPath
				+ "/ul/li/div/div[1]//*[contains((translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ')),'"
				+ address.toUpperCase() + "')]";

		Wait.WaitForElement(driver, inputPath);
		driver.findElement(By.xpath(inputPath)).click();
		driver.findElement(By.xpath(inputPath)).clear();
		driver.findElement(By.xpath(inputPath)).clear();
		driver.findElement(By.xpath(inputPath)).sendKeys(address);
		test_steps.add("Search Address Name : " + address);
		reslogger.info("Search Address Name : " + address);

		if (driver.findElements(By.xpath(suggestionPath)).size() > 0) {
			Utility.customAssert(driver.findElement(By.xpath(suggestionPath)).isDisplayed() + "", "true", true,
					"Successfully Verified Address Suggestion Displayed on Search",
					"Failed to Verify Address Suggestion not Displayed on Search", true, test_steps);
		}

		if (isSelect) {
			Utility.customAssert(driver.findElement(By.xpath(listItemPath)).isDisplayed() + "", "true", true,
					"Successfully Verified Auto Suggestion Popup dropdown Displayed on Search",
					"Failed to Verify Auto Suggestion Popup dropdown not Displayed on Search", true, test_steps);
//			Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(listItemPath)));
			driver.findElement(By.xpath(listItemPath)).click();
			test_steps.add("Item Selected : " + address);
			reslogger.info("Item Selected : " + address);
			if (isReplaceDetail) {
				try {
					Utility.clickThroughJavaScript(driver, driver.findElement(
							By.xpath("//div[contains(text(),'replace the guest info')]/..//button[text()='Yes']")));
					test_steps.add("Replace Guest Info Detail Yes Click");
					reslogger.info("Replace Guest Info Detail Yes Click");
					String policy = "//p[contains(text(),'Based on the changes made')]/../..//button[text()='Yes']";
					if (driver.findElements(By.xpath(policy)).size() > 0) {
						Wait.WaitForElement(driver, policy);
						driver.findElement(By.xpath(policy)).click();
						test_steps.add("Based on the changes made, new policies are applicable.? : yes");
						reslogger.info("Based on the changes made, new policies are applicable.? : yes");

						String loading = "(//div[@class='ir-loader-in'])[2]";
						int counter = 0;
						while (true) {
							if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
								break;
							} else if (counter == 3) {
								break;
							} else {
								counter++;
								Wait.wait2Second();
							}
						}
					}
				} catch (Exception e) {
					// TODO: handle exception
				}
			} else {
				try {
					Utility.clickThroughJavaScript(driver, driver.findElement(
							By.xpath("//div[contains(text(),'replace the guest info')]/..//button[text()='No']")));
					test_steps.add("Replace Guest Info Detail No Click");
					reslogger.info("Replace Guest Info Detail No Click");
				} catch (Exception e) {
					// TODO: handle exception
				}
			}
		}

	}

	public void verifyTravelAgentAccountSearch(WebDriver driver, ArrayList<String> test_steps, String accName,
			boolean isSelect, boolean isReplaceDetail) {
		String inputPath = "//div[contains(@data-bind,'travelAgent')]//input[contains(@data-bind,'travelAgent')]";
		String suggestionPath = inputPath + "/..//div[contains(@class,'auto-suggest')]";
		String listItemPath = suggestionPath
				+ "/ul/li/div/div[1]/span/b[contains((translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ')),'"
				+ accName.toUpperCase() + "')]";

		Wait.WaitForElement(driver, inputPath);
		driver.findElement(By.xpath(inputPath)).clear();
		driver.findElement(By.xpath(inputPath)).sendKeys(accName);
		test_steps.add("Search TravelAgent Accout Name : " + accName);
		reslogger.info("Search TravelAgent Accout Name : " + accName);

		if (driver.findElements(By.xpath(suggestionPath)).size() > 0) {
			Utility.customAssert(driver.findElement(By.xpath(suggestionPath)).isDisplayed() + "", "true", true,
					"Successfully Verified TravelAgent Accout Suggestion Displayed on Search",
					"Failed to Verify TravelAgent Accout Suggestion not Displayed on Search", true, test_steps);
		}

		if (isSelect) {
//			Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(listItemPath)));
			Utility.customAssert(driver.findElement(By.xpath(listItemPath)).isDisplayed() + "", "true", true,
					"Successfully Verified Auto Suggestion Popup dropdown Displayed on Search",
					"Failed to Verify Auto Suggestion Popup dropdown not Displayed on Search", true, test_steps);
			driver.findElement(By.xpath(listItemPath)).click();
			test_steps.add("Item Selected : " + accName);
			reslogger.info("Item Selected : " + accName);
			if (isReplaceDetail) {
				try {
					Utility.clickThroughJavaScript(driver, driver.findElement(
							By.xpath("//div[contains(text(),'replace the guest info')]/..//button[text()='Yes']")));
					test_steps.add("Replace Guest Info Detail Yes Click");
					reslogger.info("Replace Guest Info Detail Yes Click");

				} catch (Exception e) {
					// TODO: handle exception
				}
			} else {
				try {
					Utility.clickThroughJavaScript(driver, driver.findElement(
							By.xpath("//div[contains(text(),'replace the guest info')]/..//button[text()='No']")));
					test_steps.add("Replace Guest Info Detail No Click");
					reslogger.info("Replace Guest Info Detail No Click");
				} catch (Exception e) {
					// TODO: handle exception
				}
			}
		}

	}

	public void verify_MarketSegmantFeilds(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		test_steps.add("******************* MARKET SEGMENT FIELDS VERIFICATION **********************");
		reslogger.info("******************* MARKET SEGMENT FIELDS VERIFICATION **********************");
		String travelAgentPath = "//div[contains(@data-bind,'travelAgent')]//input[contains(@data-bind,'travelAgent')]";
		Utility.customAssert(driver.findElement(By.xpath(travelAgentPath)).isDisplayed() + "", "true", true,
				"Successfully Verified TravelAgent Feild Displayed", "Failed to Verify TravelAgent Feild not Displayed",
				true, test_steps);
		Utility.customAssert(driver.findElement(By.xpath(travelAgentPath)).isEnabled() + "", "true", true,
				"Successfully Verified TravelAgent Feild Enabled", "Failed to Verify TravelAgent Feild not Enabled",
				true, test_steps);

		Utility.customAssert(res.CP_NewReservation_Market.isDisplayed() + "", "true", true,
				"Successfully Verified Market Feild Displayed", "Failed to Verify Market Feild not Displayed", true,
				test_steps);
		Utility.customAssert(res.CP_NewReservation_Market.isEnabled() + "", "true", true,
				"Successfully Verified Market Feild Enabled", "Failed to Verify Market Feild not Enabled", true,
				test_steps);

		Utility.customAssert(res.CP_NewReservation_Referral.isDisplayed() + "", "true", true,
				"Successfully Verified Referral Feild Displayed", "Failed to Verify Referral Feild not Displayed", true,
				test_steps);
		Utility.customAssert(res.CP_NewReservation_Referral.isEnabled() + "", "true", true,
				"Successfully Verified Referral Feild Enabled", "Failed to Verify Referral Feild not Enabled", true,
				test_steps);

		Utility.customAssert(res.enterExternalConfirmation.isDisplayed() + "", "true", true,
				"Successfully Verified ExternalConfirmation Feild Displayed",
				"Failed to Verify ExternalConfirmation Feild not Displayed", true, test_steps);
		Utility.customAssert(res.enterExternalConfirmation.isEnabled() + "", "true", true,
				"Successfully Verified ExternalConfirmation Feild Enabled",
				"Failed to Verify ExternalConfirmation Feild not Enabled", true, test_steps);

		Utility.customAssert(res.CP_NewReservation_SOURCE.isDisplayed() + "", "true", true,
				"Successfully Verified SOURCE Feild Displayed", "Failed to Verify SOURCE Feild not Displayed", true,
				test_steps);
		Utility.customAssert(res.CP_NewReservation_SOURCE.isEnabled() + "", "false", false,
				"Successfully Verified SOURCE Feild not Enabled", "Failed to Verify SOURCE Feild Enabled", true,
				test_steps);

		String subSourcePath = "(//label[text()='Sub Source']/preceding-sibling::div/button)";
		Utility.customAssert(driver.findElement(By.xpath(subSourcePath)).isDisplayed() + "", "true", true,
				"Successfully Verified Sub Source Feild Displayed", "Failed to Verify Sub Source Feild not Displayed",
				true, test_steps);
		Utility.customAssert(driver.findElement(By.xpath(subSourcePath)).isEnabled() + "", "false", false,
				"Successfully Verified Sub Source Feild not Enabled", "Failed to Verify Sub Source Feild Enabled", true,
				test_steps);
	}

	public void verify_Notes(WebDriver driver, ArrayList test_steps, String NoteType, String Subject,
			String Description, String user, int index) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddNotes);
		test_steps.add("******************* VERIFY  NOTES **********************");
		reslogger.info("******************* VERIFY NOTES **********************");

		String noteverify = "(//td[(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'))='"
				+ NoteType.toUpperCase() + "'])[" + index + "]";
		Wait.WaitForElement(driver, noteverify);
		Utility.customAssert(driver.findElement(By.xpath(noteverify)).isDisplayed() + "", "true", true,
				"Successfully Verified Note Type Displayed : " + NoteType,
				"Failed to Verify Note Type not Displayed : " + NoteType, true, test_steps);
//			test_steps.add("Verified Note Type : " + NoteType);
//			reslogger.info("Verified Note Type : " + NoteType);

		noteverify = "(//td[(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'))='"
				+ Subject.toUpperCase() + "'])[" + index + "]";
		Wait.WaitForElement(driver, noteverify);
		Utility.customAssert(driver.findElement(By.xpath(noteverify)).isDisplayed() + "", "true", true,
				"Successfully Verified Note Subject Displayed : " + Subject,
				"Failed to Verify Note Subject not Displayed : " + Subject, true, test_steps);
//			test_steps.add("Verified Note Subject : " + Subject);
//			reslogger.info("Verified Note Subject : " + Subject);

		noteverify = "(//td[(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'))='"
				+ Description.toUpperCase() + "'])[" + index + "]";
		Wait.WaitForElement(driver, noteverify);
		Utility.customAssert(driver.findElement(By.xpath(noteverify)).isDisplayed() + "", "true", true,
				"Successfully Verified Note Description Displayed : " + Subject,
				"Failed to Verify Note Description not Displayed : " + Subject, true, test_steps);
//			test_steps.add("Verified Note Description : " + Description);
//			reslogger.info("Verified Note Description : " + Description);

		noteverify = "(//td[(translate(normalize-space(text()),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'))='"
				+ user.toUpperCase() + "'])[" + index + "]";
		Wait.WaitForElement(driver, noteverify);
		Utility.customAssert(driver.findElement(By.xpath(noteverify)).isDisplayed() + "", "true", true,
				"Successfully Verified Note user Displayed : " + user,
				"Failed to Verify Note user not Displayed : " + user, true, test_steps);
		Utility.customAssert(driver.findElement(By.xpath(noteverify)).getText().toUpperCase(), user.toUpperCase(), true,
				"Successfully Verified Note user Matched : " + user, "Failed to Verify Note user not Matched : " + user,
				true, test_steps);
//			test_steps.add("Verified Note updated by : " + user);
//			reslogger.info("Verified Note updated by : " + user);
		
	}

	public void verifyRatePlanInModal(WebDriver driver, String ratePlanName, ArrayList<String> test_steps) {

		String path = "//div[contains(@data-bind,'irModalPopup')]//span[contains(@data-bind,'ratePlanName')]";
		try {
			Utility.customAssert(driver.findElement(By.xpath(path)).isDisplayed() + "", "true", false,
					"Successfully Verified RatePlanName Displayed : " + ratePlanName,
					"Failed to Verify RatePlanName not Displayed : " + ratePlanName, true, test_steps);

			Utility.customAssert(driver.findElement(By.xpath(path)).getAttribute("innerHTML").toUpperCase(),
					ratePlanName.toUpperCase(), true, "Successfully Verified RatePlanName  : " + ratePlanName,
					"Failed to Verify RatePlanName : " + ratePlanName, true, test_steps);
		} catch (Exception e) {

		}
	}

	public void clickBook(WebDriver driver, ArrayList<String> test_steps) {
		String book = "//div[contains(@class,'status-panel')]//button[text()='Book']";
		Wait.WaitForElement(driver, book);
		Utility.customAssert(driver.findElement(By.xpath(book)).isDisplayed() + "", "true", true,
				"Successfully Verified BOOK Button Visible", "Failed to Verified BOOK Button Visible", true,
				test_steps);
		driver.findElement(By.xpath(book)).click();
		reslogger.info("Clicking on book");
		test_steps.add("Clicking on book");
	}

	public void closeModalPopup(WebDriver driver, ArrayList<String> test_steps) {
		String closePath = "//div[contains(@data-bind,'irModalPopup')]//button[@class='close close-modal']";
		Wait.WaitForElement(driver, closePath);
		Utility.customAssert(driver.findElement(By.xpath(closePath)).isDisplayed() + "", "true", true,
				"Successfully Verified close Button Visible", "Failed to Verified close Button Visible", true,
				test_steps);
		driver.findElement(By.xpath(closePath)).click();
		reslogger.info("Clicking on close");
		test_steps.add("Clicking on close");
	}

	public void verifyBillingAddress(WebDriver driver, String salutationExpected, boolean isSalutationVerify,
			boolean isSalutationExecutionContinue, String firstNameExpected, boolean isFirstNameVerify,
			boolean isFirstNameExecutionContiue, String lastNameExpected, boolean isLastNameVerify,
			boolean isLastNameExecutionContiue, String addressExpected, boolean isAddressVerify,
			boolean isAddressExecutionContiue, String address2Expected, boolean isAddress2Verify,
			boolean isAddress2ExecutionContiue, String address3Expected, boolean isAddress3Verify,
			boolean isAddress3ExecutionContiue, String cityExpected, boolean isCityVerify,
			boolean isCityExecutionContiue, String countryExpected, boolean isCountryVerify,
			boolean isCountryExecutionContiue, String stateExpected, boolean isStateVerify,
			boolean isStateExecutionContiue, String postalCodeExpected, boolean isPostalCodeVerify,
			boolean isPostalCodeExecutionContiue, ArrayList<String> test_steps) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		test_steps.add("********** VERIFY BILLING ADDRESS **********");
		reslogger.info("********** VERIFY BILLING ADDRESS **********");

		Utility.customAssert(res.CP_NewReservation_BillingSalutation.isDisplayed() + "", "true", true,
				"Successfully Verified Salutation Displayed ", "Failed to Verify Salutation not Displayed ", true,
				test_steps);

		Utility.customAssert(
				Utility.getELementText(res.CP_NewReservation_BillingSalutation, true, "title").toUpperCase(),
				salutationExpected.toUpperCase(), isSalutationVerify,
				"Successfully Verified Salutation Matched : " + salutationExpected, "Failed to Verify Salutation ",
				isSalutationExecutionContinue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingFirstName.isDisplayed() + "", "true", true,
				"Successfully Verified First Name Displayed ", "Failed to Verify First Name not Displayed ", true,
				test_steps);

		Utility.customAssert(
				Utility.getELementText(res.CP_NewReservation_BillingFirstName, true, "value").toUpperCase(),
				firstNameExpected.toUpperCase(), isFirstNameVerify,
				"Successfully Verified First Name : " + firstNameExpected, "Failed to Verify First Name : ",
				isFirstNameExecutionContiue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingLastName.isDisplayed() + "", "true", true,
				"Successfully Verified Last Name Displayed ", "Failed to Verify Last Name not Displayed ", true,
				test_steps);

		Utility.customAssert(Utility.getELementText(res.CP_NewReservation_BillingLastName, true, "value").toUpperCase(),
				lastNameExpected.toUpperCase(), isLastNameVerify,
				"Successfully Verified Last Name : " + lastNameExpected, "Failed to Verify Last Name : ",
				isLastNameExecutionContiue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingAddress1.isDisplayed() + "", "true", true,
				"Successfully Verified Address Displayed ", "Failed to Verify Address not Displayed ", true,
				test_steps);

		Utility.customAssert(Utility.getELementText(res.CP_NewReservation_BillingAddress1, true, "value").toUpperCase(),
				addressExpected.toUpperCase(), isAddressVerify, "Successfully Verified Address : " + addressExpected,
				"Failed to Verify Address : ", isAddressExecutionContiue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingAddress2.isDisplayed() + "", "true", true,
				"Successfully Verified Address2 Displayed ", "Failed to Verify Address2 not Displayed ", true,
				test_steps);

		Utility.customAssert(Utility.getELementText(res.CP_NewReservation_BillingAddress2, true, "value").toUpperCase(),
				address2Expected.toUpperCase(), isAddress2Verify,
				"Successfully Verified Address2 : " + address2Expected, "Failed to Verify Address2 : ",
				isAddress2ExecutionContiue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingAddress3.isDisplayed() + "", "true", true,
				"Successfully Verified Address3 Displayed ", "Failed to Verify Address3 not Displayed ", true,
				test_steps);

		Utility.customAssert(Utility.getELementText(res.CP_NewReservation_BillingAddress3, true, "value").toUpperCase(),
				address3Expected.toUpperCase(), isAddress3Verify,
				"Successfully Verified Address3 : " + address3Expected, "Failed to Verify Address3 : ",
				isAddress3ExecutionContiue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingCity.isDisplayed() + "", "true", true,
				"Successfully Verified City Displayed ", "Failed to Verify City not Displayed ", true, test_steps);

		Utility.customAssert(Utility.getELementText(res.CP_NewReservation_BillingCity, true, "value").toUpperCase(),
				cityExpected.toUpperCase(), isCityVerify, "Successfully Verified City : " + cityExpected,
				"Failed to Verify City : ", isCityExecutionContiue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingCountry.isDisplayed() + "", "true", true,
				"Successfully Verified Country Displayed ", "Failed to Verify Country not Displayed ", true,
				test_steps);

		Utility.customAssert(Utility.getELementText(res.CP_NewReservation_BillingCountry, true, "value").toUpperCase(),
				countryExpected.toUpperCase(), isCountryVerify, "Successfully Verified Country : " + countryExpected,
				"Failed to Verify Country : ", isCountryExecutionContiue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingState.isDisplayed() + "", "true", true,
				"Successfully Verified State Displayed ", "Failed to Verify State not Displayed ", true, test_steps);

		Utility.customAssert(Utility.getELementText(res.CP_NewReservation_BillingState, true, "value").toUpperCase(),
				stateExpected.toUpperCase(), isStateVerify, "Successfully Verified State : " + stateExpected,
				"Failed to Verify State : ", isStateExecutionContiue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingPostalCode.isDisplayed() + "", "true", true,
				"Successfully Verified PostalCode Displayed ", "Failed to Verify PostalCode not Displayed ", true,
				test_steps);

		Utility.customAssert(
				Utility.getELementText(res.CP_NewReservation_BillingPostalCode, true, "value").toUpperCase(),
				postalCodeExpected.toUpperCase(), isPostalCodeVerify,
				"Successfully Verified PostalCode : " + postalCodeExpected, "Failed to Verify PostalCode : ",
				isPostalCodeExecutionContiue, test_steps);
	}

	public void verifyGuestInfo(WebDriver driver, String salutationExpected, boolean isSalutationVerify,
			boolean isSalutationExecutionContinue, String contactFirstNameExpected, boolean isContactFirstNameVerify,
			boolean isContactFirstNameExecutionContiue, String contactLastNameExpected, boolean isContactLastNameVerify,
			boolean isContactLastNameExecutionContiue, String addressExpected, boolean isAddressVerify,
			boolean isAddressExecutionContiue, String address2Expected, boolean isAddress2Verify,
			boolean isAddress2ExecutionContiue, String address3Expected, boolean isAddress3Verify,
			boolean isAddress3ExecutionContiue, String cityExpected, boolean isCityVerify,
			boolean isCityExecutionContiue, String countryExpected, boolean isCountryVerify,
			boolean isCountryExecutionContiue, String stateExpected, boolean isStateVerify,
			boolean isStateExecutionContiue, String postalCodeExpected, boolean isPostalCodeVerify,
			boolean isPostalCodeExecutionContiue, ArrayList<String> test_steps) {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		test_steps.add("********** VERIFY GUEST INFO **********");
		reslogger.info("********** VERIFY GUEST INFO **********");

		Utility.customAssert(res.CP_NewReservation_ContactSalutation.isDisplayed() + "", "true", true,
				"Successfully Verified Salutation Displayed ", "Failed to Verify Salutation not Displayed ", true,
				test_steps);

		Utility.customAssert(Utility.getELementText(res.CP_NewReservation_GuestSalutation, true, "title").toUpperCase(),
				salutationExpected.toUpperCase(), isSalutationVerify,
				"Successfully Verified Salutation Matched : " + salutationExpected, "Failed to Verify Salutation ",
				isSalutationExecutionContinue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingFirstName.isDisplayed() + "", "true", true,
				"Successfully Verified First Name Displayed ", "Failed to Verify First Name not Displayed ", true,
				test_steps);

		Utility.customAssert(
				Utility.getELementText(res.CP_NewReservation_BillingFirstName, true, "value").toUpperCase(),
				contactFirstNameExpected.toUpperCase(), isContactFirstNameVerify,
				"Successfully Verified First Name : " + contactFirstNameExpected, "Failed to Verify First Name : ",
				isContactFirstNameExecutionContiue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingLastName.isDisplayed() + "", "true", true,
				"Successfully Verified Last Name Displayed ", "Failed to Verify Last Name not Displayed ", true,
				test_steps);

		Utility.customAssert(Utility.getELementText(res.CP_NewReservation_BillingLastName, true, "value").toUpperCase(),
				contactLastNameExpected.toUpperCase(), isContactLastNameVerify,
				"Successfully Verified Last Name : " + contactLastNameExpected, "Failed to Verify Last Name : ",
				isContactLastNameExecutionContiue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingAddress1.isDisplayed() + "", "true", true,
				"Successfully Verified Address Displayed ", "Failed to Verify Address not Displayed ", true,
				test_steps);

		Utility.customAssert(Utility.getELementText(res.CP_NewReservation_BillingAddress1, true, "value").toUpperCase(),
				addressExpected.toUpperCase(), isAddressVerify, "Successfully Verified Address : " + addressExpected,
				"Failed to Verify Address : ", isAddressExecutionContiue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingAddress2.isDisplayed() + "", "true", true,
				"Successfully Verified Address2 Displayed ", "Failed to Verify Address2 not Displayed ", true,
				test_steps);

		Utility.customAssert(Utility.getELementText(res.CP_NewReservation_BillingAddress2, true, "value").toUpperCase(),
				address2Expected.toUpperCase(), isAddress2Verify,
				"Successfully Verified Address2 : " + address2Expected, "Failed to Verify Address2 : ",
				isAddress2ExecutionContiue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingAddress3.isDisplayed() + "", "true", true,
				"Successfully Verified Address3 Displayed ", "Failed to Verify Address3 not Displayed ", true,
				test_steps);

		Utility.customAssert(Utility.getELementText(res.CP_NewReservation_BillingAddress3, true, "value").toUpperCase(),
				address3Expected.toUpperCase(), isAddress3Verify,
				"Successfully Verified Address3 : " + address3Expected, "Failed to Verify Address3 : ",
				isAddress3ExecutionContiue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingCity.isDisplayed() + "", "true", true,
				"Successfully Verified City Displayed ", "Failed to Verify City not Displayed ", true, test_steps);

		Utility.customAssert(Utility.getELementText(res.CP_NewReservation_BillingCity, true, "value").toUpperCase(),
				cityExpected.toUpperCase(), isCityVerify, "Successfully Verified City : " + cityExpected,
				"Failed to Verify City : ", isCityExecutionContiue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingCountry.isDisplayed() + "", "true", true,
				"Successfully Verified Country Displayed ", "Failed to Verify Country not Displayed ", true,
				test_steps);

		Utility.customAssert(Utility.getELementText(res.CP_NewReservation_BillingCountry, true, "value").toUpperCase(),
				countryExpected.toUpperCase(), isCountryVerify, "Successfully Verified Country : " + countryExpected,
				"Failed to Verify Country : ", isCountryExecutionContiue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingState.isDisplayed() + "", "true", true,
				"Successfully Verified State Displayed ", "Failed to Verify State not Displayed ", true, test_steps);

		Utility.customAssert(Utility.getELementText(res.CP_NewReservation_BillingState, true, "value").toUpperCase(),
				stateExpected.toUpperCase(), isStateVerify, "Successfully Verified State : " + stateExpected,
				"Failed to Verify State : ", isStateExecutionContiue, test_steps);

		Utility.customAssert(res.CP_NewReservation_BillingPostalCode.isDisplayed() + "", "true", true,
				"Successfully Verified PostalCode Displayed ", "Failed to Verify PostalCode not Displayed ", true,
				test_steps);

		Utility.customAssert(
				Utility.getELementText(res.CP_NewReservation_BillingPostalCode, true, "value").toUpperCase(),
				postalCodeExpected.toUpperCase(), isPostalCodeVerify,
				"Successfully Verified PostalCode : " + postalCodeExpected, "Failed to Verify PostalCode : ",
				isPostalCodeExecutionContiue, test_steps);
	}

	public boolean verifyPaymentDetailsNotRetailed(WebDriver driver, ArrayList<String> test_steps) {
		String paydetails = "//h4[text()='Take Payment']/../..//label[text()='PAYMENT METHOD']/..//button/span";
		Wait.WaitForElement(driver, paydetails);
		String text = driver.findElement(By.xpath(paydetails)).getText();
		if (text.equalsIgnoreCase("--Select--")) {
			return true;
		} else {
			return false;
		}

	}

	public ArrayList<String> enter_GuestNameCopy(WebDriver driver, ArrayList<String> test_steps, String Salutation,
			String GuestFirstName,

			String GuestLastName) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		verifySpinerLoading(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestSalutation);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CP_NewReservation_GuestSalutation), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_GuestSalutation), driver);
		Utility.ScrollToElement(res.CP_NewReservation_GuestSalutation, driver);
		res.CP_NewReservation_GuestSalutation.click();
		String sal = "(//span[contains(text(),'" + Salutation + "')]/../..)[3]";
		Utility.app_logs.info("sal: " + sal);
		Wait.WaitForElement(driver, sal);
		driver.findElement(By.xpath(sal)).click();

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
		res.CP_NewReservation_GuestFirstName.clear();
		res.CP_NewReservation_GuestFirstName.sendKeys(GuestFirstName);
		test_steps.add("Guest First Name : <b>" + GuestFirstName + "</b>");
		reslogger.info("Guest First Name : <b>" + GuestFirstName + "</b>");

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);
		res.CP_NewReservation_GuestLastName.clear();
		res.CP_NewReservation_GuestLastName.sendKeys(GuestLastName);
		test_steps.add("Guest Last Name : <b>" + GuestLastName + "</b>");
		reslogger.info("Guest Last Name : <b>" + GuestLastName + "</b>");
		res.CP_NewReservation_GuestLastName.sendKeys(Keys.TAB);
		return test_steps;
	}

	public String getText(WebDriver driver) {

		driver.findElement(By.xpath(
				"(//input[@data-bind = 'enable: EnableSelectAll, checked: SelectAllReservations, visible: !IsInsideReservationPicker()'])[1]"))
				.click();

		String pathString = "//i[contains(@class,'fa-exclamation-triangle')]";
		System.out.print("Path Text" + driver.findElement(By.xpath(pathString)).getText());
		return driver.findElement(By.xpath(pathString)).getText().trim();
	}

	public ArrayList<String> cancelPaymentCalculationsNew(ArrayList<String> baseAmount, ArrayList<String> totalNights,
			String policyChargestype, String attribute, String attributeValue) {
		DecimalFormat df = new DecimalFormat("0.00");
		df.setMaximumFractionDigits(2);
		ArrayList<String> roomCharges = new ArrayList<>();
		ArrayList<String> amountDetails = new ArrayList<>();
		double amountToDeduct = 0.00;
		reslogger.info("Base Amount: " + baseAmount);
		for (int i = 0; i < baseAmount.size(); i++) {
			roomCharges
					.add(df.format((Double.parseDouble(baseAmount.get(i))) * (Double.parseDouble(totalNights.get(i)))));
		}
		reslogger.info("Room Charges: " + roomCharges);

		if (policyChargestype.equalsIgnoreCase("percent of stay")) {
			reslogger.info("In if");
			for (int i = 0; i < roomCharges.size(); i++) {
				reslogger.info("Room charge: " + roomCharges.get(i));
				double abc = (Double.parseDouble(roomCharges.get(i))) * (Double.parseDouble(attributeValue));
				reslogger.info("Per: " + abc);
				double perc = abc / 100;
				amountToDeduct = amountToDeduct + perc;
			}
		} else if (policyChargestype.equalsIgnoreCase("flat fee")) {
			for (int i = 0; i < baseAmount.size(); i++) {
				amountToDeduct = amountToDeduct + (Double.parseDouble(attributeValue));
			}
		} else if (attribute.equalsIgnoreCase("First Night")) {
			for (int i = 0; i < baseAmount.size(); i++) {
				amountToDeduct = amountToDeduct + Double.parseDouble(baseAmount.get(i));
			}
		}
//		if (attribute.equalsIgnoreCase("Room Charges")) {
//			reslogger.info("In if");
//			for (int i = 0; i < roomCharges.size(); i++) {
//				reslogger.info("Room charge: "+roomCharges.get(i));
//				double abc = (Double.parseDouble(roomCharges.get(i))) * (Double.parseDouble(attributeValue));
//				reslogger.info("Per: "+abc);
//				double perc = abc / 100;
//				amountToDeduct = amountToDeduct + perc;
//			}
//		} else if (attribute.equalsIgnoreCase("First Night")) {
//			for (int i = 0; i < baseAmount.size(); i++) {
//				amountToDeduct = amountToDeduct + Double.parseDouble(baseAmount.get(i));
//			}
//		}
		amountDetails.add(df.format(amountToDeduct));
		return amountDetails;
	}

	public void verifyCancelPolicyFeeOverride(WebDriver driver, String overrideAmount, ArrayList<String> test_steps)
			throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait5Second();
		assertEquals(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.isEnabled(), true,
				"Failed - Cancellation Policy fee amount text box is not enabled to override amount");
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.click();
		// res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.clear();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Keys.BACK_SPACE);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Keys.BACK_SPACE);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Keys.BACK_SPACE);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Keys.BACK_SPACE);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Keys.BACK_SPACE);
		reslogger.info("Cleared CancellationPolicy amount");
		Wait.wait3Second();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(overrideAmount);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Keys.TAB);
		reslogger.info("Enter override aount: " + overrideAmount);
		assertEquals(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText().replace(".00", ""),
				overrideAmount, "Failed to verify override Cancellation policy fee amount");
		reslogger.info("Successfully verified override Cancellation policy fee");
		test_steps.add("Successfully verified override Cancellation policy fee");
	}

	public void verifyCheckInPolicyAmountOverride(WebDriver driver, String overrideAmount, ArrayList<String> test_steps)
			throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.wait10Second();
		// Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_OverrideCheckInAmountCheckBox),
		// driver);
		Utility.clickThroughAction(driver, res.CP_OverrideCheckInAmountCheckBox);
		test_steps.add(" Checked Override Check-In Amount Check Box");
		reslogger.info(" Checked Override Check-In Amount Check Box");
		assertEquals(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.isEnabled(), true,
				"Failed - CheckIn Policy amount text box is not enabled to override amount");
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.click();
		// res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.clear();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Keys.BACK_SPACE);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Keys.BACK_SPACE);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Keys.BACK_SPACE);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Keys.BACK_SPACE);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Keys.BACK_SPACE);
		reslogger.info("Cleared CheckIn amount");
		Wait.wait3Second();
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Keys.chord(Keys.CONTROL, "a"));
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(overrideAmount);
		res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.sendKeys(Keys.TAB);
		reslogger.info("Enter override aount: " + overrideAmount);
		assertEquals(res.CP_Reservation_NoShowPaymentPopup_NoShowPaymentPopupAmount.getText().replace(".00", ""),
				overrideAmount, "Failed to verify override CheckIn policy amount");
		reslogger.info("Successfully verified override CheckIn policy amount");
		test_steps.add("Successfully verified override CheckIn policy amount");
	}

	public void changeReservationStayDetailsWithPolicies(WebDriver driver, ArrayList test_steps, String checkinDate,
			String checkoutDate, String adults, String children, String ratePlanName, String ratePlanPromoCode,
			String recalculateOption, String roomClass, String isChangePolicy) throws Exception {

		ClickEditStayInfo(driver, test_steps);
		ClickStayInfo_ChangeDetails(driver, test_steps);
		try {
			Wait.waitForElementToBeVisibile(By.xpath("//div[contains(@id,'rcDtails')]"), driver);
		} catch (Exception e) {
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CP_NewReservation_CheckinCal), driver);
		}

		select_CheckInDate(driver, test_steps, checkinDate);
		select_CheckoutDate(driver, test_steps, checkoutDate);
		enter_Adults(driver, test_steps, adults);
		enter_Children(driver, test_steps, children);
		select_Rateplan(driver, test_steps, ratePlanName, ratePlanPromoCode);
		VerifyFoliocalculateRate(driver, test_steps, recalculateOption);
		clickOnFindRooms(driver, test_steps);
		// select_RoomWhileChnageDates(driver, test_steps, roomClass, "Yes", "");
		// select_Roomm(driver, test_steps, roomClass, "Yes", "");
		selectRoom(driver, roomClass, "Yes");

		try {
			String changePolicy = "//*[contains(text(),'Would you like to update the reservation to the new policies?')]/../..//button[text()='"
					+ isChangePolicy + "']";
			Wait.waitForElementToBeClickable(By.xpath(changePolicy), driver, 20);
			driver.findElement(By.xpath(changePolicy)).click();
			reslogger.info("Clicked on " + isChangePolicy + " on policy change Popup");
		} catch (Exception e) {
			reslogger.info(e.toString());
		}

		String save = "//button[text()='Save']";
		Wait.WaitForElement(driver, save);
		driver.findElement(By.xpath(save)).click();
		reslogger.info("Clicking on save");
		test_steps.add("Clicking on save");

		test_steps.add("===Verifying Pop up display dialog for Cost change===");
		reslogger.info("===Verifying Pop up display dialog for Cost change===");
		String yes = "//div[contains(text(),'Are you sure you wish to change the total cost of the stay from')]/..//button[text()='Yes']";
		try {
			Wait.WaitForElement(driver, yes);
			Wait.waitForElementToBeVisibile(By.xpath(yes), driver);
			driver.findElement(By.xpath(yes)).click();
		} catch (Exception e) {
//			Wait.WaitForElement(driver, yes);
//			Wait.waitForElementToBeVisibile(By.xpath(yes), driver);
//			driver.findElement(By.xpath(yes)).click();
		}
		Wait.wait5Second();
	}

	public void verifyCancellationPolicyDropDown(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
//		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.cancelPolicyCollapseInDetailsTab), driver, 20);
//		res.cancelPolicyCollapseInDetailsTab.click();
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.cancelPolicyNameInDetailsTab), driver);
		assertTrue(res.cancelPolicyNameInDetailsTab.getAttribute("class").contains("disabled"),
				"Failed, Policy dropdown is not disabled");
		test_steps.add("<b>Successfully verified policy dropdown is disabled</b>");
	}

	public void verifyNoShowPolicyDropDownNoEdit(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.noShowPolicyDisclaimersTab), driver);
		res.noShowPolicyDisclaimersTab.click();

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.noShowPolicyDropdownInDetailsTab), driver);
		assertTrue(res.noShowPolicyDropdownInDetailsTab.getAttribute("class").contains("disabled"),
				"Failed, Policy dropdown is not disabled");
		test_steps.add("<b>Successfully verified policy dropdown is disabled and not able to edit</b>");
	}

	public void verifyNoShowPolicyDropDownEdit(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.noShowPolicyDisclaimersTab), driver);
		res.noShowPolicyDisclaimersTab.click();

		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.noShowPolicyDropdownInDetailsTab), driver);
		assertTrue(res.noShowPolicyDropdownInDetailsTab.isEnabled(),
				"Failed, Policy dropdown is not enabled and not able to edit");
		test_steps.add("<b>Successfully verified policy dropdown is enabled and able to edit</b>");
	}

	public void selectPolicyFromPolicyDisclaimersTab(WebDriver driver, String policyName, String policyText,
			ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.noShowPolicyDropdownInDetailsTab), driver);
		res.noShowPolicyDropdownInDetailsTab.click();

		String policySelect = "//span[text()='" + policyName + "']";
		Wait.WaitForElement(driver, policySelect);
		driver.findElement(By.xpath(policySelect)).click();
		String saveButton = "//label[text()='No show Policy']/../../../..//button[text()='Save']";
		Wait.waitForElementToBeClickable(By.xpath(saveButton), driver);
		driver.findElement(By.xpath(saveButton)).click();
		Wait.wait5Second();
		verifyNoShowPolicy(driver, test_steps, policyName, policyText);
	}

	public void verifyPostCancellationFeeCheckbox(WebDriver driver, ArrayList<String> test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.cancelResPopupPostCancelFeeCheckBoxClick), driver,
					20);
			Assert.assertTrue(res.cancelResPopupPostCancelFeeCheckBox.isEnabled(),
					"Failed Post Cancellation Fee checkbox is not enabled");
		} catch (Exception e) {
			reslogger.info("Failed Post Cancellation Fee checkbox is not found Cancellation popup");
			test_steps.add("AssertionError Failed Post Cancellation Fee checkbox is not found Cancellation popup");
			Assert.assertTrue(false, "Failed to validate Post Cancellation Fee checkbox");
		}
	}

	public String MBR_Reservation_CheckBox_HoverText(WebDriver driver, ArrayList<String> Steps)
			throws InterruptedException {
		String xpathV = "(//td[@class = 'ir-cursor-pointer bulkActionCheckbox']))[1]";
		Wait.wait10Second();
		Wait.WaitForElement(driver, xpathV);
		Wait.wait5Second();
		Actions action = new Actions(driver);
		Steps.add("Checking CheckBox Disablity");
		Steps.add("Click On CheckBox");
		Steps.add("CheckBox is Disable");
		WebElement btn = driver.findElement(By.xpath(xpathV));
		action.moveToElement(btn).build().perform();
		Wait.WaitForElement(driver, "//div[(@class = 'popover-content')]");
		Wait.waitForElementToBeClickable(By.xpath("//div[(@class = 'popover-content')]"), driver);
		WebElement toolTipElement = driver.findElement(By.xpath("//div[(@class = 'popover-content')]"));
		String toolTipText = toolTipElement.getText().toLowerCase();
		System.out.print("\n\n\n" + toolTipText + "\n\n\n");
		Steps.add("Actual Text: " + toolTipText);
		return toolTipText;
	}

	public void verifyCheckInConfirmDetailsPaymentPopupIsAppeared_U(WebDriver driver, String TripBalance,
			String PolicyName, ArrayList<String> test_steps) throws Exception {
		try {

			Wait.waitForElementToBeVisibile(
					By.xpath(OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggle), driver);
			if (driver.findElement(By.xpath(OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggle))
					.isDisplayed()) {
				disableGenerateGuestReportToggle(driver, test_steps);

				try {
					clickOnProceedToCheckInPaymentButton_2(driver, test_steps);
				} catch (Exception e) {
					e.printStackTrace();
					checkInProcess(driver, test_steps);
				}

				try {
					Wait.waitForToasterToBeVisibile(By.xpath("//*[@id='toast-container']//div[@class='toast-title']"),
							driver);
					String msg = Utility.getELementText(
							driver.findElement(By.xpath("//*[@id='toast-container']//div[@class='toast-title']")),
							false, "innerHTML");
					if (msg.toUpperCase().contains("FAIL")) {
						try {
							try {
								clickOnProceedToCheckInPaymentButton_2(driver, test_steps);
							} catch (Exception e) {
								e.printStackTrace();
								checkInProcess(driver, test_steps);
							}
						} catch (Exception e) {

						}
					}
				} catch (Exception e) {
					System.out.println("no toast");
				}

				clickOnDirtyPopUp(driver, test_steps);

				PopupVerification(driver, test_steps, PolicyName, TripBalance);
				verifySpinerLoading(driver);
				clickOnPayButtonOnPaymentPopup(driver, test_steps);
				verifySpinerLoading(driver);
				SuccessPopupVerification(driver, test_steps, PolicyName, TripBalance);
				verifySpinerLoading(driver);
				checkInPaymentSuccessPopupClose_U(driver, test_steps);
				verifySpinerLoading(driver);
			} else {
				test_steps.add("checkin pop not avilable");
				reslogger.info("checkin pop not avilable");

			}
		} catch (Exception e) {
			e.printStackTrace();
			test_steps.add("Exception: checkin pop not avilable");
			reslogger.info("Exception: checkin pop not avilable");
		}
		Wait.wait3Second();

	}

	public String checkoutReservationNobutton(WebDriver driver, ArrayList<String> test_steps, String total_Balance)
			throws Exception {
		String checkout = "(//button[text()='Check Out'])[1]";
		Wait.WaitForElement(driver, checkout);
		Wait.waitForElementToBeClickable(By.xpath(checkout), driver);
		driver.findElement(By.xpath(checkout)).click();
		reslogger.info("click on check out");
		test_steps.add("click on check out");

		reslogger.info("*************Verify No Button*************");
		test_steps.add("*************Verify No Button*************");

		String NoButtonxpath = "(//button[contains(@class,'btn btn-warning ir-btn cp-confirmation-no ir-mb-btn-block ng-data-trim') and contains(text(),'No') ])[2]";
		Wait.WaitForElement(driver, NoButtonxpath);
		Wait.waitForElementToBeClickable(By.xpath(NoButtonxpath), driver);
		driver.findElement(By.xpath(NoButtonxpath)).click();
		reslogger.info("Clicking On No Button");
		test_steps.add("Clicking On No Button");

		disableGenerateGuestReportToggle(driver, test_steps);

		String proceedButtonxpath = "//button[@data-bind = 'click: checkOutDetail.onConfirmClick']";
		Wait.WaitForElement(driver, proceedButtonxpath);
		Wait.waitForElementToBeClickable(By.xpath(proceedButtonxpath), driver);
		driver.findElement(By.xpath(proceedButtonxpath)).click();
		test_steps.add("Clicking on  Proceed to Check-In Payment Button");
		reslogger.info("Clicking on Proceed to Check-In Payment Button");

		String popHeadingxpath = "(//h4[contains(text(),'Check Out Payment') ])";
		Wait.WaitForElement(driver, popHeadingxpath);
		String textString = driver.findElement(By.xpath(popHeadingxpath)).getText();
		test_steps.add("Checkout Payment PopUp Heading verified: " + textString);
		reslogger.info("Checkout Payment PopUp Heading verified: " + textString);

		String popBalanceID = "payFormAmountV2";
		Wait.WaitForElement_ID(driver, popBalanceID);
		Wait.waitForElementToBeClickable(By.id(popBalanceID), driver);
		String PopupBalance = driver.findElement(By.id(popBalanceID)).getAttribute("value");
		test_steps.add("Checkout Payment PopUp Balance verified: " + PopupBalance);
		reslogger.info("Checkout Payment PopUp Balance verified: " + PopupBalance);

		String payButtonxpath = "//button[contains(text(),'Pay $ " + PopupBalance + "')]";
		Wait.WaitForElement(driver, payButtonxpath);
		Wait.waitForElementToBeClickable(By.xpath(payButtonxpath), driver);
		driver.findElement(By.xpath(payButtonxpath)).click();
		test_steps.add("Click On Pay Button");
		reslogger.info("Click On Pay Button");

		String closeButtonxpath = "//button[@data-bind='click: checkOutDetail.closeModal']";
		Wait.WaitForElement(driver, closeButtonxpath);
		Wait.waitForElementToBeClickable(By.xpath(closeButtonxpath), driver);
		driver.findElement(By.xpath(closeButtonxpath)).click();
		test_steps.add("Click On Close Button");
		reslogger.info("Click On Close Button");

		test_steps.add("Balance Verified: " + PopupBalance);
		reslogger.info("Balance Verified: " + PopupBalance);

		test_steps.add("Verified: With No Option Only Primary User Amount verified");

		return PopupBalance;

	}

	public void PopupVerification(WebDriver driver, ArrayList<String> test_steps, String PolicyName, String TripBalance)
			throws InterruptedException {
		String pathOfPayment = "//h4[text()='Check In Payment']";
		Wait.WaitForElement(driver, pathOfPayment);
		Wait.waitForElementToBeClickable(By.xpath(pathOfPayment), driver);
		Wait.wait1Second();
		String getpathOfPayment = driver.findElement(By.xpath(pathOfPayment)).getText();
		System.out.print("\n\n" + getpathOfPayment);
		test_steps.add("Expexted Heading: " + getpathOfPayment);
		test_steps.add("Actual Heading: " + getpathOfPayment);
		test_steps.add("Verified Popup Name: " + getpathOfPayment);

		String pathOfPolicy = "//span[text()='Policy:']//following-sibling::span";
		Wait.WaitForElement(driver, pathOfPolicy);
		Wait.waitForElementToBeClickable(By.xpath(pathOfPolicy), driver);
		Wait.wait2Second();
		String getPolicyName = driver.findElement(By.xpath(pathOfPolicy)).getText();
		if (!getPolicyName.equalsIgnoreCase(PolicyName)) {
			Wait.wait10Second();
			getPolicyName = driver.findElement(By.xpath(pathOfPolicy)).getText();
		}
		System.out.print("\n\n" + getPolicyName);
		Assert.assertEquals(getPolicyName, PolicyName, "Failed: to Verify Policy Name");
		test_steps.add("Expected Policy Name: " + PolicyName);
		test_steps.add("Actual Policy Name: " + getPolicyName);
		test_steps.add("Verified Policy Name: " + getPolicyName);

		String pathofAmountID = "payFormAmountV2";
		Wait.wait1Second();
		String getPolicyAmount = driver.findElement(By.id(pathofAmountID)).getText();
		System.out.print("\n\n" + getPolicyAmount);
		Assert.assertEquals(String.valueOf(Double.valueOf(getPolicyAmount)), TripBalance,
				"Failed: to Verify Policy Name");
		test_steps.add("Expected CheckIn Amount: " + TripBalance);
		test_steps.add("Actual CheckIn Amount: " + getPolicyAmount);
		test_steps.add("Verified CheckIn Amount: " + getPolicyAmount);

		String pathofType = "(//label[text()='TYPE']//..//span)[2]";
//		Wait.WaitForElement(driver, pathofType);
		Wait.wait1Second();
		String getPolicyTypeString = driver.findElement(By.xpath(pathofType)).getText();
		System.out.print("\n\n" + getPolicyTypeString);

		Assert.assertEquals(getPolicyTypeString, "Authorization Only", "Failed: to Verify Policy Name");
		test_steps.add("Expected Type: " + "Authorization Only");
		test_steps.add("Actual Type: " + getPolicyTypeString);
		test_steps.add("Verified Type: " + getPolicyTypeString);

	}

	public void SuccessPopupVerification(WebDriver driver, ArrayList<String> test_steps, String PolicyName,
			String TripBalance) throws InterruptedException {
		// Status Popup Verification
		String popupHeadingxpath = "//h4[text()='Check-In Successful']";
		Wait.WaitForElement(driver, popupHeadingxpath);
		Wait.waitForElementToBeClickable(By.xpath(popupHeadingxpath), driver);
		Wait.wait1Second();
		String getpopupHeading = driver.findElement(By.xpath(popupHeadingxpath)).getText();
		test_steps.add("Expected Heading: " + getpopupHeading);
		test_steps.add("Actual Heading: " + getpopupHeading);
		test_steps.add("Verified Successful Popup: " + getpopupHeading);

		String popupPolicyNamexpath = "((//span[contains(text(),'Policy:')])[last()]//following-sibling::span)[1]";
		Wait.WaitForElement(driver, popupPolicyNamexpath);
		Wait.waitForElementToBeClickable(By.xpath(popupPolicyNamexpath), driver);
		Wait.wait1Second();
		String getpopupPolicyName = driver.findElement(By.xpath(popupPolicyNamexpath)).getText();
		Assert.assertEquals(getpopupPolicyName, PolicyName);

		test_steps.add("Expected Policy Name: " + PolicyName);
		test_steps.add("Actual Policy Name: " + getpopupPolicyName);
		test_steps.add("Verified Policy Name: " + getpopupPolicyName);

		String popupPolicyAmountxpath = "//span[@data-bind = 'showInnroadCurrency: { value: checkInDetail.PaymentAmount, ShouldShowNegativeAsBracket: true }']";
		Wait.wait1Second();
		String getpopupPolicyAmount = String.valueOf(Double
				.valueOf(driver.findElement(By.xpath(popupPolicyAmountxpath)).getText().replace("$", " ").trim()));
		Assert.assertEquals(getpopupPolicyAmount, TripBalance, "Failed: to verify Trip Amount ");
		test_steps.add("Expected CheckIn Amount: " + TripBalance);
		test_steps.add("Actual CheckIn Amount: " + getpopupPolicyAmount);
		test_steps.add("Verified CheckIn Amount: " + getpopupPolicyAmount);

		String popupPolicyTypexpath = "//span[@data-bind = 'text : checkInDetail.PaymentAuthTypeText']";
		Wait.WaitForElement(driver, popupPolicyTypexpath);
		Wait.waitForElementToBeClickable(By.xpath(popupPolicyTypexpath), driver);
		Wait.wait1Second();
		String getpopupPolicyType = driver.findElement(By.xpath(popupPolicyTypexpath)).getText();
		Assert.assertEquals(getpopupPolicyType, "Authorization Only", "Failed: to Verify Policy Name");
		test_steps.add("Expected Type: " + "Authorization Only");
		test_steps.add("Actual Type: " + getpopupPolicyType);
		test_steps.add("Verified Type: " + getpopupPolicyType);

	}

	public void VerifyinHouseStatus(WebDriver driver, ArrayList<String> test_steps) {

		String InHouseVerifyxpath = "//span[@data-bind = 'text:reservationViewStatuses.titleLineStatus']";
		Wait.WaitForElement(driver, InHouseVerifyxpath);
		String getInHouseVerify = driver.findElement(By.xpath(InHouseVerifyxpath)).getText();
		Assert.assertEquals(getInHouseVerify.toLowerCase(), "in-house", "Failed: To Verify In House Status");
		test_steps.add("Expected Reservation Status: " + "IN-HOUSE");
		test_steps.add("Actual Reservation Status: " + getInHouseVerify);
		test_steps.add("Verified Reservation Status: " + getInHouseVerify);

	}

	public void verifyIncidentalsLineItemTaxAndAmount(WebDriver driver, String description, String expectedAmount,
			String tax, ArrayList<String> test_steps) {
		if (Utility.validateString(tax)) {
			String path = "(//td[contains(text(),'" + description + "')]/following-sibling::td[3])";
			reslogger.info(path);
			String foundAmount = driver.findElement(By.xpath(path)).getText();
			reslogger.info(foundAmount);
			foundAmount = Utility.convertDollarToNormalAmount(driver, foundAmount);
			reslogger.info(foundAmount);
			assertEquals(Utility.convertDecimalFormat(foundAmount), Utility.convertDecimalFormat(tax),
					"Failed to verify Incidentals Line Item Tax" + description + " Amount");
			test_steps.add("Successfully Verified Incidental Line Item Tax" + description + " Tax : " + tax);
			reslogger.info("Successfully Verified Incidental Line Item Tax" + description + " Tax : " + tax);
		} else if (Utility.validateString(expectedAmount)) {
			String path = "(//td[contains(text(),'" + description + "')]/following-sibling::td[4])";
			reslogger.info(path);
			String foundAmount = driver.findElement(By.xpath(path)).getText();
			reslogger.info(foundAmount);
			foundAmount = Utility.convertDollarToNormalAmount(driver, foundAmount);
			reslogger.info(foundAmount);
			assertEquals(Utility.convertDecimalFormat(foundAmount), Utility.convertDecimalFormat(expectedAmount),
					"Failed to verify Incidentals Line Item Tax" + description + " Amount");
			test_steps.add(
					"Successfully Verified Incidental Line Item Tax" + description + " Amount : " + expectedAmount);
			reslogger.info(
					"Successfully Verified Incidental Line Item Tax" + description + " Amount : " + expectedAmount);
		}
	}

	public void departedReservation2(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		try {
			elementReservation.CP_Reservation_CheckOutAllButton.click();
			List<WebElement> buttonYes = driver.findElements(By.xpath("//button[contains(text(),'Yes')]"));
			Utility.clickThroughJavaScript(driver, buttonYes.get(buttonYes.size() - 1));

		} catch (Exception e) {
			System.err.println("line 68956");
			elementReservation.CheckOut.click();
		}
		testSteps.add("Click checkout all button");
		try {
			Wait.WaitForElement(driver, "//div[contains(text(), 'remaining')]//following::div//button[text()='Yes']");
			Utility.clickThroughJavaScript(driver, driver.findElement(
					By.xpath("//div[contains(text(), 'remaining')]//following::div//button[text()='Yes']")));
		} catch (Exception e) {
			reslogger.info("In ctach : 68964");

		}

		generatGuestReportToggle(driver, testSteps, "No");

		Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(OR_Reservation.ProceedToCheckOutPayment)));

		try {
			// elementReservation.Log.click();
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.Log), driver, 20);
			Utility.clickThroughJavaScript(driver, elementReservation.Log);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelledClose), driver);
			elementReservation.CancelledClose.click();
			reslogger.info("Cancel/Close Clicked");
			testSteps.add("Cancel/Close Clicked");
		} catch (Exception e) {
			try {
				driver.findElement(By.xpath(OR_Reservation.NoShowPaymentPopup_LogANDPayButton))
						// "//button[contains(text(),'Pay') and contains(@data-bind,'click:
						// PaymentProcessButtonClick')]"))
						.click();
				verifySpinerLoading(driver);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelledClose), driver);
				elementReservation.CancelledClose.click();
				reslogger.info("Cancel/Close Clicked");
				testSteps.add("Cancel/Close Clicked");
			} catch (Exception e1) {
				e.printStackTrace();
			}
		}

		String s7 = elementReservation.ReservationCurrentStatus.getText();

		if (s7.isEmpty()) {
			driver.navigate().refresh();
			Wait.wait10Second();
			s7 = elementReservation.ReservationCurrentStatus.getText();
		}

		testSteps.add("=== Verify Status changed to 'Departed' ===");
		Assert.assertEquals(s7, "DEPARTED", "Failed: Reservation didn't match after checkout");
		testSteps.add("Verified Status changed to 'Departed'.");
	}

	public void clickFolioPayButton(WebDriver driver, ArrayList<String> testSteps) {
		String xpath = "(//button[contains(text(),'Pay')])[2]";
		Wait.WaitForElement(driver, xpath);
		driver.findElement(By.xpath(xpath)).click();
		testSteps.add("Click On Pay Button");
	}

	public void postLineItem(WebDriver driver, ArrayList test_steps, String LineItemCategory)
			throws InterruptedException {
		test_steps.add("******************* Post Line Item to folio**********************");
		reslogger.info("******************* Post Line Item to folio**********************");

		Elements_CPReservation ReservationPage = new Elements_CPReservation(driver);
		String line = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory + "'])";

		String input = "(//td[@class='lineitem-category']/span[text()='" + LineItemCategory
				+ "'])/../preceding-sibling::td//i[contains(@data-bind,'PendingToPosted')]";
		Wait.WaitForElement(driver, input);
		System.out.println(input);
		String src = driver.findElement(By.xpath(input)).getAttribute("data-bind");
		Utility.app_logs.info(src);
		if (src.contains("PendingToPosted")) {
			test_steps.add("LineitemCategory " + LineItemCategory + " folio line item status PendingToPosted");
			reslogger.info("LineitemCategory " + LineItemCategory + " folio line item status PendingToPosted");
		}

		driver.findElement(By.xpath(input)).click();
		test_steps.add("Click the post line item for " + LineItemCategory);
		reslogger.info("Click the post line item for " + LineItemCategory);

		// String saveFolio =
		// "//div[contains(@data-bind,'Folio')]//button[text()='Save']";
		String saveFolio = "//button[contains(@data-bind,'IsReservationDetailSaving')]";
		Wait.wait2Second();
		Wait.WaitForElement(driver, saveFolio);
		driver.findElement(By.xpath(saveFolio)).click();
		test_steps.add("Click on Save Folio");
		reslogger.info("Click on Save Folio");
		String loading = "(//div[@class='ir-loader-in'])";
		int count = 0;
		while (true) {
			if (!driver.findElement(By.xpath(loading)).isDisplayed()) {
				break;
			} else if (count == 20) {
				break;
			} else {
				count++;
				Wait.wait2Second();
			}
		}
		Utility.app_logs.info("Waited to loading symbol");

	}

	public void verifyCheckInConfirmDetailsPaymentPopupIsAppeared(WebDriver driver, ArrayList<String> test_steps)
			throws Exception {
		try {

			Wait.waitForElementToBeVisibile(
					By.xpath(OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggle), driver);
			if (driver.findElement(By.xpath(OR_Reservation.CP_Reservation_CheckIn_GuestRegistrationReportToggle))
					.isDisplayed()) {
				disableGenerateGuestReportToggle(driver, test_steps);

				try {
					clickOnProceedToCheckInPaymentButton(driver, test_steps);
				} catch (Exception e) {
					clickOnConfirmCheckInButton(driver, test_steps);
				}
//				clickOnProceedToCheckInPaymentButton(driver, test_steps);

				clickOnDirtyPopUp(driver, test_steps);

				clickOnPayButtonOnPaymentPopup(driver, test_steps);

				checkInPaymentSuccessPopupClose_U(driver, test_steps);
			} else {
				test_steps.add("checkin pop not avilable");
				reslogger.info("checkin pop not avilable");

			}
		} catch (Exception e) {
			e.printStackTrace();
			test_steps.add("Exception: checkin pop not avilable");
			reslogger.info("Exception: checkin pop not avilable");
		}
		Wait.wait3Second();

	}

	public void VerifyFolioDetailsAfterCheckOutAll(WebDriver driver, ArrayList<String> testSteps)
			throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		try {

			elementReservation.CP_Reservation_CheckOutAllButton.click();
			List<WebElement> buttonYes = driver.findElements(By.xpath("//button[contains(text(),'Yes')]"));
			buttonYes.get(buttonYes.size() - 1).click();
			String poptextxpath = "//div[@class='modal-body' and text()='Are you sure you want to check-out all rooms at once? The Primary Guest will be responsible for all remaining Guest Charges.']";
			String popuptext = driver.findElement(By.xpath(poptextxpath)).getText();

		} catch (Exception e) {
			elementReservation.CheckOut.click();
		}
		testSteps.add("Click checkout all button");

		try {
			Wait.WaitForElement(driver,
					"//div[contains(text(), 'remaining charges against the primary')]//following::div//button[text()='Yes']");
			driver.findElement(By.xpath(
					"//div[contains(text(), 'remaining charges against the primary')]//following::div//button[text()='Yes']"))
					.click();
		} catch (Exception e) {
			reslogger.info("In ctach");

		}

		String popupCheckOutHeadingxpath = "//h4[@data-bind = 'text: checkOutDetail.checkOutTitle;']";
		String popupCheckOutHeading = driver.findElement(By.xpath(popupCheckOutHeadingxpath)).getText();

		testSteps.add("Expected Pop up Heading: " + popupCheckOutHeading.toLowerCase());
		testSteps.add("Actual Pop up Heading: " + "check out");

		Assert.assertEquals(popupCheckOutHeading.toLowerCase(), "check out", "Failed: Pop up heading mismatched");
		testSteps.add("Verified: Check out Model Displayed");

		generatGuestReportToggle(driver, testSteps, "No");

		Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(OR_Reservation.ProceedToCheckOutPayment)));

		try {
			// elementReservation.Log.click();
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.Log), driver, 20);
			Utility.clickThroughJavaScript(driver, elementReservation.Log);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelledClose), driver);
			elementReservation.CancelledClose.click();
		} catch (Exception e) {
			try {
				driver.findElement(By.xpath(OR_Reservation.NoShowPaymentPopup_LogANDPayButton))
						// "//button[contains(text(),'Pay') and contains(@data-bind,'click:
						// PaymentProcessButtonClick')]"))
						.click();
				verifySpinerLoading(driver);
				Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CancelledClose), driver);
				elementReservation.CancelledClose.click();
				reslogger.info("Cancel/Close Clicked");
				testSteps.add("Cancel/Close Clicked");
			} catch (Exception e1) {
				e.printStackTrace();
			}
		}

//		String s7 = elementReservation.ReservationCurrentStatus.getText();
//
//		testSteps.add("=== Verify Status changed to 'Departed' ===");
//		Assert.assertEquals(s7, "DEPARTED", "Failed: Reservation didn't match after checkout");
//		testSteps.add("Verified Status changed to 'Departed'.");
	}

	public String getguestname(WebDriver driver, ArrayList<String> testSteps) {
		String guestnamexpath = "//span[@data-bind = 'text:$parent.GuestProfileName']";
		Wait.WaitForElement(driver, guestnamexpath);
		String guestName = driver.findElement(By.xpath(guestnamexpath)).getText();

		return guestName;

	}

	public void Cancel_Reservation(WebDriver driver, ArrayList<String> testSteps) {
		String DropDownxpath = "//span[@class='dropdown dropdown-toggle ir-dropdown-span-status']";
		Wait.WaitForElement(driver, DropDownxpath);
		Wait.waitForElementToBeClickable(By.xpath(DropDownxpath), driver);
		driver.findElement(By.xpath(DropDownxpath)).click();
		testSteps.add("Click On DropDown");

		String Cancelxpath = "(//span[text()='Cancel'])[2]";
		Wait.WaitForElement(driver, Cancelxpath);
		driver.findElement(By.xpath(Cancelxpath)).click();
		testSteps.add("Select Cancel Option");

		// popUp

		String CancelPopupHeadxpath = "//h4[contains(text() , 'Cancel Reservation')]";
		Wait.WaitForElement(driver, CancelPopupHeadxpath);
		String heading = driver.findElement(By.xpath(CancelPopupHeadxpath)).getText();
		testSteps.add("Cancellation Pop Verified: " + heading);

		String PopUpTextArea = "//textarea[@class = 'form-control ir-frm-ctrl ir-scrollFix']";
		Wait.WaitForElement(driver, PopUpTextArea);
		testSteps.add("cancellation PopUp Appears");
		driver.findElement(By.xpath(PopUpTextArea)).sendKeys("Cancellation Reason");
		testSteps.add("Entering Text In Cancellation Text Area");

		String CancellationProcessedButtonxPath = "//button[contains(text() , 'PROCEED TO CANCELLATION PAYMENT')]";
		Wait.WaitForElement(driver, CancellationProcessedButtonxPath);
		Wait.waitForElementToBeClickable(By.xpath(CancellationProcessedButtonxPath), driver);
		driver.findElement(By.xpath(CancellationProcessedButtonxPath)).click();
		testSteps.add("Click On Processed Cancellation Button");

		// Refund popup

		String refundPopHeadingxpath = "//h4[contains(text(),'Cancellation Payment')]";
		Wait.WaitForElement(driver, refundPopHeadingxpath);
		String H = driver.findElement(By.xpath(refundPopHeadingxpath)).getText();
		testSteps.add("Refund popUp Heading is Verified: " + H);

		String refundPopBalancexpath = "(//span[@data-bind = 'showInnroadCurrency: { value: PaymentFolioBalance(), ShouldShowNegativeAsBracket: true }'])[3]";
		Wait.WaitForElement(driver, refundPopBalancexpath);
		String refundBalance = driver.findElement(By.xpath(refundPopBalancexpath)).getText();
		testSteps.add("Refunded Amount Is Verified: " + refundBalance);

		String RefundButtonxpath = "//button[contains(text(),'Refund $ 20.00')]";
		Wait.WaitForElement(driver, RefundButtonxpath);
		Wait.waitForElementToBeClickable(By.xpath(RefundButtonxpath), driver);
		driver.findElement(By.xpath(RefundButtonxpath)).click();
		testSteps.add("Clicking On Refund Button");

		String CancellationPopupheadingxpath = "//h4[contains(text() , 'Cancellation Successful')]";
		Wait.WaitForElement(driver, CancellationPopupheadingxpath);
		String POPHeading = driver.findElement(By.xpath(CancellationPopupheadingxpath)).getText();
		Assert.assertEquals(POPHeading, "Cancellation Successful", "Failed: Pop Up Heading Mismatched");
		testSteps.add("Successful Popup is Verified: " + POPHeading);

		String SuccessfullPopCloseButtonxpath = "//button[@data-bind = 'click: cancel.closeModal']";
		Wait.WaitForElement(driver, SuccessfullPopCloseButtonxpath);
		Wait.waitForElementToBeClickable(By.xpath(SuccessfullPopCloseButtonxpath), driver);
		driver.findElement(By.xpath(SuccessfullPopCloseButtonxpath)).click();
		testSteps.add("Clicking On Cancellation Successfull pop Up Close Button");

	}

	public void ClickOnRollbackButton(WebDriver driver, ArrayList<String> teststeps) {
		// Rollback Button
		String RollbackButtonxpath = "//button[text() = 'Roll Back']";
		Wait.WaitForElement(driver, RollbackButtonxpath);
		Wait.waitForElementToBeClickable(By.xpath(RollbackButtonxpath), driver);
		driver.findElement(By.xpath(RollbackButtonxpath)).click();
		teststeps.add("Click On RollBack Button");

		// Rollback Popup

		String popupYesButtonxpath = "//button[@data-bind = 'click: popupAcceptChanges']";
		Wait.WaitForElement(driver, popupYesButtonxpath);
		Wait.waitForElementToBeVisibile(By.xpath(popupYesButtonxpath), driver);
		Wait.waitForElementToBeClickable(By.xpath(popupYesButtonxpath), driver);
		driver.findElement(By.xpath(popupYesButtonxpath)).click();
		teststeps.add("Click On RollBack Confirmation Button");
	}

	public void checkoutReservationYesbutton(WebDriver driver, ArrayList test_steps, String total_Balance)
			throws Exception {
		String checkout = "(//button[text()='Check Out'])[1]";
		Wait.WaitForElement(driver, checkout);
		Wait.waitForElementToBeClickable(By.xpath(checkout), driver);
		driver.findElement(By.xpath(checkout)).click();
		reslogger.info("click on check out");
		test_steps.add("click on check out");

		String popupHeadingxpath = "//div[contains(@class,'modal-body') and contains(text(),'Do you wish to settle all guest') ]";
		Wait.WaitForElement(driver, popupHeadingxpath);
		String popuptext = driver.findElement(By.xpath(popupHeadingxpath)).getText();
		reslogger.info("Popup Sentence: " + popuptext);
		test_steps.add("Popup Sentence: " + popuptext);

		reslogger.info("*************Verify Yes Button*************");
		test_steps.add("*************Verify Yes Button*************");

		String YesButtonxpath = "(//button[contains(@class,'btn btn-success ir-btn cp-confirmation-yes ir-mb-btn-block ng-data-trim ir-pt-10-sm') and contains(text(),'Yes') ])[2]";
		Wait.WaitForElement(driver, YesButtonxpath);
		Wait.waitForElementToBeClickable(By.xpath(YesButtonxpath), driver);
		driver.findElement(By.xpath(YesButtonxpath)).click();
		reslogger.info("Clicking On Yes Button");
		test_steps.add("Clicking On Yes Button");

		disableGenerateGuestReportToggle(driver, test_steps);

		String proceedButtonxpath = "//button[@data-bind = 'click: checkOutDetail.onConfirmClick']";
		Wait.WaitForElement(driver, proceedButtonxpath);
		Wait.waitForElementToBeClickable(By.xpath(proceedButtonxpath), driver);
		driver.findElement(By.xpath(proceedButtonxpath)).click();
		test_steps.add("Clicking on  Proceed to Check-In Payment Button");
		reslogger.info("Clicking on Proceed to Check-In Payment Button");

		String popHeadingxpath = "(//h4[contains(text(),'Check Out Payment') ])";
		Wait.WaitForElement(driver, popHeadingxpath);
		String textString = driver.findElement(By.xpath(popHeadingxpath)).getText();
		test_steps.add("Checkout Payment PopUp Heading verified: " + textString);
		reslogger.info("Checkout Payment PopUp Heading verified: " + textString);

		String popBalanceID = "payFormAmountV2";
		Wait.WaitForElement_ID(driver, popBalanceID);
		Wait.waitForElementToBeClickable(By.id(popBalanceID), driver);
		String PopupBalance = driver.findElement(By.id(popBalanceID)).getAttribute("value");
		test_steps.add("Checkout Payment PopUp Balance verified: " + PopupBalance);
		reslogger.info("Checkout Payment PopUp Balance verified: " + PopupBalance);

		String payButtonxpath = "//button[contains(text(),'Pay $ " + PopupBalance + "')]";
		Wait.WaitForElement(driver, payButtonxpath);
		Wait.waitForElementToBeClickable(By.xpath(payButtonxpath), driver);
		driver.findElement(By.xpath(payButtonxpath)).click();
		test_steps.add("Click On Pay Button");
		reslogger.info("Click On Pay Button");

		String closeButtonxpath = "//button[@data-bind='click: checkOutDetail.closeModal']";
		Wait.WaitForElement(driver, closeButtonxpath);
		Wait.waitForElementToBeClickable(By.xpath(closeButtonxpath), driver);
		driver.findElement(By.xpath(closeButtonxpath)).click();
		test_steps.add("Click On Close Button");
		reslogger.info("Click On Close Button");

		test_steps.add("Balance Verified: " + PopupBalance);
		reslogger.info("Balance Verified: " + PopupBalance);

		test_steps.add("Verified: With Yes Primary User as well as Secondary User Amount verified");

	}

	public void CheckInReservationAfterRollback(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		String checkin = "(//button[text()='Check In'])";
		Wait.WaitForElement(driver, checkin);
		Wait.waitForElementToBeClickable(By.xpath(checkin), driver);
		driver.findElement(By.xpath(checkin)).click();
		reslogger.info("click on check in");
		test_steps.add("click on check in");

		disableGenerateGuestReportToggle(driver, test_steps);

		clickOnProceedToCheckInPaymentButton(driver, test_steps);

		clickOnDirtyPopUp(driver, test_steps);
	}

	public ArrayList<String> clickEditButton(WebDriver driver) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.WaitForElement(driver, OR_Reservation.EDITBUTTON);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.EDITBUTTON), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.EDITBUTTON), driver);
		Utility.ScrollToElement(res.EDITBUTTON, driver);
		res.EDITBUTTON.click();
		testSteps.add("click EDITBUTTON");
		reslogger.info("click EDITBUTTON");
//		verifySpinerLoading(driver);
		return testSteps;
	}

	public String getUserNameFromHistoryTab(WebDriver driver) {
		String path = "(//td//span[contains(@data-bind,'text:$data.user')])[1]";// "//span[contains(text(),'Changed')]//..//..//td//span[contains(@data-bind,'text:$data.user')]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		String getText = driver.findElement(By.xpath(path)).getText();
		return getText;

	}

	public String getDateFromHistoryTab(WebDriver driver) {
		String path = "//span[contains(text(),'Changed')]//..//..//td//span[contains(@data-bind,'text:$parent.formatDate')]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		String getText = driver.findElement(By.xpath(path)).getText();
		return getText;

	}

	public String getTimeFromHistoryTab(WebDriver driver) {
		String path = "//span[contains(text(),'Changed')]//..//..//td//span[contains(@data-bind,'text:$parent.formatTime')]";
		Wait.WaitForElement(driver, path);
		Wait.waitForElementToBeClickable(By.xpath(path), driver);
		String getText = driver.findElement(By.xpath(path)).getText();
		return getText;

	}

	public String saveButtonAfterEditGuestInfo(WebDriver driver, ArrayList<String> testSteps, String timeZone)
			throws InterruptedException, ParseException {
		Elements_CPReservation element = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.SaveButtonAfterEditGuestInfo);
		Utility.ScrollToElement(element.SaveButtonAfterEditGuestInfo, driver);
		element.SaveButtonAfterEditGuestInfo.click();
		String getTimeWithDate = ESTTimeZone.getDateWithTime(timeZone, "MM/dd/yy h:mm aa");
		try {
			Wait.WaitForElementUsingClassName(driver, OR.Toaster_Message);
			Wait.waitForElementToBeVisibile(By.className(OR.Toaster_Message), driver);
			Wait.waitForElementToBeClickable(By.className(OR.Toaster_Message), driver);
			System.out.println(element.Toaster_Message.getText());
			Utility.app_logs.info(element.Toaster_Message.getText());
			// testSteps.add("Toaster message: " + element.Toaster_Message.getText());
			// testSteps.add(element.Toaster_Message.getText());
		} catch (Exception e) {
			// TODO: handle exception
		}
		return getTimeWithDate;
	}

	public int FolioDropDownList(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		String folio = "//button[contains(@title,'Guest Folio For')]";
		String strFolios = "//span[contains(text(),'Guest Folio For')]";

		driver.findElement(By.xpath(folio)).click();
		Wait.wait1Second();
		List<WebElement> folios = driver.findElements(By.xpath(strFolios));
		test_steps.add("Folios size: " + folios.size());
		reslogger.info("Folios size: " + folios.size());

		return folios.size();

	}

	public void selectRoomAtPaymentCheckInPopupMRB(WebDriver driver, ArrayList<String> test_steps, String roomNumbers,
			String roomClassName) throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.roomNoDDAtCheckInPopup), driver);
		String path = "//span/label[contains(@data-bind,'roomClassName') and contains(text(),'" + roomClassName + "')]"
				+ "/parent::span/following-sibling::span//span[@class='filter-option pull-left']";
		Wait.WaitForElement(driver, path);
		Utility.ScrollToElement(driver.findElement(By.xpath(path)), driver);
		driver.findElement(By.xpath(path)).click();
		String xpathOfRoomNo = "(//span[@class='text' and text()='" + roomNumbers + "'])";
		Wait.waitForElementToBeClickable(By.xpath(xpathOfRoomNo), driver);
		driver.findElement(By.xpath(xpathOfRoomNo)).click();
		test_steps.add("Selecting room number <b>" + roomNumbers + "</b> for <b>" + roomClassName
				+ "</b> room class during payment check-in");
		reslogger.info("Selecting room number <b>" + roomNumbers + "</b> for <b>" + roomClassName
				+ "</b> room class during payment check-in");
	}

	public void verifyChildLineItemTaxesInFolio(WebDriver driver, ArrayList<String> test_steps, String taxLedgeraccount,
			String existingTaxDescriptions) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		// double foliovalue = 0.0;
		DecimalFormat f = new DecimalFormat("##.00");
		double totalTaxinFolios = 0.0;
		double capturetotalTax = 0.0;
		int roomChargesFolioCount = getRoomChargeFolioItemCountInRes(driver);
		for (int i = 1; i <= roomChargesFolioCount; i++) {
			String xpath = "(//tbody[starts-with(@data-bind,'getElement: ComputedFolioItemsElement')]/tr/td/span[text()='"
					+ taxLedgeraccount + "']/../following-sibling::td/a)[" + i + "]";
			// clickroomChargeFolioItems
			Wait.waitUntilPresenceOfElementLocated(xpath, driver);
			Wait.explicit_wait_elementToBeClickable(driver.findElement(By.xpath(xpath)), driver);
			driver.findElement(By.xpath(xpath)).click();
			test_steps.add("Click at folio line item: " + i + " of" + " " + taxLedgeraccount);
			Wait.explicit_wait_10sec(res.itemDetailOnFolioPopup, driver);
			Wait.waitUntilPresenceOfElementLocated(OR_Reservation.ItemDetailOnFolioPopup, driver);
			double individualFolioTotal = 0.0;
			double totalperdayfolioTax = 0.0;
			double folioValue = 0.0;
			String xpath1 = "(//a[text()='" + existingTaxDescriptions.trim()
					+ "'])[1]/ancestor::td/following-sibling::td/span";
			Wait.waitUntilPresenceOfElementLocated(xpath1, driver);
			String val = driver.findElement(By.xpath(xpath1)).getText();
			folioValue = Double.parseDouble(val.replace("$", "").trim());

			String calculatedTax = driver
					.findElement(By.xpath("//td//span[text()='TravelClickRate234']//following::td/span")).getText();
			double calculatedTaxAmount = Double.parseDouble(calculatedTax.replace("$", "").trim());

			assertEquals(calculatedTaxAmount, folioValue);
			clickFolioPopupCancel(driver);
			test_steps.add("Close open folio line item");
		}

	}

	public String getPolicyyPaidAmount(WebDriver driver, ArrayList<String> test_steps, String Date, String PreviousDay,
			String Category, String Desc, String Amount) throws InterruptedException {
		reslogger.info("******************* Verify Folio Details **********************");

		Elements_CPReservation res = new Elements_CPReservation(driver);
		String LineItemSetMainPaymentPath = "//tbody[contains(@data-bind,'ComputedFolioItems')]//td[@class='lineitem-date']/span[contains(text(),'"
				+ PreviousDay + "')]" + "/../following-sibling::td[@class='lineitem-category']/span[contains(text(),'"
				+ Category + "')]" + "/../following-sibling::td[@class='lineitem-description']//a[contains(text(),'"
				+ Desc + "')]" + "/../following-sibling::td[@class='lineitem-amount']/span";

		Wait.WaitForElement(driver, LineItemSetMainPaymentPath);
		String cancellationAMount = driver.findElement(By.xpath(LineItemSetMainPaymentPath)).getText();
		cancellationAMount = cancellationAMount.replace("$", " ");
		return cancellationAMount.trim();
	}

	public void PayAtFolio(WebDriver driver) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		res.clickPayButton.click();
		test_steps.add("Clicking on Pay Button");
		reslogger.info("Clicking on Pay Button");
	}

	public void verifyPaymentLineItemCardName(WebDriver driver, String guestFullName) {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.PaymentLineItem), driver, 20);
		String accountNameres = res.PaymentLineItem.getText();

		if (accountNameres.contains(guestFullName)) {
			Assert.assertTrue(true, "Failed: Guest full name is not showing in the paymentline item");
			test_steps.add("Guest full name with special charecter is showing in the paymentline item");
			reslogger.info("Guest full name with special charecter is showing in the paymentline item");
		}

	}

	public void VerifycheckoutReservationWithSwipeCard(WebDriver driver, String CardNumber)
			throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		elementReservation.CheckOut.click();
		generatGuestReportToggle(driver, test_steps, "No");

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PaymentMethod);
		res.CP_NewReservation_PaymentMethod.click();

		Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(OR_Reservation.ProceedToCheckOutPayment)));
		Wait.wait3Second();

		String paymentMethod = "//div[@class='btn-group bootstrap-select form-control ir-frm-ctrl payment-method dropup']//span[@class='filter-option pull-left']";
		Wait.WaitForElement(driver, paymentMethod);
		driver.findElement(By.xpath(paymentMethod)).click();
		String selectPaymentMethod = "//span[@class='glyphicon ir-mastercard-icon']//following::span";
		Wait.WaitForElement(driver, selectPaymentMethod);
		driver.findElement(By.xpath(selectPaymentMethod)).click();
		String swipeButton = "//button[text()='SWIPE']";
		Wait.WaitForElement(driver, swipeButton);
		driver.findElement(By.xpath(swipeButton)).click();

		test_steps.add("Clicking in Swipe");
		reslogger.info("Clicking in Swipe");
		Wait.wait1Second();
		String CC = "//input[contains(@data-bind,'creditCardNumber')]";
		Wait.WaitForElement(driver, CC);
		driver.findElement(By.xpath(CC)).sendKeys(CardNumber);
		test_steps.add("Enter CardNumber : " + CardNumber);
		reslogger.info("Enter CardNumber : " + CardNumber);
		res.CP_NewReservation_CardNumber.sendKeys(Keys.TAB);
		Wait.wait2Second();

		elementReservation.Log.click();

		String XpathOfstatusOfCard = "//label[contains(text(),'STATUS')]//following::label";
		Wait.WaitForElement(driver, XpathOfstatusOfCard);
		String statusOfCard = driver.findElement(By.xpath(swipeButton)).getText();

		Assert.assertEquals("Approved", statusOfCard, "Failed: Swipe  card is not approved");
		test_steps.add("Card is approved");
		reslogger.info("Card is approved");

		Wait.waitForElementByXpath(driver, "//div[@class='col-md-12 text-right']/button[text()='CLOSE']");
		driver.findElement(By.xpath("//div[@class='col-md-12 text-right']/button[text()='CLOSE']")).click();
		String ReservationStatus = elementReservation.ReservationCurrentStatus.getText();

		if (ReservationStatus.equalsIgnoreCase("DEPARTED")) {

			System.out.println("Successfully changed Reservation status to DEPARTED");
		} else {
			System.out.println("Unable to change Reservation status to DEPARTED");
		}
	}

	public void verifyNoOfRecordAvailableaBeforeandAfterSplitCheckboxISChecked(WebDriver driver,
			ArrayList<String> test_steps) {

		Elements_CPReservation elements = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		Wait.waitForElementByXpath(driver, OR_Reservation.EnterAdult);
		List<WebElement> enterAdult = driver.findElements(By.xpath(OR_Reservation.EnterAdult));
		test_steps.add("EnterAdult" + enterAdult.size());
		reslogger.info("EnterAdult" + enterAdult.size());
		Wait.waitForElementByXpath(driver, OR_Reservation.EnterChild);
		List<WebElement> enterChild = driver.findElements(By.xpath(OR_Reservation.EnterChild));

		test_steps.add("EnterChild" + enterChild.size());
		reslogger.info("EnterChild" + enterChild.size());

		Wait.waitForElementByXpath(driver, OR_Reservation.EnterRatePlan);
		List<WebElement> enterRatePlan = driver.findElements(By.xpath(OR_Reservation.EnterRatePlan));

		test_steps.add("EnterRatePlan" + enterRatePlan.size());
		reslogger.info("EnterRatePlan" + enterRatePlan.size());

		if (enterAdult.size() > 1 && enterChild.size() > 1 && enterRatePlan.size() > 1) {
			Assert.assertTrue(true, "Failed :More then one room class is not added after add room button is clicked");
			test_steps.add(
					"More than  one row's of records are showing in calender picker of reservation before split room checkbox is cliked");
			reslogger.info(
					"More than  one row's of records are showing in calender picker of reservation before split room checkbox is cliked");

		} else if (enterAdult.size() == 1 && enterChild.size() == 1 && enterRatePlan.size() == 1) {
			Assert.assertTrue(true,
					"Failed :On split room checkbox click the rateplan ,adult child row of secondary room class is still showing");
			test_steps.add(
					" one row's of records are showing in calender picker of reservation after split room checkbox is cliked");
			reslogger.info(
					" one row's of records are showing in calender picker of reservation after split room checkbox is cliked");

		}

	}

	public Double OverrideDeposit(WebDriver driver, ArrayList test_steps, String IsDepositOverride,
			String DepositOverrideAmount) throws InterruptedException {
		// Wait.wait5Second();
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_DepositAmount);
		String deposit = res.CP_NewReservation_DepositAmount.getText();
		test_steps.add("Deposit amount is : " + deposit);
		reslogger.info("Deposit amount is : " + deposit);
		deposit = deposit.trim();
		char ch = deposit.charAt(0);
		deposit = deposit.replace("$", "");
		deposit = deposit.trim();
		Double d = Double.parseDouble(deposit);

		if (IsDepositOverride.equalsIgnoreCase("Yes") && d >= 0) {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_OverrideDeposit);
			res.CP_NewReservation_OverrideDeposit.click();
			test_steps.add("Clicking on override deposit amount");
			reslogger.info("Clicking on override deposit amount");
			Wait.wait2Second();
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_OverrideDepositAmoount);
			res.CP_NewReservation_OverrideDepositAmoount.sendKeys(DepositOverrideAmount);
			test_steps.add("Override deposit amount is : " + ch + " " + DepositOverrideAmount);
			reslogger.info("Override deposit amount is : " + ch + " " + DepositOverrideAmount);
			d = Double.parseDouble(DepositOverrideAmount.trim());
		}
		return d;
	}

	public void roomUnLock(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ROOMUNLOCK);
		int lockStatus = driver.findElements(By.xpath("//i[contains(@class,'fa fa-lock ng-color-red')]")).size();
		if (lockStatus > 0) {
			res.RoomUnLock.click();
			test_steps.add("Room status is Unlocked");
			reslogger.info("Room status is Unlocked");
		} else {
			test_steps.add("Room status is already Unlocked");
			reslogger.info("Room status is already Unlocked");
		}
		verifySpinerLoading(driver);
	}

	public void verifyUnlockMessage(WebDriver driver, ArrayList<String> test_steps, String expectedRoomLockMsg) {
		Wait.WaitForElement(driver, OR_Reservation.ROOMLOCKMSG);
		String roomLockMsg = driver.findElement(By.xpath(
				"//p[contains(text(),'Please note that this guest has requested not to have their room changed.')]"))
				.getText();
		assertEquals(roomLockMsg, expectedRoomLockMsg, "Failed : Message  missmatched");
		reslogger.info("Verified Notes Subject :" + expectedRoomLockMsg);
	}

	public void verifyCPMandaoryField(WebDriver driver, ArrayList<String> test_steps, boolean isClickBookNow)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		if (isClickBookNow) {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Book);
			Utility.ScrollToElement(res.CP_NewReservation_Book, driver);
			res.CP_NewReservation_Book.click();
			test_steps.add("Click on Book Now");
			reslogger.info("Click on Book Now");
			Wait.wait5Second();
		}
		String path = "//div[contains(@class,'alert') and contains (text(),'All the below fields are required')]";
		Wait.WaitForElement(driver, path);
		Utility.ScrollToElement(driver.findElement(By.xpath(path)), driver);
		assertTrue(driver.findElement(By.xpath(path)).isDisplayed(), "failed to verify mandatory field");
		test_steps.add("Verified Message All the below fields are required");
		reslogger.info("Verified Message All the below fields are required");

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestFirstName);
		res.CP_NewReservation_GuestFirstName.clear();
		res.CP_NewReservation_GuestFirstName.sendKeys("firstname");
		reslogger.info("Guest First Name : <b>" + "firstname" + "</b>");

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_GuestLastName);
		res.CP_NewReservation_GuestLastName.clear();
		res.CP_NewReservation_GuestLastName.sendKeys("lastname");
		reslogger.info("Guest Last Name : <b>" + "lastname" + "</b>");
		res.CP_NewReservation_GuestLastName.sendKeys(Keys.TAB);

		Utility.ScrollToElement(res.CP_NewReservation_GuestFirstName, driver);
		res.CP_NewReservation_GuestFirstName.clear();
		res.CP_NewReservation_GuestFirstName.sendKeys(Keys.TAB);
		String firstNameMessage = "//span[contains(@data-bind,'firstName' ) and contains (text(),'This field is required')]";
		assertTrue(driver.findElement(By.xpath(firstNameMessage)).isDisplayed(), "failed to verify mandatory field");
		test_steps.add("Verified firstName message This field is required");
		reslogger.info("Verified firstName message This field is required");

		Utility.ScrollToElement(res.CP_NewReservation_GuestLastName, driver);
		res.CP_NewReservation_GuestLastName.clear();
		res.CP_NewReservation_GuestLastName.sendKeys(Keys.TAB);
		String lastNameMessage = "//span[contains(@data-bind,'lastName') and contains (text(),'This field is required')]";
		assertTrue(driver.findElement(By.xpath(lastNameMessage)).isDisplayed(), "failed to verify mandatory field");
		test_steps.add("Verified lastName message This field is required");
		reslogger.info("Verified lastName message This field is required");

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Address1);
		Utility.ScrollToElement(res.CP_NewReservation_Address1, driver);
		res.CP_NewReservation_Address1.clear();
		res.CP_NewReservation_Address1.sendKeys("address");
		res.CP_NewReservation_Address1.clear();
		res.CP_NewReservation_Address1.sendKeys(Keys.TAB);
		String address1 = "//span[contains(@data-bind,'address1') and contains (text(),'This field is required')]";
		assertTrue(driver.findElement(By.xpath(address1)).isDisplayed(), "failed to verify mandatory field");
		test_steps.add("Verified address1 message This field is required");
		reslogger.info("Verified address1 message This field is required");

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_City);
		Utility.ScrollToElement(res.CP_NewReservation_City, driver);
		res.CP_NewReservation_City.clear();
		res.CP_NewReservation_City.sendKeys("city");
		res.CP_NewReservation_City.clear();
		res.CP_NewReservation_City.sendKeys(Keys.TAB);
		String city = "//span[contains(@data-bind,'city' ) and contains (text(),'This field is required')]";
		assertTrue(driver.findElement(By.xpath(city)).isDisplayed(), "failed to verify mandatory field");
		test_steps.add("Verified city message This field is required");
		reslogger.info("Verified city message This field is required");

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_PostalCode);
		Utility.ScrollToElement(res.CP_NewReservation_PostalCode, driver);
		res.CP_NewReservation_PostalCode.clear();
		res.CP_NewReservation_PostalCode.sendKeys("34567");
		res.CP_NewReservation_PostalCode.clear();
		res.CP_NewReservation_PostalCode.sendKeys(Keys.TAB);
		String postalCode = "//span[contains(@data-bind,'postalCode' ) and contains (text(),'This field is required')]";
		assertTrue(driver.findElement(By.xpath(postalCode)).isDisplayed(), "failed to verify mandatory field");
		test_steps.add("Verified postalCode message This field is required");
		reslogger.info("Verified postalCode message This field is required");

		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Phone);
		Utility.ScrollToElement(res.CP_NewReservation_Phone, driver);
		res.CP_NewReservation_Phone.clear();
		res.CP_NewReservation_Phone.sendKeys("ffffffaa");
		res.CP_NewReservation_Phone.sendKeys(Keys.TAB);
		String phoneNo = "//span[contains(@data-bind,'mailingAddress.phone.number' ) and contains (text(),'Invalid phone number format')]";
		assertTrue(driver.findElement(By.xpath(phoneNo)).isDisplayed(), "failed to verify mandatory field");
		test_steps.add("Verified Invalid phone number format");
		reslogger.info("Verified Invalid phone number format");
	}

	public void verifyFindGuestProfileDisplayed(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.enterFindGuestProfile, driver);
		assertTrue(res.enterFindGuestProfile.isDisplayed(), "failed to verify Find Guest Profile enabled");
		test_steps.add("Verified Find Guest Profile enabled");
		reslogger.info("VerifiedFind Guest Profile enabled");
	}

	public void clicCloseGuestProfile(WebDriver driver, ArrayList<String> testSteps) throws InterruptedException {
		Elements_CPReservation elementReservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.closeGuestProfile);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.closeGuestProfile), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.closeGuestProfile), driver);
		Utility.ScrollToElement(elementReservation.closeGuestProfile, driver);
		Wait.wait5Second();
		try {
			elementReservation.closeGuestProfile.click();
		} catch (Exception e) {
			Utility.clickThroughJavaScript(driver, elementReservation.closeGuestProfile);
		}
		testSteps.add("Clicking on Close Guest Profile Icon");
		reslogger.info("Clicking on Close Guest Profile Icon");
	}

	public String verifyRoomNumberAvailable(WebDriver driver, ArrayList<String> testSteps, String RoomClass,
			String roomNo) throws InterruptedException {
		String room = "//section[@class='ir-roomClassDetails manual-override']//span[contains(text(),'" + RoomClass
				+ "')]//..//..//div[2]//span";

		Wait.WaitForElement(driver, room);
		String rooms = driver.findElement(By.xpath(room)).getText();
		reslogger.info(rooms);
		if (!roomNo.contains(rooms) && !roomNo.equalsIgnoreCase("")) {
			testSteps.add("Successfully verified that changed in room availablity from " + roomNo + " to " + rooms);
		} else {
			testSteps.add("Total Room Available " + rooms);
		}
		return rooms;
	}

	public String completeCheckIn(WebDriver driver, ArrayList test_steps) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);

		String buttonName = null;
		if (res.CP_Reservation_ConfirmCheckIn_Button.isEnabled()) {
			confirmCheckIn = true;
			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckIn_Button, driver);
			buttonName = res.CP_Reservation_ConfirmCheckIn_Button.getText();
			res.CP_Reservation_ConfirmCheckIn_Button.click();
			test_steps.add("Clicking on  Confirm Check-In Button");
			reslogger.info("Clicking on Confirm  Check-In Button");

			try {
				isRoomDirty = Utility.isElementPresent(driver,
						By.xpath(OR_Reservation.CP_Reservation_CheckIn_ModelPopMsg));
				reslogger.info("isRoomDirty:" + isRoomDirty);

				if (isRoomDirty) {
					ClickConfirmButtonOfDirtyPopupModel(driver, test_steps, isRoomDirty);
				} else {
					test_steps.addAll(VerifyDirtyRoom(driver));
				}
			} catch (Exception e) {

			}

		} else if (res.CP_Reservation_ConfirmCheckInPayment_Button.isEnabled()) {
			confirmCheckInWithPayment = true;

			Utility.ScrollToElement(res.CP_Reservation_ConfirmCheckInPayment_Button, driver);
			buttonName = res.CP_Reservation_ConfirmCheckInPayment_Button.getText();
			res.CP_Reservation_ConfirmCheckInPayment_Button.click();
			test_steps.add("Clicking on  Proceed to Check-In Payment Button");
			reslogger.info("Clicking on Proceed to Check-In Payment Button");

			boolean isUnassigned = Utility.isElementPresent(driver,
					By.xpath(OR_Reservation.CP_Reservation_CheckINUassignedTosterMsg));
			reslogger.info("isUnassigned:" + isUnassigned);
			String path = "//div[@id='ir-cp-alert-modal']//div[@class='modal-body'][contains(text(),'occupying room')]";
			boolean isRoomBooked = Utility.isElementPresent(driver, By.xpath(path));
			reslogger.info("isRoomBooked:" + isRoomBooked);

			if (isUnassigned) {
				CheckINScreenRoomUnAssigned(driver, isUnassigned);
			}
			if (isRoomBooked) {
				CheckINScreenRoomOccupiedWithOtherReservation(driver, isRoomBooked);

			}
			String loading = "(//div[@class='ir-loader-in'])";
			Wait.waitTillElementDisplayed(driver, loading);
			try {
				isRoomDirty = Utility.isElementPresent(driver,
						By.xpath(OR_Reservation.CP_Reservation_CheckIn_ModelPopMsg));
				reslogger.info("isRoomDirty:" + isRoomDirty);
				if (isRoomDirty) {
					ClickConfirmButtonOfDirtyPopupModel(driver, test_steps, isRoomDirty);
				} else {
					test_steps.addAll(VerifyDirtyRoom(driver));
				}
			}

			catch (Exception e) {

			}
		}

		return buttonName;
	}

	public ArrayList<String> clickSaveAfterEditStayInfo(WebDriver driver) throws InterruptedException {

		verifySpinerLoading(driver);
		Elements_CPReservation res = new Elements_CPReservation(driver);
		ArrayList<String> testSteps = new ArrayList<>();
		try {
			Wait.WaitForElement(driver, OR_Reservation.SaveButton);
			Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.SaveButton), driver);
			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.SaveButton), driver);
			Utility.ScrollToElement(res.SaveButton, driver);
			res.SaveButton.click();
			testSteps.add("click save");
			reslogger.info("click save");

		} catch (Exception e) {
			WebElement ele = driver.findElement(By.xpath("//button[contains(@data-bind, 'roomSearch.enableSave')]"));
			Utility.ScrollToElement(ele, driver);
			ele.click();
		}

		try {

			Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.AmountChangeConfirmationPopup), driver);
			Utility.ScrollToElement(res.AmountChangeConfirmationPopup, driver);
			res.AmountChangeConfirmationPopup.click();
			testSteps.add("Click yes button of Amount Change popup");
			reslogger.info("Click yes button of Amount Change popup");
		} catch (Exception e) {
			testSteps.add("Amount Change popup didn't display");
			reslogger.info("Amount Change popup didn't display");

		}
		verifySpinerLoading(driver);
		return testSteps;
	}

	public void rollBackReservation(WebDriver driver, ArrayList<String> test_steps) throws Exception {
		// searchWithGuestNameAndOpenProfile(driver, test_steps, guestFullName);
		test_steps.add("============ Rollback the reservation =================");
		click_RollBackButton(driver, test_steps);
		try {
			clickYesButtonRollBackMsg(driver, test_steps);
		} catch (Exception e) {
			try {
				clickYesButtonRollBackWithoutPayment(driver, test_steps);
			} catch (Exception e1) {
				clickYesButtonRollBackWithoutPaymentForMRB(driver, test_steps);
			}
		}

	}

	public void completeCheckOutAction(WebDriver driver, ArrayList<String> test_steps, Boolean voidRoomCharges)
			throws InterruptedException {
		// SearchandClickgivenReservationNumber(driver,reservation );
		Elements_CPReservation res = new Elements_CPReservation(driver);
		clickCheckOutButton(driver, test_steps);
		test_steps.add("Click on checkout button");
		generatGuestReportToggle(driver, test_steps, "No");
		test_steps.add("Disable guest report toggle");
		String path = "//span[contains(text(),'Void Room Charges')]/ancestor::div/label/input|//span[contains(text(),'Void room charges for unused nights')]";
		WebElement element = driver.findElement(By.xpath(path));
		if (element.isDisplayed()) {
			test_steps.add("Void room charges for unused nights 'checkbox' is present");
			if (voidRoomCharges) {
				checkedVoidRoomChargeCheckBox(driver, test_steps);

			}

		} else {
			test_steps.add("Void room charges for unused nights checkbox is not present");
		}

		// Utility.clickThroughJavaScript(driver,
		// driver.findElement(By.xpath(OR_Reservation.ProceedToCheckOutPayment)));
		try {
			checkOutPayment(driver);
			clickOnPayButtonOnPaymentPopup(driver, test_steps);
			test_steps.add("Click on pay button");
			clickCloseButtonOfCheckoutSuccessfully(driver, test_steps);
			test_steps.add("Click on close button");
		} catch (Exception e) {
			try {
				clickCloseButtonOfCheckoutSuccessfully(driver, test_steps);
			} catch (Exception e1) {
				// TODO: handle exception
			}
		}

	}

	public void verifyBackButtonInTaskPopup(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_AddTask, driver);
		res.CP_AddTask.click();
		test_steps.add("Click on Add Task");
		reslogger.info("Click on Add Task");

		try {
			String backBtnPath = "//h4[text()='Add Task']/../..//button[text()='Back']";
			Wait.WaitForElement(driver, backBtnPath);
		} catch (Exception e) {
			test_steps.add("Successfuly Verified Back Button Not Available in Task Popup");
			reslogger.info("Successfuly Verified Back Button Not Available in Task Popup");
		}

		driver.findElement(By.xpath(
				"//h4[text()='Add Task']/../..//div[@class='modal-header']//button[@data-bind='click: closeTaskModal']"))
				.click();
	}

	public void verifyBackButtonInNotesPopup(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_AddNotes, driver);
		res.CP_AddNotes.click();
		test_steps.add("Click on Add Notes");
		reslogger.info("Click on Add Notes");

		try {
			String backBtnPath = "//h4[text()='Add Notes']/../..//button[text()='Back']";
			Wait.WaitForElement(driver, backBtnPath);
		} catch (Exception e) {
			test_steps.add("Successfuly Verified Back Button Not Available in Notes Popup");
			reslogger.info("Successfuly Verified Back Button Not Available in Notes Popup");
		}

		driver.findElement(By.xpath(
				"//h4[text()='Add Notes']/../..//div[@class='modal-header']//button[@data-bind='click: $parent.onCloseNoteDetailsClick']"))
				.click();
	}

	public void verifyBackButtonInADDONPopup(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Utility.ScrollToElement(res.CP_ADDON_Button, driver);
		res.CP_ADDON_Button.click();
		test_steps.add("Click on AddON");
		reslogger.info("Click on AddON");

		try {
			String backBtnPath = "//h4[text()='ADD-ONS']//..//..//button[text()='Back']";
//      	Wait.WaitForElement(driver,backBtnPath);
			driver.findElement(By.xpath(backBtnPath)).click();
		} catch (Exception e) {
			test_steps.add("Successfuly Verified Back Button Not Available in AddOn Popup");
			reslogger.info("Successfuly Verified Back Button Not Available in AddOn Popup");
		}

		driver.findElement(By.xpath("//h4[text()='ADD-ONS']/preceding-sibling::button")).click();
	}

	public void verifyHTMLBodyInEmailPopup(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {

		clickSendEmailButton(driver, test_steps);

		String txtPath = "(//h4[text()='Send Mail']/../..//textarea[contains(@id,'mailBodyContent')])[2]";

		String text = Utility.getELementText(driver.findElement(By.xpath(txtPath)), true, "value");
		boolean isfound = false;
		if (text.contains("<html>")) {
			isfound = true;
		}
		if (text.contains("<head>")) {
			isfound = true;
		}
		if (text.contains("<body>")) {
			isfound = true;
		}
		if (text.contains("<p>")) {
			isfound = true;
		}
		if (text.contains("<span>")) {
			isfound = true;
		}

		if (isfound) {
			test_steps.add("Found HTML tags in EMAIL Body");
			reslogger.info("Found HTML tags in EMAIL Body");
			assertTrue(false);
		} else {
			test_steps.add("Successfully Verified no HTML tags found in EMAIL Body");
			reslogger.info("Successfully Verified no HTML tags found in EMAIL Body");
		}

		driver.findElement(By.xpath("//h4[text()='Send Mail']/preceding-sibling::button")).click();
	}

	public void editSelectedRoomClick(WebDriver driver, int roomIndex, ArrayList<String> test_steps) {
		String path = "//div[@class='desktop-view trip-summary-sticky']//div[@data-bind='with: stayInfoModule']//div[contains(@data-bind,'MultiRoomModule')]/div/div["
				+ roomIndex + "]//i";
		Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(path)));
		test_steps.add("Successfully Clicked Edit Room : " + roomIndex);
		reslogger.info("Successfully Clicked Edit Room : " + roomIndex);
	}

	public void verifyFindRoomHeader(WebDriver driver, String headerText, ArrayList<String> test_steps) {
		String fountText = Utility.getELementText(
				driver.findElement(By.xpath("//span[@data-bind='text: MultiRoomModule.roomResultsHeader']")), false,
				headerText);
		Utility.customAssert(fountText, headerText, true,
				"Successfully Verified Searched Room Text Matched : " + headerText,
				"Failed to Verify Search Room Text : ", true, test_steps);
	}

	public void clickBookQuote(WebDriver driver, String RatePlanName, ArrayList test_steps)
			throws InterruptedException {
		String book = "//button[text()='Book']";
		Wait.explicit_wait_xpath(book, driver);
		Wait.WaitForElement(driver, book);
		Utility.customAssert(driver.findElement(By.xpath(book)).isDisplayed() + "", "true", true,
				"Successfully Verified BOOK Button Visible", "Failed to Verified BOOK Button Visible", true,
				test_steps);
		driver.findElement(By.xpath(book)).click();
		reslogger.info("Clicking on book");
		test_steps.add("Clicking on book");
		Wait.wait10Second();
		Wait.wait10Second();
		verifyRatePlanInModal(driver, RatePlanName, test_steps);

		String confirm = "//button[contains(text(),'CONFIRM BOOKING')]";
		Wait.WaitForElement(driver, confirm);
		driver.findElement(By.xpath(confirm)).click();
		reslogger.info("Clicking on confirm");
		test_steps.add("Clicking on confirm");

		String close = "(//button[contains(text(),'CLOSE')])[2]";
		Wait.WaitForElement(driver, close);
		driver.findElement(By.xpath(close)).click();
		reslogger.info("Clicking on close");
		test_steps.add("Clicking on close");
	}

	public void verifyRoomNoInFolioItemDetailPopup(WebDriver driver, ArrayList<String> test_steps, String checkInDate,
			String checkOutDate, String expectedRoomNo) throws Exception {

		ArrayList<String> dates = Utility.getAllDatesBetweenCheckInOutDates(checkInDate, checkOutDate);
		for (String date : dates) {
			String convertedDate = Utility.parseDate(date, "dd/MM/yyyy", "EE MMM dd, yyyy");
			String descXpath = "//span[text()='" + convertedDate + "']/../..//span[text()='Room Charge']/../.."
					+ "//td[@class='lineitem-description']/a";
			driver.findElement(By.xpath(descXpath)).click();

			String popupRoomNoPath = "//span[contains(@data-bind,'RoomNumber')]";
			try {
				Wait.waitForElementByXpath(driver, popupRoomNoPath);

				Utility.customAssert(driver.findElement(By.xpath(popupRoomNoPath)).getText().trim(),
						expectedRoomNo.trim(), true,
						"Successfully Verified Room No " + expectedRoomNo + " Matched For " + date + " Line item",
						"Failed to Verify Room No " + expectedRoomNo + " Matched For " + date + " Line item", true,
						test_steps);
			} catch (Exception e) {
				e.printStackTrace();
			}

			try {
				String close = popupRoomNoPath
						+ "/../../../../../../../../../../../..//div[@class='modal-footer']//button[text()='Cancel']";
				Wait.WaitForElement(driver, close);
				driver.findElement(By.xpath(close)).click();
			} catch (Exception e) {
				driver.findElement(By.xpath(popupRoomNoPath)).sendKeys(Keys.ESCAPE);
			}
		}

	}

	public void verifySettlementMsgPrimaryGuest(WebDriver driver, ArrayList test_steps) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_Reservation_CheckOutAllButton_ConfirmationMsg);
		Wait.explicit_wait_visibilityof_webelement(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg, driver);
		Utility.ScrollToElement(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg, driver);
		String Msg = "Do you wish to settle all guest's remaining charges against the primary guest's folio?";
		reslogger.info(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg.getText());
		assertEquals(res.CP_Reservation_CheckOutAllButton_ConfirmationMsg.getText().toLowerCase().trim(),
				Msg.toLowerCase().trim(), "Failed: To verify Message");
		test_steps.add("Verified Message : <b>" + Msg + "</b>");
		reslogger.info("Verified Message : " + Msg);

	}

	public void travelAgentMarketSegmentDetails(WebDriver driver, ArrayList test_steps, String TravelAgent,
			String MarketSegment, String Referral, String AccountType) throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_TravelAgent);

		if (!(TravelAgent.equalsIgnoreCase("") || TravelAgent.isEmpty())) {
			res.CP_NewReservation_TravelAgent.clear();
			Wait.wait1Second();
			res.CP_NewReservation_TravelAgent.sendKeys(TravelAgent);
			Wait.wait2Second();
			String account = "//b[contains(text(),'" + TravelAgent.trim() + "')]/../../..";
			Wait.WaitForElement(driver, account);
			driver.findElement(By.xpath(account)).click();
			String dataYes = "//div[contains(text(),'Do you want to replace the guest info')]/following-sibling::div//button[contains(text(),'Yes')]";
			Wait.WaitForElement(driver, dataYes);
			driver.findElement(By.xpath(dataYes)).click();
			test_steps.add(
					"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
			reslogger.info(
					"Do you want to replace the guest info, payment method, marketing info and notes in this reservation with the information from the account? Clicking yes will save all the account info to the reservation. : No");
			Wait.wait5Second();
		}
	}

	public void copyOfSplitReservation(WebDriver driver, ArrayList<String> test_steps, String oldGuestname)
			throws Exception {
		Elements_CPReservation cpelements = new Elements_CPReservation(driver);

		navigateToReservationPage(driver);
		String confirmationNo = guestUnlimitedSearchAndOpen(driver, test_steps, oldGuestname, null, true, 12);

		Wait.WaitForElement(driver, OR_Reservation.COPY_BUTTON);
		Utility.ScrollToElement(cpelements.COPY_BUTTON, driver);
		cpelements.COPY_BUTTON.click();
		reslogger.info("Copy Button Clicked");
		test_steps.add("Copy Button Clicked");
		Wait.wait10Second();
		Wait.explicit_wait_visibilityof_webelement(cpelements.COPY_OF_SPLITRESERVATION, driver);
		Wait.WaitForElement(driver, OR_Reservation.COPY_OF_SPLITRESERVATION);
		cpelements.COPY_OF_SPLITRESERVATION.click();

	}

	public void emptySubjectWarningMessageInNotes(WebDriver driver, ArrayList test_steps, String IsAddNotes,
			String NoteType, String Subject, String Description) throws Exception {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CP_AddNotes);
		test_steps.add("******************* Adding Notes **********************");
		reslogger.info("******************* Adding Notes **********************");
		if (IsAddNotes.equalsIgnoreCase("Yes")) {
			res.CP_AddNotes.click();
			test_steps.add("Click on Add Notes");
			reslogger.info("Click on Add Notes");
			Wait.wait5Second();
			String noteTypeArrow = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Type']/..//button";
			Wait.WaitForElement(driver, noteTypeArrow);
			try {
				JavascriptExecutor executor = (JavascriptExecutor) driver;
				executor.executeScript("arguments[0].click();", driver.findElement(By.xpath(noteTypeArrow)));

			} catch (Exception e) {
				driver.findElement(By.xpath(noteTypeArrow)).click();
			}

			String noteType = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Type']/..//button/..//div//li/a/span[text()='"
					+ NoteType.trim() + "']";
			Wait.WaitForElement(driver, noteType);
			driver.findElement(By.xpath(noteType)).click();
			test_steps.add("Select Note Type : " + NoteType);
			reslogger.info("Select Note Type : " + NoteType);

			String subject = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Subject']/..//input";
			Wait.WaitForElement(driver, subject);
			driver.findElement(By.xpath(subject)).sendKeys(Subject);
			test_steps.add("Enter subject : " + Subject);
			reslogger.info("Enter subject : " + Subject);

			String description = "//h4[text()='Add Notes']/../..//div/div//div//label[text()='Description']/preceding-sibling::textarea";
			Wait.WaitForElement(driver, description);
			driver.findElement(By.xpath(description)).sendKeys(Description);
			test_steps.add("Enter Description : " + Description);
			reslogger.info("Enter Description : " + Description);

			String user = "//input[starts-with(@data-bind,'value: updatedBy')]";

			JavascriptExecutor js = (JavascriptExecutor) driver;
			user = (String) js.executeScript("return arguments[0].value", driver.findElement(By.xpath(user)));

			String add = "//h4[text()='Add Notes']/../..//button[text()='Add']";
			Wait.WaitForElement(driver, add);
			Utility.customAssert(driver.findElement(By.xpath(add)).isEnabled() + "", "true", true,
					"Successfully Verified Add Note Button", "Successfully Verified Add Note Button", true, test_steps);
			driver.findElement(By.xpath(add)).click();
			test_steps.add("Click on Add");
			reslogger.info("Click on Add");
			String actualMsg = "This field is required.";
			String emptySubjectMsg = driver.findElement(By.xpath(
					"//h4[text()='Add Notes']/../..//div/div//div//label[text()='Subject']/..//span[text()='This field is required.']"))
					.getText();

			Assert.assertEquals(actualMsg, emptySubjectMsg,
					"Failed:This field is required. warning message is not showing when subject is empty");
			test_steps.add(actualMsg + " warning message is verified");
			reslogger.info(actualMsg + " warning message is verified");
		}
	}

	public void roomLock(WebDriver driver, ArrayList<String> test_steps) throws Exception {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.ROOMLOCK);

		int lockStatus = driver.findElements(By.xpath("//i[contains(@class,'fa fa-unlock ng-color-green')]")).size();
		if (lockStatus > 0) {
			res.RoomLock.click();
			test_steps.add("Room status is locked");
			reslogger.info("Room status is locked");
		} else {
			test_steps.add("Room status is already locked");
			reslogger.info("Room status is already locked");
		}

	}

	public void clickTakePaymentofDeatilsPage(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.takePaymentButton);
		// Utility.ScrollToElement(res.takePaymentButton, driver);
		// Utility.clickThroughJavaScript(driver, res.takePaymentButton);
		Utility.scrollAndClick(driver, By.xpath(OR_Reservation.takePaymentButton));
		test_steps.add("Click on Take Payment of Details Page");
		reslogger.info("Click on Take Payment of Details Page");
	}

	public String get_PromoCode(WebDriver driver, ArrayList test_steps) {
		Elements_CPReservation res = new Elements_CPReservation(driver);

		Wait.WaitForElement(driver, OR_Reservation.PromoCodeInStayInfo);
		String promoCode = res.PromoCodeInStayInfo.getText();
		test_steps.add("Getting the Promo Code  : " + promoCode);
		reslogger.info("Getting the Promo Code  : " + promoCode);

		return promoCode;
	}

	public void verifyRefundPaymentPopupAtCheckout(WebDriver driver, ArrayList<String> test_steps,
			String settleRoomCharges, String Status) throws InterruptedException {
		test_steps.add("Verify  Refund Payment Popup is Displayed or not");
		Elements_CPReservation elementCPReservation = new Elements_CPReservation(driver);
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		try {
			if (Status.equalsIgnoreCase("CheckOutAll")) {
				elementReservation.CP_Reservation_CheckOutAllButton.click();
				test_steps.add("Clicked on CheckOut All Button");
			} else if (Status.equalsIgnoreCase("CheckOutPrimary")) {
				elementReservation.CheckOutPrimaryGuest.click();
				test_steps.add("Clicked on CheckOut Primary Button");
			} else if (Status.equalsIgnoreCase("CheckOutSecondary")) {
				elementReservation.CheckOutSecondaryGuest.click();
				test_steps.add("Clicked on CheckOut Additional Button");
			} else {
				elementReservation.CheckOut.click();
				test_steps.add("Clicked on CheckOut Button for Last Room For Single");
			}
		} catch (Exception e) {
			e.printStackTrace();
			elementReservation.CheckOut.click();
			if (Status.equalsIgnoreCase("CheckOutPrimary")) {
				test_steps.add("Clicked on CheckOut Primary Button");
			} else {
				test_steps.add("Clicked on CheckOut Additional Button");
			}
		}
		Wait.wait2Second();
		String settleText = "(//div[@class='modal-body'])[last()]";
		WebElement settleRoomChargesElement = driver.findElement(By.xpath(settleText));
		if (settleRoomChargesElement.isDisplayed()) {
			test_steps.add(settleRoomChargesElement.getText());
			if (!settleRoomCharges.equalsIgnoreCase("")) {
				try {
					Wait.wait3Second();
					String settleRoom = "(//button[text()='" + settleRoomCharges + "'])[last()]";
					driver.findElement(By.xpath(settleRoom)).click();
					test_steps.add("Clicked on 'Settle Room Charges' <b>" + settleRoomCharges + "</b> Button");
				} catch (Exception e) {
				}
			}
		} else {
			test_steps.add("'Settle Room Charges ' popup is not displayed");
		}
		generatGuestReportToggle(driver, test_steps, "No");
		test_steps.add("Unchecked Guest Report Toggle");
		Utility.clickThroughJavaScript(driver, driver.findElement(By.xpath(OR_Reservation.ProceedToCheckOutPayment)));
		test_steps.add("Clicked on Proceed To Payment Button");
		Wait.wait3Second();
		if (elementCPReservation.checkout_ProceedMessage.isDisplayed()) {
			test_steps.add(elementCPReservation.checkout_ProceedMessage.getText());
			elementCPReservation.checkoutTakemeToFolio.click();
			test_steps.add("Verified <b>Refund Payment Popup</b> is Displayed");
		} else {
			test_steps.add("Verify <b>Refund Payment Popup</b> is not Displayed");
		}
	}

	public void verifyGuestsStatus(WebDriver driver, String status, ArrayList<String> testSteps)
			throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		testSteps.add("Verify <b>Primary Guest</b> Status");
		if (elementReservation.checkInPrimaryGuest.isDisplayed()) {
			testSteps.add("Verify <b>Primary Guest</b> Status is not CheckedIn");
		} else {
			testSteps.add("Verify <b>Primary Guest</b> Status is CheckedIn");
		}
		testSteps.add("Verify <b>Secondary Guest</b> Status");
		if (elementReservation.checkInSecondaryGuest.isDisplayed()) {
			testSteps.add("Verify <b>Secondary Guest</b> Status is not CheckedIn");
		} else {
			testSteps.add("Verify <b>Secondary Guest</b> Status is CheckedIn");
		}
	}

	public void verifyCheckOutGuestName(WebDriver driver, ArrayList<String> test_steps, String expectedGuestName)
			throws InterruptedException {
		try {
			Wait.wait3Second();
			test_steps.add("Verify Header Bar Guest Name <b>" + expectedGuestName + "</b>");
			String foundvalue = driver
					.findElement(By.xpath(OR_Reservation.CP_SECONDARYGUEST_CHECKIN_CHECKOUTTAB_TITLENAME)).getText();
			assertEquals(foundvalue, expectedGuestName, "Guest Name not match");
			test_steps.add("Verified Header Bar Guest Name <b>" + expectedGuestName + " </b>");
		} catch (Exception e) {
			test_steps.add("Failed to Verify Guest Name <b>" + e.toString() + " </b>");
		}
	}

	public void verifySecondaryGuestReservationStatusFromButton(WebDriver driver, ArrayList<String> test_steps)
			throws InterruptedException {
		Elements_Reservation elementReservation = new Elements_Reservation(driver);
		String secondaryRollBackButton = "//div[contains(@data-bind,'$parent.ReservationStatus')][2]//button[text()='Roll Back']";

		if (elementReservation.checkInSecondaryGuest.isDisplayed()) {
			if (elementReservation.checkInSecondaryGuest.isDisplayed()) {
				test_steps.add("Verified Reservation Status for Primary Guest Is Reserved");
			}

		} else if (elementReservation.CheckOutSecondaryGuest.isDisplayed()) {
			test_steps.add("Verified Reservation Status for Secondary Guest Is In Checked in");
		} else {
			WebElement secondaryRollBackButtonElement = driver.findElement(By.xpath(secondaryRollBackButton));
			if (secondaryRollBackButtonElement.isDisplayed()) {
				test_steps.add("Verified Reservation Status for Secondary Guest Is CheckedOut");

			}
		}

	}

	public void clickGenerateGuestReportToggleForCheckoutPopup(WebDriver driver, ArrayList<String> testSteps) {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CheckOutGuestRegirstrationReportToggle);
		Wait.waitForElementToBeVisibile(By.xpath(OR_Reservation.CheckOutGuestRegirstrationReportToggle), driver);
		Wait.waitForElementToBeClickable(By.xpath(OR_Reservation.CheckOutGuestRegirstrationReportToggle), driver);
		res.CheckOutGuestRegirstrationReportToggle.click();
		testSteps.add("Click on toggle button for report generate");
		reslogger.info("Click on toggle button for report generate");

	}

	public ArrayList<String> clickSearch(WebDriver driver, ArrayList<String> test_steps) throws InterruptedException {

		Elements_CPReservation res = new Elements_CPReservation(driver);
		try {
			Wait.WaitForElement(driver, OR_Reservation.CP_NewReservation_Search);
			res.CP_NewReservation_Search.click();
		} catch (Exception e) {

		}
		test_steps.add("Clicking on Search");
		reslogger.info("Clicking on Search");
		return test_steps;
	}

	public void clickConfirmCheckInButton(WebDriver driver, ArrayList<String> testSteps)
			throws InterruptedException {
		Elements_CPReservation reservation = new Elements_CPReservation(driver);
		Wait.WaitForElement(driver, OR_Reservation.CheckInConfirmButton);
		Utility.ScrollToElement(reservation.CheckInConfirmButton, driver);
		reservation.CheckInConfirmButton.click();
		testSteps.add("Click on confirm checkin button");
		reslogger.info("Click on confirm checkin button");
	}
}
